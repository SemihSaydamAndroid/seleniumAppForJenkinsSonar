;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:jira-projects-backbone', location = 'lib/backbone.js' */
define("jira-projects-backbone",["jquery","underscore","atlassian/libs/factories/backbone-1.0.0","jira/backbone-queryparams"],function(e,b,a,c){var d=a(b,e);c(d);return d});;
;
/* module-key = 'com.atlassian.plugin.jslibs:marionette-2.1.0-factory', location = 'factories/marionette/2.1.0/marionette-2.1.0-factory.js' */
/*
 Includes BabySitter
 https://github.com/marionettejs/backbone.babysitter/

 Includes Wreqr
 https://github.com/marionettejs/backbone.wreqr/
*/
'use strict';(function(m){define("atlassian/libs/factories/marionette-2.1.0",function(){return function(f,e){f={_:f,Backbone:e};m.call(f);return f.Marionette.noConflict()}})})(function(){(function(m,f){m.Marionette=f(m,m.Backbone,m._)})(this,function(m,f,e){function k(a,b){a=Error(a);a.name=b||"Error";throw a;}(function(a,b){var c=a.ChildViewContainer;a.ChildViewContainer=function(a,b){var c=function(a){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();b.each(a,this.add,
this)};b.extend(c.prototype,{add:function(a,b){var c=a.cid;this._views[c]=a;a.model&&(this._indexByModel[a.model.cid]=c);b&&(this._indexByCustom[b]=c);this._updateLength();return this},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this.findByCid(this._indexByModel[a])},findByCustom:function(a){return this.findByCid(this._indexByCustom[a])},findByIndex:function(a){return b.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var c=
a.cid;a.model&&delete this._indexByModel[a.model.cid];b.any(this._indexByCustom,function(a,b){if(a===c)return delete this._indexByCustom[b],!0},this);delete this._views[c];this._updateLength();return this},call:function(a){this.apply(a,b.tail(arguments))},apply:function(a,c){b.each(this._views,function(e){b.isFunction(e[a])&&e[a].apply(e,c||[])})},_updateLength:function(){this.length=b.size(this._views)}});b.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),
function(a){c.prototype[a]=function(){var c=[b.values(this._views)].concat(b.toArray(arguments));return b[a].apply(b,c)}});return c}(a,b);a.ChildViewContainer.VERSION="0.1.4";a.ChildViewContainer.noConflict=function(){a.ChildViewContainer=c;return this};return a.ChildViewContainer})(f,e);(function(a,b){var c=a.Wreqr,e=a.Wreqr={};a.Wreqr.VERSION="1.3.1";a.Wreqr.noConflict=function(){a.Wreqr=c;return this};e.Handlers=function(a,b){var c=function(a){this.options=a;this._wreqrHandlers={};b.isFunction(this.initialize)&&
this.initialize(a)};c.extend=a.Model.extend;b.extend(c.prototype,a.Events,{setHandlers:function(a){b.each(a,function(a,c){var e=null;b.isObject(a)&&!b.isFunction(a)&&(e=a.context,a=a.callback);this.setHandler(c,a,e)},this)},setHandler:function(a,b,c){this._wreqrHandlers[a]={callback:b,context:c};this.trigger("handler:add",a,b,c)},hasHandler:function(a){return!!this._wreqrHandlers[a]},getHandler:function(a){var b=this._wreqrHandlers[a];if(b)return function(){var a=Array.prototype.slice.apply(arguments);
return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}});return c}(a,b);e.CommandStorage=function(){var c=function(a){this.options=a;this._commands={};b.isFunction(this.initialize)&&this.initialize(a)};b.extend(c.prototype,a.Events,{getCommands:function(a){var b=this._commands[a];b||(b={command:a,instances:[]},this._commands[a]=b);return b},addCommand:function(a,b){this.getCommands(a).instances.push(b)},
clearCommands:function(a){this.getCommands(a).instances=[]}});return c}();e.Commands=function(a){return a.Handlers.extend({storageType:a.CommandStorage,constructor:function(b){this.options=b||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);var c=Array.prototype.slice.call(arguments);a.Handlers.prototype.constructor.apply(this,c)},execute:function(a,b){a=arguments[0];b=Array.prototype.slice.call(arguments,1);this.hasHandler(a)?this.getHandler(a).apply(this,
b):this.storage.addCommand(a,b)},_executeCommands:function(a,c,e){var d=this.storage.getCommands(a);b.each(d.instances,function(a){c.apply(e,a)});this.storage.clearCommands(a)},_initializeStorage:function(a){a=a.storageType||this.storageType;this.storage=b.isFunction(a)?new a:a}})}(e);e.RequestResponse=function(a){return a.Handlers.extend({request:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);if(this.hasHandler(a))return this.getHandler(a).apply(this,b)}})}(e);e.EventAggregator=
function(a,b){var c=function(){};c.extend=a.Model.extend;b.extend(c.prototype,a.Events);return c}(a,b);e.Channel=function(a){var c=function(b){this.vent=new a.EventAggregator;this.reqres=new a.RequestResponse;this.commands=new a.Commands;this.channelName=b};b.extend(c.prototype,{reset:function(){this.vent.off();this.vent.stopListening();this.reqres.removeAllHandlers();this.commands.removeAllHandlers();return this},connectEvents:function(a,b){this._connect("vent",a,b);return this},connectCommands:function(a,
b){this._connect("commands",a,b);return this},connectRequests:function(a,b){this._connect("reqres",a,b);return this},_connect:function(a,c,e){if(c){e=e||this;var d="vent"===a?"on":"setHandler";b.each(c,function(c,g){this[a][d](g,b.bind(c,e))},this)}}});return c}(e);e.radio=function(a){var c=function(){this._channels={};this.vent={};this.commands={};this.reqres={};this._proxyMethods()};b.extend(c.prototype,{channel:function(a){if(!a)throw Error("Channel must receive a name");return this._getChannel(a)},
_getChannel:function(b){var c=this._channels[b];c||(c=new a.Channel(b),this._channels[b]=c);return c},_proxyMethods:function(){b.each(["vent","commands","reqres"],function(a){b.each(e[a],function(b){this[a][b]=d(this,a,b)},this)},this)}});var e={vent:"on off trigger once stopListening listenTo listenToOnce".split(" "),commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},d=function(a,b,
c){return function(e){var d=a._getChannel(e)[b],g=Array.prototype.slice.call(arguments,1);return d[c].apply(d,g)}};return new c}(e);return a.Wreqr})(f,e);var p=f.ChildViewContainer.noConflict(),q=f.Wreqr.noConflict(),r=m.Marionette,d=f.Marionette={};d.VERSION="2.1.0";d.noConflict=function(){m.Marionette=r;return this};f.Marionette=d;d.Deferred=f.$.Deferred;var l=Array.prototype.slice;d.extend=f.Model.extend;d.getOption=function(a,b){if(a&&b)return a.options&&void 0!==a.options[b]?a.options[b]:a[b]};
d.proxyGetOption=function(a){return d.getOption(this,a)};d.normalizeMethods=function(a){var b={};e.each(a,function(a,d){e.isFunction(a)||(a=this[a]);a&&(b[d]=a)},this);return b};d.normalizeUIKeys=function(a,b){if("undefined"!==typeof a)return e.each(e.keys(a),function(c){var e=/@ui\.[a-zA-Z_$0-9]*/g;c.match(e)&&(a[c.replace(e,function(a){return b[a.slice(4)]})]=a[c],delete a[c])}),a};d.actAsCollection=function(a,b){e.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),
function(c){a[c]=function(){var a=[e.values(e.result(this,b))].concat(e.toArray(arguments));return e[c].apply(e,a)}})};d.triggerMethod=function(){function a(a,b,e){return e.toUpperCase()}var b=/(^|:)(\w)/gi;return function(c){var d=this["on"+c.replace(b,a)],h;e.isFunction(d)&&(h=d.apply(this,e.tail(arguments)));e.isFunction(this.trigger)&&this.trigger.apply(this,arguments);return h}}();d.MonitorDOMRefresh=function(a){function b(b){b._isShown&&b._isRendered&&f.$.contains(a,b.el)&&e.isFunction(b.triggerMethod)&&
b.triggerMethod("dom:refresh")}return function(a){a.listenTo(a,"show",function(){a._isShown=!0;b(a)});a.listenTo(a,"render",function(){a._isRendered=!0;b(a)})}}(document.documentElement);(function(a){function b(a,b,c,d){d=d.split(/\s+/);e.each(d,function(e){var d=a[e];d||k('Method "'+e+'" was configured as an event handler, but does not exist.');a.listenTo(b,c,d)})}function c(a,b,c,e){a.listenTo(b,c,e)}function d(a,b,c,d){d=d.split(/\s+/);e.each(d,function(e){a.stopListening(b,c,a[e])})}function h(a,
b,c,e){a.stopListening(b,c,e)}function n(a,b,c,d,g){b&&c&&(e.isFunction(c)&&(c=c.call(a)),e.each(c,function(c,h){e.isFunction(c)?d(a,b,h,c):g(a,b,h,c)}))}a.bindEntityEvents=function(a,e,d){n(a,e,d,c,b)};a.unbindEntityEvents=function(a,b,c){n(a,b,c,h,d)};a.proxyBindEntityEvents=function(b,c){return a.bindEntityEvents(this,b,c)};a.proxyUnbindEntityEvents=function(b,c){return a.unbindEntityEvents(this,b,c)}})(d);d.Callbacks=function(){this._deferred=d.Deferred();this._callbacks=[]};e.extend(d.Callbacks.prototype,
{add:function(a,b){var c=e.result(this._deferred,"promise");this._callbacks.push({cb:a,ctx:b});c.then(function(c){b&&(c.context=b);a.call(c.context,c.options)})},run:function(a,b){this._deferred.resolve({options:a,context:b})},reset:function(){var a=this._callbacks;this._deferred=d.Deferred();this._callbacks=[];e.each(a,function(a){this.add(a.cb,a.ctx)},this)}});d.Controller=function(a){this.options=a||{};e.isFunction(this.initialize)&&this.initialize(this.options)};d.Controller.extend=d.extend;e.extend(d.Controller.prototype,
f.Events,{destroy:function(){var a=l.call(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(a));this.triggerMethod.apply(this,["destroy"].concat(a));this.stopListening();this.off();return this},triggerMethod:d.triggerMethod,getOption:d.proxyGetOption});d.Object=function(a){this.options=e.extend({},e.result(this,"options"),a);this.initialize(this.options)};d.Object.extend=d.extend;e.extend(d.Object.prototype,{initialize:function(){},destroy:function(){this.triggerMethod("before:destroy");
this.triggerMethod("destroy");this.stopListening()},triggerMethod:d.triggerMethod,getOption:d.proxyGetOption,bindEntityEvents:d.proxyBindEntityEvents,unbindEntityEvents:d.proxyUnbindEntityEvents});e.extend(d.Object.prototype,f.Events);d.Region=function(a){this.options=a||{};this.el=this.getOption("el");(this.el=this.el instanceof f.$?this.el[0]:this.el)||k('An "el" must be specified for a region.',"NoElError");this.$el=this.getEl(this.el);if(this.initialize){var b=l.apply(arguments);this.initialize.apply(this,
b)}};e.extend(d.Region,{buildRegion:function(a,b){if(e.isString(a))return this._buildRegionFromSelector(a,b);if(a.selector||a.el||a.regionClass)return this._buildRegionFromObject(a,b);if(e.isFunction(a))return this._buildRegionFromRegionClass(a);k("Improper region configuration type. Please refer to http://marionettejs.com/docs/marionette.region.html#region-configuration-types")},_buildRegionFromSelector:function(a,b){return new b({el:a})},_buildRegionFromObject:function(a,b){b=a.regionClass||b;var c=
e.omit(a,"selector","regionClass");a.selector&&!c.el&&(c.el=a.selector);b=new b(c);a.parentEl&&(b.getEl=function(b){if(e.isObject(b))return f.$(b);var c=a.parentEl;e.isFunction(c)&&(c=c());return c.find(b)});return b},_buildRegionFromRegionClass:function(a){return new a}});e.extend(d.Region.prototype,f.Events,{show:function(a,b){this._ensureElement();b=b||{};var c=a!==this.currentView,d=!!b.forceShow,h=!!this.currentView;!b.preventDestroy&&c&&this.empty();if(c||d)a.once("destroy",e.bind(this.empty,
this)),a.render(),h&&this.triggerMethod("before:swap",a),this.triggerMethod("before:show",a),e.isFunction(a.triggerMethod)?a.triggerMethod("before:show"):this.triggerMethod.call(a,"before:show"),this.attachHtml(a),this.currentView=a,h&&this.triggerMethod("swap",a),this.triggerMethod("show",a),e.isFunction(a.triggerMethod)?a.triggerMethod("show"):this.triggerMethod.call(a,"show");return this},_ensureElement:function(){e.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]);this.$el&&
0!==this.$el.length||k('An "el" '+this.$el.selector+" must exist in DOM")},getEl:function(a){return f.$(a)},attachHtml:function(a){this.el.innerHTML="";this.el.appendChild(a.el)},empty:function(){var a=this.currentView;if(a)return this.triggerMethod("before:empty",a),this._destroyView(),this.triggerMethod("empty",a),delete this.currentView,this},_destroyView:function(){var a=this.currentView;a.destroy&&!a.isDestroyed?a.destroy():a.remove&&a.remove()},attachView:function(a){this.currentView=a;return this},
hasView:function(){return!!this.currentView},reset:function(){this.empty();this.$el&&(this.el=this.$el.selector);delete this.$el;return this},getOption:d.proxyGetOption,triggerMethod:d.triggerMethod});d.Region.extend=d.extend;d.RegionManager=function(a){var b=a.Controller.extend({constructor:function(b){this._regions={};a.Controller.call(this,b)},addRegions:function(a,b){e.isFunction(a)&&(a=a.apply(this,arguments));var c={};e.each(a,function(a,d){e.isString(a)&&(a={selector:a});a.selector&&(a=e.defaults({},
a,b));a=this.addRegion(d,a);c[d]=a},this);return c},addRegion:function(b,d){var c=e.isObject(d),g=e.isString(d),f=!!d.selector;d=g||c&&f?a.Region.buildRegion(d,a.Region):e.isFunction(d)?a.Region.buildRegion(d,a.Region):d;this.triggerMethod("before:add:region",b,d);this._store(b,d);this.triggerMethod("add:region",b,d);return d},get:function(a){return this._regions[a]},getRegions:function(){return e.clone(this._regions)},removeRegion:function(a){var b=this._regions[a];this._remove(a,b);return b},removeRegions:function(){var a=
this.getRegions();e.each(this._regions,function(a,b){this._remove(b,a)},this);return a},emptyRegions:function(){var a=this.getRegions();e.each(a,function(a){a.empty()},this);return a},destroy:function(){this.removeRegions();return a.Controller.prototype.destroy.apply(this,arguments)},_store:function(a,b){this._regions[a]=b;this._setLength()},_remove:function(a,b){this.triggerMethod("before:remove:region",a,b);b.empty();b.stopListening();delete this._regions[a];this._setLength();this.triggerMethod("remove:region",
a,b)},_setLength:function(){this.length=e.size(this._regions)}});a.actAsCollection(b.prototype,"_regions");return b}(d);d.TemplateCache=function(a){this.templateId=a};e.extend(d.TemplateCache,{templateCaches:{},get:function(a){var b=this.templateCaches[a];b||(b=new d.TemplateCache(a),this.templateCaches[a]=b);return b.load()},clear:function(){var a,b=l.call(arguments),c=b.length;if(0<c)for(a=0;a<c;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}});e.extend(d.TemplateCache.prototype,
{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(a)},loadTemplate:function(a){var b=f.$(a).html();b&&0!==b.length||k('Could not find template: "'+a+'"',"NoTemplateError");return b},compileTemplate:function(a){return e.template(a)}});d.Renderer={render:function(a,b){a||k("Cannot render the template since its false, null or undefined.","TemplateNotFoundError");return("function"===typeof a?
a:d.TemplateCache.get(a))(b)}};d.View=f.View.extend({constructor:function(a){e.bindAll(this,"render");this.options=e.extend({},e.result(this,"options"),e.isFunction(a)?a.call(this):a);this.events=this.normalizeUIKeys(e.result(this,"events"));e.isObject(this.behaviors)&&new d.Behaviors(this);f.View.apply(this,arguments);d.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled)},getTemplate:function(){return this.getOption("template")},serializeModel:function(a){return a.toJSON.apply(a,
l.call(arguments,1))},mixinTemplateHelpers:function(a){a=a||{};var b=this.getOption("templateHelpers");e.isFunction(b)&&(b=b.call(this));return e.extend(a,b)},normalizeUIKeys:function(a){var b=e.result(this,"ui"),c=e.result(this,"_uiBindings");return d.normalizeUIKeys(a,c||b)},configureTriggers:function(){if(this.triggers){var a={},b=this.normalizeUIKeys(e.result(this,"triggers"));e.each(b,function(b,d){var c=e.isObject(b),g=c?b.event:b;a[d]=function(a){if(a){var e=a.preventDefault,d=a.stopPropagation,
h=c?b.stopPropagation:d;(c?b.preventDefault:e)&&e&&e.apply(a);h&&d&&d.apply(a)}this.triggerMethod(g,{view:this,model:this.model,collection:this.collection})}},this);return a}},delegateEvents:function(a){this._delegateDOMEvents(a);this.bindEntityEvents(this.model,this.getOption("modelEvents"));this.bindEntityEvents(this.collection,this.getOption("collectionEvents"));return this},_delegateDOMEvents:function(a){a=a||this.events;e.isFunction(a)&&(a=a.call(this));a=this.normalizeUIKeys(a);var b={},c=e.result(this,
"behaviorEvents")||{},d=this.configureTriggers();e.extend(b,c,a,d);f.View.prototype.delegateEvents.call(this,b)},undelegateEvents:function(){var a=l.call(arguments);f.View.prototype.undelegateEvents.apply(this,a);this.unbindEntityEvents(this.model,this.getOption("modelEvents"));this.unbindEntityEvents(this.collection,this.getOption("collectionEvents"));return this},onShowCalled:function(){},_ensureViewIsIntact:function(){if(this.isDestroyed){var a=Error("Cannot use a view thats already been destroyed.");
a.name="ViewDestroyedError";throw a;}},destroy:function(){if(!this.isDestroyed){var a=l.call(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(a));this.isDestroyed=!0;this.triggerMethod.apply(this,["destroy"].concat(a));this.unbindUIElements();this.remove();return this}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=e.result(this,"_uiBindings");this.ui={};e.each(e.keys(a),function(b){this.ui[b]=this.$(a[b])},this)}},unbindUIElements:function(){this.ui&&
this._uiBindings&&(e.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)},triggerMethod:d.triggerMethod,normalizeMethods:d.normalizeMethods,getOption:d.proxyGetOption,bindEntityEvents:d.proxyBindEntityEvents,unbindEntityEvents:d.proxyUnbindEntityEvents});d.ItemView=d.View.extend({constructor:function(){d.View.apply(this,arguments)},serializeData:function(){var a={};this.model?a=e.partial(this.serializeModel,this.model).apply(this,arguments):this.collection&&
(a={items:e.partial(this.serializeCollection,this.collection).apply(this,arguments)});return a},serializeCollection:function(a){return a.toJSON.apply(a,l.call(arguments,1))},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderTemplate();this.bindUIElements();this.triggerMethod("render",this);return this},_renderTemplate:function(){var a=this.getTemplate();if(!1!==a){a||k("Cannot render the template since it is null or undefined.","UndefinedTemplateError");
var b=this.serializeData();b=this.mixinTemplateHelpers(b);a=d.Renderer.render(a,b,this);this.attachElContent(a);return this}},attachElContent:function(a){this.$el.html(a);return this},destroy:function(){if(!this.isDestroyed)return d.View.prototype.destroy.apply(this,arguments)}});d.CollectionView=d.View.extend({childViewEventPrefix:"childview",constructor:function(a){var b=a||{};this.sort=e.isUndefined(b.sort)?!0:b.sort;this._initChildViewStorage();d.View.apply(this,arguments);this._initialEvents();
this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment();this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer();this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1;this._triggerBeforeShowBufferedChildren();this.attachBuffer(this,this.elBuffer);this._triggerShowBufferedChildren();this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){this._isShown&&e.invoke(this._bufferedChildren,"triggerMethod","before:show")},
_triggerShowBufferedChildren:function(){this._isShown&&(e.each(this._bufferedChildren,function(a){e.isFunction(a.triggerMethod)?a.triggerMethod("show"):d.triggerMethod.call(a,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(a){this.destroyEmptyView();
var b=this.getChildView(a),c=this.collection.indexOf(a);this.addChild(a,b,c)},_onCollectionRemove:function(a){a=this.children.findByModel(a);this.removeChildView(a);this.checkEmpty()},onShowCalled:function(){this.children.each(function(a){e.isFunction(a.triggerMethod)?a.triggerMethod("show"):d.triggerMethod.call(a,"show")})},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderChildren();this.triggerMethod("render",this);return this},resortView:function(){this.render()},
_sortViews:function(){this.collection.find(function(a,b){a=this.children.findByModel(a);return!a||a._index!==b},this)&&this.resortView()},_renderChildren:function(){this.destroyEmptyView();this.destroyChildren();this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this))},showCollection:function(){var a;this.collection.each(function(b,c){a=this.getChildView(b);
this.addChild(b,a,c)},this)},showEmptyView:function(){var a=this.getEmptyView();if(a&&!this._showingEmptyView){this.triggerMethod("before:render:empty");this._showingEmptyView=!0;var b=new f.Model;this.addEmptyView(b,a);this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.destroyChildren(),delete this._showingEmptyView)},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(a,b){var c=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");
e.isFunction(c)&&(c=c.call(this));a=this.buildChildView(a,b,c);this._isShown&&this.triggerMethod.call(a,"before:show");this.children.add(a);this.renderChildView(a,-1);this._isShown&&this.triggerMethod.call(a,"show")},getChildView:function(a){(a=this.getOption("childView"))||k('A "childView" must be specified',"NoChildViewError");return a},addChild:function(a,b,c){var d=this.getOption("childViewOptions");e.isFunction(d)&&(d=d.call(this,a,c));a=this.buildChildView(a,b,d);this._updateIndices(a,!0,c);
this._addChildView(a,c);return a},_updateIndices:function(a,b,c){this.sort&&(b?(a._index=c,this.children.each(function(b){b._index>=a._index&&b._index++})):this.children.each(function(b){b._index>=a._index&&b._index--}))},_addChildView:function(a,b){this.proxyChildEvents(a);this.triggerMethod("before:add:child",a);this.children.add(a);this.renderChildView(a,b);this._isShown&&!this.isBuffering&&(e.isFunction(a.triggerMethod)?a.triggerMethod("show"):d.triggerMethod.call(a,"show"));this.triggerMethod("add:child",
a)},renderChildView:function(a,b){a.render();this.attachHtml(this,a,b);return a},buildChildView:function(a,b,c){a=e.extend({model:a},c);return new b(a)},removeChildView:function(a){a&&(this.triggerMethod("before:remove:child",a),a.destroy?a.destroy():a.remove&&a.remove(),this.stopListening(a),this.children.remove(a),this.triggerMethod("remove:child",a),this._updateIndices(a,!1));return a},isEmpty:function(a){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&
this.showEmptyView()},attachBuffer:function(a,b){a.$el.append(b)},attachHtml:function(a,b,c){a.isBuffering?(a.elBuffer.appendChild(b.el),a._bufferedChildren.push(b)):a._insertBefore(b,c)||a._insertAfter(b)},_insertBefore:function(a,b){var c;this.sort&&b<this.children.length-1&&(c=this.children.find(function(a){return a._index===b+1}));return c?(c.$el.before(a.el),!0):!1},_insertAfter:function(a){this.$el.append(a.el)},_initChildViewStorage:function(){this.children=new p},destroy:function(){if(!this.isDestroyed)return this.triggerMethod("before:destroy:collection"),
this.destroyChildren(),this.triggerMethod("destroy:collection"),d.View.prototype.destroy.apply(this,arguments)},destroyChildren:function(){var a=this.children.map(e.identity);this.children.each(this.removeChildView,this);this.checkEmpty();return a},proxyChildEvents:function(a){var b=this.getOption("childViewEventPrefix");this.listenTo(a,"all",function(){var c=l.call(arguments),d=c[0],h=this.normalizeMethods(e.result(this,"childEvents"));c[0]=b+":"+d;c.splice(1,0,a);"undefined"!==typeof h&&e.isFunction(h[d])&&
h[d].apply(this,c.slice(1));this.triggerMethod.apply(this,c)},this)}});d.CompositeView=d.CollectionView.extend({constructor:function(){d.CollectionView.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this._renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))})},
getChildView:function(a){(a=this.getOption("childView")||this.constructor)||k('A "childView" must be specified',"NoChildViewError");return a},serializeData:function(){var a={};this.model&&(a=e.partial(this.serializeModel,this.model).apply(this,arguments));return a},render:function(){this._ensureViewIsIntact();this.isRendered=!0;this.resetChildViewContainer();this.triggerMethod("before:render",this);this._renderTemplate();this._renderChildren();this.triggerMethod("render",this);return this},_renderChildren:function(){this.isRendered&&
d.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var a=this.serializeData();a=this.mixinTemplateHelpers(a);this.triggerMethod("before:render:template");var b=this.getTemplate();a=d.Renderer.render(b,a,this);this.attachElContent(a);this.bindUIElements();this.triggerMethod("render:template")},attachElContent:function(a){this.$el.html(a);return this},attachBuffer:function(a,b){this.getChildViewContainer(a).append(b)},_insertAfter:function(a){this.getChildViewContainer(this).append(a.el)},
getChildViewContainer:function(a){if("$childViewContainer"in a)return a.$childViewContainer;var b;(b=d.getOption(a,"childViewContainer"))?(b=e.isFunction(b)?b.call(a):b,b="@"===b.charAt(0)&&a.ui?a.ui[b.substr(4)]:a.$(b),0>=b.length&&k('The specified "childViewContainer" was not found: '+a.childViewContainer,"ChildViewContainerMissingError")):b=a.$el;return a.$childViewContainer=b},resetChildViewContainer:function(){this.$childViewContainer&&delete this.$childViewContainer}});d.LayoutView=d.ItemView.extend({regionClass:d.Region,
constructor:function(a){a=a||{};this._firstRender=!0;this._initializeRegions(a);d.ItemView.call(this,a)},render:function(){this._ensureViewIsIntact();this._firstRender?this._firstRender=!1:this._reInitializeRegions();return d.ItemView.prototype.render.apply(this,arguments)},destroy:function(){if(this.isDestroyed)return this;this.regionManager.destroy();return d.ItemView.prototype.destroy.apply(this,arguments)},addRegion:function(a,b){this.triggerMethod("before:region:add",a);var c={};c[a]=b;return this._buildRegions(c)[a]},
addRegions:function(a){this.regions=e.extend({},this.regions,a);return this._buildRegions(a)},removeRegion:function(a){this.triggerMethod("before:region:remove",a);delete this.regions[a];return this.regionManager.removeRegion(a)},getRegion:function(a){return this.regionManager.get(a)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(a){var b=this,c={regionClass:this.getOption("regionClass"),parentEl:function(){return b.$el}};return this.regionManager.addRegions(a,
c)},_initializeRegions:function(a){this._initRegionManager();var b=e.isFunction(this.regions)?this.regions(a):this.regions||{};var c=this.getOption.call(a,"regions");e.isFunction(c)&&(c=c.call(this,a));e.extend(b,c);this.addRegions(b)},_reInitializeRegions:function(){this.regionManager.emptyRegions();this.regionManager.each(function(a){a.reset()})},getRegionManager:function(){return new d.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager();this.listenTo(this.regionManager,
"before:add:region",function(a){this.triggerMethod("before:add:region",a)});this.listenTo(this.regionManager,"add:region",function(a,b){this[a]=b;this.triggerMethod("add:region",a,b)});this.listenTo(this.regionManager,"before:remove:region",function(a){this.triggerMethod("before:remove:region",a)});this.listenTo(this.regionManager,"remove:region",function(a,b){delete this[a];this.triggerMethod("remove:region",a,b)})}});d.Behavior=function(a,b){function c(b,c){this.view=c;this.defaults=a.result(this,
"defaults")||{};this.options=a.extend({},this.defaults,b);this.$=function(){return this.view.$.apply(this.view,arguments)};this.initialize.apply(this,arguments)}a.extend(c.prototype,b.Events,{initialize:function(){},destroy:function(){this.stopListening()},triggerMethod:d.triggerMethod,getOption:d.proxyGetOption,bindEntityEvents:d.proxyBindEntityEvents,unbindEntityEvents:d.proxyUnbindEntityEvents});c.extend=d.extend;return c}(e,f);d.Behaviors=function(a,b){function c(a,e){e=c.parseBehaviors(a,e||
b.result(a,"behaviors"));c.wrap(a,e,b.keys(d))}var d={setElement:function(a,c){a.apply(this,b.tail(arguments,2));b.each(c,function(a){a.$el=this.$el;a.el=this.el},this);return this},destroy:function(a,c){var d=b.tail(arguments,2);a.apply(this,d);b.invoke(c,"destroy",d);return this},bindUIElements:function(a,c){a.apply(this);b.invoke(c,a)},unbindUIElements:function(a,c){a.apply(this);b.invoke(c,a)},triggerMethod:function(a,c){var d=b.tail(arguments,2);a.apply(this,d);b.each(c,function(b){a.apply(b,
d)})},delegateEvents:function(c,d){var e=b.tail(arguments,2);c.apply(this,e);b.each(d,function(b){a.bindEntityEvents(b,this.model,a.getOption(b,"modelEvents"));a.bindEntityEvents(b,this.collection,a.getOption(b,"collectionEvents"))},this);return this},undelegateEvents:function(c,d){var e=b.tail(arguments,2);c.apply(this,e);b.each(d,function(b){a.unbindEntityEvents(b,this.model,a.getOption(b,"modelEvents"));a.unbindEntityEvents(b,this.collection,a.getOption(b,"collectionEvents"))},this);return this},
behaviorEvents:function(c,d){var e={},f=b.result(this,"ui");b.each(d,function(c,d){var h={},g=b.clone(b.result(c,"events"))||{},n=b.result(c,"ui");n=b.extend({},f,n);g=a.normalizeUIKeys(g,n);b.each(b.keys(g),function(a){var e=Array(d+2).join(" ");e=a+e;a=b.isFunction(g[a])?g[a]:c[g[a]];h[e]=b.bind(a,c)});e=b.extend(e,h)});return e}};b.extend(c,{behaviorsLookup:function(){throw Error("You must define where your behaviors are stored.See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup");
},getBehaviorClass:function(a,d){return a.behaviorClass?a.behaviorClass:b.isFunction(c.behaviorsLookup)?c.behaviorsLookup.apply(this,arguments)[d]:c.behaviorsLookup[d]},parseBehaviors:function(a,d){return b.chain(d).map(function(d,e){d=new (c.getBehaviorClass(d,e))(d,a);e=c.parseBehaviors(a,b.result(d,"behaviors"));return[d].concat(e)}).flatten().value()},wrap:function(a,c,e){b.each(e,function(e){a[e]=b.partial(d[e],a[e],c)})}});return c}(d,e);d.AppRouter=f.Router.extend({constructor:function(a){f.Router.apply(this,
arguments);this.options=a||{};var b=this.getOption("appRoutes"),c=this._getController();this.processAppRoutes(c,b);this.on("route",this._processOnRoute,this)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},_processOnRoute:function(a,b){var c=e.invert(this.getOption("appRoutes"))[a];if(e.isFunction(this.onRoute))this.onRoute(a,c,b)},processAppRoutes:function(a,b){if(b){var c=e.keys(b).reverse();e.each(c,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return this.getOption("controller")},
_addAppRoute:function(a,b,c){var d=a[c];d||k('Method "'+c+'" was not found on the controller');this.route(b,c,e.bind(d,a))},getOption:d.proxyGetOption});d.Application=function(a){this._initializeRegions(a);this._initCallbacks=new d.Callbacks;this.submodules={};e.extend(this,a);this._initChannel()};e.extend(d.Application.prototype,f.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(a){this._initCallbacks.add(a)},
start:function(a){this.triggerMethod("before:start",a);this._initCallbacks.run(a,this);this.triggerMethod("start",a)},addRegions:function(a){return this._regionManager.addRegions(a)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(a){return this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},getRegions:function(){return this._regionManager.getRegions()},module:function(a,b){var c=d.Module.getClass(b),e=l.call(arguments);
e.unshift(this);return c.create.apply(c,e)},getRegionManager:function(){return new d.RegionManager},_initializeRegions:function(a){var b=e.isFunction(this.regions)?this.regions(a):this.regions||{};this._initRegionManager();var c=d.getOption(a,"regions");e.isFunction(c)&&(c=c.call(this,a));e.extend(b,c);this.addRegions(b);return this},_initRegionManager:function(){this._regionManager=this.getRegionManager();this.listenTo(this._regionManager,"before:add:region",function(a){this.triggerMethod("before:add:region",
a)});this.listenTo(this._regionManager,"add:region",function(a,b){this[a]=b;this.triggerMethod("add:region",a,b)});this.listenTo(this._regionManager,"before:remove:region",function(a){this.triggerMethod("before:remove:region",a)});this.listenTo(this._regionManager,"remove:region",function(a,b){delete this[a];this.triggerMethod("remove:region",a,b)})},_initChannel:function(){this.channelName=e.result(this,"channelName")||"global";this.channel=e.result(this,"channel")||q.radio.channel(this.channelName);
this.vent=e.result(this,"vent")||this.channel.vent;this.commands=e.result(this,"commands")||this.channel.commands;this.reqres=e.result(this,"reqres")||this.channel.reqres},triggerMethod:d.triggerMethod,getOption:d.proxyGetOption});d.Application.extend=d.extend;d.Module=function(a,b,c){this.moduleName=a;this.options=e.extend({},this.options,c);this.initialize=c.initialize||this.initialize;this.submodules={};this._setupInitializersAndFinalizers();this.app=b;this.startWithParent=!0;e.isFunction(this.initialize)&&
this.initialize(a,b,this.options)};d.Module.extend=d.extend;e.extend(d.Module.prototype,f.Events,{initialize:function(){},addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(e.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&
(this._isInitialized=!1,this.triggerMethod("before:stop"),e.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,b){a&&(b=e.flatten([this,this.app,f,d,f.$,e,b]),a.apply(this,b))},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new d.Callbacks;this._finalizerCallbacks=
new d.Callbacks},triggerMethod:d.triggerMethod});e.extend(d.Module,{create:function(a,b,c){var d=a,f=l.call(arguments);f.splice(0,3);b=b.split(".");var n=[];n[b.length-1]=c;e.each(b,function(b,e){var g=d;d=this._getModule(g,b,a,c);this._addModuleDefinition(g,d,n[e],f)},this);return d},_getModule:function(a,b,c,d,f){f=e.extend({},d);d=this.getClass(d);var g=a[b];g||(g=new d(b,c,f),a[b]=g,a.submodules[b]=g);return g},getClass:function(a){var b=d.Module;return a?a.prototype instanceof b?a:a.moduleClass||
b:b},_addModuleDefinition:function(a,b,c,d){var e=this._getDefine(c);c=this._getStartWithParent(c,b);e&&b.addDefinition(e,d);this._addStartWithParent(a,b,c)},_getStartWithParent:function(a,b){return e.isFunction(a)&&a.prototype instanceof d.Module?(a=b.constructor.prototype.startWithParent,e.isUndefined(a)?!0:a):e.isObject(a)?(a=a.startWithParent,e.isUndefined(a)?!0:a):!0},_getDefine:function(a){return!e.isFunction(a)||a.prototype instanceof d.Module?e.isObject(a)?a.define:null:a},_addStartWithParent:function(a,
b,c){b.startWithParent=b.startWithParent&&c;b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}});return d})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:marionette', location = '/sidebar/lib/backbone.marionette.mixins.js' */
define("jira/projects/libs/marionette-mixins",[],function(){return function a(d,f){function e(i,h){var g=this;var j=d.defaults({},h||{},{isPrevented:false,emitter:this,preventDefault:function(){this.isPrevented=true;g.trigger(i+":prevented",this)}});this.trigger(i,j);return j}function c(h,g){var i=this.triggerPreventable(h,g);if(i.isPrevented){g.preventDefault()}}d.extend(f.View.prototype,{unwrapTemplate:function b(){if(this.$el.parent().length){var g=this.$el.children();this.$el.replaceWith(g);this.setElement(g)}else{this.setElement(this.$el.children())}},triggerPreventable:e,retriggerPreventable:c});d.extend(f.Controller.prototype,{triggerPreventable:e,retriggerPreventable:c});f.ViewManager=f.Controller.extend({constructor:function(){f.Controller.apply(this,arguments);this.views={}},hideView:function(h){var g=this.views[h];if(g){this.stopListening(g);if(!g.isDestroyed){g.destroy()}delete this.views[h]}},showView:function(i,h){var g=this.buildView(i,h);g.render()},buildView:function(i,h){var g=this.views[i];if(!g){g=h.call(this);this.listenTo(g,"destroy",function(){this.hideView(i)});this.views[i]=g}return g},getView:function(g){return this.views[g]}});return f}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:marionette', location = '/sidebar/lib/backbone.marionette.adapter.js' */
define("jira/projects/libs/marionette",["jira-projects-backbone","underscore","atlassian/libs/factories/marionette-2.1.0","jira/projects/libs/marionette-mixins"],function(e,b,c,a){var d;d=c(b,e);d=a(b,d);return d});AJS.namespace("JIRA.Projects.Libs.Marionette",null,require("jira/projects/libs/marionette"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/templates/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Projects.Subnavigator.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Projects == 'undefined') { JIRA.Projects = {}; }
if (typeof JIRA.Projects.Subnavigator == 'undefined') { JIRA.Projects.Subnavigator = {}; }
if (typeof JIRA.Projects.Subnavigator.Templates == 'undefined') { JIRA.Projects.Subnavigator.Templates = {}; }


JIRA.Projects.Subnavigator.Templates.content = function(opt_data, opt_ignored) {
  var output = '<div id="subnav-opts' + ((opt_data.idSuffix) ? '-' + soy.$$escapeHtml(opt_data.idSuffix) : '') + '" class="subnav-opts subnavigator-content aui-dropdown2 aui-style-default">';
  var itemGroupList9 = opt_data.itemGroups;
  var itemGroupListLen9 = itemGroupList9.length;
  for (var itemGroupIndex9 = 0; itemGroupIndex9 < itemGroupListLen9; itemGroupIndex9++) {
    var itemGroupData9 = itemGroupList9[itemGroupIndex9];
    output += JIRA.Projects.Subnavigator.Templates.itemSection({items: itemGroupData9, hideSelectedItem: opt_data.hideSelectedItem});
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.content.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.content';
}


JIRA.Projects.Subnavigator.Templates.itemSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.items.length > 0) {
    output += '<div class="aui-dropdown2-section"><ul class="aui-list-truncate">';
    var itemList19 = opt_data.items;
    var itemListLen19 = itemList19.length;
    for (var itemIndex19 = 0; itemIndex19 < itemListLen19; itemIndex19++) {
      var itemData19 = itemList19[itemIndex19];
      output += JIRA.Projects.Subnavigator.Templates.item({item: itemData19, hideSelectedItem: opt_data.hideSelectedItem});
    }
    output += '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.itemSection.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.itemSection';
}


JIRA.Projects.Subnavigator.Templates.item = function(opt_data, opt_ignored) {
  return '<li' + ((opt_data.item.description) ? ' title="' + soy.$$escapeHtml(opt_data.item.description) + '"' : '') + '>' + ((opt_data.item.link) ? '<a data-item-id="' + soy.$$escapeHtml(opt_data.item.id) + '" href="' + soy.$$escapeHtml(opt_data.item.link) + '">' + soy.$$escapeHtml(opt_data.item.label) + '</a>' : '<a ' + ((! opt_data.hideSelectedItem) ? 'class="aui-dropdown2-radio' + ((opt_data.item.selected) ? ' checked' : '') + '"' : '') + ' data-item-id="' + soy.$$escapeHtml(opt_data.item.id) + '">' + soy.$$escapeHtml(opt_data.item.label) + '</a>') + '</li>';
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.item.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.item';
}


JIRA.Projects.Subnavigator.Templates.trigger = function(opt_data, opt_ignored) {
  return '' + ((opt_data.renderAsButton) ? '<button id="subnav-trigger' + ((opt_data.idSuffix) ? '-' + soy.$$escapeHtml(opt_data.idSuffix) : '') + '" class="subnav-trigger subnavigator-trigger aui-button aui-button-link aui-dropdown2-trigger" aria-owns="subnav-opts' + ((opt_data.idSuffix) ? '-' + soy.$$escapeHtml(opt_data.idSuffix) : '') + '" role="button" aria-label="' + soy.$$escapeHtml(opt_data.label) + '" aria-haspopup="true">' + soy.$$escapeHtml(opt_data.label) + '</button>' : '<span id="subnav-trigger' + ((opt_data.idSuffix) ? '-' + soy.$$escapeHtml(opt_data.idSuffix) : '') + '" class="subnav-trigger subnavigator-trigger">' + soy.$$escapeHtml(opt_data.label) + '</button>');
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.trigger.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.trigger';
}


JIRA.Projects.Subnavigator.Templates.title = function(opt_data, opt_ignored) {
  return '<span class="subnavigator-title" title="' + soy.$$escapeHtml(opt_data.title) + '">' + soy.$$escapeHtml(opt_data.title) + '</span>';
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.title.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.title';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/templates/templates.js' */
(function(){var a=JIRA.Projects.Subnavigator.Templates;define("jira/projects/components/subnavigator/templates",[],function(){return a})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/Content.js' */
define("jira/projects/components/subnavigator/views/content",["jira/projects/components/subnavigator/templates","underscore","jira/projects/libs/marionette","jquery"],function(b,a,d,c){return d.ItemView.extend({template:b.content,tooltipTimer:null,ui:{item:"li"},initialize:function(){this.tooltipTimeout=this.options.tooltipTimeout||600;this.hideSelectedItem=a.has(this.options,"hideSelectedItem")?this.options.hideSelectedItem:true},_hideTooltips:function(){clearTimeout(this.tooltipTimer);c(".tipsy").remove()},events:{"click @ui.item":function(g){this._hideTooltips();var f=c(g.target).attr("data-item-id");this.trigger("click",f)},"mouseenter @ui.item":function(e){this._hideTooltips();this.tooltipTimer=setTimeout(function(){c(e.currentTarget).tipsy("show")},this.tooltipTimeout)},"mouseleave @ui.item":"_hideTooltips","aui-dropdown2-hide":"_hideTooltips"},serializeData:function(){var e=this.model.get("selectedItem");var g=this.model.get("itemGroups");var f=this.hideSelectedItem;if(e){g=a.map(g,function(h){if(f){return a.reject(h,function(i){return i.id===e.id})}else{return a.map(h,function(j){var i=a.clone(j);if(i.id===e.id){i.selected=true}return i})}})}return{itemGroups:g,hideSelectedItem:f,idSuffix:this.options.id||""}},onRender:function(){this.unwrapTemplate();this._hideTooltips();c(this.ui.item).tooltip({gravity:"w",trigger:"manual"})}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/Trigger.js' */
define("jira/projects/components/subnavigator/views/trigger",["jira/projects/components/subnavigator/templates","jira/projects/libs/marionette"],function(a,b){return b.ItemView.extend({template:a.trigger,serializeData:function(){return{label:this.model.get("selectedItem").label,renderAsButton:this.model.getAllItems().length>1,idSuffix:this.options.id||""}},onRender:function(){this.unwrapTemplate()}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/StaticTrigger.js' */
define("jira/projects/components/subnavigator/views/static-trigger",["jira/projects/components/subnavigator/views/trigger"],function(a){return a.extend({serializeData:function(){return{label:this.options.label,renderAsButton:true,idSuffix:this.options.id||""}},onRender:function(){this.unwrapTemplate();this.$el.removeClass("subnav-trigger")}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/Title.js' */
define("jira/projects/components/subnavigator/views/title",["jira/projects/components/subnavigator/templates","jira/projects/libs/marionette"],function(a,b){return b.ItemView.extend({template:a.title,serializeData:function(){var c=this.model.get("selectedItem");return{title:c.label}}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/entities/Items.js' */
define("jira/projects/components/subnavigator/entities/items",["underscore","jira-projects-backbone"],function(a,b){return b.Model.extend({defaults:{itemGroups:[],selectedItem:null},isEmpty:function(){return a.isEmpty(this.getAllItems())},selectItem:function(d){var c=this.getAllItems();this.set("selectedItem",a.find(c,function(e){return e.id===d})||a.first(c))},getAllItems:function(){return a.flatten(this.get("itemGroups"))}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/Subnavigator.js' */
define("jira/projects/components/subnavigator/subnavigator",["jira/projects/components/subnavigator/views/trigger","jira/projects/components/subnavigator/views/title","jira/projects/components/subnavigator/views/static-trigger","jira/projects/components/subnavigator/views/content","jira/projects/components/subnavigator/entities/items","jira/projects/libs/marionette","jira/util/browser","underscore","jquery"],function(h,e,a,b,c,f,d,g,i){return f.Controller.extend({_shouldShow:function(){return !this.model.isEmpty()},_shouldShowTriggerView:function(){if(this.options.changeViewText){var j=this.model.getAllItems().length;return j>1}else{return true}},_sanitizeItems:function(){var j=this.options.itemGroups;if(j&&j[0]){if(!g.isArray(j[0])){return[j]}}return j},_buildModel:function(){this.model=new c({itemGroups:this._sanitizeItems()});this.model.selectItem(this.options.selectedItem);this.listenTo(this.model,"change:selectedItem",this.show)},_buildTitleView:function(){this.titleView=new e({model:this.model});this.titleView.setElement(i(this.options.titlePlaceholder))},_buildTriggerView:function(){if(this.options.changeViewText){this.triggerView=new a({model:this.model,id:this.options.id,label:this.options.changeViewText})}else{this.triggerView=new h({model:this.model,id:this.options.id})}this.triggerView.setElement(i(this.options.triggerPlaceholder))},_buildContentView:function(){this.contentView=new b({model:this.model,id:this.options.id,hideSelectedItem:this.options.hideSelectedItem});this.contentView.setElement(i(this.options.contentPlaceholder));this.listenTo(this.contentView,"click",function(l){this.model.selectItem(l);var k=this.model.get("selectedItem");var j=this.triggerPreventable("itemSelected",{item:k});if(j.isPrevented){return}if(k.link){d.reloadViaWindowLocation(k.link)}}.bind(this))},initialize:function(){this._buildModel();if(this._shouldShow()){this._buildTriggerView();this._buildContentView();if(this.options.titlePlaceholder){this._buildTitleView()}}},show:function(){if(this._shouldShow()){if(this._shouldShowTriggerView()){this.triggerView.render();this.contentView.render()}if(this.titleView){this.titleView.render()}}},selectItem:function(j){if(this._shouldShow()){this.model.selectItem(j)}}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/Subnavigator-namespaces.js' */
AJS.namespace("JIRA.Projects.Subnavigator",null,require("jira/projects/components/subnavigator/subnavigator"));AJS.namespace("JIRA.Projects.Subnavigator.Views.Content",null,require("jira/projects/components/subnavigator/views/content"));AJS.namespace("JIRA.Projects.Subnavigator.Views.StaticTrigger",null,require("jira/projects/components/subnavigator/views/static-trigger"));AJS.namespace("JIRA.Projects.Subnavigator.Views.Title",null,require("jira/projects/components/subnavigator/views/title"));AJS.namespace("JIRA.Projects.Subnavigator.Views.Trigger",null,require("jira/projects/components/subnavigator/views/trigger"));AJS.namespace("JIRA.Projects.Subnavigator.Entities.Items",null,require("jira/projects/components/subnavigator/entities/items"));AJS.namespace("JIRA.Projects.Subnavigator.Templates",null,require("jira/projects/components/subnavigator/templates"));;
;
/* module-key = 'com.xpandit.plugins.xray:subtle-single-select-resources', location = 'templates/field/subtle-single-select.soy' */
// This file was automatically generated from subtle-single-select.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.SubtleSingleSelect.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.SubtleSingleSelect == 'undefined') { RAVEN.SubtleSingleSelect = {}; }


RAVEN.SubtleSingleSelect.render = function(opt_data, opt_ignored) {
  var output = '<form id="raven-subtle-picker-form" class="aui raven-subtle-picker-form"><a id="raven-subtle-items-trigger" class="aui-button js-nav-items aui-button-subtle raven-dropdown2-arrow raven-subtle-dropdown-trigger" data-item-id="' + soy.$$escapeHtml(opt_data.selectedItem.id) + '" tabindex="0">' + soy.$$escapeHtml(opt_data.selectedItem.name) + '</a><select id="raven-subtle-picker" class="hidden">';
  var itemList8 = opt_data.items;
  var itemListLen8 = itemList8.length;
  for (var itemIndex8 = 0; itemIndex8 < itemListLen8; itemIndex8++) {
    var itemData8 = itemList8[itemIndex8];
    output += '<option value="' + soy.$$escapeHtml(itemData8.id) + '"' + ((itemData8.id == opt_data.selectedItem.id) ? ' selected' : '') + '>' + soy.$$escapeHtml(itemData8.name) + '</option>';
  }
  output += '</select></form>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.SubtleSingleSelect.render.soyTemplateName = 'RAVEN.SubtleSingleSelect.render';
}


RAVEN.SubtleSingleSelect.renderDynamic = function(opt_data, opt_ignored) {
  return '<form id="raven-subtle-picker-form" class="aui raven-subtle-picker-form"><a id="raven-subtle-items-trigger" class="aui-button js-nav-items aui-button-subtle raven-dropdown2-arrow raven-subtle-dropdown-trigger" data-item-id="' + soy.$$escapeHtml(opt_data.selectedItem.id) + '" tabindex="0">' + soy.$$escapeHtml(opt_data.selectedItem.name) + '</a><select id="raven-subtle-picker" class="hidden"></select></form>';
};
if (goog.DEBUG) {
  RAVEN.SubtleSingleSelect.renderDynamic.soyTemplateName = 'RAVEN.SubtleSingleSelect.renderDynamic';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:subtle-single-select-resources', location = 'js/field/subtle-single-select.js' */
define("js/field/subtle-single-select",["jira/ajs/select/single-select","underscore","jquery"],function(d,a,c){var b=function(f,e,h,g){this.items=f;this.initialItemsLength=f.length;this.defaultItem=e;this.$container=h;this.selectedItem=undefined;this.endpoint=g};b.prototype.additems=function(e){this.items.push(e)};b.prototype.clearFetchedItems=function(){this.items.splice(this.initialItemsLength,this.items.length-this.initialItemsLength)};b.prototype.hasEndpoint=function(){return this.endpoint!==null&&this.endpoint!==undefined};b.prototype.setItems=function(e){this.items=e||[]};b.prototype.getItems=function(){return this.items};b.prototype.hasItems=function(){return !a.isEmpty(this.items)};b.prototype.getDefaultItem=function(){return this.defaultItem};b.prototype.getDefaultItemId=function(){return this.defaultItem?this.defaultItem.id:false};b.prototype.setDefaultItem=function(e){this.defaultItem=e||undefined};b.prototype.getItemById=function(f){var e=a.find(this.items,function(g){return g.id.toString()===f.toString()});return a.isUndefined(e)?false:e};b.prototype.getSelectedItem=function(){var e=this.selectedItem;if(!e){if(this.getDefaultItem()){e=this.getDefaultItem()}else{if(this.hasItems()){e=a.last(this.getItems())}}}return e||false};b.prototype.setSelectedItem=function(f,g){this.previousSelectedItem=this.getSelectedItem();var e=this.getItemById(f);this.selectedItem=e;if(!g){c(this).trigger("selectedItemChanged",{item:e})}};b.prototype.render=function(){var f=this;var g=function(j,i){f.setSelectedItem(i.value())};var e=function(i){f.showDropdown(i,function(){f.render(f.$container)},g)};var h=this.getSelectedItem();if(this.hasEndpoint()){this.$container.html(RAVEN.SubtleSingleSelect.renderDynamic({selectedItem:h}))}else{this.$container.html(RAVEN.SubtleSingleSelect.render({items:this.items,selectedItem:h}))}this.$container.find("#raven-subtle-items-trigger").click(e);this.$container.find("#raven-subtle-picker-form").submit(function(){return false})};b.prototype.showDropdown=function(g,f,h){if(this.hasEndpoint()){this.showDropdownWithEnpoint(g,f,h)}else{this.showDropdownWithItems(g,f,h)}};b.prototype.showDropdownWithItems=function(j,g,k){c(j.target).hide();var f=this;var h=this.$container.find("#raven-subtle-picker");new d({element:h,width:200,errorMessage:"",setMaxHeightToWindow:true});var i=this.$container.find("#raven-subtle-picker-field");h.bind("selected",function(m,l){if(l.value()){k(m,l)}i.blur()});i.blur(g);i.focus().select();setTimeout(function(){f.$container.find("#raven-subtle-picker-field").trigger("click")},20)};b.prototype.showDropdownWithEnpoint=function(j,g,k){c(j.target).hide();var f=this;var h=this.$container.find("#raven-subtle-picker");new d({element:h,width:200,errorMessage:"",setMaxHeightToWindow:true,itemAttrDisplayed:"label",showDropdownButton:true,removeOnUnSelect:false,submitInputVal:false,ajaxOptions:{url:contextPath+f.endpoint,query:true,formatResponse:function(l){var e=new AJS.GroupDescriptor({label:"Suggestions",type:"optgroup"});f.clearFetchedItems();if(l&&l.suggestions){AJS.$.each(l.suggestions,function(n,o){if(f.getItemById(o.label)===false){var m={id:o.label,name:o.label};f.additems(m)}})}if(f.hasItems()){AJS.$.each(f.getItems(),function(m,n){e.addItem(new AJS.ItemDescriptor({title:n.name,value:n.name,label:n.name,highlighted:true}))})}return[e]}}});var i=this.$container.find("#raven-subtle-picker-field");h.bind("selected",function(m,l){if(l.value()){k(m,l)}i.blur()});i.blur(g);i.focus().select();setTimeout(function(){f.$container.find("#raven-subtle-picker-field").trigger("click")},20)};return b});AJS.namespace("RAVEN.Field.SubtleSingleSelect",null,require("js/field/subtle-single-select"));;
;
/* module-key = 'com.xpandit.plugins.xray:subtle-single-select-resources', location = 'js/field/subtle-select.js' */
define("js/field/subtle-select",["jira/ajs/select/queryable-dropdown-select","jira/ajs/select/select-helper","jira/ajs/select/select-model","jira/ajs/select/suggestion-collection-model","jira/ajs/select/suggestions/select-suggest-handler","jira/ajs/layer/inline-layer-factory","jira/ajs/list/list","jira/ajs/list/item-descriptor","jira/util/navigator","jquery"],function(g,a,d,e,b,c,h,f,j,i){return g.extend({init:function(k){if(this._setOptions(k)===this.INVALID){return this.INVALID}this._createSelectModel();if(this.options.disabled){this._createFurniture(true);return this}i.extend(this,a);this._createFurniture();this._createSuggestionsController();this._createDropdownController();this._createListController();this._assignEventsToFurniture();this._setInitState();if(this.options.width){this.setFieldWidth(this.options.width)}if(this.$overlabel){this.$overlabel.overlabel(this.$field)}this.model.$element.addClass("aui-ss-select").trigger("initialized",[this])},_setInitState:function(){if(this.options.editValue){this._setEditingMode();this.$field.text(this.options.editValue)}else{if(this.getSelectedDescriptor()){this.setSelection(this.getSelectedDescriptor())}else{this._setEditingMode();if(this.options.inputText){this.$field.text(this.options.inputText)}}}},_createSelectModel:function(){if(!!this.options.model){this.model=new this.options.model({element:this.options.element,removeOnUnSelect:this.options.removeOnUnSelect})}else{this.model=new d({element:this.options.element,removeOnUnSelect:this.options.removeOnUnSelect})}},_createDropdownController:function(){this.dropdownController=c.createInlineLayers({alignment:AJS.LEFT,offsetTarget:this.$field,content:i(".aui-list",this.$container),setMaxHeightToWindow:this.options.setMaxHeightToWindow,minHeight:this.options.minHeight});var k=this;this.dropdownController.onhide(function(){k.hideSuggestions()})},_createSuggestionsController:function(){this.suggestionsHandler=this.options.suggestionsHandler?new this.options.suggestionsHandler(this.options,this.model):new b(this.options,this.model)},_assignEventsToFurniture:function(){var k=this;this._super();this.model.$element.bind("reset",function(){var l=k.getSelectedDescriptor();if(l){k.setSelection(k.getSelectedDescriptor())}}).bind("showSuggestions",function(l){k._handleDown(l)}).bind("hideSuggestions",function(){k.hideSuggestions()}).bind("set-selection-value",function(m,l){k._setDescriptorWithValue(l)})},setFieldWidth:function(k){this.$container.css({maxWidth:k});this.$field.css({maxWidth:k})},_createListController:function(){var k=this;this.listController=new h({containerSelector:i(".aui-list",this.$container),groupSelector:"ul.aui-list-section",matchingStrategy:this.options.matchingStrategy,maxInlineResultsDisplayed:this.options.maxInlineResultsDisplayed,matchItemText:this.options.matchItemText,hasLinks:this.options.hasLinks,selectionHandler:function(m){var l=this.getFocused(),n=l.data("descriptor");k.setSelection(n);k.$field.select();m.preventDefault();return false}})},getSelectedDescriptor:function(){return this.model.getDisplayableSelectedDescriptors()[0]},getDisplayVal:function(k){return k[this.options.itemAttrDisplayed||"label"]()},_getDefaultOptions:function(){return i.extend(true,this._super(),{errorMessage:"The value {0} is invalid.",revertOnInvalid:false,showDropdownButton:true})},_createFurniture:function(l){var p=this.model.$element.attr("id");this.model.$element.data("aui-ss",true);this.$container=this._render("container",this.model.id);var o=this.model.$element.data("container-class");if(o){this.$container.addClass(o)}if(l){var m=this.model.$element.val()&&this.model.$element.val()[0];m=m||"";this.model.$element.replaceWith(this._render("disableSelectField",p,m))}else{var n=this.model.getPlaceholder();this.$field=this._render("field",this.model.id,n).appendTo(this.$container);if(n&&!this._placeholderSupported()){this.options.overlabel=n;this.$overlabel=this._render("overlabel").insertBefore(this.$field)}var k=this._render("suggestionsContainer",this.model.id);this.suggestionsContainerId=k.attr("id");this.$container.append(k);this.$field.attr("aria-controls",k.attr("id"));this.$container.insertBefore(this.model.$element);this.$dropDownIcon=this._render("dropdownAndLoadingIcon",this._hasDropdownButton()).appendTo(this.$container);this.$errorMessage=this._render("errorMessage")}},_placeholderSupported:function(){return !(j.isIE()&&j.majorVersion()<10)},getQueryVal:function(){if(this.$container.hasClass("aui-ss-editing")){return i.trim(this.$field.text())}else{return""}},_setSuggestions:function(l,k){if(l){this._super(l,k);this.model.$element.trigger("suggestionsRefreshed",[this])}else{this.hideSuggestions()}},_setEditingMode:function(){this.$container.addClass("aui-ss-editing").removeClass("aui-ss-has-entity-icon");this.$field.css("paddingLeft")},_hasIcon:function(){var k,l=this.getSelectedDescriptor();if(l){k=l.icon();return k&&k!=="none"}},_setReadOnlyMode:function(){this.$container.removeClass("aui-ss-editing");if(this._hasIcon()){this.$container.addClass("aui-ss-has-entity-icon");if(j.isIE()&&j.majorVersion()>8){this.$container.append(this.$field.detach())}}},submitForm:function(){if(!this.suggestionsVisible){this.handleFreeInput();i(this.$field[0].form).submit()}},selectValue:function(k){this.listController.selectValue(k)},setSelection:function(l,k){k=typeof k!=="undefined"?k:true;if(typeof l==="string"){l=new f({value:l,label:l})}this.removeFreeInputVal();this.$field.text(l.fieldText()||this.getDisplayVal(l));this.$field.trigger("change");if(this.model.setSelected(l,k)){this.hideErrorMessage()}if(this._hasIcon()){if(this.$entityIcon){this.$entityIcon.remove()}this.$entityIcon=this._render("entityIcon",l.icon()).appendTo(this.$container)}this._setReadOnlyMode();this.hideSuggestions();this.lastSelection=l;this.model.$element.trigger("selected",[l,this])},clear:function(){this.$field.text("");this.hideSuggestions();this.clearSelection()},clearSelection:function(){var k=this;k._setEditingMode();k.model.setAllUnSelected();k.model.$element.trigger("unselect",[this])},_handleServerSuggestions:function(k){this.cleanUpModel();this._super(k)},cleanUpModel:function(){if(this.options.ajaxOptions.query){this.model.clearUnSelected()}},onEdit:function(){if(this.getSelectedDescriptor()){this.clearSelection()}this._super();this.model.$element.trigger("query")},handleFreeInput:function(k){k=k||i.trim(this.$field.text());if(this.options.revertOnInvalid&&!this.model.getDescriptor(k)){this.setSelection(this.lastSelection||"")}else{if(this.$container.hasClass("aui-ss-editing")){if(this._setDescriptorWithValue(k)){this.hideErrorMessage()}else{if(!this.options.submitInputVal){this.showErrorMessage(k)}}}}},_setDescriptorWithValue:function(k){var l=this.model.getDescriptor(k);if(l){this.setSelection(l);return true}return false},_handleCharacterInput:function(k){this._super(k);if(this.$container.hasClass("aui-ss-editing")){this.updateFreeInputVal()}},_deactivate:function(){this.handleFreeInput();this.hideSuggestions()},keys:{Return:function(k){this.submitForm();k.preventDefault()},Tab:function(){this.acceptFocusedSuggestion()}},_events:{field:{focus:function(){var k=this;window.setTimeout(function(){if(k.$field.is(":focus")){k.$field.select()}},0)},click:function(k){if(this.suggestionsVisible===true){this._deactivate()}else{this._handleCharacterInput(true)}k.preventDefault()}}},_renders:{label:function(k,l){return i("<label />").attr("for",l).text(k).addClass("overlabel")},errorMessage:function(){return i('<div class="error" />')},entityIcon:function(k){var l=i('<img class="aui-ss-entity-icon" alt=""/>');l.attr("src",k);return l},field:function(l,m){var k=i('<a id="'+l+'-field" class="aui-button aui-style-default raven-dropdown2-arrow aui-button-subtle"/>');if(m){k.attr("placeholder",m)}return k},disableSelectField:function(l,k){return i("<input type='text' class='text long-field' value='"+k+"' name='"+l+"' id='"+l+"' />")},container:function(k){return i('<div class="aui-ss raven-ss'+(this.options.ajaxOptions?" ajax-ss":"")+'" id="'+k+'-single-select">')},dropdownAndLoadingIcon:function(l){var k=i('<span class="icon aui-ss-icon noloading"><span>More</span></span>');if(l){k.addClass("drop-menu")}return k}}})});AJS.namespace("RAVEN.SubtleSelect",null,require("js/field/subtle-select"));;
;
/* module-key = 'com.xpandit.plugins.xray:jquery-blockui-resources', location = 'js/jquery/jquery.blockUI.js' */
/*!
 * jQuery blockUI plugin
 * Version 2.66.0-2013.10.09
 * Requires jQuery v1.7 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2013 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */
(function(){function setup($){$.fn._fadeIn=$.fn.fadeIn;var noOp=$.noop||function(){};var msie=/MSIE/.test(navigator.userAgent);var ie6=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent);var mode=document.documentMode||0;var setExpr=$.isFunction(document.createElement("div").style.setExpression);$.blockUI=function(opts){install(window,opts)};$.unblockUI=function(opts){remove(window,opts)};$.growlUI=function(title,message,timeout,onClose){var $m=$('<div class="growlUI"></div>');if(title){$m.append("<h1>"+title+"</h1>")}if(message){$m.append("<h2>"+message+"</h2>")}if(timeout===undefined){timeout=3000}var callBlock=function(opts){opts=opts||{};$.blockUI({message:$m,fadeIn:typeof opts.fadeIn!=="undefined"?opts.fadeIn:700,fadeOut:typeof opts.fadeOut!=="undefined"?opts.fadeOut:1000,timeout:typeof opts.timeout!=="undefined"?opts.timeout:timeout,centerY:false,showOverlay:false,onUnblock:onClose,css:$.blockUI.defaults.growlCSS})};callBlock();var nonmousedOpacity=$m.css("opacity");$m.mouseover(function(){callBlock({fadeIn:0,timeout:30000});var displayBlock=$(".blockMsg");displayBlock.stop();displayBlock.fadeTo(300,1)}).mouseout(function(){$(".blockMsg").fadeOut(1000)})};$.fn.block=function(opts){if(this[0]===window){$.blockUI(opts);return this}var fullOpts=$.extend({},$.blockUI.defaults,opts||{});this.each(function(){var $el=$(this);if(fullOpts.ignoreIfBlocked&&$el.data("blockUI.isBlocked")){return}$el.unblock({fadeOut:0})});return this.each(function(){if((opts&&opts.position&&opts.position==="static")||$.css(this,"position")=="static"){this.style.position="relative";$(this).data("blockUI.static",true)}var isIE=
/*@cc_on!@*/
false||!!document.documentMode;if(isIE){this.style.zoom=1}install(this,opts)})};$.fn.unblock=function(opts){if(this[0]===window){$.unblockUI(opts);return this}return this.each(function(){remove(this,opts)})};$.blockUI.version=2.66;$.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:true,theme:false,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:0.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:0.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:false,baseZ:1000,centerX:true,centerY:true,allowBodyStretch:true,bindEvents:true,constrainTabKey:true,fadeIn:200,fadeOut:400,timeout:0,showOverlay:true,focusInput:true,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:false};var pageBlock=null;var pageBlockEls=[];function install(el,opts){var css,themedCSS;var full=(el==window);var msg=(opts&&opts.message!==undefined?opts.message:undefined);opts=$.extend({},$.blockUI.defaults,opts||{});if(opts.ignoreIfBlocked&&$(el).data("blockUI.isBlocked")){return}opts.overlayCSS=$.extend({},$.blockUI.defaults.overlayCSS,opts.overlayCSS||{});css=$.extend({},$.blockUI.defaults.css,opts.css||{});if(opts.onOverlayClick){opts.overlayCSS.cursor="pointer"}themedCSS=$.extend({},$.blockUI.defaults.themedCSS,opts.themedCSS||{});msg=msg===undefined?opts.message:msg;if(full&&pageBlock){remove(window,{fadeOut:0})}if(msg&&typeof msg!="string"&&(msg.parentNode||msg.jquery)){var node=msg.jquery?msg[0]:msg;var data={};$(el).data("blockUI.history",data);data.el=node;data.parent=node.parentNode;data.display=node.style.display;data.position=node.style.position;if(data.parent){data.parent.removeChild(node)}}$(el).data("blockUI.onUnblock",opts.onUnblock);var z=opts.baseZ;var lyr1,lyr2,lyr3,s;if(msie||opts.forceIframe){lyr1=$('<iframe class="blockUI" style="z-index:'+(z++)+';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+opts.iframeSrc+'"></iframe>')}else{lyr1=$('<div class="blockUI" style="display:none"></div>')}if(opts.theme){lyr2=$('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+(z++)+';display:none"></div>')}else{lyr2=$('<div class="blockUI blockOverlay" style="z-index:'+(z++)+';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>')}if(opts.theme&&full){s='<div class="blockUI '+opts.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:fixed">';if(opts.title){s+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title||"&nbsp;")+"</div>"}s+='<div class="ui-widget-content ui-dialog-content"></div>';s+="</div>"}else{if(opts.theme){s='<div class="blockUI '+opts.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:absolute">';if(opts.title){s+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title||"&nbsp;")+"</div>"}s+='<div class="ui-widget-content ui-dialog-content"></div>';s+="</div>"}else{if(full){s='<div class="blockUI '+opts.blockMsgClass+' blockPage" style="z-index:'+(z+10)+';display:none;position:fixed"></div>'}else{s='<div class="blockUI '+opts.blockMsgClass+' blockElement" style="z-index:'+(z+10)+';display:none;position:absolute"></div>'}}}lyr3=$(s);if(msg){if(opts.theme){lyr3.css(themedCSS);lyr3.addClass("ui-widget-content")}else{lyr3.css(css)}}if(!opts.theme){lyr2.css(opts.overlayCSS)}lyr2.css("position",full?"fixed":"absolute");if(msie||opts.forceIframe){lyr1.css("opacity",0)}var layers=[lyr1,lyr2,lyr3],$par=full?$("body"):$(el);$.each(layers,function(){this.appendTo($par)});if(opts.theme&&opts.draggable&&$.fn.draggable){lyr3.draggable({handle:".ui-dialog-titlebar",cancel:"li"})}var expr=setExpr&&(!$.support.boxModel||$("object,embed",full?null:el).length>0);if(ie6||expr){if(full&&opts.allowBodyStretch&&$.support.boxModel){$("html,body").css("height","100%")}if((ie6||!$.support.boxModel)&&!full){var t=sz(el,"borderTopWidth"),l=sz(el,"borderLeftWidth");var fixT=t?"(0 - "+t+")":0;var fixL=l?"(0 - "+l+")":0}$.each(layers,function(i,o){var s=o[0].style;s.position="absolute";if(i<2){if(full){s.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+opts.quirksmodeOffsetHack+') + "px"')}else{s.setExpression("height",'this.parentNode.offsetHeight + "px"')}if(full){s.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"')}else{s.setExpression("width",'this.parentNode.offsetWidth + "px"')}if(fixL){s.setExpression("left",fixL)}if(fixT){s.setExpression("top",fixT)}}else{if(opts.centerY){if(full){s.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"')}s.marginTop=0}else{if(!opts.centerY&&full){var top=(opts.css&&opts.css.top)?parseInt(opts.css.top,10):0;var expression="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+top+') + "px"';s.setExpression("top",expression)}}}})}if(msg){if(opts.theme){lyr3.find(".ui-widget-content").append(msg)}else{lyr3.append(msg)}if(msg.jquery||msg.nodeType){$(msg).show()}}if((msie||opts.forceIframe)&&opts.showOverlay){lyr1.show()}if(opts.fadeIn){var cb=opts.onBlock?opts.onBlock:noOp;var cb1=(opts.showOverlay&&!msg)?cb:noOp;var cb2=msg?cb:noOp;if(opts.showOverlay){lyr2._fadeIn(opts.fadeIn,cb1)}if(msg){lyr3._fadeIn(opts.fadeIn,cb2)}}else{if(opts.showOverlay){lyr2.show()}if(msg){lyr3.show()}if(opts.onBlock){opts.onBlock()}}bind(1,el,opts);if(full){pageBlock=lyr3[0];pageBlockEls=$(opts.focusableElements,pageBlock);if(opts.focusInput){setTimeout(focus,20)}}else{center(lyr3[0],opts.centerX,opts.centerY)}if(opts.timeout){var to=setTimeout(function(){if(full){$.unblockUI(opts)}else{$(el).unblock(opts)}},opts.timeout);$(el).data("blockUI.timeout",to)}}function remove(el,opts){var count;var full=(el==window);var $el=$(el);var data=$el.data("blockUI.history");var to=$el.data("blockUI.timeout");if(to){clearTimeout(to);$el.removeData("blockUI.timeout")}opts=$.extend({},$.blockUI.defaults,opts||{});bind(0,el,opts);if(opts.onUnblock===null){opts.onUnblock=$el.data("blockUI.onUnblock");$el.removeData("blockUI.onUnblock")}var els;if(full){els=$("body").children().filter(".blockUI").add("body > .blockUI")}else{els=$el.find(">.blockUI")}if(opts.cursorReset){if(els.length>1){els[1].style.cursor=opts.cursorReset}if(els.length>2){els[2].style.cursor=opts.cursorReset}}if(full){pageBlock=pageBlockEls=null}if(opts.fadeOut){count=els.length;els.stop().fadeOut(opts.fadeOut,function(){if(--count===0){reset(els,data,opts,el)}})}else{reset(els,data,opts,el)}}function reset(els,data,opts,el){var $el=$(el);if($el.data("blockUI.isBlocked")){return}els.each(function(i,o){if(this.parentNode){this.parentNode.removeChild(this)}});if(data&&data.el){data.el.style.display=data.display;data.el.style.position=data.position;if(data.parent){data.parent.appendChild(data.el)}$el.removeData("blockUI.history")}if($el.data("blockUI.static")){$el.css("position","static")}if(typeof opts.onUnblock=="function"){opts.onUnblock(el,opts)}var isSafari=/constructor/i.test(window.HTMLElement)||(function(p){return p.toString()==="[object SafariRemoteNotification]"})(!window.safari||(typeof safari!=="undefined"&&window.safari.pushNotification));if(isSafari){var body=$(document.body),w=body.width(),cssW=body[0].style.width;body.width(w-1).width(w);body[0].style.width=cssW}}function bind(b,el,opts){var full=el==window,$el=$(el);if(!b&&(full&&!pageBlock||!full&&!$el.data("blockUI.isBlocked"))){return}$el.data("blockUI.isBlocked",b);if(!full||!opts.bindEvents||(b&&!opts.showOverlay)){return}var events="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";if(b){$(document).bind(events,opts,handler)}else{$(document).unbind(events,handler)}}function handler(e){if(e.type==="keydown"&&e.keyCode&&e.keyCode==9){if(pageBlock&&e.data.constrainTabKey){var els=pageBlockEls;var fwd=!e.shiftKey&&e.target===els[els.length-1];var back=e.shiftKey&&e.target===els[0];if(fwd||back){setTimeout(function(){focus(back)},10);return false}}}var opts=e.data;var target=$(e.target);if(target.hasClass("blockOverlay")&&opts.onOverlayClick){opts.onOverlayClick(e)}if(target.parents("div."+opts.blockMsgClass).length>0){return true}return target.parents().children().filter("div.blockUI").length===0}function focus(back){if(!pageBlockEls){return}var e=pageBlockEls[back===true?pageBlockEls.length-1:0];if(e){e.focus()}}function center(el,centerX,centerY){if(centerX||centerY){var p=el.parentNode,s=el.style;if(centerX){var l=((p.offsetWidth-el.offsetWidth)/2)-sz(p,"borderLeftWidth");s.left=l>0?(l+"px"):"0"}if(centerY){var t=((p.offsetHeight-el.offsetHeight)/2)-sz(p,"borderTopWidth");s.top=t>0?(t+"px"):"0"}}}function sz(el,p){return parseInt($.css(el,p),10)||0}}if(typeof define==="function"&&define.amd&&define.amd.jQuery){define(["jquery"],setup)}else{setup(jQuery)}})();;
;
/* module-key = 'com.xpandit.plugins.xray:jquery-blockui-resources', location = 'js/jquery/xray.jquery.blockUI.js' */
/*!
 * jQuery blockUI plugin
 * Version 2.66.0-2013.10.09
 * Requires jQuery v1.7 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2013 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 *
 * This is a "fork" version of the jQuery blockUI plugin with some performance improvements with Chrome in mind
 * This is a standalone file and has an alternative implementation for the $.fn.block function - $.fn.xRayBlock - to
 * make sure it isn't overridden by any other files that may be introduced by other JIRA plugins
 *
 */
(function(){function setup($){var msie=/MSIE/.test(navigator.userAgent);var ie6=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent);var setExpr=$.isFunction(document.createElement("div").style.setExpression);$.fn.xRayBlock=function(opts){if(this[0]===window){$.blockUI(opts);return this}var fullOpts=$.extend({},$.blockUI.defaults,opts||{});this.each(function(){var $el=$(this);if(fullOpts.ignoreIfBlocked&&$el.data("blockUI.isBlocked")){return}$el.unblock({fadeOut:0})});return this.each(function(){if((opts&&opts.position&&opts.position==="static")||$.css(this,"position")=="static"){this.style.position="relative";$(this).data("blockUI.static",true)}var isIE=
/*@cc_on!@*/
false||!!document.documentMode;if(isIE){this.style.zoom=1}install(this,opts)})};var pageBlock=null;var pageBlockEls=[];function install(el,opts){var css,themedCSS;var full=(el==window);var msg=(opts&&opts.message!==undefined?opts.message:undefined);opts=$.extend({},$.blockUI.defaults,opts||{});if(opts.ignoreIfBlocked&&$(el).data("blockUI.isBlocked")){return}opts.overlayCSS=$.extend({},$.blockUI.defaults.overlayCSS,opts.overlayCSS||{});css=$.extend({},$.blockUI.defaults.css,opts.css||{});if(opts.onOverlayClick){opts.overlayCSS.cursor="pointer"}themedCSS=$.extend({},$.blockUI.defaults.themedCSS,opts.themedCSS||{});msg=msg===undefined?opts.message:msg;if(full&&pageBlock){remove(window,{fadeOut:0})}if(msg&&typeof msg!="string"&&(msg.parentNode||msg.jquery)){var node=msg.jquery?msg[0]:msg;var data={};$(el).data("blockUI.history",data);data.el=node;data.parent=node.parentNode;data.display=node.style.display;data.position=node.style.position;if(data.parent){data.parent.removeChild(node)}}$(el).data("blockUI.onUnblock",opts.onUnblock);var z=opts.baseZ;var lyr1,lyr2,lyr3,s;if(msie||opts.forceIframe){lyr1=$('<iframe class="blockUI" style="z-index:'+(z++)+';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+opts.iframeSrc+'"></iframe>')}else{lyr1=$('<div class="blockUI" style="display:none"></div>')}if(opts.theme){lyr2=$('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+(z++)+';display:none"></div>')}else{lyr2=$('<div class="blockUI blockOverlay" style="z-index:'+(z++)+';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>')}if(opts.theme&&full){s='<div class="blockUI '+opts.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:fixed">';if(opts.title){s+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title||"&nbsp;")+"</div>"}s+='<div class="ui-widget-content ui-dialog-content"></div>';s+="</div>"}else{if(opts.theme){s='<div class="blockUI '+opts.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:absolute">';if(opts.title){s+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title||"&nbsp;")+"</div>"}s+='<div class="ui-widget-content ui-dialog-content"></div>';s+="</div>"}else{if(full){s='<div class="blockUI '+opts.blockMsgClass+' blockPage" style="z-index:'+(z+10)+';display:none;position:fixed"></div>'}else{s='<div class="blockUI '+opts.blockMsgClass+' blockElement" style="z-index:'+(z+10)+';display:none;position:absolute"></div>'}}}lyr3=$(s);if(msg){if(opts.theme){lyr3.css(themedCSS);lyr3.addClass("ui-widget-content")}else{lyr3.css(css)}}if(!opts.theme){lyr2.css(opts.overlayCSS)}lyr2.css("position",full?"fixed":"absolute");if(msie||opts.forceIframe){lyr1.css("opacity",0)}var layers=[lyr1,lyr2,lyr3],$par=full?$("body"):$(el);$.each(layers,function(){this.appendTo($par)});if(opts.theme&&opts.draggable&&$.fn.draggable){lyr3.draggable({handle:".ui-dialog-titlebar",cancel:"li"})}var expr=setExpr&&(!$.support.boxModel||$("object,embed",full?null:el).length>0);if(ie6||expr){if(full&&opts.allowBodyStretch&&$.support.boxModel){$("html,body").css("height","100%")}if((ie6||!$.support.boxModel)&&!full){var t=sz(el,"borderTopWidth"),l=sz(el,"borderLeftWidth");var fixT=t?"(0 - "+t+")":0;var fixL=l?"(0 - "+l+")":0}$.each(layers,function(i,o){var s=o[0].style;s.position="absolute";if(i<2){if(full){s.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+opts.quirksmodeOffsetHack+') + "px"')}else{s.setExpression("height",'this.parentNode.offsetHeight + "px"')}if(full){s.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"')}else{s.setExpression("width",'this.parentNode.offsetWidth + "px"')}if(fixL){s.setExpression("left",fixL)}if(fixT){s.setExpression("top",fixT)}}else{if(opts.centerY){if(full){s.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"')}s.marginTop=0}else{if(!opts.centerY&&full){var top=(opts.css&&opts.css.top)?parseInt(opts.css.top,10):0;var expression="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+top+') + "px"';s.setExpression("top",expression)}}}})}if(msg){if(opts.theme){lyr3.find(".ui-widget-content").append(msg)}else{lyr3.append(msg)}if(msg.jquery||msg.nodeType){$(msg).show()}}if((msie||opts.forceIframe)&&opts.showOverlay){lyr1.show()}if(opts.fadeIn){var cb=opts.onBlock?opts.onBlock:noOp;var cb1=(opts.showOverlay&&!msg)?cb:noOp;var cb2=msg?cb:noOp;if(opts.showOverlay){lyr2._fadeIn(opts.fadeIn,cb1)}if(msg){lyr3._fadeIn(opts.fadeIn,cb2)}}else{if(opts.showOverlay){lyr2.show()}if(msg){lyr3.show()}if(opts.onBlock){opts.onBlock()}}bind(1,el,opts);if(full){pageBlock=lyr3[0];pageBlockEls=$(opts.focusableElements,pageBlock);if(opts.focusInput){setTimeout(focus,20)}}else{center(lyr3[0],opts.centerX,opts.centerY)}if(opts.timeout){var to=setTimeout(function(){if(full){$.unblockUI(opts)}else{$(el).unblock(opts)}},opts.timeout);$(el).data("blockUI.timeout",to)}}function bind(b,el,opts){var full=el==window,$el=$(el);if(!b&&(full&&!pageBlock||!full&&!$el.data("blockUI.isBlocked"))){return}$el.data("blockUI.isBlocked",b);if(!full||!opts.bindEvents||(b&&!opts.showOverlay)){return}var events="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";if(b){$(document).bind(events,opts,handler)}else{$(document).unbind(events,handler)}}function handler(e){if(e.type==="keydown"&&e.keyCode&&e.keyCode==9){if(pageBlock&&e.data.constrainTabKey){var els=pageBlockEls;var fwd=!e.shiftKey&&e.target===els[els.length-1];var back=e.shiftKey&&e.target===els[0];if(fwd||back){setTimeout(function(){focus(back)},10);return false}}}var opts=e.data;var target=$(e.target);if(target.hasClass("blockOverlay")&&opts.onOverlayClick){opts.onOverlayClick(e)}if(target.parents("div."+opts.blockMsgClass).length>0){return true}return target.parents().children().filter("div.blockUI").length===0}function focus(back){if(!pageBlockEls){return}var e=pageBlockEls[back===true?pageBlockEls.length-1:0];if(e){e.focus()}}function center(el,centerX,centerY){if(centerX||centerY){var p=el.parentNode,s=el.style;if(centerX){var l=((p.offsetWidth-el.offsetWidth)/2)-sz(p,"borderLeftWidth");s.left=l>0?(l+"px"):"0"}if(centerY){var t=((p.offsetHeight-el.offsetHeight)/2)-sz(p,"borderTopWidth");s.top=t>0?(t+"px"):"0"}}}function sz(el,p){return parseInt($.css(el,p),10)||0}}if(typeof define==="function"&&define.amd&&define.amd.jQuery){define(["jquery"],setup)}else{setup(jQuery)}})();;
;
/* module-key = 'com.xpandit.plugins.xray:jquery-blockui-resources', location = 'js/jquery/jquery.blockUI.defaults.js' */
AJS.$.blockUI.defaults.message=null;AJS.$.blockUI.defaults.overlayCSS.backgroundColor="#fff";AJS.$.blockUI.defaults.opacity=0.6;;
;
/* module-key = 'com.xpandit.plugins.xray:jquery-datatables-resources', location = 'js/jquery/jquery.dataTables.js' */
(function(window,document,undefined){(function(factory){if(AJS&&AJS.$&&!AJS.$.fn.xrayDataTable){factory(AJS.$)}else{if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else{if(jQuery&&!jQuery.fn.xrayDataTable){factory(jQuery)}}}}(function($){var DataTable=function(oInit){function _fnAddColumn(oSettings,nTh){var oDefaults=DataTable.defaults.columns;var iCol=oSettings.aoColumns.length;var oCol=$.extend({},DataTable.models.oColumn,oDefaults,{sSortingClass:oSettings.oClasses.sSortable,sSortingClassJUI:oSettings.oClasses.sSortJUI,nTh:nTh?nTh:document.createElement("th"),sTitle:oDefaults.sTitle?oDefaults.sTitle:nTh?nTh.innerHTML:"",aDataSort:oDefaults.aDataSort?oDefaults.aDataSort:[iCol],mData:oDefaults.mData?oDefaults.oDefaults:iCol});oSettings.aoColumns.push(oCol);if(oSettings.aoPreSearchCols[iCol]===undefined||oSettings.aoPreSearchCols[iCol]===null){oSettings.aoPreSearchCols[iCol]=$.extend({},DataTable.models.oSearch)}else{var oPre=oSettings.aoPreSearchCols[iCol];if(oPre.bRegex===undefined){oPre.bRegex=true}if(oPre.bSmart===undefined){oPre.bSmart=true}if(oPre.bCaseInsensitive===undefined){oPre.bCaseInsensitive=true}}_fnColumnOptions(oSettings,iCol,null)}function _fnColumnOptions(oSettings,iCol,oOptions){var oCol=oSettings.aoColumns[iCol];if(oOptions!==undefined&&oOptions!==null){if(oOptions.mDataProp&&!oOptions.mData){oOptions.mData=oOptions.mDataProp}if(oOptions.sType!==undefined){oCol.sType=oOptions.sType;oCol._bAutoType=false}$.extend(oCol,oOptions);_fnMap(oCol,oOptions,"sWidth","sWidthOrig");if(oOptions.iDataSort!==undefined){oCol.aDataSort=[oOptions.iDataSort]}_fnMap(oCol,oOptions,"aDataSort")}var mRender=oCol.mRender?_fnGetObjectDataFn(oCol.mRender):null;var mData=_fnGetObjectDataFn(oCol.mData);oCol.fnGetData=function(oData,sSpecific){var innerData=mData(oData,sSpecific);if(oCol.mRender&&(sSpecific&&sSpecific!=="")){return mRender(innerData,sSpecific,oData)}return innerData};oCol.fnSetData=_fnSetObjectDataFn(oCol.mData);if(!oSettings.oFeatures.bSort){oCol.bSortable=false}if(!oCol.bSortable||($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)==-1)){oCol.sSortingClass=oSettings.oClasses.sSortableNone;oCol.sSortingClassJUI=""}else{if($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)==-1){oCol.sSortingClass=oSettings.oClasses.sSortable;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUI}else{if($.inArray("asc",oCol.asSorting)!=-1&&$.inArray("desc",oCol.asSorting)==-1){oCol.sSortingClass=oSettings.oClasses.sSortableAsc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIAscAllowed}else{if($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)!=-1){oCol.sSortingClass=oSettings.oClasses.sSortableDesc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIDescAllowed}}}}}function _fnAdjustColumnSizing(oSettings){if(oSettings.oFeatures.bAutoWidth===false){return false}_fnCalculateColumnWidths(oSettings);for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){oSettings.aoColumns[i].nTh.style.width=oSettings.aoColumns[i].sWidth}}function _fnVisibleToColumnIndex(oSettings,iMatch){var aiVis=_fnGetColumns(oSettings,"bVisible");return typeof aiVis[iMatch]==="number"?aiVis[iMatch]:null}function _fnColumnIndexToVisible(oSettings,iMatch){var aiVis=_fnGetColumns(oSettings,"bVisible");var iPos=$.inArray(iMatch,aiVis);return iPos!==-1?iPos:null}function _fnVisbleColumns(oSettings){return _fnGetColumns(oSettings,"bVisible").length}function _fnGetColumns(oSettings,sParam){var a=[];$.map(oSettings.aoColumns,function(val,i){if(val[sParam]){a.push(i)}});return a}function _fnDetectType(sData){var aTypes=DataTable.ext.aTypes;var iLen=aTypes.length;for(var i=0;i<iLen;i++){var sType=aTypes[i](sData);if(sType!==null){return sType}}return"string"}function _fnReOrderIndex(oSettings,sColumns){var aColumns=sColumns.split(",");var aiReturn=[];for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){for(var j=0;j<iLen;j++){if(oSettings.aoColumns[i].sName==aColumns[j]){aiReturn.push(j);break}}}return aiReturn}function _fnColumnOrdering(oSettings){var sNames="";for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){sNames+=oSettings.aoColumns[i].sName+","}if(sNames.length==iLen){return""}return sNames.slice(0,-1)}function _fnApplyColumnDefs(oSettings,aoColDefs,aoCols,fn){var i,iLen,j,jLen,k,kLen;if(aoColDefs){for(i=aoColDefs.length-1;i>=0;i--){var aTargets=aoColDefs[i].aTargets;if(!$.isArray(aTargets)){_fnLog(oSettings,1,"aTargets must be an array of targets, not a "+(typeof aTargets))}for(j=0,jLen=aTargets.length;j<jLen;j++){if(typeof aTargets[j]==="number"&&aTargets[j]>=0){while(oSettings.aoColumns.length<=aTargets[j]){_fnAddColumn(oSettings)}fn(aTargets[j],aoColDefs[i])}else{if(typeof aTargets[j]==="number"&&aTargets[j]<0){fn(oSettings.aoColumns.length+aTargets[j],aoColDefs[i])}else{if(typeof aTargets[j]==="string"){for(k=0,kLen=oSettings.aoColumns.length;k<kLen;k++){if(aTargets[j]=="_all"||$(oSettings.aoColumns[k].nTh).hasClass(aTargets[j])){fn(k,aoColDefs[i])}}}}}}}}if(aoCols){for(i=0,iLen=aoCols.length;i<iLen;i++){fn(i,aoCols[i])}}}function _fnAddData(oSettings,aDataSupplied){var oCol;var aDataIn=($.isArray(aDataSupplied))?aDataSupplied.slice():$.extend(true,{},aDataSupplied);var iRow=oSettings.aoData.length;var oData=$.extend(true,{},DataTable.models.oRow);oData._aData=aDataIn;oSettings.aoData.push(oData);var nTd,sThisType;for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){oCol=oSettings.aoColumns[i];if(typeof oCol.fnRender==="function"&&oCol.bUseRendered&&oCol.mData!==null){_fnSetCellData(oSettings,iRow,i,_fnRender(oSettings,iRow,i))}else{_fnSetCellData(oSettings,iRow,i,_fnGetCellData(oSettings,iRow,i))}if(oCol._bAutoType&&oCol.sType!="string"){var sVarType=_fnGetCellData(oSettings,iRow,i,"type");if(sVarType!==null&&sVarType!==""){sThisType=_fnDetectType(sVarType);if(oCol.sType===null){oCol.sType=sThisType}else{if(oCol.sType!=sThisType&&oCol.sType!="html"){oCol.sType="string"}}}}}oSettings.aiDisplayMaster.push(iRow);if(!oSettings.oFeatures.bDeferRender){_fnCreateTr(oSettings,iRow)}return iRow}function _fnGatherData(oSettings){var iLoop,i,iLen,j,jLen,jInner,nTds,nTrs,nTd,nTr,aLocalData,iThisIndex,iRow,iRows,iColumn,iColumns,sNodeName,oCol,oData;if(oSettings.bDeferLoading||oSettings.sAjaxSource===null){nTr=oSettings.nTBody.firstChild;while(nTr){if(nTr.nodeName.toUpperCase()=="TR"){iThisIndex=oSettings.aoData.length;nTr._DT_RowIndex=iThisIndex;oSettings.aoData.push($.extend(true,{},DataTable.models.oRow,{nTr:nTr}));oSettings.aiDisplayMaster.push(iThisIndex);nTd=nTr.firstChild;jInner=0;while(nTd){sNodeName=nTd.nodeName.toUpperCase();if(sNodeName=="TD"||sNodeName=="TH"){_fnSetCellData(oSettings,iThisIndex,jInner,$.trim(nTd.innerHTML));jInner++}nTd=nTd.nextSibling}}nTr=nTr.nextSibling}}nTrs=_fnGetTrNodes(oSettings);nTds=[];for(i=0,iLen=nTrs.length;i<iLen;i++){nTd=nTrs[i].firstChild;while(nTd){sNodeName=nTd.nodeName.toUpperCase();if(sNodeName=="TD"||sNodeName=="TH"){nTds.push(nTd)}nTd=nTd.nextSibling}}for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){oCol=oSettings.aoColumns[iColumn];if(oCol.sTitle===null){oCol.sTitle=oCol.nTh.innerHTML}var bAutoType=oCol._bAutoType,bRender=typeof oCol.fnRender==="function",bClass=oCol.sClass!==null,bVisible=oCol.bVisible,nCell,sThisType,sRendered,sValType;if(bAutoType||bRender||bClass||!bVisible){for(iRow=0,iRows=oSettings.aoData.length;iRow<iRows;iRow++){oData=oSettings.aoData[iRow];nCell=nTds[(iRow*iColumns)+iColumn];if(bAutoType&&oCol.sType!="string"){sValType=_fnGetCellData(oSettings,iRow,iColumn,"type");if(sValType!==""){sThisType=_fnDetectType(sValType);if(oCol.sType===null){oCol.sType=sThisType}else{if(oCol.sType!=sThisType&&oCol.sType!="html"){oCol.sType="string"}}}}if(oCol.mRender){nCell.innerHTML=_fnGetCellData(oSettings,iRow,iColumn,"display")}else{if(oCol.mData!==iColumn){nCell.innerHTML=_fnGetCellData(oSettings,iRow,iColumn,"display")}}if(bRender){sRendered=_fnRender(oSettings,iRow,iColumn);nCell.innerHTML=sRendered;if(oCol.bUseRendered){_fnSetCellData(oSettings,iRow,iColumn,sRendered)}}if(bClass){nCell.className+=" "+oCol.sClass}if(!bVisible){oData._anHidden[iColumn]=nCell;nCell.parentNode.removeChild(nCell)}else{oData._anHidden[iColumn]=null}if(oCol.fnCreatedCell){oCol.fnCreatedCell.call(oSettings.oInstance,nCell,_fnGetCellData(oSettings,iRow,iColumn,"display"),oData._aData,iRow,iColumn)}}}}if(oSettings.aoRowCreatedCallback.length!==0){for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){oData=oSettings.aoData[i];_fnCallbackFire(oSettings,"aoRowCreatedCallback",null,[oData.nTr,oData._aData,i])}}}function _fnNodeToDataIndex(oSettings,n){return(n._DT_RowIndex!==undefined)?n._DT_RowIndex:null}function _fnNodeToColumnIndex(oSettings,iRow,n){var anCells=_fnGetTdNodes(oSettings,iRow);for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(anCells[i]===n){return i}}return -1}function _fnGetRowData(oSettings,iRow,sSpecific,aiColumns){var out=[];for(var i=0,iLen=aiColumns.length;i<iLen;i++){out.push(_fnGetCellData(oSettings,iRow,aiColumns[i],sSpecific))}return out}function _fnGetCellData(oSettings,iRow,iCol,sSpecific){var sData;var oCol=oSettings.aoColumns[iCol];var oData=oSettings.aoData[iRow]._aData;if((sData=oCol.fnGetData(oData,sSpecific))===undefined){if(oSettings.iDrawError!=oSettings.iDraw&&oCol.sDefaultContent===null){_fnLog(oSettings,0,"Requested unknown parameter "+(typeof oCol.mData=="function"?"{mData function}":"'"+oCol.mData+"'")+" from the data source for row "+iRow);oSettings.iDrawError=oSettings.iDraw}return oCol.sDefaultContent}if(sData===null&&oCol.sDefaultContent!==null){sData=oCol.sDefaultContent}else{if(typeof sData==="function"){return sData()}}if(sSpecific=="display"&&sData===null){return""}return sData}function _fnSetCellData(oSettings,iRow,iCol,val){var oCol=oSettings.aoColumns[iCol];var oData=oSettings.aoData[iRow]._aData;oCol.fnSetData(oData,val)}var __reArray=/\[.*?\]$/;function _fnGetObjectDataFn(mSource){if(mSource===null){return function(data,type){return null}}else{if(typeof mSource==="function"){return function(data,type,extra){return mSource(data,type,extra)}}else{if(typeof mSource==="string"&&(mSource.indexOf(".")!==-1||mSource.indexOf("[")!==-1)){var fetchData=function(data,type,src){var a=src.split(".");var arrayNotation,out,innerSrc;if(src!==""){for(var i=0,iLen=a.length;i<iLen;i++){arrayNotation=a[i].match(__reArray);if(arrayNotation){a[i]=a[i].replace(__reArray,"");if(a[i]!==""){data=data[a[i]]}out=[];a.splice(0,i+1);innerSrc=a.join(".");for(var j=0,jLen=data.length;j<jLen;j++){out.push(fetchData(data[j],type,innerSrc))}var join=arrayNotation[0].substring(1,arrayNotation[0].length-1);data=(join==="")?out:out.join(join);break}if(data===null||data[a[i]]===undefined){return undefined}data=data[a[i]]}}return data};return function(data,type){return fetchData(data,type,mSource)}}else{return function(data,type){return data[mSource]}}}}}function _fnSetObjectDataFn(mSource){if(mSource===null){return function(data,val){}}else{if(typeof mSource==="function"){return function(data,val){mSource(data,"set",val)}}else{if(typeof mSource==="string"&&(mSource.indexOf(".")!==-1||mSource.indexOf("[")!==-1)){var setData=function(data,val,src){var a=src.split("."),b;var arrayNotation,o,innerSrc;for(var i=0,iLen=a.length-1;i<iLen;i++){arrayNotation=a[i].match(__reArray);if(arrayNotation){a[i]=a[i].replace(__reArray,"");data[a[i]]=[];b=a.slice();b.splice(0,i+1);innerSrc=b.join(".");for(var j=0,jLen=val.length;j<jLen;j++){o={};setData(o,val[j],innerSrc);data[a[i]].push(o)}return}if(data[a[i]]===null||data[a[i]]===undefined){data[a[i]]={}}data=data[a[i]]}data[a[a.length-1].replace(__reArray,"")]=val};return function(data,val){return setData(data,val,mSource)}}else{return function(data,val){data[mSource]=val}}}}}function _fnGetDataMaster(oSettings){var aData=[];var iLen=oSettings.aoData.length;for(var i=0;i<iLen;i++){aData.push(oSettings.aoData[i]._aData)}return aData}function _fnClearTable(oSettings){oSettings.aoData.splice(0,oSettings.aoData.length);oSettings.aiDisplayMaster.splice(0,oSettings.aiDisplayMaster.length);oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnCalculateEnd(oSettings)}function _fnDeleteIndex(a,iTarget){var iTargetIndex=-1;for(var i=0,iLen=a.length;i<iLen;i++){if(a[i]==iTarget){iTargetIndex=i}else{if(a[i]>iTarget){a[i]--}}}if(iTargetIndex!=-1){a.splice(iTargetIndex,1)}}function _fnRender(oSettings,iRow,iCol){var oCol=oSettings.aoColumns[iCol];return oCol.fnRender({iDataRow:iRow,iDataColumn:iCol,oSettings:oSettings,aData:oSettings.aoData[iRow]._aData,mDataProp:oCol.mData},_fnGetCellData(oSettings,iRow,iCol,"display"))}function _fnCreateTr(oSettings,iRow){var oData=oSettings.aoData[iRow];var nTd;if(oData.nTr===null){oData.nTr=document.createElement("tr");oData.nTr._DT_RowIndex=iRow;if(oData._aData.DT_RowId){oData.nTr.id=oData._aData.DT_RowId}if(oData._aData.DT_RowClass){oData.nTr.className=oData._aData.DT_RowClass}for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){var oCol=oSettings.aoColumns[i];nTd=document.createElement(oCol.sCellType);nTd.innerHTML=(typeof oCol.fnRender==="function"&&(!oCol.bUseRendered||oCol.mData===null))?_fnRender(oSettings,iRow,i):_fnGetCellData(oSettings,iRow,i,"display");if(oCol.sClass!==null){nTd.className=oCol.sClass}if(oCol.bVisible){oData.nTr.appendChild(nTd);oData._anHidden[i]=null}else{oData._anHidden[i]=nTd}if(oCol.fnCreatedCell){oCol.fnCreatedCell.call(oSettings.oInstance,nTd,_fnGetCellData(oSettings,iRow,i,"display"),oData._aData,iRow,i)}}_fnCallbackFire(oSettings,"aoRowCreatedCallback",null,[oData.nTr,oData._aData,iRow])}}function _fnBuildHead(oSettings){var i,nTh,iLen,j,jLen;var iThs=$("th, td",oSettings.nTHead).length;var iCorrector=0;var jqChildren;if(iThs!==0){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;nTh.setAttribute("role","columnheader");if(oSettings.aoColumns[i].bSortable){nTh.setAttribute("tabindex",oSettings.iTabIndex);nTh.setAttribute("aria-controls",oSettings.sTableId)}if(oSettings.aoColumns[i].sClass!==null){$(nTh).addClass(oSettings.aoColumns[i].sClass)}if(oSettings.aoColumns[i].sTitle!=nTh.innerHTML){nTh.innerHTML=oSettings.aoColumns[i].sTitle}}}else{var nTr=document.createElement("tr");for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;nTh.innerHTML=oSettings.aoColumns[i].sTitle;nTh.setAttribute("tabindex","0");if(oSettings.aoColumns[i].sClass!==null){$(nTh).addClass(oSettings.aoColumns[i].sClass)}nTr.appendChild(nTh)}$(oSettings.nTHead).html("")[0].appendChild(nTr);_fnDetectHeader(oSettings.aoHeader,oSettings.nTHead)}$(oSettings.nTHead).children("tr").attr("role","row");if(oSettings.bJUI){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;var nDiv=document.createElement("div");nDiv.className=oSettings.oClasses.sSortJUIWrapper;$(nTh).contents().appendTo(nDiv);var nSpan=document.createElement("span");nSpan.className=oSettings.oClasses.sSortIcon;nDiv.appendChild(nSpan);nTh.appendChild(nDiv)}}if(oSettings.oFeatures.bSort){for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable!==false){_fnSortAttachListener(oSettings,oSettings.aoColumns[i].nTh,i)}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.oClasses.sSortableNone)}}}if(oSettings.oClasses.sFooterTH!==""){$(oSettings.nTFoot).children("tr").children("th").addClass(oSettings.oClasses.sFooterTH)}if(oSettings.nTFoot!==null){var anCells=_fnGetUniqueThs(oSettings,null,oSettings.aoFooter);for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(anCells[i]){oSettings.aoColumns[i].nTf=anCells[i];if(oSettings.aoColumns[i].sClass){$(anCells[i]).addClass(oSettings.aoColumns[i].sClass)}}}}}function _fnDrawHead(oSettings,aoSource,bIncludeHidden){var i,iLen,j,jLen,k,kLen,n,nLocalTr;var aoLocal=[];var aApplied=[];var iColumns=oSettings.aoColumns.length;var iRowspan,iColspan;if(bIncludeHidden===undefined){bIncludeHidden=false}for(i=0,iLen=aoSource.length;i<iLen;i++){aoLocal[i]=aoSource[i].slice();aoLocal[i].nTr=aoSource[i].nTr;for(j=iColumns-1;j>=0;j--){if(!oSettings.aoColumns[j].bVisible&&!bIncludeHidden){aoLocal[i].splice(j,1)}}aApplied.push([])}for(i=0,iLen=aoLocal.length;i<iLen;i++){nLocalTr=aoLocal[i].nTr;if(nLocalTr){while((n=nLocalTr.firstChild)){nLocalTr.removeChild(n)}}for(j=0,jLen=aoLocal[i].length;j<jLen;j++){iRowspan=1;iColspan=1;if(aApplied[i][j]===undefined){nLocalTr.appendChild(aoLocal[i][j].cell);aApplied[i][j]=1;while(aoLocal[i+iRowspan]!==undefined&&aoLocal[i][j].cell==aoLocal[i+iRowspan][j].cell){aApplied[i+iRowspan][j]=1;iRowspan++}while(aoLocal[i][j+iColspan]!==undefined&&aoLocal[i][j].cell==aoLocal[i][j+iColspan].cell){for(k=0;k<iRowspan;k++){aApplied[i+k][j+iColspan]=1}iColspan++}aoLocal[i][j].cell.rowSpan=iRowspan;aoLocal[i][j].cell.colSpan=iColspan}}}}function _fnDraw(oSettings){var aPreDraw=_fnCallbackFire(oSettings,"aoPreDrawCallback","preDraw",[oSettings]);if($.inArray(false,aPreDraw)!==-1){_fnProcessingDisplay(oSettings,false);return}var i,iLen,n;var anRows=[];var iRowCount=0;var iStripes=oSettings.asStripeClasses.length;var iOpenRows=oSettings.aoOpenRows.length;oSettings.bDrawing=true;if(oSettings.iInitDisplayStart!==undefined&&oSettings.iInitDisplayStart!=-1){if(oSettings.oFeatures.bServerSide){oSettings._iDisplayStart=oSettings.iInitDisplayStart}else{oSettings._iDisplayStart=(oSettings.iInitDisplayStart>=oSettings.fnRecordsDisplay())?0:oSettings.iInitDisplayStart}oSettings.iInitDisplayStart=-1;_fnCalculateEnd(oSettings)}if(oSettings.bDeferLoading){oSettings.bDeferLoading=false;oSettings.iDraw++}else{if(!oSettings.oFeatures.bServerSide){oSettings.iDraw++}else{if(!oSettings.bDestroying&&!_fnAjaxUpdate(oSettings)){return}}}if(oSettings.aiDisplay.length!==0){var iStart=oSettings._iDisplayStart;var iEnd=oSettings._iDisplayEnd;if(oSettings.oFeatures.bServerSide){iStart=0;iEnd=oSettings.aoData.length}for(var j=iStart;j<iEnd;j++){var aoData=oSettings.aoData[oSettings.aiDisplay[j]];if(aoData.nTr===null){_fnCreateTr(oSettings,oSettings.aiDisplay[j])}var nRow=aoData.nTr;if(iStripes!==0){var sStripe=oSettings.asStripeClasses[iRowCount%iStripes];if(aoData._sRowStripe!=sStripe){$(nRow).removeClass(aoData._sRowStripe).addClass(sStripe);aoData._sRowStripe=sStripe}}_fnCallbackFire(oSettings,"aoRowCallback",null,[nRow,oSettings.aoData[oSettings.aiDisplay[j]]._aData,iRowCount,j]);anRows.push(nRow);iRowCount++;if(iOpenRows!==0){for(var k=0;k<iOpenRows;k++){if(nRow==oSettings.aoOpenRows[k].nParent){anRows.push(oSettings.aoOpenRows[k].nTr);break}}}}}else{anRows[0]=document.createElement("tr");if(oSettings.asStripeClasses[0]){anRows[0].className=oSettings.asStripeClasses[0]}var oLang=oSettings.oLanguage;var sZero=oLang.sZeroRecords;if(oSettings.iDraw==1&&oSettings.sAjaxSource!==null&&!oSettings.oFeatures.bServerSide){sZero=oLang.sLoadingRecords}else{if(oLang.sEmptyTable&&oSettings.fnRecordsTotal()===0){sZero=oLang.sEmptyTable}}var nTd=document.createElement("td");nTd.setAttribute("valign","top");nTd.colSpan=_fnVisbleColumns(oSettings);nTd.className=oSettings.oClasses.sRowEmpty;nTd.innerHTML=_fnInfoMacros(oSettings,sZero);anRows[iRowCount].appendChild(nTd)}_fnCallbackFire(oSettings,"aoHeaderCallback","header",[$(oSettings.nTHead).children("tr")[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay]);_fnCallbackFire(oSettings,"aoFooterCallback","footer",[$(oSettings.nTFoot).children("tr")[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay]);var nAddFrag=document.createDocumentFragment(),nRemoveFrag=document.createDocumentFragment(),nBodyPar,nTrs;if(oSettings.nTBody){nBodyPar=oSettings.nTBody.parentNode;nRemoveFrag.appendChild(oSettings.nTBody);if(!oSettings.oScroll.bInfinite||!oSettings._bInitComplete||oSettings.bSorted||oSettings.bFiltered){while((n=oSettings.nTBody.firstChild)){oSettings.nTBody.removeChild(n)}}for(i=0,iLen=anRows.length;i<iLen;i++){nAddFrag.appendChild(anRows[i])}oSettings.nTBody.appendChild(nAddFrag);if(nBodyPar!==null){nBodyPar.appendChild(oSettings.nTBody)}}_fnCallbackFire(oSettings,"aoDrawCallback","draw",[oSettings]);oSettings.bSorted=false;oSettings.bFiltered=false;oSettings.bDrawing=false;if(oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false);if(!oSettings._bInitComplete){_fnInitComplete(oSettings)}}JIRA.trigger(JIRA.Events.NEW_CONTENT_ADDED,[$(nBodyPar),JIRA.CONTENT_ADDED_REASON.panelRefreshed])}function _fnReDraw(oSettings){if(oSettings.oFeatures.bSort){_fnSort(oSettings,oSettings.oPreviousSearch)}else{if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch)}else{_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}function _fnAddOptionsHtml(oSettings){var nHolding=$("<div></div>")[0];oSettings.nTable.parentNode.insertBefore(nHolding,oSettings.nTable);var ravenClass="raven-data-table-wrapper";if(oSettings.oInit&&oSettings.oInit.bDefaultFontSize===true){ravenClass+=" default-font-size"}oSettings.nTableWrapper=$('<div id="'+oSettings.sTableId+'_wrapper" class="'+ravenClass+" "+oSettings.oClasses.sWrapper+'" role="grid"></div>')[0];oSettings.nTableReinsertBefore=oSettings.nTable.nextSibling;var nInsertNode=oSettings.nTableWrapper;var aDom=oSettings.sDom.split("");var nTmp,iPushFeature,cOption,nNewNode,cNext,sAttr,j;for(var i=0;i<aDom.length;i++){iPushFeature=0;cOption=aDom[i];if(cOption=="<"){nNewNode=$("<div></div>")[0];cNext=aDom[i+1];if(cNext=="'"||cNext=='"'){sAttr="";j=2;while(aDom[i+j]!=cNext){sAttr+=aDom[i+j];j++}if(sAttr=="H"){sAttr=oSettings.oClasses.sJUIHeader}else{if(sAttr=="F"){sAttr=oSettings.oClasses.sJUIFooter}}if(sAttr.indexOf(".")!=-1){var aSplit=sAttr.split(".");nNewNode.id=aSplit[0].substr(1,aSplit[0].length-1);nNewNode.className=aSplit[1]}else{if(sAttr.charAt(0)=="#"){nNewNode.id=sAttr.substr(1,sAttr.length-1)}else{nNewNode.className=sAttr}}i+=j}nInsertNode.appendChild(nNewNode);nInsertNode=nNewNode}else{if(cOption==">"){nInsertNode=nInsertNode.parentNode}else{if(cOption=="l"&&oSettings.oFeatures.bPaginate&&oSettings.oFeatures.bLengthChange){nTmp=_fnFeatureHtmlLength(oSettings);iPushFeature=1}else{if(cOption=="f"&&oSettings.oFeatures.bFilter){nTmp=_fnFeatureHtmlFilter(oSettings);iPushFeature=1}else{if(cOption=="r"&&oSettings.oFeatures.bProcessing){nTmp=_fnFeatureHtmlProcessing(oSettings);iPushFeature=1}else{if(cOption=="t"){nTmp=_fnFeatureHtmlTable(oSettings);iPushFeature=1}else{if(cOption=="i"&&oSettings.oFeatures.bInfo){nTmp=_fnFeatureHtmlInfo(oSettings);iPushFeature=1}else{if(cOption=="p"&&oSettings.oFeatures.bPaginate){nTmp=_fnFeatureHtmlPaginate(oSettings);iPushFeature=1}else{if(DataTable.ext.aoFeatures.length!==0){var aoFeatures=DataTable.ext.aoFeatures;for(var k=0,kLen=aoFeatures.length;k<kLen;k++){if(cOption==aoFeatures[k].cFeature){nTmp=aoFeatures[k].fnInit(oSettings);if(nTmp){iPushFeature=1}break}}}}}}}}}}}if(iPushFeature==1&&nTmp!==null){if(typeof oSettings.aanFeatures[cOption]!=="object"){oSettings.aanFeatures[cOption]=[]}oSettings.aanFeatures[cOption].push(nTmp);nInsertNode.appendChild(nTmp)}}nHolding.parentNode.replaceChild(oSettings.nTableWrapper,nHolding)}function _fnDetectHeader(aLayout,nThead){var nTrs=$(nThead).children("tr");var nTr,nCell;var i,k,l,iLen,jLen,iColShifted,iColumn,iColspan,iRowspan;var bUnique;var fnShiftCol=function(a,i,j){var k=a[i];while(k[j]){j++}return j};aLayout.splice(0,aLayout.length);for(i=0,iLen=nTrs.length;i<iLen;i++){aLayout.push([])}for(i=0,iLen=nTrs.length;i<iLen;i++){nTr=nTrs[i];iColumn=0;nCell=nTr.firstChild;while(nCell){if(nCell.nodeName.toUpperCase()=="TD"||nCell.nodeName.toUpperCase()=="TH"){iColspan=nCell.getAttribute("colspan")*1;iRowspan=nCell.getAttribute("rowspan")*1;iColspan=(!iColspan||iColspan===0||iColspan===1)?1:iColspan;iRowspan=(!iRowspan||iRowspan===0||iRowspan===1)?1:iRowspan;iColShifted=fnShiftCol(aLayout,i,iColumn);bUnique=iColspan===1?true:false;for(l=0;l<iColspan;l++){for(k=0;k<iRowspan;k++){aLayout[i+k][iColShifted+l]={cell:nCell,unique:bUnique};aLayout[i+k].nTr=nTr}}}nCell=nCell.nextSibling}}}function _fnGetUniqueThs(oSettings,nHeader,aLayout){var aReturn=[];if(!aLayout){aLayout=oSettings.aoHeader;if(nHeader){aLayout=[];_fnDetectHeader(aLayout,nHeader)}}for(var i=0,iLen=aLayout.length;i<iLen;i++){for(var j=0,jLen=aLayout[i].length;j<jLen;j++){if(aLayout[i][j].unique&&(!aReturn[j]||!oSettings.bSortCellsTop)){aReturn[j]=aLayout[i][j].cell}}}return aReturn}function _fnAjaxUpdate(oSettings){if(oSettings.bAjaxDataGet){oSettings.iDraw++;_fnProcessingDisplay(oSettings,true);var iColumns=oSettings.aoColumns.length;var aoData=_fnAjaxParameters(oSettings);_fnServerParams(oSettings,aoData);oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,aoData,function(json){_fnAjaxUpdateDraw(oSettings,json)},oSettings);return false}else{return true}}function _fnAjaxParameters(oSettings){var iColumns=oSettings.aoColumns.length;var aoData=[],mDataProp,aaSort,aDataSort;var i,j;aoData.push({name:"bSsaveEntries",value:(oSettings._saveEntriesChoice!=null&&oSettings._saveEntriesChoice==true)});aoData.push({name:"sEcho",value:oSettings.iDraw});aoData.push({name:"iColumns",value:iColumns});aoData.push({name:"sColumns",value:_fnColumnOrdering(oSettings)});aoData.push({name:"iDisplayStart",value:oSettings._iDisplayStart});aoData.push({name:"iDisplayLength",value:oSettings.oFeatures.bPaginate!==false?oSettings._iDisplayLength:-1});for(i=0;i<iColumns;i++){mDataProp=oSettings.aoColumns[i].mData;aoData.push({name:"mDataProp_"+i,value:typeof(mDataProp)==="function"?"function":mDataProp})}if(oSettings.oFeatures.bFilter!==false){aoData.push({name:"sSearch",value:oSettings.oPreviousSearch.sSearch});aoData.push({name:"bRegex",value:oSettings.oPreviousSearch.bRegex});for(i=0;i<iColumns;i++){aoData.push({name:"sSearch_"+i,value:oSettings.aoPreSearchCols[i].sSearch});aoData.push({name:"bRegex_"+i,value:oSettings.aoPreSearchCols[i].bRegex});aoData.push({name:"bSearchable_"+i,value:oSettings.aoColumns[i].bSearchable})}}if(oSettings.oFeatures.bSort!==false){var iCounter=0;aaSort=(oSettings.aaSortingFixed!==null)?oSettings.aaSortingFixed.concat(oSettings.aaSorting):oSettings.aaSorting.slice();for(i=0;i<aaSort.length;i++){aDataSort=oSettings.aoColumns[aaSort[i][0]].aDataSort;for(j=0;j<aDataSort.length;j++){aoData.push({name:"iSortCol_"+iCounter,value:aDataSort[j]});aoData.push({name:"sSortDir_"+iCounter,value:aaSort[i][1]});iCounter++}}aoData.push({name:"iSortingCols",value:iCounter});for(i=0;i<iColumns;i++){aoData.push({name:"bSortable_"+i,value:oSettings.aoColumns[i].bSortable})}}return aoData}function _fnServerParams(oSettings,aoData){_fnCallbackFire(oSettings,"aoServerParams","serverParams",[aoData])}function _fnAjaxUpdateDraw(oSettings,json){if(json.sEcho!==undefined){if(json.sEcho*1<oSettings.iDraw){return}else{oSettings.iDraw=json.sEcho*1}}oSettings._iDisplayLength=json.iDisplayLength;$("#"+oSettings.sInstance+"_length select.xray-lenght-select").val(oSettings._iDisplayLength);if(json.meta){oSettings.meta=json.meta}if(!oSettings.oScroll.bInfinite||(oSettings.oScroll.bInfinite&&(oSettings.bSorted||oSettings.bFiltered))){_fnClearTable(oSettings)}oSettings._iRecordsTotal=parseInt(json.iTotalRecords,10);oSettings._iRecordsDisplay=parseInt(json.iTotalDisplayRecords,10);if(json.iDisplayStart!==null){oSettings._iDisplayStart=parseInt(json.iDisplayStart,10)}var sOrdering=_fnColumnOrdering(oSettings);var bReOrder=(json.sColumns!==undefined&&sOrdering!==""&&json.sColumns!=sOrdering);var aiIndex;if(bReOrder){aiIndex=_fnReOrderIndex(oSettings,json.sColumns)}var aData=_fnGetObjectDataFn(oSettings.sAjaxDataProp)(json);for(var i=0,iLen=aData.length;i<iLen;i++){if(bReOrder){var aDataSorted=[];for(var j=0,jLen=oSettings.aoColumns.length;j<jLen;j++){aDataSorted.push(aData[i][aiIndex[j]])}_fnAddData(oSettings,aDataSorted)}else{_fnAddData(oSettings,aData[i])}}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bAjaxDataGet=false;_fnDraw(oSettings);oSettings.bAjaxDataGet=true;_fnProcessingDisplay(oSettings,false)}function _fnFeatureHtmlFilter(oSettings){var oPreviousSearch=oSettings.oPreviousSearch;var sSearchStr=oSettings.oLanguage.sSearch;sSearchStr=(sSearchStr.indexOf("_INPUT_")!==-1)?sSearchStr.replace("_INPUT_",'<input type="text" />'):sSearchStr===""?'<input type="text" />':sSearchStr+' <input type="text" />';var nFilter=document.createElement("div");nFilter.className=oSettings.oClasses.sFilter;nFilter.innerHTML="<label>"+sSearchStr+"</label>";if(!oSettings.aanFeatures.f){nFilter.id=oSettings.sTableId+"_filter"}var jqFilter=$('input[type="text"]',nFilter);nFilter._DT_Input=jqFilter[0];jqFilter.val(oPreviousSearch.sSearch.replace('"',"&quot;"));jqFilter.bind("keyup.DT",function(e){var n=oSettings.aanFeatures.f;var val=this.value===""?"":this.value;for(var i=0,iLen=n.length;i<iLen;i++){if(n[i]!=$(this).parents("div.xrayDataTables_filter")[0]){$(n[i]._DT_Input).val(val)}}if(val!=oPreviousSearch.sSearch){_fnFilterComplete(oSettings,{sSearch:val,bRegex:oPreviousSearch.bRegex,bSmart:oPreviousSearch.bSmart,bCaseInsensitive:oPreviousSearch.bCaseInsensitive})}});jqFilter.attr("aria-controls",oSettings.sTableId).bind("keypress.DT",function(e){if(e.keyCode==13){return false}});return nFilter}function _fnFilterComplete(oSettings,oInput,iForce){var oPrevSearch=oSettings.oPreviousSearch;var aoPrevSearch=oSettings.aoPreSearchCols;var fnSaveFilter=function(oFilter){oPrevSearch.sSearch=oFilter.sSearch;oPrevSearch.bRegex=oFilter.bRegex;oPrevSearch.bSmart=oFilter.bSmart;oPrevSearch.bCaseInsensitive=oFilter.bCaseInsensitive};if(!oSettings.oFeatures.bServerSide){_fnFilter(oSettings,oInput.sSearch,iForce,oInput.bRegex,oInput.bSmart,oInput.bCaseInsensitive);fnSaveFilter(oInput);for(var i=0;i<oSettings.aoPreSearchCols.length;i++){_fnFilterColumn(oSettings,aoPrevSearch[i].sSearch,i,aoPrevSearch[i].bRegex,aoPrevSearch[i].bSmart,aoPrevSearch[i].bCaseInsensitive)}_fnFilterCustom(oSettings)}else{fnSaveFilter(oInput)}oSettings.bFiltered=true;$(oSettings.oInstance).trigger("filter",oSettings);oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings);_fnBuildSearchArray(oSettings,0)}function _fnFilterCustom(oSettings){var afnFilters=DataTable.ext.afnFiltering;var aiFilterColumns=_fnGetColumns(oSettings,"bSearchable");for(var i=0,iLen=afnFilters.length;i<iLen;i++){var iCorrector=0;for(var j=0,jLen=oSettings.aiDisplay.length;j<jLen;j++){var iDisIndex=oSettings.aiDisplay[j-iCorrector];var bTest=afnFilters[i](oSettings,_fnGetRowData(oSettings,iDisIndex,"filter",aiFilterColumns),iDisIndex);if(!bTest){oSettings.aiDisplay.splice(j-iCorrector,1);iCorrector++}}}}function _fnFilterColumn(oSettings,sInput,iColumn,bRegex,bSmart,bCaseInsensitive){if(sInput===""){return}var iIndexCorrector=0;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart,bCaseInsensitive);for(var i=oSettings.aiDisplay.length-1;i>=0;i--){var sData=_fnDataToSearch(_fnGetCellData(oSettings,oSettings.aiDisplay[i],iColumn,"filter"),oSettings.aoColumns[iColumn].sType);if(!rpSearch.test(sData)){oSettings.aiDisplay.splice(i,1);iIndexCorrector++}}}function _fnFilter(oSettings,sInput,iForce,bRegex,bSmart,bCaseInsensitive){var i;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart,bCaseInsensitive);var oPrevSearch=oSettings.oPreviousSearch;if(!iForce){iForce=0}if(DataTable.ext.afnFiltering.length!==0){iForce=1}if(sInput.length<=0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);oSettings.aiDisplay=oSettings.aiDisplayMaster.slice()}else{if(oSettings.aiDisplay.length==oSettings.aiDisplayMaster.length||oPrevSearch.sSearch.length>sInput.length||iForce==1||sInput.indexOf(oPrevSearch.sSearch)!==0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnBuildSearchArray(oSettings,1);for(i=0;i<oSettings.aiDisplayMaster.length;i++){if(rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.push(oSettings.aiDisplayMaster[i])}}}else{var iIndexCorrector=0;for(i=0;i<oSettings.asDataSearch.length;i++){if(!rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.splice(i-iIndexCorrector,1);iIndexCorrector++}}}}}function _fnBuildSearchArray(oSettings,iMaster){if(!oSettings.oFeatures.bServerSide){oSettings.asDataSearch=[];var aiFilterColumns=_fnGetColumns(oSettings,"bSearchable");var aiIndex=(iMaster===1)?oSettings.aiDisplayMaster:oSettings.aiDisplay;for(var i=0,iLen=aiIndex.length;i<iLen;i++){oSettings.asDataSearch[i]=_fnBuildSearchRow(oSettings,_fnGetRowData(oSettings,aiIndex[i],"filter",aiFilterColumns))}}}function _fnBuildSearchRow(oSettings,aData){var sSearch=aData.join("  ");if(sSearch.indexOf("&")!==-1){sSearch=$("<div>").html(sSearch).text()}return sSearch.replace(/[\n\r]/g," ")}function _fnFilterCreateSearch(sSearch,bRegex,bSmart,bCaseInsensitive){var asSearch,sRegExpString;if(bSmart){asSearch=bRegex?sSearch.split(" "):_fnEscapeRegex(sSearch).split(" ");sRegExpString="^(?=.*?"+asSearch.join(")(?=.*?")+").*$";return new RegExp(sRegExpString,bCaseInsensitive?"i":"")}else{sSearch=bRegex?sSearch:_fnEscapeRegex(sSearch);return new RegExp(sSearch,bCaseInsensitive?"i":"")}}function _fnDataToSearch(sData,sType){if(typeof DataTable.ext.ofnSearch[sType]==="function"){return DataTable.ext.ofnSearch[sType](sData)}else{if(sData===null){return""}else{if(sType=="html"){return sData.replace(/[\r\n]/g," ").replace(/<.*?>/g,"")}else{if(typeof sData==="string"){return sData.replace(/[\r\n]/g," ")}}}}return sData}function _fnEscapeRegex(sVal){var acEscape=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"];var reReplace=new RegExp("(\\"+acEscape.join("|\\")+")","g");return sVal.replace(reReplace,"\\$1")}function _fnFeatureHtmlInfo(oSettings){var nInfo=document.createElement("div");nInfo.className=oSettings.oClasses.sInfo;if(!oSettings.aanFeatures.i){oSettings.aoDrawCallback.push({fn:_fnUpdateInfo,sName:"information"});nInfo.id=oSettings.sTableId+"_info"}oSettings.nTable.setAttribute("aria-describedby",oSettings.sTableId+"_info");return nInfo}function _fnUpdateInfo(oSettings){if(!oSettings.oFeatures.bInfo||oSettings.aanFeatures.i.length===0){return}var oLang=oSettings.oLanguage,iStart=oSettings._iDisplayStart+1,iEnd=oSettings.fnDisplayEnd(),iMax=oSettings.fnRecordsTotal(),iTotal=oSettings.fnRecordsDisplay(),sOut;if(iTotal===0){sOut=oLang.sInfoEmpty}else{sOut=oLang.sInfo}if(iTotal!=iMax){sOut+=" "+oLang.sInfoFiltered}sOut+=oLang.sInfoPostFix;sOut=_fnInfoMacros(oSettings,sOut);if(oLang.fnInfoCallback!==null){sOut=oLang.fnInfoCallback.call(oSettings.oInstance,oSettings,iStart,iEnd,iMax,iTotal,sOut)}var n=oSettings.aanFeatures.i;for(var i=0,iLen=n.length;i<iLen;i++){$(n[i]).html(sOut)}}function _fnInfoMacros(oSettings,str){var iStart=oSettings._iDisplayStart+1,sStart=oSettings.fnFormatNumber(iStart),iEnd=oSettings.fnDisplayEnd(),sEnd=oSettings.fnFormatNumber(iEnd),iTotal=oSettings.fnRecordsDisplay(),sTotal=oSettings.fnFormatNumber(iTotal),iMax=oSettings.fnRecordsTotal(),sMax=oSettings.fnFormatNumber(iMax);if(oSettings.oScroll.bInfinite){sStart=oSettings.fnFormatNumber(1)}return str.replace(/_START_/g,sStart).replace(/_END_/g,sEnd).replace(/_TOTAL_/g,sTotal).replace(/_MAX_/g,sMax)}function _fnInitialise(oSettings){var i,iLen,iAjaxStart=oSettings.iInitDisplayStart;if(oSettings.bInitialised===false){setTimeout(function(){_fnInitialise(oSettings)},200);return}_fnAddOptionsHtml(oSettings);_fnBuildHead(oSettings);_fnDrawHead(oSettings,oSettings.aoHeader);if(oSettings.nTFoot){_fnDrawHead(oSettings,oSettings.aoFooter)}_fnProcessingDisplay(oSettings,true);if(oSettings.oFeatures.bAutoWidth){_fnCalculateColumnWidths(oSettings)}for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].sWidth!==null){oSettings.aoColumns[i].nTh.style.width=_fnStringToCss(oSettings.aoColumns[i].sWidth)}}if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}if(oSettings.sAjaxSource!==null&&!oSettings.oFeatures.bServerSide){var aoData=[];_fnServerParams(oSettings,aoData);oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,aoData,function(json){var aData=(oSettings.sAjaxDataProp!=="")?_fnGetObjectDataFn(oSettings.sAjaxDataProp)(json):json;alert(JSON.stringify(json));for(i=0;i<aData.length;i++){_fnAddData(oSettings,aData[i])}oSettings.iInitDisplayStart=iAjaxStart;if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}_fnProcessingDisplay(oSettings,false);_fnInitComplete(oSettings,json)},oSettings);return}if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false);_fnInitComplete(oSettings)}}function _fnInitComplete(oSettings,json){oSettings._bInitComplete=true;_fnCallbackFire(oSettings,"aoInitComplete","init",[oSettings,json])}function _fnLanguageCompat(oLanguage){var oDefaults=DataTable.defaults.oLanguage;if(!oLanguage.sEmptyTable&&oLanguage.sZeroRecords&&oDefaults.sEmptyTable==="No data available in table"){_fnMap(oLanguage,oLanguage,"sZeroRecords","sEmptyTable")}if(!oLanguage.sLoadingRecords&&oLanguage.sZeroRecords&&oDefaults.sLoadingRecords==="Loading..."){_fnMap(oLanguage,oLanguage,"sZeroRecords","sLoadingRecords")}}function _fnFeatureHtmlLength(oSettings){if(oSettings.oScroll.bInfinite){return null}var sName='name="'+oSettings.sTableId+'_length"';var sStdMenu='<select size="1" '+sName+">";var i,iLen;var aLengthMenu=oSettings.aLengthMenu;if(aLengthMenu.length==2&&typeof aLengthMenu[0]==="object"&&typeof aLengthMenu[1]==="object"){for(i=0,iLen=aLengthMenu[0].length;i<iLen;i++){sStdMenu+='<option value="'+aLengthMenu[0][i]+'">'+aLengthMenu[1][i]+"</option>"}}else{for(i=0,iLen=aLengthMenu.length;i<iLen;i++){sStdMenu+='<option value="'+aLengthMenu[i]+'">'+aLengthMenu[i]+"</option>"}}sStdMenu+="</select>";var nLength=document.createElement("div");if(!oSettings.aanFeatures.l){nLength.id=oSettings.sTableId+"_length"}nLength.className=oSettings.oClasses.sLength;nLength.innerHTML="<label>"+oSettings.oLanguage.sLengthMenu.replace("_MENU_",sStdMenu)+"</label>";$('select option[value="'+oSettings._iDisplayLength+'"]',nLength).attr("selected",true);$("select",nLength).addClass("xray-lenght-select");$("select",nLength).bind("change.DT",function(e){var iVal=$(this).val();var n=oSettings.aanFeatures.l;for(i=0,iLen=n.length;i<iLen;i++){if(n[i]!=this.parentNode){$("select",n[i]).val(iVal)}}oSettings._iDisplayLength=parseInt(iVal,10);_fnCalculateEnd(oSettings);if(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay()){oSettings._iDisplayStart=oSettings.fnDisplayEnd()-oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(oSettings._iDisplayLength==-1){oSettings._iDisplayStart=0}oSettings._saveEntriesChoice=true;_fnDraw(oSettings)});$("select",nLength).attr("aria-controls",oSettings.sTableId);return nLength}function _fnCalculateEnd(oSettings){if(oSettings.oFeatures.bPaginate===false){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{if(oSettings._iDisplayStart+oSettings._iDisplayLength>oSettings.aiDisplay.length||oSettings._iDisplayLength==-1){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{oSettings._iDisplayEnd=oSettings._iDisplayStart+oSettings._iDisplayLength}}}function _fnFeatureHtmlPaginate(oSettings){if(oSettings.oScroll.bInfinite){return null}var nPaginate=document.createElement("div");nPaginate.className=oSettings.oClasses.sPaging+oSettings.sPaginationType;DataTable.ext.oPagination[oSettings.sPaginationType].fnInit(oSettings,nPaginate,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)});if(!oSettings.aanFeatures.p){oSettings.aoDrawCallback.push({fn:function(oSettings){DataTable.ext.oPagination[oSettings.sPaginationType].fnUpdate(oSettings,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)})},sName:"pagination"})}return nPaginate}function _fnPageChange(oSettings,mAction){var iOldStart=oSettings._iDisplayStart;if(typeof mAction==="number"){oSettings._iDisplayStart=mAction*oSettings._iDisplayLength;if(oSettings._iDisplayStart>oSettings.fnRecordsDisplay()){oSettings._iDisplayStart=0}}else{if(mAction=="first"){oSettings._iDisplayStart=0}else{if(mAction=="previous"){oSettings._iDisplayStart=oSettings._iDisplayLength>=0?oSettings._iDisplayStart-oSettings._iDisplayLength:0;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}else{if(mAction=="next"){if(oSettings._iDisplayLength>=0){if(oSettings._iDisplayStart+oSettings._iDisplayLength<oSettings.fnRecordsDisplay()){oSettings._iDisplayStart+=oSettings._iDisplayLength}}else{oSettings._iDisplayStart=0}}else{if(mAction=="last"){if(oSettings._iDisplayLength>=0){var iPages=parseInt((oSettings.fnRecordsDisplay()-1)/oSettings._iDisplayLength,10)+1;oSettings._iDisplayStart=(iPages-1)*oSettings._iDisplayLength}else{oSettings._iDisplayStart=0}}else{_fnLog(oSettings,0,"Unknown paging action: "+mAction)}}}}}_fnCallbackFire(oSettings,"pageChangeCallback",null,[oSettings,mAction]);$(oSettings.oInstance).trigger("page",oSettings);return iOldStart!=oSettings._iDisplayStart}function _fnFeatureHtmlProcessing(oSettings){var nProcessing=document.createElement("div");if(!oSettings.aanFeatures.r){nProcessing.id=oSettings.sTableId+"_processing"}nProcessing.innerHTML=oSettings.oLanguage.sProcessing;nProcessing.className=oSettings.oClasses.sProcessing;oSettings.nTable.parentNode.insertBefore(nProcessing,oSettings.nTable);return nProcessing}function _fnProcessingDisplay(oSettings,bShow){if(oSettings.oFeatures.bProcessing){var an=oSettings.aanFeatures.r;for(var i=0,iLen=an.length;i<iLen;i++){an[i].style.visibility=bShow?"visible":"hidden"}}$(oSettings.oInstance).trigger("processing",[oSettings,bShow])}function _fnFeatureHtmlTable(oSettings){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){return oSettings.nTable}var nScroller=document.createElement("div"),nScrollHead=document.createElement("div"),nScrollHeadInner=document.createElement("div"),nScrollBody=document.createElement("div"),nScrollFoot=document.createElement("div"),nScrollFootInner=document.createElement("div"),nScrollHeadTable=oSettings.nTable.cloneNode(false),nScrollFootTable=oSettings.nTable.cloneNode(false),nThead=oSettings.nTable.getElementsByTagName("thead")[0],nTfoot=oSettings.nTable.getElementsByTagName("tfoot").length===0?null:oSettings.nTable.getElementsByTagName("tfoot")[0],oClasses=oSettings.oClasses;nScrollHead.appendChild(nScrollHeadInner);nScrollFoot.appendChild(nScrollFootInner);nScrollBody.appendChild(oSettings.nTable);nScroller.appendChild(nScrollHead);nScroller.appendChild(nScrollBody);nScrollHeadInner.appendChild(nScrollHeadTable);nScrollHeadTable.appendChild(nThead);if(nTfoot!==null){nScroller.appendChild(nScrollFoot);nScrollFootInner.appendChild(nScrollFootTable);nScrollFootTable.appendChild(nTfoot)}nScroller.className=oClasses.sScrollWrapper;nScrollHead.className=oClasses.sScrollHead;nScrollHeadInner.className=oClasses.sScrollHeadInner;nScrollBody.className=oClasses.sScrollBody;nScrollFoot.className=oClasses.sScrollFoot;nScrollFootInner.className=oClasses.sScrollFootInner;if(oSettings.oScroll.bAutoCss){nScrollHead.style.overflow="hidden";nScrollHead.style.position="relative";nScrollFoot.style.overflow="hidden";nScrollBody.style.overflow="auto"}nScrollHead.style.border="0";nScrollHead.style.width="100%";nScrollFoot.style.border="0";nScrollHeadInner.style.width=oSettings.oScroll.sXInner!==""?oSettings.oScroll.sXInner:"100%";nScrollHeadTable.removeAttribute("id");nScrollHeadTable.style.marginLeft="0";oSettings.nTable.style.marginLeft="0";if(nTfoot!==null){nScrollFootTable.removeAttribute("id");nScrollFootTable.style.marginLeft="0"}var nCaption=$(oSettings.nTable).children("caption");if(nCaption.length>0){nCaption=nCaption[0];if(nCaption._captionSide==="top"){nScrollHeadTable.appendChild(nCaption)}else{if(nCaption._captionSide==="bottom"&&nTfoot){nScrollFootTable.appendChild(nCaption)}}}if(oSettings.oScroll.sX!==""){nScrollHead.style.width=_fnStringToCss(oSettings.oScroll.sX);nScrollBody.style.width=_fnStringToCss(oSettings.oScroll.sX);if(nTfoot!==null){nScrollFoot.style.width=_fnStringToCss(oSettings.oScroll.sX)}$(nScrollBody).scroll(function(e){nScrollHead.scrollLeft=this.scrollLeft;if(nTfoot!==null){nScrollFoot.scrollLeft=this.scrollLeft}})}if(oSettings.oScroll.sY!==""){nScrollBody.style.height=_fnStringToCss(oSettings.oScroll.sY)}oSettings.aoDrawCallback.push({fn:_fnScrollDraw,sName:"scrolling"});if(oSettings.oScroll.bInfinite){$(nScrollBody).scroll(function(){if(!oSettings.bDrawing&&$(this).scrollTop()!==0){if($(this).scrollTop()+$(this).height()>$(oSettings.nTable).height()-oSettings.oScroll.iLoadGap){if(oSettings.fnDisplayEnd()<oSettings.fnRecordsDisplay()){_fnPageChange(oSettings,"next");_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}})}oSettings.nScrollHead=nScrollHead;oSettings.nScrollFoot=nScrollFoot;return nScroller}function _fnScrollDraw(o){var nScrollHeadInner=o.nScrollHead.getElementsByTagName("div")[0],nScrollHeadTable=nScrollHeadInner.getElementsByTagName("table")[0],nScrollBody=o.nTable.parentNode,i,iLen,j,jLen,anHeadToSize,anHeadSizers,anFootSizers,anFootToSize,oStyle,iVis,nTheadSize,nTfootSize,iWidth,aApplied=[],aAppliedFooter=[],iSanityWidth,nScrollFootInner=(o.nTFoot!==null)?o.nScrollFoot.getElementsByTagName("div")[0]:null,nScrollFootTable=(o.nTFoot!==null)?nScrollFootInner.getElementsByTagName("table")[0]:null,ie67=o.oBrowser.bScrollOversize,zeroOut=function(nSizer){oStyle=nSizer.style;oStyle.paddingTop="0";oStyle.paddingBottom="0";oStyle.borderTopWidth="0";oStyle.borderBottomWidth="0";oStyle.height=0};$(o.nTable).children("thead, tfoot").remove();nTheadSize=$(o.nTHead).clone()[0];o.nTable.insertBefore(nTheadSize,o.nTable.childNodes[0]);anHeadToSize=o.nTHead.getElementsByTagName("tr");anHeadSizers=nTheadSize.getElementsByTagName("tr");if(o.nTFoot!==null){nTfootSize=$(o.nTFoot).clone()[0];o.nTable.insertBefore(nTfootSize,o.nTable.childNodes[1]);anFootToSize=o.nTFoot.getElementsByTagName("tr");anFootSizers=nTfootSize.getElementsByTagName("tr")}if(o.oScroll.sX===""){nScrollBody.style.width="100%";nScrollHeadInner.parentNode.style.width="100%"}var nThs=_fnGetUniqueThs(o,nTheadSize);for(i=0,iLen=nThs.length;i<iLen;i++){iVis=_fnVisibleToColumnIndex(o,i);nThs[i].style.width=o.aoColumns[iVis].sWidth}if(o.nTFoot!==null){_fnApplyToChildren(function(n){n.style.width=""},anFootSizers)}if(o.oScroll.bCollapse&&o.oScroll.sY!==""){nScrollBody.style.height=(nScrollBody.offsetHeight+o.nTHead.offsetHeight)+"px"}iSanityWidth=$(o.nTable).outerWidth();if(o.oScroll.sX===""){o.nTable.style.width="100%";if(ie67&&($("tbody",nScrollBody).height()>nScrollBody.offsetHeight||$(nScrollBody).css("overflow-y")=="scroll")){o.nTable.style.width=_fnStringToCss($(o.nTable).outerWidth()-o.oScroll.iBarWidth)}}else{if(o.oScroll.sXInner!==""){o.nTable.style.width=_fnStringToCss(o.oScroll.sXInner)}else{if(iSanityWidth==$(nScrollBody).width()&&$(nScrollBody).height()<$(o.nTable).height()){o.nTable.style.width=_fnStringToCss(iSanityWidth-o.oScroll.iBarWidth);if($(o.nTable).outerWidth()>iSanityWidth-o.oScroll.iBarWidth){o.nTable.style.width=_fnStringToCss(iSanityWidth)}}else{o.nTable.style.width=_fnStringToCss(iSanityWidth)}}}iSanityWidth=$(o.nTable).outerWidth();_fnApplyToChildren(zeroOut,anHeadSizers);_fnApplyToChildren(function(nSizer){aApplied.push(_fnStringToCss($(nSizer).width()))},anHeadSizers);_fnApplyToChildren(function(nToSize,i){nToSize.style.width=aApplied[i]},anHeadToSize);$(anHeadSizers).height(0);if(o.nTFoot!==null){_fnApplyToChildren(zeroOut,anFootSizers);_fnApplyToChildren(function(nSizer){aAppliedFooter.push(_fnStringToCss($(nSizer).width()))},anFootSizers);_fnApplyToChildren(function(nToSize,i){nToSize.style.width=aAppliedFooter[i]},anFootToSize);$(anFootSizers).height(0)}_fnApplyToChildren(function(nSizer,i){nSizer.innerHTML="";nSizer.style.width=aApplied[i]},anHeadSizers);if(o.nTFoot!==null){_fnApplyToChildren(function(nSizer,i){nSizer.innerHTML="";nSizer.style.width=aAppliedFooter[i]},anFootSizers)}if($(o.nTable).outerWidth()<iSanityWidth){var iCorrection=((nScrollBody.scrollHeight>nScrollBody.offsetHeight||$(nScrollBody).css("overflow-y")=="scroll"))?iSanityWidth+o.oScroll.iBarWidth:iSanityWidth;if(ie67&&(nScrollBody.scrollHeight>nScrollBody.offsetHeight||$(nScrollBody).css("overflow-y")=="scroll")){o.nTable.style.width=_fnStringToCss(iCorrection-o.oScroll.iBarWidth)}nScrollBody.style.width=_fnStringToCss(iCorrection);o.nScrollHead.style.width=_fnStringToCss(iCorrection);if(o.nTFoot!==null){o.nScrollFoot.style.width=_fnStringToCss(iCorrection)}if(o.oScroll.sX===""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. The table has been drawn at its minimum possible width.")}else{if(o.oScroll.sXInner!==""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. Increase the sScrollXInner value or remove it to allow automatic calculation")}}}else{nScrollBody.style.width=_fnStringToCss("100%");o.nScrollHead.style.width=_fnStringToCss("100%");if(o.nTFoot!==null){o.nScrollFoot.style.width=_fnStringToCss("100%")}}if(o.oScroll.sY===""){if(ie67){nScrollBody.style.height=_fnStringToCss(o.nTable.offsetHeight+o.oScroll.iBarWidth)}}if(o.oScroll.sY!==""&&o.oScroll.bCollapse){nScrollBody.style.height=_fnStringToCss(o.oScroll.sY);var iExtra=(o.oScroll.sX!==""&&o.nTable.offsetWidth>nScrollBody.offsetWidth)?o.oScroll.iBarWidth:0;if(o.nTable.offsetHeight<nScrollBody.offsetHeight){nScrollBody.style.height=_fnStringToCss(o.nTable.offsetHeight+iExtra)}}var iOuterWidth=$(o.nTable).outerWidth();nScrollHeadTable.style.width=_fnStringToCss(iOuterWidth);nScrollHeadInner.style.width=_fnStringToCss(iOuterWidth);var bScrolling=$(o.nTable).height()>nScrollBody.clientHeight||$(nScrollBody).css("overflow-y")=="scroll";nScrollHeadInner.style.paddingRight=bScrolling?o.oScroll.iBarWidth+"px":"0px";if(o.nTFoot!==null){nScrollFootTable.style.width=_fnStringToCss(iOuterWidth);nScrollFootInner.style.width=_fnStringToCss(iOuterWidth);nScrollFootInner.style.paddingRight=bScrolling?o.oScroll.iBarWidth+"px":"0px"}$(nScrollBody).scroll();if(o.bSorted||o.bFiltered){nScrollBody.scrollTop=0}}function _fnApplyToChildren(fn,an1,an2){var index=0,i=0,iLen=an1.length;var nNode1,nNode2;while(i<iLen){nNode1=an1[i].firstChild;nNode2=an2?an2[i].firstChild:null;while(nNode1){if(nNode1.nodeType===1){if(an2){fn(nNode1,nNode2,index)}else{fn(nNode1,index)}index++}nNode1=nNode1.nextSibling;nNode2=an2?nNode2.nextSibling:null}i++}}function _fnConvertToWidth(sWidth,nParent){if(!sWidth||sWidth===null||sWidth===""){return 0}if(!nParent){nParent=document.body}var iWidth;var nTmp=document.createElement("div");nTmp.style.width=_fnStringToCss(sWidth);nParent.appendChild(nTmp);iWidth=nTmp.offsetWidth;nParent.removeChild(nTmp);return(iWidth)}function _fnCalculateColumnWidths(oSettings){var iTableWidth=oSettings.nTable.offsetWidth;var iUserInputs=0;var iTmpWidth;var iVisibleColumns=0;var iColums=oSettings.aoColumns.length;var i,iIndex,iCorrector,iWidth;var oHeaders=$("th",oSettings.nTHead);var widthAttr=oSettings.nTable.getAttribute("width");var nWrapper=oSettings.nTable.parentNode;for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){iVisibleColumns++;if(oSettings.aoColumns[i].sWidth!==null){iTmpWidth=_fnConvertToWidth(oSettings.aoColumns[i].sWidthOrig,nWrapper);if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}iUserInputs++}}}if(iColums==oHeaders.length&&iUserInputs===0&&iVisibleColumns==iColums&&oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){for(i=0;i<oSettings.aoColumns.length;i++){iTmpWidth=$(oHeaders[i]).width();if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}}}else{var nCalcTmp=oSettings.nTable.cloneNode(false),nTheadClone=oSettings.nTHead.cloneNode(true),nBody=document.createElement("tbody"),nTr=document.createElement("tr"),nDivSizing;nCalcTmp.removeAttribute("id");nCalcTmp.appendChild(nTheadClone);if(oSettings.nTFoot!==null){nCalcTmp.appendChild(oSettings.nTFoot.cloneNode(true));_fnApplyToChildren(function(n){n.style.width=""},nCalcTmp.getElementsByTagName("tr"))}nCalcTmp.appendChild(nBody);nBody.appendChild(nTr);var jqColSizing=$("thead th",nCalcTmp);if(jqColSizing.length===0){jqColSizing=$("tbody tr:eq(0)>td",nCalcTmp)}var nThs=_fnGetUniqueThs(oSettings,nTheadClone);iCorrector=0;for(i=0;i<iColums;i++){var oColumn=oSettings.aoColumns[i];if(oColumn.bVisible&&oColumn.sWidthOrig!==null&&oColumn.sWidthOrig!==""){nThs[i-iCorrector].style.width=_fnStringToCss(oColumn.sWidthOrig)}else{if(oColumn.bVisible){nThs[i-iCorrector].style.width=""}else{iCorrector++}}}for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){var nTd=_fnGetWidestNode(oSettings,i);if(nTd!==null){nTd=nTd.cloneNode(true);if(oSettings.aoColumns[i].sContentPadding!==""){nTd.innerHTML+=oSettings.aoColumns[i].sContentPadding}nTr.appendChild(nTd)}}}nWrapper.appendChild(nCalcTmp);if(oSettings.oScroll.sX!==""&&oSettings.oScroll.sXInner!==""){nCalcTmp.style.width=_fnStringToCss(oSettings.oScroll.sXInner)}else{if(oSettings.oScroll.sX!==""){nCalcTmp.style.width="";if($(nCalcTmp).width()<nWrapper.offsetWidth){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}}else{if(oSettings.oScroll.sY!==""){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}else{if(widthAttr){nCalcTmp.style.width=_fnStringToCss(widthAttr)}}}}nCalcTmp.style.visibility="hidden";_fnScrollingWidthAdjust(oSettings,nCalcTmp);var oNodes=$("tbody tr:eq(0)",nCalcTmp).children();if(oNodes.length===0){oNodes=_fnGetUniqueThs(oSettings,$("thead",nCalcTmp)[0])}if(oSettings.oScroll.sX!==""){var iTotal=0;iCorrector=0;for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible){if(oSettings.aoColumns[i].sWidthOrig===null){iTotal+=$(oNodes[iCorrector]).outerWidth()}else{iTotal+=parseInt(oSettings.aoColumns[i].sWidth.replace("px",""),10)+($(oNodes[iCorrector]).outerWidth()-$(oNodes[iCorrector]).width())}iCorrector++}}nCalcTmp.style.width=_fnStringToCss(iTotal);oSettings.nTable.style.width=_fnStringToCss(iTotal)}iCorrector=0;for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible){iWidth=$(oNodes[iCorrector]).width();if(iWidth!==null&&iWidth>0){oSettings.aoColumns[i].sWidth=_fnStringToCss(iWidth)}iCorrector++}}var cssWidth=$(nCalcTmp).css("width");oSettings.nTable.style.width=(cssWidth.indexOf("%")!==-1)?cssWidth:_fnStringToCss($(nCalcTmp).outerWidth());nCalcTmp.parentNode.removeChild(nCalcTmp)}if(widthAttr){oSettings.nTable.style.width=_fnStringToCss(widthAttr)}}function _fnScrollingWidthAdjust(oSettings,n){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY!==""){var iOrigWidth=$(n).width();n.style.width=_fnStringToCss($(n).outerWidth()-oSettings.oScroll.iBarWidth)}else{if(oSettings.oScroll.sX!==""){n.style.width=_fnStringToCss($(n).outerWidth())}}}function _fnGetWidestNode(oSettings,iCol){var iMaxIndex=_fnGetMaxLenString(oSettings,iCol);if(iMaxIndex<0){return null}if(oSettings.aoData[iMaxIndex].nTr===null){var n=document.createElement("td");n.innerHTML=_fnGetCellData(oSettings,iMaxIndex,iCol,"");return n}return _fnGetTdNodes(oSettings,iMaxIndex)[iCol]}function _fnGetMaxLenString(oSettings,iCol){var iMax=-1;var iMaxIndex=-1;for(var i=0;i<oSettings.aoData.length;i++){var s=_fnGetCellData(oSettings,i,iCol,"display")+"";s=s.replace(/<.*?>/g,"");if(s.length>iMax){iMax=s.length;iMaxIndex=i}}return iMaxIndex}function _fnStringToCss(s){if(s===null){return"0px"}if(typeof s=="number"){if(s<0){return"0px"}return s+"px"}var c=s.charCodeAt(s.length-1);if(c<48||c>57){return s}return s+"px"}function _fnScrollBarWidth(){var inner=document.createElement("p");var style=inner.style;style.width="100%";style.height="200px";style.padding="0px";var outer=document.createElement("div");style=outer.style;style.position="absolute";style.top="0px";style.left="0px";style.visibility="hidden";style.width="200px";style.height="150px";style.padding="0px";style.overflow="hidden";outer.appendChild(inner);document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="scroll";var w2=inner.offsetWidth;if(w1==w2){w2=outer.clientWidth}document.body.removeChild(outer);return(w1-w2)}function _fnSort(oSettings,bApplyClasses){var i,iLen,j,jLen,k,kLen,sDataType,nTh,aaSort=[],aiOrig=[],oSort=DataTable.ext.oSort,aoData=oSettings.aoData,aoColumns=oSettings.aoColumns,oAria=oSettings.oLanguage.oAria;if(!oSettings.oFeatures.bServerSide&&(oSettings.aaSorting.length!==0||oSettings.aaSortingFixed!==null)){aaSort=(oSettings.aaSortingFixed!==null)?oSettings.aaSortingFixed.concat(oSettings.aaSorting):oSettings.aaSorting.slice();for(i=0;i<aaSort.length;i++){var iColumn=aaSort[i][0];var iVisColumn=_fnColumnIndexToVisible(oSettings,iColumn);sDataType=oSettings.aoColumns[iColumn].sSortDataType;if(DataTable.ext.afnSortData[sDataType]){var aData=DataTable.ext.afnSortData[sDataType].call(oSettings.oInstance,oSettings,iColumn,iVisColumn);if(aData.length===aoData.length){for(j=0,jLen=aoData.length;j<jLen;j++){_fnSetCellData(oSettings,j,iColumn,aData[j])}}else{_fnLog(oSettings,0,"Returned data sort array (col "+iColumn+") is the wrong length")}}}for(i=0,iLen=oSettings.aiDisplayMaster.length;i<iLen;i++){aiOrig[oSettings.aiDisplayMaster[i]]=i}var iSortLen=aaSort.length;var fnSortFormat,aDataSort;for(i=0,iLen=aoData.length;i<iLen;i++){for(j=0;j<iSortLen;j++){aDataSort=aoColumns[aaSort[j][0]].aDataSort;for(k=0,kLen=aDataSort.length;k<kLen;k++){sDataType=aoColumns[aDataSort[k]].sType;fnSortFormat=oSort[(sDataType?sDataType:"string")+"-pre"];aoData[i]._aSortData[aDataSort[k]]=fnSortFormat?fnSortFormat(_fnGetCellData(oSettings,i,aDataSort[k],"sort")):_fnGetCellData(oSettings,i,aDataSort[k],"sort")}}}oSettings.aiDisplayMaster.sort(function(a,b){var k,l,lLen,iTest,aDataSort,sDataType;for(k=0;k<iSortLen;k++){aDataSort=aoColumns[aaSort[k][0]].aDataSort;for(l=0,lLen=aDataSort.length;l<lLen;l++){sDataType=aoColumns[aDataSort[l]].sType;iTest=oSort[(sDataType?sDataType:"string")+"-"+aaSort[k][1]](aoData[a]._aSortData[aDataSort[l]],aoData[b]._aSortData[aDataSort[l]]);if(iTest!==0){return iTest}}}return oSort["numeric-asc"](aiOrig[a],aiOrig[b])})}if((bApplyClasses===undefined||bApplyClasses)&&!oSettings.oFeatures.bDeferRender){_fnSortingClasses(oSettings)}for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){var sTitle=aoColumns[i].sTitle.replace(/<.*?>/g,"");nTh=aoColumns[i].nTh;nTh.removeAttribute("aria-sort");nTh.removeAttribute("aria-label");if(aoColumns[i].bSortable){if(aaSort.length>0&&aaSort[0][0]==i){nTh.setAttribute("aria-sort",aaSort[0][1]=="asc"?"ascending":"descending");var nextSort=(aoColumns[i].asSorting[aaSort[0][2]+1])?aoColumns[i].asSorting[aaSort[0][2]+1]:aoColumns[i].asSorting[0];nTh.setAttribute("aria-label",sTitle+(nextSort=="asc"?oAria.sSortAscending:oAria.sSortDescending))}else{nTh.setAttribute("aria-label",sTitle+(aoColumns[i].asSorting[0]=="asc"?oAria.sSortAscending:oAria.sSortDescending))}}else{nTh.setAttribute("aria-label",sTitle)}}oSettings.bSorted=true;$(oSettings.oInstance).trigger("sort",oSettings);if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}function _fnSortAttachListener(oSettings,nNode,iDataIndex,fnCallback){_fnBindAction(nNode,{},function(e){if(oSettings.aoColumns[iDataIndex].bSortable===false){return}var fnInnerSorting=function(){var iColumn,iNextSort;if(e.shiftKey){var bFound=false;for(var i=0;i<oSettings.aaSorting.length;i++){if(oSettings.aaSorting[i][0]==iDataIndex){bFound=true;iColumn=oSettings.aaSorting[i][0];iNextSort=oSettings.aaSorting[i][2]+1;if(!oSettings.aoColumns[iColumn].asSorting[iNextSort]){oSettings.aaSorting.splice(i,1)}else{oSettings.aaSorting[i][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[i][2]=iNextSort}break}}if(bFound===false){oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}else{if(oSettings.aaSorting.length==1&&oSettings.aaSorting[0][0]==iDataIndex){iColumn=oSettings.aaSorting[0][0];iNextSort=oSettings.aaSorting[0][2]+1;if(!oSettings.aoColumns[iColumn].asSorting[iNextSort]){iNextSort=0}oSettings.aaSorting[0][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[0][2]=iNextSort}else{oSettings.aaSorting.splice(0,oSettings.aaSorting.length);oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}_fnSort(oSettings)};if(!oSettings.oFeatures.bProcessing){fnInnerSorting()}else{_fnProcessingDisplay(oSettings,true);setTimeout(function(){fnInnerSorting();if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false)}},0)}if(typeof fnCallback=="function"){fnCallback(oSettings)}})}function _fnSortingClasses(oSettings){var i,iLen,j,jLen,iFound;var aaSort,sClass;var iColumns=oSettings.aoColumns.length;var oClasses=oSettings.oClasses;for(i=0;i<iColumns;i++){if(oSettings.aoColumns[i].bSortable){$(oSettings.aoColumns[i].nTh).removeClass(oClasses.sSortAsc+" "+oClasses.sSortDesc+" "+oSettings.aoColumns[i].sSortingClass)}}if(oSettings.aaSortingFixed!==null){aaSort=oSettings.aaSortingFixed.concat(oSettings.aaSorting)}else{aaSort=oSettings.aaSorting.slice()}for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable){sClass=oSettings.aoColumns[i].sSortingClass;iFound=-1;for(j=0;j<aaSort.length;j++){if(aaSort[j][0]==i){sClass=(aaSort[j][1]=="asc")?oClasses.sSortAsc:oClasses.sSortDesc;iFound=j;break}}$(oSettings.aoColumns[i].nTh).addClass(sClass);if(oSettings.bJUI){var jqSpan=$("span."+oClasses.sSortIcon,oSettings.aoColumns[i].nTh);jqSpan.removeClass(oClasses.sSortJUIAsc+" "+oClasses.sSortJUIDesc+" "+oClasses.sSortJUI+" "+oClasses.sSortJUIAscAllowed+" "+oClasses.sSortJUIDescAllowed);var sSpanClass;if(iFound==-1){sSpanClass=oSettings.aoColumns[i].sSortingClassJUI}else{if(aaSort[iFound][1]=="asc"){sSpanClass=oClasses.sSortJUIAsc}else{sSpanClass=oClasses.sSortJUIDesc}}jqSpan.addClass(sSpanClass)}}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.aoColumns[i].sSortingClass)}}sClass=oClasses.sSortColumn;if(oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){var nTds=_fnGetTdNodes(oSettings);var iClass,iTargetCol;var asClasses=[];for(i=0;i<iColumns;i++){asClasses.push("")}for(i=0,iClass=1;i<aaSort.length;i++){iTargetCol=parseInt(aaSort[i][0],10);asClasses[iTargetCol]=sClass+iClass;if(iClass<3){iClass++}}var reClass=new RegExp(sClass+"[123]");var sTmpClass,sCurrentClass,sNewClass;for(i=0,iLen=nTds.length;i<iLen;i++){if(nTds[i]==undefined){continue}iTargetCol=i%iColumns;sCurrentClass=nTds[i].className;sNewClass=asClasses[iTargetCol];sTmpClass=sCurrentClass.replace(reClass,sNewClass);if(sTmpClass!=sCurrentClass){nTds[i].className=$.trim(sTmpClass)}else{if(sNewClass.length>0&&sCurrentClass.indexOf(sNewClass)==-1){nTds[i].className=sCurrentClass+" "+sNewClass}}}}}function _fnSaveState(oSettings){if(!oSettings.oFeatures.bStateSave||oSettings.bDestroying){return}var i,iLen,bInfinite=oSettings.oScroll.bInfinite;var oState={iCreate:new Date().getTime(),iStart:(bInfinite?0:oSettings._iDisplayStart),iEnd:(bInfinite?oSettings._iDisplayLength:oSettings._iDisplayEnd),iLength:oSettings._iDisplayLength,aaSorting:$.extend(true,[],oSettings.aaSorting),oSearch:$.extend(true,{},oSettings.oPreviousSearch),aoSearchCols:$.extend(true,[],oSettings.aoPreSearchCols),abVisCols:[]};for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){oState.abVisCols.push(oSettings.aoColumns[i].bVisible)}_fnCallbackFire(oSettings,"aoStateSaveParams","stateSaveParams",[oSettings,oState]);oSettings.fnStateSave.call(oSettings.oInstance,oSettings,oState)}function _fnLoadState(oSettings,oInit){if(!oSettings.oFeatures.bStateSave){return}var oData=oSettings.fnStateLoad.call(oSettings.oInstance,oSettings);if(!oData){return}var abStateLoad=_fnCallbackFire(oSettings,"aoStateLoadParams","stateLoadParams",[oSettings,oData]);if($.inArray(false,abStateLoad)!==-1){return}oSettings.oLoadedState=$.extend(true,{},oData);oSettings._iDisplayStart=oData.iStart;oSettings.iInitDisplayStart=oData.iStart;oSettings._iDisplayEnd=oData.iEnd;oSettings._iDisplayLength=oData.iLength;oSettings.aaSorting=oData.aaSorting.slice();oSettings.saved_aaSorting=oData.aaSorting.slice();$.extend(oSettings.oPreviousSearch,oData.oSearch);$.extend(true,oSettings.aoPreSearchCols,oData.aoSearchCols);oInit.saved_aoColumns=[];for(var i=0;i<oData.abVisCols.length;i++){oInit.saved_aoColumns[i]={};oInit.saved_aoColumns[i].bVisible=oData.abVisCols[i]}_fnCallbackFire(oSettings,"aoStateLoaded","stateLoaded",[oSettings,oData])}function _fnCreateCookie(sName,sValue,iSecs,sBaseName,fnCallback){var date=new Date();date.setTime(date.getTime()+(iSecs*1000));var aParts=window.location.pathname.split("/");var sNameFile=sName+"_"+aParts.pop().replace(/[\/:]/g,"").toLowerCase();var sFullCookie,oData;if(fnCallback!==null){oData=(typeof $.parseJSON==="function")?$.parseJSON(sValue):eval("("+sValue+")");sFullCookie=fnCallback(sNameFile,oData,date.toGMTString(),aParts.join("/")+"/")}else{sFullCookie=sNameFile+"="+encodeURIComponent(sValue)+"; expires="+date.toGMTString()+"; path="+aParts.join("/")+"/"}var aCookies=document.cookie.split(";"),iNewCookieLen=sFullCookie.split(";")[0].length,aOldCookies=[];if(iNewCookieLen+document.cookie.length+10>4096){for(var i=0,iLen=aCookies.length;i<iLen;i++){if(aCookies[i].indexOf(sBaseName)!=-1){var aSplitCookie=aCookies[i].split("=");try{oData=eval("("+decodeURIComponent(aSplitCookie[1])+")");if(oData&&oData.iCreate){aOldCookies.push({name:aSplitCookie[0],time:oData.iCreate})}}catch(e){}}}aOldCookies.sort(function(a,b){return b.time-a.time});while(iNewCookieLen+document.cookie.length+10>4096){if(aOldCookies.length===0){return}var old=aOldCookies.pop();document.cookie=old.name+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+aParts.join("/")+"/"}}document.cookie=sFullCookie}function _fnReadCookie(sName){var aParts=window.location.pathname.split("/"),sNameEQ=sName+"_"+aParts[aParts.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",sCookieContents=document.cookie.split(";");for(var i=0;i<sCookieContents.length;i++){var c=sCookieContents[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(sNameEQ)===0){return decodeURIComponent(c.substring(sNameEQ.length,c.length))}}return null}function _fnSettingsFromNode(nTable){for(var i=0;i<DataTable.settings.length;i++){if(DataTable.settings[i].nTable===nTable){return DataTable.settings[i]}}return null}function _fnGetTrNodes(oSettings){var aNodes=[];var aoData=oSettings.aoData;for(var i=0,iLen=aoData.length;i<iLen;i++){if(aoData[i].nTr!==null){aNodes.push(aoData[i].nTr)}}return aNodes}function _fnGetTdNodes(oSettings,iIndividualRow){var anReturn=[];var iCorrector;var anTds,nTd;var iRow,iRows=oSettings.aoData.length,iColumn,iColumns,oData,sNodeName,iStart=0,iEnd=iRows;if(iIndividualRow!==undefined){iStart=iIndividualRow;iEnd=iIndividualRow+1}for(iRow=iStart;iRow<iEnd;iRow++){oData=oSettings.aoData[iRow];if(oData.nTr!==null){anTds=[];nTd=oData.nTr.firstChild;while(nTd){sNodeName=nTd.nodeName.toLowerCase();if(sNodeName=="td"||sNodeName=="th"){anTds.push(nTd)}nTd=nTd.nextSibling}iCorrector=0;for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){if(oSettings.aoColumns[iColumn].bVisible){anReturn.push(anTds[iColumn-iCorrector])}else{anReturn.push(oData._anHidden[iColumn]);iCorrector++}}}}return anReturn}function _fnLog(oSettings,iLevel,sMesg){var sAlert=(oSettings===null)?"DataTables warning: "+sMesg:"DataTables warning (table id = '"+oSettings.sTableId+"'): "+sMesg;if(iLevel===0){if(DataTable.ext.sErrMode=="alert"){alert(sAlert)}else{throw new Error(sAlert)}return}else{if(window.console&&console.log){console.log(sAlert)}}}function _fnMap(oRet,oSrc,sName,sMappedName){if(sMappedName===undefined){sMappedName=sName}if(oSrc[sName]!==undefined){oRet[sMappedName]=oSrc[sName]}}function _fnExtend(oOut,oExtender){var val;for(var prop in oExtender){if(oExtender.hasOwnProperty(prop)){val=oExtender[prop];if(typeof oInit[prop]==="object"&&val!==null&&$.isArray(val)===false){$.extend(true,oOut[prop],val)}else{oOut[prop]=val}}}return oOut}function _fnBindAction(n,oData,fn){oData.combo=[];$(n).bind("click.DT",oData,function(e){n.blur();fn(e)}).bind("keypress.DT",oData,function(e){if(e.which===13){fn(e)}}).bind("selectstart.DT",function(){return false})}function _fnCallbackReg(oSettings,sStore,fn,sName){if(fn){oSettings[sStore].push({fn:fn,sName:sName})}}function _fnCallbackFire(oSettings,sStore,sTrigger,aArgs){var aoStore=oSettings[sStore];var aRet=[];for(var i=aoStore.length-1;i>=0;i--){aRet.push(aoStore[i].fn.apply(oSettings.oInstance,aArgs))}if(sTrigger!==null){$(oSettings.oInstance).trigger(sTrigger,aArgs)}return aRet}var _fnJsonString=(window.JSON)?JSON.stringify:function(o){var sType=typeof o;if(sType!=="object"||o===null){if(sType==="string"){o='"'+o+'"'}return o+""}var sProp,mValue,json=[],bArr=$.isArray(o);for(sProp in o){mValue=o[sProp];sType=typeof mValue;if(sType==="string"){mValue='"'+mValue+'"'}else{if(sType==="object"&&mValue!==null){mValue=_fnJsonString(mValue)}}json.push((bArr?"":'"'+sProp+'":')+mValue)}return(bArr?"[":"{")+json+(bArr?"]":"}")};function _fnBrowserDetect(oSettings){var n=$('<div style="position:absolute; top:0; left:0; height:1px; width:1px; overflow:hidden"><div style="position:absolute; top:1px; left:1px; width:100px; overflow:scroll;"><div id="DT_BrowserTest" style="width:100%; height:10px;"></div></div></div>')[0];document.body.appendChild(n);oSettings.oBrowser.bScrollOversize=$("#DT_BrowserTest",n)[0].offsetWidth===100?true:false;document.body.removeChild(n)}this.$=function(sSelector,oOpts){var i,iLen,a=[],tr;var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);var aoData=oSettings.aoData;var aiDisplay=oSettings.aiDisplay;var aiDisplayMaster=oSettings.aiDisplayMaster;if(!oOpts){oOpts={}}oOpts=$.extend({},{filter:"none",order:"current",page:"all"},oOpts);if(oOpts.page=="current"){for(i=oSettings._iDisplayStart,iLen=oSettings.fnDisplayEnd();i<iLen;i++){tr=aoData[aiDisplay[i]].nTr;if(tr){a.push(tr)}}}else{if(oOpts.order=="current"&&oOpts.filter=="none"){for(i=0,iLen=aiDisplayMaster.length;i<iLen;i++){tr=aoData[aiDisplayMaster[i]].nTr;if(tr){a.push(tr)}}}else{if(oOpts.order=="current"&&oOpts.filter=="applied"){for(i=0,iLen=aiDisplay.length;i<iLen;i++){tr=aoData[aiDisplay[i]].nTr;if(tr){a.push(tr)}}}else{if(oOpts.order=="original"&&oOpts.filter=="none"){for(i=0,iLen=aoData.length;i<iLen;i++){tr=aoData[i].nTr;if(tr){a.push(tr)}}}else{if(oOpts.order=="original"&&oOpts.filter=="applied"){for(i=0,iLen=aoData.length;i<iLen;i++){tr=aoData[i].nTr;if($.inArray(i,aiDisplay)!==-1&&tr){a.push(tr)}}}else{_fnLog(oSettings,1,"Unknown selection options")}}}}}var jqA=$(a);var jqTRs=jqA.filter(sSelector);var jqDescendants=jqA.find(sSelector);return $([].concat($.makeArray(jqTRs),$.makeArray(jqDescendants)))};this._=function(sSelector,oOpts){var aOut=[];var i,iLen,iIndex;var aTrs=this.$(sSelector,oOpts);for(i=0,iLen=aTrs.length;i<iLen;i++){aOut.push(this.fnGetData(aTrs[i]))}return aOut};this.fnAddData=function(mData,bRedraw){if(mData.length===0){return[]}var aiReturn=[];var iTest;var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if(typeof mData[0]==="object"&&mData[0]!==null){for(var i=0;i<mData.length;i++){iTest=_fnAddData(oSettings,mData[i]);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}}else{iTest=_fnAddData(oSettings,mData);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();if(bRedraw===undefined||bRedraw){_fnReDraw(oSettings)}return aiReturn};this.fnAdjustColumnSizing=function(bRedraw){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);_fnAdjustColumnSizing(oSettings);if(bRedraw===undefined||bRedraw){this.fnDraw(false)}else{if(oSettings.oScroll.sX!==""||oSettings.oScroll.sY!==""){this.oApi._fnScrollDraw(oSettings)}}};this.fnClearTable=function(bRedraw){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);_fnClearTable(oSettings);if(bRedraw===undefined||bRedraw){_fnDraw(oSettings)}};this.fnClose=function(nTr){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);for(var i=0;i<oSettings.aoOpenRows.length;i++){if(oSettings.aoOpenRows[i].nParent==nTr){var nTrParent=oSettings.aoOpenRows[i].nTr.parentNode;if(nTrParent){nTrParent.removeChild(oSettings.aoOpenRows[i].nTr)}oSettings.aoOpenRows.splice(i,1);return 0}}return 1};this.fnDeleteRow=function(mTarget,fnCallBack,bRedraw){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);var i,iLen,iAODataIndex;iAODataIndex=(typeof mTarget==="object")?_fnNodeToDataIndex(oSettings,mTarget):mTarget;var oData=oSettings.aoData.splice(iAODataIndex,1);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){if(oSettings.aoData[i].nTr!==null){oSettings.aoData[i].nTr._DT_RowIndex=i}}var iDisplayIndex=$.inArray(iAODataIndex,oSettings.aiDisplay);oSettings.asDataSearch.splice(iDisplayIndex,1);_fnDeleteIndex(oSettings.aiDisplayMaster,iAODataIndex);_fnDeleteIndex(oSettings.aiDisplay,iAODataIndex);if(typeof fnCallBack==="function"){fnCallBack.call(this,oSettings,oData)}if(oSettings._iDisplayStart>=oSettings.fnRecordsDisplay()){oSettings._iDisplayStart-=oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(bRedraw===undefined||bRedraw){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}return oData};this.fnDestroy=function(bRemove){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);var nOrig=oSettings.nTableWrapper.parentNode;var nBody=oSettings.nTBody;var i,iLen;bRemove=(bRemove===undefined)?false:bRemove;oSettings.bDestroying=true;_fnCallbackFire(oSettings,"aoDestroyCallback","destroy",[oSettings]);if(!bRemove){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].bVisible===false){this.fnSetColumnVis(i,true)}}}$(oSettings.nTableWrapper).find("*").andSelf().unbind(".DT");$("tbody>tr>td."+oSettings.oClasses.sRowEmpty,oSettings.nTable).parent().remove();if(oSettings.nTable!=oSettings.nTHead.parentNode){$(oSettings.nTable).children("thead").remove();oSettings.nTable.appendChild(oSettings.nTHead)}if(oSettings.nTFoot&&oSettings.nTable!=oSettings.nTFoot.parentNode){$(oSettings.nTable).children("tfoot").remove();oSettings.nTable.appendChild(oSettings.nTFoot)}if(oSettings.nTable.parentNode!=null){oSettings.nTable.parentNode.removeChild(oSettings.nTable)}$(oSettings.nTableWrapper).remove();oSettings.aaSorting=[];oSettings.aaSortingFixed=[];_fnSortingClasses(oSettings);$(_fnGetTrNodes(oSettings)).removeClass(oSettings.asStripeClasses.join(" "));$("th, td",oSettings.nTHead).removeClass([oSettings.oClasses.sSortable,oSettings.oClasses.sSortableAsc,oSettings.oClasses.sSortableDesc,oSettings.oClasses.sSortableNone].join(" "));if(oSettings.bJUI){$("th span."+oSettings.oClasses.sSortIcon+", td span."+oSettings.oClasses.sSortIcon,oSettings.nTHead).remove();$("th, td",oSettings.nTHead).each(function(){var jqWrapper=$("div."+oSettings.oClasses.sSortJUIWrapper,this);var kids=jqWrapper.contents();$(this).append(kids);jqWrapper.remove()})}if(!bRemove&&oSettings.nTableReinsertBefore){nOrig.insertBefore(oSettings.nTable,oSettings.nTableReinsertBefore)}else{if(!bRemove){nOrig.appendChild(oSettings.nTable)}}for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){if(oSettings.aoData[i].nTr!==null){nBody.appendChild(oSettings.aoData[i].nTr)}}if(oSettings.oFeatures.bAutoWidth===true){oSettings.nTable.style.width=_fnStringToCss(oSettings.sDestroyWidth)}iLen=oSettings.asDestroyStripes.length;if(iLen){var anRows=$(nBody).children("tr");for(i=0;i<iLen;i++){anRows.filter(":nth-child("+iLen+"n + "+i+")").addClass(oSettings.asDestroyStripes[i])}}for(i=0,iLen=DataTable.settings.length;i<iLen;i++){if(DataTable.settings[i]==oSettings){DataTable.settings.splice(i,1)}}oSettings=null;oInit=null};this.fnDraw=function(bComplete){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if(bComplete===false){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}else{_fnReDraw(oSettings)}};this.fnFilter=function(sInput,iColumn,bRegex,bSmart,bShowGlobal,bCaseInsensitive){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if(!oSettings.oFeatures.bFilter){return}if(bRegex===undefined||bRegex===null){bRegex=false}if(bSmart===undefined||bSmart===null){bSmart=true}if(bShowGlobal===undefined||bShowGlobal===null){bShowGlobal=true}if(bCaseInsensitive===undefined||bCaseInsensitive===null){bCaseInsensitive=true}if(iColumn===undefined||iColumn===null){_fnFilterComplete(oSettings,{sSearch:sInput+"",bRegex:bRegex,bSmart:bSmart,bCaseInsensitive:bCaseInsensitive},1);if(bShowGlobal&&oSettings.aanFeatures.f){var n=oSettings.aanFeatures.f;for(var i=0,iLen=n.length;i<iLen;i++){try{if(n[i]._DT_Input!=document.activeElement){$(n[i]._DT_Input).val(sInput)}}catch(e){$(n[i]._DT_Input).val(sInput)}}}}else{$.extend(oSettings.aoPreSearchCols[iColumn],{sSearch:sInput+"",bRegex:bRegex,bSmart:bSmart,bCaseInsensitive:bCaseInsensitive});_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}};this.fnGetData=function(mRow,iCol){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if(mRow!==undefined){var iRow=mRow;if(typeof mRow==="object"){var sNode=mRow.nodeName.toLowerCase();if(sNode==="tr"){iRow=_fnNodeToDataIndex(oSettings,mRow)}else{if(sNode==="td"){iRow=_fnNodeToDataIndex(oSettings,mRow.parentNode);iCol=_fnNodeToColumnIndex(oSettings,iRow,mRow)}}}if(iCol!==undefined){return _fnGetCellData(oSettings,iRow,iCol,"")}return(oSettings.aoData[iRow]!==undefined)?oSettings.aoData[iRow]._aData:null}return _fnGetDataMaster(oSettings)};this.fnGetNodes=function(iRow){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if(iRow!==undefined){return(oSettings.aoData[iRow]!==undefined)?oSettings.aoData[iRow].nTr:null}return _fnGetTrNodes(oSettings)};this.fnRecordsTotal=function(){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if(!oSettings){return null}return parseInt(oSettings._iRecordsTotal,10)};this.fnGetPosition=function(nNode){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);var sNodeName=nNode.nodeName.toUpperCase();if(sNodeName=="TR"){return _fnNodeToDataIndex(oSettings,nNode)}else{if(sNodeName=="TD"||sNodeName=="TH"){var iDataIndex=_fnNodeToDataIndex(oSettings,nNode.parentNode);var iColumnIndex=_fnNodeToColumnIndex(oSettings,iDataIndex,nNode);return[iDataIndex,_fnColumnIndexToVisible(oSettings,iColumnIndex),iColumnIndex]}}return null};this.fnIsOpen=function(nTr){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);var aoOpenRows=oSettings.aoOpenRows;for(var i=0;i<oSettings.aoOpenRows.length;i++){if(oSettings.aoOpenRows[i].nParent==nTr){return true}}return false};this.fnOpen=function(nTr,mHtml,sClass){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);var nTableRows=_fnGetTrNodes(oSettings);if($.inArray(nTr,nTableRows)===-1){return}this.fnClose(nTr);var nNewRow=document.createElement("tr");var nNewCell=document.createElement("td");nNewRow.appendChild(nNewCell);nNewCell.className=sClass;nNewCell.colSpan=_fnVisbleColumns(oSettings);if(typeof mHtml==="string"){nNewCell.innerHTML=mHtml}else{$(nNewCell).html(mHtml)}var nTrs=$("tr",oSettings.nTBody);if($.inArray(nTr,nTrs)!=-1){$(nNewRow).insertAfter(nTr)}oSettings.aoOpenRows.push({nTr:nNewRow,nParent:nTr});return nNewRow};this.fnPageChange=function(mAction,bRedraw){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);_fnPageChange(oSettings,mAction);_fnCalculateEnd(oSettings);if(bRedraw===undefined||bRedraw){_fnDraw(oSettings)}};this.fnSetColumnVis=function(iCol,bShow,bRedraw){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);var i,iLen;var aoColumns=oSettings.aoColumns;var aoData=oSettings.aoData;var nTd,bAppend,iBefore;if(aoColumns[iCol].bVisible==bShow){return}if(bShow){var iInsert=0;for(i=0;i<iCol;i++){if(aoColumns[i].bVisible){iInsert++}}bAppend=(iInsert>=_fnVisbleColumns(oSettings));if(!bAppend){for(i=iCol;i<aoColumns.length;i++){if(aoColumns[i].bVisible){iBefore=i;break}}}for(i=0,iLen=aoData.length;i<iLen;i++){if(aoData[i].nTr!==null){if(bAppend){aoData[i].nTr.appendChild(aoData[i]._anHidden[iCol])}else{aoData[i].nTr.insertBefore(aoData[i]._anHidden[iCol],_fnGetTdNodes(oSettings,i)[iBefore])}}}}else{for(i=0,iLen=aoData.length;i<iLen;i++){if(aoData[i].nTr!==null){nTd=_fnGetTdNodes(oSettings,i)[iCol];aoData[i]._anHidden[iCol]=nTd;nTd.parentNode.removeChild(nTd)}}}aoColumns[iCol].bVisible=bShow;_fnDrawHead(oSettings,oSettings.aoHeader);if(oSettings.nTFoot){_fnDrawHead(oSettings,oSettings.aoFooter)}for(i=0,iLen=oSettings.aoOpenRows.length;i<iLen;i++){oSettings.aoOpenRows[i].nTr.colSpan=_fnVisbleColumns(oSettings)}if(bRedraw===undefined||bRedraw){_fnAdjustColumnSizing(oSettings);_fnDraw(oSettings)}_fnSaveState(oSettings)};this.fnSettings=function(){return _fnSettingsFromNode(this[DataTable.ext.iApiIndex])};this.fnSort=function(aaSort){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);oSettings.aaSorting=aaSort;_fnSort(oSettings)};this.fnSortListener=function(nNode,iColumn,fnCallback){_fnSortAttachListener(_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),nNode,iColumn,fnCallback)};this.fnUpdate=function(mData,mRow,iColumn,bRedraw,bAction){var oSettings=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);var i,iLen,sDisplay;var iRow=(typeof mRow==="object")?_fnNodeToDataIndex(oSettings,mRow):mRow;if($.isArray(mData)&&iColumn===undefined){oSettings.aoData[iRow]._aData=mData.slice();for(i=0;i<oSettings.aoColumns.length;i++){this.fnUpdate(_fnGetCellData(oSettings,iRow,i),iRow,i,false,false)}}else{if($.isPlainObject(mData)&&iColumn===undefined){oSettings.aoData[iRow]._aData=$.extend(true,{},mData);for(i=0;i<oSettings.aoColumns.length;i++){this.fnUpdate(_fnGetCellData(oSettings,iRow,i),iRow,i,false,false)}}else{_fnSetCellData(oSettings,iRow,iColumn,mData);sDisplay=_fnGetCellData(oSettings,iRow,iColumn,"display");var oCol=oSettings.aoColumns[iColumn];if(oCol.fnRender!==null){sDisplay=_fnRender(oSettings,iRow,iColumn);if(oCol.bUseRendered){_fnSetCellData(oSettings,iRow,iColumn,sDisplay)}}if(oSettings.aoData[iRow].nTr!==null){_fnGetTdNodes(oSettings,iRow)[iColumn].innerHTML=sDisplay}}}var iDisplayIndex=$.inArray(iRow,oSettings.aiDisplay);oSettings.asDataSearch[iDisplayIndex]=_fnBuildSearchRow(oSettings,_fnGetRowData(oSettings,iRow,"filter",_fnGetColumns(oSettings,"bSearchable")));if(bAction===undefined||bAction){_fnAdjustColumnSizing(oSettings)}if(bRedraw===undefined||bRedraw){_fnReDraw(oSettings)}return 0};this.fnVersionCheck=DataTable.ext.fnVersionCheck;function _fnExternApiFunc(sFunc){return function(){var aArgs=[_fnSettingsFromNode(this[DataTable.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return DataTable.ext.oApi[sFunc].apply(this,aArgs)}}this.oApi={_fnExternApiFunc:_fnExternApiFunc,_fnInitialise:_fnInitialise,_fnInitComplete:_fnInitComplete,_fnLanguageCompat:_fnLanguageCompat,_fnAddColumn:_fnAddColumn,_fnColumnOptions:_fnColumnOptions,_fnAddData:_fnAddData,_fnCreateTr:_fnCreateTr,_fnGatherData:_fnGatherData,_fnBuildHead:_fnBuildHead,_fnDrawHead:_fnDrawHead,_fnDraw:_fnDraw,_fnReDraw:_fnReDraw,_fnAjaxUpdate:_fnAjaxUpdate,_fnAjaxParameters:_fnAjaxParameters,_fnAjaxUpdateDraw:_fnAjaxUpdateDraw,_fnServerParams:_fnServerParams,_fnAddOptionsHtml:_fnAddOptionsHtml,_fnFeatureHtmlTable:_fnFeatureHtmlTable,_fnScrollDraw:_fnScrollDraw,_fnAdjustColumnSizing:_fnAdjustColumnSizing,_fnFeatureHtmlFilter:_fnFeatureHtmlFilter,_fnFilterComplete:_fnFilterComplete,_fnFilterCustom:_fnFilterCustom,_fnFilterColumn:_fnFilterColumn,_fnFilter:_fnFilter,_fnBuildSearchArray:_fnBuildSearchArray,_fnBuildSearchRow:_fnBuildSearchRow,_fnFilterCreateSearch:_fnFilterCreateSearch,_fnDataToSearch:_fnDataToSearch,_fnSort:_fnSort,_fnSortAttachListener:_fnSortAttachListener,_fnSortingClasses:_fnSortingClasses,_fnFeatureHtmlPaginate:_fnFeatureHtmlPaginate,_fnPageChange:_fnPageChange,_fnFeatureHtmlInfo:_fnFeatureHtmlInfo,_fnUpdateInfo:_fnUpdateInfo,_fnFeatureHtmlLength:_fnFeatureHtmlLength,_fnFeatureHtmlProcessing:_fnFeatureHtmlProcessing,_fnProcessingDisplay:_fnProcessingDisplay,_fnVisibleToColumnIndex:_fnVisibleToColumnIndex,_fnColumnIndexToVisible:_fnColumnIndexToVisible,_fnNodeToDataIndex:_fnNodeToDataIndex,_fnVisbleColumns:_fnVisbleColumns,_fnCalculateEnd:_fnCalculateEnd,_fnConvertToWidth:_fnConvertToWidth,_fnCalculateColumnWidths:_fnCalculateColumnWidths,_fnScrollingWidthAdjust:_fnScrollingWidthAdjust,_fnGetWidestNode:_fnGetWidestNode,_fnGetMaxLenString:_fnGetMaxLenString,_fnStringToCss:_fnStringToCss,_fnDetectType:_fnDetectType,_fnSettingsFromNode:_fnSettingsFromNode,_fnGetDataMaster:_fnGetDataMaster,_fnGetTrNodes:_fnGetTrNodes,_fnGetTdNodes:_fnGetTdNodes,_fnEscapeRegex:_fnEscapeRegex,_fnDeleteIndex:_fnDeleteIndex,_fnReOrderIndex:_fnReOrderIndex,_fnColumnOrdering:_fnColumnOrdering,_fnLog:_fnLog,_fnClearTable:_fnClearTable,_fnSaveState:_fnSaveState,_fnLoadState:_fnLoadState,_fnCreateCookie:_fnCreateCookie,_fnReadCookie:_fnReadCookie,_fnDetectHeader:_fnDetectHeader,_fnGetUniqueThs:_fnGetUniqueThs,_fnScrollBarWidth:_fnScrollBarWidth,_fnApplyToChildren:_fnApplyToChildren,_fnMap:_fnMap,_fnGetRowData:_fnGetRowData,_fnGetCellData:_fnGetCellData,_fnSetCellData:_fnSetCellData,_fnGetObjectDataFn:_fnGetObjectDataFn,_fnSetObjectDataFn:_fnSetObjectDataFn,_fnApplyColumnDefs:_fnApplyColumnDefs,_fnBindAction:_fnBindAction,_fnExtend:_fnExtend,_fnCallbackReg:_fnCallbackReg,_fnCallbackFire:_fnCallbackFire,_fnJsonString:_fnJsonString,_fnRender:_fnRender,_fnNodeToColumnIndex:_fnNodeToColumnIndex,_fnInfoMacros:_fnInfoMacros,_fnBrowserDetect:_fnBrowserDetect,_fnGetColumns:_fnGetColumns};$.extend(DataTable.ext.oApi,this.oApi);for(var sFunc in DataTable.ext.oApi){if(sFunc){this[sFunc]=_fnExternApiFunc(sFunc)}}var _that=this;this.each(function(){var i=0,iLen,j,jLen,k,kLen;var sId=this.getAttribute("id");var bInitHandedOff=false;var bUsePassedData=false;if(this.nodeName.toLowerCase()!="table"){_fnLog(null,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);return}for(i=0,iLen=DataTable.settings.length;i<iLen;i++){if(DataTable.settings[i].nTable==this){if(oInit===undefined||oInit.bRetrieve){return DataTable.settings[i].oInstance}else{if(oInit.bDestroy){DataTable.settings[i].oInstance.fnDestroy();break}else{_fnLog(DataTable.settings[i],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, pass no arguments or see the docs for bRetrieve and bDestroy");return}}}if(DataTable.settings[i].sTableId==this.id){DataTable.settings.splice(i,1);break}}if(sId===null||sId===""){sId="DataTables_Table_"+(DataTable.ext._oExternConfig.iNextUnique++);this.id=sId}var oSettings=$.extend(true,{},DataTable.models.oSettings,{nTable:this,oApi:_that.oApi,oInit:oInit,sDestroyWidth:$(this).width(),sInstance:sId,sTableId:sId});DataTable.settings.push(oSettings);oSettings.oInstance=(_that.length===1)?_that:$(this).xrayDataTable();if(!oInit){oInit={}}if(oInit.oLanguage){_fnLanguageCompat(oInit.oLanguage)}oInit=_fnExtend($.extend(true,{},DataTable.defaults),oInit);_fnMap(oSettings.oFeatures,oInit,"bPaginate");_fnMap(oSettings.oFeatures,oInit,"bLengthChange");_fnMap(oSettings.oFeatures,oInit,"bFilter");_fnMap(oSettings.oFeatures,oInit,"bSort");_fnMap(oSettings.oFeatures,oInit,"bInfo");_fnMap(oSettings.oFeatures,oInit,"bProcessing");_fnMap(oSettings.oFeatures,oInit,"bAutoWidth");_fnMap(oSettings.oFeatures,oInit,"bSortClasses");_fnMap(oSettings.oFeatures,oInit,"bServerSide");_fnMap(oSettings.oFeatures,oInit,"bDeferRender");_fnMap(oSettings.oScroll,oInit,"sScrollX","sX");_fnMap(oSettings.oScroll,oInit,"sScrollXInner","sXInner");_fnMap(oSettings.oScroll,oInit,"sScrollY","sY");_fnMap(oSettings.oScroll,oInit,"bScrollCollapse","bCollapse");_fnMap(oSettings.oScroll,oInit,"bScrollInfinite","bInfinite");_fnMap(oSettings.oScroll,oInit,"iScrollLoadGap","iLoadGap");_fnMap(oSettings.oScroll,oInit,"bScrollAutoCss","bAutoCss");_fnMap(oSettings,oInit,"asStripeClasses");_fnMap(oSettings,oInit,"asStripClasses","asStripeClasses");_fnMap(oSettings,oInit,"fnServerData");_fnMap(oSettings,oInit,"fnFormatNumber");_fnMap(oSettings,oInit,"sServerMethod");_fnMap(oSettings,oInit,"aaSorting");_fnMap(oSettings,oInit,"aaSortingFixed");_fnMap(oSettings,oInit,"aLengthMenu");_fnMap(oSettings,oInit,"sPaginationType");_fnMap(oSettings,oInit,"sAjaxSource");_fnMap(oSettings,oInit,"sAjaxDataProp");_fnMap(oSettings,oInit,"iCookieDuration");_fnMap(oSettings,oInit,"sCookiePrefix");_fnMap(oSettings,oInit,"sDom");_fnMap(oSettings,oInit,"bSortCellsTop");_fnMap(oSettings,oInit,"iTabIndex");_fnMap(oSettings,oInit,"oSearch","oPreviousSearch");_fnMap(oSettings,oInit,"aoSearchCols","aoPreSearchCols");_fnMap(oSettings,oInit,"iDisplayLength","_iDisplayLength");_fnMap(oSettings,oInit,"bJQueryUI","bJUI");_fnMap(oSettings,oInit,"fnCookieCallback");_fnMap(oSettings,oInit,"fnStateLoad");_fnMap(oSettings,oInit,"fnStateSave");_fnMap(oSettings.oLanguage,oInit,"fnInfoCallback");_fnCallbackReg(oSettings,"aoDrawCallback",oInit.fnDrawCallback,"user");_fnCallbackReg(oSettings,"aoServerParams",oInit.fnServerParams,"user");_fnCallbackReg(oSettings,"aoStateSaveParams",oInit.fnStateSaveParams,"user");_fnCallbackReg(oSettings,"aoStateLoadParams",oInit.fnStateLoadParams,"user");_fnCallbackReg(oSettings,"aoStateLoaded",oInit.fnStateLoaded,"user");_fnCallbackReg(oSettings,"aoRowCallback",oInit.fnRowCallback,"user");_fnCallbackReg(oSettings,"aoRowCreatedCallback",oInit.fnCreatedRow,"user");_fnCallbackReg(oSettings,"aoHeaderCallback",oInit.fnHeaderCallback,"user");_fnCallbackReg(oSettings,"aoFooterCallback",oInit.fnFooterCallback,"user");_fnCallbackReg(oSettings,"aoInitComplete",oInit.fnInitComplete,"user");_fnCallbackReg(oSettings,"aoPreDrawCallback",oInit.fnPreDrawCallback,"user");_fnCallbackReg(oSettings,"pageChangeCallback",oInit.fnPageChangeCallback,"user");if(oSettings.oFeatures.bServerSide&&oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){_fnCallbackReg(oSettings,"aoDrawCallback",_fnSortingClasses,"server_side_sort_classes")}else{if(oSettings.oFeatures.bDeferRender){_fnCallbackReg(oSettings,"aoDrawCallback",_fnSortingClasses,"defer_sort_classes")}}if(oInit.bJQueryUI){$.extend(oSettings.oClasses,DataTable.ext.oJUIClasses);if(oInit.sDom===DataTable.defaults.sDom&&DataTable.defaults.sDom==="lfrtip"){oSettings.sDom='<"H"lfr>t<"F"ip>'}}else{$.extend(oSettings.oClasses,DataTable.ext.oStdClasses)}$(this).addClass(oSettings.oClasses.sTable);if(oSettings.oScroll.sX!==""||oSettings.oScroll.sY!==""){oSettings.oScroll.iBarWidth=_fnScrollBarWidth()}if(oSettings.iInitDisplayStart===undefined){oSettings.iInitDisplayStart=oInit.iDisplayStart;oSettings._iDisplayStart=oInit.iDisplayStart}if(oInit.bStateSave){oSettings.oFeatures.bStateSave=true;_fnLoadState(oSettings,oInit);_fnCallbackReg(oSettings,"aoDrawCallback",_fnSaveState,"state_save")}if(oInit.iDeferLoading!==null){oSettings.bDeferLoading=true;var tmp=$.isArray(oInit.iDeferLoading);oSettings._iRecordsDisplay=tmp?oInit.iDeferLoading[0]:oInit.iDeferLoading;oSettings._iRecordsTotal=tmp?oInit.iDeferLoading[1]:oInit.iDeferLoading}if(oInit.aaData!==null){bUsePassedData=true}if(oInit.oLanguage.sUrl!==""){oSettings.oLanguage.sUrl=oInit.oLanguage.sUrl;$.getJSON(oSettings.oLanguage.sUrl,null,function(json){_fnLanguageCompat(json);$.extend(true,oSettings.oLanguage,oInit.oLanguage,json);_fnInitialise(oSettings)});bInitHandedOff=true}else{$.extend(true,oSettings.oLanguage,oInit.oLanguage)}if(oInit.asStripeClasses===null){oSettings.asStripeClasses=[oSettings.oClasses.sStripeOdd,oSettings.oClasses.sStripeEven]}iLen=oSettings.asStripeClasses.length;oSettings.asDestroyStripes=[];if(iLen){var bStripeRemove=false;var anRows=$(this).children("tbody").children("tr:lt("+iLen+")");for(i=0;i<iLen;i++){if(anRows.hasClass(oSettings.asStripeClasses[i])){bStripeRemove=true;oSettings.asDestroyStripes.push(oSettings.asStripeClasses[i])}}if(bStripeRemove){anRows.removeClass(oSettings.asStripeClasses.join(" "))}}var anThs=[];var aoColumnsInit;var nThead=this.getElementsByTagName("thead");if(nThead.length!==0){_fnDetectHeader(oSettings.aoHeader,nThead[0]);anThs=_fnGetUniqueThs(oSettings)}if(oInit.aoColumns===null){aoColumnsInit=[];for(i=0,iLen=anThs.length;i<iLen;i++){aoColumnsInit.push(null)}}else{aoColumnsInit=oInit.aoColumns}for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){if(oInit.saved_aoColumns!==undefined&&oInit.saved_aoColumns.length==iLen){if(aoColumnsInit[i]===null){aoColumnsInit[i]={}}aoColumnsInit[i].bVisible=oInit.saved_aoColumns[i].bVisible}_fnAddColumn(oSettings,anThs?anThs[i]:null)}_fnApplyColumnDefs(oSettings,oInit.aoColumnDefs,aoColumnsInit,function(iCol,oDef){_fnColumnOptions(oSettings,iCol,oDef)});for(i=0,iLen=oSettings.aaSorting.length;i<iLen;i++){if(oSettings.aaSorting[i][0]>=oSettings.aoColumns.length){oSettings.aaSorting[i][0]=0}var oColumn=oSettings.aoColumns[oSettings.aaSorting[i][0]];if(oSettings.aaSorting[i][2]===undefined){oSettings.aaSorting[i][2]=0}if(oInit.aaSorting===undefined&&oSettings.saved_aaSorting===undefined){oSettings.aaSorting[i][1]=oColumn.asSorting[0]}for(j=0,jLen=oColumn.asSorting.length;j<jLen;j++){if(oSettings.aaSorting[i][1]==oColumn.asSorting[j]){oSettings.aaSorting[i][2]=j;break}}}_fnSortingClasses(oSettings);_fnBrowserDetect(oSettings);var captions=$(this).children("caption").each(function(){this._captionSide=$(this).css("caption-side")});var thead=$(this).children("thead");if(thead.length===0){thead=[document.createElement("thead")];this.appendChild(thead[0])}oSettings.nTHead=thead[0];var tbody=$(this).children("tbody");if(tbody.length===0){tbody=[document.createElement("tbody")];this.appendChild(tbody[0])}oSettings.nTBody=tbody[0];oSettings.nTBody.setAttribute("role","alert");oSettings.nTBody.setAttribute("aria-live","polite");oSettings.nTBody.setAttribute("aria-relevant","all");var tfoot=$(this).children("tfoot");if(tfoot.length===0&&captions.length>0&&(oSettings.oScroll.sX!==""||oSettings.oScroll.sY!=="")){tfoot=[document.createElement("tfoot")];this.appendChild(tfoot[0])}if(tfoot.length>0){oSettings.nTFoot=tfoot[0];_fnDetectHeader(oSettings.aoFooter,oSettings.nTFoot)}if(bUsePassedData){for(i=0;i<oInit.aaData.length;i++){_fnAddData(oSettings,oInit.aaData[i])}}else{_fnGatherData(oSettings)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bInitialised=true;if(bInitHandedOff===false){_fnInitialise(oSettings)}});_that=null;return this};DataTable.fnVersionCheck=function(sVersion){var fnZPad=function(Zpad,count){while(Zpad.length<count){Zpad+="0"}return Zpad};var aThis=DataTable.ext.sVersion.split(".");var aThat=sVersion.split(".");var sThis="",sThat="";for(var i=0,iLen=aThat.length;i<iLen;i++){sThis+=fnZPad(aThis[i],3);sThat+=fnZPad(aThat[i],3)}return parseInt(sThis,10)>=parseInt(sThat,10)};DataTable.fnIsDataTable=function(nTable){var o=DataTable.settings;for(var i=0;i<o.length;i++){if(o[i].nTable===nTable||o[i].nScrollHead===nTable||o[i].nScrollFoot===nTable){return true}}return false};DataTable.fnTables=function(bVisible){var out=[];jQuery.each(DataTable.settings,function(i,o){if(!bVisible||(bVisible===true&&$(o.nTable).is(":visible"))){out.push(o.nTable)}});return out};DataTable.version="1.9.4";DataTable.settings=[];DataTable.models={};DataTable.models.ext={afnFiltering:[],afnSortData:[],aoFeatures:[],aTypes:[],fnVersionCheck:DataTable.fnVersionCheck,iApiIndex:0,ofnSearch:{},oApi:{},oStdClasses:{},oJUIClasses:{},oPagination:{},oSort:{},sVersion:DataTable.version,sErrMode:"alert",_oExternConfig:{iNextUnique:0}};DataTable.models.oSearch={bCaseInsensitive:true,sSearch:"",bRegex:false,bSmart:true};DataTable.models.oRow={nTr:null,_aData:[],_aSortData:[],_anHidden:[],_sRowStripe:""};DataTable.models.oColumn={aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bUseRendered:null,bVisible:null,_bAutoType:true,fnCreatedCell:null,fnGetData:null,fnRender:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};DataTable.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:true,bDeferRender:false,bDestroy:false,bFilter:true,bInfo:true,bJQueryUI:false,bLengthChange:true,bPaginate:true,bProcessing:false,bRetrieve:false,bScrollAutoCss:true,bScrollCollapse:false,bScrollInfinite:false,bServerSide:false,bSort:true,bSortCellsTop:false,bSortClasses:true,bStateSave:false,fnCookieCallback:null,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(iIn){if(iIn<1000){return iIn}var s=(iIn+""),a=s.split(""),out="",iLen=s.length;for(var i=0;i<iLen;i++){if(i%3===0&&i!==0){out=this.oLanguage.sInfoThousands+out}out=a[iLen-i-1]+out}return out},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnPageChangeCallback:null,fnServerData:function(sUrl,aoData,fnCallback,oSettings){function compatibleQueryParams(data){var query={};if(Array.isArray(data)){data.forEach(function(pair){query[pair.name]=pair.value})}else{if(data&&typeof data==="object"){query=data}}return query}oSettings.jqXHR=$.ajax({url:sUrl,data:compatibleQueryParams(aoData),success:function(json){if(json.sError){oSettings.oApi._fnLog(oSettings,0,json.sError)}$(oSettings.oInstance).trigger("xhr",[oSettings,json]);fnCallback(json)},dataType:"json",cache:false,type:oSettings.sServerMethod,error:function(xhr,error,thrown){if(error=="parsererror"){oSettings.oApi._fnLog(oSettings,0,"DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}}})},fnServerParams:null,fnStateLoad:function(oSettings){var sData=this.oApi._fnReadCookie(oSettings.sCookiePrefix+oSettings.sInstance);var oData;try{oData=(typeof $.parseJSON==="function")?$.parseJSON(sData):eval("("+sData+")")}catch(e){oData=null}return oData},fnStateLoadParams:null,fnStateLoaded:null,fnStateSave:function(oSettings,oData){this.oApi._fnCreateCookie(oSettings.sCookiePrefix+oSettings.sInstance,this.oApi._fnJsonString(oData),oSettings.iCookieDuration,oSettings.sCookiePrefix,oSettings.fnCookieCallback)},fnStateSaveParams:null,iCookieDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iScrollLoadGap:100,iTabIndex:0,oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sUrl:"",sZeroRecords:"No matching records found"},oSearch:$.extend({},DataTable.models.oSearch),sAjaxDataProp:"aaData",sAjaxSource:null,sCookiePrefix:"SpryMedia_DataTables_",sDom:"lfrtip",sPaginationType:"two_button",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET"};DataTable.defaults.columns={aDataSort:null,asSorting:["asc","desc"],bSearchable:true,bSortable:true,bUseRendered:true,bVisible:true,fnCreatedCell:null,fnRender:null,iDataSort:-1,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};DataTable.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortClasses:null,bStateSave:null},oScroll:{bAutoCss:null,bCollapse:null,bInfinite:null,iBarWidth:0,iLoadGap:null,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:false},aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],asDataSearch:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:null,asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:false,bInitialised:false,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iCookieDuration:0,sCookiePrefix:"",fnCookieCallback:null,aoStateSave:[],aoStateLoad:[],oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:true,jqXHR:null,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:false,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iDisplayEnd:10,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:false,bSorted:false,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsTotal,10)}else{return this.aiDisplayMaster.length}},fnRecordsDisplay:function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsDisplay,10)}else{return this.aiDisplay.length}},fnDisplayEnd:function(){if(this.oFeatures.bServerSide){if(this.oFeatures.bPaginate===false||this._iDisplayLength==-1){return this._iDisplayStart+this.aiDisplay.length}else{return Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay)}}else{return this._iDisplayEnd}},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,pageChangeCallback:[],};DataTable.ext=$.extend(true,{},DataTable.models.ext);$.extend(DataTable.ext.oStdClasses,{sTable:"xrayDataTable",sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button paginate_button_disabled",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"xrayDataTables_empty",sWrapper:"xrayDataTables_wrapper",sFilter:"xrayDataTables_filter",sInfo:"xrayDataTables_info",sPaging:"xrayDataTables_paginate paging_",sLength:"xrayDataTables_length",sProcessing:"xrayDataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sScrollWrapper:"xrayDataTables_scroll",sScrollHead:"xrayDataTables_scrollHead",sScrollHeadInner:"xrayDataTables_scrollHeadInner",sScrollBody:"xrayDataTables_scrollBody",sScrollFoot:"xrayDataTables_scrollFoot",sScrollFootInner:"xrayDataTables_scrollFootInner",sFooterTH:"",sJUIHeader:"",sJUIFooter:""});$.extend(DataTable.ext.oJUIClasses,DataTable.ext.oStdClasses,{sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPageLast:"last ui-corner-tr ui-corner-br",sPaging:"xrayDataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"xrayDataTables_scrollHead ui-state-default",sScrollFoot:"xrayDataTables_scrollFoot ui-state-default",sFooterTH:"ui-state-default",sJUIHeader:"fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix",sJUIFooter:"fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"});$.extend(DataTable.ext.oPagination,{two_button:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var oLang=oSettings.oLanguage.oPaginate;var oClasses=oSettings.oClasses;var fnClickHandler=function(e){if(oSettings.oApi._fnPageChange(oSettings,e.data.action)){fnCallbackDraw(oSettings)}};var sAppend=(!oSettings.bJUI)?'<a class="'+oSettings.oClasses.sPagePrevDisabled+'" tabindex="'+oSettings.iTabIndex+'" role="button">'+oLang.sPrevious+'</a><a class="'+oSettings.oClasses.sPageNextDisabled+'" tabindex="'+oSettings.iTabIndex+'" role="button">'+oLang.sNext+"</a>":'<a class="'+oSettings.oClasses.sPagePrevDisabled+'" tabindex="'+oSettings.iTabIndex+'" role="button"><span class="'+oSettings.oClasses.sPageJUIPrev+'"></span></a><a class="'+oSettings.oClasses.sPageNextDisabled+'" tabindex="'+oSettings.iTabIndex+'" role="button"><span class="'+oSettings.oClasses.sPageJUINext+'"></span></a>';$(nPaging).append(sAppend);var els=$("a",nPaging);var nPrevious=els[0],nNext=els[1];oSettings.oApi._fnBindAction(nPrevious,{action:"previous"},fnClickHandler);oSettings.oApi._fnBindAction(nNext,{action:"next"},fnClickHandler);if(!oSettings.aanFeatures.p){nPaging.id=oSettings.sTableId+"_paginate";nPrevious.id=oSettings.sTableId+"_previous";nNext.id=oSettings.sTableId+"_next";nPrevious.setAttribute("aria-controls",oSettings.sTableId);nNext.setAttribute("aria-controls",oSettings.sTableId)}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var oClasses=oSettings.oClasses;var an=oSettings.aanFeatures.p;var nNode;for(var i=0,iLen=an.length;i<iLen;i++){nNode=an[i].firstChild;if(nNode){nNode.className=(oSettings._iDisplayStart===0)?oClasses.sPagePrevDisabled:oClasses.sPagePrevEnabled;nNode=nNode.nextSibling;nNode.className=(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay())?oClasses.sPageNextDisabled:oClasses.sPageNextEnabled}}}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var oLang=oSettings.oLanguage.oPaginate;var oClasses=oSettings.oClasses;var fnClickHandler=function(e){if(oSettings.oApi._fnPageChange(oSettings,e.data.action)){fnCallbackDraw(oSettings)}};$(nPaging).append('<a  tabindex="'+oSettings.iTabIndex+'" class="'+oClasses.sPageButton+" "+oClasses.sPageFirst+'">'+oLang.sFirst+'</a><a  tabindex="'+oSettings.iTabIndex+'" class="'+oClasses.sPageButton+" "+oClasses.sPagePrevious+'">'+oLang.sPrevious+'</a><span></span><a tabindex="'+oSettings.iTabIndex+'" class="'+oClasses.sPageButton+" "+oClasses.sPageNext+'">'+oLang.sNext+'</a><a tabindex="'+oSettings.iTabIndex+'" class="'+oClasses.sPageButton+" "+oClasses.sPageLast+'">'+oLang.sLast+"</a>");var els=$("a",nPaging);var nFirst=els[0],nPrev=els[1],nNext=els[2],nLast=els[3];oSettings.oApi._fnBindAction(nFirst,{action:"first"},fnClickHandler);oSettings.oApi._fnBindAction(nPrev,{action:"previous"},fnClickHandler);oSettings.oApi._fnBindAction(nNext,{action:"next"},fnClickHandler);oSettings.oApi._fnBindAction(nLast,{action:"last"},fnClickHandler);if(!oSettings.aanFeatures.p){nPaging.id=oSettings.sTableId+"_paginate";nFirst.id=oSettings.sTableId+"_first";nPrev.id=oSettings.sTableId+"_previous";nNext.id=oSettings.sTableId+"_next";nLast.id=oSettings.sTableId+"_last"}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var iPageCount=DataTable.ext.oPagination.iFullNumbersShowPages;var iPageCountHalf=Math.floor(iPageCount/2);var iPages=Math.ceil((oSettings.fnRecordsDisplay())/oSettings._iDisplayLength);var iCurrentPage=Math.ceil(oSettings._iDisplayStart/oSettings._iDisplayLength)+1;var sList="";var iStartButton,iEndButton,i,iLen;var oClasses=oSettings.oClasses;var anButtons,anStatic,nPaginateList,nNode;var an=oSettings.aanFeatures.p;var fnBind=function(j){oSettings.oApi._fnBindAction(this,{page:j+iStartButton-1},function(e){oSettings.oApi._fnPageChange(oSettings,e.data.page);fnCallbackDraw(oSettings);e.preventDefault()})};if(oSettings._iDisplayLength===-1){iStartButton=1;iEndButton=1;iCurrentPage=1}else{if(iPages<iPageCount){iStartButton=1;iEndButton=iPages}else{if(iCurrentPage<=iPageCountHalf){iStartButton=1;iEndButton=iPageCount}else{if(iCurrentPage>=(iPages-iPageCountHalf)){iStartButton=iPages-iPageCount+1;iEndButton=iPages}else{iStartButton=iCurrentPage-Math.ceil(iPageCount/2)+1;iEndButton=iStartButton+iPageCount-1}}}}for(i=iStartButton;i<=iEndButton;i++){sList+=(iCurrentPage!==i)?'<a tabindex="'+oSettings.iTabIndex+'" class="'+oClasses.sPageButton+'">'+oSettings.fnFormatNumber(i)+"</a>":'<a tabindex="'+oSettings.iTabIndex+'" class="'+oClasses.sPageButtonActive+'">'+oSettings.fnFormatNumber(i)+"</a>"}for(i=0,iLen=an.length;i<iLen;i++){nNode=an[i];if(!nNode.hasChildNodes()){continue}$("span:eq(0)",nNode).html(sList).children("a").each(fnBind);anButtons=nNode.getElementsByTagName("a");anStatic=[anButtons[0],anButtons[1],anButtons[anButtons.length-2],anButtons[anButtons.length-1]];$(anStatic).removeClass(oClasses.sPageButton+" "+oClasses.sPageButtonActive+" "+oClasses.sPageButtonStaticDisabled);$([anStatic[0],anStatic[1]]).addClass((iCurrentPage==1)?oClasses.sPageButtonStaticDisabled:oClasses.sPageButton);$([anStatic[2],anStatic[3]]).addClass((iPages===0||iCurrentPage===iPages||oSettings._iDisplayLength===-1)?oClasses.sPageButtonStaticDisabled:oClasses.sPageButton)}}}});$.extend(DataTable.ext.oSort,{"string-pre":function(a){if(typeof a!="string"){a=(a!==null&&a.toString)?a.toString():""}return a.toLowerCase()},"string-asc":function(x,y){return((x<y)?-1:((x>y)?1:0))},"string-desc":function(x,y){return((x<y)?1:((x>y)?-1:0))},"html-pre":function(a){return a.replace(/<.*?>/g,"").toLowerCase()},"html-asc":function(x,y){return((x<y)?-1:((x>y)?1:0))},"html-desc":function(x,y){return((x<y)?1:((x>y)?-1:0))},"date-pre":function(a){var x=Date.parse(a);if(isNaN(x)||x===""){x=Date.parse("01/01/1970 00:00:00")}return x},"date-asc":function(x,y){return x-y},"date-desc":function(x,y){return y-x},"numeric-pre":function(a){return(a=="-"||a==="")?0:a*1},"numeric-asc":function(x,y){return x-y},"numeric-desc":function(x,y){return y-x}});$.extend(DataTable.ext.aTypes,[function(sData){if(typeof sData==="number"){return"numeric"}else{if(typeof sData!=="string"){return null}}var sValidFirstChars="0123456789-";var sValidChars="0123456789.";var Char;var bDecimal=false;Char=sData.charAt(0);if(sValidFirstChars.indexOf(Char)==-1){return null}for(var i=1;i<sData.length;i++){Char=sData.charAt(i);if(sValidChars.indexOf(Char)==-1){return null}if(Char=="."){if(bDecimal){return null}bDecimal=true}}return"numeric"},function(sData){var iParse=Date.parse(sData);if((iParse!==null&&!isNaN(iParse))||(typeof sData==="string"&&sData.length===0)){return"date"}return null},function(sData){if(typeof sData==="string"&&sData.indexOf("<")!=-1&&sData.indexOf(">")!=-1){return"html"}return null}]);$.fn.XrayDataTable=DataTable;$.fn.xrayDataTable=DataTable;$.fn.xrayDataTableSettings=DataTable.settings;$.fn.xrayDataTableExt=DataTable.ext}))}(window,document));;
;
/* module-key = 'com.xpandit.plugins.xray:ccc-chart-resources', location = 'js/common/jquery.bridge.js' */
window.$=AJS.$;;
;
/* module-key = 'com.xpandit.plugins.xray:ccc-chart-resources', location = 'js/ccc/jquery.tipsy.js' */
(function(c){function a(e){var d=e.attr("title");if(d||typeof(e.attr("original-title"))!=="string"){e.attr("original-title",d||"").removeAttr("title")}}function b(e,d){this.$element=c(e);this.options=d;this.enabled=true;a(this.$element)}b.prototype={enter:function(){var e=this;var d=this.options;if(d.delayIn==0){e.hoverState=null;e.show()}else{e.hoverState="in";setTimeout(function(){if(e.hoverState==="in"){e.hoverState=null;e.show()}},d.delayIn)}},leave:function(){var e=this;var d=this.options;if(d.delayOut==0){e.hide()}else{e.hoverState="out";setTimeout(function(){if(e.hoverState==="out"){e.hide()}},d.delayOut)}},visible:function(){var d;return this.hoverState==="in"||(this.hoverState!=="out"&&!!(this.$tip&&(d=this.$tip[0].parentNode)&&(d.nodeType!==11)))},update:function(){if(this.visible()){this.show(true)}else{this.enter()}},show:function(s){if(this.hoverState==="in"){return}var o=this.getTitle();if(!this.enabled||!o){this.hoverState=null;this.hide();return}var f=this.tip();f.find(".tipsy-rqc-inner")[this.options.html?"html":"text"](o);f[0].className="tipsy";if(!s){f.remove()}var p=f[0].parentNode;if(!p||(p.nodeType===11)){f.css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body)}var k=c.extend({},this.$element.offset());if(this.$element[0].nearestViewportElement){var l=this.$element[0].getBoundingClientRect();k.width=l.width;k.height=l.height}else{k.width=this.$element[0].offsetWidth||0;k.height=this.$element[0].offsetHeight||0}var j=this.options.offset,m=this.options.useCorners,i=this.options.arrowVisible,e=f[0].offsetWidth,h=f[0].offsetHeight;if(!i){j-=4}function g(u){var t;switch(u.charAt(0)){case"n":t={top:k.top+k.height+j,left:k.left+k.width/2-e/2};break;case"s":t={top:k.top-h-j,left:k.left+k.width/2-e/2};break;case"e":t={top:k.top+k.height/2-h/2,left:k.left-e-j};break;case"w":t={top:k.top+k.height/2-h/2,left:k.left+k.width+j};break}if(u.length===2){if(u.charAt(1)=="w"){t.left=m?k.left+k.width+j:k.left+k.width/2-15}else{t.left=m?k.left-e-j:k.left+k.width/2-e+15}}return t}var q=(typeof this.options.gravity=="function")?this.options.gravity.call(this.$element[0],{width:e,height:h},g):this.options.gravity;var n=(typeof this.options.calcPosition=="function")?this.options.calcPosition.call(this.$element[0],{width:e,height:h},g):g(q);f.css(n).addClass("tipsy-rqc-"+q+(m&&q.length>1?q.charAt(1):""));if(i){var r=m&&q.length===2;f.find(".tipsy-rqc-arrow")[r?"hide":"show"]()}var d=this.options.fade&&(!s||!this._prevGravity||(this._prevGravity!==q));if(d){f.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity})}else{f.css({visibility:"visible",opacity:this.options.opacity})}this._prevGravity=q;this.hoverState=null},hide:function(){if(this.options.fade){this.tip().stop().fadeOut(function(){c(this).remove()})}else{if(this.$tip){this.tip().remove()}}this.hoverState=null},setTitle:function(d){d=(d==null)?"":(""+d);this.$element.attr("original-title",d).removeAttr("title")},getTitle:function(){var f,d=this.$element,e=this.options;a(d);if(typeof e.title==="string"){f=d.attr(e.title=="title"?"original-title":e.title)}else{if(typeof e.title==="function"){f=e.title.call(d[0])}}f=(""+f).replace(/(^\s*|\s*$)/,"");return f||e.fallback},tip:function(){if(!this.$tip){this.$tip=c('<div class="tipsy-rqc"></div>');if(this.options.arrowVisible){this.$tip.html('<div class="tipsy-rqc-arrow"></div><div class="tipsy-rqc-inner"/></div>')}else{this.$tip.html('<div class="tipsy-rqc-inner"/></div>')}this.$tip.remove()}return this.$tip},validate:function(){var d=this.$element[0].parentNode;if(!d||(d.nodeType===11)){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled}};c.fn.xrayTipsy=function(i,d){if(i===true){return this.data("xray-tipsy")}else{if(typeof i==="string"){return this.data("xray-tipsy")[i](d)}}i=c.extend({},c.fn.xrayTipsy.defaults,i);if(i.arrowVisible==null){i.arrowVisible=!i.useCorners}function h(l){var m=c.data(l,"xray-tipsy");if(!m){m=new b(l,c.fn.xrayTipsy.elementOptions(l,i));c.data(l,"xray-tipsy",m)}return m}function k(){h(this).enter()}function g(){h(this).leave()}if(!i.live){this.each(function(){h(this)})}if(i.trigger!="manual"){var e=i.live?"live":"bind",j=i.trigger=="hover"?"mouseenter":"focus",f=i.trigger=="hover"?"mouseleave":"blur";this[e](j,k)[e](f,g)}return this};c.fn.xrayTipsy.defaults={delayIn:0,delayOut:0,fade:false,fallback:"",gravity:"n",calcPosition:null,html:false,live:false,offset:0,opacity:0.8,title:"title",trigger:"hover",useCorners:false,arrowVisible:null};c.fn.xrayTipsy.elementOptions=function(e,d){return c.metadata?c.extend({},d,c(e).metadata()):d};c.fn.xrayTipsy.autoNS=function(){return c(this).offset().top>(c(document).scrollTop()+c(window).height()/2)?"s":"n"};c.fn.xrayTipsy.autoWE=function(){return c(this).offset().left>(c(document).scrollLeft()+c(window).width()/2)?"e":"w"}})(jQuery);;
;
/* module-key = 'com.xpandit.plugins.xray:ccc-chart-resources', location = 'js/ccc/protovis.js' */
if(!Array.prototype.map){Array.prototype.map=function(c,d){var e=this.length;var a=new Array(e);for(var b=0;b<e;b++){if(b in this){a[b]=c.call(d,this[b],b,this)}}return a}}if(!Array.prototype.filter){Array.prototype.filter=function(d,e){var g=this.length;var a=new Array();for(var c=0;c<g;c++){if(c in this){var b=this[c];if(d.call(e,b,c,this)){a.push(b)}}}return a}}if(!Array.prototype.forEach){Array.prototype.forEach=function(b,c){var d=this.length>>>0;for(var a=0;a<d;a++){if(a in this){b.call(c,this[a],a,this)}}}}if(!Array.prototype.reduce){Array.prototype.reduce=function(d,b){var a=this.length;if(!a&&(arguments.length==1)){throw new Error("reduce: empty array, no initial value")}var c=0;if(arguments.length<2){while(true){if(c in this){b=this[c++];break}if(++c>=a){throw new Error("reduce: no values, no initial value")}}}for(;c<a;c++){if(c in this){b=d(b,this[c],c,this)}}return b}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(b,d){var c=this.length>>>0,a=(!isFinite(d)||d<0)?0:(d>this.length)?this.length:d;for(;a<c;a++){if(this[a]===b){return a}}return -1}}var pv={};pv.version={major:3,minor:3};pv.identity=function(a){return a};pv.index=function(){return this.index};pv.child=function(){return this.childIndex};pv.parent=function(){return this.parent.index};(function(){pv.extend=Object.create?function(e){return Object.create(e.prototype||e)}:function(h){function e(){}e.prototype=h.prototype||h;return new e()};pv.extendType=function(h,i){var e=h.prototype=pv.extend(i);e.constructor=h;return h};pv.parse=function(e){var o=new RegExp("function\\s*(\\b\\w+)?\\s*\\([^)]*\\)\\s*","mg");var k=0;var q="";var g,l;while((g=o.exec(e))){var h=g.index+g[0].length;if(e.charAt(h)!="{"){q+=e.substring(k,h)+"{return ";k=h;for(var f=0;f>=0&&h<e.length;h++){var n=e.charAt(h);switch(n){case'"':case"'":while(++h<e.length&&(l=e.charAt(h))!=n){if(l=="\\"){h++}}break;case"[":case"(":f++;break;case"]":case")":f--;break;case";":case",":if(f==0){f--}break}}q+=pv.parse(e.substring(k,--h))+";}";k=h}o.lastIndex=h}q+=e.substring(k);return q};pv.error=function(f){(typeof console==="undefined"||!console.error)?alert(f):console.error(f)};pv.listen=function(g,e,f){f=pv.listener(f);if(e==="load"||e==="onload"){return pv.listenForPageLoad(f)}if(g.addEventListener){g.addEventListener(e,f,false)}else{if(g===window){g=document.documentElement}g.attachEvent("on"+e,f)}return f};pv.unlisten=function(g,e,f){if(f.$listener){f=f.$listener}g.removeEventListener?g.removeEventListener(e,f,false):g.detachEvent("on"+e,f)};pv.listenForPageLoad=function(e){if(document.readyState==="complete"){e(null);return}if(document.addEventListener){window.addEventListener("load",e,false)}else{if(document.attachEvent){window.attachEvent("onload",e)}}};pv.listener=function(e){return e.$listener||(e.$listener=function(g){try{pv.event=g=g&&pv.fixEvent(g);return e.call(this,g)}catch(f){pv.error(f)}finally{delete pv.event}})};pv.fixEvent=function(f){if(f.pageX==null&&f.clientX!=null){var g=(f.target&&f.target.ownerDocument)||document;var h=g.documentElement;var e=g.body;f.pageX=(f.clientX*1)+(h&&h.scrollLeft||e&&e.scrollLeft||0)-(h&&h.clientLeft||e&&e.clientLeft||0);f.pageY=(f.clientY*1)+(h&&h.scrollTop||e&&e.scrollTop||0)-(h&&h.clientTop||e&&e.clientTop||0)}return f};pv.ancestor=function(f,g){while(g){if(g===f){return true}g=g.parentNode}return false};pv.removeChildren=function(e){while(e.lastChild){e.removeChild(e.lastChild)}};pv.getWindow=function(e){return(e!=null&&e==e.window)?e:e.nodeType===9?(e.defaultView||e.parentWindow):false};var a=/\-([a-z])/g;pv.hiphen2camel=function(e){if(a.test(e)){return e.replace(a,function(g,f){return f.toUpperCase()})}return e};var d=window.getComputedStyle;pv.css=function(g,f){return d?d.call(window,g,null).getPropertyValue(f):g.currentStyle[f==="float"?"styleFloat":pv.hiphen2camel(f)]};pv.cssStyle=function(g){var f;if(d){f=d.call(window,g,null);return function(e){return f.getPropertyValue(e)}}f=g.currentStyle;return function(e){return f[e==="float"?"styleFloat":pv.hiphen2camel(e)]}};pv._getElementsByClass=function(n,l){if(l==null){l=document}var k=[];var h=l.getElementsByTagName("*");var e=h.length;var m=new RegExp("(^|\\s)"+n+"(\\s|$)");for(var g=0,f=0;g<e;g++){if(m.test(h[g].className)){k[f]=h[g];f++}}return k};pv.getElementsByClassName=function(e,f){return e.getElementsByClassName?e.getElementsByClassName(f):pv._getElementsByClass(f,e)};pv.elementOffset=function(g){var n=g&&g.ownerDocument;if(!n){return}var k=n.body;if(k===g){return}var j;if(typeof g.getBoundingClientRect!=="undefined"){j=g.getBoundingClientRect()}else{j={top:0,left:0}}var l=pv.getWindow(n);var f=n.documentElement;var i=f.clientTop||k.clientTop||0;var m=f.clientLeft||k.clientLeft||0;var e=l.pageYOffset||f.scrollTop;var h=l.pageXOffset||f.scrollLeft;return{top:j.top+e-i,left:j.left+h-m}};pv.renderer=function(){var e=document.svgImplementation||"nativesvg";pv.renderer=function(){return e};return e};var c=1;pv.id=function(){return c++};pv.functor=function(e){return typeof e==="function"?e:function(){return e}};pv.get=function(h,g,f){var e;return h&&(e=h[g])!=null?e:f};var b=Object.prototype.hasOwnProperty;pv.lazyArrayOwn=function(g,f){var e;return g&&b.call(g,f)&&(e=g[f])?e:(g[f]=[])};pv.CanvasStolenError=function(){}}());pv.listen(window,"load",function(){pv.$={i:0,x:document.getElementsByTagName("script")};pv.$.xlen=pv.$.x.length;for(;pv.$.i<pv.$.xlen;pv.$.i++){pv.$.s=pv.$.x[pv.$.i];if(pv.$.s.type=="text/javascript+protovis"){try{window.eval(pv.parse(pv.$.s.text))}catch(e){pv.error(e)}}}delete pv.$});pv.Format={};pv.Format.re=function(a){return a.replace(/[\\\^\$\*\+\?\[\]\(\)\.\{\}]/g,"\\$&")};pv.Format.pad=function(e,d,b){var a=d-String(b).length;return(a<1)?b:new Array(a+1).join(e)+b};pv.Format.date=function(a){var c=pv.Format.pad;function b(e){return a.replace(/%[a-zA-Z0-9]/g,function(g){switch(g){case"%a":return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()];case"%A":return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()];case"%h":case"%b":return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()];case"%B":return["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()];case"%c":return e.toLocaleString();case"%C":return c("0",2,Math.floor(e.getFullYear()/100)%100);case"%d":return c("0",2,e.getDate());case"%x":case"%D":return c("0",2,e.getMonth()+1)+"/"+c("0",2,e.getDate())+"/"+c("0",2,e.getFullYear()%100);case"%e":return c(" ",2,e.getDate());case"%H":return c("0",2,e.getHours());case"%I":var f=e.getHours()%12;return f?c("0",2,f):12;case"%m":return c("0",2,e.getMonth()+1);case"%M":return c("0",2,e.getMinutes());case"%n":return"\n";case"%p":return e.getHours()<12?"AM":"PM";case"%T":case"%X":case"%r":var f=e.getHours()%12;return(f?c("0",2,f):12)+":"+c("0",2,e.getMinutes())+":"+c("0",2,e.getSeconds())+" "+(e.getHours()<12?"AM":"PM");case"%R":return c("0",2,e.getHours())+":"+c("0",2,e.getMinutes());case"%S":return c("0",2,e.getSeconds());case"%Q":return c("0",3,e.getMilliseconds());case"%t":return"\t";case"%u":var d=e.getDay();return d?d:1;case"%w":return e.getDay();case"%y":return c("0",2,e.getFullYear()%100);case"%Y":return e.getFullYear();case"%%":return"%"}return g})}b.format=b;b.parse=function(m){var k=1970,j=0,e=1,g=0,f=0,d=0;var i=[function(){}];var l=pv.Format.re(a).replace(/%[a-zA-Z0-9]/g,function(n){switch(n){case"%b":i.push(function(o){j={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11}[o]});return"([A-Za-z]+)";case"%h":case"%B":i.push(function(o){j={January:0,February:1,March:2,April:3,May:4,June:5,July:6,August:7,September:8,October:9,November:10,December:11}[o]});return"([A-Za-z]+)";case"%e":case"%d":i.push(function(o){e=o});return"([0-9]+)";case"%I":case"%H":i.push(function(o){g=o});return"([0-9]+)";case"%m":i.push(function(o){j=o-1});return"([0-9]+)";case"%M":i.push(function(o){f=o});return"([0-9]+)";case"%p":i.push(function(o){if(g==12){if(o=="am"){g=0}}else{if(o=="pm"){g=Number(g)+12}}});return"(am|pm)";case"%S":i.push(function(o){d=o});return"([0-9]+)";case"%y":i.push(function(o){o=Number(o);k=o+(((0<=o)&&(o<69))?2000:(((o>=69)&&(o<100)?1900:0)))});return"([0-9]+)";case"%Y":i.push(function(o){k=o});return"([0-9]+)";case"%%":i.push(function(){});return"%"}return n});var h=m.match(l);if(h){h.forEach(function(n,o){i[o](n)})}return new Date(k,j,e,g,f,d)};return b};pv.Format.time=function(a){var c=pv.Format.pad;function b(f){f=Number(f);switch(a){case"short":if(f>=31536000000){return(f/31536000000).toFixed(1)+" years"}else{if(f>=604800000){return(f/604800000).toFixed(1)+" weeks"}else{if(f>=86400000){return(f/86400000).toFixed(1)+" days"}else{if(f>=3600000){return(f/3600000).toFixed(1)+" hours"}else{if(f>=60000){return(f/60000).toFixed(1)+" minutes"}}}}}return(f/1000).toFixed(1)+" seconds";case"long":var e=[],i=((f%60000)/1000)>>0,d=((f%3600000)/60000)>>0;e.push(c("0",2,i));if(f>=3600000){var g=((f%86400000)/3600000)>>0;e.push(c("0",2,d));if(f>=86400000){e.push(c("0",2,g));e.push(Math.floor(f/86400000).toFixed())}else{e.push(g.toFixed())}}else{e.push(d.toFixed())}return e.reverse().join(":")}}b.format=b;b.parse=function(i){switch(a){case"short":var h=/([0-9,.]+)\s*([a-z]+)/g,d,g=0;while(d=h.exec(i)){var j=parseFloat(d[0].replace(",","")),e=0;switch(d[2].toLowerCase()){case"year":case"years":e=31536000000;break;case"week":case"weeks":e=604800000;break;case"day":case"days":e=86400000;break;case"hour":case"hours":e=3600000;break;case"minute":case"minutes":e=60000;break;case"second":case"seconds":e=1000;break}g+=j*e}return g;case"long":var d=i.replace(",","").split(":").reverse(),g=0;if(d.length){g+=parseFloat(d[0])*1000}if(d.length>1){g+=parseFloat(d[1])*60000}if(d.length>2){g+=parseFloat(d[2])*3600000}if(d.length>3){g+=parseFloat(d[3])*86400000}return g}};return b};pv.Format.number=function(){var g=0,c=Infinity,a=0,j=0,e=0,b=1,f="0",i="0",h=true,d=".",n=",",m="\u2212",k="";function l(o){if(Infinity>e){o=Math.round(o*b)/b}var q=String(Math.abs(o)).split(".");var p=q[0];if(p.length>c){p=p.substring(p.length-c)}if(h&&(p.length<g)){p=new Array(g-p.length+1).join(f)+p}if(p.length>3){p=p.replace(/\B(?=(?:\d{3})+(?!\d))/g,n)}if(!h&&(p.length<a)){p=new Array(a-p.length+1).join(f)+p}q[0]=o<0?m+p+k:p;var r=q[1]||"";if(r.length>e){r=q[1]=r.substr(0,e)}if(r.length<j){q[1]=r+new Array(j-r.length+1).join(i)}return q.join(d)}l.format=l;l.parse=function(o){var r=pv.Format.re;var q=String(o).split(d);if(q.length==1){q[1]=""}q[0].replace(new RegExp("^("+r(f)+")*"),"");q[1].replace(new RegExp("("+r(i)+")*$"),"");var p=q[0].replace(new RegExp(r(n),"g"),"");if(p.length>c){p=p.substring(p.length-c)}var t=q[1]?Number("0."+q[1]):0;if(Infinity>e){t=Math.round(t*b)/b}return Math.round(p)+t};l.integerDigits=function(p,o){if(arguments.length){g=Number(p);c=(arguments.length>1)?Number(o):g;a=g+Math.floor(g/3)*n.length;return this}return[g,c]};l.fractionDigits=function(p,o){if(arguments.length){j=Number(p);e=(arguments.length>1)?Number(o):j;b=Math.pow(10,e);return this}return[j,e]};l.integerPad=function(o){if(arguments.length){f=String(o);h=/\d/.test(f);return this}return f};l.fractionPad=function(o){if(arguments.length){i=String(o);return this}return i};l.decimal=function(o){if(arguments.length){d=String(o);return this}return d};l.group=function(o){if(arguments.length){n=o?String(o):"";a=g+Math.floor(g/3)*n.length;return this}return n};l.negativeAffix=function(o,p){if(arguments.length){m=String(o||"");k=String(p||"");return this}return[m,k]};return l};(function(){var c;pv.Text={};pv.Text.createCache=function(){return new b()};pv.Text.usingCache=function(f,e,d){if(!(f instanceof b)){throw new Error("Not a valid cache.")}var g=c;c=f;try{return e.call(d)}finally{c=g}};pv.Text.measure=function(f,d){if(f==null){f=""}else{f=""+f}var e=c&&c.get(d,f);if(!e){if(!f){e={width:0,height:0}}else{e=this.measureCore(f,d)}if(c){c.put(d,f,e)}}return e};pv.Text.fontHeight=function(d){return pv.Text.measure("M",d).height};pv.Text.measureCore=(function(){var f,d="10px sans-serif";function e(){return f||(f=g())}function g(){var k=document.createElement("div");k.id="pvSVGText_"+new Date().getTime();var h=k.style;h.position="absolute";h.visibility="hidden";h.width=0;h.height=0;h.left=0;h.top=0;var i=pv.SvgScene.create("svg");i.setAttribute("font-size","10px");i.setAttribute("font-family","sans-serif");k.appendChild(i);var j=pv.SvgScene.create("text");i.appendChild(j);j.appendChild(document.createTextNode(""));document.body.appendChild(k);return j}return function(l,h){if(!h){h=null}var k=e();if(d!==h){d=h;pv.SvgScene.setStyle(k,{font:h})}k.firstChild.nodeValue=""+l;var j;try{j=k.getBBox()}catch(i){if(typeof console.error==="function"){console.error("GetBBox failed: ",i)}throw i}return{width:j.width,height:j.height}}}());var b=function(){this._fontsCache={}};var a=Object.prototype.hasOwnProperty;b.prototype._getFont=function(d){d=d||"";return a.call(this._fontsCache,d)?this._fontsCache[d]:(this._fontsCache[d]={})};b.prototype.get=function(d,f){f=f||"";var e=this._getFont(d);return a.call(e,f)?e[f]:null};b.prototype.put=function(d,f,e){return this._getFont(d)[f||""]=e}}());pv.map=function(c,a){var b={};return a?c.map(function(f,e){b.index=e;return a.call(b,f)}):c.slice()};pv.repeat=function(b,a){if(arguments.length==1){a=2}return pv.blend(pv.range(a).map(function(){return b}))};pv.array=function(b,e){var c=b>=0?new Array(b):[];if(e!==undefined){for(var d=0;d<b;d++){c[d]=e}}return c};pv.cross=function(f,e){var l=[];for(var h=0,k=f.length,d=e.length;h<k;h++){for(var g=0,c=f[h];g<d;g++){l.push([c,e[g]])}}return l};pv.blend=function(a){return Array.prototype.concat.apply([],a)};pv.transpose=function(e){var f=e.length,a=pv.max(e,function(g){return g.length});if(a>f){e.length=a;for(var d=f;d<a;d++){e[d]=new Array(f)}for(var d=0;d<f;d++){for(var b=d+1;b<a;b++){var c=e[d][b];e[d][b]=e[b][d];e[b][d]=c}}}else{for(var d=0;d<a;d++){e[d].length=f}for(var d=0;d<f;d++){for(var b=0;b<d;b++){var c=e[d][b];e[d][b]=e[b][d];e[b][d]=c}}}e.length=a;for(var d=0;d<a;d++){e[d].length=f}return e};pv.normalize=function(e,d){var b=pv.map(e,d),c=pv.sum(b);for(var a=0;a<b.length;a++){b[a]/=c}return b};pv.permute=function(e,a,b){if(!b){b=pv.identity}var c=new Array(a.length),d={};a.forEach(function(f,g){d.index=f;c[g]=b.call(d,e[f])});return c};pv.numerate=function(a,b){if(!b){b=pv.identity}var c={},d={};a.forEach(function(e,f){d.index=f;c[b.call(d,e)]=f});return c};pv.uniq=function(g,b){if(!b){b=pv.identity}var c={},a=[],d={},e;g.forEach(function(f,h){d.index=h;e=b.call(d,f);if(!(e in c)){c[e]=a.push(e)}});return a};pv.naturalOrder=function(d,c){return(d<c)?-1:((d>c)?1:0)};pv.reverseOrder=function(c,d){return(d<c)?-1:((d>c)?1:0)};pv.search=function(h,g,e){if(!e){e=pv.identity}var a=0,d=h.length-1;while(a<=d){var b=(a+d)>>1,c=e(h[b]);if(c<g){a=b+1}else{if(c>g){d=b-1}else{return b}}}return -a-1};pv.search.index=function(d,c,b){var a=pv.search(d,c,b);return(a<0)?(-a-1):a};pv.range=function(f,c,d){if(arguments.length==1){c=f;f=0}if(d==undefined){d=1}if((c-f)/d==Infinity){throw new Error("range must be finite")}var e=[],b=0,a;c-=(c-f)*1e-10;if(d<0){while((a=f+d*b++)>c){e.push(a)}}else{while((a=f+d*b++)<c){e.push(a)}}return e};pv.random=function(c,a,b){if(arguments.length==1){a=c;c=0}if(b==undefined){b=1}return b?(Math.floor(Math.random()*(a-c)/b)*b+c):(Math.random()*(a-c)+c)};pv.sum=function(c,a){var b={};return c.reduce(a?function(f,g,e){b.index=e;return f+a.call(b,g)}:function(e,f){return e+f},0)};pv.max=function(b,a){if(a==pv.index){return b.length-1}return Math.max.apply(null,a?pv.map(b,a):b)};pv.max.index=function(h,d){if(!h.length){return -1}if(d==pv.index){return h.length-1}if(!d){d=pv.identity}var b=0,g=-Infinity,e={};for(var c=0;c<h.length;c++){e.index=c;var a=d.call(e,h[c]);if(a>g){g=a;b=c}}return b};pv.min=function(b,a){if(a==pv.index){return 0}return Math.min.apply(null,a?pv.map(b,a):b)};pv.min.index=function(h,e){if(!h.length){return -1}if(e==pv.index){return 0}if(!e){e=pv.identity}var d=0,b=Infinity,g={};for(var c=0;c<h.length;c++){g.index=c;var a=e.call(g,h[c]);if(a<b){b=a;d=c}}return d};pv.mean=function(b,a){return pv.sum(b,a)/b.length};pv.median=function(c,b){if(b==pv.index){return(c.length-1)/2}c=pv.map(c,b).sort(pv.naturalOrder);if(c.length%2){return c[Math.floor(c.length/2)]}var a=c.length/2;return(c[a-1]+c[a])/2};pv.variance=function(j,e){if(j.length<1){return NaN}if(j.length==1){return 0}var a=pv.mean(j,e),c=0,h={};if(!e){e=pv.identity}for(var b=0;b<j.length;b++){h.index=b;var g=e.call(h,j[b])-a;c+=g*g}return c};pv.deviation=function(b,a){return Math.sqrt(pv.variance(b,a)/(b.length-1))};pv.log=function(c,a){return Math.log(c)/Math.log(a)};pv.logSymmetric=function(c,a){return(c==0)?0:((c<0)?-pv.log(-c,a):pv.log(c,a))};pv.logAdjusted=function(c,a){if(!isFinite(c)){return c}var d=c<0;if(c<a){c+=(a-c)/a}return d?-pv.log(c,a):pv.log(c,a)};pv.logFloor=function(c,a){return(c>0)?Math.pow(a,Math.floor(pv.log(c,a))):-Math.pow(a,-Math.floor(-pv.log(-c,a)))};pv.logCeil=function(c,a){return(c>0)?Math.pow(a,Math.ceil(pv.log(c,a))):-Math.pow(a,-Math.ceil(-pv.log(-c,a)))};(function(){var a=Math.PI/180,b=180/Math.PI;pv.radians=function(c){return a*c};pv.degrees=function(c){return b*c}})();pv.keys=function(b){var c=[];for(var a in b){c.push(a)}return c};pv.entries=function(b){var c=[];for(var a in b){c.push({key:a,value:b[a]})}return c};pv.values=function(b){var c=[];for(var a in b){c.push(b[a])}return c};pv.dict=function(d,e){var a={},g={};for(var c=0;c<d.length;c++){if(c in d){var b=d[c];g.index=c;a[b]=e.call(g,b)}}return a};pv.hasOwnProp=Object.prototype.hasOwnProperty;pv.copyOwn=function(e,c){if(c){var d=pv.hasOwnProp;for(var f in c){if(d.call(c,f)){e[f]=c[f]}}}return e};pv.dom=function(a){return new pv.Dom(a)};pv.Dom=function(a){this.$map=a};pv.Dom.prototype.$leaf=function(a){return typeof a!="object"};pv.Dom.prototype.leaf=function(a){if(arguments.length){this.$leaf=a;return this}return this.$leaf};pv.Dom.prototype.root=function(d){var b=this.$leaf,a=c(this.$map);function c(g){var h=new pv.Dom.Node();for(var f in g){var e=g[f];h.appendChild(b(e)?new pv.Dom.Node(e):c(e)).nodeName=f}return h}a.nodeName=d;return a};pv.Dom.prototype.nodes=function(){return this.root().nodes()};pv.Dom.Node=function(a){if(a!==undefined){this.nodeValue=a}};pv.Dom.Node.prototype.nodeValue=undefined;pv.Dom.Node.prototype.childNodes=[];pv.Dom.Node.prototype.parentNode=null;pv.Dom.Node.prototype.firstChild=null;pv.Dom.Node.prototype.lastChild=null;pv.Dom.Node.prototype.previousSibling=null;pv.Dom.Node.prototype.nextSibling=null;pv.Dom.Node.prototype._firstDirtyChildIndex=Infinity;pv.Dom.Node.prototype._childIndex=-1;pv.Dom.Node.prototype.findChildIndex=function(b){if(!b){throw new Error("Argument 'n' required")}if(b.parentNode===this){var a=b.childIndex(true);if(a>-1){return a}}throw new Error("child not found")};pv.Dom.Node.prototype._childRemoved=function(b,a){};pv.Dom.Node.prototype._childAdded=function(b,a){};pv.Dom.Node.prototype.removeChild=function(b){var a=this.findChildIndex(b);return this.removeAt(a)};pv.Dom.Node.prototype.appendChild=function(d){var b=d.parentNode;if(b){b.removeChild(d)}var c=this.lastChild;d.parentNode=this;d.previousSibling=c;if(c){c.nextSibling=d;d._childIndex=c._childIndex+1}else{this.firstChild=d;d._childIndex=0}this.lastChild=d;var a=pv.lazyArrayOwn(this,"childNodes").push(d);this._childAdded(d,a-1);return d};pv.Dom.Node.prototype.insertBefore=function(c,b){if(!b){return this.appendChild(c)}var a=this.findChildIndex(b);return this.insertAt(c,a)};pv.Dom.Node.prototype.insertAt=function(h,d){if(d==null){return this.appendChild(h)}var e=this.childNodes;var a=e.length;if(d===a){return this.appendChild(h)}if(d<0||d>a){throw new Error("Index out of range.")}var b=h.parentNode;if(b){b.removeChild(h)}var c=d+1;if(c<this._firstDirtyChildIndex){this._firstDirtyChildIndex=c}var f=e[d];h.parentNode=this;h.nextSibling=f;h._childIndex=d;var g=h.previousSibling=f.previousSibling;f.previousSibling=h;if(g){g.nextSibling=h}else{if(f===this.lastChild){this.lastChild=h}this.firstChild=h}e.splice(d,0,h);this._childAdded(h,d);return h};pv.Dom.Node.prototype.removeAt=function(c){var d=this.childNodes;var a=d.length;if(c<0||c>=a){return}var f=d[c];d.splice(c,1);if(c<a-1&&c<this._firstDirtyChildIndex){this._firstDirtyChildIndex=c}var e=f.previousSibling;var b=f.nextSibling;if(e){e.nextSibling=b}else{this.firstChild=b}if(b){b.previousSibling=e}else{this.lastChild=e}f.nextSibling=f.previousSibling=f.parentNode=null;this._childRemoved(f,c);return f};pv.Dom.Node.prototype.replaceChild=function(f,d){var c=this.findChildIndex(d);var b=f.parentNode;if(b){b.removeChild(f)}f.parentNode=this;f.nextSibling=d.nextSibling;f._childIndex=d._childIndex;var e=f.previousSibling=d.previousSibling;if(e){e.nextSibling=f}else{this.firstChild=f}var a=d.nextSibling;if(a){a.previousSibling=f}else{this.lastChild=f}this.childNodes[c]=f;this._childRemoved(d,c);this._childAdded(f,c);return d};pv.Dom.Node.prototype.childIndex=function(a){var e=this.parentNode;if(e){var d=e._firstDirtyChildIndex;if(d<Infinity){var b=e.childNodes;if(!a){return b.indexOf(this)}if(d<b.length){for(var f=b[d];f;f=f.nextSibling){f._childIndex=d++}}e._firstDirtyChildIndex=Infinity}return this._childIndex}return -1};pv.Dom.Node.prototype.visitBefore=function(b){function a(g,e){b(g,e);for(var f=g.firstChild;f;f=f.nextSibling){a(f,e+1)}}a(this,0)};pv.Dom.Node.prototype.visitAfter=function(b){function a(g,e){for(var f=g.firstChild;f;f=f.nextSibling){a(f,e+1)}b(g,e)}a(this,0)};pv.Dom.Node.prototype.sort=function(e){if(this.firstChild){this._firstDirtyChildIndex=Infinity;var d=this.childNodes;d.sort(e);var g=(this.firstChild=d[0]);var h;delete g.previousSibling;g._childIndex=0;for(var b=1,a=d.length;b<a;b++){g.sort(e);h=d[b];h._childIndex=b;h.previousSibling=g;g=g.nextSibling=h}this.lastChild=g;delete g.nextSibling;g.sort(e)}return this};pv.Dom.Node.prototype.reverse=function(){var a=[];this.visitAfter(function(d){this._firstDirtyChildIndex=Infinity;var b;while((b=d.lastChild)){a.push(d.removeChild(b))}if(a.length){while((b=a.pop())){d.insertBefore(b,d.firstChild)}}});return this};pv.Dom.Node.prototype.nodes=function(){var a=[];this.visitBefore(function(b){a.push(b)});return a};pv.Dom.Node.prototype.toggle=function(a){if(a){return this.toggled?this.visitBefore(function(c){if(c.toggled){c.toggle()}}):this.visitAfter(function(c){if(!c.toggled){c.toggle()}})}var d;var b=this;if(b.toggled){while((d=b.toggled.pop())){b.appendChild(d)}delete b.toggled}else{if((d=b.lastChild)){b.toggled=[];do{b.toggled.push(b.removeChild(d))}while((d=b.lastChild))}}};pv.nodes=function(c){var b=new pv.Dom.Node();for(var d=0,a=c.length;d<a;d++){b.appendChild(new pv.Dom.Node(c[d]))}return b.nodes()};pv.tree=function(a){return new pv.Tree(a)};pv.Tree=function(a){this.array=a};pv.Tree.prototype.keys=function(a){this.k=a;return this};pv.Tree.prototype.value=function(a){this.v=a;return this};pv.Tree.prototype.map=function(){var f={},g={};for(var b=0;b<this.array.length;b++){g.index=b;var e=this.array[b],d=this.k.call(g,e),c=f;for(var a=0;a<d.length-1;a++){c=c[d[a]]||(c[d[a]]={})}c[d[a]]=this.v?this.v.call(g,e):e}return f};pv.nest=function(a){return new pv.Nest(a)};pv.Nest=function(a){this.array=a;this.keys=[]};pv.Nest.prototype.key=function(a){this.keys.push(a);return this};pv.Nest.prototype.sortKeys=function(a){this.keys[this.keys.length-1].order=a||pv.naturalOrder;return this};pv.Nest.prototype.sortValues=function(a){this.order=a||pv.naturalOrder;return this};pv.Nest.prototype.map=function(){var l={},f=[];for(var h,g=0;g<this.array.length;g++){var c=this.array[g];var b=l;for(h=0;h<this.keys.length-1;h++){var e=this.keys[h](c);if(!b[e]){b[e]={}}b=b[e]}e=this.keys[h](c);if(!b[e]){var d=[];f.push(d);b[e]=d}b[e].push(c)}if(this.order){for(var h=0;h<f.length;h++){f[h].sort(this.order)}}return l};pv.Nest.prototype.entries=function(){function a(e){var f=[];for(var d in e){var c=e[d];f.push({key:d,values:(c instanceof Array)?c:a(c)})}return f}function b(f,d){var e=this.keys[d].order;if(e){f.sort(function(h,g){return e(h.key,g.key)})}if(++d<this.keys.length){for(var c=0;c<f.length;c++){b.call(this,f[c].values,d)}}return f}return b.call(this,a(this.map()),0)};pv.Nest.prototype.rollup=function(b){function a(e){for(var c in e){var d=e[c];if(d instanceof Array){e[c]=b(d)}else{a(d)}}return e}return a(this.map())};pv.flatten=function(a){return new pv.Flatten(a)};pv.Flatten=function(a){this.map=a;this.keys=[]};pv.Flatten.prototype.key=function(a,b){this.keys.push({name:a,value:b});delete this.$leaf;return this};pv.Flatten.prototype.leaf=function(a){this.keys.length=0;this.$leaf=a;return this};pv.Flatten.prototype.array=function(){var b=[],a=[],f=this.keys,c=this.$leaf;if(c){function e(j,h){if(c(j)){b.push({keys:a.slice(),value:j})}else{for(var g in j){a.push(g);e(j[g],h+1);a.pop()}}}e(this.map,0);return b}function d(j,h){if(h<f.length-1){for(var g in j){a.push(g);d(j[g],h+1);a.pop()}}else{b.push(a.concat(j))}}d(this.map,0);return b.map(function(h){var g={};for(var n=0;n<f.length;n++){var l=f[n],j=h[n];g[l.name]=l.value?l.value.call(null,j):j}return g})};pv.Transform=function(){};pv.Transform.prototype={k:1,x:0,y:0};pv.Transform.identity=new pv.Transform();pv.Transform.prototype.translate=function(a,c){var b=new pv.Transform();b.k=this.k;b.x=this.k*a+this.x;b.y=this.k*c+this.y;return b};pv.Transform.prototype.scale=function(b){var a=new pv.Transform();a.k=this.k*b;a.x=this.x;a.y=this.y;return a};pv.Transform.prototype.invert=function(){var b=new pv.Transform(),a=1/this.k;b.k=a;b.x=-this.x*a;b.y=-this.y*a;return b};pv.Transform.prototype.times=function(a){var b=new pv.Transform();b.k=this.k*a.k;b.x=this.k*a.x+this.x;b.y=this.k*a.y+this.y;return b};pv.Scale=function(){};pv.Scale.interpolator=function(d,a){if(typeof d=="number"){return function(e){return e*(a-d)+d}}var b=(d.type&&d.type!=="solid");var c=(a.type&&a.type!=="solid");if(b||c){d=b?d:pv.color(d).rgb();a=c?a:pv.color(a).rgb();return function(e){return e<0.5?d:a}}d=pv.color(d).rgb();a=pv.color(a).rgb();return function(f){var e=d.a*(1-f)+a.a*f;if(e<0.00001){e=0}return(d.a==0)?pv.rgb(a.r,a.g,a.b,e):(a.a==0)?pv.rgb(d.r,d.g,d.b,e):pv.rgb(Math.round(d.r*(1-f)+a.r*f),Math.round(d.g*(1-f)+a.g*f),Math.round(d.b*(1-f)+a.b*f),e)}};pv.Scale.common={by:function(a){var c=this;function b(){return c(a.apply(this,arguments))}for(var d in c){b[d]=c[d]}return b},by1:function(a){var c=this;function b(e){return c(a.call(this,e))}for(var d in c){b[d]=c[d]}return b},transform:function(a){var c=this;function b(){return a.call(this,c.apply(c,arguments))}for(var d in c){b[d]=c[d]}return b}};pv.Scale.quantitative=function(){var t=[0,1],k=[0,1],a=[0,1],o=[pv.identity],u=Number,e=false,s=pv.identity,p=pv.identity,j=String,m=null,q,w,c,b;function v(d){return new Date(d)}function h(d){var f=pv.search(t,d);if(f<0){f=-f-2}f=Math.max(0,Math.min(o.length-1,f));return o[f]((s(d)-k[f])/(k[f+1]-k[f]))}h.transform=function(f,d){s=function(g){return e?-f(-g):f(g)};p=function(g){return e?-d(-g):d(g)};k=t.map(s);return this};h.domain=function(i,f,d){if(arguments.length){var g;if(i instanceof Array){if(arguments.length<2){f=pv.identity}if(arguments.length<3){d=f}g=i.length&&f(i[0]);t=i.length?[pv.min(i,f),pv.max(i,d)]:[]}else{g=i;t=Array.prototype.slice.call(arguments).map(Number)}if(!t.length){t=[-Infinity,Infinity]}else{if(t.length==1){t=[t[0],t[0]]}}e=(t[0]||t[t.length-1])<0;k=t.map(s);u=(g instanceof Date)?v:Number;return this}return t.map(u)};h.range=function(){if(arguments.length){a=Array.prototype.slice.call(arguments);if(!a.length){a=[-Infinity,Infinity]}else{if(a.length==1){a=[a[0],a[0]]}}o=[];for(var d=0;d<a.length-1;d++){o.push(pv.Scale.interpolator(a[d],a[d+1]))}return this}return a};h.invert=function(f){var d=pv.search(a,f);if(d<0){d=-d-2}d=Math.max(0,Math.min(o.length-1,d));return u(p(k[d]+(f-a[d])/(a[d+1]-a[d])*(k[d+1]-k[d])))};h.ticks=function(F,f){var l=t[0],g=t[t.length-1],B=g<l,G=B?g:l,I=B?l:g,H=I-G;if(!H||!isFinite(H)){if(u==v){j=pv.Format.date("%x")}return[u(G)]}if(u==v){function K(Q,n){switch(n){case 31536000000:Q.setMonth(0);case 2592000000:Q.setDate(1);case 604800000:if(n==604800000){Q.setDate(Q.getDate()-Q.getDay())}case 86400000:Q.setHours(0);case 3600000:Q.setMinutes(0);case 60000:Q.setSeconds(0);case 1000:Q.setMilliseconds(0)}}var d=5;var L,J,O,A=1;if(H>=d*31536000000){L=31536000000;J="%Y";O=function(n){n.setFullYear(n.getFullYear()+A)}}else{if(H>=d*2592000000){L=2592000000;J="%m/%Y";O=function(n){n.setMonth(n.getMonth()+A)}}else{if(H>=d*604800000){L=604800000;J="%m/%d";O=function(n){n.setDate(n.getDate()+7*A)}}else{if(H>=d*86400000){L=86400000;J="%m/%d";O=function(n){n.setDate(n.getDate()+A)}}else{if(H>=d*3600000){L=3600000;J="%I:%M %p";O=function(n){n.setHours(n.getHours()+A)}}else{if(H>=d*60000){L=60000;J="%I:%M %p";O=function(n){n.setMinutes(n.getMinutes()+A)}}else{if(H>=d*1000){L=1000;J="%I:%M:%S";O=function(n){n.setSeconds(n.getSeconds()+A)}}else{L=1;J="%S.%Qs";O=function(n){n.setTime(n.getTime()+A)}}}}}}}}L=w?w:L;J=q?q:J;c=L;j=pv.Format.date(J);var N=new Date(G),x=[];K(N,L);var D=H/L;if(D>10){switch(L){case 3600000:A=(D>20)?6:3;N.setHours(Math.floor(N.getHours()/A)*A);break;case 2592000000:A=(D>24)?3:((D>12)?2:1);N.setMonth(Math.floor(N.getMonth()/A)*A);break;case 604800000:A=(D>15)?3:(D>10?2:1);N.setDate(Math.floor(N.getDate()/(7*A))*(7*A));break;case 86400000:A=(D>=30)?5:((D>=15)?3:2);N.setDate(Math.floor(N.getDate()/A)*A);break;case 60000:A=(D>30)?15:((D>15)?10:5);N.setMinutes(Math.floor(N.getMinutes()/A)*A);break;case 1000:A=(D>90)?15:((D>60)?10:5);N.setSeconds(Math.floor(N.getSeconds()/A)*A);break;case 1:A=(D>1000)?250:((D>200)?100:((D>100)?50:((D>50)?25:5)));N.setMilliseconds(Math.floor(N.getMilliseconds()/A)*A);break;default:A=pv.logCeil(D/15,10);if(D/A<2){A/=5}else{if(D/A<5){A/=2}}N.setFullYear(Math.floor(N.getFullYear()/A)*A);break}}if(w){A=1;O=function(n){n.setSeconds(n.getSeconds()+A*w/1000)}}while(true){O(N);if(N>I){break}x.push(new Date(N))}return B?x.reverse():x}if(F==null){F=10}var y=pv.get(f,"roundInside",true);var i=pv.get(f,"numberExponentMin",-Infinity);var z=pv.get(f,"numberExponentMax",+Infinity);var C=Math.floor(pv.log(H/F,10));var E=false;if(C>z){C=z;E=true}else{if(C<i){C=i;E=true}}A=Math.pow(10,C);var M=(H/A);var r=F/M;if(r<=0.15&&C<z-1){A*=10}else{if(r<=0.35){A*=5}else{if(r<=0.75){A*=2}}}C=Math.floor(pv.log(A,10)+1e-10);l=A*Math[y?"ceil":"floor"](G/A);g=A*Math[y?"floor":"ceil"](I/A);b=Math.max(0,-C);j=pv.Format.number().fractionDigits(b);var P=pv.range(l,g+A,A);if(B){P.reverse()}P.roundInside=y;P.step=A;P.exponent=C;P.exponentOverflow=E;P.exponentMin=i;P.exponentMax=z;return P};h.dateTickFormat=function(){if(arguments.length){q=arguments[0];return this}return q};h.dateTickPrecision=function(){if(arguments.length){w=arguments[0];return this}return w};h.tickFormatter=function(d){if(arguments.length){m=d;return this}return m};h.tickFormat=function(d){var f;if(m){f=m(d,u!==Number?c:b)}else{f=j(d)}return f==null?"":(""+f)};h.nice=function(){if(t.length!=2){return this}var r=t[0],f=t[t.length-1],g=f<r,i=g?f:r,d=g?r:f,l=d-i;if(!l||!isFinite(l)){return this}var n=Math.pow(10,Math.round(Math.log(l)/Math.log(10))-1);t=[Math.floor(i/n)*n,Math.ceil(d/n)*n];if(g){t.reverse()}k=t.map(s);return this};pv.copyOwn(h,pv.Scale.common);h.domain.apply(h,arguments);return h};pv.Scale.linear=function(){var a=pv.Scale.quantitative();a.domain.apply(a,arguments);return a};pv.Scale.log=function(){var f=pv.Scale.quantitative(1,10),a,e,c=function(b){return Math.log(b)/e},d=function(b){return Math.pow(a,b)};f.ticks=function(){var m=f.domain(),o=m[0]<0,h=Math.floor(o?-c(-m[0]):c(m[0])),g=Math.ceil(o?-c(-m[1]):c(m[1])),l=[];if(o){l.push(-d(-h));for(;h++<g;){for(var b=a-1;b>0;b--){l.push(-d(-h)*b)}}}else{for(;h<g;h++){for(var b=1;b<a;b++){l.push(d(h)*b)}}l.push(d(h))}for(h=0;l[h]<m[0];h++){}for(g=l.length;l[g-1]>m[1];g--){}return l.slice(h,g)};f.tickFormat=function(b){return b.toPrecision(1)};f.nice=function(){var b=f.domain();return f.domain(pv.logFloor(b[0],a),pv.logCeil(b[1],a))};f.base=function(b){if(arguments.length){a=Number(b);e=Math.log(a);f.transform(c,d);return this}return a};f.domain.apply(f,arguments);return f.base(10)};pv.Scale.root=function(){var a=pv.Scale.quantitative();a.power=function(d){if(arguments.length){var c=Number(d),e=1/c;a.transform(function(b){return Math.pow(b,e)},function(b){return Math.pow(b,c)});return this}return c};a.domain.apply(a,arguments);return a.power(2)};pv.Scale.ordinal=function(){var f=[],a={},b=[],e=0;function c(d){if(!(d in a)){a[d]=f.push(d)-1}return b[a[d]%b.length]}c.domain=function(k,h){if(arguments.length){k=(k instanceof Array)?((arguments.length>1)?pv.map(k,h):k):Array.prototype.slice.call(arguments);f=[];var d={};for(var g=0;g<k.length;g++){var i=k[g];if(!(i in d)){d[i]=true;f.push(i)}}a=pv.numerate(f);return this}return f};c.range=function(g,d){if(arguments.length){b=(g instanceof Array)?((arguments.length>1)?pv.map(g,d):g):Array.prototype.slice.call(arguments);if(typeof b[0]=="string"){b=b.map(pv.fillStyle)}b.min=b[0];b.max=b[b.length-1];return this}return b};c.split=function(g,d){var h=d-g;var j=this.domain().length;var i=0;if(h===0){b=pv.array(j,g)}else{if(j){i=(d-g)/j;b=pv.range(g+i/2,d,i)}}b.min=g;b.max=d;b.step=i;return this};c.splitBandedCenter=function(g,d,h){c.split(g,d);if(h==null){h=1}b.band=b.step*h;b.margin=b.step-b.band;b.min=g;b.max=d;return this};c.splitBandedFlushCenter=function(h,d,k){if(k==null){k=1}var i=(d-h),j=this.domain().length,g=0,m=0,l=0;if(i===0){b=pv.array(j,h)}else{if(j){m=(i*k)/j;l=j>1?((i-j*m)/(j-1)):0;g=l+m;b=pv.range(h+m/2,d,g)}}b.step=g;b.band=m;b.margin=l;b.min=h;b.max=d;return this};c.splitFlush=function(g,d){var i=this.domain().length,h=(d-g)/(i-1);b=(i==1)?[(g+d)/2]:pv.range(g,d+h/2,h);b.min=g;b.max=d;return this};c.splitBanded=function(g,d,l){if(arguments.length<3){l=1}if(l<0){var m=this.domain().length,j=-l*m,h=d-g-j,k=h/(m+1);b=pv.range(g+k,d,k-l);b.band=-l}else{var i=(d-g)/(this.domain().length+(1-l));b=pv.range(g+i*(1-l),d,i);b.band=i*l;b.step=i;b.margin=i-b.band}b.min=g;b.max=d;return this};c.invertIndex=function(m,d){var l=this.domain().length;if(l===0){return -1}var k=this.range();var j=k.max-k.min;if(j===0){return 0}var h=j/l;if(m>=k.max){return l}if(m<k.min){return 0}var g=(m-k.min)/h;return d?g:Math.round(g)};pv.copyOwn(c,pv.Scale.common);c.domain.apply(c,arguments);return c};pv.Scale.quantile=function(){var g=-1,a=-1,b=[],e=[],f=pv.Scale.linear();function c(d){return f(Math.max(0,Math.min(a,pv.search.index(b,d)-1))/a)}c.quantiles=function(d){if(arguments.length){g=Number(d);if(g<0){b=[e[0]].concat(e);a=e.length-1}else{b=[];b[0]=e[0];for(var h=1;h<=g;h++){b[h]=e[~~(h*(e.length-1)/g)]}a=g-1}return this}return b};c.domain=function(h,d){if(arguments.length){e=(h instanceof Array)?pv.map(h,d):Array.prototype.slice.call(arguments);e.sort(pv.naturalOrder);c.quantiles(g);return this}return e};c.range=function(){if(arguments.length){f.range.apply(f,arguments);return this}return f.range()};pv.copyOwn(c,pv.Scale.common);c.domain.apply(c,arguments);return c};pv.histogram=function(b,a){var c=true;return{bins:function(k){var d=pv.map(b,a),h=[];if(!arguments.length){k=pv.Scale.linear(d).ticks()}for(var g=0;g<k.length-1;g++){var f=h[g]=[];f.x=k[g];f.dx=k[g+1]-k[g];f.y=0}for(var g=0;g<d.length;g++){var e=pv.search.index(k,d[g])-1,f=h[Math.max(0,Math.min(h.length-1,e))];f.y++;f.push(b[g])}if(!c){for(var g=0;g<h.length;g++){h[g].y/=d.length}}return h},frequency:function(d){if(arguments.length){c=Boolean(d);return this}return c}}};(function(){pv.Shape=function(){};var b={x:1,y:1};pv.Shape.dist2=function(j,g,i){i=i||b;var h=j.x-g.x;var f=j.y-g.y;var l=h*h;var e=f*f;return{cost:l+e,dist2:i.x*l+i.y*e}};var d=Math.PI;var c=2*d;var a=Math.atan2;pv.Shape.normalizeAngle=function(e){e=e%c;if(e<0){e+=c}return e};pv.Shape.atan2Norm=function(f,g){var e=a(f,g);if(e<0){e+=c}return e};pv.Shape.prototype.hasArea=function(){return true}}());(function(){var c=pv.Shape.dist2;var e=Math.cos;var a=Math.sin;var d=Math.sqrt;pv.vector=function(f,g){return new b(f,g)};pv.Vector=function(f,g){this.x=f;this.y=g};var b=pv.Shape.Point=pv.Vector;pv.Vector.prototype=pv.extend(pv.Shape);pv.Vector.prototype.perp=function(){return new b(-this.y,this.x)};pv.Vector.prototype.rotate=function(g){var h=e(g);var f=a(g);return new b(h*this.x-f*this.y,f*this.x+h*this.y)};pv.Vector.prototype.norm=function(){var f=this.length();return this.times(f?(1/f):1)};pv.Vector.prototype.length=function(){return d(this.x*this.x+this.y*this.y)};pv.Vector.prototype.times=function(f){return new b(this.x*f,this.y*f)};pv.Vector.prototype.plus=function(f,g){return(arguments.length==1)?new b(this.x+f.x,this.y+f.y):new b(this.x+f,this.y+g)};pv.Vector.prototype.minus=function(f,g){return(arguments.length==1)?new b(this.x-f.x,this.y-f.y):new b(this.x-f,this.y-g)};pv.Vector.prototype.dot=function(f,g){return(arguments.length==1)?this.x*f.x+this.y*f.y:this.x*f+this.y*g};pv.Vector.prototype.hasArea=function(){return false};pv.Vector.prototype.clone=function(){return new b(this.x,this.y)};pv.Vector.prototype.apply=function(f){return new b(f.x+(f.k*this.x),f.y+(f.k*this.y))};pv.Vector.prototype.intersectsRect=function(f){return(this.x>=f.x)&&(this.x<=f.x2)&&(this.y>=f.y)&&(this.y<=f.y2)};pv.Vector.prototype.containsPoint=function(f){return(this.x===f.x)&&(this.y===f.y)};pv.Vector.prototype.points=function(){return[this]};pv.Vector.prototype.edges=function(){return[]};pv.Vector.prototype.center=function(){return this};pv.Vector.prototype.distance2=function(g,f){return c(this,g,f)}}());(function(){var b=pv.Shape.Point;var a=pv.Shape.dist2;pv.Shape.Line=function(d,g,e,f){this.x=d||0;this.y=g||0;this.x2=e||0;this.y2=f||0};var c=pv.Shape.Line;c.prototype=pv.extend(pv.Shape);c.prototype.hasArea=function(){return false};c.prototype.clone=function(){return new c(this.x,this.y,this.x2,this.x2)};c.prototype.apply=function(g){var d=g.x+(g.k*this.x);var h=g.y+(g.k*this.y);var e=g.x+(g.k*this.x2);var f=g.y+(g.k*this.y2);return new c(d,h,e,f)};c.prototype.points=function(){return[new b(this.x,this.y),new b(this.x2,this.y2)]};c.prototype.edges=function(){return[this]};c.prototype.center=function(){return new b((this.x+this.x2)/2,(this.y+this.y2)/2)};c.prototype.normal=function(d,g){var f=this.points();var e=f[1].minus(f[0]).perp().norm();if(g){var h=f[0].minus(g);if(h.dot(e)<0){e=e.times(-1)}}return e};c.prototype.intersectsRect=function(h){var f,d;var g=this.points();d=g.length;for(f=0;f<d;f++){if(g[f].intersectsRect(h)){return true}}var e=h.edges();d=e.length;for(f=0;f<d;f++){if(this.intersectsLine(e[f])){return true}}return false};c.prototype.containsPoint=function(g){var d=this.x;var e=this.x2;var h=this.y;var f=this.y2;return d<=g.x&&g.x<=e&&((d===e)?(Math.min(h,f)<=g.y&&g.y<=Math.max(h,f)):(Math.abs((f-h)/(e-d)*(g.x-d)+h-g.y)<=1e-10))};c.prototype.intersectsLine=function(k){var m=this,i=m.x2-m.x,l=m.y2-m.y,n=k.x2-k.x,p=k.y2-k.y,g=p*i-n*l;if(g===0){return false}var e=m.y-k.y,o=m.x-k.x,j=(n*e-p*o),h=(i*e-l*o);if(g===0){return(j===0)&&(h===0)}var f=j/g;if(f<0||f>1){return false}var d=h/g;if(d<0||d>1){return false}return true};c.prototype.distance2=function(d,g){var l=this;var j={x:this.x2,y:this.y2};var e=a(l,j).dist2;if(e<=1e-10){return a(d,l,g)}var i=j.x-l.x;var h=j.y-l.y;var m=((d.x-l.x)*i+(d.y-l.y)*h)/e;if(m<0){return a(d,l,g)}if(m>1){return a(d,j,g)}var f={x:l.x+m*i,y:l.y+m*h};return a(d,f,g)}}());(function(){var b=pv.Shape.Point;var c=pv.Shape.Line;pv.Shape.Polygon=function(d){this._points=d||[]};var a=pv.Shape.Polygon;a.prototype=pv.extend(pv.Shape);a.prototype.points=function(){return this._points};a.prototype.clone=function(){return new a(this.points().slice())};a.prototype.apply=function(g){var h=this.points();var d=h.length;var e=new Array(d);for(var f=0;f<d;f++){e[f]=h[f].apply(g)}return new a(e)};a.prototype.intersectsRect=function(h){var f,d;var g=this.points();d=g.length;for(f=0;f<d;f++){if(g[f].intersectsRect(h)){return true}}var e=this.edges();d=e.length;for(f=0;f<d;f++){if(e[f].intersectsRect(h)){return true}}return false};a.prototype.edges=function(){var g=this._edges;if(!g){g=this._edges=[];var j=this.points();var e=j.length;if(e){var f=j[0];var k=f;var d;for(var h=1;h<e;h++){d=j[h];g.push(new c(f.x,f.y,d.x,d.y));f=d}if(e>2){g.push(new c(d.x,d.y,k.x,k.y))}}}return g};a.prototype.distance2=function(f,d){var e={cost:Infinity,dist2:Infinity};this.edges().forEach(function(g){var h=g.distance2(f,d);if(h.cost<e.cost){e=h}},this);return e};a.prototype.center=function(){var g=this.points();var e=0;var j=0;for(var f=0,d=g.length;f<d;f++){var h=g[f];e+=h.x;j+=h.y}return new b(e/d,j/d)};a.prototype.containsPoint=function(i){var j=this.bbox();if(!j.containsPoint(i)){return false}var h=j.dx*0.01;var d=new c(j.x-h,i.y,i.x,i.y);var g=0;var f=this.edges();f.forEach(function(e){if(e.intersectsLine(d)){g++}});return(g&1)===1};a.prototype.bbox=function(){var f=this._bbox;if(!f){var e,d;this.points().forEach(function(g,h){if(e==null){e={x:g.x,y:g.y}}else{if(g.x<e.x){e.x=g.x}if(g.y<e.y){e.y=g.y}}if(d==null){d={x:g.x,y:g.y}}else{if(g.x>d.x){d.x=g.x}if(g.y>d.y){d.y=g.y}}});if(e){f=this._bbox=new pv.Shape.Rect(e.x,e.y,d.x-e.x,d.y-e.y)}}return f}}());(function(){var b=pv.Shape.Point;var c=pv.Shape.Line;pv.Shape.Rect=function(d,g,f,e){this.x=d||0;this.y=g||0;this.dx=f||0;this.dy=e||0;if(this.dx<0){this.dx=-this.dx;this.x=this.x-this.dx}if(this.dy<0){this.dy=-this.dy;this.y=this.y-this.dy}this.x2=this.x+this.dx;this.y2=this.y+this.dy};var a=pv.Shape.Rect;a.prototype=pv.extend(pv.Shape.Polygon);a.prototype.clone=function(){var d=Object.create(a.prototype);d.x=this.x;d.y=this.y;d.dx=this.dx;d.dy=this.dy;d.x2=this.x2;d.y2=this.y2;return d};a.prototype.apply=function(g){var d=g.x+(g.k*this.x);var h=g.y+(g.k*this.y);var f=g.k*this.dx;var e=g.k*this.dy;return new a(d,h,f,e)};a.prototype.containsPoint=function(d){return this.x<=d.x&&d.x<=this.x2&&this.y<=d.y&&d.y<=this.y2};a.prototype.intersectsRect=function(d){return(this.x2>d.x)&&(this.x<d.x2)&&(this.y2>d.y)&&(this.y<d.y2)};a.prototype.edges=function(){if(!this._edges){var d=this.x,g=this.y,e=this.x2,f=this.y2;this._edges=[new c(d,g,e,g),new c(e,g,e,f),new c(e,f,d,f),new c(d,f,d,g)]}return this._edges};a.prototype.center=function(){return new b(this.x+this.dx/2,this.y+this.dy/2)};a.prototype.points=function(){var g=this._points;if(!g){var d=this.x,h=this.y,e=this.x2,f=this.y2;g=this._points=[new b(d,h),new b(e,h),new b(e,f),new b(d,f)]}return g};a.prototype.bbox=function(){return this.clone()}}());(function(){var e=pv.Shape.Point;var d=pv.Shape.dist2;var f=Math.sqrt;var a=Math.abs;var c=Math.pow;pv.Shape.Circle=function(h,i,g){this.x=h||0;this.y=i||0;this.radius=g||0};var b=pv.Shape.Circle;b.prototype=pv.extend(pv.Shape);b.prototype.clone=function(){return new b(this.x,this.y,this.radius)};b.prototype.apply=function(h){var g=h.x+(h.k*this.x);var j=h.y+(h.k*this.y);var i=h.k*this.radius;return new b(g,j,i)};b.prototype.intersectsRect=function(k){var l=k.dx/2,g=k.dy/2,j=this.radius;var i=a(this.x-k.x-l),h=a(this.y-k.y-g);if((i>l+j)||(h>g+j)){return false}if(i<=l||h<=g){return true}var m=c(i-l,2)+c(h-g,2);return m<=j*j};b.prototype.intersectLine=function(w,i){var q=w.x2-w.x;var p=w.y2-w.y;var u=this.x-w.x;var t=this.y-w.y;var j=q*q+p*p;var n=q*u+p*t;var h=this.radius;var o=u*u+t*t-h*h;var s=n/j;var k=s*s-o/j;if(k<0){return}var v=f(k);var m=s-v;var l=s+v;var g=[];if(i||(m>=0&&m<=1)){g.push(new e(w.x+q*m,w.y+p*m))}if(k!==0){if(i||(l>=0&&l<=1)){g.push(new e(w.x+q*l,w.y+p*l))}}return g};b.prototype.points=function(){return[this.center()]};b.prototype.center=function(){return new e(this.x,this.y)};b.prototype.normal=function(g){return g.minus(this.x,this.y).norm()};b.prototype.containsPoint=function(j){var h=j.x-this.x,g=j.y-this.y,i=this.radius;return h*h+g*g<=i*i};b.prototype.distance2=function(m,j){var i=m.x-this.x,h=m.y-this.y,l=this.radius;var g=m.minus(this).norm().times(l).plus(this);var n=d(m,g,j);return n}}());(function(){var d=pv.Shape.Point;var b=pv.Shape.dist2;var g=pv.Shape.normalizeAngle;var e=pv.Shape.atan2Norm;var i=Math.cos;var f=Math.sin;var h=Math.sqrt;pv.Shape.Arc=function(k,n,j,m,l){this.x=k;this.y=n;this.radius=j;this.startAngle=g(m);this.angleSpan=g(l);this.endAngle=this.startAngle+this.angleSpan};var a=pv.Shape.Arc;a.prototype=pv.extend(pv.Shape);a.prototype.hasArea=function(){return false};a.prototype.clone=function(){var j=Object.create(a.prototype);var k=this;j.x=k.x;j.y=k.y;j.radius=k.radius;j.startAngle=k.startAngle;j.angleSpan=k.angleSpan;j.endAngle=k.endAngle;return j};a.prototype.apply=function(k){var j=k.x+(k.k*this.x);var m=k.y+(k.k*this.y);var l=k.k*this.radius;return new a(j,m,l,this.startAngle,this.angleSpan)};a.prototype.containsPoint=function(n){var l=n.x-this.x;var k=n.y-this.y;var m=h(l*l+k*k);if(Math.abs(m-this.radius)<=1e-10){var j=e(k,l);return this.startAngle<=j&&j<=this.endAngle}return false};a.prototype.intersectsRect=function(n){var l,j;var m=this.points();var j=m.length;for(l=0;l<j;l++){if(m[l].intersectsRect(n)){return true}}var k=n.edges();j=k.length;for(l=0;l<j;l++){if(this.intersectLine(k[l])){return true}}return false};var c=pv.Shape.Circle.prototype.intersectLine;a.prototype.intersectLine=function(j,k){var l=c.call(this,j,k);if(l){l=l.filter(function(m){return this.containsPoint(m)},this);if(l.length){return l}}};a.prototype.points=function(){var k=this.x;var n=this.y;var m=this.radius;var j=this.startAngle;var l=this.endAngle;return[new d(k+m*i(j),n+m*f(j)),new d(k+m*i(l),n+m*f(l))]};a.prototype.center=function(){var j=this.x;var m=this.y;var k=this.radius;var l=(this.startAngle+this.endAngle)/2;return new d(j+k*i(l),m+k*f(l))};a.prototype.normal=function(j,l){var k=j.minus(this.x,this.y).norm();if(l){var m=this.center().minus(l);if(m.dot(k)<0){k=k.times(-1)}}return k};a.prototype.distance2=function(m,n){var t=m.x-this.x;var s=m.y-this.y;var q=e(s,t);if(this.startAngle<=q&&q<=this.endAngle){var o=new d(this.x+this.radius*i(q),this.y+this.radius*f(q));return b(m,o,n)}var r=this.points();var l=b(m,r[0],n);var j=b(m,r[1],n);return l.cost<j.cost?l:j}}());(function(){var a=pv.Shape.Arc;var b=pv.Shape.Line;var d=pv.Shape.Point;var i=Math.cos;var f=Math.sin;var h=Math.sqrt;var e=pv.Shape.atan2Norm;var g=pv.Shape.normalizeAngle;pv.Shape.Wedge=function(j,o,n,m,l,k){this.x=j;this.y=o;this.innerRadius=n;this.outerRadius=m;this.startAngle=g(l);this.angleSpan=g(k);this.endAngle=this.startAngle+this.angleSpan};var c=pv.Shape.Wedge;c.prototype=pv.extend(pv.Shape);c.prototype.clone=function(){return new c(this.x,this.y,this.innerRadius,this.outerRadius,this.startAngle,this.angleSpan)};c.prototype.apply=function(k){var j=k.x+(k.k*this.x);var n=k.y+(k.k*this.y);var l=k.k*this.innerRadius;var m=k.k*this.outerRadius;return new c(j,n,l,m,this.startAngle,this.angleSpan)};c.prototype.containsPoint=function(n){var l=n.x-this.x;var k=n.y-this.y;var m=h(l*l+k*k);if(m>=this.innerRadius&&m<=this.outerRadius){var j=e(k,l);return this.startAngle<=j&&j<=this.endAngle}return false};c.prototype.intersectsRect=function(n){var l,j;var m=this.points();j=m.length;for(l=0;l<j;l++){if(m[l].intersectsRect(n)){return true}}m=n.points();j=m.length;for(l=0;l<j;l++){if(this.containsPoint(m[l])){return true}}var k=this.edges();j=k.length;for(l=0;l<j;l++){if(k[l].intersectsRect(n)){return true}}return false};c.prototype.points=function(){if(!this._points){this.edges()}return this._points};c.prototype.edges=function(){var p=this._edges;if(!p){var v=this.x;var u=this.y;var r=this.innerRadius;var q=this.outerRadius;var t=this.startAngle;var z=this.endAngle;var k=this.angleSpan;var l=i(t);var s=f(t);var o=i(z);var w=f(z);var m,n;if(r>0){m=new d(v+r*l,u+r*s);n=new d(v+r*o,u+r*w)}else{m=n=new d(v,u)}var B=new d(v+q*l,u+q*s);var j=new d(v+q*o,u+q*w);p=this._edges=[];if(r>0){p.push(new a(v,u,r,t,k))}p.push(new b(m.x,m.y,B.x,B.y),new a(v,u,q,t,k),new b(n.x,n.y,j.x,j.y));var A=this._points=[m,B,j];if(r>0){A.push(n)}}return p};c.prototype.distance2=function(m,j){var l={cost:Infinity,dist2:Infinity};this.edges().forEach(function(k){var n=k.distance2(m,j);if(n.cost<l.cost){l=n}});return l};c.prototype.center=function(){var k=(this.startAngle+this.endAngle)/2;var j=(this.innerRadius+this.outerRadius)/2;return new d(this.x+j*i(k),this.y+j*f(k))}}());(function(){var b=Math.round;var a=function(h){var g=parseFloat(h);return(h[h.length-1]=="%")?b(g*2.55):g};var e=/([a-z]+)\((.*)\)/i;var c=function(o){if(o.charAt(0)==="#"){var f,k,m;if(o.length===4){f=o.charAt(1);f+=f;k=o.charAt(2);k+=k;m=o.charAt(3);m+=m}else{if(o.length===7){f=o.substring(1,3);k=o.substring(3,5);m=o.substring(5,7)}}return pv.rgb(parseInt(f,16),parseInt(k,16),parseInt(m,16),1)}var q=e.exec(o);if(q){var p=q[2].split(","),n=1;switch(q[1]){case"hsla":case"rgba":n=parseFloat(p[3]);if(!n){return pv.Color.transparent}break}switch(q[1]){case"hsla":case"hsl":var j=parseFloat(p[0]),t=parseFloat(p[1])/100,i=parseFloat(p[2])/100;return(new pv.Color.Hsl(j,t,i,n)).rgb();case"rgba":case"rgb":var f=a(p[0]),k=a(p[1]),m=a(p[2]);return pv.rgb(f,k,m,n)}}return new pv.Color(o,1)};var d={};pv.color=function(g){if(g.rgb){return g.rgb()}var f=pv.Color.names[g];if(!f){f=d[g]||(d[g]=c(g))}return f}}());pv.Color=function(a,b){this.color=a;this.opacity=b;this.key="solid "+a+" alpha("+b+")"};pv.Color.prototype.hsl=function(){return this.rgb().hsl()};pv.Color.prototype.brighter=function(a){return this.rgb().brighter(a)};pv.Color.prototype.darker=function(a){return this.rgb().darker(a)};pv.Color.prototype.alphaBlend=function(e){var c=this.rgb();var b=c.a;if(b===1){return this}if(!e){e=pv.Color.names.white}else{e=pv.color(e)}e=e.rgb();var d=(1-b);return pv.rgb(d*c.r+b*e.r,d*c.g+b*e.g,d*c.b+b*e.b,1)};pv.Color.prototype.rgbDecimal=function(b){var a=this.alphaBlend(b);return a.r<<16|a.g<<8|a.b};pv.Color.prototype.isDark=function(){return this.rgbDecimal()<16777215/2};pv.rgb=function(f,e,c,d){return new pv.Color.Rgb(f,e,c,(arguments.length==4)?d:1)};pv.Color.Rgb=function(f,e,c,d){pv.Color.call(this,d?("rgb("+f+","+e+","+c+")"):"none",d);this.r=f;this.g=e;this.b=c;this.a=d};pv.Color.Rgb.prototype=pv.extend(pv.Color);pv.Color.Rgb.prototype.red=function(a){return pv.rgb(a,this.g,this.b,this.a)};pv.Color.Rgb.prototype.green=function(a){return pv.rgb(this.r,a,this.b,this.a)};pv.Color.Rgb.prototype.blue=function(a){return pv.rgb(this.r,this.g,a,this.a)};pv.Color.Rgb.prototype.alpha=function(b){return pv.rgb(this.r,this.g,this.b,b)};pv.Color.Rgb.prototype.rgb=function(){return this};pv.Color.Rgb.prototype.brighter=function(c){c=Math.pow(0.7,c!=null?c:1);var f=this.r,e=this.g,a=this.b,d=30;if(!f&&!e&&!a){return pv.rgb(d,d,d,this.a)}if(f&&(f<d)){f=d}if(e&&(e<d)){e=d}if(a&&(a<d)){a=d}return pv.rgb(Math.min(255,Math.floor(f/c)),Math.min(255,Math.floor(e/c)),Math.min(255,Math.floor(a/c)),this.a)};pv.Color.Rgb.prototype.darker=function(a){a=Math.pow(0.7,a!=null?a:1);return pv.rgb(Math.max(0,Math.floor(a*this.r)),Math.max(0,Math.floor(a*this.g)),Math.max(0,Math.floor(a*this.b)),this.a)};pv.Color.Rgb.prototype.hsl=function(){var a=this.r/255;var i=this.g/255;var k=this.b/255;var m=Math.max(a,i,k);var e=Math.min(a,i,k);var c=(m+e)/2;var f,n;if(m===e){f=n=0}else{var j=m-e;n=c>0.5?j/(2-m-e):j/(m+e);switch(m){case a:f=(i-k)/j+(i<k?6:0);break;case i:f=(k-a)/j+2;break;case k:f=(a-i)/j+4;break}f/=6}return pv.hsl(f*360,n,c,this.a)};pv.Color.Rgb.prototype.complementary=function(){return this.hsl().complementary().rgb()};pv.hsl=function(e,d,c,b){return new pv.Color.Hsl(e,d,c,(arguments.length==4)?b:1)};pv.Color.Hsl=function(e,d,c,b){pv.Color.call(this,"hsl("+e+","+(d*100)+"%,"+(c*100)+"%)",b);this.h=e;this.s=d;this.l=c;this.a=b};pv.Color.Hsl.prototype=pv.extend(pv.Color);pv.Color.Hsl.prototype.hsl=function(){return this};pv.Color.Hsl.prototype.hue=function(a){return pv.hsl(a,this.s,this.l,this.a)};pv.Color.Hsl.prototype.saturation=function(a){return pv.hsl(this.h,a,this.l,this.a)};pv.Color.Hsl.prototype.lightness=function(a){return pv.hsl(this.h,this.s,a,this.a)};pv.Color.Hsl.prototype.alpha=function(b){return pv.hsl(this.h,this.s,this.l,b)};pv.Color.Hsl.prototype.complementary=function(){return pv.hsl((this.h+180)%360,1-this.s,1-this.l,this.a)};pv.Color.Hsl.prototype.rgb=function(){var f=this.h,e=this.s,a=this.l;f=f%360;if(f<0){f+=360}e=Math.max(0,Math.min(e,1));a=Math.max(0,Math.min(a,1));var c=(a<=0.5)?(a*(1+e)):(a+e-a*e);var d=2*a-c;function b(i){if(i>360){i-=360}else{if(i<0){i+=360}}if(i<60){return d+(c-d)*i/60}if(i<180){return c}if(i<240){return d+(c-d)*(240-i)/60}return d}function g(i){return Math.round(b(i)*255)}return pv.rgb(g(f+120),g(f),g(f-120),this.a)};pv.Color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:pv.Color.transparent=pv.rgb(0,0,0,0)};(function(){var b=pv.Color.names;b.none=b.transparent;for(var a in b){b[a]=pv.color(b[a])}})();pv.colors=function(){var a=pv.Scale.ordinal();a.range.apply(a,arguments);return a};pv.Colors={};pv.Colors.category10=function(){var a=pv.colors("#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf");a.domain.apply(a,arguments);return a};pv.Colors.category20=function(){var a=pv.colors("#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5");a.domain.apply(a,arguments);return a};pv.Colors.category19=function(){var a=pv.colors("#9c9ede","#7375b5","#4a5584","#cedb9c","#b5cf6b","#8ca252","#637939","#e7cb94","#e7ba52","#bd9e39","#8c6d31","#e7969c","#d6616b","#ad494a","#843c39","#de9ed6","#ce6dbd","#a55194","#7b4173");a.domain.apply(a,arguments);return a};(function(){pv.fillStyle=function(p){if(p.type){return p}var o=p.key||p;var n=b[o];if(!n){n=b[o]=d(p)}else{n=n.clone()}return n};var b={};var d=function(o){if(o.rgb){return new pv.FillStyle.Solid(o.color,o.opacity)}var n=/^\s*([a-z\-]+)\(\s*(.*?)\s*\)\s*$/.exec(o);if(n){switch(n[1]){case"linear-gradient":return i(n[2]);case"radial-gradient":return c(n[2])}}return new pv.FillStyle.Solid(pv.color(o))};var k={top:0,"top right":45,right:90,"bottom right":135,bottom:180,"bottom left":225,left:270,"top left":315};function i(t){var q=j(t);if(!q.length){return null}var s=Math.PI;var u;var n,r;var o=q[0];if(o.indexOf("to ")===0){n=/^to\s+(?:((top|bottom)(?:\s+(left|right))?)|((left|right)(?:\\s+(top|bottom))?))$/.exec(o);if(n){if(n[1]){u=n[2];if(n[3]){u+=" "+n[3]}}else{u=n[5];if(n[6]){u=n[6]+" "+u}}s=pv.radians(k[u]);q.shift()}}else{r=parseFloat(o);if(!isNaN(r)){s=r;if(/^.*?deg$/.test(o)){s=pv.radians(s)}q.shift()}}var p=g(q);switch(p.length){case 0:return null;case 1:return new pv.FillStyle.Solid(p[0].color,1)}return new pv.FillStyle.LinearGradient(s,p,t)}function c(p){var o=j(p);if(!o.length){return null}var n=g(o);switch(n.length){case 0:return null;case 1:return new pv.FillStyle.Solid(n[0].color,1)}return new pv.FillStyle.RadialGradient(50,50,n,p)}function j(q){var p={};var n=0;q=q.replace(/\b\w+?\(.*?\)/g,function(r){var s="__color"+(n++);p[s]=r;return s});var o=q.split(/\s*,\s*/);if(!o.length){return null}if(n){o.forEach(function(s,r){if(p.hasOwnProperty(s)){o[r]=p[s]}})}return o}function g(s){var B=[];var o=+Infinity;var u=-Infinity;var w=[];function A(E){var G=w.length;if(G){var C=u;var F=(E-C)/(G+1);for(var D=0;D<G;D++){C+=F;w[D].offset=C}w.length=0}}var t=0;var r=s.length;while(t<r){var q=s[t++];var p=/^(.+?)\s*([+\-]?[e\.\d]+%)?$/i.exec(q);if(p){var y={color:pv.color(p[1])};var n=parseFloat(p[2]);if(isNaN(n)){if(!B.length){n=0}else{if(t===r){n=Math.max(u,100)}}}B.push(y);if(isNaN(n)){w.push(y)}else{y.offset=n;A(n);if(n>u){u=n}else{if(n<u){n=u}}if(n<o){o=n}}}}if(B.length>=2&&(o<0||u>100)){var z=[];var x=[];B.forEach(function(C){z.push(C.offset);x.push(C.color)});var v=pv.scale.linear().domain(z).range(x);if(o<0){while(B.length&&B[0].offset<=0){B.shift()}B.unshift({offset:0,color:v(0)})}if(u>100){while(B.length&&B[B.length-1].offset>=100){B.pop()}B.push({offset:100,color:v(100)})}}return B}var a=pv.FillStyle=function(n){this.type=n;this.key=n};pv.extendType(a,new pv.Color("none",1));a.prototype.rgb=function(){var n=pv.color(this.color);if(this.opacity!==n.opacity){n=n.alpha(this.opacity)}return n};a.prototype.alphaBlend=function(n){return this.rgb().alphaBlend(n)};a.prototype.rgbDecimal=function(n){return this.rgb().rgbDecimal(n)};a.prototype.isDark=function(){return this.rgb().isDark()};var e=pv.FillStyle.Solid=function(n,o){a.call(this,"solid");if(n.rgb){this.color=n.color;this.opacity=n.opacity}else{this.color=n;this.opacity=o}this.key+=" "+this.color+" alpha("+this.opacity+")"};pv.extendType(e,a);e.prototype.alpha=function(n){return new e(this.color,n)};e.prototype.brighter=function(n){return new e(this.rgb().brighter(n))};e.prototype.darker=function(n){return new e(this.rgb().darker(n))};e.prototype.complementary=function(){return new e(this.rgb().complementary())};e.prototype.clone=function(){var n=pv.extend(e);n.type=this.type;n.key=this.key;n.color=this.color;n.opacity=this.opacity;return n};pv.FillStyle.transparent=new e(pv.Color.transparent);var h=0;var f=pv.FillStyle.Gradient=function(n,o){a.call(this,n);this.id=++h;this.stops=o;if(o.length){this.color=o[0].color.color}this.key+=" stops("+o.map(function(q){var p=q.color;return p.color+" alpha("+p.opacity+") at("+q.offset+")"}).join(", ")+")"};pv.extendType(f,a);f.prototype.rgb=function(){return this.stops.length?this.stops[0].color:undefined};f.prototype.alpha=function(n){return this._cloneWithStops(this.stops.map(function(o){return{offset:o.offset,color:o.color.alpha(n)}}))};f.prototype.darker=function(n){return this._cloneWithStops(this.stops.map(function(o){return{offset:o.offset,color:o.color.darker(n)}}))};f.prototype.brighter=function(n){return this._cloneWithStops(this.stops.map(function(o){return{offset:o.offset,color:o.color.brighter(n)}}))};f.prototype.complementary=function(){return this._cloneWithStops(this.stops.map(function(n){return{offset:n.offset,color:n.color.complementary()}}))};f.prototype.alphaBlend=function(n){return this._cloneWithStops(this.stops.map(function(o){return{offset:o.offset,color:o.color.alphaBlend(n)}}))};f.prototype.clone=function(){var n=this.constructor;var q=pv.extend(n);q.constructor=n;q.id=++h;q.type=this.type;q.key=this.key;var p=this.stops;q.stops=p;if(p.length){q.color=p[0].color.color}this._initClone(q);return q};var l=pv.FillStyle.LinearGradient=function(o,n){f.call(this,"lineargradient",n);this.angle=o;this.key+=" angle("+o+")"};pv.extendType(l,f);l.prototype._cloneWithStops=function(n){return new l(this.angle,n)};l.prototype._initClone=function(n){n.angle=this.angle};var m=pv.FillStyle.RadialGradient=function(n,p,o){f.call(this,"radialgradient",o);this.cx=n;this.cy=p;this.key+=" center("+n+","+p+")"};pv.extendType(m,f);m.prototype._cloneWithStops=function(n){return new m(this.cx,this.cy,n)};m.prototype._initClone=function(n){n.cx=this.cx;n.cy=this.cy}})();pv.ramp=function(c,a){var b=pv.Scale.linear();b.range.apply(b,arguments);return b};pv.Scene=pv.SvgScene={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml",scale:1,events:["DOMMouseScroll","mousewheel","mousedown","mouseup","mouseover","mouseout","mousemove","click","dblclick"],implicit:{svg:{"shape-rendering":"auto","pointer-events":"painted",x:0,y:0,dy:0,"text-anchor":"start",transform:"translate(0,0)",fill:"none","fill-opacity":1,stroke:"none","stroke-opacity":1,"stroke-width":1.5,"stroke-linejoin":"miter","stroke-linecap":"butt","stroke-miterlimit":8,"stroke-dasharray":"none"},css:{font:"10px sans-serif"}}};pv.SvgScene.updateAll=function(a){if(a.length&&a[0].reverse&&(a.type!=="line")&&(a.type!=="area")){var d=pv.extend(a);for(var c=0,b=a.length-1;b>=0;c++,b--){d[c]=a[b]}a=d}this.removeSiblings(this[a.type](a))};pv.SvgScene.create=function(a){return document.createElementNS(this.svg,a)};pv.SvgScene.expect=function(h,g,a,d,b,f){var c;if(h){c=h.tagName;if(c==="defs"){h=h.nextSibling;if(h){c=h.tagName}}else{if(c==="a"){h=h.firstChild}}}if(h){if(c!==g){var j=this.create(g);h.parentNode.replaceChild(j,h);h=j}}else{h=this.create(g)}if(b){this.setAttributes(h,b)}if(f){this.setStyle(h,f)}return h};pv.SvgScene.setAttributes=function(f,a){var g=this.implicit.svg;var c=f.__attributes__;if(c===a){c=null}for(var b in a){var d=a[b];if(!c||(d!==c[b])){if(d==null||d==g[b]){f.removeAttribute(b)}else{f.setAttribute(b,d)}}}f.__attributes__=a};pv.SvgScene.setStyle=function(g,c){var a=this.implicit.css;var d=g.__style__;if(d===c){d=null}for(var b in c){var f=c[b];if(!d||(f!==d[b])){if(f==null||f==a[b]){g.style.removeProperty(b)}else{g.style[b]=f}}}g.__style__=c};pv.SvgScene.append=function(c,a,b){c.$scene={scenes:a,index:b};c=this.title(c,a[b]);if(!c.parentNode){a.$g.appendChild(c)}return c.nextSibling};pv.SvgScene.title=function(g,f){var b=g.parentNode;if(b&&(b.tagName!="a")){b=null}if(f.title){if(!b){b=this.create("a");b.setAttributeNS(this.xlink,"xlink:href","");if(g.parentNode){g.parentNode.replaceChild(b,g)}b.appendChild(g)}b.setAttributeNS(this.xlink,"xlink:title",f.title);var d=null;for(var h=g.firstChild;h!=null;h=h.nextSibling){if(h.nodeName=="title"){d=h;break}}if(!d){d=this.create("title");g.appendChild(d)}else{d.removeChild(d.firstChild)}d.appendChild(document.createTextNode(f.title));return b}if(b){b.parentNode.replaceChild(g,b)}return g};pv.SvgScene.dispatch=pv.listener(function(c){var a=c.target.$scene;if(a){var b=c.type;switch(b){case"DOMMouseScroll":b="mousewheel";c.wheel=-480*c.detail;break;case"mousewheel":c.wheel=(window.opera?12:1)*c.wheelDelta;break}if(pv.Mark.dispatch(b,a.scenes,a.index,c)){c.preventDefault();c.stopPropagation()}}});pv.SvgScene.removeSiblings=function(a){while(a){var b=a.nextSibling;if(a.nodeName!=="defs"){a.parentNode.removeChild(a)}a=b}};pv.SvgScene.undefined=function(){};(function(){var b={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};var a={shortdash:[3,1],shortdot:[1,1],shortdashdot:[3,1,1,1],shortdashdotdot:[3,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};pv.SvgScene.isStandardDashStyle=function(c){return a.hasOwnProperty(c)};pv.SvgScene.translateDashStyleAlias=function(c){return b.hasOwnProperty(c)?b[c]:c};pv.SvgScene.parseDasharray=function(f){var d=f.strokeDasharray;if(d&&d!=="none"){d=this.translateDashStyleAlias(d);var e=a[d];if(e){d=e}else{d=d.split(/[\s,]+/)}var c=f.lineWidth;var h=f.lineCap||"butt";var g=h==="butt";d=d.map(function(j,i){j=+j;if(!g){if(i%2){j++}else{j-=1}}if(j<=0){j=0.001}return j*c/this.scale},this).join(" ")}else{d=null}return d}})();(function(){var a=/^url\(#/;var d=1;var g=Math.PI/2;var e=g/2;var c=Math.SQRT2/2;var j=Math.abs;var h=Math.sin;var i=Math.cos;var f=function(k){return j(k)<=1e-12?0:k};pv.SvgScene.addFillStyleDefinition=function(l,r){if(!r.type||r.type==="solid"||a.test(r.color)){return}var q=l.mark.root;var o=q.__fillStyleMap__||(q.__fillStyleMap__={});var n=r.key;var m=o[n];if(!m){m=o[n]="__pvGradient"+(d++);var p=b.call(this,l,r,m);q.scene.$defs.appendChild(p)}r.color="url(#"+m+")"};var b=function(m,A,o){var p=(A.type==="lineargradient");var q=this.create(p?"linearGradient":"radialGradient");q.setAttribute("id",o);if(p){var k=A.angle-g;var v=j(k%g)-e;var l=j(c*i(v));var y=l*i(k);var x=l*h(k);q.setAttribute("x1",f(0.5-y));q.setAttribute("y1",f(0.5-x));q.setAttribute("x2",f(0.5+y));q.setAttribute("y2",f(0.5+x))}var z=A.stops;var t=z.length;for(var u=0;u<t;u++){var w=z[u];var n=q.appendChild(this.create("stop"));var s=w.color;n.setAttribute("offset",w.offset+"%");n.setAttribute("stop-color",s.color);n.setAttribute("stop-opacity",s.opacity+"")}return q}})();pv.SvgScene.pathBasis=(function(){var c=[[1/6,2/3,1/6,0],[0,2/3,1/3,0],[0,1/3,2/3,0],[0,1/6,2/3,1/6]];function a(d,h,g,f,e){return{x:d[0]*h.left+d[1]*g.left+d[2]*f.left+d[3]*e.left,y:d[0]*h.top+d[1]*g.top+d[2]*f.top+d[3]*e.top}}var b=function(j,i,h,g){var f=a(c[1],j,i,h,g),e=a(c[2],j,i,h,g),d=a(c[3],j,i,h,g);return"C"+f.x+","+f.y+","+e.x+","+e.y+","+d.x+","+d.y};b.segment=function(k,j,i,h){var g=a(c[0],k,j,i,h),f=a(c[1],k,j,i,h),e=a(c[2],k,j,i,h),d=a(c[3],k,j,i,h);return["M"+g.x+","+g.y,"C"+f.x+","+f.y+","+e.x+","+e.y+","+d.x+","+d.y]};return b})();pv.SvgScene.curveBasis=function(g,d,e){var b;if(d==null){b=g.length;d=0;e=b-1}else{b=e-d+1}if(b<=2){return""}var k="",j=g[d],h=j,f=j,c=g[d+1];k+=this.pathBasis(j,h,f,c);for(var a=d+2;a<=e;a++){j=h;h=f;f=c;c=g[a];k+=this.pathBasis(j,h,f,c)}k+=this.pathBasis(h,f,c,c);k+=this.pathBasis(f,c,c,c);return k};pv.SvgScene.curveBasisSegments=function(j,f,g){var b;if(f==null){b=j.length;f=0;g=b-1}else{b=g-f+1}if(b<=2){return""}var m=[],l=j[f],k=l,h=l,e=j[f+1],c=this.pathBasis.segment(l,k,h,e);l=k;k=h;h=e;e=j[f+2];c[1]+=this.pathBasis(l,k,h,e);m.push(c);for(var a=f+3;a<=g;a++){l=k;k=h;h=e;e=j[a];m.push(this.pathBasis.segment(l,k,h,e))}var d=this.pathBasis.segment(k,h,e,e);d[1]+=this.pathBasis(h,e,e,e);m.push(d);return m};pv.SvgScene.curveHermite=function(l,h,j,k){var g;if(j==null){g=l.length;j=0;k=g-1}else{g=k-j+1}var b=h.length;if(b<1||(g!==b&&g!==b+2)){return""}var m=g!==b,q="",o=l[j],a=l[j+1],f=h[0],n=f,d=j+1;if(m){q+="Q"+(a.left-f.x*2/3)+","+(a.top-f.y*2/3)+","+a.left+","+a.top;o=l[j+1];d=j+2}if(b>1){n=h[1];a=l[d];d++;q+="C"+(o.left+f.x)+","+(o.top+f.y)+","+(a.left-n.x)+","+(a.top-n.y)+","+a.left+","+a.top;for(var c=2;c<b;c++,d++){a=l[d];n=h[c];q+="S"+(a.left-n.x)+","+(a.top-n.y)+","+a.left+","+a.top}}if(m){var e=l[d];q+="Q"+(a.left+n.x*2/3)+","+(a.top+n.y*2/3)+","+e.left+","+e.top}return q};pv.SvgScene.curveHermiteSegments=function(l,h,j,k){var g;if(j==null){g=l.length;j=0;k=g-1}else{g=k-j+1}var b=h.length;if(b<1||(g!==b&&g!==b+2)){return[]}var m=g!==b,q=[],o=l[j],a=o,f=h[0],n=f,d=j+1;if(m){a=l[j+1];q.push(["M"+o.left+","+o.top,"Q"+(a.left-n.x*2/3)+","+(a.top-n.y*2/3)+","+a.left+","+a.top]);d=j+2}for(var c=1;c<b;c++,d++){o=a;f=n;a=l[d];n=h[c];q.push(["M"+o.left+","+o.top,"C"+(o.left+f.x)+","+(o.top+f.y)+","+(a.left-n.x)+","+(a.top-n.y)+","+a.left+","+a.top])}if(m){var e=l[d];q.push(["M"+a.left+","+a.top,"Q"+(a.left+n.x*2/3)+","+(a.top+n.y*2/3)+","+e.left+","+e.top])}return q};pv.SvgScene.cardinalTangents=function(k,h,f,g){var c;if(f==null){c=k.length;f=0;g=c-1}else{c=g-f+1}var d=[],e=(1-h)/2,m=k[f],l=k[f+1],j=k[f+2];for(var b=f+3;b<=g;b++){d.push({x:e*(j.left-m.left),y:e*(j.top-m.top)});m=l;l=j;j=k[b]}d.push({x:e*(j.left-m.left),y:e*(j.top-m.top)});return d};pv.SvgScene.curveCardinal=function(c,b,e,d){var a;if(e==null){a=c.length;e=0;d=a-1}else{a=d-e+1}if(a<=2){return""}return this.curveHermite(c,this.cardinalTangents(c,b,e,d),e,d)};pv.SvgScene.curveCardinalSegments=function(c,b,e,d){var a;if(e==null){a=c.length;e=0;d=a-1}else{a=d-e+1}if(a<=2){return""}return this.curveHermiteSegments(c,this.cardinalTangents(c,b,e,d),e,d)};pv.SvgScene.monotoneTangents=function(t,q,r){var n;if(q==null){n=t.length;q=0;r=n-1}else{n=r-q+1}var o=[],l=[],b=[],w=[],c=0,e;for(c=0;c<n-1;c++){e=q+c;var p=t[e+1].left-t[e].left;l[c]=Math.abs(p)<=1e-12?0:(t[e+1].top-t[e].top)/p}b[0]=l[0];w[0]=t[q+1].left-t[q].left;for(c=1,e=q+c;c<n-1;c++,e++){b[c]=(l[c-1]+l[c])/2;w[c]=(t[e+1].left-t[e-1].left)/2}b[c]=l[c-1];w[c]=(t[e].left-t[e-1].left);for(c=0;c<n-1;c++){if(l[c]==0){b[c]=0;b[c+1]=0}}for(c=0;c<n-1;c++){if((Math.abs(b[c])<0.00001)||(Math.abs(b[c+1])<0.00001)){continue}var h=b[c]/l[c],a=b[c+1]/l[c],v=h*h+a*a;if(v>9){var u=3/Math.sqrt(v);b[c]=u*h*l[c];b[c+1]=u*a*l[c]}}var g;for(var f=0;f<n;f++){g=1+b[f]*b[f];o.push({x:w[f]/3/g,y:b[f]*w[f]/3/g})}return o};pv.SvgScene.curveMonotone=function(b,d,c){var a;if(d==null){a=b.length;d=0;c=a-1}else{a=c-d+1}if(a<=2){return""}return this.curveHermite(b,this.monotoneTangents(b,d,c),d,c)};pv.SvgScene.curveMonotoneSegments=function(b,d,c){var a;if(d==null){a=b.length;d=0;c=a-1}else{a=c-d+1}if(a<=2){return""}return this.curveHermiteSegments(b,this.monotoneTangents(b,d,c),d,c)};pv.SvgScene.area=function(a){var d=a.$g.firstChild;var c=a.length;if(!c){return d}var b=a[0];if(b.segmented==="smart"){return this.areaSegmentedSmart(d,a)}if(b.segmented){return this.areaSegmentedFull(d,a)}return this.areaFixed(d,a,0,c-1,true)};pv.SvgScene.areaFixed=function(f,c,r,e,q){var g=e-r+1;if(g===1){return this.lineAreaDot(f,c,r)}var n=c[r];if(!n.visible){return f}var u=n.fillStyle;var h=n.strokeStyle;if(!u.opacity&&!h.opacity){return f}this.addFillStyleDefinition(c,u);this.addFillStyleDefinition(c,h);var k=false;var l=false;var o=false;var b=false;var m=false;switch(n.interpolate){case"basis":k=true;break;case"cardinal":l=true;break;case"monotone":o=true;break;case"step-after":b=true;break;case"step-before":m=true;break}var p=k||l||o;var w=[],z,x;for(var v=r;v<=e;v++){z=c[v];if(!z.width&&!z.height){continue}for(var t=v+1;t<=e;t++){x=c[t];if(!x.width&&!x.height){break}}if((v>r)&&!b){v--}if((t<=e)&&!m){t++}var y=p&&(t-v>2)?this.areaPathCurve:this.areaPathStraight;w.push(y.call(this,c,v,t-1,n));v=t-1}if(!w.length){return f}var a=h.opacity;f=this.expect(f,"path",c,r,{"shape-rendering":n.antialias?null:"crispEdges","pointer-events":q?n.events:"none",cursor:n.cursor,d:"M"+w.join("ZM")+"Z",fill:u.color,"fill-opacity":u.opacity||null,stroke:h.color,"stroke-opacity":a||null,"stroke-width":a?(n.lineWidth/this.scale):null,"stroke-linecap":n.lineCap,"stroke-linejoin":n.lineJoin,"stroke-miterlimit":n.strokeMiterLimit,"stroke-dasharray":a?this.parseDasharray(n):null});if(n.svg){this.setAttributes(f,n.svg)}if(n.css){this.setStyle(f,n.css)}return this.append(f,c,r)};pv.SvgScene.areaSegmentedSmart=function(f,a){if(!f){f=a.$g.appendChild(this.create("g"))}var d=f;f=d.firstChild;var c=this.expect(f,"g",a,0,{"pointer-events":"none"});if(!c.parentNode){d.appendChild(c)}a.$g=c;f=c.firstChild;var e=a.mark.$hasHandlers?[]:null;f=this.eachLineAreaSegment(f,a,function(k,g,m,n){var i=this.areaSegmentPaths(g,m,n);var j=i.top;var h=i.bottom;var l=m;if(e){e.push(i)}var o={breakOnKeyChange:true,from:m,to:n};return this.eachLineAreaSegment(k,g,o,function(r,p,t,u){var w=p[t];var x=w.fillStyle;var y=w.strokeStyle;this.addFillStyleDefinition(p,x);this.addFillStyleDefinition(p,y);if(t===u){return this.lineAreaDotAlone(r,p,t)}var s=this.areaJoinPaths(j,h,t-l,u-l-1);var q=y.opacity;var v={"shape-rendering":w.antialias?null:"crispEdges","pointer-events":"none",cursor:w.cursor,d:s,fill:x.color,"fill-opacity":x.opacity||null,stroke:y.color,"stroke-opacity":q||null,"stroke-width":q?(w.lineWidth/this.scale):null,"stroke-linecap":w.lineCap,"stroke-linejoin":w.lineJoin,"stroke-miterlimit":w.strokeMiterLimit,"stroke-dasharray":q?this.parseDasharray(w):null};r=this.expect(r,"path",p,t,v,w.css);return this.append(r,p,t)})});this.removeSiblings(f);var b;if(e){f=c.nextSibling;b=this.expect(f,"g",a,0);if(!b.parentNode){d.appendChild(b)}a.$g=b;f=b.firstChild;e.forEach(function(h){var l=h.from;var j=h.top;var g=h.bottom;var i=j.length;var k={"shape-rendering":"crispEdges",fill:"rgb(127,127,127)","fill-opacity":0.005,stroke:null};j.forEach(function(t,o){var q=l+o;var r=a[q];var p=r.events;if(p&&p!=="none"){var n=g[i-o-1];var m=Object.create(k);m["pointer-events"]=p;m.cursor=r.cursor;m.d=t.join("")+"L"+n[0].substr(1)+n[1]+"Z";f=this.expect(f,"path",a,q,m);f=this.append(f,a,q)}},this)},this);this.removeSiblings(f)}a.$g=d;return(b||c).nextSibling};pv.SvgScene.areaSegmentPaths=function(a,c,b){return this.areaSegmentCurvePaths(a,c,b)||this.areaSegmentStraightPaths(a,c,b)};pv.SvgScene.areaSegmentCurvePaths=function(a,l,m){var j=m-l+1;var o=a[l];var h=o.interpolate==="basis";var n=!h&&o.interpolate==="cardinal";if(h||n||o.interpolate=="monotone"){var g=[];var b=[];for(var f=0;f<j;f++){var e=a[l+f];var d=a[m-f];g.push(e);b.push({left:d.left+d.width,top:d.top+d.height})}var k,c;if(h){k=this.curveBasisSegments(g);c=this.curveBasisSegments(b)}else{if(n){k=this.curveCardinalSegments(g,o.tension);c=this.curveCardinalSegments(b,o.tension)}else{k=this.curveMonotoneSegments(g);c=this.curveMonotoneSegments(b)}}if(k||k.length){return{from:l,top:k,bottom:c}}}};pv.SvgScene.areaSegmentStraightPaths=function(a,n,g){var q=[];var h=[];for(var e=g,b=n;n<e;n++,g--){var o=a[n],f=a[g],p=["M"+o.left+","+o.top],l=["M"+(f.left+f.width)+","+(f.top+f.height)];var d=a[n+1],c=a[g-1];switch(o.interpolate){case"step-before":p.push("V"+d.top+"H"+d.left);break;case"step-after":p.push("H"+d.left+"V"+d.top);break;default:p.push("L"+d.left+","+d.top)}l.push("L"+(c.left+c.width)+","+(c.top+c.height));q.push(p);h.push(l)}return{from:b,top:q,bottom:h}};pv.SvgScene.areaJoinPaths=function(p,g,m,h){var a="";var q="";var o=p.length;for(var f=m,c=o-1-h;f<=h;f++,c++){var e=p[f];var b=g[c];var n;var d;if(f===m){n=e.join("");d="L"+b[0].substr(1)+b[1]}else{n=e[1];d=b[1]}a+=n;q+=d}return a+q+"Z"};pv.SvgScene.areaSegmentedFull=function(r,a){var g=a.length;var p,f;var k=this.areaSegmentCurvePaths(a,0,g-1);if(k){p=k.top;f=k.bottom}var l=a[0];for(var q=0;q<g-1;q++){var c=a[q];var b=a[q+1];if(!c.visible||!b.visible){continue}var o=c.fillStyle;var j=c.strokeStyle;if(!o.opacity&&!j.opacity){continue}var t;if(p){var h=p[q].join(""),n="L"+f[g-q-2].join("").substr(1);t=h+n+"Z"}else{var v=c;var u=b;switch(c.interpolate){case"step-before":v=b;break;case"step-after":u=c;break}t="M"+c.left+","+v.top+"L"+b.left+","+u.top+"L"+(b.left+b.width)+","+(u.top+u.height)+"L"+(c.left+c.width)+","+(v.top+v.height)+"Z"}var m={"shape-rendering":c.antialias?null:"crispEdges","pointer-events":c.events,cursor:c.cursor,d:t,fill:o.color,"fill-opacity":o.opacity||null,stroke:j.color,"stroke-opacity":j.opacity||null,"stroke-width":j.opacity?c.lineWidth/this.scale:null};r=this.expect(r,"path",a,q,m);if(c.svg){this.setAttributes(r,c.svg)}if(c.css){this.setStyle(r,c.css)}r=this.append(r,a,q)}return r};pv.SvgScene.areaPathStraight=function(a,l,g,p){var o=[];var b=[];for(var e=g;l<=e;l++,g--){var m=a[l],f=a[g],n=m.left+","+m.top,h=(f.left+f.width)+","+(f.top+f.height);if(l<e){var d=a[l+1],c=a[g-1];switch(p.interpolate){case"step-before":n+="V"+d.top;h+="H"+(c.left+c.width);break;case"step-after":n+="H"+d.left;h+="V"+(c.top+c.height);break}}o.push(n);b.push(h)}return o.concat(b).join("L")};pv.SvgScene.areaPathCurve=function(a,h,g,m){var l=[];var c=[];var e,b;for(var d=g;h<=d;h++,g--){var f=a[g];l.push(a[h]);c.push({left:f.left+f.width,top:f.top+f.height})}switch(m.interpolate){case"basis":e=this.curveBasis(l);b=this.curveBasis(c);break;case"cardinal":e=this.curveCardinal(l,m.tension);b=this.curveCardinal(c,m.tension);break;default:e=this.curveMonotone(l);b=this.curveMonotone(c)}return l[0].left+","+l[0].top+e+"L"+c[0].left+","+c[0].top+b};pv.SvgScene.minBarWidth=1;pv.SvgScene.minBarHeight=1;pv.SvgScene.minBarLineWidth=0.2;pv.SvgScene.bar=function(b){var h=b.$g.firstChild;for(var c=0;c<b.length;c++){var d=b[c];if(!d.visible||Math.abs(d.width)<=1e-10||Math.abs(d.height)<=1e-10){continue}if(d.width<this.minBarWidth){d.width=this.minBarWidth}if(d.height<this.minBarHeight){d.height=this.minBarHeight}var g=d.fillStyle,f=d.strokeStyle;if(!g.opacity&&!f.opacity){continue}this.addFillStyleDefinition(b,g);this.addFillStyleDefinition(b,f);var a;if(f.opacity){a=d.lineWidth;if(a<1e-10){a=0}else{a=Math.max(this.minBarLineWidth,a/this.scale)}}else{a=null}h=this.expect(h,"rect",b,c,{"shape-rendering":d.antialias?null:"crispEdges","pointer-events":d.events,cursor:d.cursor,x:d.left,y:d.top,width:Math.max(1e-10,d.width),height:Math.max(1e-10,d.height),fill:g.color,"fill-opacity":g.opacity||null,stroke:f.color,"stroke-opacity":f.opacity||null,"stroke-width":a,"stroke-linecap":d.lineCap,"stroke-dasharray":f.opacity?this.parseDasharray(d):null});if(d.svg){this.setAttributes(h,d.svg)}if(d.css){this.setStyle(h,d.css)}h=this.append(h,b,c)}return h};pv.SvgScene.dot=function(a){var j=a.$g.firstChild;for(var f=0,k=a.length;f<k;f++){var r=a[f];if(!r.visible){continue}var p=r.fillStyle,b=p.opacity,q=r.strokeStyle,c=q.opacity;if(!b&&!c){continue}this.addFillStyleDefinition(a,p);this.addFillStyleDefinition(a,q);var g={"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,fill:p.color,"fill-opacity":b||null,stroke:q.color,"stroke-opacity":c||null,"stroke-width":c?(r.lineWidth/this.scale):null,"stroke-linecap":r.lineCap,"stroke-dasharray":c?this.parseDasharray(r):null};var h=r.shape||"circle";var d=r.aspectRatio;var n=r.shapeAngle;var o;if(h==="circle"){if(d===1){g.cx=r.left;g.cy=r.top;g.r=r.shapeRadius}else{h="ellipse";g.cx=g.cy=0;o="translate("+r.left+","+r.top+") ";if(n){o+="rotate("+pv.degrees(n)+") "}g.rx=r._width/2;g.ry=r._height/2}}else{g.d=this.renderSymbol(h,r);h="path";o="translate("+r.left+","+r.top+") ";if(n){o+="rotate("+pv.degrees(n)+") "}if(d!==1){var l=1/Math.sqrt(d);var m=d*l;o+="scale("+m+","+l+")"}}if(o){g.transform=o}j=this.expect(j,h,a,f,g);if(r.svg){this.setAttributes(j,r.svg)}if(r.css){this.setStyle(j,r.css)}j=this.append(j,a,f)}return j};(function(a){var b={};a.registerSymbol=function(d,e){b[d]=e;return a};a.renderSymbol=function(e,d){return b[e].call(a,d,e)};a.hasSymbol=function(d){return b.hasOwnProperty(d)};a.symbols=function(){return pv.keys(b)};var c=2/Math.sqrt(3);a.registerSymbol("circle",function(d){throw new Error("Not implemented as a symbol")}).registerSymbol("cross",function(e){var d=e.shapeRadius,f=-d;return"M"+f+","+f+"L"+d+","+d+"M"+d+","+f+"L"+f+","+d}).registerSymbol("triangle",function(e){var g=e.shapeRadius,d=g*c,h=-g,f=-d;return"M0,"+g+"L"+d+","+h+" "+f+","+h+"Z"}).registerSymbol("diamond",function(e){var d=e.shapeRadius*Math.SQRT2,f=-d;return"M0,"+f+"L"+d+",0 0,"+d+" "+f+",0Z"}).registerSymbol("square",function(e){var d=e.shapeRadius,f=-d;return"M"+f+","+f+"L"+d+","+f+" "+d+","+d+" "+f+","+d+"Z"}).registerSymbol("tick",function(d){return"M0,0L0,"+-d.shapeSize}).registerSymbol("bar",function(d){var e=d.shapeSize/2;return"M0,"+e+"L0,"+-e})}(pv.SvgScene));pv.SvgScene.image=function(a){var f=a.$g.firstChild;for(var b=0;b<a.length;b++){var d=a[b];if(!d.visible){continue}f=this.fill(f,a,b);if(d.image){f=this.expect(f,"foreignObject",a,b,{cursor:d.cursor,x:d.left,y:d.top,width:d.width,height:d.height});if(d.svg){this.setAttributes(f,d.svg)}if(d.css){this.setStyle(f,d.css)}var g=f.firstChild||f.appendChild(document.createElementNS(this.xhtml,"canvas"));g.$scene={scenes:a,index:b};g.style.width=d.width;g.style.height=d.height;g.width=d.imageWidth;g.height=d.imageHeight;g.getContext("2d").putImageData(d.image,0,0)}else{f=this.expect(f,"image",a,b,{preserveAspectRatio:"none",cursor:d.cursor,x:d.left,y:d.top,width:d.width,height:d.height});if(d.svg){this.setAttributes(f,d.svg)}if(d.css){this.setStyle(f,d.css)}f.setAttributeNS(this.xlink,"xlink:href",d.url)}f=this.append(f,a,b);f=this.stroke(f,a,b)}return f};pv.SvgScene.label=function(a){var d=a.$g.firstChild;for(var c=0;c<a.length;c++){var k=a[c];if(!k.visible){continue}var h=k.textStyle;if(!h.opacity||!k.text){continue}var g=0,f=0,j=0,b="start";switch(k.textBaseline){case"middle":j=".35em";break;case"top":j=".71em";f=k.textMargin;break;case"bottom":f="-"+k.textMargin;break}switch(k.textAlign){case"right":b="end";g="-"+k.textMargin;break;case"center":b="middle";break;case"left":g=k.textMargin;break}d=this.expect(d,"text",a,c,{"pointer-events":k.events,cursor:k.cursor,x:g,y:f,dy:j,transform:"translate("+k.left+","+k.top+")"+(k.textAngle?" rotate("+180*k.textAngle/Math.PI+")":"")+(this.scale!=1?" scale("+1/this.scale+")":""),fill:h.color,"fill-opacity":h.opacity||null,"text-anchor":b},{font:k.font,"text-shadow":k.textShadow,"text-decoration":k.textDecoration});if(k.svg){this.setAttributes(d,k.svg)}if(k.css){this.setStyle(d,k.css)}if(d.firstChild){d.firstChild.nodeValue=k.text}else{d.appendChild(document.createTextNode(k.text))}d=this.append(d,a,c)}return d};pv.SvgScene.line=function(a){var d=a.$g.firstChild;var c=a.length;if(!c){return d}var b=a[0];if(b.segmented==="smart"){return this.lineSegmentedSmart(d,a)}if(c<2){return d}if(b.segmented){return this.lineSegmentedFull(d,a)}return this.lineFixed(d,a)};pv.SvgScene.lineFixed=function(g,a){var f=a.length;if(f===1){return this.lineAreaDotAlone(g,a,0)}var m=a[0];if(!m.visible){return g}var k=m.fillStyle;var l=m.strokeStyle;if(!k.opacity&&!l.opacity){return g}this.addFillStyleDefinition(a,k);this.addFillStyleDefinition(a,l);var h="M"+m.left+","+m.top;var b=(f>2);if(b){switch(m.interpolate){case"basis":h+=this.curveBasis(a);break;case"cardinal":h+=this.curveCardinal(a,m.tension);break;case"monotone":h+=this.curveMonotone(a);break;default:b=false}}if(!b){for(var c=1;c<f;c++){h+=this.lineSegmentPath(a[c-1],a[c])}}var e=l.opacity;var j={"shape-rendering":m.antialias?null:"crispEdges","pointer-events":m.events,cursor:m.cursor,d:h,fill:k.color,"fill-opacity":k.opacity||null,stroke:l.color,"stroke-opacity":e||null,"stroke-width":e?(m.lineWidth/this.scale):null,"stroke-linecap":m.lineCap,"stroke-linejoin":m.lineJoin,"stroke-miterlimit":m.strokeMiterLimit,"stroke-dasharray":e?this.parseDasharray(m):null};g=this.expect(g,"path",a,0,j,m.css);if(m.svg){this.setAttributes(g,m.svg)}return this.append(g,a,0)};pv.SvgScene.lineSegmentedSmart=function(f,a){if(!f){f=a.$g.appendChild(this.create("g"))}var d=f;f=d.firstChild;var c=this.expect(f,"g",a,0,{"pointer-events":"none"});if(!c.parentNode){d.appendChild(c)}a.$g=c;f=c.firstChild;var e=a.mark.$hasHandlers?[]:null;f=this.eachLineAreaSegment(f,a,function(m,g,l,k){var j=this.lineSegmentPaths(g,l,k);var i=l;if(e){e.push({from:l,paths:j})}var h={breakOnKeyChange:true,from:l,to:k};return this.eachLineAreaSegment(m,g,h,function(p,n,r,s){var u=n[r];var v=u.fillStyle;this.addFillStyleDefinition(n,v);var w=u.strokeStyle;this.addFillStyleDefinition(n,w);if(r===s){return this.lineAreaDotAlone(p,n,r)}var q=this.lineJoinPaths(j,r-i,s-i-1);var o=w.opacity;var t={"shape-rendering":u.antialias?null:"crispEdges","pointer-events":"none",cursor:u.cursor,d:q,fill:v.color,"fill-opacity":v.opacity||null,stroke:w.color,"stroke-opacity":o||null,"stroke-width":o?(u.lineWidth/this.scale):null,"stroke-linecap":u.lineCap,"stroke-linejoin":u.lineJoin,"stroke-miterlimit":u.strokeMiterLimit,"stroke-dasharray":o?this.parseDasharray(u):null};p=this.expect(p,"path",n,r,t,u.css);return this.append(p,n,r)})});this.removeSiblings(f);var b;if(e){f=c.nextSibling;b=this.expect(f,"g",a,0);if(!b.parentNode){d.appendChild(b)}a.$g=b;f=b.firstChild;e.forEach(function(g){var j=g.from;var i=g.paths;var h={"shape-rendering":"crispEdges",fill:"rgb(127,127,127)","fill-opacity":0.005,stroke:"rgb(127,127,127)","stroke-opacity":0.005,"stroke-width":10,"stroke-dasharray":null};i.forEach(function(p,l){var n=j+l;var o=a[n];var m=o.events;if(m&&m!=="none"){var k=Object.create(h);k["pointer-events"]=m;k.cursor=o.cursor;k.d=p.join("");f=this.expect(f,"path",a,n,k);f=this.append(f,a,n)}},this)},this);this.removeSiblings(f)}a.$g=d;return(b||c).nextSibling};pv.SvgScene.lineSegmentedFull=function(f,a){var o=a[0];var m;switch(o.interpolate){case"basis":m=this.curveBasisSegments(a);break;case"cardinal":m=this.curveCardinalSegments(a,o.tension);break;case"monotone":m=this.curveMonotoneSegments(a);break}for(var c=0,b=a.length-1;c<b;c++){var j=a[c],h=a[c+1];if(!j.visible||!h.visible){continue}var l=j.strokeStyle,k=pv.FillStyle.transparent;if(!l.opacity){continue}var g;if((j.interpolate=="linear")&&(j.lineJoin=="miter")){k=l;l=pv.FillStyle.transparent;g=this.pathJoin(a[c-1],j,h,a[c+2])}else{if(m){g=m[c].join("")}else{g="M"+j.left+","+j.top+this.lineSegmentPath(j,h)}}f=this.expect(f,"path",a,c,{"shape-rendering":j.antialias?null:"crispEdges","pointer-events":j.events,cursor:j.cursor,d:g,fill:k.color,"fill-opacity":k.opacity||null,stroke:l.color,"stroke-opacity":l.opacity||null,"stroke-width":l.opacity?j.lineWidth/this.scale:null,"stroke-linejoin":j.lineJoin});if(j.svg){this.setAttributes(f,j.svg)}if(j.css){this.setStyle(f,j.css)}f=this.append(f,a,c)}return f};pv.SvgScene.lineSegmentPath=function(f,d){var b=1;switch(f.interpolate){case"polar-reverse":b=0;case"polar":var c=d.left-f.left,a=d.top-f.top,h=1-f.eccentricity,g=Math.sqrt(c*c+a*a)/(2*h);if((h<=0)||(h>1)){break}return"A"+g+","+g+" 0 0,"+b+" "+d.left+","+d.top;case"step-before":return"V"+d.top+"H"+d.left;case"step-after":return"H"+d.left+"V"+d.top}return"L"+d.left+","+d.top};pv.SvgScene.lineSegmentPaths=function(a,h,g){var e=a[h];var f;switch(e.interpolate){case"basis":f=this.curveBasisSegments(a,h,g);break;case"cardinal":f=this.curveCardinalSegments(a,e.tension,h,g);break;case"monotone":f=this.curveMonotoneSegments(a,h,g);break}if(!f||!f.length){f=[];for(var d=h+1;d<=g;d++){var c=a[d-1];var b=a[d];f.push(["M"+c.left+","+c.top,this.lineSegmentPath(c,b)])}}return f};pv.strokeMiterLimit=4;pv.SvgScene.pathJoin=function(P,M,K,H){var N=[];var w,e,A;var t=M.lineWidth/this.scale;var G=pv.vector(M.left,M.top);var F=pv.vector(K.left,K.top);var h=F.minus(G);var n=h.perp().norm();var l=n.times(t/2);var R=G.plus(l);var I=G.minus(l);var O=F.plus(l);var L=F.minus(l);if(!P||!P.visible){N.push(I,R)}else{var J=pv.vector(P.left,P.top);var q=G.minus(J);var x=q.perp().norm();var S=x.plus(n).norm();var i=this.lineIntersect(G,S,R,h);var j=this.lineIntersect(G,S,I,h);A=i.minus(j).length();var u=P.lineWidth/this.scale;var C=(t+u)/2;e=A/C;w=M.strokeMiterLimit||pv.strokeMiterLimit;if(e<=w){N.push(j,i)}else{var o=h.times(-1);var m=q.norm().plus(o.norm()).norm();var p=G.plus(m.times(C/2));if(m.dot(n)>=0){N.push(j,p,R)}else{N.push(I,p,i)}}}if(!H||!H.visible){N.push(O,L)}else{var E=pv.vector(H.left,H.top);var z=E.minus(F);var f=z.perp().norm();var Q=f.plus(n).norm();var B=this.lineIntersect(F,Q,O,h);var r=this.lineIntersect(F,Q,L,h);A=B.minus(r).length();var s=H.lineWidth/this.scale;var v=(s+t)/2;e=A/v;w=K.strokeMiterLimit||pv.strokeMiterLimit;if(e<=w){N.push(B,r)}else{var g=z.times(-1);var D=h.norm().plus(g.norm()).norm();var y=F.plus(D.times(v/2));if(D.dot(n)>=0){N.push(O,y,r)}else{N.push(B,y,L)}}}var k=N.shift();return"M"+k.x+","+k.y+"L"+N.map(function(a){return a.x+","+a.y}).join(" ")};pv.SvgScene.lineIntersect=function(d,c,b,a){return d.plus(c.times(b.minus(d).dot(a.perp())/c.dot(a.perp())))};pv.SvgScene.lineJoinPaths=function(c,f,e){var b=c[f].join("");for(var a=f+1;a<=e;a++){b+=c[a][1]}return b};pv.SvgScene.lineAreaDotAlone=function(c,a,b){return c};pv.SvgScene.eachLineAreaSegment=function(n,a,k,o){if(typeof k==="function"){o=k;k=null}var b=pv.get(k,"breakOnKeyChange",false);var p=pv.get(k,"from")||0;var q=pv.get(k,"to",a.length-1);var c,g;if(b){c=[];g=[]}var j=p;while(j<=q){var h=a[j];if(!this.isSceneVisible(h)){j++;continue}if(b){this.lineAreaSceneKey(h,c)}var d;var m=j;while(true){var e=m+1;if(e>q){d=e;break}var l=a[e];if(!this.isSceneVisible(l)){d=e+1;break}m=e;if(b){this.lineAreaSceneKey(l,g);if(!this.equalSceneKeys(c,g)){d=m;break}}}n=o.call(this,n,a,j,m,k);j=d}return n};pv.SvgScene.lineAreaSceneKey=function(b,a){a[0]=b.fillStyle.key;a[1]=b.strokeStyle.key;a[2]=b.lineWidth;a[3]=(b.strokeDasharray||"none");a[4]=b.interpolate;return a};pv.SvgScene.isSceneVisible=function(a){return a.visible&&(a.fillStyle.opacity>0||a.strokeStyle.opacity>0)};pv.SvgScene.equalSceneKeys=function(d,c){for(var b=0,a=d.length;b<a;b++){if(d[b]!==c[b]){return false}}return true};pv.SvgScene.panel=function(a){var j=a.$g;var l=j&&j.firstChild;for(var h=0,m=a.length;h<m;h++){var r=a[h];if(!r.visible){continue}if(!a.parent){var b=r.canvas;this.applyCanvasStyle(b);if(j&&(j.parentNode!==b)){j=b.firstChild;l=j&&j.firstChild}if(!j){j=this.createRootPanelElement();l=null;this.initRootPanelElement(j);b.appendChild(j);a.$defs=j.appendChild(this.create("defs"));a.$g=j}else{if(l&&l.tagName==="defs"){l=l.nextSibling}}j.setAttribute("width",r.width+r.left+r.right);j.setAttribute("height",r.height+r.top+r.bottom)}var f=null;if(r.overflow==="hidden"){var d=this.addPanelClipPath(j,l,a,h,r);f=d.g;a.$g=j=f;l=d.next}l=this.fill(l,a,h);var c=this.scale,q=r.transform,o=r.left+q.x,n=r.top+q.y;this.scale*=q.k;if(r.children.length){var p={transform:"translate("+o+","+n+")"+(q.k!=1?" scale("+q.k+")":"")};this.eachChild(a,h,function(e){e.$g=l=this.expect(l,"g",a,h,p);this.updateAll(e);if(!l.parentNode){j.appendChild(l)}l=l.nextSibling})}this.scale=c;l=this.stroke(l,a,h);if(f){a.$g=j=f.parentNode;l=f.nextSibling}}return l};pv.SvgScene.applyCanvasStyle=function(a){a.style.display="inline-block"};pv.SvgScene.createRootPanelElement=function(){return this.create("svg")};pv.SvgScene.initRootPanelElement=function(c){c.setAttribute("font-size","10px");c.setAttribute("font-family","sans-serif");c.setAttribute("fill","none");c.setAttribute("stroke","none");c.setAttribute("stroke-width",1.5);this.disableElementSelection(c);for(var b=0,a=this.events.length;b<a;b++){c.addEventListener(this.events[b],this.dispatch,false)}};pv.SvgScene.disableElementSelection=function(a){a.setAttribute("style","-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;");if(typeof a.onselectstart!=="undefined"){a.setAttribute("unselectable","on");a.onselectstart=function(){return false}}};pv.SvgScene.addPanelClipPath=function(j,k,c,h,l){var d=pv.id().toString(36);var f=this.expect(k,"g",c,h,{"clip-path":"url(#"+d+")"});var b=this.expect(f.firstChild,"clipPath",c,h,{id:d});var a=b.firstChild||b.appendChild(this.create("rect"));a.setAttribute("x",l.left);a.setAttribute("y",l.top);a.setAttribute("width",l.width);a.setAttribute("height",l.height);if(!b.parentNode){f.appendChild(b)}if(!f.parentNode){j.appendChild(f)}return{g:f,next:b.nextSibling}};pv.SvgScene.eachChild=function(a,e,c,b){if(a.mark.zOrderChildCount){var d=a[e].children.slice(0);d.sort(function(g,f){var h=g.mark._zOrder-f.mark._zOrder;if(h===0){h=g.childIndex-f.childIndex}return h});d.forEach(c,b||this)}else{a[e].children.forEach(c,b||this)}};pv.SvgScene.fill=function(f,a,b){var c=a[b],d=c.fillStyle;if(d.opacity||c.events=="all"){this.addFillStyleDefinition(a,d);f=this.expect(f,"rect",a,b,{"shape-rendering":c.antialias?null:"crispEdges","pointer-events":c.events,cursor:c.cursor,x:c.left,y:c.top,width:c.width,height:c.height,fill:d.color,"fill-opacity":d.opacity,stroke:null});f=this.append(f,a,b)}return f};pv.SvgScene.stroke=function(f,a,b){var c=a[b],d=c.strokeStyle;if(d.opacity||c.events=="all"){f=this.expect(f,"rect",a,b,{"shape-rendering":c.antialias?null:"crispEdges","pointer-events":c.events=="all"?"stroke":c.events,cursor:c.cursor,x:c.left,y:c.top,width:Math.max(1e-10,c.width),height:Math.max(1e-10,c.height),fill:null,stroke:d.color,"stroke-opacity":d.opacity,"stroke-width":c.lineWidth/this.scale,"stroke-linecap":c.lineCap,"stroke-dasharray":d.opacity?this.parseDasharray(c):null});f=this.append(f,a,b)}return f};pv.SvgScene.minRuleLineWidth=1;pv.SvgScene.rule=function(b){var g=b.$g.firstChild;for(var c=0;c<b.length;c++){var d=b[c];if(!d.visible){continue}var f=d.strokeStyle;if(!f.opacity){continue}var a=d.lineWidth;if(a<1e-10){a=0}else{a=Math.max(this.minRuleLineWidth,a/this.scale)}g=this.expect(g,"line",b,c,{"shape-rendering":d.antialias?null:"crispEdges","pointer-events":d.events,cursor:d.cursor,x1:d.left,y1:d.top,x2:d.left+d.width,y2:d.top+d.height,stroke:f.color,"stroke-opacity":f.opacity,"stroke-width":a,"stroke-linecap":d.lineCap,"stroke-dasharray":f.opacity?this.parseDasharray(d):null});if(d.svg){this.setAttributes(g,d.svg)}if(d.css){this.setStyle(g,d.css)}g=this.append(g,b,c)}return g};pv.SvgScene.wedge=function(b){var k=b.$g.firstChild;for(var j=0;j<b.length;j++){var u=b[j];if(!u.visible){continue}var r=u.fillStyle,t=u.strokeStyle;if(!r.opacity&&!t.opacity){continue}var f=u.innerRadius,d=u.outerRadius,n=Math.abs(u.angle),c;if(n>=2*Math.PI){if(f){c="M0,"+d+"A"+d+","+d+" 0 1,1 0,"+(-d)+"A"+d+","+d+" 0 1,1 0,"+d+"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+(-f)+"A"+f+","+f+" 0 1,1 0,"+f+"Z"}else{c="M0,"+d+"A"+d+","+d+" 0 1,1 0,"+(-d)+"A"+d+","+d+" 0 1,1 0,"+d+"Z"}}else{var m=Math.min(u.startAngle,u.endAngle),l=Math.max(u.startAngle,u.endAngle),h=Math.cos(m),g=Math.cos(l),q=Math.sin(m),o=Math.sin(l);if(f){c="M"+d*h+","+d*q+"A"+d+","+d+" 0 "+((n<Math.PI)?"0":"1")+",1 "+d*g+","+d*o+"L"+f*g+","+f*o+"A"+f+","+f+" 0 "+((n<Math.PI)?"0":"1")+",0 "+f*h+","+f*q+"Z"}else{c="M"+d*h+","+d*q+"A"+d+","+d+" 0 "+((n<Math.PI)?"0":"1")+",1 "+d*g+","+d*o+"L0,0Z"}}this.addFillStyleDefinition(b,r);this.addFillStyleDefinition(b,t);k=this.expect(k,"path",b,j,{"shape-rendering":u.antialias?null:"crispEdges","pointer-events":u.events,cursor:u.cursor,transform:"translate("+u.left+","+u.top+")",d:c,fill:r.color,"fill-rule":"evenodd","fill-opacity":r.opacity||null,stroke:t.color,"stroke-opacity":t.opacity||null,"stroke-width":t.opacity?u.lineWidth/this.scale:null,"stroke-linejoin":u.lineJoin,"stroke-miterlimit":u.strokeMiterLimit,"stroke-linecap":u.lineCap,"stroke-dasharray":t.opacity?this.parseDasharray(u):null});if(u.svg){this.setAttributes(k,u.svg)}if(u.css){this.setStyle(k,u.css)}k=this.append(k,b,j)}return k};pv.Mark=function(){this.$properties=[];this.$propertiesMap={};this.$handlers={}};pv.Mark.prototype.properties={};pv.Mark.cast={};pv.Mark.prototype.property=function(b,a){if(!this.hasOwnProperty("properties")){this.properties=pv.extend(this.properties)}this.properties[b]=true;pv.Mark.prototype.propertyMethod(b,false,pv.Mark.cast[b]=a);return this};pv.Mark.prototype.localProperty=function(b,a){if(!this.hasOwnProperty("properties")){this.properties=pv.extend(this.properties)}this.properties[b]=true;var c=pv.Mark.cast[b];if(a){pv.Mark.cast[b]=c=a}this.propertyMethod(b,false,c);return this};pv.Mark.prototype.def=function(b,a){this.propertyMethod(b,true);return this[b](arguments.length>1?a:null)};pv.Mark.prototype.propertyMethod=function(c,b,a){if(!a){a=pv.Mark.cast[c]}this[c]=function(k,l){if(b&&this.scene){var h=this.scene.defs;if(arguments.length){h[c]={id:(k==null)?0:pv.id(),value:((k!=null)&&a)?a(k):k};return this}var d=h[c];return d?d.value:null}if(arguments.length){this.setPropertyValue(c,k,b,a,false,l);return this}var g=pv.propertyEval;if(g&&g.name!==c){var f=this.binds;var i=f.properties[c];if(i){var j=f.net;var e=j[c];if(e==null){e=j[c]=0}(i.dependents||(i.dependents={}))[g.name]=true;(pv.propertyEvalDependencies||(pv.propertyEvalDependencies={}))[c]=true;if(e>=pv.propertyEvalNetIndex){pv.propertyEvalNetIndex=e+1}}}return this.instance()[c]}};pv.Mark.funPropertyCaller=function(c,b){var a=pv.Mark.stack;return function(){var d=c.apply(this,a);return d!=null?b(d):d}};pv.Mark.prototype.setPropertyValue=function(b,l,c,f,a,m){var k=!c<<1|(typeof l==="function");if(k&1&&f){l=pv.Mark.funPropertyCaller(l,f)}else{if(l!=null&&f){l=f(l)}}var e=this.$propertiesMap;var j=this.$properties;var d={name:b,id:pv.id(),value:l,type:k,tag:m};var h=e[b];e[b]=d;if(h){for(var g=0;g<j.length;g++){if(j[g]===h){j.splice(g,1);break}}}j.push(d);if(a&&h&&k===3){d.proto=h;d.root=h.root||h}return d};pv.Mark.prototype.intercept=function(b,a,c){this.setPropertyValue(b,a,false,pv.get(c,"noCast")?null:pv.Mark.cast[b],true,pv.get(c,"tag"));return this};pv.Mark.prototype.propertyValue=function(b,a){var d=this.$propertiesMap[b];if(d){return d.value}if(a){if(this.proto){var c=this.proto.propertyValueRecursive(b);if(c!==undefined){return c}}return this.defaults.propertyValueRecursive(b)}};pv.Mark.prototype.propertyValueRecursive=function(a){var b=this.$propertiesMap[a];if(b){return b.value}if(this.proto){return this.proto.propertyValueRecursive(a)}};pv.Mark.stack=[];pv.Mark.prototype.property("data").property("visible",Boolean).property("css",Object).property("svg",Object).property("left",Number).property("right",Number).property("top",Number).property("bottom",Number).property("cursor",String).property("title",String).property("reverse",Boolean).property("antialias",Boolean).property("events",String).property("id",String);pv.Mark.prototype.childIndex=-1;pv.Mark.prototype.index=-1;pv.Mark.prototype.scale=1;pv.Mark.prototype._zOrder=0;pv.Mark.prototype.defaults=new pv.Mark().data(function(a){return[a]}).visible(true).antialias(true).events("painted");pv.Mark.prototype.extend=function(a){this.proto=a;this.target=a.target;return this};pv.Mark.prototype.add=function(a){return this.parent.add(a).extend(this)};pv.Mark.prototype.zOrder=function(a){if(!arguments.length){return this._zOrder}a=(+a)||0;if(this._zOrder!==a){var b=this.parent;if(b&&this._zOrder!==0){b.zOrderChildCount--}this._zOrder=a;if(b&&this._zOrder!==0){b.zOrderChildCount++}}return this};pv.Mark.prototype.anchor=function(a){if(!a){a="center"}return new pv.Anchor(this).name(a).data(function(){return this.scene.target.map(function(b){return b.data})}).visible(function(){return this.scene.target[this.index].visible}).id(function(){return this.scene.target[this.index].id}).left(function(){var c=this.scene.target[this.index],b=c.width||0;switch(this.name()){case"bottom":case"top":case"center":return c.left+b/2;case"left":return null}return c.left+b}).top(function(){var c=this.scene.target[this.index],b=c.height||0;switch(this.name()){case"left":case"right":case"center":return c.top+b/2;case"top":return null}return c.top+b}).right(function(){var b=this.scene.target[this.index];return this.name()=="left"?b.right+(b.width||0):null}).bottom(function(){var b=this.scene.target[this.index];return this.name()=="top"?b.bottom+(b.height||0):null}).textAlign(function(){switch(this.name()){case"bottom":case"top":case"center":return"center";case"right":return"right"}return"left"}).textBaseline(function(){switch(this.name()){case"right":case"left":case"center":return"middle";case"top":return"top"}return"bottom"})};pv.Mark.prototype.anchorTarget=function(){return this.target};pv.Mark.prototype.margin=function(a){return this.left(a).right(a).top(a).bottom(a)};pv.Mark.prototype.instance=function(c){var b=this.scene||this.parent.instance(-1).children[this.childIndex],a=(c==null)||this.hasOwnProperty("index")?this.index:c;return b[a<0?b.length-1:a]};pv.Mark.prototype.instances=function(d){var g=this,b=[],f;while(!(f=g.scene)){b.push({index:d.parentIndex,childIndex:g.childIndex});d=d.parent;g=g.parent}var a=b.length;while(a--){var e=b[a];f=f[e.index].children[e.childIndex]}if(this.hasOwnProperty("index")){var c=pv.extend(f[this.index]);c.right=c.top=c.left=c.bottom=0;return[c]}return f};pv.Mark.prototype.first=function(){return this.scene[0]};pv.Mark.prototype.last=function(){return this.scene[this.scene.length-1]};pv.Mark.prototype.sibling=function(){return(this.index==0)?null:this.scene[this.index-1]};pv.Mark.prototype.cousin=function(){var b=this.parent,a=b&&b.sibling();return(a&&a.children)?a.children[this.childIndex][this.index]:null};pv.Mark.prototype.render=function(){if(this.parent&&!this.root.scene){this.root.render();return}this.renderCore()};pv.Mark.prototype.renderCore=function(){var i=this.parent,h=pv.Mark.stack,c=h.length;var d=[];for(var b=this;b.parent;b=b.parent){d.unshift(b.childIndex)}var g=d.length;function a(p,m,l){p.scale=l;if(m<g){var e=(m>=h.length);if(e){h.unshift(null)}if(p.hasOwnProperty("index")){j(p,m,l,e)}else{for(var k=0,o=p.scene.length;k<o;k++){p.index=k;j(p,m,l,e)}delete p.index}if(e){h.shift()}}else{p.build();pv.Scene.scale=l;pv.Scene.updateAll(p.scene)}delete p.scale}function j(m,o,l,q){var t=m.scene[m.index],p;if(t.visible){var r=m.children;var e=t.children;var n=d[o];var k=r[n];if(!k.scene){n++}for(p=0;p<n;p++){r[p].scene=e[p]}if(q){h[0]=t.data}a(k,o+1,l*t.transform.k);for(p=0;p<n;p++){r[p].scene=undefined}}}this.bind();while(i&&!i.hasOwnProperty("index")){i=i.parent}try{this.context(i?i.scene:undefined,i?i.index:-1,function(){a(this.root,0,1)})}catch(f){if(h.length>c){h.length=c}}};pv.Mark.prototype.bind=function(){var b={},g,m=[],j=[[],[],[],[]],p={data:function(i){g=i},visible:function(i){m.push(i)}},q=function(i){j[i.type].push(i)};p.id=p.visible;var o=j[0],n=j[1],k=j[2],h=j[3];function l(x){do{var t=x.$properties;var s=t.length;while(s--){var u=t[s];var r=u.name;var w=b[r];if(!w){b[r]=u;(p[r]||q)(u)}else{if(w.type===3){var v=w.root;w.root=u;if(!v){w.proto=u}else{if(!v.proto){v.proto=u}}}}}}while((x=x.proto))}l(this);l(this.defaults);n.reverse();h.reverse();var d=this;do{for(var c in d.properties){if(!(c in b)){k.push(b[c]={name:c,type:2,value:null})}}}while((d=d.proto));var e;if(o.length||n.length){e=o.concat(n);for(var f=0,a=e.length;f<a;f++){this.propertyMethod(e[f].name,true)}}else{e=[]}this.binds={properties:b,net:{},data:g,defs:e,required:m,optional:pv.blend(j)}};pv.Mark.prototype.updateNet=function(f,d){var c=this.binds;var b=c.properties;var e=c.net;a(f,d);function a(i,h){if(h>(e[i.name]||0)){e[i.name]=h;var k=i.dependents;if(k){h++;for(var g in k){if(k.hasOwnProperty(g)){var j=b[g];if(j){a(j,h)}}}}}}};pv.Mark.prototype.build=function(){var l=pv.Mark.stack;var g=this.scene;if(!g){g=this.scene=[];g.mark=this;g.type=this.type;g.childIndex=this.childIndex;var m=this.parent;if(m){g.parent=m.scene;g.parentIndex=m.index}}if(this.target){g.target=this.target.instances(g)}var o=this.binds.defs;if(o.length){var c=g.defs||(g.defs={});for(var f=0,a=o.length;f<a;f++){var b=o[f];var j=c[b.name];if(!j||(b.id>j.id)){c[b.name]={id:0,value:(b.type&1)?b.value.apply(this,l):b.value}}}}var e=this.evalProperty(this.binds.data);var h=pv.Mark.prototype;l.unshift(null);try{var k=g.length=e.length;for(var f=0;f<k;f++){h.index=this.index=f;var n=g[f]||(g[f]={});n.data=l[0]=e[f];this.buildInstance(n)}}finally{h.index=-1;delete this.index;l.shift()}return this};pv.Mark.prototype.buildProperties=function(e,d){var a=pv.Mark.stack;var b=pv.propertyProto;try{for(var c=0,g=d.length;c<g;c++){var f=d[c];e[f.name]=_buildByPropType[f.type].call(this,f,a)}}finally{pv.propertyProto=b}};var _buildByPropType=[function(a){return this.scene.defs[a.name].value},null,function(a){return a.value},function(b,a){pv.propertyProto=b.proto;return b.value.apply(this,a)}];_buildByPropType[1]=_buildByPropType[0];pv.Mark.prototype.delegate=function(b,a){var c=pv.propertyProto;if(c&&(!a||c.tag===a)){var d=this.evalProperty(c);if(d!==undefined){return d}}return b};pv.Mark.prototype.hasDelegate=function(a){var b=pv.propertyProto;return !!b&&(!a||b.tag===a)};var _buildByPropTypeSingle=_buildByPropType.slice();_buildByPropTypeSingle[3]=function(b){var a=pv.propertyProto;try{pv.propertyProto=b.proto;return b.value.apply(this,pv.Mark.stack)}finally{pv.propertyProto=a}};pv.Mark.prototype.evalProperty=function(a){return _buildByPropTypeSingle[a.type].call(this,a)};pv.Mark.prototype.buildPropertiesWithDepTracking=function(h,e){var q=this.binds.net;var o,f,c,a,t,b;var d=pv.Mark.stack;var l=e.length;try{while(true){c=null;b={};var j=pv.propertyProto;try{for(var r=0;r<l;r++){var k=e[r];var w=k.name;b[w]=true;if(!a||a[w]){var g;switch(k.type){case 3:pv.propertyEval=k;pv.propertyEvalNetIndex=o=(q[w]||0);pv.propertyEvalDependencies=null;pv.propertyProto=k.proto;g=k.value.apply(this,d);f=pv.propertyEvalNetIndex;if(f>o){var u=pv.propertyEvalDependencies;for(var m in u){if(u.hasOwnProperty(m)&&!b.hasOwnProperty(w)){if(!c){c={}}c[m]=true}}this.updateNet(k,f)}break;case 2:g=k.value;break;case 0:case 1:g=this.scene.defs[w].value;break}h[w]=g}}}finally{pv.propertyProto=j}if(!c){break}a=c;t=pv.numerate(e,function(i){return i.name});e.sort(function(p,n){var i=pv.naturalOrder(q[p.name]||0,q[n.name]||0);if(!i){i=pv.naturalOrder(t[p.name],t[n.name])}return i});t=null}}finally{pv.propertyEval=null;pv.propertyEvalNetIndex=null;pv.propertyEvalDependencies=null}};pv.Mark.prototype.buildInstance=function(b){this.buildProperties(b,this.binds.required);if(b.visible){if(this.index===0){this.buildPropertiesWithDepTracking(b,this.binds.optional)}else{this.buildProperties(b,this.binds.optional)}try{this.buildImplied(b)}catch(a){if(a instanceof pv.CanvasStolenError){b.visible=false}else{throw a}}}};pv.Mark.prototype.buildImplied=function(o){var f=o.left;var a=o.right;var n=o.top;var i=o.bottom;var d=this.properties;var k=d.width?o.width:0;var g=d.height?o.height:0;var e,j;if(k==null||a==null||f==null){e=this.parent&&this.parent.instance();j=true;var c=e?e.width:(k+f+a);if(k==null){k=c-(a=a||0)-(f=f||0)}else{if(a==null){if(f==null){f=a=(c-k)/2}else{a=c-k-f}}else{f=c-k-a}}}if(g==null||i==null||n==null){if(!j){e=this.parent&&this.parent.instance()}var m=e?e.height:(g+n+i);if(g==null){g=m-(n=n||0)-(i=i||0)}else{if(i==null){if(n==null){i=n=(m-g)/2}else{i=m-g-n}}else{n=m-g-i}}}o.left=f;o.right=a;o.top=n;o.bottom=i;if(d.width){o.width=k}if(d.height){o.height=g}if(d.textStyle&&!o.textStyle){o.textStyle=pv.FillStyle.transparent}if(d.fillStyle&&!o.fillStyle){o.fillStyle=pv.FillStyle.transparent}if(d.strokeStyle&&!o.strokeStyle){o.strokeStyle=pv.FillStyle.transparent}};pv.Mark.prototype.mouse=function(){var b=this.root.canvas();var h=pv.event;var i=(h&&h.pageX)||0;var g=(h&&h.pageY)||0;var c=pv.elementOffset(b);if(c){var d=pv.cssStyle(b);i-=c.left+parseFloat(d("paddingLeft")||0);g-=c.top+parseFloat(d("paddingTop")||0)}var j=pv.Transform.identity;var a=this.properties.transform?this:this.parent;var f=[];do{f.push(a)}while((a=a.parent));while((a=f.pop())){var e=a.instance();j=j.translate(e.left,e.top).times(e.transform)}j=j.invert();return pv.vector(i*j.k+j.x,g*j.k+j.y)};pv.Mark.prototype.event=function(c,b){b=pv.functor(b);var a=this.$handlers[c];if(!a){a=b}else{if(a instanceof Array){a.push(b)}else{a=[a,b]}}this.$hasHandlers=true;this.$handlers[c]=a;return this};pv.Mark.prototype.context=function(b,g,e){var c=pv.Mark.prototype,j=pv.Mark.stack,d=pv.Mark.scene,h=c.index;function k(s,u){pv.Mark.scene=s;c.index=u;if(!s){return}var t=s.mark,p=t,v=[];do{v.push(p);j.push(s[u].data);p.index=u;p.scene=s;if((p=p.parent)){u=s.parentIndex;s=s.parent}}while(p);var q=1;for(var r=v.length-1;r>0;r--){p=v[r];p.scale=q;q*=p.scene[p.index].transform.k}t.scale=q;var m=t.children,o;if(m&&(o=m.length)>0){var l=t.scene[t.index];q*=l.transform.k;var f=l.children;for(var r=0;r<o;r++){p=m[r];p.scene=f[r];p.scale=q}}}function a(p){if(!p){return}var o=p.mark,r;var l=o.children;if(l){for(var f=0,q=l.length;f<q;f++){r=l[f];r.scene=undefined;r.scale=1}}r=o;var m;do{j.pop();delete r.index;if((m=r.parent)){r.scene=undefined;r.scale=1}}while((r=m))}if(b&&b===d&&g===h){try{e.apply(this,j)}catch(i){pv.error(i);throw i}finally{pv.Mark.scene=d;c.index=h}}else{a(d,h);k(b,g);try{e.apply(this,j)}catch(i){pv.error(i);throw i}finally{a(b,g);k(d,h)}}};pv.Mark.getEventHandler=function(e,a,b,f){var d=a.mark.$handlers[e];if(d){return[d,e,a,b,f]}var c=a.parent;if(c){return this.getEventHandler(e,c,a.parentIndex,f)}};pv.Mark.dispatch=function(h,b,f,a){var j=b.mark.root;if(j.$transition){return true}var d;var c=j.$interceptors&&j.$interceptors[h];if(c){for(var e=0,g=c.length;e<g;e++){d=c[e](h,a);if(d){break}if(d===false){return true}}}if(!d){d=this.getEventHandler(h,b,f,a);if(!d){return false}}return this.handle.apply(this,d)};pv.Mark.handle=function(e,d,b,c,f){var a=b.mark;a.context(b,c,function(){var g=pv.Mark.stack.concat(f);if(e instanceof Array){var h;e.forEach(function(j){var i=j.apply(a,g);if(i&&i.render){(h||(h=[])).push(i)}});if(h){h.forEach(function(i){i.render()})}}else{a=e.apply(a,g);if(a&&a.render){a.render()}}});return true};pv.Mark.prototype.addEventInterceptor=function(c,b,e){var a=this.root;if(a){var f=a.$interceptors||(a.$interceptors={});var d=f[c]||(f[c]=[]);if(e){d.unshift(b)}else{d.push(b)}}};pv.Mark.prototype.eachInstance=function(c,b){var g=this,d=[];while(g.parent){d.unshift(g.childIndex);g=g.parent}var e=g.scene;if(!e){return}var a=d.length;function f(n,i,p){var h=n.length;if(h>0){var j=i===a,l;if(!j){l=d[i]}for(var o=0;o<h;o++){var q=n[o];if(q.visible){if(i===a){c.call(b,n,o,p)}else{var k=q.children[l];if(k){var m=p.times(q.transform).translate(q.left,q.top);f(k,i+1,m)}}}}}}f(e,0,pv.Transform.identity)};pv.Mark.prototype.toScreenTransform=function(){var a=pv.Transform.identity;if(this instanceof pv.Panel){a=a.translate(this.left(),this.top()).times(this.transform())}var b=this.parent;if(b){do{a=a.translate(b.left(),b.top()).times(b.transform())}while((b=b.parent))}return a};pv.Mark.prototype.transition=function(){return new pv.Transition(this)};pv.Mark.prototype.on=function(a){return this["$"+a]=new pv.Transient(this)};pv.Mark.prototype.getShape=function(a,c,b){var e=a[c];if(!e.visible){return null}if(b==null){b=0}var d="_shape_inset_"+b;return e[d]||(e[d]=this.getShapeCore(a,c,b))};pv.Mark.prototype.getShapeCore=function(b,e,k){var j=b[e];var c=j.left;var i=j.top;var g=j.width;var d=j.height;if(k>0&&k<=1){var a=k*g;var f=k*d;c+=a;i+=f;g-=a*2;d-=f*2}return new pv.Shape.Rect(c,i,g,d)};pv.Anchor=function(a){pv.Mark.call(this);this.target=a;this.parent=a.parent};pv.Anchor.prototype=pv.extend(pv.Mark).property("name",String);pv.Anchor.prototype.extend=function(a){this.proto=a;return this};pv.Area=function(){pv.Mark.call(this)};pv.Area.castSegmented=function(a){if(!a){return""}switch(a){case"smart":case"full":break;default:a="full"}return a};pv.Area.prototype=pv.extend(pv.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("lineJoin",String).property("strokeMiterLimit",Number).property("lineCap",String).property("strokeDasharray",String).property("strokeStyle",pv.fillStyle).property("fillStyle",pv.fillStyle).property("segmented",pv.Area.castSegmented).property("interpolate",String).property("tension",Number);pv.Area.prototype.type="area";pv.Area.prototype.defaults=new pv.Area().extend(pv.Mark.prototype.defaults).lineWidth(1.5).fillStyle(pv.Colors.category20().by(pv.parent)).interpolate("linear").tension(0.7).lineJoin("miter").strokeMiterLimit(8).lineCap("butt").strokeDasharray("none");pv.Area.prototype.buildImplied=function(a){if(a.height==null){a.height=0}if(a.width==null){a.width=0}pv.Mark.prototype.buildImplied.call(this,a)};pv.Area.fixed={lineWidth:1,lineJoin:1,strokeMiterLimit:1,lineCap:1,strokeStyle:1,strokeDasharray:1,fillStyle:1,segmented:1,interpolate:1,tension:1};pv.Area.prototype.bind=function(){pv.Mark.prototype.bind.call(this);var c=this.binds,e=c.required,a=c.optional;for(var b=0,f=a.length;b<f;b++){var d=a[b];d.fixed=d.name in pv.Area.fixed;if(d.name=="segmented"){e.push(d);a.splice(b,1);b--;f--}}this.binds.$required=e;this.binds.$optional=a};pv.Area.prototype.buildInstance=function(c){var b=this.binds;if(this.index){var e=b.fixed;if(!e){e=b.fixed=[];function g(f){return !f.fixed||(e.push(f),false)}b.required=b.required.filter(g);if(!this.scene[0].segmented){b.optional=b.optional.filter(g)}}var j=e.length;if(j){var d=this.scene[0];for(var a=0;a<j;a++){var h=e[a].name;c[h]=d[h]}}}else{b.required=b.$required;b.optional=b.$optional;b.fixed=null}pv.Mark.prototype.buildInstance.call(this,c)};pv.Area.prototype.anchor=function(a){var b;return pv.Mark.prototype.anchor.call(this,a).interpolate(function(){return this.scene.target[this.index].interpolate}).eccentricity(function(){return this.scene.target[this.index].eccentricity}).tension(function(){return this.scene.target[this.index].tension})};pv.Area.prototype.getShapeCore=function(b,e){var m=b[e];var l=(m.width||0),d=(m.height||0),j=m.left,i=m.top;var k=e+1<b.length?b[e+1]:null;if(!k||!k.visible){return new pv.Shape.Line(j,i,j+l,i+d)}var a=k.left,g=k.top,f=k.height||0,c=k.width||0;return new pv.Shape.Polygon([new pv.Vector(j,i),new pv.Vector(a,g),new pv.Vector(a+c,g+f),new pv.Vector(j+l,i+d)])};pv.Bar=function(){pv.Mark.call(this)};pv.Bar.prototype=pv.extend(pv.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("strokeStyle",pv.fillStyle).property("fillStyle",pv.fillStyle).property("lineCap",String).property("strokeDasharray",String);pv.Bar.prototype.type="bar";pv.Bar.prototype.defaults=new pv.Bar().extend(pv.Mark.prototype.defaults).lineWidth(1.5).fillStyle(pv.Colors.category20().by(pv.parent)).lineCap("butt").strokeDasharray("none");pv.Dot=function(){pv.Mark.call(this)};pv.Dot.prototype=pv.extend(pv.Mark).property("shape",String).property("shapeAngle",Number).property("shapeRadius",Number).property("shapeSize",Number).property("aspectRatio",Number).property("lineWidth",Number).property("strokeStyle",pv.fillStyle).property("lineCap",String).property("strokeDasharray",String).property("fillStyle",pv.fillStyle);pv.Dot.prototype.type="dot";pv.Dot.prototype.defaults=new pv.Dot().extend(pv.Mark.prototype.defaults).shape("circle").aspectRatio(1).lineWidth(1.5).strokeStyle(pv.Colors.category10().by(pv.parent)).lineCap("butt").strokeDasharray("none");pv.Dot.prototype.anchor=function(a){var b;return pv.Mark.prototype.anchor.call(this,a).left(function(){var c=this.scene.target[this.index];switch(this.name()){case"bottom":case"top":case"center":return c.left;case"left":return null}return c.left+c._width/2}).right(function(){var c=this.scene.target[this.index];return this.name()=="left"?(c.right+c._width/2):null}).top(function(){var c=this.scene.target[this.index];switch(this.name()){case"left":case"right":case"center":return c.top;case"top":return null}return c.top+c._height/2}).bottom(function(){var c=this.scene.target[this.index];return this.name()=="top"?(c.bottom+c._height/2):null}).textAlign(function(){switch(this.name()){case"left":return"right";case"bottom":case"top":case"center":return"center"}return"left"}).textBaseline(function(){switch(this.name()){case"right":case"left":case"center":return"middle";case"bottom":return"top"}return"bottom"})};pv.Dot.prototype.buildImplied=function(e){var f=e.shapeRadius,g=e.shapeSize,c=e.aspectRatio||1;if(f==null){if(g==null){g=e.shapeSize=20.25;f=e.shapeRadius=4.5}else{f=e.shapeRadius=Math.sqrt(g)}}else{if(g==null){g=e.shapeSize=f*f}}var d,b;if(c===1||c<0){d=b=2*f}else{d=2*f/Math.sqrt(c);b=c*d}e._height=d;e._width=b;pv.Mark.prototype.buildImplied.call(this,e)};pv.Dot.prototype.width=function(){return this.instance()._width};pv.Dot.prototype.height=function(){return this.instance()._height};pv.Dot.prototype.getShapeCore=function(b,d){var f=b[d];var e=f._width,c=f._height,a=f.left,g=f.top;switch(f.shape){case"diamond":e*=Math.SQRT2;c*=Math.SQRT2;case"square":case"cross":return new pv.Shape.Rect(a-c/2,g-e/2,c,e)}return new pv.Shape.Circle(a,g,f.shapeRadius)};pv.Label=function(){pv.Mark.call(this)};pv.Label.prototype=pv.extend(pv.Mark).property("text",String).property("font",String).property("textAngle",Number).property("textStyle",pv.color).property("textAlign",String).property("textBaseline",String).property("textMargin",Number).property("textDecoration",String).property("textShadow",String);pv.Label.prototype.type="label";pv.Label.prototype.defaults=new pv.Label().extend(pv.Mark.prototype.defaults).events("none").text(pv.identity).font("10px sans-serif").textAngle(0).textStyle("black").textAlign("left").textBaseline("bottom").textMargin(3);pv.Label.prototype.getShapeCore=function(b,e,m){var j=b[e];var k=pv.Text.measure(j.text,j.font);var c=j.left;var i=j.top;var g=k.width;var d=k.height;if(m>0&&m<=1){var a=m*g;var f=m*d;c+=a;i+=f;g-=a*2;d-=f*2}return pv.Label.getPolygon(g,d,j.textAlign,j.textBaseline,j.textAngle,j.textMargin).apply(pv.Transform.identity.translate(c,i))};pv.Label.getPolygon=function(f,i,d,e,b,c){var j,h;switch(e){case"middle":h=i/2;break;case"top":h=c+i;break;case"bottom":h=-c;break}switch(d){case"right":j=-c-f;break;case"center":j=-f/2;break;case"left":j=c;break}var a=new pv.Vector(j,h);var l=a.plus(f,0);var g=l.plus(0,-i);var k=a.plus(0,-i);if(b!==0){a=a.rotate(b);l=l.rotate(b);k=k.rotate(b);g=g.rotate(b)}return new pv.Shape.Polygon([a,l,g,k])};pv.Line=function(){pv.Mark.call(this)};pv.Line.prototype=pv.extend(pv.Mark).property("lineWidth",Number).property("lineJoin",String).property("strokeMiterLimit",Number).property("lineCap",String).property("strokeStyle",pv.fillStyle).property("strokeDasharray",String).property("fillStyle",pv.fillStyle).property("segmented",pv.Area.castSegmented).property("interpolate",String).property("eccentricity",Number).property("tension",Number);pv.Line.prototype.type="line";pv.Line.prototype.defaults=new pv.Line().extend(pv.Mark.prototype.defaults).lineWidth(1.5).strokeStyle(pv.Colors.category10().by(pv.parent)).interpolate("linear").eccentricity(0).tension(0.7).lineJoin("miter").strokeMiterLimit(8).lineCap("butt").strokeDasharray("none");pv.Line.prototype.bind=pv.Area.prototype.bind;pv.Line.prototype.buildInstance=pv.Area.prototype.buildInstance;pv.Line.prototype.anchor=function(a){return pv.Area.prototype.anchor.call(this,a).textAlign(function(b){switch(this.name()){case"left":return"right";case"bottom":case"top":case"center":return"center";case"right":return"left"}}).textBaseline(function(b){switch(this.name()){case"right":case"left":case"center":return"middle";case"top":return"bottom";case"bottom":return"top"}})};pv.Line.prototype.getShapeCore=function(a,c){var d=a[c];var b=c+1<a.length?a[c+1]:null;if(b==null||!b.visible){return new pv.Shape.Point(d.left,d.top)}return new pv.Shape.Line(d.left,d.top,b.left,b.top)};pv.Rule=function(){pv.Mark.call(this)};pv.Rule.prototype=pv.extend(pv.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("strokeStyle",pv.fillStyle).property("lineCap",String).property("strokeDasharray",String);pv.Rule.prototype.type="rule";pv.Rule.prototype.defaults=new pv.Rule().extend(pv.Mark.prototype.defaults).lineWidth(1).strokeStyle("black").antialias(false).lineCap("butt").strokeDasharray("none");pv.Rule.prototype.anchor=pv.Line.prototype.anchor;pv.Rule.prototype.buildImplied=function(e){var c=e.left,f=e.right,d=e.top,a=e.bottom;if((e.width!=null)||((c==null)&&(f==null))||((f!=null)&&(c!=null))){e.height=0}else{e.width=0}pv.Mark.prototype.buildImplied.call(this,e)};pv.Rule.prototype.getShapeCore=function(a,b){var c=a[b];return new pv.Shape.Line(c.left,c.top,c.left+c.width,c.top+c.height)};pv.Panel=function(){pv.Bar.call(this);this.children=[];this.root=this;this.$dom=pv.$&&pv.$.s};pv.Panel.prototype=pv.extend(pv.Bar).property("transform").property("overflow",String).property("canvas",function(a){return(typeof a==="string")?document.getElementById(a):a});pv.Panel.prototype.type="panel";pv.Panel.prototype.zOrderChildCount=0;pv.Panel.prototype.defaults=new pv.Panel().extend(pv.Bar.prototype.defaults).fillStyle(null).overflow("visible");pv.Panel.prototype.anchor=function(b){var a=pv.Bar.prototype.anchor.call(this,b);a.parent=this;return a};pv.Panel.prototype.add=function(a){var b=new a();b.parent=this;b.root=this.root;b.childIndex=this.children.length;this.children.push(b);return b};pv.Panel.prototype.bind=function(){pv.Mark.prototype.bind.call(this);var b=this.children;for(var a=0,c=b.length;a<c;a++){b[a].bind()}};pv.Panel.prototype.buildInstance=function(d){pv.Bar.prototype.buildInstance.call(this,d);if(!d.visible){return}var e=this.scale*d.transform.k;pv.Mark.prototype.index=-1;var g;var c=this.children;var a=d.children||(d.children=[]);for(var b=0,f=c.length;b<f;b++){g=c[b];g.scene=a[b];g.scale=e;g.build()}b=f;while(b--){g=c[b];a[b]=g.scene;delete g.scene;delete g.scale}a.length=f};pv.Panel.prototype.buildImplied=function(a){if(!this.parent){this._buildRootInstanceImplied(a)}if(!a.transform){a.transform=pv.Transform.identity}pv.Mark.prototype.buildImplied.call(this,a)};pv.Panel.prototype._buildRootInstanceImplied=function(a){var b=a.canvas;if(!b){a.canvas=this._rootInstanceGetInlineCanvas(a)}else{this._rootInstanceStealCanvas(a,b);this._rootInstanceInitCanvas(a,b)}};pv.Panel.prototype._rootInstanceStealCanvas=function(b,e){var d=e.$panel;if(d!==this){if(d){if(this.$lastCreateId){throw new pv.CanvasStolenError()}var a=d.$transition;a&&a.stop();this._updateCreateId(e)}e.$panel=this;pv.removeChildren(e)}else{this._updateCreateId(e)}};pv.Panel.prototype._rootInstanceInitCanvas=function(d,f){var a,b,e;if(d.width==null){e=pv.cssStyle(f);a=parseFloat(e("width")||0);d.width=a-d.left-d.right}if(d.height==null){e||(e=pv.cssStyle(f));b=parseFloat(e("height")||0);d.height=b-d.top-d.bottom}e=null};pv.Panel.prototype._rootInstanceGetInlineCanvas=function(b){var a=this.$canvas||(this.$canvas=[]);var e;if(!(e=a[this.index])){e=a[this.index]=document.createElement("span");if(this.$dom){this.$dom.parentNode.insertBefore(e,this.$dom)}else{var d=document.body;while(d.lastChild&&d.lastChild.tagName){d=d.lastChild}if(d!=document.body){d=d.parentNode}d.appendChild(e)}}return e};pv.Panel.prototype._updateCreateId=function(a){this.$lastCreateId=a.$pvCreateId=(a.$pvCreateId||0)+1};pv.Image=function(){pv.Bar.call(this)};pv.Image.prototype=pv.extend(pv.Bar).property("url",String).property("imageWidth",Number).property("imageHeight",Number);pv.Image.prototype.type="image";pv.Image.prototype.defaults=new pv.Image().extend(pv.Bar.prototype.defaults).fillStyle(null);pv.Image.prototype.image=function(a){this.$image=function(){var b=a.apply(this,arguments);return b==null?pv.Color.transparent:typeof b=="string"?pv.color(b):b};return this};pv.Image.prototype.bind=function(){pv.Bar.prototype.bind.call(this);var a=this.binds,b=this;do{a.image=b.$image}while(!a.image&&(b=b.proto))};pv.Image.prototype.buildImplied=function(l){pv.Bar.prototype.buildImplied.call(this,l);if(!l.visible){return}if(l.imageWidth==null){l.imageWidth=l.width}if(l.imageHeight==null){l.imageHeight=l.height}if((l.url==null)&&this.binds.image){var c=this.$canvas||(this.$canvas=document.createElement("canvas")),b=c.getContext("2d"),k=l.imageWidth,f=l.imageHeight,i=pv.Mark.stack,e;c.width=k;c.height=f;e=(l.image=b.createImageData(k,f)).data;i.unshift(null,null);for(var g=0,a=0;g<f;g++){i[1]=g;for(var j=0;j<k;j++){i[0]=j;var d=this.binds.image.apply(this,i);e[a++]=d.r;e[a++]=d.g;e[a++]=d.b;e[a++]=255*d.a}}i.splice(0,2)}};pv.Wedge=function(){pv.Mark.call(this)};pv.Wedge.prototype=pv.extend(pv.Mark).property("startAngle",Number).property("endAngle",Number).property("angle",Number).property("innerRadius",Number).property("outerRadius",Number).property("lineWidth",Number).property("strokeStyle",pv.fillStyle).property("lineJoin",String).property("strokeMiterLimit",Number).property("lineCap",String).property("strokeDasharray",String).property("fillStyle",pv.fillStyle);pv.Wedge.prototype.type="wedge";pv.Wedge.prototype.defaults=new pv.Wedge().extend(pv.Mark.prototype.defaults).startAngle(function(){var a=this.sibling();return a?a.endAngle:-Math.PI/2}).innerRadius(0).lineWidth(1.5).strokeStyle(null).fillStyle(pv.Colors.category20().by(pv.index)).lineJoin("miter").strokeMiterLimit(8).lineCap("butt").strokeDasharray("none");pv.Wedge.prototype.midRadius=function(){return(this.innerRadius()+this.outerRadius())/2};pv.Wedge.prototype.midAngle=function(){return(this.startAngle()+this.endAngle())/2};pv.Wedge.prototype.anchor=function(c){function b(e){return e.innerRadius||e.angle<2*Math.PI}function a(e){return(e.innerRadius+e.outerRadius)/2}function d(e){return(e.startAngle+e.endAngle)/2}return pv.Mark.prototype.anchor.call(this,c).left(function(){var e=this.scene.target[this.index];if(b(e)){switch(this.name()){case"outer":return e.left+e.outerRadius*Math.cos(d(e));case"inner":return e.left+e.innerRadius*Math.cos(d(e));case"start":return e.left+a(e)*Math.cos(e.startAngle);case"center":return e.left+a(e)*Math.cos(d(e));case"end":return e.left+a(e)*Math.cos(e.endAngle)}}return e.left}).top(function(){var e=this.scene.target[this.index];if(b(e)){switch(this.name()){case"outer":return e.top+e.outerRadius*Math.sin(d(e));case"inner":return e.top+e.innerRadius*Math.sin(d(e));case"start":return e.top+a(e)*Math.sin(e.startAngle);case"center":return e.top+a(e)*Math.sin(d(e));case"end":return e.top+a(e)*Math.sin(e.endAngle)}}return e.top}).textAlign(function(){var e=this.scene.target[this.index];if(b(e)){switch(this.name()){case"outer":return pv.Wedge.upright(d(e))?"right":"left";case"inner":return pv.Wedge.upright(d(e))?"left":"right"}}return"center"}).textBaseline(function(){var e=this.scene.target[this.index];if(b(e)){switch(this.name()){case"start":return pv.Wedge.upright(e.startAngle)?"top":"bottom";case"end":return pv.Wedge.upright(e.endAngle)?"bottom":"top"}}return"middle"}).textAngle(function(){var f=this.scene.target[this.index],e=0;if(b(f)){switch(this.name()){case"center":case"inner":case"outer":e=d(f);break;case"start":e=f.startAngle;break;case"end":e=f.endAngle;break}}return pv.Wedge.upright(e)?e:(e+Math.PI)})};pv.Wedge.upright=function(a){a=a%(2*Math.PI);a=(a<0)?(2*Math.PI+a):a;return(a<Math.PI/2)||(a>=3*Math.PI/2)};pv.Wedge.prototype.buildImplied=function(a){if(a.angle==null){a.angle=a.endAngle-a.startAngle}else{if(a.endAngle==null){a.endAngle=a.startAngle+a.angle}}pv.Mark.prototype.buildImplied.call(this,a)};pv.Wedge.prototype.getShapeCore=function(a,b){var c=a[b];return new pv.Shape.Wedge(c.left,c.top,c.innerRadius,c.outerRadius,c.startAngle,c.angle)};pv.Ease=(function(){function i(o){return function(p){return 1-o(1-p)}}function d(o){return function(p){return 0.5*(p<0.5?o(2*p):(2-o(2-2*p)))}}function b(o){return function(p){return p<0?0:p>1?1:Math.pow(p,o)}}function j(o){return 1-Math.cos(o*Math.PI/2)}function f(o){return o?Math.pow(2,10*(o-1))-0.001:0}function a(o){return -(Math.sqrt(1-o*o)-1)}function m(o,r){var q;if(!r){r=0.45}if(!o||o<1){o=1;q=r/4}else{q=r/(2*Math.PI)*Math.asin(1/o)}return function(p){return p<=0||p>=1?p:-(o*Math.pow(2,10*(--p))*Math.sin((p-q)*(2*Math.PI)/r))}}function h(o){if(!o){o=1.70158}return function(p){return p*p*((o+1)*p-o)}}function n(o){return o<1/2.75?7.5625*o*o:o<2/2.75?7.5625*(o-=1.5/2.75)*o+0.75:o<2.5/2.75?7.5625*(o-=2.25/2.75)*o+0.9375:7.5625*(o-=2.625/2.75)*o+0.984375}var l=b(2),e=b(3),c=m(),g=h();var k={linear:pv.identity,"quad-in":l,"quad-out":i(l),"quad-in-out":d(l),"quad-out-in":d(i(l)),"cubic-in":e,"cubic-out":i(e),"cubic-in-out":d(e),"cubic-out-in":d(i(e)),"sin-in":j,"sin-out":i(j),"sin-in-out":d(j),"sin-out-in":d(i(j)),"exp-in":f,"exp-out":i(f),"exp-in-out":d(f),"exp-out-in":d(i(f)),"circle-in":a,"circle-out":i(a),"circle-in-out":d(a),"circle-out-in":d(i(a)),"elastic-in":c,"elastic-out":i(c),"elastic-in-out":d(c),"elastic-out-in":d(i(c)),"back-in":g,"back-out":i(g),"back-in-out":d(g),"back-out-in":d(i(g)),"bounce-in":n,"bounce-out":i(n),"bounce-in-out":d(n),"bounce-out-in":d(i(n))};pv.ease=function(o){return k[o]};return{reverse:i,reflect:d,linear:function(){return pv.identity},sin:function(){return j},exp:function(){return f},circle:function(){return a},elastic:m,back:h,bounce:n,poly:b}})();pv.Transition=function(i){var l=this,j=pv.ease("cubic-in-out"),k=250,d,n,g;var p={top:1,left:1,right:1,bottom:1,width:1,height:1,innerRadius:1,outerRadius:1,radius:1,shapeRadius:1,shapeSize:1,startAngle:1,endAngle:1,angle:1,fillStyle:1,strokeStyle:1,lineWidth:1,eccentricity:1,tension:1,textAngle:1,textStyle:1,textMargin:1};var h=new pv.Transient();function a(r){var s={};for(var q=0;q<r.length;q++){var t=r[q];if(t.id){s[t.id]=t}}return s}function f(u,q,t,v){var s;if(q in p){var r=pv.Scale.interpolator(t[q],v[q]);s=function(w){t[q]=r(w)}}else{s=function(w){if(w>0.5){t[q]=v[q]}}}s.next=u.head;u.head=s}function e(t,s,u){for(var r in s){if(r=="children"){continue}if(s[r]==u[r]){continue}f(t,r,s,u)}if(s.children){for(var q=0;q<s.children.length;q++){m(t,s.children[q],u.children[q])}}}function m(v,z,q){var s=z.mark,t=a(z),w=a(q);for(var u=0;u<z.length;u++){var x=z[u],y=x.id?w[x.id]:q[u];x.index=u;if(!x.visible){continue}if(!(y&&y.visible)){var r=c(z,u,s.$exit,q);x.transition=y?2:(q.push(r),1);y=r}e(v,x,y)}for(var u=0;u<q.length;u++){var y=q[u],x=y.id?t[y.id]:z[u];if(!(x&&x.visible)&&y.visible){var r=c(q,u,s.$enter,z);if(!x){z.push(r)}else{z[x.index]=r}e(v,r,y)}}}function c(y,A,z,B){var D=pv.extend(y[A]),w=y.mark,u=w.root.scene,v=(z||h).$properties,C;if(B.target&&(C=B.target[B.length])){y=pv.extend(y);y.target=pv.extend(B.target);y.target[A]=C}var q={};for(var x=0;x<v.length;x++){q[v[x].name]=1}v=w.binds.optional.filter(function(r){return !(r.name in q)}).concat(v);w.context(y,A,function(){this.buildProperties(D,v);this.buildImplied(D)});w.root.scene=u;return D}function b(u){if(!g){g=true;for(var r=0,q=0;r<u.length;r++){var t=u[r];if(t.transition!=1){u[q++]=t;if(t.transition==2){t.visible=false}if(t.children){t.children.forEach(b)}}}u.length=q}}l.ease=function(q){return arguments.length?(j=typeof q=="function"?q:pv.ease(q),l):j};l.duration=function(q){return arguments.length?(k=Number(q),l):k};l.start=function(q){if(i.parent){throw new Error("Animated partial rendering is not supported.")}n=q;var w=i.root;if(w.$transition){try{w.$transition.stop()}catch(v){return o(false)}}var u,s;w.$transition=l;var x=i.scene;i.scene=null;var t=pv.Mark.prototype.index;try{i.bind();i.build();var r=i.scene;i.scene=x;pv.Mark.prototype.index=t;s=Date.now();u={};m(u,x,r)}catch(v){pv.Mark.prototype.index=t;return o(false)}if(!u.head){return o(true)}var y=function(){var A=Math.max(0,Math.min(1,(Date.now()-s)/k)),B=j(A);var z=u.head;do{z(B)}while((z=z.next));if(A===1){b(i.scene);pv.Scene.updateAll(x);o(true)}else{pv.Scene.updateAll(x)}};d=setInterval(function(){try{y()}catch(z){o(false)}},24)};l.stop=function(){o(true)};function o(s){var r=(i.root.$transition===l);if(r){i.root.$transition=null}if(d!=null){clearInterval(d);d=null}if(r){b(i.scene)}if(n){var q=n;n=null;q(s)}return s}};pv.Transient=function(a){pv.Mark.call(this);this.fillStyle(null).strokeStyle(null).textStyle(null);this.on=function(b){return a.on(b)}};pv.Transient.prototype=pv.extend(pv.Mark);pv.simulation=function(a){return new pv.Simulation(a)};pv.Simulation=function(b){for(var a=0;a<b.length;a++){this.particle(b[a])}};pv.Simulation.prototype.particle=function(a){a.next=this.particles;if(isNaN(a.px)){a.px=a.x}if(isNaN(a.py)){a.py=a.y}if(isNaN(a.fx)){a.fx=0}if(isNaN(a.fy)){a.fy=0}this.particles=a;return this};pv.Simulation.prototype.force=function(a){a.next=this.forces;this.forces=a;return this};pv.Simulation.prototype.constraint=function(a){a.next=this.constraints;this.constraints=a;return this};pv.Simulation.prototype.stabilize=function(f){var e;if(!arguments.length){f=3}for(var a=0;a<f;a++){var b=new pv.Quadtree(this.particles);for(e=this.constraints;e;e=e.next){e.apply(this.particles,b)}}for(var d=this.particles;d;d=d.next){d.px=d.x;d.py=d.y}return this};pv.Simulation.prototype.step=function(){var g,e,h;for(g=this.particles;g;g=g.next){var b=g.px,a=g.py;g.px=g.x;g.py=g.y;g.x+=g.vx=((g.x-b)+g.fx);g.y+=g.vy=((g.y-a)+g.fy)}var d=new pv.Quadtree(this.particles);for(h=this.constraints;h;h=h.next){h.apply(this.particles,d)}for(g=this.particles;g;g=g.next){g.fx=g.fy=0}for(e=this.forces;e;e=e.next){e.apply(this.particles,d)}};pv.Quadtree=function(h){var b;var c=Number.POSITIVE_INFINITY,f=c,a=Number.NEGATIVE_INFINITY,e=a;for(b=h;b;b=b.next){if(b.x<c){c=b.x}if(b.y<f){f=b.y}if(b.x>a){a=b.x}if(b.y>e){e=b.y}}var j=a-c,i=e-f;if(j>i){e=f+j}else{a=c+i}this.xMin=c;this.yMin=f;this.xMax=a;this.yMax=e;function g(s,r,m,q,l,o){if(isNaN(r.x)||isNaN(r.y)){return}if(s.leaf){if(s.p){if((Math.abs(s.p.x-r.x)+Math.abs(s.p.y-r.y))<0.01){d(s,r,m,q,l,o)}else{var k=s.p;s.p=null;d(s,k,m,q,l,o);d(s,r,m,q,l,o)}}else{s.p=r}}else{d(s,r,m,q,l,o)}}function d(q,m,o,u,l,s){var t=(o+l)*0.5,r=(u+s)*0.5,v=m.x>=t,k=m.y>=r;q.leaf=false;switch((k<<1)+v){case 0:q=q.c1||(q.c1=new pv.Quadtree.Node());break;case 1:q=q.c2||(q.c2=new pv.Quadtree.Node());break;case 2:q=q.c3||(q.c3=new pv.Quadtree.Node());break;case 3:q=q.c4||(q.c4=new pv.Quadtree.Node());break}if(v){o=t}else{l=t}if(k){u=r}else{s=r}g(q,m,o,u,l,s)}this.root=new pv.Quadtree.Node();for(b=h;b;b=b.next){g(this.root,b,c,f,a,e)}};pv.Quadtree.Node=function(){this.leaf=true;this.c1=null;this.c2=null;this.c3=null;this.c4=null;this.p=null};pv.Force={};pv.Force.charge=function(d){var e=2,i=1/e,f=500,g=1/f,b=0.9,a={};if(!arguments.length){d=-40}a.constant=function(j){if(arguments.length){d=Number(j);return a}return d};a.domain=function(k,j){if(arguments.length){e=Number(k);i=1/e;f=Number(j);g=1/f;return a}return[e,f]};a.theta=function(j){if(arguments.length){b=Number(j);return a}return b};function h(m){var j=0,l=0;m.cn=0;function k(n){h(n);m.cn+=n.cn;j+=n.cn*n.cx;l+=n.cn*n.cy}if(!m.leaf){if(m.c1){k(m.c1)}if(m.c2){k(m.c2)}if(m.c3){k(m.c3)}if(m.c4){k(m.c4)}}if(m.p){m.cn+=d;j+=d*m.p.x;l+=d*m.p.y}m.cx=j/m.cn;m.cy=l/m.cn}function c(m,k,l,w,j,u){var y=m.cx-k.x,x=m.cy-k.y,r=1/Math.sqrt(y*y+x*x);if((m.leaf&&(m.p!=k))||((j-l)*r<b)){if(r<g){return}if(r>i){r=i}var s=m.cn*r*r*r,q=y*s,o=x*s;k.fx+=q;k.fy+=o}else{if(!m.leaf){var v=(l+j)*0.5,t=(w+u)*0.5;if(m.c1){c(m.c1,k,l,w,v,t)}if(m.c2){c(m.c2,k,v,w,j,t)}if(m.c3){c(m.c3,k,l,t,v,u)}if(m.c4){c(m.c4,k,v,t,j,u)}if(r<g){return}if(r>i){r=i}if(m.p&&(m.p!=k)){var s=d*r*r*r,q=y*s,o=x*s;k.fx+=q;k.fy+=o}}}}a.apply=function(j,k){h(k.root);for(var l=j;l;l=l.next){c(k.root,l,k.xMin,k.yMin,k.xMax,k.yMax)}};return a};pv.Force.drag=function(a){var b={};if(!arguments.length){a=0.1}b.constant=function(c){if(arguments.length){a=c;return b}return a};b.apply=function(c){if(a){for(var d=c;d;d=d.next){d.fx-=a*d.vx;d.fy-=a*d.vy}}};return b};pv.Force.spring=function(c){var g=0.1,a=20,b,e,f={};if(!arguments.length){c=0.1}f.links=function(d){if(arguments.length){b=d;e=d.map(function(h){return 1/Math.sqrt(Math.max(h.sourceNode.linkDegree,h.targetNode.linkDegree))});return f}return b};f.constant=function(d){if(arguments.length){c=Number(d);return f}return c};f.damping=function(d){if(arguments.length){g=Number(d);return f}return g};f.length=function(d){if(arguments.length){a=Number(d);return f}return a};f.apply=function(r){for(var l=0;l<b.length;l++){var p=b[l].sourceNode,n=b[l].targetNode,t=p.x-n.x,s=p.y-n.y,m=Math.sqrt(t*t+s*s),q=m?(1/m):1,o=c*e[l],k=g*e[l],d=(o*(m-a)+k*(t*(p.vx-n.vx)+s*(p.vy-n.vy))*q)*q,j=-d*(m?t:(0.01*(0.5-Math.random()))),h=-d*(m?s:(0.01*(0.5-Math.random())));p.fx+=j;p.fy+=h;n.fx-=j;n.fy-=h}};return f};pv.Constraint={};pv.Constraint.collision=function(h){var d=1,e,g,b,f,a,c={};if(!arguments.length){e=10}c.repeat=function(j){if(arguments.length){d=Number(j);return c}return d};function i(r,o,q,A,m,y){if(!r.leaf){var z=(q+m)*0.5,x=(A+y)*0.5,w=x>b,j=x<a,s=z>g,B=z<f;if(w){if(r.c1&&s){i(r.c1,o,q,A,z,x)}if(r.c2&&B){i(r.c2,o,z,A,m,x)}}if(j){if(r.c3&&s){i(r.c3,o,q,x,z,y)}if(r.c4&&B){i(r.c4,o,z,x,m,y)}}}if(r.p&&(r.p!=o)){var D=o.x-r.p.x,C=o.y-r.p.y,t=Math.sqrt(D*D+C*C),v=e+h(r.p);if(t<v){var u=(t-v)/t*0.5;D*=u;C*=u;o.x-=D;o.y-=C;r.p.x+=D;r.p.y+=C}}}c.apply=function(m,n){var o,l,j=-Infinity;for(o=m;o;o=o.next){l=h(o);if(l>j){j=l}}for(var k=0;k<d;k++){for(o=m;o;o=o.next){l=(e=h(o))+j;g=o.x-l;f=o.x+l;b=o.y-l;a=o.y+l;i(n.root,o,n.xMin,n.yMin,n.xMax,n.yMax)}}};return c};pv.Constraint.position=function(c){var b=1,d={};if(!arguments.length){c=function(a){return a.fix}}d.alpha=function(a){if(arguments.length){b=Number(a);return d}return b};d.apply=function(e){for(var f=e;f;f=f.next){var a=c(f);if(a){f.x+=(a.x-f.x)*b;f.y+=(a.y-f.y)*b;f.fx=f.fy=f.vx=f.vy=0}}};return d};pv.Constraint.bound=function(){var b={},a,c;b.x=function(e,d){if(arguments.length){a={min:Math.min(e,d),max:Math.max(e,d)};return this}return a};b.y=function(e,d){if(arguments.length){c={min:Math.min(e,d),max:Math.max(e,d)};return this}return c};b.apply=function(d){if(a){for(var e=d;e;e=e.next){e.x=e.x<a.min?a.min:(e.x>a.max?a.max:e.x)}}if(c){for(var e=d;e;e=e.next){e.y=e.y<c.min?c.min:(e.y>c.max?c.max:e.y)}}};return b};pv.Layout=function(){pv.Panel.call(this)};pv.Layout.prototype=pv.extend(pv.Panel);pv.Layout.prototype.property=pv.Mark.prototype.localProperty;pv.Layout.Network=function(){pv.Layout.call(this);var a=this;this.$id=pv.id();(this.node=new pv.Mark().data(function(){return a.nodes()}).strokeStyle("#1f77b4").fillStyle("#fff").left(function(b){return b.x}).top(function(b){return b.y})).parent=this;this.link=new pv.Mark().extend(this.node).data(function(b){return[b.sourceNode,b.targetNode]}).fillStyle(null).lineWidth(function(c,b){return b.linkValue*1.5}).strokeStyle("rgba(0,0,0,.2)");this.link.add=function(b){return a.add(pv.Panel).data(function(){return a.links()}).add(b).extend(this)};(this.label=new pv.Mark().extend(this.node).textMargin(7).textBaseline("middle").text(function(b){return b.nodeName||b.nodeValue}).textAngle(function(c){var b=c.midAngle;return pv.Wedge.upright(b)?b:(b+Math.PI)}).textAlign(function(b){return pv.Wedge.upright(b.midAngle)?"left":"right"})).parent=this};pv.Layout.Network.prototype=pv.extend(pv.Layout).property("nodes",function(a){return a.map(function(c,b){if(typeof c!="object"){c={nodeValue:c}}c.index=b;return c})}).property("links",function(a){return a.map(function(b){if(isNaN(b.linkValue)){b.linkValue=isNaN(b.value)?1:b.value}return b})});pv.Layout.Network.prototype.reset=function(){this.$id=pv.id();return this};pv.Layout.Network.prototype.buildProperties=function(b,a){if((b.$id||0)<this.$id){pv.Layout.prototype.buildProperties.call(this,b,a)}};pv.Layout.Network.prototype.buildImplied=function(a){pv.Layout.prototype.buildImplied.call(this,a);if(a.$id>=this.$id){return true}a.$id=this.$id;a.nodes.forEach(function(b){b.linkDegree=0});a.links.forEach(function(c){var b=c.linkValue;(c.sourceNode||(c.sourceNode=a.nodes[c.source])).linkDegree+=b;(c.targetNode||(c.targetNode=a.nodes[c.target])).linkDegree+=b})};pv.Layout.Hierarchy=function(){pv.Layout.Network.call(this);this.link.strokeStyle("#ccc")};pv.Layout.Hierarchy.prototype=pv.extend(pv.Layout.Network);pv.Layout.Hierarchy.prototype.buildImplied=function(a){if(!a.links){a.links=pv.Layout.Hierarchy.links.call(this)}pv.Layout.Network.prototype.buildImplied.call(this,a)};pv.Layout.Hierarchy.links=function(){return this.nodes().filter(function(a){return a.parentNode}).map(function(a){return{sourceNode:a,targetNode:a.parentNode,linkValue:1}})};pv.Layout.Hierarchy.NodeLink={buildImplied:function(q){var a=q.nodes,e=q.orient,b=/^(top|bottom)$/.test(e),p=q.width,j=q.height;if(e=="radial"){var k=q.innerRadius,g=q.outerRadius;if(k==null){k=0}if(g==null){g=Math.min(p,j)/2}}function l(h){return h.parentNode?(h.depth*(g-k)+k):0}function d(h){return(h.parentNode?(h.breadth-0.25)*2*Math.PI:0)}function o(h){switch(e){case"left":return h.depth*p;case"right":return p-h.depth*p;case"top":return h.breadth*p;case"bottom":return p-h.breadth*p;case"radial":return p/2+l(h)*Math.cos(h.midAngle)}}function m(h){switch(e){case"left":return h.breadth*j;case"right":return j-h.breadth*j;case"top":return h.depth*j;case"bottom":return j-h.depth*j;case"radial":return j/2+l(h)*Math.sin(h.midAngle)}}for(var f=0;f<a.length;f++){var c=a[f];c.midAngle=e=="radial"?d(c):b?Math.PI/2:0;c.x=o(c);c.y=m(c);if(c.firstChild){c.midAngle+=Math.PI}}}};pv.Layout.Hierarchy.Fill={constructor:function(){this.node.strokeStyle("#fff").fillStyle("#ccc").width(function(a){return a.dx}).height(function(a){return a.dy}).innerRadius(function(a){return a.innerRadius}).outerRadius(function(a){return a.outerRadius}).startAngle(function(a){return a.startAngle}).angle(function(a){return a.angle});this.label.textAlign("center").left(function(a){return a.x+(a.dx/2)}).top(function(a){return a.y+(a.dy/2)});delete this.link},buildImplied:function(l){var o=l.nodes,f=l.orient,v=/^(top|bottom)$/.test(f),j=l.width,t=l.height,z=-o[0].minDepth;if(f=="radial"){var a=l.innerRadius,c=l.outerRadius;if(a==null){a=0}if(a){z*=2}if(c==null){c=Math.min(j,t)/2}}function A(i,h){return(i+h)/(1+h)}function e(h){switch(f){case"left":return A(h.minDepth,z)*j;case"right":return(1-A(h.maxDepth,z))*j;case"top":return h.minBreadth*j;case"bottom":return(1-h.maxBreadth)*j;case"radial":return j/2}}function d(h){switch(f){case"left":return h.minBreadth*t;case"right":return(1-h.maxBreadth)*t;case"top":return A(h.minDepth,z)*t;case"bottom":return(1-A(h.maxDepth,z))*t;case"radial":return t/2}}function k(h){switch(f){case"left":case"right":return(h.maxDepth-h.minDepth)/(1+z)*j;case"top":case"bottom":return(h.maxBreadth-h.minBreadth)*j;case"radial":return h.parentNode?(h.innerRadius+h.outerRadius)*Math.cos(h.midAngle):0}}function g(h){switch(f){case"left":case"right":return(h.maxBreadth-h.minBreadth)*t;case"top":case"bottom":return(h.maxDepth-h.minDepth)/(1+z)*t;case"radial":return h.parentNode?(h.innerRadius+h.outerRadius)*Math.sin(h.midAngle):0}}function b(h){return Math.max(0,A(h.minDepth,z/2))*(c-a)+a}function p(h){return A(h.maxDepth,z/2)*(c-a)+a}function q(h){return(h.parentNode?h.minBreadth-0.25:0)*2*Math.PI}function u(h){return(h.parentNode?h.maxBreadth-h.minBreadth:1)*2*Math.PI}for(var r=0;r<o.length;r++){var m=o[r];m.x=e(m);m.y=d(m);if(f=="radial"){m.innerRadius=b(m);m.outerRadius=p(m);m.startAngle=q(m);m.angle=u(m);m.midAngle=m.startAngle+m.angle/2}else{m.midAngle=v?-Math.PI/2:0}m.dx=k(m);m.dy=g(m)}}};pv.Layout.Grid=function(){pv.Layout.call(this);var a=this;(this.cell=new pv.Mark().data(function(){return a.scene[a.index].$grid}).width(function(){return a.width()/a.cols()}).height(function(){return a.height()/a.rows()}).left(function(){return this.width()*(this.index%a.cols())}).top(function(){return this.height()*Math.floor(this.index/a.cols())})).parent=this};pv.Layout.Grid.prototype=pv.extend(pv.Layout).property("rows").property("cols");pv.Layout.Grid.prototype.defaults=new pv.Layout.Grid().extend(pv.Layout.prototype.defaults).rows(1).cols(1);pv.Layout.Grid.prototype.buildImplied=function(a){pv.Layout.prototype.buildImplied.call(this,a);var b=a.rows,d=a.cols;if(typeof d=="object"){b=pv.transpose(d)}if(typeof b=="object"){a.$grid=pv.blend(b);a.rows=b.length;a.cols=b[0]?b[0].length:0}else{a.$grid=pv.repeat([a.data],b*d)}};pv.Layout.Stack=function(){pv.Layout.call(this);var e=this,c=function(){return null},f={t:c,l:c,r:c,b:c,w:c,h:c},a,d=e.buildImplied;function b(g){return function(){return f[g](this.parent.index,this.index)}}this.buildImplied=function(G){d.call(this,G);var V=G.layers,L=V.length,N,B=G.orient,T=/^(top|bottom)\b/.test(B),S=this.parent[T?"height":"width"](),A=[],z=[],C=[];var r=pv.Mark.stack,K={parent:{parent:this}};r.unshift(null);a=[];for(var R=0;R<L;R++){C[R]=[];z[R]=[];K.parent.index=R;r[0]=V[R];a[R]=this.$values.apply(K.parent,r);if(!R){N=a[R].length}r.unshift(null);for(var P=0;P<N;P++){r[0]=a[R][P];K.index=P;if(!R){A[P]=this.$x.apply(K,r)}C[R][P]=this.$y.apply(K,r)}r.shift()}r.shift();var t;switch(G.order){case"inside-out":var Q=C.map(function(h){return pv.max.index(h)}),U=pv.range(L).sort(function(i,h){return Q[i]-Q[h]}),E=C.map(function(h){return pv.sum(h)}),I=0,v=0,u=[],M=[];for(var R=0;R<L;R++){var P=U[R];if(I<v){I+=E[P];u.push(P)}else{v+=E[P];M.push(P)}}t=M.reverse().concat(u);break;case"reverse":t=pv.range(L-1,-1,-1);break;default:t=pv.range(L);break}switch(G.offset){case"silohouette":for(var P=0;P<N;P++){var K=0;for(var R=0;R<L;R++){K+=C[R][P]}z[t[0]][P]=(S-K)/2}break;case"wiggle":var K=0;for(var R=0;R<L;R++){K+=C[R][0]}z[t[0]][0]=K=(S-K)/2;for(var P=1;P<N;P++){var q=0,l=0,D=A[P]-A[P-1];for(var R=0;R<L;R++){q+=C[R][P]}for(var R=0;R<L;R++){var g=(C[t[R]][P]-C[t[R]][P-1])/(2*D);for(var O=0;O<R;O++){g+=(C[t[O]][P]-C[t[O]][P-1])/D}l+=g*C[t[R]][P]}z[t[0]][P]=K-=q?l/q*D:0}break;case"expand":for(var P=0;P<N;P++){z[t[0]][P]=0;var O=0;for(var R=0;R<L;R++){O+=C[R][P]}if(O){O=S/O;for(var R=0;R<L;R++){C[R][P]*=O}}else{O=S/L;for(var R=0;R<L;R++){C[R][P]=O}}}break;default:for(var P=0;P<N;P++){z[t[0]][P]=0}break}for(var P=0;P<N;P++){var K=z[t[0]][P];for(var R=1;R<L;R++){K+=C[t[R-1]][P];z[t[R]][P]=K}}var R=B.indexOf("-"),w=T?"h":"w",H=R<0?(T?"l":"b"):B.charAt(R+1),F=B.charAt(0);for(var J in f){f[J]=c}f[H]=function(k,h){return A[h]};f[F]=function(k,h){return z[k][h]};f[w]=function(k,h){return C[k][h]}};this.layer=new pv.Mark().data(function(){return a[this.parent.index]}).top(b("t")).left(b("l")).right(b("r")).bottom(b("b")).width(b("w")).height(b("h"));this.layer.add=function(g){return e.add(pv.Panel).data(function(){return e.layers()}).add(g).extend(this)}};pv.Layout.Stack.prototype=pv.extend(pv.Layout).property("orient",String).property("offset",String).property("order",String).property("layers");pv.Layout.Stack.prototype.defaults=new pv.Layout.Stack().extend(pv.Layout.prototype.defaults).orient("bottom-left").offset("zero").layers([[]]);pv.Layout.Stack.prototype.$x=pv.Layout.Stack.prototype.$y=function(){return 0};pv.Layout.Stack.prototype.x=function(a){this.$x=pv.functor(a);return this};pv.Layout.Stack.prototype.y=function(a){this.$y=pv.functor(a);return this};pv.Layout.Stack.prototype.$values=pv.identity;pv.Layout.Stack.prototype.values=function(a){this.$values=pv.functor(a);return this};pv.Layout.Band=function(){pv.Layout.call(this);var f=this,e=f.buildImplied,g,c;var h=new pv.Mark().data(function(){return c[this.parent.index]}).top(d("t")).left(d("l")).right(d("r")).bottom(d("b")).width(d("w")).height(d("h"));function d(i){return function(){return g[i](this.index,this.parent.index)}}this.buildImplied=function(q){e.call(this,q);g=Object.create(pv.Layout.Band.$baseItemProps);c=[];var n=q.layers,o=n.length;if(o>0){var l=q.orient,i=/^(top|bottom)\b/.test(l),m=this.parent[i?"height":"width"](),k=this._readData(n,c,q),j=k.length;if(q.bandOrder==="reverse"){k.reverse()}if(q.order==="reverse"){c.reverse();for(var p=0;p<j;p++){k[p].items.reverse()}}switch(q.layout){case"grouped":this._calcGrouped(k,o,q);break;case"stacked":this._calcStacked(k,o,m,q);break}this._bindItemProps(k,g,l,i)}};var b=this.item={end:this,add:function(i){return f.add(pv.Panel).data(function(){return f.layers()}).add(i).extend(h)},order:function(i){f.order(i);return this},w:function(i){f.$iw=pv.functor(i);return this},h:function(i){f.$ih=pv.functor(i);return this},horizontalRatio:function(i){f.$ihorizRatio=pv.functor(i);return this},verticalMargin:function(i){f.$ivertiMargin=pv.functor(i);return this}};var a=this.band={end:this,w:function(i){f.$bw=pv.functor(i);return this},x:function(i){f.$bx=pv.functor(i);return this},order:function(i){f.bandOrder(i);return this},differentialControl:function(i){f.$bDiffControl=pv.functor(i);return this}};this.band.item=b;this.item.band=a};pv.Layout.Band.$baseItemProps=(function(){var a=function(){return null};return{t:a,l:a,r:a,b:a,w:a,h:a}}());pv.Layout.Band.prototype=pv.extend(pv.Layout).property("orient",String).property("layout",String).property("layers").property("yZero",Number).property("verticalMode",String).property("horizontalMode",String).property("order",String).property("bandOrder",String);pv.Layout.Band.prototype.defaults=new pv.Layout.Band().extend(pv.Layout.prototype.defaults).orient("bottom-left").layout("grouped").yZero(0).layers([[]]);pv.Layout.Band.prototype.$bx=pv.Layout.Band.prototype.$bw=pv.Layout.Band.prototype.$bDiffControl=pv.Layout.Band.prototype.$iw=pv.Layout.Band.prototype.$ih=pv.Layout.Band.prototype.$ivertiMargin=pv.functor(0);pv.Layout.Band.prototype.$ihorizRatio=pv.functor(0.9);pv.Layout.Band.prototype.$values=pv.identity;pv.Layout.Band.prototype.values=function(a){this.$values=pv.functor(a);return this};pv.Layout.prototype._readData=function(f,h,g){var i=f.length,e=[],a;var k=pv.Mark.stack,c={parent:{parent:this}};k.unshift(null);for(var d=0;d<i;d++){c.parent.index=d;k[0]=f[d];var m=h[d]=this.$values.apply(c.parent,k);if(!d){a=m.length}k.unshift(null);for(var j=0;j<a;j++){k[0]=m[j];c.index=j;var n=e[j];if(!n){n=e[j]={horizRatio:this.$ihorizRatio.apply(c,k),vertiMargin:this.$ivertiMargin.apply(c,k),w:this.$bw.apply(c,k),x:this.$bx.apply(c,k),diffControl:this.$bDiffControl?this.$bDiffControl.apply(c,k):0,items:[]}}var p=this.$ih.apply(c,k);n.items[d]={y:(g.yZero||0),x:0,w:this.$iw.apply(c,k),h:p!=null?Math.abs(p):p,dir:p<0?-1:1}}k.shift()}k.shift();return e};pv.Layout.Band.prototype._calcGrouped=function(c,d,s){for(var t=0,k=c.length;t<k;t++){var h=c[t],j=h.items,f=h.w,p=h.horizRatio,g=0;for(var o=0;o<d;o++){g+=j[o].w}if(d===1){p=1}else{if(!(p>0&&p<=1)){p=1}}if(f==null){f=h.w=g/p}else{if(s.horizontalMode==="expand"){var m=p*f;if(g){var r=m/g;for(var o=0;o<d;o++){j[o].w*=r}}else{var n=m/d;for(var o=0;o<d;o++){j[o].w=n}}g=m}}var e=g/p,a=h.x-(e/2),i=d>1?((e-g)/(d-1)):0;for(var o=0;o<d;o++){var q=j[o];q.x=a;a+=q.w+i;if(q.dir<0){q.y-=q.h}}}};pv.Layout.Band.prototype._calcStacked=function(e,f,a,v){var o=e.length,n;if(v.verticalMode==="expand"){for(var x=0;x<o;x++){n=e[x].items;var y=null,k=0;for(var p=0;p<f;p++){var u=n[p];u.dir=1;var r=u.h;if(r!=null){k++;y+=r}}if(k){if(y){var A=a/y;for(var p=0;p<f;p++){var r=n[p].h;if(r!=null){n[p].h=r*A}}}else{var j=a/k;for(var p=0;p<f;p++){var r=n[p].h;if(r!=null){n[p].h=j}}}}}}var g=v.yZero,i=g;for(var x=0;x<o;x++){var m=e[x],t=m.x,q=m.diffControl,s=(q<0),w=Math.max(0,m.vertiMargin);n=m.items;var d=this._layoutItemsOfDir(+1,s,n,w,t,i),z=null;if(d.existsOtherDir){z=this._layoutItemsOfDir(-1,s,n,w,t,i)}if(q){if(Math.abs(q)===1){var c=i;i=d.yOffset;if(z){i-=(c-z.yOffset)}}}else{i=g}}};pv.Layout.Band.prototype._layoutItemsOfDir=function(n,o,j,f,m,c){var g=false,a=f/2,p=(o?-n:n),e=o;for(var b=0,k=j.length;b<k;b+=1){var q=j[e?(k-b-1):b];if(q.dir===n){var d=q.h||0;if(p>0){q.y=c+a;c+=d}else{q.y=c-(d-a);c-=d}var i=d-f;q.h=i>0?i:0;q.x=m-q.w/2}else{g=true}}return{existsOtherDir:g,yOffset:c}};pv.Layout.Band.prototype._bindItemProps=function(c,b,d,a){var f=d.indexOf("-"),e=a?"h":"w",i=a?"w":"h",h=f<0?(a?"l":"b"):d.charAt(f+1),g=d.charAt(0);b[h]=function(j,k){return c[j].items[k].x};b[g]=function(j,k){return c[j].items[k].y};b[i]=function(j,k){return c[j].items[k].w};b[e]=function(j,k){return c[j].items[k].h||0}};pv.Layout.Treemap=function(){pv.Layout.Hierarchy.call(this);this.node.strokeStyle("#fff").fillStyle("rgba(31, 119, 180, .25)").width(function(a){return a.dx}).height(function(a){return a.dy});this.label.visible(function(a){return !a.firstChild}).left(function(a){return a.x+(a.dx/2)}).top(function(a){return a.y+(a.dy/2)}).textAlign("center").textAngle(function(a){return a.dx>a.dy?0:-Math.PI/2});(this.leaf=new pv.Mark().extend(this.node).fillStyle(null).strokeStyle(null).visible(function(a){return !a.firstChild})).parent=this;delete this.link};pv.Layout.Treemap.prototype=pv.extend(pv.Layout.Hierarchy).property("round",Boolean).property("mode",String).property("order",String);pv.Layout.Treemap.prototype.defaults=new pv.Layout.Treemap().extend(pv.Layout.Hierarchy.prototype.defaults).mode("squarify").order("ascending");pv.Layout.Treemap.prototype.$size=function(a){return Number(a.nodeValue)};pv.Layout.Treemap.prototype.$padLeft=pv.Layout.Treemap.prototype.$padRight=pv.Layout.Treemap.prototype.$padBottom=pv.Layout.Treemap.prototype.$padTop=function(){return 0};pv.Layout.Treemap.prototype.size=function(a){this.$size=pv.functor(a);return this};pv.Layout.Treemap.prototype.padding=function(a){a=pv.functor(a);return this.paddingLeft(a).paddingRight(a).paddingTop(a).paddingBottom(a)};pv.Layout.Treemap.prototype.paddingLeft=function(a){if(arguments.length){this.$padLeft=pv.functor(a);return this}return this.$padLeft};pv.Layout.Treemap.prototype.paddingRight=function(a){if(arguments.length){this.$padRight=pv.functor(a);return this}return this.$padRight};pv.Layout.Treemap.prototype.paddingBottom=function(a){if(arguments.length){this.$padBottom=pv.functor(a);return this}return this.$padBottom};pv.Layout.Treemap.prototype.paddingTop=function(a){if(arguments.length){this.$padTop=pv.functor(a);return this}return this.$padTop};pv.Layout.Treemap.prototype.buildImplied=function(o){if(pv.Layout.Hierarchy.prototype.buildImplied.call(this,o)){return}var f=this,b=o.nodes,i=b[0],j=pv.Mark.stack,c=0,l=0,h=0,a=0,n=function(p){return p.size},m=o.round?Math.round:Number,e=o.mode;function k(B,t,p,z,v,A,s){for(var r=0,u=0;r<B.length;r++){var q=B[r];if(p){q.x=z+u;q.y=v;u+=q.dx=m(A*q.size/t);q.dy=s}else{q.x=z;q.y=v+u;q.dx=A;u+=q.dy=m(s*q.size/t)}}if(q){if(p){q.dx+=A-u}else{q.dy+=s-u}}}function g(w,p){var x=-Infinity,q=Infinity,u=0;for(var t=0;t<w.length;t++){var v=w[t].size;if(v<q){q=v}if(v>x){x=v}u+=v}u=u*u;p=p*p;return Math.max(p*x/u,u/(p*q))}function d(t,z){var q=t.parentNode,E=t.x,D=t.y,F=t.dx,C=t.dy;if(q){E+=q.paddingLeft;D+=q.paddingTop;F+=-q.paddingLeft-q.paddingRight,C+=-q.paddingTop-q.paddingBottom}if(e!="squarify"){k(t.childNodes,t.size,e=="slice"?true:e=="dice"?false:z&1,E,D,F,C);return}var G=[],B=Infinity,u=Math.min(F,C),v=F*C/t.size;if(t.size<=0){return}t.visitBefore(function(p){p.size*=v});function A(y){var p=F==u,w=pv.sum(y,n),x=u?m(w/u):0;k(y,w,p,E,D,p?F:x,p?x:C);if(p){D+=x;C-=x}else{E+=x;F-=x}u=Math.min(F,C);return p}var s=t.childNodes.slice();while(s.length){var r=s[s.length-1];if(!r.size){s.pop();continue}G.push(r);var v=g(G,u);if(v<=B){s.pop();B=v}else{G.pop();A(G);G.length=0;B=Infinity}}if(A(G)){for(var z=0;z<G.length;z++){G[z].dy+=C}}else{for(var z=0;z<G.length;z++){G[z].dx+=F}}}j.unshift(null);try{i.visitAfter(function(r,p){r.depth=p;r.x=r.y=r.dx=r.dy=0;j[0]=r;var q;if(r.firstChild){r.size=pv.sum(r.childNodes,n);r.paddingRight=+f.$padRight.apply(f,j)||0;r.paddingLeft=+f.$padLeft.apply(f,j)||0;r.paddingBottom=+f.$padBottom.apply(f,j)||0;r.paddingTop=+f.$padTop.apply(f,j)||0}else{r.size=f.$size.apply(f,j)}})}finally{j.shift()}switch(o.order){case"ascending":i.sort(function(q,p){return q.size-p.size});break;case"descending":i.sort(function(q,p){return p.size-q.size});break;case"reverse":i.reverse();break}i.x=0;i.y=0;i.dx=o.width;i.dy=o.height;i.visitBefore(d)};pv.Layout.Tree=function(){pv.Layout.Hierarchy.call(this)};pv.Layout.Tree.prototype=pv.extend(pv.Layout.Hierarchy).property("group",Number).property("breadth",Number).property("depth",Number).property("orient",String);pv.Layout.Tree.prototype.defaults=new pv.Layout.Tree().extend(pv.Layout.Hierarchy.prototype.defaults).group(1).breadth(15).depth(60).orient("top");pv.Layout.Tree.prototype.buildImplied=function(k){if(pv.Layout.Hierarchy.prototype.buildImplied.call(this,k)){return}var n=k.nodes,g=k.orient,v=k.depth,j=k.breadth,b=k.group,i=k.width,r=k.height;function t(w){var s,y,h;if(!w.firstChild){if(s=w.previousSibling){w.prelim=s.prelim+a(w.depth,true)}}else{s=w.firstChild;y=w.lastChild;h=s;for(var A=s;A;A=A.nextSibling){t(A);h=m(A,h)}f(w);var x=0.5*(s.prelim+y.prelim);if(s=w.previousSibling){w.prelim=s.prelim+a(w.depth,true);w.mod=w.prelim-x}else{w.prelim=x}}}function o(s,h,w){s.breadth=s.prelim+h;h+=s.mod;for(var x=s.firstChild;x;x=x.nextSibling){o(x,h,w)}}function m(J,H){var I=J.previousSibling;if(I){var y=J,x=J,B=I,A=J.parentNode.firstChild,D=y.mod,C=x.mod,F=B.mod,E=A.mod,G=z(B),h=q(y);while(G&&h){B=G;y=h;A=q(A);x=z(x);x.ancestor=J;var s=(B.prelim+F)-(y.prelim+D)+a(B.depth,false);if(s>0){l(u(B,J,H),J,s);D+=s;C+=s}F+=B.mod;D+=y.mod;E+=A.mod;C+=x.mod;G=z(B);h=q(y)}if(G&&!z(x)){x.thread=G;x.mod+=F-C}if(h&&!q(A)){A.thread=h;A.mod+=D-E;H=J}}return H}function q(h){return h.firstChild||h.thread}function z(h){return h.lastChild||h.thread}function l(w,s,h){var x=s.number-w.number;s.change-=h/x;s.shift+=h;w.change+=h/x;s.prelim+=h;s.mod+=h}function f(s){var h=0,x=0;for(var w=s.lastChild;w;w=w.previousSibling){w.prelim+=h;w.mod+=h;x+=w.change;h+=w.shift+x}}function u(w,s,h){return(w.ancestor.parentNode==s.parentNode)?w.ancestor:h}function a(s,h){return(h?1:(b+1))/((g=="radial")?s:1)}var p=n[0];p.visitAfter(function(h,s){h.ancestor=h;h.prelim=0;h.mod=0;h.change=0;h.shift=0;h.number=h.previousSibling?(h.previousSibling.number+1):0;h.depth=s});t(p);o(p,-p.prelim,0);function e(h){return(g=="radial")?h.breadth/v:0}function d(h){switch(g){case"left":return h.depth;case"right":return i-h.depth;case"top":case"bottom":return h.breadth+i/2;case"radial":return i/2+h.depth*Math.cos(e(h))}}function c(h){switch(g){case"left":case"right":return h.breadth+r/2;case"top":return h.depth;case"bottom":return r-h.depth;case"radial":return r/2+h.depth*Math.sin(e(h))}}p.visitAfter(function(h){h.breadth*=j;h.depth*=v;h.midAngle=e(h);h.x=d(h);h.y=c(h);if(h.firstChild){h.midAngle+=Math.PI}delete h.breadth;delete h.depth;delete h.ancestor;delete h.prelim;delete h.mod;delete h.change;delete h.shift;delete h.number;delete h.thread})};pv.Layout.Indent=function(){pv.Layout.Hierarchy.call(this);this.link.interpolate("step-after")};pv.Layout.Indent.prototype=pv.extend(pv.Layout.Hierarchy).property("depth",Number).property("breadth",Number);pv.Layout.Indent.prototype.defaults=new pv.Layout.Indent().extend(pv.Layout.Hierarchy.prototype.defaults).depth(15).breadth(15);pv.Layout.Indent.prototype.buildImplied=function(c){if(pv.Layout.Hierarchy.prototype.buildImplied.call(this,c)){return}var b=c.nodes,g=c.breadth,f=c.depth,e=0,d=0;function a(k,j,h){k.x=e+h++*f;k.y=d+j++*g;k.midAngle=0;for(var i=k.firstChild;i;i=i.nextSibling){j=a(i,j,h)}return j}a(b[0],1,1)};pv.Layout.Pack=function(){pv.Layout.Hierarchy.call(this);this.node.shapeRadius(function(a){return a.radius}).strokeStyle("rgb(31, 119, 180)").fillStyle("rgba(31, 119, 180, .25)");this.label.textAlign("center");delete this.link};pv.Layout.Pack.prototype=pv.extend(pv.Layout.Hierarchy).property("spacing",Number).property("order",String);pv.Layout.Pack.prototype.defaults=new pv.Layout.Pack().extend(pv.Layout.Hierarchy.prototype.defaults).spacing(1).order("ascending");pv.Layout.Pack.prototype.$radius=function(){return 1};pv.Layout.Pack.prototype.size=function(a){this.$radius=typeof a=="function"?function(){return Math.sqrt(a.apply(this,arguments))}:(a=Math.sqrt(a),function(){return a});return this};pv.Layout.Pack.prototype.buildImplied=function(n){if(pv.Layout.Hierarchy.prototype.buildImplied.call(this,n)){return}var i=this,a=n.nodes,j=a[0];function f(k){var h=pv.Mark.stack;h.unshift(null);for(var o=0,q=k.length;o<q;o++){var p=k[o];if(!p.firstChild){p.radius=i.$radius.apply(i,(h[0]=p,h))}}h.shift()}function m(o){var h=[];for(var k=o.firstChild;k;k=k.nextSibling){if(k.firstChild){k.radius=m(k)}k.n=k.p=k;h.push(k)}switch(n.order){case"ascending":h.sort(function(q,p){return q.radius-p.radius});break;case"descending":h.sort(function(q,p){return p.radius-q.radius});break;case"reverse":h.reverse();break}return e(h)}function e(z){var D=Infinity,H=-Infinity,h=Infinity,t=-Infinity,G,F,E,B,A;function p(k){D=Math.min(k.x-k.radius,D);H=Math.max(k.x+k.radius,H);h=Math.min(k.y-k.radius,h);t=Math.max(k.y+k.radius,t)}function q(J,k){var K=J.n;J.n=k;k.p=J;k.n=K;K.p=k}function I(J,k){J.n=k;k.p=J}function r(K,k){var L=k.x-K.x,J=k.y-K.y,M=K.radius+k.radius;return(M*M-L*L-J*J)>0.001}G=z[0];G.x=-G.radius;G.y=0;p(G);if(z.length>1){F=z[1];F.x=F.radius;F.y=0;p(F);if(z.length>2){E=z[2];d(G,F,E);p(E);q(G,E);G.p=E;q(E,F);F=G.n;for(var C=3;C<z.length;C++){d(G,F,E=z[C]);var o=0,u=1,s=1;for(B=F.n;B!=F;B=B.n,u++){if(r(B,E)){o=1;break}}if(o==1){for(A=G.p;A!=B.p;A=A.p,s++){if(r(A,E)){if(s<u){o=-1;B=A}break}}}if(o==0){q(G,E);F=E;p(E)}else{if(o>0){I(G,B);F=B;C--}else{if(o<0){I(B,F);G=B;C--}}}}}}var w=(D+H)/2,v=(h+t)/2,x=0;for(var C=0;C<z.length;C++){var y=z[C];y.x-=w;y.y-=v;x=Math.max(x,y.radius+Math.sqrt(y.x*y.x+y.y*y.y))}return x+n.spacing}function d(s,q,p){var y=q.radius+p.radius,v=s.radius+p.radius,z=q.x-s.x,w=q.y-s.y,u=Math.sqrt(z*z+w*w),t=(v*v+u*u-y*y)/(2*v*u),k=Math.acos(t),r=t*v,o=Math.sin(k)*v;z/=u;w/=u;p.x=s.x+r*z+o*w;p.y=s.y+r*w-o*z}function b(r,h,q,o){for(var p=r.firstChild;p;p=p.nextSibling){p.x+=r.x;p.y+=r.y;b(p,h,q,o)}r.x=h+o*r.x;r.y=q+o*r.y;r.radius*=o}f(a);j.x=0;j.y=0;j.radius=m(j);var l=this.width(),g=this.height(),c=1/Math.max(2*j.radius/l,2*j.radius/g);b(j,l/2,g/2,c)};pv.Layout.Force=function(){pv.Layout.Network.call(this);this.link.lineWidth(function(b,a){return Math.sqrt(a.linkValue)*1.5});this.label.textAlign("center")};pv.Layout.Force.prototype=pv.extend(pv.Layout.Network).property("bound",Boolean).property("iterations",Number).property("dragConstant",Number).property("chargeConstant",Number).property("chargeMinDistance",Number).property("chargeMaxDistance",Number).property("chargeTheta",Number).property("springConstant",Number).property("springDamping",Number).property("springLength",Number);pv.Layout.Force.prototype.defaults=new pv.Layout.Force().extend(pv.Layout.Network.prototype.defaults).dragConstant(0.1).chargeConstant(-40).chargeMinDistance(2).chargeMaxDistance(500).chargeTheta(0.9).springConstant(0.1).springDamping(0.3).springLength(20);pv.Layout.Force.prototype.buildImplied=function(r){if(pv.Layout.Network.prototype.buildImplied.call(this,r)){var l=r.$force;if(l){l.next=this.binds.$force;this.binds.$force=l}return}var m=this,a=r.nodes,q=r.links,e=r.iterations,p=r.width,j=r.height;for(var g=0,c;g<a.length;g++){c=a[g];if(isNaN(c.x)){c.x=p/2+40*Math.random()-20}if(isNaN(c.y)){c.y=j/2+40*Math.random()-20}}var o=pv.simulation(a);o.force(pv.Force.drag(r.dragConstant));o.force(pv.Force.charge(r.chargeConstant).domain(r.chargeMinDistance,r.chargeMaxDistance).theta(r.chargeTheta));o.force(pv.Force.spring(r.springConstant).damping(r.springDamping).length(r.springLength).links(q));o.constraint(pv.Constraint.position());if(r.bound){o.constraint(pv.Constraint.bound().x(6,p-6).y(6,j-6))}function d(f){return f.fix?1:f.vx*f.vx+f.vy*f.vy}if(e==null){o.step();o.step();var b=r.$force=this.binds.$force={next:this.binds.$force,nodes:a,min:0.0001*(q.length+1),sim:o};if(!this.$timer){this.$timer=setInterval(function(){var h=false;for(var i=m.binds.$force;i;i=i.next){if(pv.max(i.nodes,d)>i.min){i.sim.step();h=true}}if(h){m.render()}},42)}}else{for(var g=0;g<e;g++){o.step()}}};pv.Layout.Cluster=function(){pv.Layout.Hierarchy.call(this);var a,b=this.buildImplied;this.buildImplied=function(c){b.call(this,c);a=/^(top|bottom)$/.test(c.orient)?"step-before":/^(left|right)$/.test(c.orient)?"step-after":"linear"};this.link.interpolate(function(){return a})};pv.Layout.Cluster.prototype=pv.extend(pv.Layout.Hierarchy).property("group",Number).property("orient",String).property("innerRadius",Number).property("outerRadius",Number);pv.Layout.Cluster.prototype.defaults=new pv.Layout.Cluster().extend(pv.Layout.Hierarchy.prototype.defaults).group(0).orient("top");pv.Layout.Cluster.prototype.buildImplied=function(c){if(pv.Layout.Hierarchy.prototype.buildImplied.call(this,c)){return}var a=c.nodes[0],f=c.group,h,g,e=0,b=0.5-f/2;var d=undefined;a.visitAfter(function(i){if(i.firstChild){i.depth=1+pv.max(i.childNodes,function(j){return j.depth})}else{if(f&&(d!=i.parentNode)){d=i.parentNode;e+=f}e++;i.depth=0}});h=1/e;g=1/a.depth;var d=undefined;a.visitAfter(function(i){if(i.firstChild){i.breadth=pv.mean(i.childNodes,function(j){return j.breadth})}else{if(f&&(d!=i.parentNode)){d=i.parentNode;b+=f}i.breadth=h*b++}i.depth=1-i.depth*g});a.visitAfter(function(i){i.minBreadth=i.firstChild?i.firstChild.minBreadth:(i.breadth-h/2);i.maxBreadth=i.firstChild?i.lastChild.maxBreadth:(i.breadth+h/2)});a.visitBefore(function(i){i.minDepth=i.parentNode?i.parentNode.maxDepth:0;i.maxDepth=i.parentNode?(i.depth+a.depth):(i.minDepth+2*a.depth)});a.minDepth=-g;pv.Layout.Hierarchy.NodeLink.buildImplied.call(this,c)};pv.Layout.Cluster.Fill=function(){pv.Layout.Cluster.call(this);pv.Layout.Hierarchy.Fill.constructor.call(this)};pv.Layout.Cluster.Fill.prototype=pv.extend(pv.Layout.Cluster);pv.Layout.Cluster.Fill.prototype.buildImplied=function(a){if(pv.Layout.Cluster.prototype.buildImplied.call(this,a)){return}pv.Layout.Hierarchy.Fill.buildImplied.call(this,a)};pv.Layout.Partition=function(){pv.Layout.Hierarchy.call(this)};pv.Layout.Partition.prototype=pv.extend(pv.Layout.Hierarchy).property("order",String).property("orient",String).property("innerRadius",Number).property("outerRadius",Number);pv.Layout.Partition.prototype.defaults=new pv.Layout.Partition().extend(pv.Layout.Hierarchy.prototype.defaults).orient("top");pv.Layout.Partition.prototype.$size=function(){return 1};pv.Layout.Partition.prototype.size=function(a){this.$size=a;return this};pv.Layout.Partition.prototype.buildImplied=function(c){if(pv.Layout.Hierarchy.prototype.buildImplied.call(this,c)){return}var d=this,b=c.nodes[0],a=pv.Mark.stack,e=0;a.unshift(null);b.visitAfter(function(g,f){if(f>e){e=f}g.size=g.firstChild?pv.sum(g.childNodes,function(h){return h.size}):d.$size.apply(d,(a[0]=g,a))});a.shift();switch(c.order){case"ascending":b.sort(function(g,f){return g.size-f.size});break;case"descending":b.sort(function(f,g){return g.size-f.size});break}b.minBreadth=0;b.breadth=0.5;b.maxBreadth=1;b.visitBefore(function(i){var f=i.minBreadth,g=i.maxBreadth-f;for(var h=i.firstChild;h;h=h.nextSibling){h.minBreadth=f;f+=(h.size/i.size)*g;h.maxBreadth=f;h.breadth=(f+h.minBreadth)/2}});b.visitAfter(function(g,f){g.minDepth=(f-1)/e;g.maxDepth=(g.depth=f/e)});pv.Layout.Hierarchy.NodeLink.buildImplied.call(this,c)};pv.Layout.Partition.Fill=function(){pv.Layout.Partition.call(this);pv.Layout.Hierarchy.Fill.constructor.call(this)};pv.Layout.Partition.Fill.prototype=pv.extend(pv.Layout.Partition);pv.Layout.Partition.Fill.prototype.buildImplied=function(a){if(pv.Layout.Partition.prototype.buildImplied.call(this,a)){return}pv.Layout.Hierarchy.Fill.buildImplied.call(this,a)};pv.Layout.Arc=function(){pv.Layout.Network.call(this);var b,d,a,c=this.buildImplied;this.buildImplied=function(e){c.call(this,e);d=e.directed;b=e.orient=="radial"?"linear":"polar";a=e.orient=="right"||e.orient=="top"};this.link.data(function(g){var f=g.sourceNode,e=g.targetNode;return a!=(d||(f.breadth<e.breadth))?[f,e]:[e,f]}).interpolate(function(){return b})};pv.Layout.Arc.prototype=pv.extend(pv.Layout.Network).property("orient",String).property("directed",Boolean);pv.Layout.Arc.prototype.defaults=new pv.Layout.Arc().extend(pv.Layout.Network.prototype.defaults).orient("bottom");pv.Layout.Arc.prototype.sort=function(a){this.$sort=a;return this};pv.Layout.Arc.prototype.buildImplied=function(t){if(pv.Layout.Network.prototype.buildImplied.call(this,t)){return}var c=t.nodes,f=t.orient,j=this.$sort,l=pv.range(c.length),q=t.width,k=t.height,a=Math.min(q,k)/2;if(j){l.sort(function(i,h){return j(c[i],c[h])})}function e(h){switch(f){case"top":return -Math.PI/2;case"bottom":return Math.PI/2;case"left":return Math.PI;case"right":return 0;case"radial":return(h-0.25)*2*Math.PI}}function p(h){switch(f){case"top":case"bottom":return h*q;case"left":return 0;case"right":return q;case"radial":return q/2+a*Math.cos(e(h))}}function o(h){switch(f){case"top":return 0;case"bottom":return k;case"left":case"right":return h*k;case"radial":return k/2+a*Math.sin(e(h))}}for(var g=0;g<c.length;g++){var d=c[l[g]],m=d.breadth=(g+0.5)/c.length;d.x=p(m);d.y=o(m);d.midAngle=e(m)}};pv.Layout.Horizon=function(){pv.Layout.call(this);var d=this,e,h,b,g,f,a,c=this.buildImplied;this.buildImplied=function(i){c.call(this,i);e=i.bands;h=i.mode;b=Math.round((h=="color"?0.5:1)*i.height);g=i.backgroundStyle;f=pv.ramp(g,i.negativeStyle).domain(0,e);a=pv.ramp(g,i.positiveStyle).domain(0,e)};var e=new pv.Panel().data(function(){return pv.range(e*2)}).overflow("hidden").height(function(){return b}).top(function(j){return h=="color"?(j&1)*b:0}).fillStyle(function(j){return j?null:g});this.band=new pv.Mark().top(function(k,j){return h=="mirror"&&j&1?(j+1>>1)*b:null}).bottom(function(k,j){return h=="mirror"?(j&1?null:(j+1>>1)*-b):((j&1||-1)*(j+1>>1)*b)}).fillStyle(function(k,j){return(j&1?f:a)((j>>1)+1)});this.band.add=function(i){return d.add(pv.Panel).extend(e).add(i).extend(this)}};pv.Layout.Horizon.prototype=pv.extend(pv.Layout).property("bands",Number).property("mode",String).property("backgroundStyle",pv.fillStyle).property("positiveStyle",pv.fillStyle).property("negativeStyle",pv.fillStyle);pv.Layout.Horizon.prototype.defaults=new pv.Layout.Horizon().extend(pv.Layout.prototype.defaults).bands(2).mode("offset").backgroundStyle("white").positiveStyle("#1f77b4").negativeStyle("#d62728");pv.Layout.Rollup=function(){pv.Layout.Network.call(this);var d=this,b,a,c=d.buildImplied;this.buildImplied=function(e){c.call(this,e);b=e.$rollup.nodes;a=e.$rollup.links};this.node.data(function(){return b}).shapeSize(function(e){return e.nodes.length*20});this.link.interpolate("polar").eccentricity(0.8);this.link.add=function(e){return d.add(pv.Panel).data(function(){return a}).add(e).extend(this)}};pv.Layout.Rollup.prototype=pv.extend(pv.Layout.Network).property("directed",Boolean);pv.Layout.Rollup.prototype.x=function(a){this.$x=pv.functor(a);return this};pv.Layout.Rollup.prototype.y=function(a){this.$y=pv.functor(a);return this};pv.Layout.Rollup.prototype.buildImplied=function(p){if(pv.Layout.Network.prototype.buildImplied.call(this,p)){return}var u=p.nodes,a=p.links,d=p.directed,t=u.length,j=[],h=[],B=0,v={},b={};function q(n){return j[n]+","+h[n]}var f=pv.Mark.stack,r={parent:this};f.unshift(null);for(var z=0;z<t;z++){r.index=z;f[0]=u[z];j[z]=this.$x.apply(r,f);h[z]=this.$y.apply(r,f)}f.shift();for(var z=0;z<u.length;z++){var l=q(z),k=v[l];if(!k){k=v[l]=pv.extend(u[z]);k.index=B++;k.x=j[z];k.y=h[z];k.nodes=[]}k.nodes.push(u[z])}for(var z=0;z<a.length;z++){var w=a[z].sourceNode,C=a[z].targetNode,A=v[q(w.index)],c=v[q(C.index)],g=!d&&A.index>c.index,e=g?c.index+","+A.index:A.index+","+c.index,m=b[e];if(!m){m=b[e]={sourceNode:A,targetNode:c,linkValue:0,links:[]}}m.links.push(a[z]);m.linkValue+=a[z].linkValue}p.$rollup={nodes:pv.values(v),links:pv.values(b)}};pv.Layout.Matrix=function(){pv.Layout.Network.call(this);var d=this,g,b,a,f,e,c=d.buildImplied;this.buildImplied=function(h){c.call(this,h);g=h.nodes.length;b=h.width/g;a=h.height/g;f=h.$matrix.labels;e=h.$matrix.pairs};this.link.data(function(){return e}).left(function(){return b*(this.index%g)}).top(function(){return a*Math.floor(this.index/g)}).width(function(){return b}).height(function(){return a}).lineWidth(1.5).strokeStyle("#fff").fillStyle(function(h){return h.linkValue?"#555":"#eee"}).parent=this;delete this.link.add;this.label.data(function(){return f}).left(function(){return this.index&1?b*((this.index>>1)+0.5):0}).top(function(){return this.index&1?0:a*((this.index>>1)+0.5)}).textMargin(4).textAlign(function(){return this.index&1?"left":"right"}).textAngle(function(){return this.index&1?-Math.PI/2:0});delete this.node};pv.Layout.Matrix.prototype=pv.extend(pv.Layout.Network).property("directed",Boolean);pv.Layout.Matrix.prototype.sort=function(a){this.$sort=a;return this};pv.Layout.Matrix.prototype.buildImplied=function(e){if(pv.Layout.Network.prototype.buildImplied.call(this,e)){return}var h=e.nodes,c=e.links,u=this.$sort,g=h.length,d=pv.range(g),t=[],z=[],x={};e.$matrix={labels:t,pairs:z};if(u){d.sort(function(j,i){return u(h[j],h[i])})}for(var r=0;r<g;r++){for(var q=0;q<g;q++){var w=d[r],v=d[q],f={row:r,col:q,sourceNode:h[w],targetNode:h[v],linkValue:0};z.push(x[w+"."+v]=f)}}for(var r=0;r<g;r++){var w=d[r];t.push(h[w],h[w])}for(var r=0;r<c.length;r++){var o=c[r],k=o.sourceNode.index,y=o.targetNode.index,m=o.linkValue;x[k+"."+y].linkValue+=m;if(!e.directed){x[y+"."+k].linkValue+=m}}};pv.Layout.Bullet=function(){pv.Layout.call(this);var f=this,e=f.buildImplied,g=f.x=pv.Scale.linear(),c,b,h,d,a;this.buildImplied=function(i){e.call(this,a=i);c=i.orient;b=/^left|right$/.test(c);h=pv.ramp("#bbb","#eee").domain(0,Math.max(1,a.ranges.length-1));d=pv.ramp("steelblue","lightsteelblue").domain(0,Math.max(1,a.measures.length-1))};(this.range=new pv.Mark()).data(function(){return a.ranges}).reverse(true).left(function(){return c=="left"?0:null}).top(function(){return c=="top"?0:null}).right(function(){return c=="right"?0:null}).bottom(function(){return c=="bottom"?0:null}).width(function(i){return b?g(i):null}).height(function(i){return b?null:g(i)}).fillStyle(function(){return h(this.index)}).antialias(false).parent=f;(this.measure=new pv.Mark()).extend(this.range).data(function(){return a.measures}).left(function(){return c=="left"?0:b?null:this.parent.width()/3.25}).top(function(){return c=="top"?0:b?this.parent.height()/3.25:null}).right(function(){return c=="right"?0:b?null:this.parent.width()/3.25}).bottom(function(){return c=="bottom"?0:b?this.parent.height()/3.25:null}).fillStyle(function(){return d(this.index)}).parent=f;(this.marker=new pv.Mark()).data(function(){return a.markers}).left(function(i){return c=="left"?g(i):b?null:this.parent.width()/2}).top(function(i){return c=="top"?g(i):b?this.parent.height()/2:null}).right(function(i){return c=="right"?g(i):null}).bottom(function(i){return c=="bottom"?g(i):null}).strokeStyle("black").shape("bar").shapeAngle(function(){return b?0:Math.PI/2}).parent=f;(this.tick=new pv.Mark()).data(function(){return g.ticks(7)}).left(function(i){return c=="left"?g(i):null}).top(function(i){return c=="top"?g(i):null}).right(function(i){return c=="right"?g(i):b?null:-6}).bottom(function(i){return c=="bottom"?g(i):b?-8:null}).height(function(){return b?6:null}).width(function(){return b?null:6}).parent=f};pv.Layout.Bullet.prototype=pv.extend(pv.Layout).property("orient",String).property("ranges").property("markers").property("measures").property("minimum").property("maximum");pv.Layout.Bullet.prototype.defaults=new pv.Layout.Bullet().extend(pv.Layout.prototype.defaults).orient("left").ranges([]).markers([]).measures([]);pv.Layout.Bullet.prototype._originIsZero=true;pv.Layout.Bullet.prototype.originIsZero=function(a){if(arguments.length){return this._originIsZero=!!a}return this._originIsZero};pv.Layout.Bullet.prototype.buildImplied=function(e){pv.Layout.prototype.buildImplied.call(this,e);var d=this.parent[/^left|right$/.test(e.orient)?"width":"height"]();var b,a=e.maximum,c=e.minimum,f=1e-10;if(a==null){b=[].concat(e.ranges,e.markers,e.measures);a=pv.max(b)}else{a=+a}if(c==null){if(!b){b=[].concat(e.ranges,e.markers,e.measures)}c=pv.min(b);c=0.95*c}else{c=+c}if(c>a||a-c<f){c=Math.abs(a)<f?-0.1:(0.99*a)}if(this._originIsZero&&(c*a)>0){if(c>0){c=0}else{a=0}}e.minimum=c;e.maximum=a;this.x.domain(c,a).range(0,d)};pv.Behavior={};pv.Behavior.dragBase=function(d){var k,j,g,l,f;d.autoRender=true;d.positionConstraint=null;d.bound=function(m,n){return Math.max(f.min[n],Math.min(f.max[n],m))};function b(t){if(!l){l=true;this.addEventInterceptor("click",c,true)}if(!k){var o=this.root.scene.$g;k=[[o,"mousemove",pv.listen(o,"mousemove",h)],[o,"mouseup",pv.listen(o,"mouseup",e)],[document,"mousemove",pv.listen(document,"mousemove",h)],[document,"mouseup",pv.listen(document,"mouseup",e)]]}var r=arguments[arguments.length-1];j=r.target;g=false;r.stopPropagation();var q=this.mouse();var s=this.scene;var p=this.index;f=s[p].drag={phase:"start",m:q,m1:q,m2:null,d:t,scene:s,index:p};r=i(r,f);d.dragstart.call(this,r);var n=f.m;if(n!==q){q.x=n.x;q.y=n.y}}function h(m){if(!f){return}f.phase="move";m.stopPropagation();m=i(m,f);var n=f.scene;n.mark.context(n,f.index,function(){var p=f.m2||f.m1;var q=this.mouse();if(p&&q.distance2(p).dist2<=2){return}f.m=f.m2=q;d.drag.call(this,m);var o=f.m;if(o!==q){q.x=o.x;q.y=o.y}})}function e(p){if(!f){return}f.phase="end";var m=f.m2;var o=m&&f.m1.distance2(m).dist2>0.1;f.canceled=!o;g=o&&(j===p.target);if(!g){j=null}p.stopPropagation();p=i(p,f);if(k){k.forEach(function(r){pv.unlisten.apply(pv,r)});k=null}var q=f.scene;var n=f.index;try{q.mark.context(q,n,function(){d.dragend.call(this,p)})}finally{f=null;delete q[n].drag}}function i(r,q){try{r.drag=q;return r}catch(o){}var m={};for(var s in r){var n=r[s];m[s]=typeof n!=="function"?n:a(n,r)}m._sourceEvent=r;return m}function a(n,m){return function(){return n.apply(m,arguments)}}function c(m,n){if(g&&j===n.target){g=false;j=null;return false}}b.autoRender=function(m){if(arguments.length){d.autoRender=!!m;return b}return d.autoRender};b.positionConstraint=function(m){if(arguments.length){d.positionConstraint=m;return b}return d.positionConstraint};return b};pv.Behavior.drag=function(){var e=null;var c=1;var b=1;var f;var d={dragstart:function(j){var i=j.drag;i.type="drag";var k=i.d;var g=pv.vector(k.x,k.y);k.fix=g;k.drag=i;f=g.minus(i.m1);var h=this.parent;i.max={x:h.width()-(k.dx||0),y:h.height()-(k.dy||0)};i.min={x:0,y:0};if(d.autoRender){this.render()}pv.Mark.dispatch("dragstart",i.scene,i.index,j)},drag:function(j){var i=j.drag;var h=i.m2;var l=i.d;i.m=f.plus(h);var k=d.positionConstraint;if(k){k(i)}var g=i.m;if(c){l.x=l.fix.x=d.bound(g.x,"x")}if(b){l.y=l.fix.y=d.bound(g.y,"y")}if(d.autoRender){this.render()}pv.Mark.dispatch("drag",i.scene,i.index,j)},dragend:function(h){var g=h.drag;var i=g.d;i.fix=null;f=null;if(d.autoRender){this.render()}try{pv.Mark.dispatch("dragend",g.scene,g.index,h)}finally{delete i.drag}}};var a=pv.Behavior.dragBase(d);a.collapse=function(g){if(arguments.length){e=String(g);switch(e){case"y":c=1;b=0;break;case"x":c=0;b=1;break;default:c=1;b=1;break}return a}return e};return a};pv.Behavior.point=function(a){var i,g=null,f=1,e=1,h=null,b=arguments.length?a*a:900;function j(q,r){var A=q[r],u={cost:Infinity};for(var o=(A.visible?A.children.length:0)-1;o>=0;o--){var l=A.children[o],m=l.mark,k;if(m.type=="panel"){m.scene=l;for(var n=l.length-1;n>=0;n--){m.index=n;k=j(l,n);if(k.cost<u.cost){u=k}}delete m.scene;delete m.index}else{if(m.$handlers.point){var x=m.mouse();for(var n=l.length-1;n>=0;n--){var t=l[n],z=x.x-t.left-(t.width||0)/2,y=x.y-t.top-(t.height||0)/2,w=f*z*z+e*y*y;if(w<u.cost){u.distance=z*z+y*y;u.cost=w;u.scene=l;u.index=n}}}}}return u}function d(l){var k=j(this.scene,this.index);if((k.cost==Infinity)||(k.distance>b)){k=null}if(i){if(k&&(i.scene==k.scene)&&(i.index==k.index)){return}pv.Mark.dispatch("unpoint",i.scene,i.index,l)}if(i=k){pv.Mark.dispatch("point",k.scene,k.index,l);if(!h&&this.type==="panel"){h=this;h.event("mouseout",function(){var m=arguments[arguments.length-1];c.call(h.scene.$g,m)})}else{pv.listen(this.root.canvas(),"mouseout",c)}}}function c(k){if(i&&!pv.ancestor(this,k.relatedTarget)){pv.Mark.dispatch("unpoint",i.scene,i.index,k);i=null}}d.collapse=function(k){if(arguments.length){g=String(k);switch(g){case"y":f=1;e=0;break;case"x":f=0;e=1;break;default:f=1;e=1;break}return d}return g};return d};pv.Behavior.select=function(){var f=null;var d=1;var c=1;var b=false;var e={dragstart:function(j){var h=j.drag;h.type="select";var i=h.d;i.drag=h;h.max={x:this.width(),y:this.height()};h.min={x:0,y:0};var k=e.positionConstraint;if(k){h.m=h.m.clone();k(h)}var g=h.m;if(d){i.x=e.bound(g.x,"x");if(!b){i.dx=0}}if(c){i.y=e.bound(g.y,"y");if(!b){i.dy=0}}pv.Mark.dispatch("selectstart",h.scene,h.index,j)},drag:function(p){var j=p.drag;var q=j.m1;var g=j.d;j.max.x=this.width();j.max.y=this.height();var h=e.positionConstraint;if(h){j.m=j.m.clone();h(j)}var i=j.m;if(d){var o=Math.min(q.x,i.x);o=e.bound(o,"x");g.x=o;if(!b){var n=Math.max(i.x,q.x);n=e.bound(n,"x");g.dx=n-o}}if(c){var l=Math.min(q.y,i.y);l=e.bound(l,"y");g.y=l;if(!b){var k=Math.max(i.y,q.y);k=e.bound(k,"y");g.dy=k-l}}if(e.autoRender){this.render()}pv.Mark.dispatch("select",j.scene,j.index,p)},dragend:function(i){var g=i.drag;try{pv.Mark.dispatch("selectend",g.scene,g.index,i)}finally{var h=g.d;delete h.drag}}};var a=pv.Behavior.dragBase(e);a.collapse=function(g){if(arguments.length){f=String(g);switch(f){case"y":d=1;c=0;break;case"x":d=0;c=1;break;default:d=1;c=1;break}return a}return f};a.preserveLength=function(g){if(arguments.length){b=!!g;return a}return b};return a};pv.Behavior.resize=function(c){var a=false;var e=(c==="left"||c==="right");var d={dragstart:function(j){var h=j.drag;h.type="resize";var f=h.m1;var i=h.d;i.drag=h;switch(c){case"left":f.x=i.x+i.dx;break;case"right":f.x=i.x;break;case"top":f.y=i.y+i.dy;break;case"bottom":f.y=i.y;break}var g=this.parent;h.max={x:g.width(),y:g.height()};h.min={x:0,y:0};pv.Mark.dispatch("resizestart",h.scene,h.index,j)},drag:function(o){var i=o.drag;var p=i.m1;var g=d.positionConstraint;if(g){i.m=i.m.clone();g(i)}var h=i.m;var f=i.d;if(!a||e){var n=Math.min(p.x,h.x);var l=Math.max(h.x,p.x);n=d.bound(n,"x");l=d.bound(l,"x");f.x=n;f.dx=l-n}if(!a||!e){var k=Math.min(p.y,h.y);var j=Math.max(h.y,p.y);n=d.bound(k,"y");l=d.bound(j,"y");f.y=k;f.dy=j-k}if(d.autoRender){this.render()}pv.Mark.dispatch("resize",i.scene,i.index,o)},dragend:function(h){var f=h.drag;max=null;try{pv.Mark.dispatch("resizeend",f.scene,f.index,h)}finally{var g=f.d;delete g.drag}}};var b=pv.Behavior.dragBase(d);b.preserveOrtho=function(f){if(arguments.length){a=!!f;return b}return a};return b};pv.Behavior.pan=function(){var e,g,i,h,c,b;function a(){g=this.index;e=this.scene;h=pv.vector(pv.event.pageX,pv.event.pageY);i=this.transform();c=1/(i.k*this.scale);if(b){b={x:(1-i.k)*this.width(),y:(1-i.k)*this.height()}}}function f(j){if(!e){return}e.mark.context(e,g,function(){var l=(pv.event.pageX-h.x)*c,n=(pv.event.pageY-h.y)*c,k=i.translate(l,n);if(b){k.x=Math.max(b.x,Math.min(0,k.x));k.y=Math.max(b.y,Math.min(0,k.y))}this.transform(k).render()});pv.Mark.dispatch("pan",e,g,j)}function d(){e=null}a.bound=function(j){if(arguments.length){b=Boolean(j);return this}return Boolean(b)};pv.listen(window,"mousemove",f);pv.listen(window,"mouseup",d);return a};pv.Behavior.zoom=function(c){var b;if(!arguments.length){c=1/48}function a(h){var g=this.mouse(),f=pv.event.wheel*c,d=this.transform().translate(g.x,g.y).scale((f<0)?(1000/(1000-f)):((1000+f)/1000)).translate(-g.x,-g.y);if(b){d.k=Math.max(1,d.k);d.x=Math.max((1-d.k)*this.width(),Math.min(0,d.x));d.y=Math.max((1-d.k)*this.height(),Math.min(0,d.y))}this.transform(d).render();pv.Mark.dispatch("zoom",this.scene,this.index,h)}a.bound=function(d){if(arguments.length){b=Boolean(d);return this}return Boolean(b)};return a};pv.Geo=function(){};pv.Geo.projections={mercator:{project:function(a){return{x:a.lng/180,y:a.lat>85?1:a.lat<-85?-1:Math.log(Math.tan(Math.PI/4+pv.radians(a.lat)/2))/Math.PI}},invert:function(a){return{lng:a.x*180,lat:pv.degrees(2*Math.atan(Math.exp(a.y*Math.PI))-Math.PI/2)}}},"gall-peters":{project:function(a){return{x:a.lng/180,y:Math.sin(pv.radians(a.lat))}},invert:function(a){return{lng:a.x*180,lat:pv.degrees(Math.asin(a.y))}}},sinusoidal:{project:function(a){return{x:pv.radians(a.lng)*Math.cos(pv.radians(a.lat))/Math.PI,y:a.lat/90}},invert:function(a){return{lng:pv.degrees((a.x*Math.PI)/Math.cos(a.y*Math.PI/2)),lat:a.y*90}}},aitoff:{project:function(e){var c=pv.radians(e.lng),d=pv.radians(e.lat),b=Math.acos(Math.cos(d)*Math.cos(c/2));return{x:2*(b?(Math.cos(d)*Math.sin(c/2)*b/Math.sin(b)):0)/Math.PI,y:2*(b?(Math.sin(d)*b/Math.sin(b)):0)/Math.PI}},invert:function(b){var a=b.x*Math.PI/2,c=b.y*Math.PI/2;return{lng:pv.degrees(a/Math.cos(c)),lat:pv.degrees(c)}}},hammer:{project:function(e){var a=pv.radians(e.lng),b=pv.radians(e.lat),d=Math.sqrt(1+Math.cos(b)*Math.cos(a/2));return{x:2*Math.SQRT2*Math.cos(b)*Math.sin(a/2)/d/3,y:Math.SQRT2*Math.sin(b)/d/1.5}},invert:function(b){var a=b.x*3,d=b.y*1.5,c=Math.sqrt(1-a*a/16-d*d/4);return{lng:pv.degrees(2*Math.atan2(c*a,2*(2*c*c-1))),lat:pv.degrees(Math.asin(c*d))}}},identity:{project:function(a){return{x:a.lng/180,y:a.lat/90}},invert:function(a){return{lng:a.x*180,lat:a.y*90}}}};pv.Geo.scale=function(b){var h={x:0,y:0},q={x:1,y:1},g=[],f=pv.Geo.projections.identity,m=pv.Scale.linear(-1,1).range(0,1),k=pv.Scale.linear(-1,1).range(1,0),i={lng:0,lat:0},o,l;function e(d){if(!o||(d.lng!=o.lng)||(d.lat!=o.lat)){o=d;var c=n(d);l={x:m(c.x),y:k(c.y)}}return l}function n(d){var c={lng:d.lng-i.lng,lat:d.lat};return f.project(c)}function a(c){var d=f.invert(c);d.lng+=i.lng;return d}e.x=function(c){return e(c).x};e.y=function(c){return e(c).y};e.ticks={lng:function(c){var p,d;if(g.length>1){var j=pv.Scale.linear();if(c==undefined){c=10}p=j.domain(g,function(r){return r.lat}).ticks(c);d=j.domain(g,function(r){return r.lng}).ticks(c)}else{p=pv.range(-80,81,10);d=pv.range(-180,181,10)}return d.map(function(r){return p.map(function(s){return{lat:s,lng:r}})})},lat:function(c){return pv.transpose(e.ticks.lng(c))}};e.invert=function(c){return a({x:m.invert(c.x),y:k.invert(c.y)})};e.domain=function(r,c){if(arguments.length){g=(r instanceof Array)?((arguments.length>1)?pv.map(r,c):r):Array.prototype.slice.call(arguments);if(g.length>1){var d=g.map(function(s){return s.lng});var j=g.map(function(s){return s.lat});i={lng:(pv.max(d)+pv.min(d))/2,lat:(pv.max(j)+pv.min(j))/2};var p=g.map(n);m.domain(p,function(s){return s.x});k.domain(p,function(s){return s.y})}else{i={lng:0,lat:0};m.domain(-1,1);k.domain(-1,1)}o=null;return this}return g};e.range=function(d,c){if(arguments.length){if(typeof d=="object"){h={x:Number(d.x),y:Number(d.y)};q={x:Number(c.x),y:Number(c.y)}}else{h={x:0,y:0};q={x:Number(d),y:Number(c)}}m.range(h.x,q.x);k.range(q.y,h.y);o=null;return this}return[h,q]};e.projection=function(c){if(arguments.length){f=typeof c=="string"?pv.Geo.projections[c]||pv.Geo.projections.identity:c;return this.domain(g)}return c};pv.copyOwn(e,pv.Scale.common);if(arguments.length){e.projection(b)}return e};;
;
/* module-key = 'com.xpandit.plugins.xray:ccc-chart-resources', location = 'js/ccc/protovis-msie.js' */
/*!
 * Protovis MSIE/VML addon
 * Copyright (C) 2011 by DataMarket <http://datamarket.com>
 * Dual licensed under the terms of the MIT or GPL Version 2 software licenses.
 * 
 * This software includes code from jQuery, http://jquery.com/
 * jQuery is licensed under the MIT or GPL Version 2 license.
 * 
 * This software includes code from the Protovis, http://mbostock.github.com/protovis/
 * Protovis is licensed under the BSD license.
 * 
 */
pv.have_SVG=!!(document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect);pv.have_VML=(function(f,e,c){e=f.createElement("div");e.innerHTML='<pvml:shape adj="1" />';c=e.firstChild;c.style.behavior="url(#default#VML)";return c?typeof c.adj==="object":true})(document);if(!pv.have_SVG&&pv.have_VML){(function(){if(typeof Date.now!=="function"){Date.now=function(){return new Date()*1}}var a={is64Bit:window.navigator.cpuClass==="x64",round:function(b){return Math.round((b||0)*21.6)},styles:null,pre:"<pvml:",post:' class="msvml">',block:{group:1,shape:1,shapetype:1,line:1,polyline:1,curve:1,rect:1,roundrect:1,oval:1,arc:1,image:1},caps:{butt:"flat",round:"round",square:"square"},joins:{bevel:"bevel",round:"round",miter:"miter"},cursorstyles:{hand:"pointer",crosshair:1,pointer:1,move:1,text:1,wait:1,help:1,progress:1,"n-resize":1,"ne-resize":1,"nw-resize":1,"s-resize":1,"se-resize":1,"sw-resize":1,"e-resize":1,"w-resize":1},text_shim:null,text_dims:function(c,b){var d=a.text_shim||(a.init(),a.text_shim);d.style.font=a.processFont(b);d.innerText=c;return{height:d.offsetHeight,width:d.offsetWidth}},_fontCache:{},_fontSubst:{"default":"Arial","sans-serif":"Arial",sansserif:"Arial",sans:"Arial",serif:"Times New Roman",dialog:"Arial",monospaced:"Courier New",dialoginput:"Courier New"},_fontWhiteListIE64Bit:{"agency fb":1,aharoni:1,algerian:1,andalus:1,"angsana new":1,angsanaupc:1,aparajita:1,"arabic typesetting":1,arial:1,"arial black":1,"arial narrow":1,"arial rounded mt bold":1,"arial unicode ms":1,"baskerville old face":1,batang:1,batangche:1,"bauhaus 93":1,"bell mt":1,"berlin sans fb":1,"berlin sans fb demi":1,"bernard mt condensed":1,"blackadder itc":1,"bodoni mt":1,"bodoni mt black":1,"bodoni mt condensed":1,"bodoni mt poster compressed":1,"book antiqua":1,"bookman old style":1,"bookshelf symbol 7":1,"bradley hand itc":1,"britannic bold":1,broadway:1,"browallia new":1,browalliaupc:1,"brush script mt":1,calibri:1,"californian fb":1,"calisto mt":1,cambria:1,"cambria math":1,candara:1,castellar:1,centaur:1,century:1,"century gothic":1,"century schoolbook":1,chiller:1,"colonna mt":1,"comic sans ms":1,consolas:1,constantia:1,"cooper black":1,"copperplate gothic bold":1,"copperplate gothic light":1,corbel:1,"cordia new":1,cordiaupc:1,"courier new":1,"curlz mt":1,daunpenh:1,david:1,"dfkai-sb":1,dilleniaupc:1,dokchampa:1,dotum:1,dotumche:1,ebrima:1,"edwardian script itc":1,elephant:1,"engravers mt":1,"eras bold itc":1,"eras demi itc":1,"eras light itc":1,"eras medium itc":1,"estrangelo edessa":1,eucrosiaupc:1,euphemia:1,fangsong:1,"felix titling":1,"footlight mt light":1,forte:1,"franklin gothic book":1,"franklin gothic demi":1,"franklin gothic demi cond":1,"franklin gothic heavy":1,"franklin gothic medium":1,"franklin gothic medium cond":1,frankruehl:1,freesiaupc:1,"freestyle script":1,"french script mt":1,gabriola:1,garamond:1,gautami:1,georgia:1,gigi:1,"gill sans mt":1,"gill sans mt condensed":1,"gill sans mt ext condensed bold":1,"gill sans ultra bold":1,"gill sans ultra bold condensed":1,gisha:1,"gloucester mt extra condensed":1,"goudy old style":1,"goudy stout":1,gulim:1,gulimche:1,gungsuh:1,gungsuhche:1,"guttman adii":1,"guttman adii-light":1,"guttman aharoni":1,"guttman calligraphic":1,"guttman david":1,"guttman drogolin":1,"guttman frank":1,"guttman frnew":1,"guttman haim":1,"guttman haim-condensed":1,"guttman hatzvi":1,"guttman hodes":1,"guttman kav":1,"guttman kav-light":1,"guttman keren":1,"guttman logo1":1,"guttman mantova":1,"guttman mantova-decor":1,"guttman miryam":1,"guttman myamfix":1,"guttman rashi":1,"guttman stam":1,"guttman stam1":1,"guttman vilna":1,"guttman yad":1,"guttman yad-brush":1,"guttman yad-light":1,"guttman-aharoni":1,"guttman-aram":1,"guttman-courmir":1,"guttman-soncino":1,"guttman-toledo":1,haettenschweiler:1,"harlow solid italic":1,harrington:1,"high tower text":1,impact:1,"imprint mt shadow":1,"informal roman":1,irisupc:1,"iskoola pota":1,jasmineupc:1,jokerman:1,"juice itc":1,kaiti:1,kalinga:1,kartika:1,"khmer ui":1,kodchiangupc:1,kokila:1,"kristen itc":1,"kunstler script":1,"lao ui":1,latha:1,leelawadee:1,"levenim mt":1,lilyupc:1,"lucida bright":1,"lucida calligraphy":1,"lucida console":1,"lucida fax":1,"lucida handwriting":1,"lucida sans":1,"lucida sans typewriter":1,"lucida sans unicode":1,magneto:1,"maiandra gd":1,"malgun gothic":1,mangal:1,marlett:1,"matura mt script capitals":1,meiryo:1,"meiryo ui":1,"microsoft himalaya":1,"microsoft jhenghei":1,"microsoft new tai lue":1,"microsoft phagspa":1,"microsoft sans serif":1,"microsoft tai le":1,"microsoft uighur":1,"microsoft yahei":1,"microsoft yi baiti":1,mingliu:1,"mingliu-extb":1,mingliu_hkscs:1,"mingliu_hkscs-extb":1,miriam:1,"miriam fixed":1,mistral:1,"modern no. 20":1,"mongolian baiti":1,"monotype corsiva":1,"monotype hadassah":1,moolboran:1,"ms gothic":1,"ms mincho":1,"ms outlook":1,"ms pgothic":1,"ms pmincho":1,"ms reference sans serif":1,"ms reference specialty":1,"ms ui gothic":1,"mt extra":1,"mv boli":1,narkisim:1,"niagara engraved":1,"niagara solid":1,nsimsun:1,nyala:1,"ocr a extended":1,"old english text mt":1,onyx:1,"palace script mt":1,"palatino linotype":1,papyrus:1,parchment:1,perpetua:1,"perpetua titling mt":1,"plantagenet cherokee":1,playbill:1,pmingliu:1,"pmingliu-extb":1,"poor richard":1,pristina:1,raavi:1,"rage italic":1,ravie:1,rockwell:1,"rockwell condensed":1,"rockwell extra bold":1,rod:1,"sakkal majalla":1,"script mt bold":1,"segoe print":1,"segoe script":1,"segoe ui":1,"segoe ui light":1,"segoe ui semibold":1,"segoe ui symbol":1,"shonar bangla":1,"showcard gothic":1,shruti:1,simhei:1,"simplified arabic":1,"simplified arabic fixed":1,simsun:1,"simsun-extb":1,"snap itc":1,stencil:1,sylfaen:1,symbol:1,tahoma:1,"tempus sans itc":1,"times new roman":1,"toptype soncino":1,"traditional arabic":1,"trebuchet ms":1,tunga:1,"tw cen mt":1,"tw cen mt condensed":1,"tw cen mt condensed extra bold":1,utsaah:1,vani:1,verdana:1,vijaya:1,"viner hand itc":1,vivaldi:1,"vladimir script":1,vrinda:1,webdings:1,"wide latin":1,wingdings:1,"wingdings 2":1,"wingdings 3":1},_defaultFontIE64Bit:"Arial",processFont:function(c){var g=a._fontCache[c];if(!g){var h=a.text_shim||(a.init(),a.text_shim);var e=h.style;e.font=c;var b=e.fontFamily;if(b.charAt(0)==='"'){b=b.substr(1,b.length-1)}var f=b.toLowerCase();var d=a._fontSubst[f];if(d){b=d}else{if(a.is64Bit&&!a._fontWhiteListIE64Bit[f]){b=a._defaultFontIE64Bit}}e.fontFamily='"'+b+'"';a._fontCache[c]=g=e.font}return g},get_dim:function(b,f){var g=f||{};g.rotation=g.tx=g.ty=0;g.sx=g.sy=1;var h=b.transform;if(h){var c=/translate\((-?\d+(?:\.\d+)?(?:e-?\d+)?)(?:,(-?\d+(?:\.\d+)?(?:e-?\d+)?))?\)/.exec(h);if(c){if(c[1]){g.tx=+c[1]}if(c[2]){g.ty=+c[2]}}var e=/rotate\((-?\d+(?:\.\d+)?(?:e-?\d+)?)\)/.exec(h);if(e){var e=(+e[1])%360;if(e<0){e+=360}e=pv.radians(e)}var d=/scale\((-?\d+(?:\.\d+)?(?:e-?\d+)?)(?:,(-?\d+(?:\.\d+)?(?:e-?\d+)?))?\)/.exec(h);if(d){if(d[1]){g.sx=+d[1]}if(d[2]){g.sy=+d[2]}}g.rotation=e||0}g.x=parseFloat(b.x||0);g.y=parseFloat(b.y||0);if("width" in b){g.width=parseFloat(b.width)}if("height" in b){g.height=parseFloat(b.height)}return g},solidFillStyle:{type:"solid"},elm_defaults:{g:{rewrite:"span",attr:function(c,f,h,b,e){var g=a.get_dim(c);h.style.cssText="position:absolute;zoom:1;left:"+(g.tx+g.x)+"px;top:"+(g.ty+g.y)+"px;"}},line:{rewrite:"shape",attr:function(h,c,j,e,g){var f=parseFloat(h.x1||0),l=parseFloat(h.y1||0),d=parseFloat(h.x2||0),k=parseFloat(h.y2||0),b=a.round;j.coordorigin="0,0";j.coordsize="21600,21600";a.path(j).v="M "+b(f)+" "+b(l)+" L "+b(d)+" "+b(k)+" E";a.stroke(j,h,e,g)},css:"top:0px;left:0px;width:1000px;height:1000px"},rect:{rewrite:"shape",attr:function(k,c,l,e,g){var m=a.get_dim(k),f=a.path(l),b=a.round;l.coordorigin="0,0";l.coordsize="21600,21600";var o=b(m.tx+m.x),n=b(m.ty+m.y),q=b(m.width),j=b(m.height);f.v="M "+o+" "+n+" L "+(o+q)+" "+n+" L "+(o+q)+" "+(n+j)+" L "+o+" "+(n+j)+" x";a.stroke(l,k,e,g);a.fill(l,k,e,g)},css:"top:0px;left:0px;width:1000px;height:1000px"},path:{rewrite:"shape",attr:function(c,g,k,b,f){var j=a.get_dim(c),h=k.style;h.visibility="hidden";h.left=(j.tx+j.x)+"px";h.top=(j.ty+j.y)+"px";k.coordorigin="0,0";k.coordsize="21600,21600";k._events=c["pointer-events"]||"none";a.path(k,c.d);var e=a.rotateAndScale(k,j.rotation&&-j.rotation,j.sx,j.sy);if(e){e.origin="-0.5,-0.5"}a.fill(k,c,b,f);a.stroke(k,c,b,f);h.visibility="visible"},css:"top:0px;left:0px;width:1000px;height:1000px;"},ellipse:{rewrite:"oval",attr:function(h,c,j,e,g){var k=a.get_dim(h),f=h.rx,b=h.ry,l=j.style;l.left=(k.tx-f)+"px";l.top=(k.ty-b)+"px";l.width=(2*f)+"px";l.height=(2*b)+"px";var m=a.rotateAndScale(j,k.rotation&&-k.rotation);if(m){m.origin="0,0"}a.fill(j,h,e,g);a.stroke(j,h,e,g)}},circle:{rewrite:"oval",attr:function(j,c,k,e,h){var l=a.get_dim(j),b=parseFloat(j.r||0)+0.5,g=parseFloat(j.cx||0)+0.7,f=parseFloat(j.cy||0)+0.7,m=k.style;m.left=(l.tx+g-b)+"px";m.top=(l.ty+f-b)+"px";m.width=m.height=(2*b)+"px";a.fill(k,j,e,h);a.stroke(k,j,e,h)}},text:{rewrite:"shape",attr:function(f,b,g,c,e){var j=g.style;g.stroked="False";g.path="m0,0 l1,0 e";var h=a.textpath(g);h.string=f.string;var d=h.style;d["v-text-align"]=f.textAlign;d.font=f.font;if(f.textDecoration){d.textDecoration=f.textDecoration}a.path(g).textpathok="True";a.rotateAndScale(g,f.rotation&&-f.rotation);var k=c[e];k.fillStyle=a.solidFillStyle;a.fill(g,f,c,e);k.fillStyle=null},css:"position:absolute;top:0px;left:0px;width:1px;height:1px;"},svg:{rewrite:"span",css:"position:relative;overflow:hidden;display:inline-block;"},"vml:path":{rewrite:"path"},"vml:stroke":{rewrite:"stroke"},"vml:fill":{rewrite:"fill"},"vml:textpath":{rewrite:"textpath"},"vml:skew":{rewrite:"skew"}},_elmcache:{span:document.createElement("span"),div:document.createElement("div")},createElement:function(d){var f,b=a._elmcache,e=a.elm_defaults[d]||{};var c=e.rewrite||d;if(c in b){f=b[c].cloneNode(false)}else{b[c]=document.createElement(a.pre+c+a.post);if(c in a.block){b[c].className+=" msvml_block"}f=b[c].cloneNode(false)}e.css&&(f.style.cssText=e.css);return f},_hex:pv.range(0,256).map(function(b){return pv.Format.pad("0",2,b.toString(16))}),_colorcache:{},color:function(d){var b=a._colorcache[d];var c;if(!b&&(c=/^rgb\((\d+),(\d+),(\d+)\)$/i.exec(d))){a._colorcache[d]=b="#"+a._hex[c[1]]+a._hex[c[2]]+a._hex[c[3]]}return b||d},fill:function(j,h,b,g){var o=j.getElementsByTagName("fill")[0]||(o=j.appendChild(a.createElement("vml:fill")));var m=b[g].fillStyle;var f=m&&m.type;if(!f){f="solid"}if(!h.fill||!m||(f==="solid"&&h.fill==="none")){o.on="false"}else{o.on="true";if(f==="solid"){o.type="solid";o.color=a.color(h.fill)}else{var c=f==="lineargradient";o.method="none";var n=m.stops;var e=n.length;if(e>0){var k=[];for(var g=0;g<e;g++){var l=n[g];k.push(l.offset+"% "+a.color(l.color.color))}if(o.colors&&typeof o.colors==="object"){o.colors.value=k.join(",")}else{o.colors=k.join(",")}}if(c){o.type="gradient";var d=(-pv.degrees(m.angle))%360;o.angle=d<0?(d+360):d}else{o.type="gradientTitle";o.focus="100%";o.focussize="0 0";o.focusposition="0 0";o.angle=0}}o.opacity=Math.min(parseFloat(h["fill-opacity"]||"1"),1)||"1"}},stroke:function(h,c,b,e){var f=h.getElementsByTagName("stroke")[0]||(f=h.appendChild(a.createElement("vml:stroke")));if(!c.stroke||c.stroke==="none"){f.on="false";f.weight=0}else{var g=c["stroke-width"];if(g==null||g===""){g=1}else{g=+g}if(g<1e-10){g=0}else{if(g<1){g=1}}if(!g){f.on="false";f.weight=0}else{f.on="true";f.weight=g;f.color=a.color(c.stroke)||"black";f.opacity=Math.min(parseFloat(c["stroke-opacity"]||"1"),1)||"1";f.joinstyle=a.joins[c["stroke-linejoin"]]||"miter";f.miterlimit=c["stroke-miterlimit"]||8;f.endcap=a.caps[c["stroke-linecap"]]||"flat";var d=c["stroke-dasharray"];if(!d||d==="none"){d="Solid"}f.dashstyle=d}}},path:function(d,b){var c=d.getElementsByTagName("path")[0]||(c=d.appendChild(a.createElement("vml:path")));if(arguments.length>1){c.v=a.rewritePath(b)}return c},skew:function(c){var b=c.getElementsByTagName("skew")[0]||(b=c.appendChild(a.createElement("vml:skew")));b.on="false";return b},rotateAndScale:function(f,b,h,g){if(b){b=pv.radians(Math.round(pv.degrees(b))%360)}var d=(h&&h!==1)||(g&&g!==1);if(b||d){var j=a.skew(f);j.on="true";j.offset="0,0";if(!h){h=1}if(!g){g=1}var c;if(!b){c=h.toFixed(8)+",0,0,"+g.toFixed(8)+",0,0"}else{var e=Math.cos(b);var i=Math.sin(b);c=(h*e).toFixed(8)+","+(g*i).toFixed(8)+","+(h*-i).toFixed(8)+","+(g*e).toFixed(8)+",0,0"}j.matrix=c;return j}},textpath:function(c){var b=c.getElementsByTagName("textpath")[0]||(b=c.appendChild(a.createElement("vml:textpath")));b.style["v-text-align"]="center";b.style["v-text-kern"]="true";b.on="true";return b},init:function(){if(!a.text_shim){a.text_shim=document.getElementById("pv_vml_text_shim")||document.createElement("span");a.text_shim.id="protovisvml_text_shim";a.text_shim.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline-block;white-space:nowrap;";document.body.appendChild(a.text_shim)}if(!a.styles){a.styles=document.getElementById("protovisvml_styles")||document.createElement("style");a.styles.id="protovisvml_styles";document.documentElement.firstChild.appendChild(a.styles);a.styles.styleSheet.addRule(".msvml","behavior:url(#default#VML);");a.styles.styleSheet.addRule(".msvml_block","position:absolute;top:0;left:0;");try{if(!document.namespaces.pvml){document.namespaces.add("pvml","urn:schemas-microsoft-com:vml")}}catch(b){a.pre="<";a.post=' class="msvml" xmlns="urn:schemas-microsoft.com:vml">'}}},_pathcache:{},rewritePath:function(d){var q=0,n=0,t=a.round;if(!d){return d}if(d in a._pathcache){return a._pathcache[d]}d=d.replace(/(\d*)((\.*\d*)(e ?-?\d*))/g,"$1");var s=d.match(/([MLHVCSQTAZ ][^MLHVCSQTAZ ]*)/gi);var r=[],f=[];var j="";for(var g=0,e=s.length;g<e;g++){var m=s[g],h=m.charAt(0),k=m.substring(1).split(/[,]/);if(h==" "){h=j}j=h;switch(h){case"M":h="m";q=t(k[0]);n=t(k[1]);k=[q,n];break;case"m":h="m";q+=t(k[0]);n+=t(k[1]);k=[q,n];break;case"A":h="l";k=[(q=t(k[5])),(n=t(k[6]))];break;case"L":h="l";k=[(q=t(k[0])),(n=t(k[1]))];break;case"l":h="l";k=[(q=q+t(k[0])),(n=n+t(k[1]))];break;case"H":h="l";k=[(q=t(k[0])),n];break;case"h":h="l";k=[(q=q+t(k[0])),n];break;case"V":h="l";k=[q,(n=t(k[0]))];break;case"v":h="l";k=[q,(n=n+t(k[0]))];break;case"C":h="c";f=k=[t(k[0]),t(k[1]),t(k[2]),t(k[3]),(q=t(k[4])),(n=t(k[5]))];break;case"c":h="c";f=k=[q+t(k[0]),n+t(k[1]),q+t(k[2]),n+t(k[3]),(q=q+t(k[4])),(n=n+t(k[5]))];break;case"S":h="c";f=k=[f[4]+(f[4]-f[2]),f[5]+(f[5]-f[3]),t(k[0]),t(k[1]),(q=t(k[2])),(n=t(k[3]))];break;case"s":h="c";f=k=[f[4]+(f[4]-f[2]),f[5]+(f[5]-f[3]),q+t(k[0]),n+t(k[1]),(q=q+t(k[2])),(n=n+t(k[3]))];break;case"Q":h="c";var c=t(k[0]),o=t(k[1]),b=t(k[2]),l=t(k[3]);k=[~~(q+(c-q)*2/3),~~(n+(o-n)*2/3),~~(c+(b-c)/3),~~(o+(l-o)/3),(q=b),(n=l)];break;case"q":h="l";q+=t(k[2]);n+=t(k[3]);k=[q,n];break;case"Z":case"z":h="xe";k=[];break;default:h="";k=[]}r.push(h,k.join(","))}return(a._pathcache[d]=(r.join("")+"e"))}};pv.Text.measure=a.text_dims;pv.Vml=a;pv.VmlScene={scale:1,events:["mousewheel","mousedown","mouseup","mouseover","mouseout","mousemove","click","dblclick"],implicit:{css:{}},copy_functions:function(c){for(var b in c){if(typeof c[b]==="function"&&!(b in pv.VmlScene)){pv.VmlScene[b]=c[b]}}}};pv.VmlScene.copy_functions(pv.SvgScene);pv.Scene=pv.VmlScene;pv.renderer=function(){return"vml"};(function(b){pv.VmlScene.minRuleLineWidth=b?1.2:1.1;pv.VmlScene.minBarWidth=b?2.2:1.8;pv.VmlScene.minBarHeight=b?2.2:1.8;pv.VmlScene.minBarLineWidth=b?1.2:1}(a.is64Bit));pv.VmlScene.expect=function(j,l,c,g,k,b){b=b||{};var f=a.elm_defaults[l]||{},h=f.rewrite||l;if(j){if(j.tagName.toUpperCase()!==h.toUpperCase()){var d=a.createElement(l);j.parentNode.replaceChild(d,j);j=d}}else{j=a.createElement(l)}if(k){if("attr" in f){f.attr(k,b,j,c,g)}if(k.cursor in a.cursorstyles){var m=a.cursorstyles[k.cursor];b.cursor=(m===1)?k.cursor:m}}if(b){this.setStyle(j,b)}return j};pv.VmlScene.removeSiblings=function(b){while(b){var c=b.nextSibling;b.parentNode.removeChild(b);b=c}};pv.VmlScene.addFillStyleDefinition=function(){};pv.VmlScene.setAttributes=function(){};pv.VmlScene.setStyle=function(h,d){var f=h.__style__;if(f===d){f=null}var b=h.style;for(var c in d){var g=d[c];if(!f||(g!==f[c])){if(g==null){b.removeAttribute(c)}else{b[c]=g}}}h.__style__=d};pv.VmlScene.append=function(d,b,c){d.$scene={scenes:b,index:c};d=this.title(d,b[c]);if(!d.parentNode||d.parentNode.nodeType===11){b.$g.appendChild(d)}return d.nextSibling};pv.VmlScene.title=function(c,b){c.title=b.title||"";return c};pv.VmlScene.panel=function(b){var F=b.$g,G=F&&F.firstChild;var B=false;var D;for(var A=0,l=b.length;A<l;A++){var r=b[A];if(!r.visible){continue}if(!b.parent){var f=r.canvas;D=f.style;D.display="inline-block";D.zoom=1;if(F&&(F.parentNode!==f)){F=f.firstChild;G=F&&F.firstChild}if(!F){B=true;a.init();F=f.appendChild(a.createElement("svg"));F.unselectable="on";F.onselectstart=function(){return false};var d=this.events;var I=this.dispatch;for(var z=0,q=d.length;z<q;z++){F.addEventListener?F.addEventListener(d[z],I,false):F.attachEvent("on"+d[z],I)}G=F.firstChild}b.$g=F;var o=(r.width+r.left+r.right),C=(r.height+r.top+r.bottom);D=F.style;D.width=o+"px";D.height=C+"px";D.clip="rect(0px "+o+"px "+C+"px 0px)"}var H;if(r.overflow==="hidden"){H=this.expect(G,"g",b,A);H.style.position="absolute";H.style.clip="rect("+r.top.toFixed(2)+"px "+(r.left+r.width).toFixed(2)+"px "+(r.top+r.height).toFixed(2)+"px "+r.left.toFixed(2)+"px)";if(!H.parentNode){F.appendChild(H)}b.$g=F=H;G=H.firstChild}G=this.fill(G,b,A);var v=this.scale,p=r.transform,n=r.left+p.x,m=r.top+p.y;this.scale*=p.k;if(r.children.length){var u={transform:"translate("+n+","+m+")"+(p.k!=1?" scale("+p.k+")":"")};this.eachChild(b,A,function(g){g.$g=G=this.expect(G,"g",b,A,u);this.updateAll(g);var c=G.parentNode;if(!c||c.nodeType===11){F.appendChild(G);var e=a.elm_defaults[G.svgtype];if(e&&typeof e.onappend==="function"){e.onappend(G,b[A])}}G=G.nextSibling})}this.scale=v;G=this.stroke(G,b,A);if(H){b.$g=F=H.parentNode;G=H.nextSibling}}if(B){this.removeSiblings(G);G=F.appendChild(a.createElement("oval"))}return G};pv.VmlScene.parseDasharray=function(d){var b=d.strokeDasharray;if(b&&b!=="none"){var c=this.translateDashStyleAlias(b);if(this.isStandardDashStyle(c)){b=c}else{b=b.split(/[\s,]+/).map(function(e){return(+e)/this.scale},this);if(b.length%2){b=b.concat(b)}b=b.join(" ")}}else{b=null}return b};pv.VmlScene.create=function(b){return a.createElement(b)};(function(){var g=function(){return true};var b=function(){return false};var d=["altKey","attrChange","attrName","bubbles","button","cancelable","charCode","clientX","clientY","ctrlKey","currentTarget","data","detail","eventPhase","fromElement","handler","keyCode","layerX","layerY","metaKey","newValue","offsetX","offsetY","pageX","pageY","prevValue","relatedNode","relatedTarget","screenX","screenY","shiftKey","srcElement","target","toElement","view","wheelDelta","which"];var c=d.length;function e(h){if(h&&h.type){this.originalEvent=h;this.type=h.type;this.isDefaultPrevented=b;if(h.defaultPrevented||h.returnValue===false||h.getPreventDefault&&h.getPreventDefault()){this.isDefaultPrevented=g}this.timeStamp=h.timeStamp||Date.now()}else{this.type=h;this.timeStamp=Date.now()}}e.prototype={preventDefault:function(){this.isDefaultPrevented=g;var h=this.originalEvent;if(!h){return}if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=g;var h=this.originalEvent;if(!h){return}if(h.stopPropagation){h.stopPropagation()}h.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=g;this.stopPropagation()},isDefaultPrevented:b,isPropagationStopped:b,isImmediatePropagationStopped:b};var f=(document.compatMode&&document.compatMode!="BackCompat")?"documentElement":"body";a.fixEvent=function(r){var j=r;r=new e(j);var p=r.type;var s=p==="keypress";for(var n=c;n;){var h=d[--n];r[h]=j[h]}var o=r.target;if(!o){o=r.srcElement||document;if(o.nodeType===3){o=o.parentNode}r.target=o}var q;if(!r.relatedTarget&&(q=r.fromElement)){r.relatedTarget=(q===o)?r.toElement:q}if(!s){var k;if(r.pageX==null&&(k=r.clientX)!=null){var m=document[f];r.pageX=k+(m.scrollLeft||0)-(m.clientLeft||0);r.pageY=r.clientY+(m.scrollTop||0)-(m.clientTop||0)}}if(r.which==null){var t,u,l;if(!s){if((l=r.button)!==null){r.which=(l&1?1:(l&2?3:(l&4?2:0)))}}else{if((t=r.charCode)!=null){r.which=t}else{if((u=r.keyCode)!=null){r.which=u}}}}r.metaKey=!!r.metaKey;if(p==="mousewheel"){r.wheel=r.wheelDelta}return r}})();pv.fixEvent=function(b){return a.fixEvent(b||window.event)};pv.VmlScene.dispatch=pv.listener(function(d){var c=d.target.$scene;if(c){var b=d.target._events;if(b==="none"||pv.Mark.dispatch(d.type,c.scenes,c.index,d)){d.preventDefault();d.stopPropagation()}}});pv.VmlScene.image=function(b){var g=b.$g.firstChild;for(var d=0;d<b.length;d++){var f=b[d];if(!f.visible){continue}g=this.fill(g,b,d);if(f.image){}else{g=new Image();g.src=f.url;var c=g.style;c.position="absolute";c.top=f.top;c.left=f.left;c.width=f.width;c.height=f.height;c.cursor=f.cursor;c.msInterpolationMode="bicubic"}g=this.append(g,b,d);g=this.stroke(g,b,d)}return g};pv.VmlScene.label=function(b){var v=b.$g.firstChild;for(var u=0,h=b.length;u<h;u++){var m=b[u];if(!m.visible){continue}var t=m.textStyle;if(!t.opacity||!m.text){continue}var n=m.text.replace(/\s+/g,"\xA0");var p=a.processFont(m.font);var g=a.text_dims(n,p);var l=0;var k=0;switch(m.textBaseline){case"middle":k=(0.1*g.height);break;case"top":k=(m.textMargin+0.5*g.height);break;case"bottom":k=-(m.textMargin+0.5*g.height);break}switch(m.textAlign){case"left":l=m.textMargin;break;case"right":l=-m.textMargin;break}var w=m.textAngle;if(w){var f=Math.cos(w);var r=Math.sin(w);var c=l*f-k*r;var j=l*r+k*f;l=c;k=j}var d=m.left+l;var o=m.top+k;var q={};if(m.cursor){q.cursor=m.cursor}q.fill=a.color(t.color)||"black";if(a.is64Bit){q["fill-opacity"]=0.7}q.x=d;q.y=o;q.rotation=m.textAngle;q.string=n;q.textAlign=m.textAlign;q.font=p;q.textDecoration=m.textDecoration;v=this.expect(v,"text",b,u,q,{display:"block",lineHeight:1,whiteSpace:"nowrap",zoom:1,position:"absolute",cursor:"default",top:o+"px",left:d+"px"});v=this.append(v,b,u)}return v};pv.VmlScene.wedge=function(b){var j=b.$g.firstChild,r=a.round;for(var h=0,l=b.length;h<l;h++){var t=b[h];if(!t.visible){continue}var o=t.fillStyle,q=t.strokeStyle;if(!o.opacity&&!q.opacity){continue}j=this.expect(j,"path",b,h,{"pointer-events":t.events,cursor:t.cursor,transform:"translate("+t.left+","+t.top+")",d:"",fill:o.color,"fill-rule":"evenodd","fill-opacity":o.opacity||null,stroke:q.color,"stroke-opacity":q.opacity||null,"stroke-width":q.opacity?t.lineWidth/this.scale:null,"stroke-linecap":t.lineCap,"stroke-linejoin":t.lineJoin,"stroke-miterlimit":t.strokeMiterLimit,"stroke-dasharray":q.opacity?this.parseDasharray(t):null});var c=j.getElementsByTagName("path")[0];if(!c){c=a.make("path");j.appendChild(c)}var g=r(t.innerRadius),f=r(t.outerRadius),k;if(t.angle>=2*Math.PI){if(g){k="AE0,0 "+f+","+f+" 0 23592960AL0,0 "+g+","+g+" 0 23592960"}else{k="AE0,0 "+f+","+f+" 0 23592960"}}else{var n=Math.round(t.startAngle/Math.PI*11796480),m=Math.round(t.angle/Math.PI*11796480);if(g){k="AE 0,0 "+f+","+f+" "+-n+" "+-m+" 0,0 "+g+","+g+" "+-(n+m)+" "+m+"X"}else{k="M0,0AE0,0 "+f+","+f+" "+-n+" "+-m+"X"}}c.v=k;j=this.append(j,b,h)}return j}})()};;
;
/* module-key = 'com.xpandit.plugins.xray:ccc-chart-resources', location = 'js/ccc/tipsy.js' */
(function(){var d=0;pv.Behavior.tipsy=function(E){var G=d++;if(!E){E={}}else{E=Object.create(E)}E.trigger="manual";var K=E.gravity||$.fn.xrayTipsy.defaults.gravity;var i;if(typeof K==="function"){i=K;K=null}E.gravity=P;var D,B,F=0,o,n,C,m,A=E.delayOut,I,O=E.usesPoint,s,N=E.isEnabled,M;E.delayOut=0;function k(){var R=m.instance();var S=(R&&R.tooltip)||(!m.properties.tooltip&&typeof m.tooltip=="function"&&m.tooltip())||R.title||R.text;if(typeof S==="function"){S=S()}return S||""}function x(){var ab=m.instance();var V,aa,T,ae;if(m.properties.width){var R=a(m);V=R.left;aa=R.top;T=R.width;ae=R.height}else{var af=m.toScreenTransform();var Y;if(m.properties.outerRadius){var U=ab.startAngle+ab.angle/2;Y=ab.outerRadius;V=af.x+ab.left+Y*Math.cos(U);aa=af.y+ab.top+Y*Math.sin(U)}else{if(m.properties.shapeRadius){Y=Math.max(2,ab.shapeRadius);var X=ab.left;var W=ab.top;switch(ab.shape){case"diamond":Y*=Math.SQRT2;break;case"circle":Y/=Math.SQRT2;break}V=(X-Y)*af.k+af.x;aa=(W-Y)*af.k+af.y;ae=T=2*Y*af.k}else{V=ab.left*af.k+af.x;aa=ab.top*af.k+af.y}}}var ad=Math.ceil(V);var Z=Math.ceil(aa);var S=ad-V;var ac=Z-aa;T=Math.max(1,Math.floor((T||0)-S));ae=Math.max(1,Math.floor((ae||0)-ac));return{left:ad,top:Z,width:T,height:ae}}var p=["nw","n","ne","e","se","s","sw","w"];function g(){if(i){K=i.call(m)||$.fn.xrayTipsy.defaults.gravity}return K}function P(ad,aa){(this===D[0])||def.assert();var S=$(window);var X={width:S.scrollLeft(),height:S.scrollTop()};var ac={width:S.width(),height:S.height()};var ae=K;if(ae==="c"){ae="w"}var V=R(ae);if(!V.isTotal){var Z=p.indexOf(ae);for(var T=1,ab=p.length;T<ab;T++){var W=(Z+T)%ab;V=t(V,R(p[W]))}if(c.debug>=21&&ae!==V.gravity){c.log("[TIPSY] #"+G+" Choosing gravity '"+V.gravity+"' over '"+ae+"'")}ae=V.gravity}if(c.debug>=21){c.log("[TIPSY] #"+G+" Gravity '"+ae+"'")}return ae;function R(ag){var af=aa(ag);return U(ag,af)}function U(aj,ai){var ah=Y(ai.left,"width");var af=Y(ai.top,"height");var ag=ah.fits&&af.fits;return{gravity:aj,width:ah,height:af,value:ah.value+af.value+(2-aj.length),isTotal:ag,isPartial:!ag&&(ah.fits||af.fits)}}function Y(ah,ag){var ai=ac[ag];var af=ad[ag];var am=ah-X[ag];var al=ai-(am+af);var aj=am>=0&&al>=0;var ak=(am>=0?am:(4*am))+(al>=0?al:(4*al));return{fits:aj,value:ak}}}function t(S,R){if(S.isTotal){if(!R.isTotal){return S}}else{if(R.isTotal){if(!S.isTotal){return R}}else{if(S.isPartial){if(!R.isPartial){return S}}else{if(R.isPartial){if(!S.isPartial){return R}}}}}return R.value>S.value?R:S}function z(R){D.css({left:R.left+parseFloat(s.css("padding-left")),top:R.top+parseFloat(s.css("padding-top")),width:R.width,height:R.height})}function u(U){var T=U.root.canvas();s=$(T);T.style.position="relative";s.mouseleave(r);L();if(!I){I="tipsyPvBehavior_"+new Date().getTime()}var R=document.getElementById(I);if(!R){R=document.createElement("div");R.id=I;T.appendChild(R)}var S=R.style;S.padding="0px";S.margin="0px";S.position="absolute";S.pointerEvents="none";S.display="block";S.zIndex=-10;D=$(R);h();D.data("xray-tipsy",null);D.xrayTipsy(E)}function L(){M=s.data("tipsy-pv-shared-info");if(M){var R=(s[0].$pvCreateId||0);if(M.createId===R){M.behaviors.push(Q);return}M.behaviors.forEach(function(S){S()})}M={createId:(s[0].$pvCreateId||0),behaviors:[Q]};s.data("tipsy-pv-shared-info",M)}function h(){if(D){if(c.debug>=22){D.css({borderColor:"red",borderWidth:"1px",borderStyle:"solid",zIndex:1000})}else{D.css({borderWidth:"0px",zIndex:-10})}}}function y(R){if(!R){R=pv.event}var T=5;var S=s.offset();return{left:R.pageX-S.left-T,top:R.pageY-S.top-T,width:10+2*T,height:20}}function J(R,S){if((!B&&R)||(B&&B[0]!==R)){if(c.debug>=20){c.log("[TIPSY] #"+G+" Changing target element.")}if(B){B.unbind("mousemove",w);if(!O){B.unbind("mouseleave",r)}}B=R?$(R):null;m=R?S:null;o=n=C=null;if(B){B.mousemove(w);if(!O){B.mouseleave(r)}}}}function f(){return F++}function j(R){return R===F-1}function r(){var R=f();if(c.debug>=20){c.log("[TIPSY] #"+G+" Delayed Hide Begin opId="+R)}if(A>0){window.setTimeout(function(){if(j(R)){if(c.debug>=20){c.log("[TIPSY] #"+G+" Hiding opId="+R+" nextOperationId="+F)}e(R)}else{if(c.debug>=20){c.log("[TIPSY] #"+G+" Delayed Hide Cancelled opId="+R)}}},A);return}if(c.debug>=20){c.log("[TIPSY] #"+G+" Hiding Immediately opId="+R)}e(R)}function Q(){var R=f();if(c.debug>=20){c.log("[TIPSY] #"+G+" Hiding as Other opId="+R)}e(R)}function e(R){J(null,null);if(D){D.xrayTipsy("leave")}}function v(){var R=M&&M.behaviors;if(R&&R.length>1){R.forEach(function(S){if(S!==Q){S()}})}}function w(W){if(!D){return}if(o!=null&&Math.abs(W.clientX-o)<3&&Math.abs(W.clientY-n)<3){return}var S=this.$scene;var R;if(!S||!(R=S.scenes)||!R.mark||(R.mark!==m)){return}var Y=m.renderId();var X=(Y!==C);var U=E.followMouse;if(!U&&!X){return}var T=f();if(c.debug>=20){c.log("[TIPSY] #"+G+" Updating opId="+T)}o=W.clientX;n=W.clientY;var V;if(U){V=y(W)}if(X){C=Y;m.context(R,S.index,function(){if(!U){V=x()}var Z=k();if(c.debug>=20){c.log("[TIPSY] #"+G+" Update text. Was hidden. Text: "+Z)}D.xrayTipsy("setTitle",Z);g()})}z(V);v();D.xrayTipsy("update")}function q(R){if(c.debug>=20){c.log("[TIPSY] #"+G+" Creating")}u(R);if(O){R.event("unpoint",r)}}function l(U){var R=f();if(c.debug>=20){c.log("[TIPSY] #"+G+" Show IN opId="+R)}if(!s){q(U)}var S=!B;J(pv.event.target,U);var T=k();if(c.debug>=20){c.log("[TIPSY] #"+G+" Text: "+T)}D.xrayTipsy("setTitle",T);z(E.followMouse?y():x());g();v();if(S){D.xrayTipsy("enter")}else{D.xrayTipsy("update")}if(c.debug>=20){c.log("[TIPSY] #"+G+" Show OUT")}}function H(){var R=this;if(!N||N(H,R)){l(R)}}return H};var c=pv.Behavior.tipsy;c.debug=0;c.setDebug=function(e){c.debug=e};c.log=function(e){if(typeof console!=="undefined"){console.log(""+e)}};function b(e){return pv.Transform.identity.translate(e.left(),e.top()).times(e.transform())}function a(h){var l=h.instance(),g=l.left,i=l.top,f=l.width,m=l.height,k,e,j;while((j=h.parent)){if(g<0){f+=g;g=0}if(i<0){m+=i;i=0}k=l.right;if(k<0){f+=k}e=l.bottom;if(e<0){m+=e}var n=b(j),o=n.k;g=n.x+(o*g);i=n.y+(o*i);f=o*f;m=o*m;h=j;l=h.instance()}return{left:g,top:i,width:f,height:m}}}());;
;
/* module-key = 'com.xpandit.plugins.xray:ccc-chart-resources', location = 'js/ccc/def.js' */
/*!
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 */
var def=(function(){var u=Array.prototype.slice;if(!Object.keys){Object.keys=function(x){if(x!==Object(x)){throw new TypeError("Object.keys called on non-object")}var v=[];for(var w in x){if(Object.prototype.hasOwnProperty.call(x,w)){v.push(w)}}return v}}if(!window.ObjectFactory){window.ObjectFactory={};ObjectFactory.create=(function(){var x=function(){},w=x.prototype;function v(z){x.prototype=z||{};var y=new x();x.prototype=w;return y}return v}())}if(!Function.prototype.bind){Function.prototype.bind=function(v){var w=u.call(arguments,1);var x=this;return function(){return x.apply(v,w.concat(u.call(arguments)))}}}if(!this.JSON){this.JSON={}}if(!this.JSON.stringify){this.JSON.stringify=function(v){return""+v}}var s=Object.prototype.hasOwnProperty;var l={global:this,get:function(z,y,x){var w;return z&&(w=z[y])!=null?w:x},gets:function(w,v){return v.map(function(x){return w[x]})},getPath:function(w,D,v,A){if(!w){return v}if(D!=null){var y=l.array.is(D)?D:D.split(".");var B=y.length;if(B){var z=0;while(z<B){var x=y[z++];var C=w[x];if(C==null){if(!A){return v}C=w[x]=(v==null||isNaN(+v))?{}:[]}w=C}}}return w},setPath:function(A,z,w){if(A&&z!=null){var y=l.array.is(z)?z:z.split(".");if(y.length){var x=y.pop();A=l.getPath(A,y,x,true);if(A!=null){A[x]=w}}}return A},propGet:function(w,v){w=""+w;return function(x){return x?x[w]:v}},getOwn:function(z,y,x){var w;return z&&s.call(z,y)&&(w=z[y])!=null?w:x},hasOwn:function(w,v){return !!w&&s.call(w,v)},hasOwnProp:s,set:function(y){if(!y){y={}}var w=arguments;for(var x=1,v=w.length-1;x<v;x+=2){y[w[x]]=w[x+1]}return y},setDefaults:function(B,y){if(!B){B={}}var w=arguments;var v=w.length;var z;if(v===2&&l.object.is(y)){for(z in y){if(B[z]==null){B[z]=y[z]}}}else{v--;for(var x=1;x<v;x+=2){z=w[x];if(B[z]==null){B[z]=w[x+1]}}}return B},setUDefaults:function(B,y){if(!B){B={}}var w=arguments;var v=w.length;var z;if(v===2&&l.object.is(y)){for(z in y){if(B[z]===undefined){B[z]=y[z]}}}else{v--;for(var x=1;x<v;x+=2){z=w[x];if(B[z]===undefined){B[z]=w[x+1]}}}return B},eachOwn:function(y,w,v){if(y){for(var x in y){if(s.call(y,x)){w.call(v,y[x],x,y)}}}},each:function(y,w,v){if(y){for(var x in y){w.call(v,y[x],x,y)}}},copyOwn:function(w,v){var z,y;if(arguments.length>=2){z=w||{};y=v}else{z={};y=w}if(y){for(var x in y){if(s.call(y,x)){z[x]=y[x]}}}return z},copy:function(w,v){var z,y;if(arguments.length>=2){z=w||{};y=v}else{z={};y=w}if(y){for(var x in y){z[x]=y[x]}}return z},copyProps:function(w,v,x){var z,y;if(arguments.length>=3){z=w||{};y=v}else{z={};y=w;x=v}if(x){if(y){x.forEach(function(A){z[A]=y[A]})}else{x.forEach(function(A){z[A]=undefined})}}return z},keys:function(x){var v=[];for(var w in x){v.push(w)}return v},values:function(x){var v=[];for(var w in x){v.push(x[w])}return v},uniqueIndex:function(B,z,w){var y={};for(var A in B){var x=z?z.call(w,B[A]):B[A];if(x!=null&&!s.call(y,x)){y[x]=A}}return y},ownKeys:Object.keys,own:function(y,x,v){var w=Object.keys(y);return x?w.map(function(z){return x.call(v,y[z],z)}):w.map(function(z){return y[z]})},scope:function(w,v){return w.call(v)},bit:{set:function(w,x,v){return(v||v==null)?(w|x):(w&~x)}},compare:function(w,v){return(w===v)?0:((w>v)?1:-1)},compareReverse:function(w,v){return(w===v)?0:((w>v)?-1:1)},methodCaller:function(w,v){if(v){return function(){return v[w].apply(v,arguments)}}return function(){return this[w].apply(this,arguments)}},identity:function(v){return v},add:function(w,v){return w+v},negate:function(v){return function(){return !v.apply(this,arguments)}},sqr:function(w){return w*w},noop:function d(){},retTrue:function(){return true},retFalse:function(){return false},number:{is:function(w){return typeof w==="number"},as:function(y,x){var w=parseFloat(y);return isNaN(w)?(x||0):w},to:function(y,x){var w=parseFloat(y);return isNaN(w)?(x||0):w}},array:{is:function(w){return(w instanceof Array)},isLike:function(w){return w&&(w.length!=null)&&(typeof w!=="string")},as:function(v){return(v instanceof Array)?v:((v!=null)?[v]:null)},to:function(v){return(v instanceof Array)?v:((v!=null)?[v]:null)},lazy:function(w,y,x,v){return w[y]||(w[y]=(x?x.call(v,y):[]))},copy:function(v){return u.apply(v,u.call(arguments,1))}},object:{is:function(w){return w&&typeof(w)==="object"},isNative:function(w){return(!!w)&&w.constructor===Object},as:function(w){return w&&typeof(w)==="object"?w:null},asNative:function(w){return w&&w.constructor===Object?w:null},lazy:function(w,y,x,v){return w[y]||(w[y]=(x?x.call(v,y):{}))}},string:{is:function(w){return typeof w==="string"},to:function(w,x){return w!=null?(""+w):(x||"")},join:function(A){var x=arguments;var w=x.length;var y,C;switch(w){case 3:y=x[1];C=x[2];if(y!=null&&y!==""){if(C!=null&&C!==""){return(""+y)+A+(""+C)}return(""+y)}else{if(C!=null&&C!==""){return(""+C)}}return"";case 2:y=x[1];return y!=null?(""+y):"";case 1:case 0:return""}var z=[];for(var B=1;B<w;B++){y=x[B];if(y!=null&&y!==""){z.push(""+y)}}return z.join(A)},padRight:function(w,y,x){if(!w){w=""}if(x==null){x=" "}var v=~~((y-w.length)/x.length);return v>0?(w+new Array(v+1).join(x)):w}},fun:{is:function(w){return typeof w==="function"},as:function(w){return typeof w==="function"?w:null},to:function(w){return typeof w==="function"?w:l.fun.constant(w)},constant:function(w){return function(){return w}}},nullyTo:function(w,x){return w!=null?w:x},between:function(x,y,w){return Math.max(y,Math.min(x,w))},nully:function(w){return w==null},notNully:function(w){return w!=null},notUndef:function(w){return w!==undefined},empty:function(w){return w==null||w===""},notEmpty:function(w){return w!=null&&w!==""},truthy:function(v){return !!v},falsy:function(v){return !v},firstUpperCase:function(w){if(w){var x=w.charAt(0),v=x.toUpperCase();if(x!==v){w=v+w.substr(1)}}return w},firstLowerCase:function(w){if(w){var x=w.charAt(0),v=x.toLowerCase();if(x!==v){w=v+w.substr(1)}}return w},format:function(w,x,v){if(w==null||w===""){return""}var y=x&&l.fun.is(x);return w.replace(/(^|[^{])\{([^{}]+)\}/g,function(z,B,C){var A=!x?null:y?x.call(v,C):x[C];return B+(A==null?"":String(A))})},destructuringTypeBind:function(C,z){var A=C.length;var w=new Array(A);if(A&&z){var x=z.length;if(x){var y=0;var B=0;do{var D=z[y];if(D==null||typeof D===C[B]){w[B]=D;y++}B++}while(B<A&&y<x)}}return w},error:function(v){return(v instanceof Error)?v:new Error(v)},fail:function(v){throw l.error(v)},assert:function(w,v){throw l.error.assertionFailed(w,v)}};var j=l.array.like=l.copyOwn(function(w){return j.is(w)?w:[w]},{is:function(w){return w&&(w.length!=null)&&(typeof w!=="string")},as:function(w){return j.is(w)?w:null}});j.to=j;l.lazy=l.object.lazy;l.shared=function(){var v=null;function w(z){function y(){v=z}return y}function x(z){if(v!=null){throw new Error("Access denied.")}z();var y;y=v;v=null;return y}x.safe=w;return x};var h={operationInvalid:function(w,v){return l.error(l.string.join(" ","Invalid operation.",l.format(w,v)))},notImplemented:function(){return l.error("Not implemented.")},argumentRequired:function(v){return l.error(l.format("Required argument '{0}'.",[v]))},argumentInvalid:function(v,x,w){return l.error(l.string.join(" ",l.format("Invalid argument '{0}'.",[v]),l.format(x,w)))},assertionFailed:function(w,v){return l.error(l.string.join(" ","Assertion failed.",l.format(w,v)))}};l.copyOwn(l.error,h);l.eachOwn(h,function(w,v){l.fail[v]=function(){throw w.apply(null,arguments)}});var m=l,o={},t=[];function i(v,w){return o[v]=w}function q(y,A){var C=A||m;if(y){var B=y.split(".");var v=B.length;if(v){var z=0;var x;if(C===l.global){x=B[0];var w=l.getOwn(o,x);if(w){C=w;z++}}while(z<v){x=B[z++];C=C[x]||(C[x]={})}}}return C}function f(v,y,w){if(l.fun.is(y)){w=y;y=null}var x=q(v,y);if(w){t.push(m);try{w(x)}finally{m=t.pop()}}return x}function e(w,v,x){!l.hasOwn(w,v)||l.fail.operationInvalid("Name '{0}' is already defined in namespace.",[v]);return w[v]=x}l.space=f;l.globalSpace=i;l.mixin=a(ObjectFactory.create);l.copyOwn(l.mixin,{custom:a,inherit:l.mixin,copy:a(l.copy),share:a(l.identity)});function a(v){return function(w){return g(w,u.call(arguments,1),v)}}function g(w,x,A){for(var z=0,v=x.length;z<v;z++){var y=x[z];if(y){y=l.object.as(y.prototype||y);if(y){k(w,y,A)}}}return w}function k(v,w,x){for(var y in w){p(v,y,w[y],x)}}function p(v,z,w,x){if(w!==undefined){var A,y=l.object.asNative(v[z]);if(y){A=l.object.as(w);if(A){if(!s.call(v,z)){v[z]=y=ObjectFactory.create(y)}k(y,A,x)}else{v[z]=w}}else{A=l.object.asNative(w);if(A){w=(x||ObjectFactory.create)(A)}v[z]=w}}}function b(v){for(var x in v){var w=l.object.asNative(v[x]);if(w&&x!=="__proto__"){b((v[x]=ObjectFactory.create(w)))}}}l.create=function(){var x=u.call(arguments),w=true,y=x.shift();if(typeof(y)==="boolean"){w=y;y=x.shift()}var v=y?ObjectFactory.create(y):{};if(w){b(v)}if(x.length>0){x.unshift(v);l.mixin.apply(l,x)}return v};l.scope(function(){var w=l.shared();function D(){return l.error.operationInvalid("Type is locked.")}var z={init:function(Q){Q||l.fail.argumentRequired("init");var P=w(this.safe);!P.locked||l.fail(D());var O=P.init;if(O){Q=F(Q,O)}P.init=Q;P.initOrPost=true;return this},postInit:function(O){O||l.fail.argumentRequired("postInit");var Q=w(this.safe);!Q.locked||l.fail(D());var P=Q.post;if(P){O=F(O,P)}Q.post=O;Q.initOrPost=true;return this},add:function(O){var R=w(this.safe);!R.locked||l.fail(D());var Q=this.prototype;var P=R.base;l.each(O.prototype||O,function(T,U){switch(U){case"base":case"constructor":return;case"toString":if(T===N){return}break;case"override":if(T===H){return}break}if(T){var W=I(T);if(W){var S;var V=R.methods[U];if(V&&(V instanceof v)){S=V}else{if(P){V=P.methods[U];if(V&&(V instanceof v)){S=V}}}R.methods[U]=W;if(S){T=S.override(W)}Q[U]=T;return}}p(Q,U,T,l.identity)});return this},getStatic:function(O){return L(w(this.safe),O)},addStatic:function(O){var R=w(this.safe);!R.locked||l.fail(D());for(var S in O){if(S!=="prototype"){var U=O[S];var P=l.object.as(U);if(P){var V=l.getOwn(this,S);var T=(V!==undefined);if(!T){V=L(R.base,S)}var Q=l.object.asNative(V);if(Q){if(T){l.mixin(V,U);continue}U=l.create(V,U)}}this[S]=U}}return this}};function L(P,Q){if(P){do{var O=l.getOwn(P.constructor,Q);if(O!==undefined){return O}}while((P=P.base))}}function E(O){var P;if(O){if(O instanceof Array){P=O;O=P.join(".")}else{P=O.split(".")}}if(P&&P.length>1){this.name=P.pop();this.namespace=P.join(".");this.namespaceParts=P}else{this.name=O||null;this.namespace=null;this.namespaceParts=[]}}E.prototype.toString=function(){return l.string.join(".",this.namespace+"."+this.name)};function v(O){this.fun=O.as;if(O){if(O.isAbstract){this.isAbstract=true}}}l.copyOwn(v.prototype,{isAbstract:false,override:function(P){if(this.isAbstract){return P.fun}var O=F(P.fun,this.fun);P.fun=O;return O}});function I(O){if(O){if(l.fun.is(O)){return new v({as:O})}if(O instanceof v){return O}if(l.fun.is(O.as)){return new v(O)}if(O.isAbstract){return new v({isAbstract:true,as:l.fail.notImplemented})}}return null}function x(O){return I(O)||l.fail.argumentInvalid("fun")}function C(){}var J=C.prototype;J.base=undefined;var B={locked:true,init:undefined,postInit:undefined,initOrPost:false,methods:{},constructor:C};C.safe=w.safe(B);function F(P,O){return function(){var Q=J.base;J.base=O;try{return P.apply(this,arguments)}finally{J.base=Q}}}function H(O,P){this[O]=F(P,this[O]);return this}function N(){return""+this.constructor}function G(O,Q){var P=O.prototype=ObjectFactory.create(Q.prototype);P.constructor=O;return P}function M(R){var P=1;var O=[function(){P=0;if(R.initOrPost){O.length=0;if(R.init){O.push(R.init);P++}if(R.post){O.push(R.post);P++}Q.apply(this,arguments);return false}else{O=null}}];function Q(){if(P){var S=0;while(O[S].apply(this,arguments)!==false&&++S<P){}}}return Q}var K=["string","function","object"];function y(){var O=l.destructuringTypeBind(K,arguments);return A.apply(this,O)}function A(P,V,U){var O=new E(P);var Q;if(V){Q=(V.safe&&w(V.safe))||l.fail.operationInvalid('Invalid "foreign" base type.');Q.locked=true}else{V=C;Q=B}var T=ObjectFactory.create(Q);T.locked=false;T.base=Q;T.methods=ObjectFactory.create(Q.methods);var R=M(T);l.copyOwn(R,z);R.name=O.name;R.typeName=O;R.safe=w.safe(T);R.toString=function(){return(""+this.typeName)||"Anonymous type"};var S=G(R,V);T.constructor=R;S.override=H;S.toString=N;if(O.name){e(l.space(O.namespace,U),O.name,R)}return R}l.type=y;l.method=x});l.makeEnum=function(v){var w=1;var x={};v.forEach(function(y){x[y]=w;w=w<<1});return x};l.copyOwn(l.array,{create:function(v,y){var w=v>=0?new Array(v):[];if(y!==undefined){for(var x=0;x<v;x++){w[x]=y}}return w},append:function(z,y,A){if(A==null){A=0}for(var x=0,v=y.length,w=z.length;x<v;x++){z[w+x]=y[A+x]}return z},appendMany:function(C){var w=arguments;var z=w.length;if(z>1){var y=C.length;for(var A=1;A<z;A++){var B=w[A];if(B){var x=0;var v=B.length;while(x<v){C[y++]=B[x++]}}}}return C},prepend:function(y,x,z){if(z==null){z=0}for(var w=0,v=x.length;w<v;w++){y.unshift(x[z+w])}return y},removeAt:function(w,v){return w.splice(v,1)[0]},insertAt:function(x,v,w){x.splice(v,0,w);return x},binarySearch:function(C,A,z,y){if(!z){z=l.compare}var w=0,B=C.length-1;while(w<=B){var x=(w+B)>>1;var v=z(A,y?y(C[x]):C[x]);if(v<0){B=x-1}else{if(v>0){w=x+1}else{return x}}}return ~w},insert:function(y,x,w){var v=l.array.binarySearch(y,x,w);if(v<0){y.splice(~v,0,x)}return v},remove:function(y,x,w){var v=l.array.binarySearch(y,x,w);if(v>=0){return y.splice(v,1)[0]}}});var c=1,r={};l.nextId=function(w){if(w){var v=l.getOwn(r,w)||1;r[w]=v+1;return v}return c++};l.type("Set").init(function(w,v){this.source=w||{};this.count=w?(v!=null?v:l.ownKeys(w).length):0}).add({has:function(v){return s.call(this.source,v)},add:function(w){var v=this.source;if(!s.call(v,w)){this.count++;v[w]=true}return this},rem:function(v){if(s.call(this.source,v)){delete this.source[v];this.count--}return this},clear:function(){if(this.count){this.source={};this.count=0}return this},members:function(){return l.ownKeys(this.source)}});l.type("Map").init(function(w,v){this.source=w||{};this.count=w?(v!=null?v:l.ownKeys(w).length):0}).add({has:function(v){return s.call(this.source,v)},get:function(v){return s.call(this.source,v)?this.source[v]:undefined},set:function(y,w){var x=this.source;if(!s.call(x,y)){this.count++}x[y]=w;return this},rem:function(v){if(s.call(this.source,v)){delete this.source[v];this.count--}return this},clear:function(){if(this.count){this.source={};this.count=0}return this},copy:function(v){l.eachOwn(v.source,function(w,x){this.set(x,w)},this)},values:function(){return l.own(this.source)},keys:function(){return l.ownKeys(this.source)},clone:function(){return new l.Map(l.copy(this.source),this.count)},symmetricDifference:function(w){if(!this.count){return w.clone()}if(!w.count){return this.clone()}var v={};var z=0;var x=this.source;var y=w.source;l.eachOwn(x,function(A,B){if(!s.call(y,B)){v[B]=A;z++}});l.eachOwn(y,function(A,B){if(!s.call(x,B)){v[B]=A;z++}});return new l.Map(v,z)},intersect:function(w,v){if(!v){v=new l.Map()}l.eachOwn(this.source,function(x,y){if(w.has(y)){v.set(y,x)}});return v}});l.type("OrderedMap").init(function(){this._list=[];this._map={}}).add({has:function(v){return s.call(this._map,v)},count:function(){return this._list.length},get:function(v){var w=l.getOwn(this._map,v);if(w){return w.value}},at:function(v){var w=this._list[v];if(w){return w.value}},add:function(y,w,x){var z=this._map;var A=l.getOwn(z,y);if(!A){A=z[y]={key:y,value:w};if(x==null){this._list.push(A)}else{l.array.insertAt(this._list,x,A)}}else{if(A.value!==w){A.value=w}}return this},rem:function(w){var x=l.getOwn(this._map,w);if(x){var v=this._list.indexOf(x);this._list.splice(v,1);delete this._map[w]}return this},clear:function(){if(this._list.length){this._map={};this._list.length=0}return this},keys:function(){return l.ownKeys(this._map)},forEach:function(w,v){return this._list.forEach(function(x){w.call(v,x.value,x.key)})}});l.html={escape:function(v){return l.string.to(v).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;")}};l.type("Query").init(function(){this.index=-1;this.item=undefined}).add({next:function(){var v=this.index;if(v===-2){return false}v++;if(!this._next(v)){this.index=-2;this.item=undefined;return false}this.index=v;return true},_next:l.method({isAbstract:true}),_finish:function(){this.index=-2;this.item=undefined},each:function(w,v){while(this.next()){if(w.call(v,this.item,this.index)===false){return true}}return false},array:function(){var v=[];while(this.next()){v.push(this.item)}return v},sort:function(w,x){if(!w){w=l.compare}if(x){var y=w;w=function(A,z){return y(x(A),x(z))}}var v=this.array().sort(w);return new l.ArrayLikeQuery(v)},object:function(z){var A=l.get(z,"target")||{},w=l.get(z,"name"),y=l.get(z,"value"),v=l.get(z,"context");while(this.next()){var x=""+(w?w.call(v,this.item,this.index):this.item);A[x]=y?y.call(v,this.item,this.index):this.item}return A},reduce:function(w){var x=0,v;if(arguments.length<2){if(!this.next()){throw new TypeError("Length is 0 and no second argument")}v=this.item}else{v=arguments[1]}while(this.next()){v=w(v,this.item,this.index);++x}return v},count:function(){var v=0;while(this.next()){v++}return v},first:function(w,v,x){while(this.next()){if(!w||w.call(v,this.item,this.index)){var y=this.item;this._finish();return y}}return x},last:function(w,v,x){var y=x;while(this.next()){if(!w||w.call(v,this.item,this.index)){y=this.item}}return y},any:function(w,v){while(this.next()){if(!w||w.call(v,this.item,this.index)){this._finish();return true}}return false},all:function(w,v){while(this.next()){if(!w.call(v,this.item,this.index)){this._finish();return false}}return true},min:function(){var v=null;while(this.next()){if(v===null||this.item<v){v=this.item}}return v},max:function(){var v=null;while(this.next()){if(v===null||this.item>v){v=this.item}}return v},range:function(){var w=null,v=null;while(this.next()){var x=this.item;if(w===null){w=v=x}else{if(x<w){w=x}if(x>v){v=x}}}return w!=null?{min:w,max:v}:null},multipleIndex:function(w,v){var x={};this.each(function(z){var y=w?w.call(v,z):z;if(y!=null){var A=l.getOwn(x,y)||(x[y]=[]);A.push(z)}});return x},uniqueIndex:function(w,v){var x={};this.each(function(z){var y=w?w.call(v,z):z;if(y!=null&&!l.hasOwn(x,y)){x[y]=z}});return x},select:function(w,v){return new l.SelectQuery(this,w,v)},prop:function(v){return new l.SelectQuery(this,function(w){if(w){return w[v]}})},selectMany:function(w,v){return new l.SelectManyQuery(this,w,v)},union:function(){var v=l.array.append([this],arguments);return new l.SelectManyQuery(new l.ArrayLikeQuery(v))},where:function(w,v){return new l.WhereQuery(this,w,v)},distinct:function(w,v){return new l.DistinctQuery(this,w,v)},skip:function(v){return new l.SkipQuery(this,v)},take:function(v){if(v<=0){return new l.NullQuery()}if(!isFinite(v)){return this}return new l.TakeQuery(this,v)},whayl:function(w,v){return new l.WhileQuery(this,w,v)},reverse:function(){return new l.ReverseQuery(this)}});l.type("NullQuery",l.Query).add({_next:function(){}});l.type("AdhocQuery",l.Query).init(function(v){this.base();this._next=v});l.type("ArrayLikeQuery",l.Query).init(function(v){this.base();this._list=l.array.isLike(v)?v:[v];this._count=this._list.length}).add({_next:function(v){var w=this._count;if(v<w){var x=this._list;while(!s.call(x,v)){v++;if(v>=w){return 0}this._count--}this.item=x[v];return 1}},count:function(){var v=this._count;if(this.index>=0){v-=(this.index+1)}this._finish();return v}});l.type("RangeQuery",l.Query).init(function(x,w,v){this.base();this._index=x;this._count=w;this._step=v==null?1:v}).add({_next:function(v){if(v<this._count){this.item=this._index;this._index+=this._step;return 1}},count:function(){var v=this._count;if(this.index>=0){v-=(this.index+1)}this._finish();return v}});l.type("WhereQuery",l.Query).init(function(x,w,v){this.base();this._where=w;this._ctx=v;this._source=x}).add({_next:function(w){var x=this._source;while(x.next()){var v=x.item;if(this._where.call(this._ctx,v,x.index)){this.item=v;return 1}}}});l.type("WhileQuery",l.Query).init(function(x,w,v){this.base();this._pred=w;this._ctx=v;this._source=x}).add({_next:function(w){while(this._source.next()){var v=this._source.item;if(this._pred.call(this._ctx,v,this._source.index)){this.item=v;return 1}return 0}}});l.type("SelectQuery",l.Query).init(function(x,v,w){this.base();this._select=v;this._ctx=w;this._source=x}).add({_next:function(v){if(this._source.next()){this.item=this._select.call(this._ctx,this._source.item,this._source.index);return 1}}});l.type("SelectManyQuery",l.Query).init(function(x,w,v){this.base();this._selectMany=w;this._ctx=v;this._source=x;this._manySource=null}).add({_next:function(v){while(true){if(this._manySource){if(this._manySource.next()){this.item=this._manySource.item;return 1}this._manySource=null}if(!n.call(this)){break}}}});function n(){while(this._source.next()){var v=this._selectMany?this._selectMany.call(this._ctx,this._source.item,this._source.index):this._source.item;if(v!=null){this._manySource=l.query(v);return 1}}}l.type("DistinctQuery",l.Query).init(function(x,w,v){this.base();this._key=w;this._ctx=v;this._source=x;this._keys={}}).add({_next:function(w){while(this._source.next()){var v=this._source.item,x=this._key?this._key.call(this._ctx,v,this._source.index):v;if(x!=null&&!l.hasOwn(this._keys,x)){this._keys[x]=true;this.item=v;return 1}}}});l.type("SkipQuery",l.Query).init(function(w,v){this.base();this._source=w;this._skip=v}).add({_next:function(v){while(this._source.next()){if(this._skip>0){this._skip--}else{this.item=this._source.item;return 1}}}});l.type("TakeQuery",l.Query).init(function(w,v){this.base();this._source=w;this._take=v}).add({_next:function(v){if(this._take>0&&this._source.next()){this._take--;this.item=this._source.item;return 1}}});l.type("ReverseQuery",l.Query).init(function(v){this.base();this._source=v}).add({_next:function(v){if(!v){if(this._source instanceof l.Query){if(this._source instanceof l.ArrayLikeQuery){this._source=this._source._list}else{this._source=this._source.array()}}this._count=this._source.length}var x=this._count;if(v<x){var w=x-v-1;var y=this._source;while(!s.call(y,w)){if(--w<0){return 0}this._count--}this.item=y[w];return 1}}});l.query=function(v){if(v===undefined){return new l.NullQuery()}if(v instanceof l.Query){return v}if(l.fun.is(v)){return new l.AdhocQuery(v)}return new l.ArrayLikeQuery(v)};l.range=function(x,w,v){return new l.RangeQuery(x,w,v)};m=l.global;return l}());;
;
/* module-key = 'com.xpandit.plugins.xray:ccc-chart-resources', location = 'js/ccc/pvc-r2.0.js' */
/*!
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 */
var pvc=function(ad,R){function v(){if(V.debug>0&&typeof console!=="undefined"){["log","info",["trace","debug"],"error","warn",["group","groupCollapsed"],"groupEnd"].forEach(function(f){f=f instanceof Array?f:[f,f];N(V,f[0],f[1],"[pvChart]")})}else{if(V.debug>1){V.debug=1}["log","info","trace","warn","group","groupEnd"].forEach(function(f){V[f]=ad.noop});V.error=function(f){if(f&&typeof f==="object"&&f.message){f=f.message}f=""+ad.nullyTo(f,"");if(f.indexOf("[pvChart ERROR]: ")<0){f="[pvChart ERROR]: "+f}throw new Error(f)}}V.logError=V.error;R.error=V.error}function d(){var f=R.Behavior.tipsy;if(f&&f.setDebug){f.setDebug(V.debug);f.log=V.log}}function N(X,O,M,L){M||(M=O);var I=console,F=I[M]||I.log,u;if(F){var i=L+": %s";if(ad.fun.is(F)){u=F.bind(I,i)}else{var f=Function.prototype.apply;u=function(){f.call(F,I,ad.array.append([i],arguments))}}}X[O]=u}function a1(i,f){if(i){if(ad.object.is(i)){return i.abs}return f?f+ad.firstUpperCase(i):i}return f}function t(i){i=R.color(i);var f=i.r,F=i.g;i=i.b;var u=(f+F+i)/3;return Math.abs(f-u)<=2&&Math.abs(F-u)<=2&&Math.abs(i-u)<=2}function c(i){i||ad.fail.argumentRequired("keyArgs");var f=i.type||ad.fail.argumentRequired("keyArgs.type");switch(f){case"linear":return(new V.color.LinearScalesBuild(i)).buildMap();case"discrete":return(new V.color.DiscreteScalesBuild(i)).buildMap();case"normal":return(new V.color.NormalScalesBuild(i)).buildMap()}throw ad.error.argumentInvalid("scaleType","Unexistent scale type '{0}'.",[f])}function a0(i){i||ad.fail.argumentRequired("keyArgs");var f=i.type||ad.fail.argumentRequired("keyArgs.type");switch(f){case"linear":return(new V.color.LinearScalesBuild(i)).build();case"discrete":return(new V.color.DiscreteScalesBuild(i)).build();case"normal":return(new V.color.NormalScalesBuild(i)).build()}throw ad.error.argumentInvalid("scaleType","Unexistent scale type '{0}'.",[f])}function h(ab,Z){function Y(bb){return(ad.getOwn(f,bb)||ad.fail.operationInvalid("Undefined option '{0}'",[bb])).resolve()}function X(bg,bb){bg=Y(bg);return bb&&!bg.isSpecified?undefined:bg.value}function O(bb){return Y(bb).isSpecified}function M(bb){return X(bb,true)}function L(bb){return ad.hasOwn(f,bb)}function I(bb){return u(bb,false)}function F(bb){return u(bb,true)}function i(bb){return Y(bb)._defaultValue}function u(bj,bh){for(var bi in bj){var bb=ad.getOwn(f,bi);if(bb){var bg=bj[bi];bg!==undefined&&bb.set(bg,bh)}}return X}ab||ad.fail.argumentRequired("specs");var f={};ad.each(ab,function(bg,bb){bg=new aL(bb,X,Z,bg);f[bg.name]=bg});X.option=X;X.specified=M;X.isSpecified=O;X.isDefined=L;X.defaultValue=i;X.specify=I;X.defaults=F;return X}function ao(f){return function(i){for(var I=0,F=f.length;I<F;I++){var u=f[I];if(ad.string.is(u)){u=this[u]}if(u.call(this,i)===true){return true}}}}function Q(f){return function(i){i.specify(f);return true}}function w(f){return function(i){var u=f.call(this,i);if(u!==undefined){i.specify(u);return true}}}function e(f){return function(i){var u=f.call(this,i);if(u!==undefined){i.defaultValue(u);return true}}}function aa(i,f){if(i){i.forEach(function(u){if(f){u[f]=null}u.dispose()});i.length=0}}function B(i,f,I,F,u){I&&!I[F]||ad.assert("Must not have a '"+F+"'.");I[F]=i;i=i[f]||(i[f]=[]);u==null||u>=i.length?i.push(I):i.splice(u,0,I)}function l(i,f,F,u){F&&(!F[u]||F[u]===i)||ad.assert("Not a child");if(i=i[f]){f=i.indexOf(F);f>=0&&ad.array.removeAt(i,f)}F[u]=null}function a2(f){this.playedVisualRoles.set(f.name,f);aK.call(this.complexType,this)}function aE(f){this.playedVisualRoles.rem(f.name);aK.call(this.complexType,this)}function aK(){this._isPctRoleDimTypeMap=null}function aM(i,f){function F(){var L={},I=ad.query(u.source).select(function(M){f(M,L);M=L.series;if(M!=null&&M.v!=null){M=M.v}return M||null}).distinct().array();return u._createPlot2SeriesKeySet(i,I)}var u=this;return this._dataPartGet(F,f)}function aq(i,f){return i.id-f.id}function S(i,f){return f.id-i.id}function a6(){delete this.isSelected}function x(f){return f.isNull||f.isSelected}function aQ(i,f,M,L,I,F){if(this.owner===this){if(I==null){I=(i=i._formatter)?i(L,f):L}I=""+I;!I&&V.debug>=2&&V.log("Only the null value should have an empty label.");f=new V.data.Atom(this,L,I,f,M);if(F){f.isVirtual=true}}else{var u=this.parent||this.linkParent;f=u._atomsByKey[M]||aQ.call(u,i,f,M,L,I,F)}ad.array.insert(this._atoms,f,this._atomComparer);a5.call(this);return this._atomsByKey[M]=f}function ay(i){var f=i.key;if(i.dimension===this){this.owner===this||ad.assert("Should be an owner dimension");if(!f&&i===this._virtualNullAtom){i=this.intern(null)}return i}if(!this._lazyInit){var u=this._atomsByKey[f];if(u){if(u!==i){throw ad.error.operationInvalid("Atom is from a different root data.")}return i}if(this.owner===this){throw ad.error.operationInvalid("Atom is from a different root data.")}}ay.call(this.parent||this.linkParent,i);if(!this._lazyInit){this._atomsByKey[f]=i;if(f){ad.array.insert(this._atoms,i,this._atomComparer)}else{this._nullAtom=i;this._atoms.unshift(i)}a5.call(this)}return i}function ac(i){var f=ad.get(i,"visible");i=ad.get(i,"selected");return(f==null?null:!!f)+":"+(i==null?null:!!i)}function aP(i){var f=this._nullAtom;if(!f){if(this.owner===this){f=this.type._formatter;i=""+(f?f.call(null,null,i):"");f=new V.data.Atom(this,null,i,null,"");this.data._atomsBase[this.name]=f}else{f=aP.call(this.parent||this.linkParent,i)}this._atomsByKey[""]=this._nullAtom=f;this._atoms.unshift(f)}return f}function g(){this.owner===this||ad.assert("Can only create atoms on an owner dimension.");if(!this._virtualNullAtom){this._virtualNullAtom=new V.data.Atom(this,null,"",null,"");this.data._atomsBase[this.name]=this._virtualNullAtom}return this._virtualNullAtom}function a3(){this.owner===this||ad.assert("Can only unintern atoms of an owner dimension.");var i=this._atoms;if(i){for(var f=this._atomsByKey,I=0,F=i.length;I<F;){var u=i[I];if(u.visited){delete u.visited;I++}else{if(u!==this._virtualNullAtom){i.splice(I,1);F--;u=u.key;delete f[u];if(!u){delete this._nullAtom;this.data._atomsBase[this.name]=this._virtualNullAtom}}}}a5.call(this)}}function aN(){var i=this._atoms;if(i){for(var f=this._atomsByKey,L=0,I=i.length,F;L<I;){var u=i[L];if(u.isVirtual){i.splice(L,1);I--;F=true;u=u.key||ad.assert("Cannot be the null or virtual null atom.");delete f[u]}else{L++}}F&&a5.call(this)}}function a5(){this._atomVisibleDatumsCount=this._sumCache=this._visibleAtoms=this._visibleIndexes=null}function av(f){B(this,"childNodes",f,"parent");f.owner=this.owner}function U(f){l(this,"childNodes",f,"parent")}function z(f){B(this,"_linkChildren",f,"linkParent");f.owner=this.owner}function j(f){l(this,"_linkChildren",f,"linkParent")}function a7(i,f){var F;if(!this._disposed&&(F=this._atomVisibleDatumsCount)){i=i.atoms[this.name].key;ad.hasOwn(this._atomsByKey,i)||ad.assert("Atom must exist in this dimension.");var u=F[i];f||u>0||ad.assert("Must have had accounted for at least one visible datum.");F[i]=(u||0)+(f?1:-1);this._visibleAtoms=this._sumCache=this._visibleIndexes=null}}function aR(){var f=this._atomVisibleDatumsCount;if(!f){f={};this.data.datums(null,{visible:true}).each(function(i){i=i.atoms[this.name].key;f[i]=(f[i]||0)+1},this);this._atomVisibleDatumsCount=f}return f}function aA(i){var f=[];this._atoms.forEach(function(F,u){this.isVisible(F)===i&&f.push(u)},this);return f}function ae(f){return ad.query(this._atoms).where(function(i){return this.isVisible(i)===f},this).array()}function D(i,f){this.insertAt(i,f);ad.lazy(this,"_childrenByKey")[i.key]=i}function n(i,f){B(this,"_linkChildren",i,"linkParent",f)}function bc(f){l(this,"_linkChildren",f,"linkParent")}function a9(){aa(this.childNodes,"parent");this._childrenByKey=null;aa(this._linkChildren,"linkParent");this._sumAbsCache=this._groupByCache=null}function C(){this.isOwner()||ad.fail("Can only be called on the owner data.")}function aV(i,f){!i.isNull||ad.assert("Null datums do not notify selected changes");f?this._selectedNotNullDatums.set(i.id,i):this._selectedNotNullDatums.rem(i.id);this._sumAbsCache=null}function aT(i,f){if(ad.hasOwn(this._datumsById,i.id)){!i.isNull||ad.assert("Null datums do not notify visible changes");f?this._visibleNotNullDatums.set(i.id,i):this._visibleNotNullDatums.rem(i.id);this._sumAbsCache=null;ad.eachOwn(this._dimensions,function(u){a7.call(u,i,f)});this.childNodes.forEach(function(u){aT.call(u,i,f)});this._linkChildren&&this._linkChildren.forEach(function(u){aT.call(u,i,f)})}}function aF(i,f){ad.string.is(i)||ad.fail.argumentInvalid("groupLevelText","Invalid grouping specification.");return ad.query(i.split(/\s*\|\s*/)).where(ad.truthy).select(function(F){var u=ai.exec(F)||ad.fail.argumentInvalid("groupLevelText","Invalid grouping level syntax '{0}'.",[F]);F=u[1];u=(u[2]||"").toLowerCase()==="desc";return new V.data.GroupingDimensionSpec(F,u,f)})}function aC(bh,bg){function bb(bj){if(bj){var bk=bj.key;if(!ad.hasOwnProp.call(O,bk)){if(M){var bi=ad.getOwn(M,bk);if(bi){if(Z){return}bj=bi}}O[bk]=bj;bk=bj.id;L[bk]=bj;ag.call(this,bj,!!this._dimensions,ab);if(!bj.isNull){X&&bj.isSelected&&X.set(bk,bj);bj.isVisible&&Y.set(bk,bj)}return bj}}}bh||ad.fail.argumentRequired("newDatums");var ab=ad.get(bg,"doAtomGC",false),Z=ad.get(bg,"isAdditive",false),Y=this._visibleNotNullDatums,X=this._selectedNotNullDatums,O={},M;if(bg=this._datums){var I=Z&&ab;M=ad.query(bg).uniqueIndex(function(bi){I&&ag.call(this,bi,false,true);return bi.key},this);if(Z){this._sumAbsCache=null}else{a9.call(this);X&&X.clear();Y.clear()}}else{Z=false}var L;L=Z?this._datumsById:(this._datumsById={});if(ad.array.is(bh)){for(var F=0,u=bh.length;F<u;){var f=bh[F],i=bb.call(this,f);if(i){if(i!==f){bh[F]=i}F++}else{bh.splice(F,1);u--}}}else{if(bh instanceof ad.Query){bh=bh.select(bb,this).where(ad.notNully).array()}else{throw ad.error.argumentInvalid("newDatums","Argument is of invalid type.")}}ab&&ad.eachOwn(this._dimensions,function(bi){a3.call(bi)});if(Z){ad.array.append(bg,bh);this._linkChildren&&this._linkChildren.forEach(function(bi){G.call(bi,bh)})}else{this._datums=bh}}function ag(i,f,M){var L=this._dimensions;L||(f=false);if(f||M){i=i.atoms;for(var I in i){var F=i[I];if(f){var u=ad.getOwn(L,I)||ad.fail.argumentInvalid("Datum has atoms of foreign dimension");ay.call(u,F)}if(M){F.visited=true}}}}function G(i){i||ad.fail.argumentRequired("newDatums");var f=this._groupOper;if(f){i=f.executeAdd(this,i)}else{m.call(this,i)}this._linkChildren&&this._linkChildren.forEach(function(u){G.call(u,i)})}function m(i){function f(O){var M=O.id;F[M]=O;ag.call(this,O,true,false);if(!O.isNull){I&&O.isSelected&&I.set(M,O);O.isVisible&&L.set(M,O)}u.push(O)}var L=this._visibleNotNullDatums,I=this._selectedNotNullDatums;this._sumAbsCache=null;var F=this._datumsById,u=this._datums;i.forEach(f,this)}function ba(i){function f(X){if(X!=null){typeof X==="object"||ad.fail.invalidArgument("datumFilter");var O={},M=false;for(var L in X){var I=F.call(this,L,X[L]);if(I){M=true;O[L]=I}}M&&u.push(O)}}function F(M,L){var I=this.dimensions(M);M=ad.query(L).select(function(O){return I.atom(O)}).where(ad.notNully).distinct(ad.propGet("key")).array();return M.length?M:null}var u=[];(i=ad.array.as(i))&&i.forEach(f,this);return u}function p(i,f){var L=ad.get(f,"selected"),I=ad.get(f,"visible"),F=ad.get(f,"where"),u=ad.get(f,"isNull");if(I!=null){i=i.where(function(M){return M.isVisible===I})}if(u!=null){i=i.where(function(M){return M.isNull===u})}if(L!=null){i=i.where(function(M){return M.isSelected===L})}if(F){i=i.where(F)}return i}function aU(i,f){var F=ad.array.as(ad.get(f,"orderBy")),u=ad.create(f||{},{orderBy:null});return ad.query(i).selectMany(function(L,I){if(F){u.orderBy=F[I]}return J.call(this,L,u)},this).distinct(ad.propGet("id"))}function J(i,f){var L=f.orderBy;if(L){if(L.indexOf("|")>=0){throw ad.error.argumentInvalid("keyArgs.orderBy","Multi-dimension order by is not supported.")}}else{L=Object.keys(i).sort().join(",")}var I=this.groupBy(L,f),F=I.treeHeight,u=[];return ad.query(function(){var O;if(this._data){if(this._datumsQuery){this._data||ad.assert("Must have a current data");u.length||ad.assert("Must have a parent data");!this._dimAtomsOrQuery||ad.assert();if(this._datumsQuery.next()){this.item=this._datumsQuery.item;return 1}this._datumsQuery=null;O=u.pop();this._data=O.data;this._dimAtomsOrQuery=O.dimAtomsOrQuery}}else{this._data=I;this._dimAtomsOrQuery=ad.query(i[I._groupLevelSpec.dimensions[0].name])}this._dimAtomsOrQuery||ad.assert("Invalid programmer");this._data||ad.assert("Must have a current data");var M=u.length;do{for(;this._dimAtomsOrQuery.next();){if((O=this._data.child(this._dimAtomsOrQuery.item.key))&&(M<F-1||O._datums.length)){u.push({data:this._data,dimAtomsOrQuery:this._dimAtomsOrQuery});this._data=O;if(M<F-1){this._dimAtomsOrQuery=ad.query(i[O._groupLevelSpec.dimensions[0].name]);M++}else{this._dimAtomsOrQuery=null;this._datumsQuery=ad.query(O._datums);this._datumsQuery.next();this.item=this._datumsQuery.item;return 1}}}if(!M){return 0}O=u.pop();this._data=O.data;this._dimAtomsOrQuery=O.dimAtomsOrQuery;M--}while(1);return 0})}function r(f){if(this._renderId!==f){this._renderId=f;this.renderState={}}}function aD(i){var f;if(i&&(f=i.ownerScene)){i=f}if(this._active!==i){this._active&&ah.call(this._active,false);(this._active=i||null)&&ah.call(this._active,true);return true}return false}function ah(f){if(this.isActive!==f){if(f){this.isActive=true}else{delete this.isActive}}}function a(i,f){return function(){var u=this.vars[i];if(u===undefined){u=this[f]();if(u===undefined){u=null}this.vars[i]=u}return u}}function H(i,f){this.event=f||R.event;this.pvMark=i;var u;if(i){if(this.sign=i.sign||null){u=i.instance().data}if(u){this.index=u.childIndex()}else{this.index=null;u=new V.visual.Scene(null,{panel:this.panel})}}else{this.index=this.sign=null;u=new V.visual.Scene(null,{panel:this.panel,source:this.chart.root.data})}this.scene=u}function aZ(i){var f=aJ(i)||ad.assert("There must exist an ancestor sign");f=new V.visual.BasicSign(f.panel,i);var I=i.scene,F,u;if(I&&(F=i.index)!=null&&F>=0&&(u=I[F])){f._inContext(u.data,u)}return f}function aJ(i){var f;do{i=i.parent}while(i&&!(f=i.sign)&&(!i.proto||!(f=i.proto.sign)));return f}function q(f){return f.isDiscrete()?"discrete":f.firstDimensionValueType()===Date?"timeSeries":"numeric"}function a4(i,f){return V.parseDomainScope(i,f.orientation)}function aO(f){if(f){if(ad.hasOwn(az.namesSet,f)){return V.BasePanel[this.orientation==="y"?"horizontalAlign":"verticalAlign2"][f]}V.debug>=2&&V.log(ad.format("Invalid axis position value '{0}'.",[f]))}return this.orientation==="x"?"bottom":"left"}function bf(i){var f=this.option("Position");return at.toOrtho(i,f)}function aY(i){var f=this.option("Position");return at.to(i,{singleProp:V.BasePanel.orthogonalLength[f]})}function aw(i){var f;if(i){var u;ad.eachOwn(i,function(I,F){u=true;i[F]=R.color(I)});if(u){f=i}}return f}function W(){var i;if(i=this.scaleType){if(i==="discrete"){if(this.index===0){i=V.createColorScheme()}else{var f=this;i=function(){return f.chart._getRoleColorScale(f.role.name)}}}else{bd||(bd=["red","yellow","green"].map(R.color));i=bd.slice()}}else{i=V.createColorScheme()}return i}function aI(i){if(!ad.object.is(i)){var f=this.option("Position");i=(new at).setSize(i,{singleProp:V.BasePanel.orthogonalLength[f]})}return i}function A(i){var f=this.option("Position");return V.parseAlign(f,i)}function k(i){if(this.name==="trend"){return null}var f=this.option("TrendType");if(!f&&i){f=i.type}if(!f||f==="none"){return null}i=i?ObjectFactory.create(i):{};i.type=f;f=this.option("TrendLabel");if(f!==undefined){i.label=f}return i}function aX(i,f){return{resolveV1:function(u){if(this.globalIndex===0){this._specifyChartOption(u,"show"+i)||u.defaultValue(f);return true}}}}function al(f){return{resolveV1:function(i){this._specifyChartOption(i,"show"+f);return true}}}var V=ad.globalSpace("pvc",{debug:0});(function(){if(typeof window!=="undefined"&&window.location){var f=function(i){return i&&/\bdebug=true\b/.test(i)?i:null};if(f=f(window.location.href)||f(window.top.location.href)){f=/\bdebugLevel=(\d+)/.exec(f);V.debug=f?+f[1]:3}}})();var ar=R.Mark;V.invisibleFill="rgba(127,127,127,0.00001)";V.logSeparator="------------------------------------------";var a8=Array.prototype.slice;V.setDebug=function(f){f=+f;V.debug=isNaN(f)?0:f;v();d();return V.debug};V.setDebug(V.debug);V.defaultCompatVersion=function(i){var f=V.BaseChart.prototype.defaults;if(i!=null){return f.compatVersion=i}return f.compatVersion};V.cloneMatrix=function(f){return f.map(function(i){return i.slice()})};V.stringify=function(i,f){var F=ad.get(f,"maxLevel")||5,u=[];V.stringifyRecursive(u,i,F,f);return u.join("")};V.stringifyRecursive=function(i,f,M,L){if(M>0){M--;switch(typeof f){case"undefined":return i.push("undefined");case"object":if(!f){i.push("null");return true}if(ad.fun.is(f.stringify)){return f.stringify(i,M,L)}if(f instanceof Array){i.push("[");f.forEach(function(X,O){O&&i.push(", ");V.stringifyRecursive(i,X,M,L)||i.pop()});i.push("]")}else{var I=ad.get(L,"ownOnly",true);if(f===ad.global){i.push("<window>");return true}if(ad.fun.is(f.cloneNode)){i.push("<dom #"+(f.id||f.name||"?")+">");return true}if(M>1&&f.constructor!==Object){M=1;I=true}i.push("{");var F=true;for(var u in f){if(!I||ad.hasOwnProp.call(f,u)){F||i.push(", ");i.push(u+": ");if(V.stringifyRecursive(i,f[u],M,L)){if(F){F=false}}else{i.pop();F||i.pop()}}}if(F){f=""+f;f!=="[object Object]"&&i.push("{"+f+"}")}i.push("}")}return true;case"number":i.push(""+Math.round(100000*f)/100000);return true;case"boolean":i.push(""+f);return true;case"string":i.push(JSON.stringify(f));return true;case"function":if(ad.get(L,"funs",false)){i.push(JSON.stringify(f.toString().substr(0,13)+"..."));return true}return false}i.push("'new ???'");return true}};V.orientation={vertical:"vertical",horizontal:"horizontal"};V.extensionTag="extension";V.extendType=function(i,f,L){if(f){var I,F=i.prototype._vars,u=function(O,M){if(O!==undefined){I||(I={});if(F&&F[M]){M="_"+M+"EvalCore"}I[M]=ad.fun.to(O)}};L?L.forEach(function(M){u(f[M],M)}):ad.each(u);I&&i.add(I)}};R.Color.prototype.stringify=function(i,f,u){return V.stringifyRecursive(i,this.key,f,u)};ar.prototype.hasDelegateValue=function(i,f){var u=this.$propertiesMap[i];if(u){return !f||u.tag===f}if(this.proto){return this.proto.hasDelegateValue(i,f)}return false};V.defaultColorScheme=null;V.brighterColorTransform=function(f){return(f.rgb?f:R.color(f)).brighter(0.6)};V.setDefaultColorScheme=function(f){return V.defaultColorScheme=V.colorScheme(f)};V.defaultColor=R.Colors.category10()("?");V.colorScheme=function(f){if(f==null){return null}if(typeof f==="function"){if(!f.hasOwnProperty("range")){return f}f=f.range()}else{f=ad.array.as(f)}if(!f.length){return null}return function(){var i=R.colors(f);i.domain.apply(i,arguments);return i}};V.createColorScheme=function(f){return V.colorScheme(f)||V.defaultColorScheme||R.Colors.category10};V.toGrayScale=function(i,f,L,I){i=R.color(i);var F=0.299*i.r+0.587*i.g+0.114*i.b;if(L===undefined){L=200}else{if(L==null){L=255}}if(I===undefined){I=30}else{if(I==null){I=0}}var u=L-I;F=u<=0?L:I+F/255*u;if(f==null){f=i.opacity}else{if(f<0){f=-f*i.opacity}}F=Math.round(F);return R.rgb(F,F,F,f)};V.removeTipsyLegends=function(){try{$(".tipsy").remove()}catch(f){}};V.createDateComparer=function(i,f){if(!f){f=R.identity}return function(F,u){return i.parse(f(F))-i.parse(f(u))}};V.time={intervals:{y:31536000000,m:2592000000,d30:2592000000,w:604800000,d7:604800000,d:86400000,h:3600000,M:60000,s:1000,ms:1},withoutTime:function(f){return new Date(f.getFullYear(),f.getMonth(),f.getDate())},weekday:{previousOrSelf:function(i,f){if(f=i.getDay()-f){i=new Date(i-(f<0?7+f:f)*V.time.intervals.d)}return i},nextOrSelf:function(i,f){if(f=i.getDay()-f){i=new Date(i+(f>0?7-f:-f)*V.time.intervals.d)}return i},closestOrSelf:function(i,f){if(f=i.getDay()-f){var F=V.time.intervals.d,u=f>0?1:-1;f=Math.abs(f);i=f>=4?new Date(i.getTime()+u*(7-f)*F):new Date(i.getTime()-u*f*F)}return i}}};R.Format.createParser=function(i){function f(u){return u instanceof Date?u:ad.number.is(u)?new Date(u):i.parse(u)}return f};R.Format.createFormatter=function(i){function f(u){return u!=null?i.format(u):""}return f};V.buildTitleFromName=function(f){return ad.firstUpperCase(f).replace(/([a-z\d])([A-Z])/,"$1 $2")};V.buildIndexedId=function(i,f){if(f>0){return i+""+(f+1)}return i};V.splitIndexedId=function(i){i=/^(.*?)(\d*)$/.exec(i);var f=null;if(i[2]){f=Number(i[2]);if(f<=1){f=1}else{f--}}return[i[1],f]};var aS=[null];V.makeExtensionAbsId=function(i,f){if(!i){return f}return ad.query(f||aS).selectMany(function(u){return ad.query(i).select(function(F){return a1(F,u)})}).where(ad.truthy).array()};V.makeEnumParser=function(i,f,F){if(ad.array.is(f)){var u={};f.forEach(function(I){if(I){u[I.toLowerCase()]=I}});f=function(I){return ad.hasOwn(u,I)}}if(F){F=F.toLowerCase()}return function(I){if(I){I=(""+I).toLowerCase()}if(!f(I)){I&&V.debug>=2&&V.warn("Invalid '"+i+"' value: '"+I+"'. Assuming '"+F+"'.");I=F}return I}};V.parseDistinctIndexArray=function(i,f,u){i=ad.array.as(i);if(i==null){return null}if(f==null){f=0}if(u==null){u=Infinity}i=ad.query(i).select(function(F){return +F}).where(function(F){return !isNaN(F)&&F>=f&&F<=u}).distinct().array();return i.length?i:null};V.parseMultiChartOverflow=V.makeEnumParser("multiChartOverflow",["grow","fit","clip"],"grow");V.parseLegendClickMode=V.makeEnumParser("legendClickMode",["toggleSelected","toggleVisible","none"],"toggleVisible");V.parseTooltipAutoContent=V.makeEnumParser("tooltipAutoContent",["summary","value"],"value");V.parseSelectionMode=V.makeEnumParser("selectionMode",["rubberBand","focusWindow"],"rubberBand");V.parseClearSelectionMode=V.makeEnumParser("clearSelectionMode",["emptySpaceClick","manual"],"emptySpaceClick");V.parseShape=V.makeEnumParser("shape",R.Scene.hasSymbol,null);V.parseTreemapColorMode=V.makeEnumParser("colorMode",["byParent","bySelf"],"byParent");V.parseTreemapLayoutMode=V.makeEnumParser("layoutMode",["squarify","slice-and-dice","slice","dice"],"squarify");V.parseContinuousColorScaleType=function(f){if(f){f=(""+f).toLowerCase();switch(f){case"linear":case"normal":case"discrete":break;default:V.debug>=2&&V.log("[Warning] Invalid 'ScaleType' option value: '"+f+"'.");f=null;break}}return f};V.parseDomainScope=function(i,f){if(i){i=(""+i).toLowerCase();switch(i){case"cell":case"global":break;case"section":if(!f){throw ad.error.argumentRequired("orientation")}i=f==="y"?"row":"column";break;case"column":case"row":if(f&&f!==(i==="row"?"y":"x")){i="section";V.debug>=2&&V.log("[Warning] Invalid 'DomainScope' option value: '"+i+"' for the orientation: '"+f+"'.")}break;default:V.debug>=2&&V.log("[Warning] Invalid 'DomainScope' option value: '"+i+"'.");i=null;break}}return i};V.parseDomainRoundingMode=function(f){if(f){f=(""+f).toLowerCase();switch(f){case"none":case"nice":case"tick":break;default:V.debug>=2&&V.log("[Warning] Invalid 'DomainRoundMode' value: '"+f+"'.");f=null;break}}return f};V.parseOverlappedLabelsMode=function(f){if(f){f=(""+f).toLowerCase();switch(f){case"leave":case"hide":case"rotatethenhide":break;default:V.debug>=2&&V.log("[Warning] Invalid 'OverlappedLabelsMode' option value: '"+f+"'.");f=null;break}}return f};V.castNumber=function(f){if(f!=null){f=+f;if(isNaN(f)){f=null}}return f};V.parseWaterDirection=function(f){if(f){f=(""+f).toLowerCase();switch(f){case"up":case"down":return f}V.debug>=2&&V.log("[Warning] Invalid 'WaterDirection' value: '"+f+"'.")}};V.parseTrendType=function(f){if(f){f=(""+f).toLowerCase();if(f==="none"){return f}if(V.trends.has(f)){return f}V.debug>=2&&V.log("[Warning] Invalid 'TrendType' value: '"+f+"'.")}};V.parseNullInterpolationMode=function(f){if(f){f=(""+f).toLowerCase();switch(f){case"none":case"linear":case"zero":return f}V.debug>=2&&V.log("[Warning] Invalid 'NullInterpolationMode' value: '"+f+"'.")}};V.parseAlign=function(i,f){if(f){f=(""+f).toLowerCase()}var u;if(i==="left"||i==="right"){i=f&&V.BasePanel.verticalAlign[f];if(!i){i="middle";u=!!f}}else{i=f&&V.BasePanel.horizontalAlign[f];if(!i){i="center";u=!!f}}u&&V.debug>=2&&V.log(ad.format("Invalid alignment value '{0}'. Assuming '{1}'.",[f,i]));return i};V.parseAnchor=function(f){if(f){f=(""+f).toLowerCase();switch(f){case"top":case"left":case"center":case"bottom":case"right":return f}V.debug>=2&&V.log(ad.format("Invalid anchor value '{0}'.",[f]))}};V.parseAnchorWedge=function(f){if(f){f=(""+f).toLowerCase();switch(f){case"outer":case"inner":case"center":case"start":case"end":return f}V.debug>=2&&V.log(ad.format("Invalid wedge anchor value '{0}'.",[f]))}};V.unionExtents=function(i,f){if(i){if(f){if(f.min<i.min){i.min=f.min}if(f.max>i.max){i.max=f.max}}}else{if(!f){return null}i={min:f.min,max:f.max}}return i};var az=V.Sides=function(f){f!=null&&this.setSides(f)};az.hnames="left right".split(" ");az.vnames="top bottom".split(" ");az.names="left right top bottom".split(" ");az.namesSet=R.dict(az.names,ad.retTrue);V.parsePosition=function(i,f){if(i){i=(""+i).toLowerCase();if(!ad.hasOwn(az.namesSet,i)){var u=f||"left";V.debug>=2&&V.log(ad.format("Invalid position value '{0}. Assuming '{1}'.",[i,u]));i=u}}return i||f||"left"};az.as=function(f){if(f!=null&&!(f instanceof az)){f=(new az).setSides(f)}return f};az.prototype.stringify=function(i,f,u){return V.stringifyRecursive(i,ad.copyOwn(this),f,u)};az.prototype.setSides=function(i){if(typeof i==="string"){var f=i.split(/\s+/).map(function(u){return au.parse(u)});switch(f.length){case 1:this.set("all",f[0]);return this;case 2:this.set("top",f[0]);this.set("left",f[1]);this.set("right",f[1]);this.set("bottom",f[0]);return this;case 3:this.set("top",f[0]);this.set("left",f[1]);this.set("right",f[1]);this.set("bottom",f[2]);return this;case 4:this.set("top",f[0]);this.set("right",f[1]);this.set("bottom",f[2]);this.set("left",f[3]);return this;case 0:return this}}else{if(typeof i==="number"){this.set("all",i);return this}else{if(typeof i==="object"){if(i instanceof au){this.set("all",i)}else{this.set("all",i.all);for(f in i){f!=="all"&&az.namesSet.hasOwnProperty(f)&&this.set(f,i[f])}}return this}}}V.debug&&V.log("Invalid 'sides' value: "+V.stringify(i));return this};az.prototype.set=function(i,f){f=au.parse(f);if(f!=null){if(i==="all"){az.names.forEach(function(u){this[u]=f},this)}else{if(ad.hasOwn(az.namesSet,i)){this[i]=f}}}};az.prototype.resolve=function(i,f){if(typeof i==="object"){f=i.height;i=i.width}var u={};az.names.forEach(function(L){var I=0,F=this[L];if(F!=null){I=typeof F==="number"?F:F.resolve(L==="left"||L==="right"?i:f)}u[L]=I},this);return az.updateSize(u)};az.updateSize=function(f){f.width=(f.left||0)+(f.right||0);f.height=(f.bottom||0)+(f.top||0);return f};az.resolvedMax=function(i,f){var u={};az.names.forEach(function(F){u[F]=Math.max(i[F]||0,f[F]||0)});return u};az.inflate=function(i,f){var u={};az.names.forEach(function(F){u[F]=(i[F]||0)+f});return az.updateSize(u)};var au=V.PercentValue=function(f){this.percent=f};au.prototype.resolve=function(f){return this.percent*f};au.parse=function(i){if(i!=null&&i!==""){switch(typeof i){case"number":return i;case"string":var f=i.match(/^(.+?)\s*(%)?$/);if(f){var u=+f[1];if(!isNaN(u)){if(f[2]){if(u>=0){return new au(u/100)}}else{return u}}}break;case"object":if(i instanceof au){return i}break}V.debug&&V.log(ad.format("Invalid margins component '{0}'",[""+i]))}};au.resolve=function(i,f){return i instanceof au?i.resolve(f):i};var aB=ar.prototype.renderCore,P=ar.prototype.zOrder;ar.prototype.zOrder=function(i){var f=this.borderPanel;if(f&&f!==this){return P.call(f,i)}return P.call(this,i)};ar.prototype.renderCore=function(){var f=this.root;f._renderId=(f._renderId||0)+1;V.debug>=25&&V.log("BEGIN RENDER "+f._renderId);aB.call(this);V.debug>=25&&V.log("END RENDER "+f._renderId)};ar.prototype.renderId=function(){return this.root._renderId};ar.prototype.wrapper=function(f){this._wrapper=f;return this};ar.prototype.wrap=function(i,f){if(i&&ad.fun.is(i)&&this._wrapper&&!i._cccWrapped){i=this._wrapper(i,f);i._cccWrapped=true}return i};ar.prototype.lock=function(i,f){f!==undefined&&this[i](f);(this._locked||(this._locked={}))[i]=true;return this};ar.prototype.isIntercepted=function(f){return this._intercepted&&this._intercepted[f]};ar.prototype.isLocked=function(f){return this._locked&&this._locked[f]};ar.prototype.ensureEvents=function(i){var f=this.propertyValue("events",true);if(!f||f==="none"){this.events(i||"all")}return this};ar.prototype.addMargin=function(i,f){if(f!==0){var F=ad.nullyTo(this.propertyValue(i),0),u=R.functor(F);this[i](function(){return f+u.apply(this,a8.call(arguments))})}return this};ar.prototype.addMargins=function(i){var f=ad.get(i,"all",0);this.addMargin("left",ad.get(i,"left",f));this.addMargin("right",ad.get(i,"right",f));this.addMargin("top",ad.get(i,"top",f));this.addMargin("bottom",ad.get(i,"bottom",f));return this};ar.prototype.eachInstanceWithData=function(i,f){this.eachInstance(function(I,F,u){I.mark.sign&&I[F].data&&i.call(f,I,F,u)})};ar.prototype.eachSceneWithDataOnRect=function(i,f,O,M){function L(Y,X){if(Y.intersectsRect(i)){(Y=X.data)&&Y.datum&&f.call(O,Y)}}var I=this,F=I.sign;if(!(F&&!F.selectable())){if(M==null){M=I.rubberBandSelectionMode||"partial"}var u=M==="center";I.eachInstanceWithData(function(Z,X,Y){var ab=I.getShape(Z,X,0.15);ab=(u?ab.center():ab).apply(Y);L(ab,Z[X],X)})}};ar.prototype.eachDatumOnRect=function(i,f,O,M){function L(Y,X){if(Y.intersectsRect(i)){(Y=X.data)&&Y.datum&&Y.datums().each(function(Z){Z.isNull||f.call(O,Z)})}}var I=this,F=I.sign;if(!(F&&!F.selectable())){if(M==null){M=I.rubberBandSelectionMode||"partial"}var u=M==="center";I.eachInstanceWithData(function(Z,X,Y){var ab=I.getShape(Z,X,0.15);ab=(u?ab.center():ab).apply(Y);L(ab,Z[X],X)})}};R.Transform.prototype.transformHPosition=function(f){return this.x+this.k*f};R.Transform.prototype.transformVPosition=function(f){return this.y+this.k*f};R.Transform.prototype.transformLength=function(f){return this.k*f};var at=ad.type("pvc.Size").init(function(i,f){if(arguments.length===1){i!=null&&this.setSize(i)}else{if(i!=null){this.width=i}if(f!=null){this.height=f}}}).add({stringify:function(i,f,u){return V.stringifyRecursive(i,ad.copyOwn(this),f,u)},setSize:function(i,f){if(typeof i==="string"){var u=i.split(/\s+/).map(function(F){return au.parse(F)});switch(u.length){case 1:this.set(ad.get(f,"singleProp","all"),u[0]);return this;case 2:this.set("width",u[0]);this.set("height",u[1]);return this;case 0:return this}}else{if(typeof i==="number"){this.set(ad.get(f,"singleProp","all"),i);return this}else{if(typeof i==="object"){if(i instanceof au){this.set(ad.get(f,"singleProp","all"),i)}else{this.set("all",i.all);for(u in i){u!=="all"&&this.set(u,i[u])}}return this}}}V.debug&&V.log("Invalid 'size' value: "+V.stringify(i));return this},set:function(i,f){if(f!=null&&(i==="all"||ad.hasOwn(at.namesSet,i))){f=au.parse(f);if(f!=null){if(i==="all"){at.names.forEach(function(u){this[u]=f},this)}else{this[i]=f}}}return this},clone:function(){return new at(this.width,this.height)},intersect:function(f){return new at(Math.min(this.width,f.width),Math.min(this.height,f.height))},resolve:function(i){var f={};at.names.forEach(function(I){var F=this[I];if(F!=null){if(typeof F==="number"){f[I]=F}else{if(i){var u=i[I];if(u!=null){f[I]=F.resolve(u)}}}}},this);return f}});at.names=["width","height"];at.namesSet=R.dict(at.names,ad.retTrue);at.toOrtho=function(i,f){if(i!=null){var u;if(f){u=V.BasePanel.orthogonalLength[f]}i=at.to(i,{singleProp:u});f&&delete i[V.BasePanel.oppositeLength[u]]}return i};at.to=function(i,f){if(i!=null&&!(i instanceof at)){i=(new at).setSize(i,f)}return i};var ap=ad.type("pvc.Offset").init(function(i,f){if(arguments.length===1){i!=null&&this.setOffset(i)}else{if(i!=null){this.x=i}if(f!=null){this.y=f}}}).add({stringify:function(i,f,u){return V.stringifyRecursive(i,ad.copyOwn(this),f,u)},setOffset:function(i,f){if(typeof i==="string"){var u=i.split(/\s+/).map(function(F){return au.parse(F)});switch(u.length){case 1:this.set(ad.get(f,"singleProp","all"),u[0]);return this;case 2:this.set("x",u[0]);this.set("y",u[1]);return this;case 0:return this}}else{if(typeof i==="number"){this.set(ad.get(f,"singleProp","all"),i);return this}else{if(typeof i==="object"){this.set("all",i.all);for(u in i){u!=="all"&&this.set(u,i[u])}return this}}}V.debug&&V.log("Invalid 'offset' value: "+V.stringify(i));return this},set:function(i,f){if(f!=null&&ad.hasOwn(ap.namesSet,i)){f=au.parse(f);if(f!=null){if(i==="all"){ap.names.forEach(function(u){this[u]=f},this)}else{this[i]=f}}}},resolve:function(i){var f={};at.names.forEach(function(I){var F=ap.namesSizeToOffset[I],u=this[F];if(u!=null){if(typeof u==="number"){f[F]=u}else{if(i){I=i[I];if(I!=null){f[F]=u.resolve(I)}}}}},this);return f}});ap.addStatic({names:["x","y"]}).addStatic({namesSet:R.dict(ap.names,ad.retTrue),namesSizeToOffset:{width:"x",height:"y"},namesSidesToOffset:{left:"x",right:"x",top:"y",bottom:"y"},as:function(f){if(f!=null&&!(f instanceof ap)){f=(new ap).setOffset(f)}return f}});(function(){jQuery.support.svg=jQuery.support.svg||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")})(jQuery);V.text={getFitInfo:function(i,f,I,F,u){if(I===""){return{h:true,v:true,d:true}}I=R.Text.measure(I,F).width;return{h:I<=i,v:I<=f,d:I<=Math.sqrt(i*i+f*f)-u}},trimToWidthB:function(i,f,I,F,u){i-=R.Text.measure(F,I).width;return V.text.trimToWidth(i,f,I,F,u)},trimToWidth:function(i,f,L,I,F){if(f===""){return f}var u=R.Text.measure(f,L).width;if(u<=i){return f}if(u>i*1.5){return V.text.trimToWidthBin(i,f,L,I,F)}for(;u>i;){f=F?f.slice(1):f.slice(0,f.length-1);u=R.Text.measure(f,L).width}return F?I+f:f+I},trimToWidthBin:function(Z,Y,X,O,M){for(var L=Y.length,I=L-2,F=0,u,f;F<=I&&I>0;){u=Math.ceil((F+I)/2);var i=M?Y.slice(L-u):Y.slice(0,u);f=R.Text.measure(i,X).width;if(f>Z){I=u-1}else{if(R.Text.measure(M?Y.slice(L-u-1):Y.slice(0,u+1),X).width<Z){F=u+1}else{return M?O+i:i+O}}}return M?O+Y.slice(L-I):Y.slice(0,I)+O},justify:function(i,f,M){var L=[];if(f<R.Text.measure("a",M).width){return L}i=(i||"").split(/\s+/);for(var I="";i.length;){var F=i.shift();if(F){var u=I?I+" "+F:F;if(R.Text.measure(u,M).width>f){I&&L.push(I);I=F}else{I=u}}}I&&L.push(I);return L},getLabelBBox:function(i,f,L,I,F,u){f=R.Label.getPolygon(i,f,L,I,F,u);I=f.bbox();I.source=f;I.sourceAngle=F;I.sourceAlign=L;I.sourceTextWidth=i;return I}};V.color={scale:a0,scales:c,toGray:V.toGrayScale,isGray:t};ad.type("pvc.color.ScalesBuild").init(function(i){this.keyArgs=i;this.data=i.data||ad.fail.argumentRequired("keyArgs.data");this.domainDimName=i.colorDimension||ad.fail.argumentRequired("keyArgs.colorDimension");this.domainDim=this.data.dimensions(this.domainDimName);var f=this.domainDim.type;if(f.isComparable){this.domainComparer=function(F,u){return f.compare(F,u)}}else{this.domainComparer=null;V.log("Color value dimension should be comparable. Generated color scale may be invalid.")}this.nullRangeValue=i.colorMissing?R.color(i.colorMissing):R.Color.transparent;this.domainRangeCountDif=0}).add({build:function(){this.range=this._getRange();this.desiredDomainCount=this.range.length+this.domainRangeCountDif;return this._createScale(this._getDomain())},buildMap:function(){this.range=this._getRange();this.desiredDomainCount=this.range.length+this.domainRangeCountDif;var f;if(this.keyArgs.normPerBaseCategory){f=function(i){return this._createScale(this._ensureDomain(null,false,i))}}else{f=this._createScale(this._getDomain());f=ad.fun.constant(f)}return this._createCategoryScalesMap(f)},_createScale:ad.method({isAbstract:true}),_createCategoryScalesMap:function(f){return this.data.children().object({name:function(i){return i.absKey},value:f,context:this})},_getRange:function(){var i=this.keyArgs,f=i.colors||["red","yellow","green"];if(i.colorMin!=null&&i.colorMax!=null){f=[i.colorMin,i.colorMax]}else{if(i.colorMin!=null){f.unshift(i.colorMin)}else{i.colorMax!=null&&f.push(i.colorMax)}}return f.map(function(u){return R.color(u)})},_getDataExtent:function(i){var f=i.dimensions(this.domainDimName).extent({visible:true});if(!f){return null}i=f.min.value;f=f.max.value;if(f==i){if(f>=1){i=f-1}else{f=i+1}}return{min:i,max:f}},_getDomain:function(){var f=this.keyArgs.colorDomain;if(f!=null){this.domainComparer&&f.sort(this.domainComparer);if(f.length>this.desiredDomainCount){f=f.slice(0,this.desiredDomainCount)}}else{f=[]}return this._ensureDomain(f,true,this.data)},_ensureDomain:function(i,f,F){var u;if(i&&f){f=this.desiredDomainCount-i.length;if(f>0){if(u=this._getDataExtent(F)){switch(f){case 1:this.domainComparer?ad.array.insert(i,u.max,this.domainComparer):i.push(u.max);break;case 2:if(this.domainComparer){ad.array.insert(i,u.min,this.domainComparer);ad.array.insert(i,u.max,this.domainComparer)}else{i.unshift(u.min);i.push(u.max)}break;default:V.debug>=2&&V.log("Ignoring option 'colorDomain' due to unsupported length."+ad.format(" Should have '{0}', but instead has '{1}'.",[this.desiredDomainCount,i.length]));i=null}}}}if(!i){u||(u=this._getDataExtent(F));if(u){i=u.min;u=u.max;F=(u-i)/(this.desiredDomainCount-1);i=R.range(i,u+F,F)}}return i}});ad.type("pvc.color.LinearScalesBuild",V.color.ScalesBuild).add({_createScale:function(i){var f=R.Scale.linear();i&&f.domain.apply(f,i);f.range.apply(f,this.range);return f}});ad.type("pvc.color.DiscreteScalesBuild",V.color.ScalesBuild).init(function(f){this.base(f);this.domainRangeCountDif=1}).add({_createScale:function(i){function f(O){if(O==null){return F}for(var M=0;M<L;M++){if(O<=i[M+1]){return I[M]}}return I[u]}var L=i.length-1,I=this.range,F=this.nullRangeValue,u=I.length-1;ad.copy(f,R.Scale.common);f.domain=function(){return i};f.range=function(){return I};return f}});ad.space("pvc.trends",function(i){var f={};ad.set(i,"define",function(I,F){I||ad.fail.argumentRequired("type");F||ad.fail.argumentRequired("trendSpec");ad.object.is(F)||ad.fail.argumentInvalid("trendSpec","Must be a trend specification object.");I=(""+I).toLowerCase();V.debug>=2&&ad.hasOwn(f,I)&&V.log(ad.format("[WARNING] A trend type with the name '{0}' is already defined.",[I]));var u=F.label||ad.fail.argumentRequired("trendSpec.label");F=F.model||ad.fail.argumentRequired("trendSpec.model");ad.fun.is(F)||ad.fail.argumentInvalid("trendSpec.mode","Must be a function.");f[I]={dataPartAtom:{v:"trend",f:u},type:I,label:u,model:F}},"get",function(u){u||ad.fail.argumentRequired("type");return ad.getOwn(f,u)||ad.fail.operationInvalid("Undefined trend type '{0}'.",[u])},"has",function(u){return ad.hasOwn(f,u)},"types",function(){return ad.ownKeys(f)});i.define("linear",{label:"Linear trend",model:function(bh){for(var bg=ad.get(bh,"rows"),bb=ad.get(bh,"x"),ab=ad.get(bh,"y"),Z=0,Y=bh=0,X=0,M=0,O=0,L=function(bj){return bj!=null?+bj:NaN};bg.next();){var I=bg.item,u=bb?L(bb(I)):Z;if(!isNaN(u)){I=L(ab(I));if(!isNaN(I)){bh++;Y+=u;X+=I;M+=u*I;O+=u*u}}Z++}var F,bi;if(bh>=2){bg=Y/bh;bb=X/bh;M=M/bh;bh=O/bh-bg*bg;bi=bh===0?0:(M-bg*bb)/bh;F=bb-bi*bg;return{alpha:F,beta:bi,reset:ad.noop,sample:function(bj){return F+bi*+bj}}}}});i.define("moving-average",{label:"Moving average",model:function(L){var I=Math.max(+(ad.get(L,"periods")||3),2),F=0,u=[];return{reset:function(){F=0;u.length=0},sample:function(O,M){O=I;if(M!=null){u.unshift(M);F+=M;O=u.length;if(O>I){F-=u.pop();O=I}}return F/O}}}});i.define("weighted-moving-average",{label:"Weighted Moving average",model:function(X){var O=Math.max(+(ad.get(X,"periods")||3),2),M=0,L=0,I=[],F=0,u=0;return{reset:function(){M=L=u=F=0;I.length=0},sample:function(Y,Z){if(Z!=null){if(F<O){I.push(Z);F++;u+=F;L+=F*Z;M+=Z}else{L+=F*Z-M;M+=Z-I[0];for(Y=1;Y<O;Y++){I[Y-1]=I[Y]}I[O-1]=Z}}return L/u}}}})});h.resolvers=ao;h.constant=Q;h.specify=w;h.defaultValue=e;V.options=h;var aL=ad.type().init(function(i,f,F,u){this.name=i;this._context=F;this.option=f;this._cast=ad.get(u,"cast");i=ad.get(u,"value");if(i!==undefined){this._defaultValue=this.value=i}if(i=ad.get(u,"resolve")){this._resolve=i}else{this.isResolved=true}if(i=ad.get(u,"getDefault")){this._getDefault=i}i=ad.get(u,"data");if(i!=null){this.data=i}this.alias=ad.array.to(ad.get(u,"alias"))}).add({isSpecified:false,isResolved:false,value:undefined,_defaultValue:undefined,resolve:function(){if(!this.isResolved){this.isResolved=true;this._getFunProp("_resolve").call(this._context,this);if(this.value==null){var f=this._dynDefault();if(f!=null){delete this.isSpecified;this.value=this._defaultValue=f}}}return this},specify:function(f){return this.set(f,false)},defaultValue:function(f){f!==undefined&&this.set(f,true);return this._defaultValue},cast:function(i){if(i!=null){var f=this._getFunProp("_cast");if(f){i=f.call(this._context,i,this)}}return i},set:function(i,f){if(i!=null){i=this.cast(i)}if(i==null){i=this._dynDefault();if(i!=null){f=true}}if(f){delete this.isSpecified;this._defaultValue=i;if(!this.isSpecified){this.value=i}}else{this.isResolved=this.isSpecified=true;this.value=i}return this},_dynDefault:function(){var f=this._getFunProp("_getDefault");return f&&this.cast(f.call(this._context,this))},_getFunProp:function(i){if(i=this[i]){var f=this._context;if(f&&ad.string.is(i)){i=f[i]}}return i}});ad.global.NoDataException=function(){};ad.global.InvalidDataException=function(f){this.message=f?f:"Invalid Data."};V.data={visibleKeyArgs:{visible:true}};ad.type("pvc.data.DimensionType").init(function(i,f,F){this.complexType=i;this.name=f;this.label=ad.get(F,"label")||V.buildTitleFromName(f);i=V.splitIndexedId(f);this.group=i[0];this.groupLevel=ad.nullyTo(i[1],0);if(this.label.indexOf("{")>=0){this.label=ad.format(this.label,[this.groupLevel+1])}this.playedVisualRoles=new ad.Map;this.isHidden=!!ad.get(F,"isHidden");i=ad.get(F,"valueType")||null;f=V.data.DimensionType.valueTypeName(i);var u=ad.getOwn(V.data.DimensionType.cast,f,null);this.valueType=i;this.valueTypeName=f;this.cast=u;this.isDiscreteValueType=this.valueType!==Number&&this.valueType!==Date;this.isDiscrete=ad.get(F,"isDiscrete");if(this.isDiscrete==null){this.isDiscrete=this.isDiscreteValueType}else{this.isDiscrete=!!this.isDiscrete;if(!this.isDiscrete&&this.isDiscreteValueType){throw ad.error.argumentInvalid("isDiscrete","The only supported continuous value types are Number and Date.")}}this._converter=ad.get(F,"converter")||null;if(!this._converter){if(i=ad.get(F,"rawFormat")){switch(this.valueType){case Date:this._converter=R.Format.createParser(R.Format.date(i));break}}}this._key=ad.get(F,"key")||null;this._comparer=ad.get(F,"comparer");if(this._comparer===undefined){switch(this.valueType){case Number:case Date:this._comparer=ad.compare;break;default:this._comparer=null}}this.isComparable=this._comparer!=null;this._formatter=ad.get(F,"formatter")||null;if(!this._formatter){switch(this.valueType){case Number:this._formatter=R.Format.createFormatter(R.Format.number().fractionDigits(0,2));break;case Date:i=ad.get(F,"format");if(!i){if(i=ad.get(F,"rawFormat")){i=i.replace(/-/g,"/")}}i||(i="%Y/%m/%d");this._formatter=R.Format.createFormatter(R.Format.date(i));break}}}).add({isCalculated:false,compare:function(i,f){if(i==null){if(f==null){return 0}return -1}else{if(f==null){return 1}}return this._comparer.call(null,i,f)},comparer:function(i){if(!this.isComparable){return null}var f=this;if(i){return this._reverseComparer||(this._reverseComparer=function(F,u){return f.compare(u,F)})}return this._directComparer||(this._directComparer=function(F,u){return f.compare(F,u)})},atomComparer:function(f){if(f){return this._reverseAtomComparer||(this._reverseAtomComparer=this._createReverseAtomComparer())}return this._directAtomComparer||(this._directAtomComparer=this._createDirectAtomComparer())},_toDiscrete:function(){this.isDiscrete=true},_toCalculated:function(){this.isCalculated=true},_createReverseAtomComparer:function(){function i(F,u){if(F===u){return 0}return f.compare(u.value,F.value)}if(!this.isComparable){return S}var f=this;return i},_createDirectAtomComparer:function(){function i(F,u){if(F===u){return 0}return f.compare(F.value,u.value)}if(!this.isComparable){return aq}var f=this;return i},formatter:function(){return this._formatter},converter:function(){return this._converter},playingPercentVisualRole:function(){return ad.query(this.playedVisualRoles.values()).any(function(f){return f.isPercent})}});V.data.DimensionType.cast={Date:function(f){return f instanceof Date?f:new Date(f)},Number:function(f){f=Number(f);return isNaN(f)?null:f},String:String,Boolean:Boolean,Object:Object,Any:null};V.data.DimensionType.dimensionGroupName=function(f){return f.replace(/^(.*?)(\d*)$/,"$1")};V.data.DimensionType.valueTypeName=function(f){if(f==null){return"Any"}switch(f){case Boolean:return"Boolean";case Number:return"Number";case String:return"String";case Object:return"Object";case Date:return"Date";default:throw ad.error.argumentInvalid("valueType","Invalid valueType function: '{0}'.",[f])}};V.data.DimensionType.extendSpec=function(i,f,F){i=V.data.DimensionType.dimensionGroupName(i);var u=ad.get(F,"dimensionGroups");if(u){if(u=u[i]){f=ad.create(u,f)}}f||(f={});switch(i){case"category":if(ad.get(F,"isCategoryTimeSeries",false)){if(f.valueType===undefined){f.valueType=Date}}break;case"value":if(f.valueType===undefined){f.valueType=Number}if(f.valueType===Number){if(f.formatter===undefined&&!f.format){f.formatter=ad.get(F,"valueNumberFormatter")}}break}if(f.converter===undefined&&f.valueType===Date&&!f.rawFormat){f.rawFormat=ad.get(F,"timeSeriesFormat")}return f};ad.type("pvc.data.ComplexType").init(function(i){this._dims={};this._dimsList=[];this._dimsNames=[];this._calculations=[];this._calculatedDimNames={};this._dimsIndexByName=null;this._dimsByGroup={};this._dimsNamesByGroup={};if(i){for(var f in i){this.addDimension(f,i[f])}}}).add({describe:function(){var f=["COMPLEX TYPE INFORMATION",V.logSeparator];this._dimsList.forEach(function(i){var u=[];u.push(i.valueTypeName);i.isComparable&&u.push("comparable");i.isDiscrete||u.push("continuous");i.isHidden&&u.push("hidden");f.push("  "+i.name+" ("+u.join(", ")+")")});return f.join("\n")},dimensions:function(i,f){if(i==null){return this._dims}var u=ad.getOwn(this._dims,i,null);if(!u&&ad.get(f,"assertExists",true)){throw ad.error.argumentInvalid("name","Undefined dimension '{0}'",[i])}return u},dimensionsList:function(){return this._dimsList},calculatedDimensionsList:function(){return this._calcDimsList},dimensionsNames:function(){return this._dimsNames},groupDimensions:function(i,f){var u=ad.getOwn(this._dimsByGroup,i);if(!u&&ad.get(f,"assertExists",true)){throw ad.error.operationInvalid("There is no dimension type group with name '{0}'.",[i])}return u},groupDimensionsNames:function(i,f){var u=ad.getOwn(this._dimsNamesByGroup,i);if(!u&&ad.get(f,"assertExists",true)){throw ad.error.operationInvalid("There is no dimension type group with name '{0}'.",[i])}return u},addDimension:function(i,f){i||ad.fail.argumentRequired("name");!ad.hasOwn(this._dims,i)||ad.fail.operationInvalid("A dimension type with name '{0}' is already defined.",[i]);f=new V.data.DimensionType(this,i,f);this._dims[i]=f;this._dimsIndexByName=null;var O=f.group,M;if(O){var L=ad.getOwn(this._dimsByGroup,O);if(L){M=this._dimsNamesByGroup[O]}else{L=this._dimsByGroup[O]=[];M=this._dimsNamesByGroup[O]=[]}M=ad.array.insert(M,i,ad.compare);M=~M;ad.array.insertAt(L,M,f)}var I;L=this._dimsList.length;if(O){M=f.groupLevel;for(var F=0;F<L;F++){var u=this._dimsList[F];if(u.group===O){if(u.groupLevel>M){I=F;break}I=F+1}}if(I==null){I=L}}else{I=L}ad.array.insertAt(this._dimsList,I,f);ad.array.insertAt(this._dimsNames,I,i);if(f._calculate){I=ad.array.binarySearch(this._calcDimsList,f._calculationOrder,ad.compare,function(X){return X._calculationOrder});if(I>=0){I++}else{I=~I}ad.array.insertAt(this._calcDimsList,I,f)}this._isPctRoleDimTypeMap=null;return f},addCalculation:function(i,f){i||ad.fail.argumentRequired("calcSpec");var F=i.calculation||ad.fail.argumentRequired("calculations[i].calculation");i=i.names;if((i=typeof i==="string"?i.split(/\s*\,\s*/):ad.array.as(i))&&i.length){var u=this._calculatedDimNames;i.forEach(function(M){if(M){M=M.replace(/^\s*(.+?)\s*$/,"$1");!ad.hasOwn(u,M)||ad.fail.argumentInvalid("calculations[i].names","Dimension name '{0}' is already being calculated.",[M]);var L=this._dims[M];if(!L){var I=V.data.DimensionType.extendSpec(M,null,f);this.addDimension(M,I)}u[M]=true;L._toCalculated()}},this)}this._calculations.push(F)},isCalculated:function(f){return ad.hasOwn(this._calculatedDimNames,f)},_calculate:function(i){var f=this._calculations;if(f.length){var u={};f.forEach(function(F){F(i,u)});return u}},getPlayingPercentVisualRoleDimensionMap:function(){var f=this._isPctRoleDimTypeMap;if(!f){f=this._isPctRoleDimTypeMap=new ad.Map(ad.query(ad.own(this._dims)).where(function(i){return i.playingPercentVisualRole()}).object({name:function(i){return i.name}}))}return f},sortDimensionNames:function(i,f){var u=this._dimsIndexByName;if(!u){this._dimsIndexByName=u=ad.query(this._dimsList).object({name:function(F){return F.name},value:function(I,F){return F}})}i.sort(function(I,F){return ad.compare(u[f?f(I):I],u[f?f(F):F])});return i}});ad.type("pvc.data.ComplexTypeProject").init(function(f){this._dims={};this._dimList=[];this._dimGroupsDims={};this._dimGroupSpecs=f||{};this._calcList=[]}).add({_ensureDim:function(i,f){i||ad.fail.argumentInvalid("name","Invalid dimension name '{0}'.",[i]);var u=ad.getOwn(this._dims,i);if(u){f&&ad.setUDefaults(u.spec,f)}else{u=this._dims[i]=this._createDim(i,f);this._dimList.push(u);f=ad.array.lazy(this._dimGroupsDims,u.groupName);ad.array.insert(f,i,ad.compare)}return u},hasDim:function(f){return ad.hasOwn(this._dims,f)},setDim:function(i,f){i=this._ensureDim(i).spec;f&&ad.copy(i,f);return this},setDimDefaults:function(i,f){ad.setUDefaults(this._ensureDim(i).spec,f);return this},_createDim:function(i,f){var F=V.data.DimensionType.dimensionGroupName(i),u=this._dimGroupSpecs[F];if(u){f=ad.create(u,f)}return{name:i,groupName:F,spec:f||{}}},readDim:function(i,f){f=this._ensureDim(i,f);if(f.isRead){throw ad.error.operationInvalid("Dimension '{0}' already is the target of a reader.",[i])}if(f.isCalc){throw ad.error.operationInvalid("Dimension '{0}' is being calculated, so it cannot be the target of a reader.",[i])}f.isRead=true},calcDim:function(i,f){f=this._ensureDim(i,f);if(f.isCalc){throw ad.error.operationInvalid("Dimension '{0}' already is being calculated.",[i])}if(f.isRead){throw ad.error.operationInvalid("Dimension '{0}' is the target of a reader, so it cannot be calculated.",[i])}f.isCalc=true},isReadOrCalc:function(f){if(f){if(f=ad.getOwn(this._dims,f)){return f.isRead||f.isCalc}}return false},groupDimensionsNames:function(f){return this._dimGroupsDims[f]},setCalc:function(i){i||ad.fail.argumentRequired("calculations[i]");i.calculation||ad.fail.argumentRequired("calculations[i].calculation");var f=i.names;(f=typeof f==="string"?f.split(/\s*\,\s*/):ad.array.as(f))&&f.length&&f.forEach(this.calcDim,this);this._calcList.push(i)},configureComplexType:function(i,f){this._dimList.forEach(function(F){var u=F.name;F=F.spec;F=V.data.DimensionType.extendSpec(u,F,f);i.addDimension(u,F)});this._calcList.forEach(function(u){i.addCalculation(u)})}});ad.type("pvc.data.TranslationOper").init(function(i,f,I,F,u){this.chart=i;this.complexTypeProj=f;this.source=I||ad.fail.argumentRequired("source");this.metadata=F||ad.fail.argumentRequired("metadata");this.options=u||{};this._initType();if(V.debug>=4){this._logItems=true;this._logItemCount=0}}).add({_logItems:false,logSource:ad.method({isAbstract:true}),logVItem:ad.method({isAbstract:true}),_translType:"Unknown",logTranslatorType:function(){return this._translType+" data source translator"},virtualItemSize:function(){return this.metadata.length},freeVirtualItemSize:function(){return this.virtualItemSize()-this._userUsedIndexesCount},setSource:function(f){if(!f){throw ad.error.argumentRequired("source")}this.source=f},defReader:function(i){i||ad.fail.argumentRequired("readerSpec");var f;f=ad.string.is(i)?i:i.names;f=ad.string.is(f)?f.split(/\s*\,\s*/):ad.array.as(f);var F=ad.array.as(i.indexes);F&&F.forEach(this._userUseIndex,this);var u=!!(f&&f.length);if(i=i.reader){u||ad.fail.argumentRequired("reader.names","Required argument when a reader function is specified.");this._userRead(i,f)}else{if(u){return this._userCreateReaders(f,F)}F&&F.forEach(function(I){this._userIndexesToSingleDim[I]=null},this)}return F},configureType:function(){this._configureTypeCore()},_configureTypeCore:ad.method({isAbstract:true}),_initType:function(){this._userDimsReaders=[];this._userDimsReadersByDim={};this._userItem=[];this._userUsedIndexes={};this._userUsedIndexesCount=0;this._userIndexesToSingleDim=[];var f=this.options.readers;f&&f.forEach(this.defReader,this);if(f=V.parseDistinctIndexArray(this.options.multiChartIndexes)){this._multiChartIndexes=this.defReader({names:"multiChart",indexes:f})}},_userUseIndex:function(f){f=+f;if(f<0){throw ad.error.argumentInvalid("index","Invalid reader index: '{0}'.",[f])}if(ad.hasOwn(this._userUsedIndexes,f)){throw ad.error.argumentInvalid("index","Virtual item index '{0}' is already assigned.",[f])}this._userUsedIndexes[f]=true;this._userUsedIndexesCount++;this._userItem[f]=true;return f},_userCreateReaders:function(i,f){if(f){f.forEach(function(Y,X){f[X]=+Y})}else{f=[]}var O=f.length,M=i.length,L;if(M>O){L=O>0?f[O-1]+1:0;do{L=this._nextAvailableItemIndex(L);f[O]=L;this._userUseIndex(L);O++}while(M>O)}for(var I=O===M?M:M-1,F,u=0;u<I;u++){L=i[u];F=f[u];this._userIndexesToSingleDim[F]=L;this._userRead(this._propGet(L,F),L)}if(I<M){L=V.splitIndexedId(i[M-1]);i=L[0];M=ad.nullyTo(L[1],0);for(I=I;I<O;I++,M++){L=V.buildIndexedId(i,M);F=f[I];this._userIndexesToSingleDim[F]=L;this._userRead(this._propGet(L,F),L)}}return f},_userRead:function(i,f){ad.fun.is(i)||ad.fail.argumentInvalid("reader","Reader must be a function.");ad.array.is(f)?f.forEach(function(u){this._readDim(u,i)},this):this._readDim(f,i);this._userDimsReaders.push(i)},_readDim:function(i,f){var F,u;F=this._userIndexesToSingleDim.indexOf(i);if(F>=0){if((F=this._itemInfos[F])&&!this.options.ignoreMetadataLabels){if(F=F.label||F.name){u={label:F}}}}this.complexTypeProj.readDim(i,u);this._userDimsReadersByDim[i]=f},execute:function(f){this.data=f;return this._executeCore()},_executeCore:function(){var f=this._getDimensionsReaders();return ad.query(this._getItems()).select(function(i){return this._readItem(i,f)},this)},_getItems:function(){return this.source},_getDimensionsReaders:function(){return this._userDimsReaders},_readItem:function(i,f){var O=this._logItems;if(O){if(this._logItemCount<10){V.log("virtual item ["+this._logItemCount+"]: "+V.stringify(i));this._logItemCount++}else{V.log("...");O=this._logItems=false}}for(var M=0,L=f.length,I=this.data,F={};M<L;){f[M++].call(I,i,F)}if(O){i={};for(var u in F){f=F[u];if(ad.object.is(f)){f="v" in f?f.v:"value" in f?f.value:"..."}i[u]=f}V.log("-> read: "+V.stringify(i))}return F},_propGet:function(i,f){function u(I,F){F[i]=I[f]}return u},_nextAvailableItemIndex:function(i,f){if(i==null){i=0}if(f==null){f=Infinity}for(;i<f&&ad.hasOwn(this._userItem,i);){i++}return i<f?i:-1},_getUnboundRoleDefaultDimNames:function(i,f,I,F){if((i=this.chart.visualRoles[i])&&!i.isPreBound()){if(i=i.defaultDimensionName){i=i.match(/^(.*?)(\*)?$/)[1];I||(I=[]);if(F==null){F=0}if(f==null){f=1}for(;f--;){var u=V.buildIndexedId(i,F++);this.complexTypeProj.isReadOrCalc(u)||I.push(u)}return I.length?I:null}}},collectFreeDiscreteAndConstinuousIndexes:function(i,f){this._itemInfos.forEach(function(F,u){if(!this._userUsedIndexes[u]){(F=F.type===1?f:i)&&F.push(u)}},this)}});ad.type("pvc.data.MatrixTranslationOper",V.data.TranslationOper).add({_initType:function(){this.J=this.metadata.length;this.I=this.source.length;this._processMetadata();this.base()},setSource:function(f){this.base(f);this.I=this.source.length},_knownContinuousColTypes:{numeric:1,number:1,integer:1},_processMetadata:function(){for(var Z=this._knownContinuousColTypes,Y=ad.query(this.metadata).select(function(bb,ab){bb.colIndex=ab;return bb}).where(function(ab){ab=ab.colType;return !ab||Z[ab.toLowerCase()]!==1}).select(function(ab){return ab.colIndex}).array(),X=ad.array.create(this.J,1),O=this.I,M=this.source,L=Y.length,I=0;I<O&&L>0;I++){for(var F=M[I],u=0;u<L;){var f=Y[u],i=F[f];if(i!=null){X[f]=this._getSourceValueType(i);Y.splice(u,1);L--}else{u++}}}this._columnTypes=X},_buildItemInfoFromMetadata:function(i){var f=this.metadata[i];return{type:this._columnTypes[i],name:f.colName,label:f.colLabel}},_getSourceValueType:function(f){switch(typeof f){case"number":return 1;case"object":if(f instanceof Date){return 1}}return 0},logSource:function(){var i=["DATA SOURCE SUMMARY",V.logSeparator,"ROWS ("+Math.min(10,this.I)+"/"+this.I+")"];ad.query(this.source).take(10).each(function(F,u){i.push("  ["+u+"] "+V.stringify(F))});this.I>10&&i.push("  ...");i.push("COLS ("+this.J+")");var f=this._columnTypes;this.metadata.forEach(function(F,u){i.push("  ["+u+"] '"+F.colName+"' (type: "+F.colType+", inspected: "+(f[u]?"number":"string")+(F.colLabel?", label: '"+F.colLabel+"'":"")+")")});i.push("");return i.join("\n")},_logVItem:function(i,f){var M=["VIRTUAL ITEM ARRAY",V.logSeparator],L=4,I=5,F=9;this._itemInfos.forEach(function(X,O){L=Math.max(L,(X.name||"").length);I=Math.max(I,(X.label||"").length);if(X=this._userIndexesToSingleDim[O]){F=Math.max(F,X.length)}},this);M.push("Index | Kind | Type   | "+ad.string.padRight("Name",L)+" | "+ad.string.padRight("Label",I)+" > Dimension","------+------+--------+-"+ad.string.padRight("",L,"-")+"-+-"+ad.string.padRight("",I,"-")+"-+-"+ad.string.padRight("",F,"-")+"-");var u=0;i.forEach(function(Z){for(var Y=0,O=f[Z];Y<O;Y++){var X=this._itemInfos[u],ab=this._userIndexesToSingleDim[u];if(ab===undefined){ab=""}M.push(" "+u+"    | "+Z+"    | "+(X.type?"number":"string")+" | "+ad.string.padRight(X.name||"",L)+" | "+ad.string.padRight(X.label||"",I)+" | "+ab);u++}},this);M.push("");return M.join("\n")},_createPlot2SeriesKeySet:function(i,f){var F=null,u=f.length;ad.query(i).each(function(L){var I=+L;if(isNaN(I)){throw ad.error.argumentInvalid("plot2DataSeriesIndexes","Element is not a number '{0}'.",[L])}if(I<0){if(I<=-u){throw ad.error.argumentInvalid("plot2DataSeriesIndexes","Index is out of range '{0}'.",[I])}I=u+I}else{if(I>=u){throw ad.error.argumentInvalid("plot2DataSeriesIndexes","Index is out of range '{0}'.",[I])}}F||(F={});F[f[I]]=true});return F},_dataPartGet:function(Y,X){function O(Z,ab){if(!I){F=Y();I=M.data.dimensions(L);V.debug>=3&&F&&V.log("Second axis series values: "+V.stringify(ad.keys(F)))}X(Z,f);Z=f.series;if(Z!=null&&Z.v!=null){Z=Z.v}Z=ad.hasOwn(F,Z)?i||(i=I.intern("1")):u||(u=I.intern("0"));ab[L]=Z}var M=this,L=this.options.dataPartDimName,I,F,u,i,f={};return O}});ad.type("pvc.data.CrosstabTranslationOper",V.data.MatrixTranslationOper).add({_translType:"Crosstab",virtualItemSize:function(){return this.R+this.C+this.M},_executeCore:function(){function i(Z,Y){var O=F[Z],X=0;for(Z=u[Z];Z-->0;){I[O++]=Y[X++]}}function f(Z,Y){var O=F.M;Y=u._colGroupsIndexes[Y];for(var X=u.M,bb=0;bb<X;bb++){var ab=Y[bb];I[O++]=ab!=null?Z[ab]:null}}function M(O){i("R",O);return ad.query(this._colGroups).select(function(Y,X){i("C",Y);f(O,X);return this._readItem(I,L)},this)}if(!this.metadata.length){return ad.query()}var L=this._getDimensionsReaders(),I=new Array(this.virtualItemSize()),F=this._itemCrossGroupIndex,u=this;return ad.query(this.source).selectMany(M,this)},_processMetadata:function(){this.base();this._separator=this.options.separator||"~";var i=this.R=1;this.M=this.C=1;this.measuresDirection=null;var f;f=this.metadata;f=this.options.seriesInRows?f.map(function(L){return L.colName}):this.options.compatVersion<=1?f.map(function(L){return{v:L.colName}}):f.map(function(L){return{v:L.colName,f:L.colLabel}});var I=this._itemCrossGroupInfos={};if(this.options.isMultiValued){var F=ad.get(this.options,"measuresInColumns",true);if(F||this.options.measuresIndex==null){i=this.R=this._getCategoriesCount();f=f.slice(i);if(f.length>0){if(F){this.measuresDirection="columns";this._processEncodedColGroups(f)}else{this._colGroups=f;this._colGroupsIndexes=[];this._colGroups.forEach(function(M,L){this._colGroups[L]=this._splitEncodedColGroupCell(M);this._colGroupsIndexes[L]=[this.R+L]},this);I.M=[this._buildItemInfoFromMetadata(i)]}this.C=this._colGroups[0].length;I.C=ad.range(0,this.C).select(function(){return{type:0}}).array()}else{this.C=this.M=0;I.M=[];I.C=[]}}else{this.measuresDirection="rows";this.R=+this.options.measuresIndex;F=this.options.measuresCount;if(F==null){F=1}this.M=F;this._colGroups=f.slice(this.R+1);this._colGroups.forEach(function(M,L){this._colGroups[L]=[M]},this)}}else{i=this.R=this._getCategoriesCount();this._colGroups=f.slice(i);this._colGroupsIndexes=new Array(this._colGroups.length);this._colGroups.forEach(function(M,L){this._colGroups[L]=[M];this._colGroupsIndexes[L]=[i+L]},this);I.C=[{type:0}];I.M=[{type:this._columnTypes[i]}]}I.R=ad.range(0,this.R).select(this._buildItemInfoFromMetadata,this).array();f=this.options.seriesInRows;F=this._itemCrossGroupIndex={C:!f?0:this.R,R:!f?this.C:0,M:this.C+this.R};var u=this._itemInfos=new Array(this.virtualItemSize());ad.eachOwn(F,function(M,L){I[L].forEach(function(X,O){u[M+O]=X})});this._itemLogicalGroup={series:f?this.R:this.C,category:f?this.C:this.R,value:this.M};this._itemLogicalGroupIndex={series:0,category:this._itemLogicalGroup.series,value:this.C+this.R}},logVItem:function(){return this._logVItem(["C","R","M"],{C:this.C,R:this.R,M:this.M})},_getCategoriesCount:function(){var f=this.options.categoriesCount;if(f!=null&&(!isFinite(f)||f<0)){f=null}if(f==null){(f=ad.query(this._columnTypes).whayl(function(i){return i===0}).count())||(f=1)}return f},_splitEncodedColGroupCell:function(i){var f=i.v,u;if(f==null){f=[]}else{f=f.split(this._separator);if(u=i.f){u=u.split(this._separator)}}return f.map(function(I,F){return{v:I,f:u&&u[F]}})},_processEncodedColGroups:function(bk){for(var bj=bk.length||ad.assert("Must have columns"),bi=this.R,bh=[],bg,bb={},ab=[],Z=0;Z<bj;Z++){var Y=bk[Z],O=Y.v,X=Y.f,M=O.lastIndexOf(this._separator),L,F,I;if(M<0){Y=O;L=X;O="";F=[]}else{Y=O.substring(M+1);O=O.substring(0,M);F=O.split(this._separator);if(X!=null){I=X.split(this._separator);L=I.pop()}F.forEach(function(bm,bl){F[bl]={v:bm,f:I&&I[bl]}})}if(!bg||bg.encValues!==O){bg={startIndex:Z,encValues:O,values:F,measureNames:[Y]};bh.push(bg)}else{bg.measureNames.push(Y)}O=Z-bg.startIndex;if(X=ad.getOwn(bb,Y)){if(O>X.groupIndex){X.groupIndex=O}}else{bb[Y]=X={name:Y,label:L,type:this._columnTypes[bi+Z],groupIndex:O,index:Z};ab.push(X)}}ab.sort(function(bm,bl){return ad.compare(bm.groupIndex,bl.groupIndex)||ad.compare(bm.index,bl.index)});ab.forEach(function(bm,bl){bm.groupIndex=bl});bk=bh.length;var i=new Array(bk),u=new Array(bk),f=ab.length;bh.map(function(bm,bl){i[bl]=bm.values;var bn=bm.startIndex,bo=u[bl]=new Array(f);bm.measureNames.forEach(function(bq,bp){bo[bb[bq].groupIndex]=bi+bn+bp})});this._colGroups=i;this._colGroupsIndexes=u;this._itemCrossGroupInfos.M=ab;this.M=f},configureType:function(){if(this.measuresDirection==="rows"){throw ad.error.notImplemented()}this.base()},_configureTypeCore:function(){function X(Y,Z,bg){for(var bb=L[Y]+bg;bg>0;){var ab=V.buildIndexedId(Y,Z);if(!O.complexTypeProj.isReadOrCalc(ab)){I=O._nextAvailableItemIndex(I);if(I>=bb){return}F.push({names:ab,indexes:I});I++;bg--}Z++}}var O=this,M=O._itemLogicalGroup,L=O._itemLogicalGroupIndex,I=0,F=[],u=this.options.dataPartDimName;if(u&&this.C===1&&!this.complexTypeProj.isReadOrCalc(u)){var i=this.options.plot2DataSeriesIndexes;if(i!=null){var f=this._colGroups.map(function(Y){return""+Y[0].v});this._plot2SeriesKeySet=this._createPlot2SeriesKeySet(i,f)}}["series","category","value"].forEach(function(Y){var Z=M[Y];Z>0&&X(Y,0,Z)});F&&F.forEach(this.defReader,this);if(this._plot2SeriesKeySet){(i=this._userDimsReadersByDim.series)&&this._userRead(this._dataPartGet(ad.fun.constant(this._plot2SeriesKeySet),i),u)}}});ad.type("pvc.data.RelationalTranslationOper",V.data.MatrixTranslationOper).add({M:0,C:0,S:0,_translType:"Relational",_processMetadata:function(){this.base();var Z=this.metadata,Y=this.J,X=this.options.categoriesCount;if(X!=null&&(!isFinite(X)||X<0)){X=0}var O,M,L;if(this.options.isMultiValued){L=(M=V.parseDistinctIndexArray(this.options.measuresIndexes,0,Y-1))?M.length:0}var I;if(L==null){if(Y>0&&Y<=3&&(X==null||X===1)&&O==null){L=1;M=[Y-1];X=Y>=2?1:0;O=Y>=3?1:0;I=X+O}else{if(X!=null&&X>=Y){X=I=Y;L=O=0}else{L=X!=null?Y-X:Infinity;M=ad.query(Z).where(function(bb,ab){return this._columnTypes[ab]!==0},this).select(function(ab){return ab.colIndex}).take(L).array();L=M.length}}}if(I==null){I=Y-L;if(I===0){O=X=0}else{if(X!=null){if(X>I){X=I;O=0}else{O=I-X}}else{O=I>1?1:0;X=I-O}}}Z=this.options.seriesInRows;var F=[];if(I){O&&!Z&&F.push({name:"S",count:O});X&&F.push({name:"C",count:X});O&&Z&&F.push({name:"S",count:O})}L&&F.push({name:"M",count:L});var u=ad.range(0,Y).array();M&&M.forEach(function(ab){u.splice(ab,1)});var f={};F.forEach(function(bg){var bb=bg.count,ab=bg.name;f[ab]=bg;bg.indexes=M&&ab==="M"?M:u.splice(0,bb)});this.M=L;this.S=O;this.C=X;var i=[];["S","C","M"].forEach(function(ab){(ab=f[ab])&&ad.array.append(i,ab.indexes)});this._itemInfos=i.map(this._buildItemInfoFromMetadata,this);this._itemCrossGroupIndex={S:0,C:this.S,M:this.S+this.C};this._itemPerm=i},logVItem:function(){return this._logVItem(["S","C","M"],{S:this.S,C:this.C,M:this.M})},_configureTypeCore:function(){function i(Z,Y,O,X){for(Y=f._itemCrossGroupIndex[Y]+X;X>0;){var ab=V.buildIndexedId(Z,O);if(!f.complexTypeProj.isReadOrCalc(ab)){M=f._nextAvailableItemIndex(M);if(M>=Y){return}L.push({names:ab,indexes:M});M++;X--}O++}}var f=this,M=0,L=[];this.S>0&&i("series","S",0,this.S);this.C>0&&i("category","C",0,this.C);this.M>0&&i("value","M",0,this.M);L&&L.forEach(this.defReader,this);var I=this.options.dataPartDimName;if(I&&!this.complexTypeProj.isReadOrCalc(I)){var F=this.options.plot2DataSeriesIndexes;if(F!=null){var u=this._userDimsReadersByDim.series;u&&this._userRead(aM.call(this,F,u),I)}}},_executeCore:function(){var i=this._getDimensionsReaders(),f=this._itemPerm;return ad.query(this._getItems()).select(function(u){u=R.permute(u,f);return this._readItem(u,i)},this)}});ad.type("pvc.data.Atom").init(function(i,f,I,F,u){this.dimension=i;this.id=f==null?-ad.nextId():ad.nextId();this.value=f;this.label=I;if(F!==undefined){this.rawValue=F}this.key=u}).add({isVirtual:false,rawValue:undefined,toString:function(){var f=this.label;if(f!=null){return f}f=this.value;return f!=null?""+f:""}});var af=1;ad.type("pvc.data.Complex").init(function(bg,bb,ab,Z,Y,X){this.id=af++;var O;if(bg){O=bg.owner;if(!Z){Z=bg.atoms}}this.owner=O||this;this.atoms=Z?ObjectFactory.create(Z):{};var M=!!ab;if(!ab){ab=O.type._dimsNames}var L=this.atoms;bg=ab.length;var F;if(bb){var I=O._dimensions,u=function(bj,bh){var bi=ad.getOwn(I,bj);if(bh!=null){bh=bi.intern(bh);if(!Z||bh!==Z[bj]){L[bj]=bh}}else{bi.intern(null)}};if(M){for(M=0;M<bg;M++){F=ab[M];u(F,bb[F])}}else{for(F in bb){u(F,bb[F])}}if(X){M=O.type._calculate(this);for(F in M){ad.hasOwnProp.call(L,F)||u(F,M[F])}}}if(bg){if(bg===1){ab=L[ab[0]];this.value=ab.value;this.rawValue=ab.rawValue;this.key=ab.key;if(Y){this.label=ab.label}}else{var i,f;bb=O.labelSep;O=O.keySep;for(M=0;M<bg;M++){F=ab[M];F=L[F];if(M){i+=O+F.key}else{i=F.key}if(Y){if(F=F.label){if(f){f+=bb+F}else{f=F}}}}this.value=this.rawValue=this.key=i;if(Y){this.label=f}}}else{this.value=null;this.key="";if(Y){this.label=""}}}).add({labelSep:" ~ ",keySep:"~",label:null,rawValue:undefined,ensureLabel:function(){var i=this.label;if(i==null){i="";var f=this.owner.labelSep;ad.eachOwn(this.atoms,function(u){if(u=u.label){if(i){i+=f+u}else{i=u}}});this.label=i}return i},view:function(f){return new V.data.ComplexView(this,f)},toString:function(){var f=[""+this.constructor.typeName];this.index!=null&&f.push("#"+this.index);this.owner.type.dimensionsNames().forEach(function(i){f.push(i+": "+V.stringify(this.atoms[i].value))},this);return f.join(" ")}});V.data.Complex.values=function(i,f){var u=i.atoms;return f.map(function(F){return u[F].value})};V.data.Complex.compositeKey=function(i,f){var u=i.atoms;return f.map(function(F){return u[F].key}).join(i.owner.keySep)};V.data.Complex.labels=function(i,f){var u=i.atoms;return f.map(function(F){return u[F].label})};var E=ad.propGet("id");ad.type("pvc.data.ComplexView",V.data.Complex).init(function(i,f){this.source=i;this.viewDimNames=f;this.base(i,i.atoms,f,i.owner.atoms,true)}).add({values:function(){return V.data.Complex.values(this,this.viewDimNames)},labels:function(){return V.data.Complex.labels(this,this.viewDimNames)}});ad.type("pvc.data.Datum",V.data.Complex).init(function(i,f){this.base(i,f,null,null,false,true)}).add({isSelected:false,isVisible:true,isNull:false,isVirtual:false,isTrend:false,trendType:null,isInterpolated:false,interpolation:null,setSelected:function(i){if(this.isNull){return false}i=i==null||!!i;var f=this.isSelected!==i;if(f){if(i){this.isSelected=true}else{delete this.isSelected}aV.call(this.owner,this,i)}return f},toggleSelected:function(){return this.setSelected(!this.isSelected)},setVisible:function(i){if(this.isNull){return false}i=i==null||!!i;var f=this.isVisible!==i;if(f){this.isVisible=i;aT.call(this.owner,this,i)}return f},toggleVisible:function(){return this.setVisible(!this.isVisible)}});var aH=ad.propGet("isSelected");ad.type("pvc.data.Dimension").init(function(i,f){this.data=i;this.type=f;this.root=this;this.owner=this;var F=f.name;this.name=F;this._atomComparer=f.atomComparer();this._atomsByKey={};if(i.isOwner()){this._atoms=[];g.call(this)}else{f=i.parent;var u;if(f){u=f._dimensions[F];av.call(u,this);this.root=i.parent.root}else{(f=i.linkParent)||ad.assert("Data must have a linkParent");u=f._dimensions[F];z.call(u,this)}this._nullAtom=this.owner._nullAtom;this._lazyInit=function(){this._lazyInit=null;for(var X=this.data._datums,O=X.length,M=this._atomsByKey,L=0;L<O;L++){var I=X[L].atoms[F];M[I.key]=I}this._atoms=u.atoms().filter(function(Y){return ad.hasOwnProp.call(M,Y.key)})}}}).add({parent:null,linkParent:null,_linkChildren:null,_atomsByKey:null,_atomVisibleDatumsCount:null,_disposed:false,_nullAtom:null,_virtualNullAtom:null,_visibleAtoms:null,_visibleIndexes:null,_atomComparer:null,_atoms:null,_sumCache:null,count:function(){this._lazyInit&&this._lazyInit();return this._atoms.length},isVisible:function(f){this._lazyInit&&this._lazyInit();ad.hasOwn(this._atomsByKey,f.key)||ad.assert("Atom must exist in this dimension.");return aR.call(this)[f.key]>0},atoms:function(f){this._lazyInit&&this._lazyInit();f=ad.get(f,"visible");if(f==null){return this._atoms}f=!!f;this._visibleAtoms||(this._visibleAtoms={});return this._visibleAtoms[f]||(this._visibleAtoms[f]=ae.call(this,f))},indexes:function(f){this._lazyInit&&this._lazyInit();f=ad.get(f,"visible");if(f==null){return R.range(0,this._atoms.length)}f=!!f;this._visibleIndexes||(this._visibleIndexes={});return this._visibleIndexes[f]||(this._visibleIndexes[f]=aA.call(this,f))},atom:function(f){if(f==null||f===""){return this._nullAtom}if(f instanceof V.data.Atom){return f}this._lazyInit&&this._lazyInit();return this._atomsByKey[this.type._key?this.type._key.call(null,f):f]||null},extent:function(i){var f=this.atoms(i),I=f.length;if(I){var F=this._nullAtom&&f[0].value==null?1:0,u=I-F;if(u>0){F=f[F];I=f[I-1];if(F!==I&&ad.get(i,"abs",false)){i=I.value<0?-1:1;if((F.value<0?-1:1)===i){if(i<0){f=I;I=F;F=f}}else{if(u>2){if(I.value<-F.value){I=F}F=ad.array.binarySearch(f,0,this.type.comparer(),function(L){return L.value});if(F<0){F=~F;u=f[F-1];f=f[F];F=-u.value<f.value?u:f}else{F=f[F]}}else{if(I.value<-F.value){f=I;I=F;F=f}}}}return{min:F,max:I}}}},min:function(i){i=this.atoms(i);var f=i.length;if(f){var u=this._nullAtom&&i[0].value==null?1:0;return f>u?i[u]:undefined}},max:function(i){i=this.atoms(i);var f=i.length;return f&&i[f-1].value!=null?i[f-1]:undefined},sum:function(i){var f=!!ad.get(i,"abs",false),L=ad.get(i,"zeroIfNone",true),I=ac(i)+":"+f,F=ad.getOwn(this._sumCache,I);if(F===undefined){var u=this.name;F=this.data.datums(null,i).reduce(function(O,M){M=M.atoms[u].value;if(f&&M<0){M=-M}return O!=null?O+M:M},null);(this._sumCache||(this._sumCache={}))[I]=F}return L?F||0:F},percent:function(i,f){i=i instanceof V.data.Atom?i.value:i;if(!i){return 0}return(f=this.sum(ad.create(f,{abs:true})))?Math.abs(i)/f:0},percentOverParent:function(i){var f=this.sum(i);if(!f){return 0}var u=this.data.parent;if(!u){return 1}return(i=u.dimensionsSumAbs(this.name,i))?Math.abs(f)/i:0},format:function(i,f){return""+(this.type._formatter?this.type._formatter.call(null,i,f):"")},intern:function(i,f){if(i==null||i===""){return this._nullAtom||aP.call(this,i)}if(i instanceof V.data.Atom){if(i.dimension!==this){throw ad.error.operationInvalid("Atom is of a different dimension.")}return i}var M,L,I=this.type;if(typeof i==="object"&&"v" in i){L=i.f;i=i.v;if(i==null||i===""){return this._nullAtom||aP.call(this)}}if(f){M=i}else{if(M=I._converter){M=M(i);if(M==null||M===""){return this._nullAtom||aP.call(this,i)}}else{M=i}}var F=I.cast;if(F){M=F(M);if(M==null||M===""){return this._nullAtom||aP.call(this)}}F=I._key;(F=""+(F?F(M):M))||ad.fail.operationInvalid("Only a null value can have an empty key.");var u=this._atomsByKey[F];if(u){!f&&u.isVirtual&&delete u.isVirtual;return u}return aQ.call(this,I,i,F,M,L,f)},read:function(i,f){if(i==null||i===""){return null}var L,I=this.type;if(typeof i==="object"&&"v" in i){f=i.f;i=i.v;if(i==null||i===""){return null}}L=(L=I._converter)?L(i):i;if(L==null||L===""){return null}var F=I.cast;if(F){L=F(L);if(L==null||L===""){return null}}F=I._key;F=""+(F?F(L):L);var u=this._atomsByKey[F];if(u){return{rawValue:i,key:F,value:u.value,label:""+(f==null?u.label:f)}}if(f==null){f=(f=I._formatter)?f(L,i):L}f=""+f;return{rawValue:i,key:F,value:L,label:f}},dispose:function(){if(!this._disposed){aa(this.childNodes,"parent");aa(this._linkChildren,"linkParent");this.parent&&U.call(this.parent,this);this.linkParent&&j.call(this.linkParent,this);a5.call(this);this._atoms=this._nullAtom=this._virtualNullAtom=this._lazyInit=null;this._disposed=true}}});ad.type("pvc.data.Data",V.data.Complex).init(function(X){X||ad.fail.argumentRequired("keyArgs");this._visibleNotNullDatums=new ad.Map;var O,M,L,I,F,u,i=this.parent=X.parent||null;if(i){this.root=i.root;this.depth=i.depth+1;this.type=i.type;F=X.datums||ad.fail.argumentRequired("datums");O=i.owner;M=X.atoms||ad.fail.argumentRequired("atoms");I=X.dimNames||ad.fail.argumentRequired("dimNames");L=i.atoms}else{this.root=this;I=[];var f=X.linkParent||null;if(f){O=f.owner;this.type=O.type;F=X.datums||ad.fail.argumentRequired("datums");this._leafs=[];L=f.atoms;u=ad.get(X,"index",null);n.call(f,this,u)}else{O=this;L={};if(X.labelSep){this.labelSep=X.labelSep}if(X.keySep){this.keySep=X.keySep}this.type=X.type||ad.fail.argumentRequired("type");this._selectedNotNullDatums=new ad.Map}}F&&aC.call(this,F);this.owner=O;this._atomsBase=L;this._dimensions={};this.type.dimensionsList().forEach(this._initDimension,this);this.base(O,M,I,L,true);R.Dom.Node.call(this);if(i){u=ad.get(X,"index",null);D.call(i,this,u);this.absLabel=i.absLabel?ad.string.join(O.labelSep,i.absLabel,this.label):this.label;this.absKey=i.absKey?ad.string.join(O.keySep,i.absKey,this.key):this.key}else{this.absLabel=this.label;this.absKey=this.key}}).add(R.Dom.Node).add({parent:null,linkParent:null,_dimensions:null,_freeDimensionNames:null,_linkChildren:null,_leafs:null,_childrenByKey:null,_visibleNotNullDatums:null,_selectedNotNullDatums:null,_groupByCache:null,_sumAbsCache:null,treeHeight:null,_groupOper:null,_groupSpec:null,_groupLevel:null,_datums:null,_datumsById:null,depth:0,label:"",absLabel:"",_disposed:false,_isFlattenGroup:false,_isDegenerateFlattenGroup:false,_initDimension:function(f){this._dimensions[f.name]=new V.data.Dimension(this,f)},dimensions:function(i,f){if(i==null){return this._dimensions}var u=ad.getOwn(this._dimensions,i);if(!u&&ad.get(f,"assertExists",true)){throw ad.error.argumentInvalid("name","Undefined dimension '{0}'.",[i])}return u},freeDimensionNames:function(){if(!this._freeDimensionNames){var f=this._freeDimensionNames=[];ad.eachOwn(this._dimensions,function(i,u){i=this.atoms[u];if(!(i instanceof V.data.Atom)||i.value==null){f.push(u)}},this)}return this._freeDimensionNames},isOwner:function(){return this.owner===this},children:function(){var f=this.childNodes;return f.length?ad.query(f):ad.query()},child:function(f){return ad.getOwn(this._childrenByKey,f,null)},childCount:function(){return this.childNodes.length},leafs:function(){return ad.query(this._leafs)},count:function(){return this._datums.length},firstDatum:function(){return this._datums.length?this._datums[0]:null},singleDatum:function(){var f=this._datums;return f.length===1?f[0]:null},dispose:function(){if(!this._disposed){a9.call(this);this._selectedNotNullDatums&&this._selectedNotNullDatums.clear();this._visibleNotNullDatums.clear();ad.eachOwn(this._dimensions,function(f){f.dispose()});if(this.parent){this.parent.removeChild(this);this.parent=null}this.linkParent&&bc.call(this.linkParent,this);this._disposed=true}},disposeChildren:function(){a9.call(this)}});V.data.Data.add({selectedCount:function(){if(!this.isOwner()){return this.datums(null,{selected:true}).count()}return this._selectedNotNullDatums.count},selectedDatums:function(){if(!this.isOwner()){return this.datums(null,{selected:true}).array()}return this._selectedNotNullDatums.values()},selectedDatumMap:function(){if(!this.isOwner()){var f=this.datums(null,{selected:true}).object({name:ad.propGet("id")});return new ad.Set(f)}return this._selectedNotNullDatums.clone()},visibleCount:function(){return this._visibleNotNullDatums.count},replaceSelected:function(i){ad.array.is(i)||(i=i.array());var f=ad.query(i).where(aH).object({name:E}),u=this.owner.clearSelected(function(F){return !ad.hasOwn(f,F.id)});u|=V.data.Data.setSelected(i,true);return u},clearSelected:function(i){if(this.owner!==this){return this.owner.clearSelected(i)}if(!this._selectedNotNullDatums.count){return false}var f;if(i){f=false;this._selectedNotNullDatums.values().filter(i).forEach(function(u){f=true;a6.call(u);this._selectedNotNullDatums.rem(u.id)},this)}else{f=true;this._selectedNotNullDatums.values().forEach(function(u){a6.call(u)});this._selectedNotNullDatums.clear()}return f}});V.data.Data.setSelected=function(i,f){var u=0;i&&ad.query(i).each(function(F){u|=F.setSelected(f)});return !!u};V.data.Data.toggleSelected=function(i,f){ad.array.isLike(i)||(i=ad.query(i).array());var u=ad.query(i);f=f?u.any(aH):u.all(x);return this.setSelected(i,!f)};V.data.Data.setVisible=function(i,f){var u=0;i&&ad.query(i).each(function(F){u|=F.setVisible(f)});return !!u};V.data.Data.toggleVisible=function(i){ad.array.isLike(i)||(i=ad.query(i).array());var f=ad.query(i).all(ad.propGet("isVisible"));return V.data.Data.setVisible(i,!f)};ad.space("pvc.data").FlatteningMode=ad.set(ad.makeEnum(["DfsPre","DfsPost"]),"None",0);ad.type("pvc.data.GroupingSpec").init(function(i,f,I){this.type=f||null;var F=[];this.hasCompositeLevels=false;var u=[];this.levels=ad.query(i||undefined).where(function(L){return L.dimensions.length>0}).select(function(L){F.push(L.id);ad.array.append(u,L.dimensionNames());if(!this.hasCompositeLevels&&L.dimensions.length>1){this.hasCompositeLevels=true}L._setAccDimNames(u.slice(0));return L},this).array();this._dimNames=u;this.depth=this.levels.length;this.isSingleDimension=(this.isSingleLevel=this.depth===1)&&!this.hasCompositeLevels;this.firstDimension=this.depth>0?this.levels[0].dimensions[0]:null;this.rootLabel=ad.get(I,"rootLabel")||"";this.flatteningMode=ad.get(I,"flatteningMode")||V.data.FlatteningMode.None;this._cacheKey=this._calcCacheKey();this.id=this._cacheKey+"##"+F.join("||")}).add({_calcCacheKey:function(f){return[ad.get(f,"flatteningMode")||this.flatteningMode,ad.get(f,"reverse")||"false",ad.get(f,"isSingleLevel")||this.isSingleLevel,ad.get(f,"rootLabel")||this.rootLabel].join("#")},bind:function(f){this.type=f||ad.fail.argumentRequired("type");this.levels.forEach(function(i){i.bind(f)})},dimensions:function(){return ad.query(this.levels).prop("dimensions").selectMany()},dimensionNames:function(){return this._dimNames},view:function(f){return f.view(this.dimensionNames())},isDiscrete:function(){var f;return !this.isSingleDimension||!!(f=this.firstDimension)&&f.type.isDiscrete},firstDimensionType:function(){var f=this.firstDimension;return f&&f.type},firstDimensionName:function(){var f=this.firstDimensionType();return f&&f.name},firstDimensionValueType:function(){var f=this.firstDimensionType();return f&&f.valueType},isNull:function(){return !this.levels.length},ensure:function(i){var f;if(i){var F=this._calcCacheKey(i);if(F!==this._cacheKey){var u=ad.lazy(this,"_groupingCache");(f=ad.getOwn(u,F))||(f=u[F]=this._ensure(i))}}return f||this},_ensure:function(i){var f=this;if(ad.get(i,"isSingleLevel")&&!f.isSingleLevel){return f._singleLevelGrouping(i)}if(ad.get(i,"reverse")){return f._reverse(i)}var u=ad.get(i,"flatteningMode")||f.flatteningMode;i=ad.get(i,"rootLabel")||f.rootLabel;if(u!==f.flatteningMode||i!==f.rootLabel){return new V.data.GroupingSpec(f.levels,f.type,{flatteningMode:u,rootLabel:i})}return f},_singleLevelGrouping:function(i){var f=!!ad.get(i,"reverse"),u=this.dimensions().select(function(F){return f?new V.data.GroupingDimensionSpec(F.name,!F.reverse,F.type.complexType):F});u=new V.data.GroupingLevelSpec(u,this.type);return new V.data.GroupingSpec([u],this.type,{flatteningMode:null,rootLabel:ad.get(i,"rootLabel")||this.rootLabel})},_reverse:function(i){var f=ad.query(this.levels).select(function(u){u=ad.query(u.dimensions).select(function(F){return new V.data.GroupingDimensionSpec(F.name,!F.reverse,F.type.complexType)});return new V.data.GroupingLevelSpec(u,this.type)});return new V.data.GroupingSpec(f,this.type,{flatteningMode:ad.get(i,"flatteningMode")||this.flatteningMode,rootLabel:ad.get(i,"rootLabel")||this.rootLabel})},toString:function(){return ad.query(this.levels).select(function(f){return""+f}).array().join(", ")}});ad.type("pvc.data.GroupingLevelSpec").init(function(i,f){var I=[],F=[];this.dimensions=ad.query(i).select(function(L){I.push(L.id);F.push(L.name);return L}).array();this._dimNames=F;this.dimensionsInDefOrder=this.dimensions.slice(0);f&&this._sortDimensions(f);this.id=I.join(",");this.depth=this.dimensions.length;var u=this;this.comparer=function(M,L){return u.compare(M,L)}}).add({_sortDimensions:function(f){f.sortDimensionNames(this.dimensionsInDefOrder,function(i){return i.name})},_setAccDimNames:function(f){this._accDimNames=f},accDimensionNames:function(){return this._accDimNames},dimensionNames:function(){return this._dimNames},bind:function(f){this._sortDimensions(f);this.dimensions.forEach(function(i){i.bind(f)})},compare:function(i,f){for(var I=0,F=this.depth;I<F;I++){var u=this.dimensions[I].compareDatums(i,f);if(u!==0){return u}}return 0},key:function(X){var O="",M={},L=X.atoms,I=this._dimNames;X=X.owner.keySep;for(var F=0,u=this.depth;F<u;F++){var i=I[F],f=L[i];M[i]=f;if(F){O+=X+f.key}else{O=f.key}}return{key:O,atoms:M,dimNames:I}},toString:function(){return ad.query(this.dimensions).select(function(f){return""+f}).array().join("|")}});ad.type("pvc.data.GroupingDimensionSpec").init(function(i,f,u){this.name=i;this.reverse=!!f;this.id=this.name+":"+(this.reverse?"0":"1");u&&this.bind(u)}).add({type:null,comparer:null,bind:function(f){f||ad.fail.argumentRequired("type");this.type=f.dimensions(this.name);this.comparer=this.type.atomComparer(this.reverse)},compareDatums:function(i,f){return this.comparer(i.atoms[this.name],f.atoms[this.name])},toString:function(){return this.name+(this.reverse?" desc":"")}});V.data.GroupingSpec.parse=function(i,f){if(!i){return new V.data.GroupingSpec(null,f)}var u;if(ad.array.is(i)){u=i}else{if(ad.string.is(i)){u=i.split(/\s*,\s*/)}}i=ad.query(u).select(function(F){F=aF(F,f);return new V.data.GroupingLevelSpec(F,f)});return new V.data.GroupingSpec(i,f)};var ai=/^\s*(.+?)(?:\s+(asc|desc))?\s*$/i;ad.type("pvc.data.DataOper").init(function(f){f||ad.fail.argumentRequired("linkParent");this._linkParent=f}).add({key:null,execute:ad.method({isAbstract:true})});ad.type("pvc.data.GroupingOper",V.data.DataOper).init(function(i,f,L){f||ad.fail.argumentRequired("groupingSpecs");this.base(i,L);this._where=ad.get(L,"where");this._visible=ad.get(L,"visible",null);this._selected=ad.get(L,"selected",null);this._isNull=ad.get(L,"isNull",null);var I=this._selected==null,F="";if(this._where){F=ad.get(L,"whereKey");if(!F){if(!L||F===null){I=false}else{F=""+ad.nextId("dataOperWhereKey");L.whereKey=F}}}var u=[];this._groupSpecs=ad.array.as(f).map(function(M){if(M instanceof V.data.GroupingSpec){if(M.type!==i.type){throw ad.error.argumentInvalid("groupingSpecText","Invalid associated complex type.")}}else{M=V.data.GroupingSpec.parse(M,i.type)}u.push(M.id);return M});if(I){this.key=u.join("!!")+"||visible:"+this._visible+"||isNull:"+this._isNull+"||where:"+F}}).add({execute:function(){return this._generateData(this._group(p(ad.query(this._linkParent._datums),{visible:this._visible,selected:this._selected,isNull:this._isNull,where:this._where})),null,this._linkParent)},executeAdd:function(i,f){f=this._group(p(ad.query(f),{visible:this._visible,selected:this._selected,isNull:this._isNull,where:this._where}));this._generateData(f,null,this._linkParent,i);return f.datums},_group:function(i){var f={isRoot:true,treeHeight:ad.query(this._groupSpecs).select(function(F){var u=F.levels.length;if(!u){return 0}return F.flatteningMode?1:u}).reduce(ad.add,0),datums:[]};f.treeHeight>0&&this._groupSpecRecursive(f,i,0);return f},_groupSpecRecursive:function(Z,Y,X){function O(bj,bi,bg){var bh=L[bg];if(!F){bj.children=[];bj.groupSpec=M;bj.groupLevelSpec=bh}bi=this._groupDatums(bh,bj,bi,F);var ab=bg===I-1;var bb=(bh=F&&!f)?[]:bj.datums;bi.forEach(function(bm){var bl=bm.datums;if(!(f&&ab)){bm.datums=[]}var bk;if(F){ad.array.lazy(bj,"_children").push(bm);if(ad.hasOwn(Z.childrenByKey,bm.key)){ad.array.append(bb,bl);return}bk=Z.children.length;if(!i){Z.children.push(bm);Z.childrenByKey[bm.key]=bm;bj.isFlattenGroup=true}}else{bj.children.push(bm)}if(ab){f||this._groupSpecRecursive(bm,bl,u)}else{O.call(this,bm,bl,bg+1)}ad.array.append(bb,bm.datums);if(F&&i){if(ad.hasOwn(Z.childrenByKey,bm.key)){bm.isFlattenGroup||ad.assert("Must be a parent for duplicate keys to exist.");if(bm._children.length===1){Z.children.splice(bk,Z.children.length-bk);bm.isDegenerateFlattenGroup=true}}Z.children.push(bm);Z.childrenByKey[bm.key]=bm;bj.isFlattenGroup=true}},this);bh&&this._groupSpecRecursive(bj,bb,u)}var M=this._groupSpecs[X],L=M.levels,I=L.length,F=!!M.flatteningMode,u=X+1,f=u>=this._groupSpecs.length,i=F&&M.flatteningMode===V.data.FlatteningMode.DfsPost;if(F){Z.children=[];Z.childrenByKey={};X={key:"",absKey:"",atoms:{},datums:[],label:M.rootLabel,dimNames:[]};if(!i){Z.children.push(X);Z.childrenByKey[""]=X}}else{if(Z.isRoot){Z.label=M.rootLabel}X=Z}O.call(this,X,Y,0);if(F){i&&Z.children.push(X);Z.datums=X.datums}},_groupDatums:function(i,f,L,I){var F=[],u=new ad.OrderedMap;ad.query(L).each(function(Z){var Y=i.key(Z),X=Y.key,M=u.get(X);if(M){M.datums.push(Z)}else{M=Y;M.datums=[Z];if(I){ad.copy(M.atoms,f.atoms);if(f.dimNames.length){Y=Z.owner.keySep;for(var O=Y.length,ab=M.absKey=f.absKey+Y+X;ab.lastIndexOf(Y)===ab.length-O;){ab=ab.substr(0,ab.length-O)}M.key=ab}else{M.absKey=X}M.dimNames=i.accDimensionNames()}Z=ad.array.insert(F,Z,i.comparer);u.add(X,M,~Z)}});return u},_generateData:function(i,f,O,M){var L,I;if(i.isRoot){if(M){L=M;m.call(L,i.datums)}else{I=true;L=new V.data.Data({linkParent:O,datums:i.datums});L.treeHeight=i.treeHeight;L._groupOper=this}}else{if(M){(L=O.child(i.key))&&G.call(L,i.datums)}if(!L){I=true;var F,u;if(M&&(u=O.childNodes)){F=~ad.array.binarySearch(u,i.datums[0],f.groupLevelSpec.comparer)}L=new V.data.Data({parent:O,atoms:i.atoms,dimNames:i.dimNames,datums:i.datums,index:F})}}if(I){if(i.isFlattenGroup){L._isFlattenGroup=true;L._isDegenerateFlattenGroup=!!i.isDegenerateFlattenGroup}if(f=i.label){L.label+=f;L.absLabel+=f}}if((f=i.children)&&f.length){if(I){L._groupSpec=i.groupSpec;L._groupLevelSpec=i.groupLevelSpec}f.forEach(function(X){this._generateData(X,i,L,M)},this)}else{if(I&&!i.isRoot){I=L.root._leafs;L.leafIndex=I.length;I.push(L)}}return L}});ad.type("pvc.data.LinearInterpolationOper").init(function(X,O,M,L,I,F){this._newDatums=[];this._data=O;X=M.flatten(X,{ignoreNulls:false}).childNodes;var u=this._serDatas1=L.isBound()?L.flatten(O).children().array():[null];this._isCatDiscrete=M.grouping.isDiscrete();this._firstCatDim=!this._isCatDiscrete?O.owner.dimensions(M.firstDimensionName()):null;this._stretchEnds=F;var i=this._valDim=O.owner.dimensions(I.firstDimensionName()),f={visible:true,zeroIfNone:false};this._catInfos=X.map(function(Y,Z){var bb=O.child(Y.key),ab={data:bb||Y,value:Y.value,isInterpolated:false,serInfos:null,index:Z};ab.serInfos=u.map(function(bh){var bi=bb;if(bi&&bh){bi=bi.child(bh.key)}var bg=bi?bi.dimensions(i.name).sum(f):null;return{data:bh,group:bi,value:bg,isNull:bg==null,catInfo:ab}},this);return ab});this._serCount=u.length;this._serStates=ad.range(0,this._serCount).select(function(Y){return new V.data.LinearInterpolationOperSeriesState(this,Y)},this).array()}).add({interpolate:function(){for(var f;f=this._catInfos.shift();){f.serInfos.forEach(this._visitSeries,this)}f=this._newDatums;f.length&&this._data.owner.add(f)},_visitSeries:function(i,f){this._serStates[f].visit(i)},nextUnprocessedNonNullCategOfSeries:function(i){for(var f=0,F=this._catInfos.length;f<F;){var u=this._catInfos[f++].serInfos[i];if(!u.isNull){return u}}}});ad.type("pvc.data.LinearInterpolationOperSeriesState").init(function(i,f){this.interpolation=i;this.index=f;this._lastNonNull(null)}).add({visit:function(f){f.isNull?this._interpolate(f):this._lastNonNull(f)},_lastNonNull:function(f){if(arguments.length){this.__lastNonNull=f;this.__nextNonNull=undefined}return this.__lastNonNull},_nextNonNull:function(){return this.__nextNonNull},_initInterpData:function(){if(this.__nextNonNull===undefined){var i=this.__lastNonNull,f=this.__nextNonNull=this.interpolation.nextUnprocessedNonNullCategOfSeries(this.index)||null;if(f&&i){var u=f.value-i.value;if(this.interpolation._isCatDiscrete){f=f.catInfo.index-i.catInfo.index;f>=2||ad.assert("Must have at least one interpolation point.");this._stepValue=u/f;this._middleIndex=~~(f/2);this._isOdd=(f-1)%2>0}else{i=+i.catInfo.value;f=+f.catInfo.value;this._steep=u/(f-i);this._middleCat=(f+i)/2}}}},_interpolate:function(i){this._initInterpData();var f=this.__nextNonNull,L=this.__lastNonNull,I=f||L;if(I){var F=this.interpolation,u=i.catInfo;if(f&&L){if(F._isCatDiscrete){I=u.index-L.catInfo.index;i=L.value+this._stepValue*I;f=this._isOdd?I<this._middleIndex?L.group:f.group:I<=this._middleIndex?L.group:f.group}else{I=+u.value;i=L.value+this._steep*(I-+L.catInfo.value);f=I<this._middleCat?L.group:f.group}}else{if(!F._stretchEnds){return}i=I.value;f=I.group}L=ObjectFactory.create(f._datums[0].atoms);ad.copyOwn(L,u.data.atoms);i=F._valDim.intern(i,true);L[i.dimension.name]=i;i=new V.data.Datum(f.owner,L);i.isVirtual=true;i.isInterpolated=true;i.interpolation="linear";F._newDatums.push(i)}}});ad.type("pvc.data.ZeroInterpolationOper").init(function(X,O,M,L,I,F){this._newDatums=[];this._data=O;X=M.flatten(X,{ignoreNulls:false}).childNodes;var u=this._serDatas1=L.isBound()?L.flatten(O).children().array():[null];this._isCatDiscrete=M.grouping.isDiscrete();this._firstCatDim=!this._isCatDiscrete?O.owner.dimensions(M.firstDimensionName()):null;this._stretchEnds=F;var i=this._valDim=O.owner.dimensions(I.firstDimensionName()),f={visible:true,zeroIfNone:false};this._catInfos=X.map(function(Y,Z){var bb=O.child(Y.key),ab={data:bb||Y,value:Y.value,isInterpolated:false,serInfos:null,index:Z};ab.serInfos=u.map(function(bh){var bi=bb;if(bi&&bh){bi=bi.child(bh.key)}var bg=bi?bi.dimensions(i.name).sum(f):null;return{data:bh,group:bi,value:bg,isNull:bg==null,catInfo:ab}},this);return ab});this._serCount=u.length;this._serStates=ad.range(0,this._serCount).select(function(Y){return new V.data.ZeroInterpolationOperSeriesState(this,Y)},this).array()}).add({interpolate:function(){for(var f;f=this._catInfos.shift();){f.serInfos.forEach(this._visitSeries,this)}f=this._newDatums;f.length&&this._data.owner.add(f)},_visitSeries:function(i,f){this._serStates[f].visit(i)},nextUnprocessedNonNullCategOfSeries:function(i){for(var f=0,F=this._catInfos.length;f<F;){var u=this._catInfos[f++].serInfos[i];if(!u.isNull){return u}}}});ad.type("pvc.data.ZeroInterpolationOperSeriesState").init(function(i,f){this.interpolation=i;this.index=f;this._lastNonNull(null)}).add({visit:function(f){f.isNull?this._interpolate(f):this._lastNonNull(f)},_lastNonNull:function(f){if(arguments.length){this.__lastNonNull=f;this.__nextNonNull=undefined}return this.__lastNonNull},_nextNonNull:function(){return this.__nextNonNull},_initInterpData:function(){if(this.__nextNonNull===undefined){var i=this.__lastNonNull,f=this.__nextNonNull=this.interpolation.nextUnprocessedNonNullCategOfSeries(this.index)||null;if(f&&i){if(this.interpolation._isCatDiscrete){i=f.catInfo.index-i.catInfo.index;i>=2||ad.assert("Must have at least one interpolation point.");this._middleIndex=~~(i/2);this._isOdd=(i-1)%2>0}else{this._middleCat=(+f.catInfo.value+ +i.catInfo.value)/2}}}},_interpolate:function(i){this._initInterpData();var f=this.__nextNonNull,I=this.__lastNonNull,F=f||I;if(F){var u=this.interpolation;i=i.catInfo;if(f&&I){if(u._isCatDiscrete){F=i.index-I.catInfo.index;f=this._isOdd?F<this._middleIndex?I.group:f.group:F<=this._middleIndex?I.group:f.group}else{f=+i.value<this._middleCat?I.group:f.group}}else{if(!u._stretchEnds){return}f=F.group}I=ObjectFactory.create(f._datums[0].atoms);ad.copyOwn(I,i.data.atoms);i=u._zeroAtom||(u._zeroAtom=u._valDim.intern(0,true));I[i.dimension.name]=i;i=new V.data.Datum(f.owner,I);i.isVirtual=true;i.isInterpolated=true;i.interpolation="zero";u._newDatums.push(i)}}});V.data.Data.add({load:function(i,f){C.call(this);var F=ad.get(f,"where"),u=ad.get(f,"isNull");i=ad.query(i).select(function(I){I=new V.data.Datum(this,I);if(u&&u(I)){I.isNull=true}if(F&&!F(I)){return null}return I},this);aC.call(this,i,{doAtomGC:true})},clearVirtuals:function(){var i=this._datums;if(i){this._sumAbsCache=null;for(var f=this._visibleNotNullDatums,M=this._selectedNotNullDatums,L=0,I=i.length,F;L<I;){var u=i[L];if(u.isVirtual){F=u.id;M&&u.isSelected&&M.rem(F);u.isVisible&&f.rem(F);i.splice(L,1);I--;F=true}else{L++}}if(F){if(!i.length&&this.parent){this.dispose();return}if(i=this.childNodes){L=0;for(I=i.length;L<I;){f=i[L];f.clearVirtuals();if(f.parent){L++}else{I--}}}this._linkChildren&&this._linkChildren.forEach(function(O){O.clearVirtuals()})}}ad.eachOwn(this._dimensions,function(O){aN.call(O)})},add:function(f){C.call(this);aC.call(this,f,{isAdditive:true,doAtomGC:true})},groupBy:function(i,f){i=new V.data.GroupingOper(this,i,f);f=i.key;var F,u;if(f){u=(F=this._groupByCache)&&F[f]}if(u){V.debug>=7&&V.log("[GroupBy] Cache key hit '"+f+"'")}else{if(V.debug>=7){V.log("[GroupBy] "+(f?"Cache key not found: '"+f+"'":"No Cache key"))}u=i.execute();if(f){(F||(this._groupByCache={}))[f]=u}}return u},where:function(i,f){i=this.datums(i,f);return new V.data.Data({linkParent:this,datums:i})},datums:function(i,f){if(!i){if(!f){return ad.query(this._datums)}return p(ad.query(this._datums),f)}i=ba.call(this,i,f);return aU.call(this,i,f)},datum:function(i,f){i||ad.fail.argumentRequired("whereSpec");i=ba.call(this,i,f);return aU.call(this,i,f).first()||null},dimensionsSumAbs:function(i,f){var F=i+":"+ac(f),u=ad.getOwn(this._sumAbsCache,F);if(u==null){u=this.children().where(function(I){return !I._isFlattenGroup||I._isDegenerateFlattenGroup}).select(function(I){return Math.abs(I.dimensions(i).sum(f))},this).reduce(ad.add,0);(this._sumAbsCache||(this._sumAbsCache={}))[F]=u}return u}});V.data.Data.add({getInfo:function(){var f=["DATA SUMMARY",V.logSeparator,"  Dimension",V.logSeparator];ad.eachOwn(this.dimensions(),function(i,L){var I=i.count(),F=i.type,u=[];u.push('"'+F.label+'"');u.push(F.valueTypeName);F.isComparable&&u.push("comparable");F.isDiscrete||u.push("continuous");F.isHidden&&u.push("hidden");f.push("  "+L+" ("+u.join(", ")+") ("+I+")\n\t"+i.atoms().slice(0,10).map(function(M){return M.label}).join(", ")+(I>10?"...":""))});return f.join("\n")},getValues:function(){return R.range(0,this.getCategoriesSize()).map(function(f){return this._getValuesForCategoryIndex(f)},this)},_getDimensionValues:function(f){return this.dimensions(f).atoms().map(function(i){return i.value})},_getDimensionVisibleValues:function(f){return this.dimensions(f).atoms({visible:true}).map(function(i){return i.value})},getSeries:function(){return this._getDimensionValues("series")},getVisibleSeriesIndexes:function(){return this.dimensions("series").indexes({visible:true})},getVisibleCategoriesIndexes:function(){return this.dimensions("category").indexes({visible:true})},getVisibleSeries:function(){return this._getDimensionVisibleValues("series")},getCategories:function(){return this._getDimensionValues("category")},getVisibleCategories:function(){return this._getDimensionVisibleValues("category")},_getValuesForCategoryIndex:function(i){var f=this.datums({category:this.dimensions("category").atoms()[i]}).uniqueIndex(function(u){return u.atoms.series.key});return this.dimensions("series").atoms().map(function(u){return(u=ad.getOwn(f,u.key))?u.atoms.value.value:null})},getSeriesSize:function(){var f=this.dimensions("series",{assertExists:false});return f?f.count():0},getCategoriesSize:function(){var f=this.dimensions("category",{assertExists:false});return f?f.count():0}});ad.scope(function(){var f=ad.makeEnum(["Interactive","ShowsActivity","ShowsSelection","ShowsTooltip","Selectable","Unselectable","Hoverable","Clickable","DoubleClickable","SelectableByClick","SelectableByRubberband","SelectableByFocusWindow","Animatable"]);f.ShowsInteraction=f.ShowsActivity|f.ShowsSelection;f.Actionable=f.Hoverable|f.Clickable|f.DoubleClickable|f.SelectableByClick;f.HandlesEvents=f.Actionable|f.ShowsTooltip;f.HandlesClickEvent=f.Clickable|f.SelectableByClick;ad.type("pvc.visual.Interactive").addStatic(f).addStatic({ShowsAny:f.ShowsInteraction|f.ShowsTooltip,SelectableAny:f.Selectable|f.SelectableByClick|f.SelectableByRubberband|f.SelectableByFocusWindow}).add({_ibits:-1}).add(ad.query(ad.ownKeys(f)).object({name:ad.firstLowerCase,value:function(i){var u=f[i];return function(){return !!(this._ibits&u)}}}))});ad.type("pvc.visual.Scene").init(function(X,O){if(V.debug>=4){this.id=ad.nextId("scene")}this._renderId=0;this.renderState={};R.Dom.Node.call(this,null);this.parent=X||null;if(X){this.root=X.root;var M=ad.get(O,"index",null);X.insertAt(this,M)}else{this.root=this;this._active=null;this._panel=ad.get(O,"panel")||ad.fail.argumentRequired("panel","Argument is required on root scene.")}var L,I,F,u,i,f;if((O=ad.array.to(ad.get(O,"source")))&&O.length){this.source=O;L=O[0];if(L instanceof V.data.Data){I=L;i=O;F=I.firstDatum()||ad.query(i).select(function(Y){return Y.firstDatum()}).first(ad.notNully)}else{L instanceof V.data.Datum||ad.assert("not a datum");F=L;u=O}O=L.atoms;f=F&&F.atoms||L.atoms}else{O=X?(f=ObjectFactory.create(X.atoms)):(f={})}this.atoms=O;this.firstAtoms=f;i&&(this.groups=i);I&&(this.group=I);u&&(this._datums=u);F&&(this.datum=F);if(!L||L.isNull){this.isNull=true}this.vars=X?ObjectFactory.create(X.vars):{}}).add(R.Dom.Node).add(V.visual.Interactive).add({source:null,groups:null,group:null,_datums:null,datum:null,isNull:false,data:function(){var i=this.group;if(!i){for(var f=this;!i&&(f=f.parent);){i=f.group}if(!i){i=this.panel.data}}return i},datums:function(){return this.groups?ad.query(this.groups).selectMany(function(f){return f.datums()}):this._datums?ad.query(this._datums):ad.query()},format:function(f){return ad.format(f,this._formatScope,this)},_formatScope:function(i){if(i.charAt(0)==="#"){i=i.substr(1).split(".");if(i.length>2){throw ad.error.operationInvalid("Scene format mask is invalid.")}var f=this.firstAtoms[i[0]];if(f){if(i.length>1){switch(i[1]){case"value":return f.value;case"label":break;default:throw ad.error.operationInvalid("Scene format mask is invalid.")}}return f}return null}return ad.getPath(this.vars,i)},isRoot:function(){return this.root===this},panel:function(){return this.root._panel},chart:function(){return this.root._panel.chart},compatVersion:function(){return this.root._panel.compatVersion()},children:function(){var f=this.childNodes;return f.length?ad.query(f):ad.query()},leafs:function(){function i(u){for(;u.childNodes.length;){u=u.childNodes[0]}return u}var f=this;return ad.query(function(F){if(!F){F=i(f);if(F===f){return 0}this.item=F;return 1}if(F=this.item.nextSibling){this.item=F;return 1}for(var u=this.item;u!==f&&(u=u.parentNode);){if(F=u.nextSibling){this.item=i(F);return 1}}return 0})},anyInteraction:function(){return !!this.root._active||this.anySelected()},isActive:false,setActive:function(f){f=!!f;if(this.isActive!==f){aD.call(this.root,this.isActive?null:this)}},clearActive:function(){return aD.call(this.root,null)},anyActive:function(){return !!this.root._active},active:function(){return this.root._active},activeSeries:function(){var i=this.active(),f;return i&&(f=i.vars.series)&&f.value},isActiveSeries:function(){if(this.isActive){return true}var i=this.renderState.isActiveSeries;if(i==null){var f;i=(f=this.activeSeries())!=null&&f===this.vars.series.value;this.renderState.isActiveSeries=i}return i},isActiveDatum:function(){if(this.isActive){return true}var f=this.renderState.isActiveDatum;if(f==null){f=(f=this.active())?this.group&&f.group===this.group||this.datum&&f.datum===this.datum:false;this.renderState.isActiveDatum=f}return f},isActiveDescendantOrSelf:function(){if(this.isActive){return true}return ad.lazy(this.renderState,"isActiveDescOrSelf",this._calcIsActiveDescOrSelf,this)},_calcIsActiveDescOrSelf:function(){var f=this.active();if(f){for(;f=f.parent;){if(f===this){return true}}}return false},isVisible:function(){return this._visibleData().is},anyVisible:function(){return this._visibleData().any},_visibleData:function(){return ad.lazy(this.renderState,"_visibleData",this._createVisibleData,this)},_createVisibleData:function(){var i=this.chart().data.owner.visibleCount()>0,f=i&&this.datums().any(ad.propGet("isVisible"));return{any:i,is:f}},isSelected:function(){return this._selectedData().is},anySelected:function(){return this._selectedData().any},_selectedData:function(){return ad.lazy(this.renderState,"_selectedData",this._createSelectedData,this)},_createSelectedData:function(){var i=this.chart().data.owner.selectedCount()>0,f=i&&this.datums().any(aH);return{any:i,is:f}},select:function(i){var f=this,F=f.datums().array();if(F.length){var u=f.chart();u._updatingSelections(function(){if((F=u._onUserSelection(F))&&F.length){u.options.ctrlSelectMode&&ad.get(i,"replace",true)?u.data.replaceSelected(F):V.data.Data.toggleSelected(F)}})}},isSelectedDescendantOrSelf:function(){if(this.isSelected()){return true}return ad.lazy(this.renderState,"isSelectedDescOrSelf",this._calcIsSelectedDescOrSelf,this)},_calcIsSelectedDescOrSelf:function(){var f=this.firstChild;if(f){do{if(f.isSelectedDescendantOrSelf()){return true}}while(f=f.nextSibling)}return false},toggleVisible:function(){V.data.Data.toggleVisible(this.datums())&&this.chart().render(true,true,false)}});V.visual.Scene.prototype.variable=function(i,f){var I=this,F;if(i in I){if(f!==undefined){F=ad.set({},"_"+i+"EvalCore",ad.fun.to(f))}}else{if(!I.hasOwnProperty("_vars")){I._vars=ad.create(I._vars)}I._vars[i]=true;F={};var u="_"+i+"Eval";F[i]=a(i,u);i=u+"Core";ad.hasOwn(I,u)||(F[u]=ad.methodCaller(i));ad.hasOwn(I,i)||(F[i]=ad.fun.to(f===undefined?null:f))}F&&I.constructor.add(F);return I};var ax=V.visual.ValueLabelVar=function(i,f,F,u){this.value=i;this.label=f;if(F!==undefined){this.rawValue=F}if(u!==undefined){this.absLabel=u}};ad.set(ax.prototype,"rawValue",undefined,"absLabel",undefined,"setValue",function(f){this.value=f;return this},"setLabel",function(f){this.label=f;return this},"clone",function(){return new ax(this.value,this.label,this.rawValue)},"toString",function(){var f=this.label||this.value;return f==null?"":typeof f!=="string"?""+f:f});ax.fromComplex=function(f){return f?new ax(f.value,f.label,f.rawValue,f.absLabel):new ax(null,"",null)};ax.fromAtom=ax.fromComplex;ad.type("pvc.visual.Context").init(function(i,f,u){this.chart=i.chart;this.panel=i;H.call(this,f,u)}).add({isPinned:false,pin:function(){this.isPinned=true;return this},compatVersion:function(){return this.panel.compatVersion()},finished:function(f){return this.sign.finished(f)},delegate:function(f){return this.sign.delegate(f)},getV1Series:function(){var f;return ad.nullyTo(this.scene.firstAtoms&&(f=this.scene.firstAtoms[this.panel._getV1DimName("series")])&&f.rawValue,"Series")},getV1Category:function(){var f;return this.scene.firstAtoms&&(f=this.scene.firstAtoms[this.panel._getV1DimName("category")])&&f.rawValue},getV1Value:function(){var f;return this.scene.firstAtoms&&(f=this.scene.firstAtoms[this.panel._getV1DimName("value")])&&f.value},getV1Datum:function(){return this.panel._getV1Datum(this.scene)},select:function(f){return this.scene.select(f)},toggleVisible:function(){return this.scene.toggleVisible()},click:function(){var i=this;i.clickable()&&i.panel._onClick(i);if(i.selectableByClick()){var f=i.event;i.select({replace:!f||!f.ctrlKey})}},doubleClick:function(){this.doubleClickable()&&this.panel._onDoubleClick(this)},clickable:function(){var f=this;return(f.sign?f.sign.clickable():f.panel.clickable())&&(!f.scene||f.scene.clickable())},selectableByClick:function(){var f=this;return(f.sign?f.sign.selectableByClick():f.panel.selectableByClick())&&(!f.scene||f.scene.selectableByClick())},doubleClickable:function(){var f=this;return(f.sign?f.sign.doubleClickable():f.panel.doubleClickable())&&(!f.scene||f.scene.doubleClickable())},hoverable:function(){var f=this;return(f.sign?f.sign.hoverable():f.panel.hoverable())&&(!f.scene||f.scene.hoverable())}});if(Object.defineProperty){try{Object.defineProperty(V.visual.Context.prototype,"parent",{get:function(){throw ad.error.operationInvalid("The 'this.parent.index' idiom has no equivalent in this version. Please try 'this.pvMark.parent.index'.")}})}catch(b){}}ad.space("pvc.visual").TraversalMode=ad.makeEnum(["Tree","FlattenedSingleLevel","FlattenDfsPre","FlattenDfsPost"]);ad.type("pvc.visual.Role").init(function(i,f){this.name=i;this.label=ad.get(f,"label")||V.buildTitleFromName(i);this.index=ad.get(f,"index")||0;this.dimensionDefaults=ad.get(f,"dimensionDefaults")||{};if(ad.get(f,"isRequired",false)){this.isRequired=true}if(ad.get(f,"autoCreateDimension",false)){this.autoCreateDimension=true}if(i=ad.get(f,"defaultSourceRole")){this.defaultSourceRoleName=i}if(i=ad.get(f,"defaultDimension")){this.defaultDimensionName=i}if(!i&&this.autoCreateDimension){throw ad.error.argumentRequired("defaultDimension")}var F;i=ad.get(f,"requireIsDiscrete");if(i!=null){i||(F=true)}if(F!=null){if(F=ad.get(f,"requireSingleDimension",false)){if(ad.get(f,"isMeasure",false)){this.isMeasure=true;if(ad.get(f,"isPercent",false)){this.isPercent=true}}var u=ad.get(f,"valueType",null);if(u!==this.valueType){this.valueType=u;this.dimensionDefaults.valueType=u}}}if(F!==this.requireSingleDimension){this.requireSingleDimension=F}if(i!=this.requireIsDiscrete){this.requireIsDiscrete=!!i;this.dimensionDefaults.isDiscrete=this.requireIsDiscrete}f=ad.get(f,"traversalMode");if(f!=null&&f!==this.traversalMode){this.traversalMode=f}}).add({isRequired:false,requireSingleDimension:false,valueType:null,requireIsDiscrete:null,isMeasure:false,isPercent:false,defaultSourceRoleName:null,defaultDimensionName:null,grouping:null,traversalMode:V.visual.TraversalMode.FlattenedSingleLevel,rootLabel:"",autoCreateDimension:false,isReversed:false,label:null,sourceRole:null,isDefaultSourceRole:false,firstDimensionType:function(){var f=this.grouping;return f&&f.firstDimensionType()},firstDimensionName:function(){var f=this.grouping;return f&&f.firstDimensionName()},firstDimensionValueType:function(){var f=this.grouping;return f&&f.firstDimensionValueType()},isDiscrete:function(){var f=this.grouping;return f&&f.isDiscrete()},setSourceRole:function(i,f){this.sourceRole=i;this.isDefaultSourceRole=!!f},setIsReversed:function(f){if(f){this.isReversed=true}else{delete this.isReversed}},setTraversalMode:function(i){var f=V.visual.TraversalMode;i=ad.nullyTo(i,f.FlattenedSingleLevel);if(i!==this.traversalMode){if(i===f.FlattenedSingleLevel){delete this.traversalMode}else{this.traversalMode=i}}},setRootLabel:function(f){if(f!==this.rootLabel){if(f){this.rootLabel=f}else{delete this.rootLabel}this.grouping&&this._updateBind(this.grouping)}},flatten:function(i,f){var u=this.flattenedGrouping(f)||ad.fail.operationInvalid("Role is unbound.");return i.groupBy(u,f)},flattenedGrouping:function(i){var f=this.grouping;if(f){i||(i={});var u=i.flatteningMode;if(u==null){u=i.flatteningMode=this._flatteningMode()}if(i.isSingleLevel==null&&!u){i.isSingleLevel=true}if(i.flatteningMode==null){i.flatteningMode=this._flatteningMode()}return f.ensure(i)}},_flatteningMode:function(){var i=V.visual.TraversalMode,f=V.data.FlatteningMode;switch(this.traversalMode){case i.FlattenDfsPre:return f.DfsPre;case i.FlattenDfsPost:return f.DfsPost}return i.None},select:function(i,f){var u=this.grouping;if(u){ad.setUDefaults(f,"flatteningMode",V.data.FlatteningMode.None);return i.groupBy(u.ensure(f),f)}},view:function(i){var f=this.grouping;if(f){return f.view(i)}},preBind:function(f){this.__grouping=f;return this},isPreBound:function(){return !!this.__grouping},preBoundGrouping:function(){return this.__grouping},isBound:function(){return !!this.grouping},postBind:function(i){var f=this.__grouping;if(f){delete this.__grouping;f.bind(i);this.bind(f)}return this},bind:function(f){f=this._validateBind(f);this._updateBind(f);return this},_validateBind:function(i){if(i){if(i.isNull()){i=null}else{if(this.requireSingleDimension&&!i.isSingleDimension){throw ad.error.operationInvalid("Role '{0}' only accepts a single dimension.",[this.name])}var f=this.valueType,u=this.requireIsDiscrete;i.dimensions().each(function(F){F=F.type;if(f&&F.valueType!==f){throw ad.error.operationInvalid("Role '{0}' cannot be bound to dimension '{1}'. \nIt only accepts dimensions of type '{2}' and not of type '{3}'.",[this.name,F.name,V.data.DimensionType.valueTypeName(f),F.valueTypeName])}if(u!=null&&F.isDiscrete!==u){if(u){F._toDiscrete()}else{throw ad.error.operationInvalid("Role '{0}' cannot be bound to dimension '{1}'. \nIt only accepts {2} dimensions.",[this.name,F.name,u?"discrete":"continuous"])}}},this)}}return i},_updateBind:function(f){this.grouping&&this.grouping.dimensions().each(function(i){i.type&&aE.call(i.type,this)},this);if(this.grouping=f){this.grouping=this.grouping.ensure({reverse:this.isReversed,rootLabel:this.rootLabel});this.grouping.dimensions().each(function(i){a2.call(i.type,this)},this)}}});ad.type("pvc.visual.RoleVarHelper").init(function(i,f,M){var L=ad.get(M,"hasPercentSubVar",false),I=ad.get(M,"roleVar"),F=this.grouping=f&&f.grouping;if(F){this.role=f;this.sourceRoleName=f.sourceRole&&f.sourceRole.name;var u=i.panel();this.panel=u;if(!F.isDiscrete()){this.rootContDim=u.data.owner.dimensions(F.firstDimensionName());if(L){this.percentFormatter=u.chart.options.percentValueFormat}}}if(!I){if(!f){throw ad.error.operationInvalid("Role is not defined, so the roleVar argument is required.")}I=f.name}if(!F){f=i.vars[I]=new ax(null,"");if(L){f.percent=new ax(null,"")}}this.roleVarName=I;i["is"+ad.firstUpperCase(I)+"Bound"]=!!F;if(ad.get(M,"allowNestedVars")){this.allowNestedVars=true}}).add({allowNestedVars:false,isBound:function(){return !!this.grouping},onNewScene:function(i,f){if(this.grouping){var M=this.roleVarName;if(!(this.allowNestedVars?ad.hasOwnProp.call(i.vars,M):i.vars[M])){var L=this.sourceRoleName;if(L){if(L=ad.getOwn(i.vars,L)){i.vars[M]=L.clone();return}}if(f){var I;if(f=this.rootContDim){var F;var u=(L=i.group)?L.singleDatum():i.datum;if(u){if(!u.isNull){I=ax.fromAtom(u.atoms[f.name]);if(I.value!=null&&this.percentFormatter){if(L){L=L.dimensions(f.name);F=L.percentOverParent({visible:true})}else{F=i.data().dimensions(f.name).percent(I.value)}}}}else{if(L){L=L.dimensions(f.name);u=L.sum({visible:true,zeroIfNone:false});if(u!=null){I=f.format(u);I=new ax(u,I,u);if(this.percentFormatter){F=L.percentOverParent({visible:true})}}}}if(I&&this.percentFormatter){I.percent=I.value==null?new ax(null,""):new ax(F,this.percentFormatter.call(null,F))}}else{if((F=i.datum)&&!F.isNull){I=this.grouping.view(F);I=ax.fromComplex(I)}}if(!I){I=new ax(null,"");if(this.percentFormatter){I.percent=new ax(null,"")}}i.vars[M]=I}}}}});ar.prototype.getSign=function(){return this.sign||aZ(this)};ar.prototype.getScene=function(){return this.getSign().scene};ar.prototype.getContext=function(){return this.getSign().context()};ad.type("pvc.visual.BasicSign").init(function(i,f){this.chart=i.chart;this.panel=i;this.pvMark=f;!f.sign||ad.assert("Mark already has an attached Sign.");f.sign=this;f.__buildInstance=f.buildInstance;f.buildInstance=this._dispatchBuildInstance}).add({compatVersion:function(){return this.chart.compatVersion()},localProperty:function(i,f){this.pvMark.localProperty(i,f);return this},lock:function(i,f){return this.lockMark(i,this._bindWhenFun(f,i))},optional:function(i,f,u){return this.optionalMark(i,this._bindWhenFun(f,i),u)},lockMark:function(i,f){this.pvMark.lock(i,f);return this},optionalMark:function(i,f,u){this.pvMark[i](f,u);return this},delegate:function(i,f){return this.pvMark.delegate(i,f)},delegateExtension:function(f){return this.pvMark.delegate(f,V.extensionTag)},hasDelegate:function(f){return this.pvMark.hasDelegate(f)},_createPropInterceptor:function(i,f){var F=this,u=i==="data";return function(){var L=this.sign;if(!L||L!==F){return F._getPvSceneProp(i,this.index)}if(!u){var I=this.scene[this.index];if(!L.scene||L.scene!==I.data){F._inContext(I.data,I)}}return f.apply(F,arguments)}},_getPvSceneProp:function(i,f){var F=this.pvMark,u=F.scene;if(u){f=F.hasOwnProperty("index")?F.index:Math.min(f,u.length-1);if(f!=null){return u[f][i]}}throw ad.error.operationInvalid("Cannot evaluate inherited property.")},_bindWhenFun:function(i,f){if(ad.fun.is(i)){var u=this;return u._createPropInterceptor(f,function(F){return i.call(u,F)})}return i},_lockDynamic:function(i,f){var u=this;return u.lockMark(i,u._createPropInterceptor(i,function(F){return u[f].call(u,F)}))},_dispatchBuildInstance:function(i){function f(){this.__buildInstance(i)}this.sign._inContext(i.data,i,f,this)},_inContext:function(Y,X,O,M){var L=this.pvMark;X||(X=L.scene[L.index]);Y||(Y=X.data||ad.assert("A scene is required!"));var I=Y.childIndex(),F,u,i,f=this.pvInstance;if(f){F=this.scene;u=this.index;i=this.state}this.pvInstance=X;this.scene=Y;this.index=I<0?0:I;r.call(Y,L.renderId());this.state={};if(O){try{return O.call(M,X)}finally{this.state=i;this.pvInstance=f;this.scene=F;this.index=u}}},context:function(i){var f;if(i||!(f=this.state)){return this._createContext()}return f.context||(f.context=this._createContext())},_createContext:function(){return new V.visual.Context(this.panel,this.pvMark)}});ad.type("pvc.visual.Sign",V.visual.BasicSign).init(function(i,f,I){var F=this;F.base(i,f,I);F._ibits=i._ibits;var u=ad.get(I,"extensionId");if(u!=null){F.extensionAbsIds=ad.array.to(i._makeExtensionAbsId(u))}F.isActiveSeriesAware=ad.get(I,"activeSeriesAware",true);if(F.isActiveSeriesAware){i=(i=i.visualRoles)&&i.series;if(!i||!i.isBound()){F.isActiveSeriesAware=false}}f.wrapper(ad.get(I,"wrapper")||F.createDefaultWrapper());ad.get(I,"freeColor",true)||F._bindProperty("fillStyle","fillColor","color")._bindProperty("strokeStyle","strokeColor","color")}).postInit(function(i,f,u){this._addInteractive(u);i._addSign(this)}).add({createDefaultWrapper:function(){var f=this;return function(i){return function(u){return i.call(f.context(),u)}}},property:function(i){var f=ad.firstUpperCase(i),L="base"+f,I="default"+f,F="normal"+f,u="interactive"+f;f={};f[i]=function(O){this._finished=false;this._arg=O;var M=this[L](O);if(M==null){return null}if(this._finished){return M}M=this.showsInteraction()&&this.anyInteraction()?this[u](M,O):this[F](M,O);this._arg=null;return M};f[L]=function(){return this.delegateExtension()};f[I]=function(){};f[F]=function(M){return M};f[u]=function(M){return M};this.constructor.add(f);return this},anyInteraction:function(){return this.scene.anyInteraction()},finished:function(f){this._finished=true;return f},applyExtensions:function(){if(!this._extended){this._extended=true;var f=this.extensionAbsIds;f&&f.forEach(function(i){this.panel.extendAbs(this.pvMark,i)},this)}return this},intercept:function(i,f){f=this._createPropInterceptor(i,f);return this._intercept(i,f)},lockDimensions:function(){this.pvMark.lock("left").lock("right").lock("top").lock("bottom").lock("width").lock("height");return this},_extensionKeyArgs:{tag:V.extensionTag},_bindProperty:function(i,f,I){var F=this;I||(I=f);var u="default"+ad.firstUpperCase(I);if(ad.fun.is(F[u])){F.pvMark.hasDelegateValue(i,V.extensionTag)||F.pvMark.intercept(i,function(){return F[u](F._arg)},F._extensionKeyArgs)}I=this._createPropInterceptor(i,function(){return F[f]()});return F._intercept(i,I)},_intercept:function(i,f){var F=this.pvMark,u=this.extensionAbsIds;u&&ad.query(u).select(function(I){return this.panel._getExtensionAbs(I,i)},this).where(ad.notUndef).each(function(I){I=F.wrap(I,i);F.intercept(i,I,this._extensionKeyArgs)},this);(F._intercepted||(F._intercepted={}))[i]=true;F.intercept(i,f);return this}}).prototype.property("color").constructor.add(V.visual.Interactive).add({extensionAbsIds:null,_addInteractive:function(i){var f=this,I=ad.get;if(f.interactive()){var F=f._ibits,u=V.visual.Interactive;if(I(i,"noTooltip")){F&=~u.ShowsTooltip}if(I(i,"noHover")){F&=~u.Hoverable}if(I(i,"noClick")){F&=~u.Clickable}if(I(i,"noDoubleClick")){F&=~u.DoubleClickable}if(I(i,"noSelect")){F&=~u.SelectableAny}else{if(this.selectable()){if(I(i,"noClickSelect")){F&=~u.SelectableByClick}if(I(i,"noRubberSelect")){F&=~u.SelectableByRubberband}}}if(f.showsInteraction()){if(I(i,"showsInteraction")===false){F&=~u.ShowsInteraction}if(f.showsActivity()){if(I(i,"showsActivity")===false){F&=~u.ShowsActivity}}if(f.showsSelection()){if(I(i,"showsSelection")===false){F&=~u.ShowsSelection}}}f._ibits=F}if(f.handlesEvents()){f.showsTooltip()&&f._addPropTooltip(I(i,"tooltipArgs"));f.hoverable()&&f._addPropHoverable();f.handlesClickEvent()&&f._addPropClick();f.doubleClickable()&&f._addPropDoubleClick()}else{f.pvMark.events("none")}},fillColor:function(){return this.color("fill")},strokeColor:function(){return this.color("stroke")},defaultColor:function(){return this.defaultColorSceneScale()(this.scene)},dimColor:function(i,f){if(f==="text"){return V.toGrayScale(i,-0.75,null,null)}return V.toGrayScale(i,-0.3,null,null)},defaultColorSceneScale:function(){return ad.lazy(this,"_defaultColorSceneScale",this._initDefColorScale,this)},_initDefColorScale:function(){var f=this.panel.axes.color;return f?f.sceneScale({sceneVarName:"color"}):ad.fun.constant(V.defaultColor)},mayShowActive:function(i){if(!this.showsActivity()){return false}var f=this.scene;return f.isActive||!i&&this.isActiveSeriesAware&&f.isActiveSeries()||f.isActiveDatum()},mayShowNotAmongSelected:function(){return this.mayShowAnySelected()&&!this.scene.isSelected()},mayShowSelected:function(){return this.showsSelection()&&this.scene.isSelected()},mayShowAnySelected:function(){return this.showsSelection()&&this.scene.anySelected()},_addPropTooltip:function(i){if(!this.pvMark.hasTooltip){var f=ad.create(this.chart._tooltipOptions,ad.get(i,"options"));f.isLazy=ad.get(i,"isLazy",true);var u=ad.get(i,"buildTooltip")||this._getTooltipFormatter(f);if(u){f.isEnabled=this._isTooltipEnabled.bind(this);(i=ad.get(i,"tipsyEvent"))||(i="mouseover");this.pvMark.localProperty("tooltip").tooltip(this._createTooltipProp(u,f.isLazy)).title(ad.fun.constant("")).ensureEvents().event(i,R.Behavior.tipsy(f)).hasTooltip=true}}},_getTooltipFormatter:function(f){return this.panel._getTooltipFormatter(f)},_isTooltipEnabled:function(){return this.panel._isTooltipEnabled()},_createTooltipProp:function(i,f){var F=this,u;u=f?function(){var L=F.context(true),I;return function(){if(L){I=i(L);L=null}return I}}:function(){var I=F.context();return i(I)};return function(){var I=F.scene;if(I&&!I.isIntermediate&&I.showsTooltip()){return u()}}},_addPropHoverable:function(){var f=this.panel;this.pvMark.ensureEvents().event("mouseover",function(i){if(i.hoverable()&&!f.selectingByRubberband()&&!f.animating()){i.setActive(true);f.renderInteractive()}}).event("mouseout",function(i){i.hoverable()&&!f.selectingByRubberband()&&!f.animating()&&i.clearActive()&&f.renderInteractive()})},_ignoreClicks:0,_propCursorClick:function(i){i=this._ibits&i._ibits;var f=V.visual.Interactive;return i&f.HandlesClickEvent||i&f.DoubleClickable?"pointer":null},_addPropClick:function(){var f=this;f.pvMark.cursor(f._propCursorClick.bind(f)).ensureEvents().event("click",f._handleClick.bind(f))},_addPropDoubleClick:function(){var f=this;f.pvMark.cursor(f._propCursorClick.bind(f)).ensureEvents().event("dblclick",f._handleDoubleClick.bind(f))},_handleClick:function(){var i=this,f=i.pvMark,L=f.instance().data;if(i.doubleClickable()&&L.doubleClickable()){var I=f.scene,F=f.index,u=R.event;window.setTimeout(function(){if(i._ignoreClicks){i._ignoreClicks--}else{try{R.event=u;f.context(I,F,function(){i._handleClickCore()})}catch(M){R.error(M)}finally{delete R.event}}},i.chart.options.doubleClickMaxDelay||300)}else{if(i._ignoreClicks){i._ignoreClicks--}else{i._handleClickCore()}}},_handleClickCore:function(){var i=this,f=i.pvMark.instance();i._inContext(f.data,f,function(){i._onClick(i.context())},i)},_handleDoubleClick:function(){var i=this,f=i.pvMark.instance();if(f.data.doubleClickable()){i._ignoreClicks=2;i._inContext(f.data,f,function(){i._onDoubleClick(i.context())},i)}},_onClick:function(f){f.click()},_onDoubleClick:function(f){f.doubleClick()}});ad.type("pvc.visual.Panel",V.visual.Sign).init(function(i,f,F){var u=ad.get(F,"panel");if(!u){u=ad.get(F,"panelType")||R.Panel;u=f.add(u)}this.base(i,u,F)}).add({_addInteractive:function(f){f=ad.setDefaults(f,"noSelect",true,"noHover",true,"noTooltip",true,"noClick",true,"noDoubleClick",true);this.base(f)}});ad.type("pvc.visual.Label",V.visual.Sign).init(function(i,f,u){f=f.add(R.Label);this.base(i,f,u)}).add({_addInteractive:function(f){f=ad.setDefaults(f,"noSelect",true,"noHover",true,"noTooltip",true,"noClick",true,"noDoubleClick",true,"showsInteraction",false);this.base(f)},defaultColor:ad.fun.constant(R.Color.names.black)});ad.type("pvc.visual.ValueLabel",V.visual.Label).init(function(i,f,u){f=ad.get(u,"noAnchor",false)?f:f.anchor(i.valuesAnchor);if(u&&u.extensionId==null){u.extensionId="label"}this.base(i,f,u);this._bindProperty("text","text");this.pvMark.font(i.valuesFont);this._bindProperty("textStyle","textColor","color")}).prototype.property("text").property("textStyle").constructor.addStatic({maybeCreate:function(i,f,u){return i.valuesVisible&&i.valuesMask?new V.visual.ValueLabel(i,f,u):null},isNeeded:function(f){return f.valuesVisible&&f.valuesMask}}).add({_addInteractive:function(f){f=ad.setDefaults(f,"showsInteraction",true,"noSelect",true,"noTooltip",true,"noClick",true,"noDoubleClick",true,"noHover",true);this.base(f)},defaultText:function(){return this.scene.format(this.panel.valuesMask)},normalText:function(f){return this.trimText(f)},interactiveText:function(f){return this.showsActivity()&&this.scene.isActive?f:this.trimText(f)},trimText:function(f){return f},textColor:function(){return this.color("text")},backgroundColor:function(i){var f=this.state;if(!f){return this.calcBackgroundColor(i)}f=ad.lazy(f,"bgColorCache");var u=ad.getOwn(f,i);u||(u=f[i]=this.calcBackgroundColor(i));return u},calcBackgroundColor:ad.fun.constant(R.Color.names.white),optimizeLegibilityColor:function(f){if(this.panel.valuesOptimizeLegibility){return this.backgroundColor().isDark()?f.complementary().alpha(0.9):f}return f},normalColor:function(i,f){return this.optimizeLegibilityColor(i,f)},interactiveColor:function(i,f){if(!this.mayShowActive()&&this.mayShowNotAmongSelected()){return this.dimColor(i,f)}return this.optimizeLegibilityColor(i,f)}});ad.type("pvc.visual.Dot",V.visual.Sign).init(function(i,f,F){f=f.add(R.Dot);var u=ad.get(F,"proto");u&&f.extend(u);F=ad.setDefaults(F,"freeColor",false);this.base(i,f,F);if(!ad.get(F,"freePosition",false)){F=i.isOrientationVertical()?"left":"bottom";i=i.anchorOrtho(F);this._lockDynamic(F,"x")._lockDynamic(i,"y")}this._bindProperty("shape","shape")._bindProperty("shapeRadius","radius")._bindProperty("shapeSize","size");this.optional("strokeDasharray",undefined).optional("lineWidth",1.5)}).prototype.property("size").property("shape").constructor.add({y:ad.fun.constant(0),x:ad.fun.constant(0),radius:function(){this.state.radius=this.delegateExtension()},baseSize:function(){var f=this.state.radius;return f!=null?ad.sqr(f):this.base()},defaultSize:function(){return 12},interactiveSize:function(f){return this.mayShowActive(true)?Math.max(f,5)*2.5:f},interactiveColor:function(i,f){if(this.mayShowActive(true)){if(f==="stroke"){return i.brighter(1)}}else{if(this.mayShowNotAmongSelected()){if(this.mayShowActive()){return i.alpha(0.8)}switch(f){case"fill":return this.dimColor(i,f);case"stroke":return i.alpha(0.45)}}}return this.base(i,f)}});ad.type("pvc.visual.DotSizeColor",V.visual.Dot).init(function(i,f,I){this.base(i,f,I);var F=this.compatVersion()<=1;this._bindProperty("lineWidth","strokeWidth").intercept("visible",function(){if(!this.canShow()){return false}var L=this.delegateExtension();if(L==null){L=F||this.defaultVisible()}return L});this._initColor();this._initSize();if(this.isSizeBound){if(i.axes.size.scaleUsesAbs()){this.isSizeAbs=true;var u=this._sceneDefColor;this._sceneDefColor=function(M,L){return L==="stroke"&&M.vars.size.value<0?R.Color.names.black:u.call(this,M,L)};this.pvMark.lineCap("round").strokeDasharray(function(L){return L.vars.size.value<0?"dash":null})}}}).prototype.property("strokeWidth").constructor.add({isColorBound:false,isColorDiscrete:false,isSizeBound:false,isSizeAbs:false,canShow:function(){return !this.scene.isIntermediate},defaultVisible:function(){var f=this.scene;return !f.isNull&&(!this.isSizeBound&&!this.isColorBound||this.isSizeBound&&f.vars.size.value!=null||this.isColorBound&&(this.isColorDiscrete||f.vars.color.value!=null))},_initColor:function(){var i,f,F=this.panel,u=F.visualRoles.color;if(u){this.isColorDiscrete=u.isDiscrete();F=F.axes.color;if(u.isBound()){this.isColorBound=true;f=F.sceneScale({sceneVarName:"color"})}else{if(F){i=F.option("Unbound")}}}f||(f=ad.fun.constant(i||V.defaultColor));this._sceneDefColor=f},_initSize:function(){var i=this.panel,f=i.plot,O=f.option("Shape"),M=f.option("NullShape");f=i.visualRoles.size;var L,I;if(f){var F=(i=i.axes.size)&&i.scale;if(F&&f.isBound()){this.isSizeBound=true;var u=F.min+(F.max-F.min)*0.05;this.nullSizeShapeHasStrokeOnly=M==="cross";I=function(X){return X.vars.size.value!=null?O:M};L=function(X){X=X.vars.size.value;return X!=null?F(X):M?u:0}}}if(!L){I=ad.fun.constant(O);L=function(X){return this.base(X)}}this._sceneDefSize=L;this._sceneDefShape=I},defaultColor:function(f){return this._sceneDefColor(this.scene,f)},normalColor:function(i,f){return f==="stroke"?i.darker():this.base(i,f)},interactiveColor:function(i,f){var F=this.scene;if(this.mayShowActive(true)){switch(f){case"fill":return this.isSizeBound?i.alpha(0.75):i;case"stroke":return i.darker()}}else{if(this.showsSelection()){var u=F.isSelected();if(!u&&F.anySelected()){if(this.mayShowActive()){return i.alpha(0.8)}switch(f){case"fill":return this.dimColor(i,f);case"stroke":return i.alpha(0.45)}}if(u&&t(i)){if(f==="stroke"){i=i.darker(3)}return i.darker(2)}}}if(f==="stroke"){return i.darker()}return i},defaultSize:function(){return this._sceneDefSize(this.scene)},defaultShape:function(){return this._sceneDefShape(this.scene)},interactiveSize:function(i){if(!this.mayShowActive(true)){return i}i=Math.sqrt(i);var f=Math.max(1,Math.min(1.1*i,2));return ad.sqr(i+f)},defaultStrokeWidth:function(){return this.nullSizeShapeHasStrokeOnly&&this.scene.vars.size.value==null?1.8:1},interactiveStrokeWidth:function(f){return this.mayShowActive(true)?2*f:this.mayShowSelected()?1.5*f:f}});ad.type("pvc.visual.Line",V.visual.Sign).init(function(i,f,u){f=f.add(R.Line);this.base(i,f,u);this.lock("segmented","smart").lock("antialias",true);if(!ad.get(u,"freePosition",false)){u=i.isOrientationVertical()?"left":"bottom";this._lockDynamic(i.anchorOrtho(u),"y")._lockDynamic(u,"x")}this._bindProperty("strokeStyle","strokeColor","color")._bindProperty("lineWidth","strokeWidth")}).prototype.property("strokeWidth").constructor.add({_addInteractive:function(f){f=ad.setDefaults(f,"noTooltip",true);this.base(f)},y:ad.fun.constant(0),x:ad.fun.constant(0),defaultStrokeWidth:ad.fun.constant(1.5),interactiveStrokeWidth:function(f){return this.mayShowActive()?Math.max(1,f)*2.5:f},interactiveColor:function(i,f){if(this.mayShowNotAmongSelected()){return this.mayShowActive()?R.Color.names.darkgray.darker().darker():this.dimColor(i,f)}return this.base(i,f)}});ad.type("pvc.visual.Area",V.visual.Sign).init(function(i,f,u){f=f.add(R.Area);u||(u={});u.freeColor=true;this.base(i,f,u);f=ad.get(u,"antialias",true);this.lock("segmented","smart").lock("antialias",f);if(!ad.get(u,"freePosition",false)){u=i.isOrientationVertical()?"left":"bottom";f=i.anchorOrtho(u);i=i.anchorOrthoLength(f);this._lockDynamic(u,"x")._lockDynamic(f,"y")._lockDynamic(i,"dy")}this._bindProperty("fillStyle","fillColor","color");this.lock("strokeStyle",null).lock("lineWidth",0)}).add({_addInteractive:function(f){f=ad.setDefaults(f,"noTooltip",true);this.base(f)},y:ad.fun.constant(0),x:ad.fun.constant(0),dy:ad.fun.constant(0),interactiveColor:function(i,f){if(f==="fill"&&this.mayShowNotAmongSelected()){return this.dimColor(i,f)}return this.base(i,f)}});ad.type("pvc.visual.Bar",V.visual.Sign).init(function(i,f,u){f=f.add(R.Bar);u=ad.setDefaults(u,"freeColor",false);this.base(i,f,u);this.normalStroke=ad.get(u,"normalStroke",false);this._bindProperty("lineWidth","strokeWidth")}).prototype.property("strokeWidth").constructor.add({normalColor:function(i,f){if(f==="stroke"&&!this.normalStroke){return null}return i},interactiveColor:function(i,f){if(f==="stroke"){if(this.mayShowActive(true)){return i.brighter(1.3).alpha(0.7)}if(!this.normalStroke){return null}if(this.mayShowNotAmongSelected()){if(this.mayShowActive()){return R.Color.names.darkgray.darker().darker()}return this.dimColor(i,f)}if(this.mayShowActive()){return i.brighter(1).alpha(0.7)}}else{if(f==="fill"){if(this.mayShowActive(true)){return i.brighter(0.2).alpha(0.8)}if(this.mayShowNotAmongSelected()){if(this.mayShowActive()){return R.Color.names.darkgray.darker(2).alpha(0.8)}return this.dimColor(i,f)}if(this.mayShowActive()){return i.brighter(0.2).alpha(0.8)}}}return this.base(i,f)},defaultStrokeWidth:function(){return 0.5},interactiveStrokeWidth:function(f){if(this.mayShowActive(true)){return Math.max(1,f)*1.3}return f}});R.PieSlice=function(){R.Wedge.call(this)};R.PieSlice.prototype=R.extend(R.Wedge).property("offsetRadius");R.PieSlice.prototype.midAngle=function(){var f=this.instance();return f.startAngle+f.angle/2};R.PieSlice.prototype.defaults=(new R.PieSlice).extend(R.Wedge.prototype.defaults).offsetRadius(0);ad.type("pvc.visual.PieSlice",V.visual.Sign).init(function(i,f,u){f=f.add(R.PieSlice);u=ad.setDefaults(u,"freeColor",false);this.base(i,f,u);this._activeOffsetRadius=ad.get(u,"activeOffsetRadius",0);this._maxOffsetRadius=ad.get(u,"maxOffsetRadius",0);this._resolvePctRadius=ad.get(u,"resolvePctRadius");this._center=ad.get(u,"center");this.optional("lineWidth",0.6)._bindProperty("angle","angle")._bindProperty("offsetRadius","offsetRadius")._lockDynamic("bottom","y")._lockDynamic("left","x").lock("top",null).lock("right",null)}).prototype.property("offsetRadius").constructor.add({angle:ad.fun.constant(0),x:function(){return this._center.x+this._offsetSlice("cos")},y:function(){return this._center.y-this._offsetSlice("sin")},_offsetSlice:function(i){var f=this.pvMark.offsetRadius()||0;if(f){f*=Math[i](this.pvMark.midAngle())}return f},defaultColor:function(f){return f==="stroke"?null:this.base(f)},interactiveColor:function(i,f){if(this.mayShowActive(true)){switch(f){case"fill":return i.brighter(0.2).alpha(0.8);case"stroke":return i.brighter(1.3).alpha(0.7)}}else{if(this.mayShowNotAmongSelected()){if(f==="fill"){return this.dimColor(i,f)}}}return this.base(i,f)},offsetRadius:function(){var f=this.base();return Math.min(Math.max(0,f),this._maxOffsetRadius)},baseOffsetRadius:function(){var f=this.base()||0;return this._resolvePctRadius(au.parse(f))},interactiveOffsetRadius:function(f){return f+(this.mayShowActive(true)?this._activeOffsetRadius:0)}});ad.type("pvc.visual.Rule",V.visual.Sign).init(function(i,f,F){f=f.add(R.Rule);var u=ad.get(F,"proto");u&&f.extend(u);this.base(i,f,F);ad.get(F,"freeStyle")||this._bindProperty("strokeStyle","strokeColor","color")._bindProperty("lineWidth","strokeWidth")}).prototype.property("strokeWidth").constructor.add({_addInteractive:function(f){f=ad.setDefaults(f,"noHover",true,"noSelect",true,"noTooltip",true,"noClick",true,"noDoubleClick",true,"showsInteraction",false);this.base(f)},defaultStrokeWidth:function(){return 1},interactiveStrokeWidth:function(f){if(this.mayShowActive(true)){return Math.max(1,f)*2.2}return f},interactiveColor:function(i,f){if(this.scene.datum&&!this.mayShowActive(true)&&this.mayShowNotAmongSelected()){return this.dimColor(i,f)}return this.base(i,f)}});ad.type("pvc.visual.OptionsBase").init(function(i,f,F,u){this.chart=i;this.type=f;this.index=F==null?0:F;this.name=ad.get(u,"name");this.id=this._buildId();this.optionId=this._buildOptionId();this._registerResolversFull(this._resolvers=[],u);this.option=V.options(this._getOptionsDefinition(),this)}).add({_buildId:function(){return V.buildIndexedId(this.type,this.index)},_buildOptionId:function(){return this.id},_getOptionsDefinition:ad.method({isAbstract:true}),_chartOption:function(f){return this.chart.options[f]},_registerResolversFull:function(i,f){var u=ad.get(f,"fixed");if(u){this._fixed=u;i.push(V.options.specify(function(F){return u[F.name]}))}this._registerResolversNormal(i,f);if(f=ad.get(f,"defaults")){this._defaults=f}i.push(this._resolveDefault)},_registerResolversNormal:function(i,f){this.chart.compatVersion()<=1&&i.push(this._resolveByV1OnlyLogic);this.name&&i.push(V.options.specify(function(u){return this._chartOption(this.name+ad.firstUpperCase(u.name))}));i.push(this._resolveByOptionId);ad.get(f,"byNaked",!this.index)&&i.push(this._resolveByNaked)},_resolveFull:function(i){for(var f=this._resolvers,F=0,u=f.length;F<u;F++){if(f[F].call(this,i)){return true}}return false},_resolveFixed:V.options.specify(function(f){if(this._fixed){return this._fixed[f.name]}}),_resolveByV1OnlyLogic:function(i){var f=i.data,u;if(f&&(u=f.resolveV1)){return u.call(this,i)}},_resolveByName:V.options.specify(function(f){if(this.name){return this._chartOption(this.name+ad.firstUpperCase(f.name))}}),_resolveByOptionId:V.options.specify(function(f){return this._chartOption(this.optionId+ad.firstUpperCase(f.name))}),_resolveByNaked:V.options.specify(function(f){if(!this.index){return this._chartOption(ad.firstLowerCase(f.name))}}),_resolveDefault:function(i){var f=i.data,u;if(f&&(u=f.resolveDefault)){if(u.call(this,i)){return true}}if(this._defaults){f=this._defaults[i.name];if(f!==undefined){i.defaultValue(f);return true}}},_specifyChartOption:function(i,f){f=this._chartOption(f);if(f!=null){i.specify(f);return true}}});var ak=ad.type("pvc.visual.Axis",V.visual.OptionsBase).init(function(i,f,F,u){this.base(i,f,F,u);i._addAxis(this)}).add({isVisible:true,scaleTreatsNullAs:function(){return"null"},scaleNullRangeValue:function(){return null},scaleUsesAbs:function(){return false},bind:function(i){var f=this;i||ad.fail.argumentRequired("dataCells");!f.dataCells||ad.fail.operationInvalid("Axis is already bound.");f.dataCells=ad.array.to(i);f.dataCell=f.dataCells[0];f.role=f.dataCell&&f.dataCell.role;f.scaleType=q(f.role.grouping);f._checkRoleCompatibility();return this},isDiscrete:function(){return this.role&&this.role.isDiscrete()},isBound:function(){return !!this.role},setScale:function(i,f){this.role||ad.fail.operationInvalid("Axis is unbound.");this.scale=i?f?i:this._wrapScale(i):null;return this},_wrapScale:function(i){i.type=this.scaleType;var f;if(i.type!=="discrete"){f=this.scaleUsesAbs();var I=this.scaleTreatsNullAs();if(I&&I!=="null"){var F=I==="min";f=f?function(L){return i(L==null?F?i.domain()[0]:0:L<0?-L:L)}:function(L){return i(L==null?F?i.domain()[0]:0:L)}}else{var u=this.scaleNullRangeValue();f=f?function(L){return L==null?u:i(L<0?-L:L)}:function(L){return L==null?u:i(L)}}}else{f=function(L){return i(L==null?"":L)}}return ad.copy(f,i)},sceneScale:function(i){var f=ad.get(i,"sceneVarName")||this.role.name,I=this.role.grouping;if(I.isSingleDimension&&I.firstDimensionValueType()===Number){var F=this.scale,u=ad.get(i,"nullToZero",true);i=function(L){L=L.vars[f].value;if(L==null){if(!u){return L}L=0}return F(L)};ad.copy(i,F);return i}return this.scale.by1(function(L){return L.vars[f].value})},_checkRoleCompatibility:function(){var i=this.dataCells.length;if(i>1){var f=this.role.grouping,u;if(this.scaleType==="discrete"){for(u=1;u<i;u++){if(f.id!==this.dataCells[u].role.grouping.id){throw ad.error.operationInvalid("Discrete roles on the same axis must have equal groupings.")}}}else{if(!f.firstDimensionType().isComparable){throw ad.error.operationInvalid("Continuous roles on the same axis must have 'comparable' groupings.")}for(u=1;u<i;u++){if(this.scaleType!==q(this.dataCells[u].role.grouping)){throw ad.error.operationInvalid("Continuous roles on the same axis must have scales of the same type.")}}}}},_getOptionsDefinition:function(){return T}}),T={},y=ad.type("pvc.visual.CartesianAxis",ak).init(function(i,f,F,u){this.orientation=y.getOrientation(f,i.options.orientation);this.orientedId=y.getOrientedId(this.orientation,F);if(i._allowV1SecondAxis&&F===1){this.v1SecondOrientedId="second"+this.orientation.toUpperCase()}this.base(i,f,F,u);i=this.extensionPrefixes=[this.id+"Axis",this.orientedId+"Axis"];this.v1SecondOrientedId&&i.push(this.v1SecondOrientedId+"Axis");this._extPrefAxisPosition=i.length;i.push("axis")}).add({bind:function(f){this.base(f);this._syncExtensionPrefixes();return this},_syncExtensionPrefixes:function(){var i=this.extensionPrefixes;i.length=this._extPrefAxisPosition;var f=this.scaleType;if(f){i.push(f+"Axis");f!=="discrete"&&i.push("continuousAxis")}i.push("axis")},setScale:function(i){var f=this.scale;this.base(i);if(f){delete this.domain;delete this.ticks;delete this._roundingPaddings}if(i){if(!i.isNull&&this.scaleType!=="discrete"){this.domain=i.domain();this.domain.minLocked=!!i.minLocked;this.domain.maxLocked=!!i.maxLocked;if(this.scaleType==="numeric"){this.option("DomainRoundMode")==="nice"&&i.nice();(f=this.option("TickFormatter"))&&i.tickFormatter(f)}}}return this},setTicks:function(i){var f=this.scale;f&&!f.isNull||ad.fail.operationInvalid("Scale must be set and non-null.");this.ticks=i;if(f.type==="numeric"&&this.option("DomainRoundMode")==="tick"){delete this._roundingPaddings;(f=i&&i.length)?this.scale.domain(i[0],i[f-1]):this.scale.domain(this.domain[0],this.domain[1])}},setScaleRange:function(i){var f=this.scale;f.min=0;f.max=i;f.size=i;if(f.type==="discrete"){if(f.domain().length>0){f.splitBandedCenter(f.min,f.max,this.chart.options.panelSizeRatio||0.8)}}else{f.range(f.min,f.max)}return f},getScaleRoundingPaddings:function(){var i=this._roundingPaddings;if(!i){i={begin:0,end:0,beginLocked:false,endLocked:false};var f=this.scale;if(f&&!f.isNull&&f.type!=="discrete"){var I=this.domain;i.beginLocked=I.minLocked;i.endLocked=I.maxLocked;if(f.type==="numeric"&&this.option("DomainRoundMode")!=="none"){f=f.domain();I=this.domain||ad.assert("Original domain must be set");var F=f[1]-f[0];if(F){var u=I[0]-f[0];if(u>0){i.begin=u/F}u=f[1]-I[1];if(u>0){i.end=u/F}}}}this._roundingPaddings=i}return i},calcContinuousTicks:function(f){if(f==null){f=this.option("DesiredTickCount")}return this.scale.ticks(f,{roundInside:this.option("DomainRoundMode")!=="tick",numberExponentMin:this.option("TickExponentMin"),numberExponentMax:this.option("TickExponentMax")})},_getOptionsDefinition:function(){return o},_buildOptionId:function(){return this.id+"Axis"},_registerResolversNormal:function(f){this.chart.compatVersion()<=1&&f.push(this._resolveByV1OnlyLogic);f.push(this._resolveByOptionId,this._resolveByOrientedId);this.index===1&&f.push(this._resolveByV1OptionId);f.push(this._resolveByScaleType,this._resolveByCommonId)},_resolveByOrientedId:V.options.specify(function(f){return this._chartOption(this.orientedId+"Axis"+f.name)}),_resolveByV1OptionId:V.options.specify(function(f){return this._chartOption("secondAxis"+f.name)}),_resolveByScaleType:V.options.specify(function(i){var f=this.scaleType;if(f){i=i.name;var u=this._chartOption(f+"Axis"+i);if(u===undefined&&f!=="discrete"){u=this._chartOption("continuousAxis"+i)}return u}}),_resolveByCommonId:V.options.specify(function(f){return this._chartOption("axis"+f.name)})});y.getOrientation=function(i,f){return i==="base"===(f==="vertical")?"x":"y"};y.getOrientedId=function(i,f){if(f===0){return i}return i+(f+1)};var an={resolve:"_resolveFull",data:{resolveV1:function(f){!this.index&&this.type==="ortho"&&this._specifyChartOption(f,this.id+f.name);return true}}},am={resolveV1:function(f){if(this.index){if(this._resolveByV1OptionId(f)){return true}}else{if(this._resolveByOrientedId(f)){return true}}this._resolveDefault(f);return true}},be=V.options.defaultValue(function(){if(!this.typeIndex){return this.orientation==="x"?"bottom":"left"}var f=this.chart.axesByType[this.type].first.option("Position");return V.BasePanel.oppositeAnchor[f]}),o=ad.create(T,{Visible:{resolve:"_resolveFull",data:{resolveV1:function(i){if(this.index<=1){var f=this.index===0?ad.firstUpperCase(this.orientation):"Second";this._specifyChartOption(i,"show"+f+"Scale")}return true}},cast:Boolean,value:true},Composite:{resolve:function(f){if(this.index>0){f.specify(false);return true}return this._resolveFull(f)},data:{resolveV1:function(f){this._specifyChartOption(f,"useCompositeAxis");return true}},cast:Boolean,value:false},Size:{resolve:"_resolveFull",data:am,cast:bf},SizeMax:{resolve:"_resolveFull",cast:bf},Position:{resolve:"_resolveFull",data:{resolveV1:am.resolveV1,resolveDefault:be},cast:aO},FixedMin:an,FixedMax:an,OriginIsZero:{resolve:"_resolveFull",data:{resolveV1:function(f){switch(this.index){case 0:this._specifyChartOption(f,"originIsZero");break;case 1:this.chart._allowV1SecondAxis&&this._specifyChartOption(f,"secondAxisOriginIsZero");break}return true}},cast:Boolean,value:true},DomainScope:{resolve:"_resolveFull",cast:a4,value:"global"},Offset:{resolve:"_resolveFull",data:{resolveV1:function(f){switch(this.index){case 0:this._specifyChartOption(f,"axisOffset");break;case 1:if(this.chart._allowV1SecondAxis){this._specifyChartOption(f,"secondAxisOffset");break}break}return true}},cast:V.castNumber},LabelSpacingMin:{resolve:"_resolveFull",cast:V.castNumber},OverlappedLabelsMode:{resolve:"_resolveFull",cast:V.parseOverlappedLabelsMode,value:"rotatethenhide"},Grid:{resolve:"_resolveFull",data:{resolveV1:function(f){this.index||this._specifyChartOption(f,this.orientation+"AxisFullGrid");return true}},cast:Boolean,value:false},GridCrossesMargin:{resolve:"_resolveFull",cast:Boolean,value:true},EndLine:{resolve:"_resolveFull",cast:Boolean},ZeroLine:{resolve:"_resolveFull",cast:Boolean,value:true},RuleCrossesMargin:{resolve:"_resolveFull",cast:Boolean,value:true},Ticks:{resolve:"_resolveFull",cast:Boolean},DesiredTickCount:{resolve:"_resolveFull",data:{resolveV1:am.resolveV1,resolveDefault:function(f){if(this.chart.compatVersion()<=1){f.defaultValue(5);return true}}},cast:V.castNumber},MinorTicks:{resolve:"_resolveFull",data:am,cast:Boolean,value:true},TickFormatter:{resolve:"_resolveFull",cast:ad.fun.as},DomainRoundMode:{resolve:"_resolveFull",data:{resolveV1:am.resolveV1,resolveDefault:function(f){if(this.chart.compatVersion()<=1){f.defaultValue("none");return true}}},cast:V.parseDomainRoundingMode,value:"tick"},TickExponentMin:{resolve:"_resolveFull",cast:V.castNumber},TickExponentMax:{resolve:"_resolveFull",cast:V.castNumber},Title:{resolve:"_resolveFull",cast:String},TitleSize:{resolve:"_resolveFull",cast:aY},TitleSizeMax:{resolve:"_resolveFull",cast:aY},TitleFont:{resolve:"_resolveFull",cast:String},TitleMargins:{resolve:"_resolveFull",cast:az.as},TitlePaddings:{resolve:"_resolveFull",cast:az.as},TitleAlign:{resolve:"_resolveFull",cast:function(i){var f=this.option("Position");return V.parseAlign(f,i)}},Font:{resolve:"_resolveFull",cast:String},ClickAction:{resolve:"_resolveFull",data:am},DoubleClickAction:{resolve:"_resolveFull",data:am},TooltipEnabled:{resolve:"_resolveFull",cast:Boolean,value:true},TooltipFormat:{resolve:"_resolveFull",cast:ad.fun.as,value:null},TooltipAutoContent:{resolve:"_resolveFull",cast:V.parseTooltipAutoContent,value:"value"}});ad.type("pvc.visual.CartesianAxisRootScene",V.visual.Scene);ad.type("pvc.visual.CartesianAxisTickScene",V.visual.Scene).init(function(i,f){this.base(i,f);this.vars.tick=new ax(ad.get(f,"tick"),ad.get(f,"tickLabel"),ad.get(f,"tickRaw"));if(ad.get(f,"isHidden")){this.isHidden=true}}).add({isHidden:false});ad.type("pvc.visual.CartesianFocusWindow",V.visual.OptionsBase).init(function(f){this.base(f,"focusWindow",0,{byNaked:false});this.base=new V.visual.CartesianFocusWindowAxis(this,f.axes.base)}).add({_getOptionsDefinition:function(){return aW},_exportData:function(){return{base:ad.copyProps(this.base,V.visual.CartesianFocusWindow.props)}},_importData:function(f){f=f.base;this.base.option.specify({Begin:f.begin,End:f.end,Length:f.length})},_initFromOptions:function(){this.base._initFromOptions()},_onAxisChanged:function(){var f=this.option("Changed");f&&f.call(this.chart.basePanel.context())}});var aW=ad.create(T,{Changed:{resolve:"_resolveFull",cast:ad.fun.as}});ad.type("pvc.visual.CartesianFocusWindowAxis",V.visual.OptionsBase).init(function(i,f){this.window=i;this.axis=f;this.isDiscrete=f.isDiscrete();this.base(f.chart,"focusWindow"+ad.firstUpperCase(f.type),0,{byNaked:false})}).addStatic({props:["begin","end","length"]}).add({_getOptionsDefinition:function(){return aG},_initFromOptions:function(){var f=this.option;this.set({begin:f("Begin"),end:f("End"),length:f("Length")})},set:function(ab){var Z=this,Y=ad.get(ab,"render"),X=ad.get(ab,"select",true),O,M,L;if(ab=Z._readArgs(ab)){O=ab.begin;M=ab.end;L=ab.length}else{if(this.begin!=null&&this.end!=null&&this.length!=null){return}}ab=Z.axis;var I=ab.scale,F=Z.isDiscrete;ab=!F?ab.role.firstDimensionType().cast:null;I=I.domain();var i;if(F){F=I.length;var u,f;if(O!=null){ab=+O;if(!isNaN(ab)){if(ab===Infinity){u=F-1;O=I[u]}else{if(ab===-Infinity){u=0;O=I[u]}}}if(u==null){u=I.indexOf(""+O);if(u<0){u=0;O=I[u]}}}if(M!=null){ab=+M;if(!isNaN(ab)){if(ab===Infinity){f=F-1;M=I[f]}else{if(ab===-Infinity){f=0;M=I[f]}}}if(f==null){f=I.indexOf(""+M);if(f<0){f=F-1;M=I[f]}}}if(L!=null){L=+L;if(isNaN(L)){L=null}else{if(L<0&&(O!=null||M!=null)){i=O;ab=u;O=M;u=f;M=i;f=ab;L=-L}}}if(O!=null){if(M!=null){if(u>f){i=O;ab=u;O=M;u=f;M=i;f=ab}L=f-u+1}else{if(L==null){L=F-u}f=u+L-1;if(f>F-1){f=F-1;L=f-u+1}M=I[f]}}else{if(M!=null){if(L==null){L=f}u=f-L+1;if(u<0){u=0;L=f-u+1}O=I[u]}else{if(L==null){L=Math.max(~~(F/3),1)}if(L>F){L=F;u=0;f=F-1}else{ab=~~(F/2);u=ab-~~(L/2);f=u+L-1}O=I[u];M=I[f]}}}else{if(L!=null){L=+L;if(isNaN(L)){L=null}else{if(L<0&&(O!=null||M!=null)){i=O;O=M;M=i;L=-L}}}u=I[0];f=I[1];F=f-u;if(O!=null){if(O<u){O=u}if(O>f){O=f}}if(M!=null){if(M<u){M=u}if(M>f){M=f}}if(O!=null){if(M!=null){if(O>M){i=O;O=M;M=i}L=M-O}else{if(L==null){L=f-O}M=O+L;if(M>f){M=f;L=M-O}}}else{if(M!=null){if(L==null){L=M-u}O=M-L;if(O<u){O=u;L=M-O}}else{if(L==null){L=Math.max(~~(F/3),1)}if(L>F){L=F;O=u;M=f}else{i=~~(F/2);O=i-~~(L/2);M=+O+ +L}}}O=ab(O);M=ab(M);L=ab(L);if(I=Z.option("Constraint")){M={type:"new",target:"begin",value:O,length:L,length0:L,min:u,max:f,minView:u,maxView:f};I(M);O=ab(M.value);L=ab(M.length);M=ab(+O+ +L)}}Z._set(O,M,L,X,Y)},_updatePosition:function(i,f,L,I){var F=this,u=F.axis.scale;if(F.isDiscrete){F=u.invertIndex(i);f=u.invertIndex(f)-1;u=u.domain();i=u[F];u=u[f];F=f-F+1}else{i=u.invert(i);u=u.invert(f);F=u-i}this._set(i,u,F,L,I)},_constraintPosition:function(Y){var X=this,O=X.axis,M=O.scale;if(X.isDiscrete){O=Math.floor(M.invertIndex(Y.point,true));if(O>=0){X=M.range();M=M.domain().length;X=(X.max-X.min)/M;if(O>=M&&(Y.type==="new"||Y.type==="resize-begin")){O=M-1}Y.point=O*X}}else{if(X=X.option("Constraint")){var L=O.role.firstDimensionType().cast,I=L(M.invert(Y.point));O=Y.target==="begin"?1:-1;var F=L(M.invert(Y.point+O*Y.length));F=L(O*(F-I));var u,i;if(Y.length===Y.length0){u=F}else{i=Y.point+O*Y.length0;i=L(M.invert(i));u=O*(i-I)}i=L(M.invert(Y.min));var f=L(M.invert(Y.max));L={type:Y.type,target:Y.target,value:I,length:F,length0:u,min:i,max:f,minView:L(M.invert(Y.minView)),maxView:L(M.invert(Y.maxView))};X(L);if(+L.value!==+I){I=L.value;Y.point=M(I)}X=L.length;if(+X!==+F){if(+X===+u){Y.length=Y.length0}else{X=M(+I+O*+X);Y.length=X-O*Y.point}}if(+L.min!==+i){Y.min=M(L.min)}if(+L.max!==+f){Y.max=M(L.max)}}}},_compare:function(i,f){return this.isDiscrete?""+i===""+f:+i===+f},_set:function(i,f,M,L,I){var F=this,u=false;if(!F._compare(i,F.begin)){F.begin=i;u=true}if(!F._compare(f,F.end)){F.end=f;u=true}if(!F._compare(M,F.length)){F.length=M;u=true}u&&F.window._onAxisChanged(this);L&&F._updateSelection({render:I});return u},_readArgs:function(i){if(i){var f={},u=0;V.visual.CartesianFocusWindowAxis.props.forEach(function(I){var F=i[I];if(F!=null){u=true}else{F=this[I]}f[I]=F},this);if(u){return f}}},_updateSelection:function(X){var O=this,M,L=O.axis,I=L.isDiscrete(),F=L.chart,u=L.dataCell;L=u.role;u=F.partData(u.dataPartValue,{visible:true});var i;if(I){i=L.flatten(u);L=i.child(O.begin);I=i.child(O.end);if(L&&I){M=L.childIndex();I=I.childIndex();M=ad.range(M,I-M+1).select(function(Y){return i.childNodes[Y]}).selectMany(function(Y){return Y._datums}).distinct(function(Y){return Y.key})}}else{i=u;var f=L.firstDimensionName();M=ad.query(u._datums).where(function(Y){Y=Y.atoms[f].value;return Y!=null&&Y>=O.begin&&Y<=O.end})}if(M){F.data.replaceSelected(M);F.root.updateSelections(X)}}});var aG=ad.create(T,{Resizable:{resolve:"_resolveFull",cast:Boolean,value:true},Movable:{resolve:"_resolveFull",cast:Boolean,value:true},Begin:{resolve:"_resolveFull"},End:{resolve:"_resolveFull"},Length:{resolve:"_resolveFull"},Constraint:{resolve:"_resolveFull",cast:ad.fun.as}});ad.type("pvc.visual.ColorAxis",ak).add({scaleNullRangeValue:function(){return this.option("Missing")||null},scaleUsesAbs:function(){return this.option("UseAbs")},bind:function(f){this.base(f);this._plotList=ad.query(f).select(function(i){return i.plot}).distinct(function(i){return i&&i.id}).array();return this},_wrapScale:function(i){if(this.scaleType==="discrete"?this.option.isSpecified("Transform")||!this.option.isSpecified("Colors")&&!this.option.isSpecified("Map"):true){var f=this.option("Transform");if(f){i=i.transform(f)}}return this.base(i)},scheme:function(){return ad.lazy(this,"_scheme",this._createScheme,this)},_createColorMapFilter:function(i){var f=ad.uniqueIndex(i,function(u){return u.key});return{domain:function(u){return !ad.hasOwn(i,u)},color:function(u){return !ad.hasOwn(f,u.key)}}},_createScheme:function(){var i=this,f=i.option("Colors");if(i.scaleType!=="discrete"){return function(){var I=f.apply(null,arguments);return i._wrapScale(I)}}var F=i.option("Map");if(!F){return function(){var I=f.apply(null,arguments);return i._wrapScale(I)}}var u=this._createColorMapFilter(F);return function(X){var O;X instanceof Array||(X=ad.array.copy(arguments));X=X.filter(u.domain);var M=f(X);O=M.range().filter(u.color);M.range(O);O=function(Y){return ad.getOwn(F,Y)||M(Y)};ad.copy(O,M);var L,I;O.domain=function(){if(arguments.length){throw ad.operationInvalid("The scale cannot be modified.")}L||(L=ad.array.append(ad.ownKeys(F),X));return L};O.range=function(){if(arguments.length){throw ad.operationInvalid("The scale cannot be modified.")}I||(I=ad.array.append(ad.own(F),X));return I};return i._wrapScale(O)}},sceneScale:function(i){var f=ad.get(i,"sceneVarName")||this.role.name,F=this.scalesByCateg;if(F){var u=this.option("Missing");return function(L){var I=L.vars[f].value;if(I==null){return u}return F[L.group.parent.absKey](I)}}return this.scale.by1(function(I){return I&&I.vars[f].value})},_buildOptionId:function(){return this.id+"Axis"},_getOptionsDefinition:function(){return aj},_resolveByNaked:V.options.specify(function(f){if(!this.index){return this._chartOption(this.id+ad.firstUpperCase(f.name))}}),_specifyV1ChartOption:function(i,f){if(!this.index&&this.chart.compatVersion()<=1&&this._specifyChartOption(i,f)){return true}}});an={resolveDefault:function(f){if(!this.index&&this._specifyChartOption(f,ad.firstLowerCase(f.name))){return true}}};var bd,aj=ad.create(T,{Colors:{resolve:"_resolveFull",getDefault:W,data:{resolveV1:function(f){if(this.scaleType==="discrete"){if(this.index===0){this._specifyChartOption(f,"colors")}else{this.index===1&&this.chart._allowV1SecondAxis&&this._specifyChartOption(f,"secondAxisColor")}}else{this._specifyChartOption(f,"colorRange")}return true},resolveDefault:function(f){this.index===0&&this._specifyChartOption(f,"colors")}},cast:V.colorScheme},Map:{resolve:"_resolveFull",cast:aw},Transform:{resolve:"_resolveFull",data:{resolveDefault:function(i){var f=this._plotList;if(f.length<=2){if(ad.query(f).all(function(u){u=u.name;return u==="plot2"||u==="trend"})){i.defaultValue(V.brighterColorTransform);return true}}}},cast:ad.fun.to},NormByCategory:{resolve:function(f){if(!this.chart._allowColorPerCategory){f.specify(false);return true}return this._resolveFull(f)},data:{resolveV1:function(f){this._specifyV1ChartOption(f,"normPerBaseCategory");return true}},cast:Boolean,value:false},ScaleType:{resolve:"_resolveFull",data:{resolveV1:function(f){this._specifyV1ChartOption(f,"scalingType");return true}},cast:V.parseContinuousColorScaleType,value:"linear"},UseAbs:{resolve:"_resolveFull",cast:Boolean,value:false},Domain:{resolve:"_resolveFull",data:{resolveV1:function(f){this._specifyV1ChartOption(f,"colorRangeInterval");return true}},cast:ad.array.to},Min:{resolve:"_resolveFull",data:{resolveV1:function(f){this._specifyV1ChartOption(f,"minColor");return true}},cast:R.color},Max:{resolve:"_resolveFull",data:{resolveV1:function(f){this._specifyV1ChartOption(f,"maxColor");return true}},cast:R.color},Missing:{resolve:"_resolveFull",data:{resolveV1:function(f){this._specifyV1ChartOption(f,"nullColor");return true}},cast:R.color,value:R.color("lightgray")},Unbound:{resolve:"_resolveFull",getDefault:function(){return this.option("Colors")().range()[0]||V.defaultColor},cast:R.color},LegendVisible:{resolve:"_resolveFull",data:an,cast:Boolean,value:true},LegendClickMode:{resolve:"_resolveFull",data:an,cast:V.parseLegendClickMode,value:"togglevisible"},LegendDrawLine:{resolve:"_resolveFull",data:an,cast:Boolean,value:false},LegendDrawMarker:{resolve:"_resolveFull",data:an,cast:Boolean,value:true},LegendShape:{resolve:"_resolveFull",data:an,cast:V.parseShape}});ad.type("pvc.visual.SizeAxis",ak).init(function(i,f,F,u){u=ad.set(u,"byNaked",false);this.base(i,f,F,u)}).add({_buildOptionId:function(){return this.id+"Axis"},scaleTreatsNullAs:function(){return"min"},scaleUsesAbs:function(){return this.option("UseAbs")},setScaleRange:function(i){var f=this.scale;f.min=i.min;f.max=i.max;f.size=i.max-i.min;f.range(f.min,f.max);V.debug>=4&&V.log("Scale: "+V.stringify(ad.copyOwn(f)));return this},_getOptionsDefinition:function(){return K}});var K=ad.create(T,{OriginIsZero:{resolve:"_resolveFull",cast:Boolean,value:false},FixedMin:{resolve:"_resolveFull",cast:V.castNumber},FixedMax:{resolve:"_resolveFull",cast:V.castNumber},UseAbs:{resolve:"_resolveFull",cast:Boolean,value:false}});ad.type("pvc.visual.Legend",V.visual.OptionsBase).init(function(i,f,F,u){u=ad.set(u,"byNaked",false);this.base(i,f,F,u)}).add({_getOptionsDefinition:function(){return s}});var s={Position:{resolve:"_resolveFull",cast:V.parsePosition,value:"bottom"},Size:{resolve:"_resolveFull",cast:aI},SizeMax:{resolve:"_resolveFull",cast:aI},Align:{resolve:"_resolveFull",data:{resolveDefault:function(i){var f=this.option("Position"),u;if(f!=="top"&&f!=="bottom"){u="top"}else{if(this.chart.compatVersion()<=1){u="left"}}i.defaultValue(u);return true}},cast:A},Margins:{resolve:"_resolveFull",data:{resolveDefault:function(i){if(this.chart.compatVersion()>1){var f=this.option("Position");f=ad.set({},V.BasePanel.oppositeAnchor[f],5);i.defaultValue(f)}return true}},cast:az.as},Paddings:{resolve:"_resolveFull",cast:az.as,value:5},Font:{resolve:"_resolveFull",cast:String,value:"10px sans-serif"}};ad.type("pvc.visual.legend.BulletRootScene",V.visual.Scene).init(function(i,f){this.base(i,f);i=ad.get(f,"markerSize",15);var u=(new az(ad.get(f,"itemPadding",5))).resolve(i,i);ad.set(this.vars,"horizontal",ad.get(f,"horizontal",false),"font",ad.get(f,"font"),"markerSize",i,"textMargin",ad.get(f,"textMargin",6),"itemPadding",u)}).add({layout:function(bg){function bb(bk){var bi=bk.labelTextSize(),bj=!bi||!bi.width||!bi.height;bk.isHidden=bj;if(!bj){bi={width:O+bi.width+0,height:Math.max(bi.height,X)};var bh;if(u){bh=!u.items.length}else{u=new V.visual.legend.BulletItemSceneRow(0);bh=true}bj=u.size.width+bi[L];bh||(bj+=M[L]);if(!bh&&bj>I){ab(false);bj=bi[L]}bh=u.size;bh.width=bj;bh.height=Math.max(bh.height,bi[F]);bj=u.items.length;u.items.push(bk);ad.set(bk.vars,"row",u,"rowIndex",bj,"clientSize",bi)}}function ab(bi){var bh=u.size;f.height+=bh.height;if(i.length){f.height+=M[F]}f.width=Math.max(f.width,bh.width);i.push(u);bi||(u=new V.visual.legend.BulletItemSceneRow(i.length))}var Z=bg.clientSize;if(!(Z.width>0&&Z.height>0)){return new at(0,0)}var Y=bg.desiredClientSize,X=this.vars.markerSize,O=X+this.vars.textMargin,M=this.vars.itemPadding,L=this.vars.horizontal?"width":"height",F=V.BasePanel.oppositeLength[L],I=Y[L];if(!I||I<0){I=Z[L]}var u,i=[],f={width:0,height:0};this.childNodes.forEach(function(bh){bh.childNodes.forEach(bb,this)},this);if(!u){return new at(0,0)}ab(true);ad.set(this.vars,"rows",i,"rowCount",u,"size",f);bg=this.compatVersion()<=1?I:f.width;Y=Y[F];if(!Y||Y<0){Y=f.height}return ad.set({},L,Math.min(bg,Z[L]),F,Math.min(Y,Z[F]))},defaultGroupSceneType:function(){var f=this._bulletGroupType;if(!f){this._bulletGroupType=f=ad.type(V.visual.legend.BulletGroupScene)}return f},createGroup:function(f){return new (this.defaultGroupSceneType())(this,f)}});ad.type("pvc.visual.legend.BulletItemSceneRow").init(function(f){this.index=f;this.items=[];this.size={width:0,height:0}});ad.type("pvc.visual.legend.BulletGroupScene",V.visual.Scene).init(function(i,f){this.base(i,f);this.extensionPrefix=ad.get(f,"extensionPrefix")||"";this._renderer=ad.get(f,"renderer");this.colorAxis=ad.get(f,"colorAxis");this.clickMode=ad.get(f,"clickMode");if(!this.clickMode&&this.colorAxis){this.clickMode=this.colorAxis.option("LegendClickMode")}}).add({hasRenderer:function(){return !!this._renderer},renderer:function(i){if(i!=null){this._renderer=i}else{i=this._renderer;if(!i){var f;if(i=this.colorAxis){f={drawRule:i.option("LegendDrawLine"),drawMarker:i.option("LegendDrawMarker"),markerShape:i.option("LegendShape")}}this._renderer=i=new V.visual.legend.BulletItemDefaultRenderer(f)}}return i},itemSceneType:function(){var i=this._itemSceneType;if(!i){i=ad.type(V.visual.legend.BulletItemScene);switch(this.clickMode){case"toggleselected":i.add(V.visual.legend.BulletItemSceneSelection);break;case"togglevisible":i.add(V.visual.legend.BulletItemSceneVisibility);break}var f=this.panel();f._extendSceneType("item",i,["isOn","executable","execute","value"]);var u=V.makeExtensionAbsId(V.makeExtensionAbsId("ItemScene",[this.extensionPrefix,"$"]),f._getExtensionPrefix());f=f.chart._getExtension(u,"value");f!==undefined&&i.prototype.variable("value",f);this._itemSceneType=i}return i},createItem:function(f){return new (this.itemSceneType())(this,f)}});ad.type("pvc.visual.legend.BulletItemScene",V.visual.Scene).init(function(){this.base.apply(this,arguments);if(!this.executable()){var f=V.visual.Interactive;this._ibits=f.Interactive|f.ShowsInteraction|f.Hoverable|f.SelectableAny}}).add({isOn:ad.fun.constant(true),executable:ad.fun.constant(false),execute:ad.fun.constant(),labelTextSize:function(){return R.Text.measure(this.value().label,this.vars.font)},_valueEval:function(){var f=this._valueEvalCore();f instanceof ax||(f=new ax(f,f));return f},_valueEvalCore:function(){var i,f,F,u=this.group||this.datum;if(u){i=u.value;f=u.rawValue;F=u.ensureLabel()+this._getTrendLineSuffix(u)}return new ax(i||null,F||"",f)},_getTrendLineSuffix:function(i){var f=this.chart()._getDataPartDimName();if(f){i=i.atoms[f];if(isNaN(+i.value)){return" ("+i.label+")"}}return""}}).prototype.variable("value");ad.type("pvc.visual.legend.BulletItemSceneSelection").add({isOn:function(){return !(this.group||this.datum).owner.selectedCount()||this.isSelected()},executable:function(){return this.chart().selectableByClick()},execute:function(){var i=this.datums().array();if(i.length){var f=this.chart();f._updatingSelections(function(){(i=f._onUserSelection(i))&&i.length&&V.data.Data.toggleSelected(i,true)})}}});ad.type("pvc.visual.legend.BulletItemSceneVisibility").add({isOn:function(){return this.datums().any(function(f){return !f.isNull&&f.isVisible})},executable:ad.fun.constant(true),execute:function(){V.data.Data.toggleVisible(this.datums())&&this.chart().render(true,true,false)}});ad.type("pvc.visual.legend.BulletItemRenderer");ad.type("pvc.visual.legend.BulletItemDefaultRenderer",V.visual.legend.BulletItemRenderer).init(function(f){if(this.drawRule=ad.get(f,"drawRule",false)){this.rulePvProto=ad.get(f,"rulePvProto")}if(this.drawMarker=!this.drawRule||ad.get(f,"drawMarker",true)){this.markerShape=ad.get(f,"markerShape","square");this.markerPvProto=ad.get(f,"markerPvProto")}}).add({drawRule:false,drawMarker:true,markerShape:null,rulePvProto:null,markerPvProto:null,create:function(X,O,M,L){var I={},F=this.drawRule,u=function(Y){return Y.color};if(F){var i=(new ar).left(0).top(function(){return this.parent.height()/2}).width(function(){return this.parent.width()}).lineWidth(1,V.extensionTag).strokeStyle(u,V.extensionTag),f=this.rulePvProto;if(f){i=f.extend(i)}I.pvRule=(new V.visual.Rule(X,O,{proto:i,noSelect:false,noHover:false,activeSeriesAware:false,extensionId:M+"Rule",showsInteraction:true,wrapper:L})).pvMark}if(this.drawMarker){F=(new ar).left(function(){return this.parent.width()/2}).top(function(){return this.parent.height()/2}).shapeSize(function(){return this.parent.width()},V.extensionTag).lineWidth(2,V.extensionTag).fillStyle(u,V.extensionTag).strokeStyle(u,V.extensionTag).shape(this.markerShape,V.extensionTag).angle(F?0:Math.PI/2,V.extensionTag).antialias(function(){var Y=Math.abs(Math.cos(this.angle()));if(Y!==0&&Y!==1){switch(this.shape()){case"square":case"bar":return false}}return true},V.extensionTag);if(u=this.markerPvProto){F=u.extend(F)}I.pvDot=(new V.visual.Dot(X,O,{proto:F,freePosition:true,activeSeriesAware:false,noTooltip:true,noClick:true,extensionId:M+"Dot",wrapper:L})).pvMark}return I}});ad.type("pvc.visual.DataCell").init(function(i,f,I,F,u){this.plot=i;this.axisType=f;this.axisIndex=I;this.role=i.chart.visualRoles[F];this.dataPartValue=u}).add({isBound:function(){return this.role&&this.role.isBound()},domainData:function(){return ad.lazy(this,"_domainData",this._resolveDomainData,this)},domainItemDatas:function(){var f=this.domainData();return ad.query((f||undefined)&&f.children())},domainItemDataValue:function(f){return ad.nullyTo(f.value,"")},domainItemValues:function(){return this.domainItemDatas().select(this.domainItemDataValue,this).distinct()},_resolveDomainData:function(){var i=this.role;if(i&&i.isBound()){var f=this.plot.chart.partData(this.dataPartValue);if(f){return i.flatten(f)}}return null}});ad.type("pvc.visual.Plot",V.visual.OptionsBase).init(function(i,f){var u=ad.getPath(i,["plotsByType",this.type]);u=u?u.length:0;f=ad.set(f,"byNaked",!i.plotList.length);this.base(i,this.type,u,f);i._addPlot(this);i=this.extensionPrefixes=[this.id];this.globalIndex||i.push("");this.name&&i.push(this.name)}).add({_getOptionsDefinition:function(){return V.visual.Plot.optionsDef},_resolveByNaked:V.options.specify(function(f){if(!this.globalIndex){return this._chartOption(ad.firstLowerCase(f.name))}}),collectDataCells:function(i){var f=this._getColorDataCell();f&&i.push(f)},_getColorDataCell:function(){var f=this.option("ColorRole");if(f){return new V.visual.DataCell(this,"color",this.option("ColorAxis")-1,f,this.option("DataPart"))}}});V.visual.Plot.optionsDef={Orientation:{resolve:function(f){f.specify(this._chartOption("orientation")||"vertical");return true},cast:String},ValuesVisible:{resolve:"_resolveFull",data:{resolveV1:function(i){if(this.globalIndex===0){var f=this._chartOption("showValues");if(f!==undefined){i.specify(f)}else{f=this.type!=="point";i.defaultValue(f)}return true}}},cast:Boolean,value:false},ValuesAnchor:{resolve:"_resolveFull",cast:V.parseAnchor},ValuesFont:{resolve:"_resolveFull",cast:String,value:"10px sans-serif"},ValuesMask:{resolve:"_resolveFull",cast:String,value:"{value}"},ValuesOptimizeLegibility:{resolve:"_resolveFull",cast:Boolean,value:false},DataPart:{resolve:"_resolveFixed",cast:String,value:"0"},ColorRole:{resolve:"_resolveFixed",cast:String,value:"color"},ColorAxis:{resolve:V.options.resolvers([function(f){if(this.globalIndex===0){f.specify(1);return true}},"_resolveFull"]),cast:function(f){f=V.castNumber(f);return f=f!=null?ad.between(f,1,10):1},value:1}};ad.type("pvc.visual.CartesianPlot",V.visual.Plot).add({_getOptionsDefinition:function(){return V.visual.CartesianPlot.optionsDef}});V.visual.CartesianPlot.optionsDef=ad.create(V.visual.Plot.optionsDef,{BaseAxis:{value:1},BaseRole:{resolve:"_resolveFixed",cast:String},OrthoAxis:{resolve:function(f){if(this.globalIndex===0){f.specify(1);return true}return this._resolveFull(f)},data:{resolveV1:function(f){this.name==="plot2"&&this.chart._allowV1SecondAxis&&this._chartOption("secondAxisIndependentScale")&&f.specify(2);return true}},cast:function(f){f=V.castNumber(f);return f=f!=null?ad.between(f,1,10):1},value:1},OrthoRole:{resolve:V.options.resolvers(["_resolveFixed","_resolveDefault"])},Trend:{resolve:"_resolveFull",data:{resolveDefault:function(i){var f=this.option("TrendType");if(f){i.defaultValue({type:f});return true}}},cast:k},TrendType:{resolve:"_resolveFull",cast:V.parseTrendType},TrendLabel:{resolve:"_resolveFull",cast:String},NullInterpolationMode:{resolve:"_resolveFull",cast:V.parseNullInterpolationMode,value:"none"}});ad.type("pvc.visual.CategoricalPlot",V.visual.CartesianPlot).add({_getOptionsDefinition:function(){return V.visual.CategoricalPlot.optionsDef}});V.visual.CategoricalPlot.optionsDef=ad.create(V.visual.CartesianPlot.optionsDef,{Stacked:{resolve:"_resolveFull",cast:Boolean,value:false},BaseRole:{value:"category"},OrthoRole:{value:"value"}});ad.type("pvc.visual.BarPlotAbstract",V.visual.CategoricalPlot).add({_getOptionsDefinition:function(){return V.visual.BarPlotAbstract.optionsDef}});V.visual.BarPlotAbstract.optionsDef=ad.create(V.visual.CategoricalPlot.optionsDef,{BarSizeRatio:{resolve:"_resolveFull",cast:function(f){f=V.castNumber(f);if(f==null){f=1}else{if(f<0.05){f=0.05}else{if(f>1){f=1}}}return f},value:0.9},BarSizeMax:{resolve:"_resolveFull",data:{resolveV1:function(f){this._specifyChartOption(f,"maxBarSize");return true}},cast:function(f){f=V.castNumber(f);if(f==null){f=Infinity}else{if(f<1){f=1}}return f},value:2000},BarStackedMargin:{resolve:"_resolveFull",cast:function(f){f=V.castNumber(f);if(f!=null&&f<0){f=0}return f},value:0},OverflowMarkersVisible:{resolve:"_resolveFull",cast:Boolean,value:true},ValuesAnchor:{value:"center"}});ad.type("pvc.visual.BarPlot",V.visual.BarPlotAbstract).add({type:"bar"});ad.type("pvc.visual.NormalizedBarPlot",V.visual.BarPlotAbstract).add({type:"bar",_getOptionsDefinition:function(){return V.visual.NormalizedBarPlot.optionsDef}});V.visual.NormalizedBarPlot.optionsDef=ad.create(V.visual.BarPlotAbstract.optionsDef,{Stacked:{resolve:null,value:true}});ad.type("pvc.visual.WaterfallPlot",V.visual.BarPlotAbstract).add({type:"water",_getOptionsDefinition:function(){return V.visual.WaterfallPlot.optionsDef}});V.visual.WaterfallPlot.optionsDef=ad.create(V.visual.BarPlotAbstract.optionsDef,{Stacked:{resolve:null,value:true},TotalLineLabel:{resolve:"_resolveFull",cast:String,value:"Accumulated"},TotalValuesVisible:{resolve:"_resolveFull",data:{resolveDefault:function(f){f.defaultValue(this.option("ValuesVisible"));return true}},cast:Boolean},Direction:{resolve:"_resolveFull",cast:V.parseWaterDirection,value:"down"},AreasVisible:{resolve:"_resolveFull",cast:Boolean,value:true},AllCategoryLabel:{resolve:"_resolveFull",cast:String,value:"All"}});ad.type("pvc.visual.PointPlot",V.visual.CategoricalPlot).add({type:"point",_getOptionsDefinition:function(){return V.visual.PointPlot.optionsDef}});V.visual.PointPlot.optionsDef=ad.create(V.visual.CategoricalPlot.optionsDef,{DotsVisible:{resolve:"_resolveFull",data:aX("Dots",true),cast:Boolean,value:false},LinesVisible:{resolve:"_resolveFull",data:aX("Lines",true),cast:Boolean,value:false},AreasVisible:{resolve:"_resolveFull",data:aX("Areas",false),cast:Boolean,value:false},ValuesAnchor:{value:"right"}});ad.type("pvc.visual.MetricXYPlot",V.visual.CartesianPlot).add({_getOptionsDefinition:function(){return V.visual.MetricXYPlot.optionsDef}});V.visual.MetricXYPlot.optionsDef=ad.create(V.visual.CartesianPlot.optionsDef,{BaseRole:{value:"x"},OrthoAxis:{resolve:null},OrthoRole:{value:"y"}});ad.type("pvc.visual.MetricPointPlot",V.visual.MetricXYPlot).add({type:"scatter",_getOptionsDefinition:function(){return V.visual.MetricPointPlot.optionsDef}});V.visual.MetricPointPlot.optionsDef=ad.create(V.visual.MetricXYPlot.optionsDef,{SizeRole:{resolve:"_resolveFixed",value:"size"},SizeAxis:{resolve:"_resolveFixed",value:1},Shape:{resolve:"_resolveFull",cast:V.parseShape,value:"circle"},NullShape:{resolve:"_resolveFull",cast:V.parseShape,value:"cross"},DotsVisible:{resolve:"_resolveFull",data:al("Dots"),cast:Boolean,value:false},LinesVisible:{resolve:"_resolveFull",data:al("Lines"),cast:Boolean,value:false},ValuesAnchor:{value:"right"},ValuesMask:{value:"{x},{y}"}});ad.type("pvc.visual.PiePlot",V.visual.Plot).add({type:"pie",_getOptionsDefinition:function(){return V.visual.PiePlot.optionsDef}});V.visual.PiePlot.optionsDef=ad.create(V.visual.Plot.optionsDef,{ActiveSliceRadius:{resolve:"_resolveFull",cast:au.parse,value:new au(0.05)},ExplodedSliceRadius:{resolve:"_resolveFull",cast:au.parse,value:0},ExplodedSliceIndex:{resolve:"_resolveFull",cast:V.castNumber,value:null},ValuesAnchor:{cast:V.parseAnchorWedge,value:"outer"},ValuesVisible:{value:true},ValuesLabelStyle:{resolve:function(f){if(this.chart.compatVersion()<=1){f.specify("inside");return true}return this._resolveFull(f)},cast:function(f){switch(f){case"inside":case"linked":return f}V.debug>=2&&V.log("[Warning] Invalid 'ValuesLabelStyle' value: '"+f+"'.");return"linked"},value:"linked"},ValuesMask:{resolve:"_resolveFull",data:{resolveDefault:function(f){f.defaultValue(this.option("ValuesLabelStyle")==="linked"?"{value} ({value.percent})":"{value}");return true}}},LinkInsetRadius:{resolve:"_resolveFull",cast:au.parse,value:new au(0.05)},LinkOutsetRadius:{resolve:"_resolveFull",cast:au.parse,value:new au(0.025)},LinkMargin:{resolve:"_resolveFull",cast:au.parse,value:new au(0.025)},LinkHandleWidth:{resolve:"_resolveFull",cast:V.castNumber,value:0.5},LinkLabelSize:{resolve:"_resolveFull",cast:au.parse,value:new au(0.15)},LinkLabelSpacingMin:{resolve:"_resolveFull",cast:V.castNumber,value:0.5}});ad.type("pvc.visual.HeatGridPlot",V.visual.CategoricalPlot).add({type:"heatGrid",_getOptionsDefinition:function(){return V.visual.HeatGridPlot.optionsDef}});V.visual.HeatGridPlot.optionsDef=ad.create(V.visual.CategoricalPlot.optionsDef,{SizeRole:{value:"size"},SizeAxis:{value:1},UseShapes:{resolve:"_resolveFull",cast:Boolean,value:false},Shape:{resolve:"_resolveFull",cast:V.parseShape,value:"square"},NullShape:{resolve:"_resolveFull",cast:V.parseShape,value:"cross"},ValuesVisible:{getDefault:function(){return !this.option("UseShapes")},value:null},ValuesMask:{value:null},ValuesAnchor:{value:"center"},OrthoRole:{value:"series"},OrthoAxis:{resolve:null},NullInterpolationMode:{resolve:null,value:"none"},Stacked:{resolve:null,value:false}});ad.type("pvc.visual.BoxPlot",V.visual.CategoricalPlot).add({type:"box",_getOptionsDefinition:function(){return V.visual.BoxPlot.optionsDef}});V.visual.BoxPlot.optionsDef=ad.create(V.visual.CategoricalPlot.optionsDef,{Stacked:{resolve:null,value:false},OrthoRole:{value:["median","lowerQuartil","upperQuartil","minimum","maximum"]},BoxSizeRatio:{resolve:"_resolveFull",cast:function(f){f=V.castNumber(f);if(f==null){f=1}else{if(f<0.05){f=0.05}else{if(f>1){f=1}}}return f},value:1/3},BoxSizeMax:{resolve:"_resolveFull",data:{resolveV1:function(f){this._specifyChartOption(f,"maxBoxSize");return true}},cast:function(f){f=V.castNumber(f);if(f==null){f=Infinity}else{if(f<1){f=1}}return f},value:Infinity}});ad.type("pvc.visual.BulletPlot",V.visual.Plot).add({type:"bullet",_getOptionsDefinition:function(){return V.visual.BulletPlot.optionsDef}});V.visual.BulletPlot.optionsDef=ad.create(V.visual.Plot.optionsDef,{ValuesVisible:{value:true},ColorRole:{value:null}});ad.type("pvc.visual.TreemapColorDataCell",V.visual.DataCell).init(function(){this.base.apply(this,arguments);var f=this.role.grouping;this._valueProp=!f||f.isSingleDimension?"value":"absKey"}).add({domainItemDatas:function(){var f=this.domainData();f=ad.query((f||undefined)&&f.nodes());if(this.plot.option("ColorMode")==="byparent"){return f.where(function(i){return(!i.parent||i.value!=null)&&i.children().any(function(u){return u.value!=null&&u.children().prop("value").all(ad.nully)})})}return f.where(function(i){if(!i.childCount()){return !i.parent||i.value!=null}return i.value!=null&&!i.children().prop("value").any(ad.notNully)})},domainItemDataValue:function(f){return ad.nullyTo(f[this._valueProp],"")},_resolveDomainData:function(){var i=this.role;if(i&&i.isBound()){var f=this.plot.chart.partData(this.dataPartValue);if(f){return i.select(f)}}return null}});ad.type("pvc.visual.TreemapPlot",V.visual.Plot).add({type:"treemap",_getOptionsDefinition:function(){return V.visual.TreemapPlot.optionsDef},collectDataCells:function(i){this.base(i);var f=this.option("SizeRole");f&&i.push(new V.visual.DataCell(this,"size",this.option("SizeAxis")-1,f,this.option("DataPart")))},_getColorDataCell:function(){var f=this.option("ColorRole");if(f){return new V.visual.TreemapColorDataCell(this,"color",this.option("ColorAxis")-1,f,this.option("DataPart"))}}});V.visual.TreemapPlot.optionsDef=ad.create(V.visual.Plot.optionsDef,{SizeRole:{resolve:"_resolveFixed",value:"size"},SizeAxis:{resolve:"_resolveFixed",value:1},ValuesAnchor:{cast:V.parseAnchor,value:"center"},ValuesVisible:{value:true},ValuesMask:{resolve:"_resolveFull",value:"{category}"},ValuesOptimizeLegibility:{value:true},LayoutMode:{resolve:"_resolveFull",cast:V.parseTreemapLayoutMode,value:"squarify"},ColorMode:{resolve:"_resolveFull",cast:V.parseTreemapColorMode,value:"byparent"},RootCategoryLabel:{resolve:"_resolveFull",cast:String,value:"All"}});ad.type("pvc.Abstract").init(function(){this._syncLog()}).add({invisibleLineWidth:0.001,defaultLineWidth:1.5,_logInstanceId:null,_syncLog:function(){if(V.debug&&typeof console!=="undefined"){var f=this._getLogInstanceId();["log","info",["trace","debug"],"error","warn",["group","groupCollapsed"],"groupEnd"].forEach(function(i){i=i instanceof Array?i:[i,i];N(this,"_"+i[0],i[1],f)},this)}},_getLogInstanceId:function(){return this._logInstanceId||(this._logInstanceId=this._processLogInstanceId(this._createLogInstanceId()))},_createLogInstanceId:function(){return""+this.constructor},_processLogInstanceId:function(f){f=f.substr(0,30);if(f.length<30){f+=ad.array.create(30-f.length," ").join("")}return"["+f+"]"}});ad.scope(function(){var i=V.Abstract.prototype,f=function(){this._syncLog()};["log","info","trace","error","warn","group","groupEnd"].forEach(function(u){i["_"+u]=f})});ad.type("pvc.BaseChart",V.Abstract).add(V.visual.Interactive).init(function(i){var f=i,u=this.parent=ad.get(i,"parent")||null;if(u){i||ad.fail.argumentRequired("options")}else{i=ad.mixin.copy({},this.defaults,i)}this.options=i;if(u){this.root=u.root;this.smallColIndex=i.smallColIndex;this.smallRowIndex=i.smallRowIndex}else{this.root=this}this.base();V.debug>=3&&this._info("NEW CHART\n"+V.logSeparator.replace(/-/g,"=")+"\n  DebugLevel: "+V.debug);if(V.debug>=3&&!u&&f){this._info("OPTIONS:\n",f);V.debug>=5&&this._trace(V.stringify(i,{ownOnly:false,funs:true}))}u&&u._addChild(this);this._constructData(i);this._constructVisualRoles(i)}).add({_disposed:false,_animatable:false,parent:null,children:null,root:null,isCreated:false,_createVersion:0,renderCallback:undefined,multiChartPageCount:null,multiChartPageIndex:null,_multiChartOverflowClipped:false,left:0,top:0,width:null,height:null,margins:null,paddings:null,_allowV1SecondAxis:false,compatVersion:function(f){return(f||this.options).compatVersion},_createLogInstanceId:function(){return""+this.constructor+this._createLogChildSuffix()},_createLogChildSuffix:function(){return this.parent?" ("+(this.smallRowIndex+1)+","+(this.smallColIndex+1)+")":""},_addChild:function(f){f.parent===this||ad.assert("Not a child of this chart.");this.children.push(f)},_create:function(f){this._createPhase1(f);this._createPhase2(f)},_createPhase1:function(f){this._createVersion++;this.isCreated=false;V.debug>=3&&this._log("Creating");this.children=[];this.parent||V.removeTipsyLegends();this._processOptions();this.parent||this._checkNoDataI();if(!this.parent&&!this.data){this._initVisualRoles();this._bindVisualRolesPreI();this._complexTypeProj=this._createComplexTypeProject();this._bindVisualRolesPreII()}this._initData(f);this.parent||this._checkNoDataII();f=this.visualRoles.multiChart.isBound();this._initPlots(f);this._initAxes(f);if(this.parent||!f){this._interpolate(f);this._generateTrends(f)}this._setAxesScales(f)},_createPhase2:function(){this._initChartPanels(this.visualRoles.multiChart.isBound());this.isCreated=true},_setSmallLayout:function(i){if(i){var f=this.basePanel;this._setProp("left",i)|this._setProp("top",i)&&f&&ad.set(f.position,"left",this.left,"top",this.top);if(this._setProp("width",i)|this._setProp("height",i)){if(f){f.size=new at(this.width,this.height)}}if(this._setProp("margins",i)&&f){f.margins=new az(this.margins)}if(this._setProp("paddings",i)&&f){f.paddings=new az(this.paddings)}}},_setProp:function(i,f){f=f[i];if(f!=null){this[i]=f;return true}},_processOptions:function(){var f=this.options;if(!this.parent){this.width=f.width;this.height=f.height;this.margins=f.margins;this.paddings=f.paddings}if(this.compatVersion()<=1){f.plot2=this._allowV1SecondAxis&&!!f.secondAxis}this._processOptionsCore(f);this._processExtensionPoints();return f},_processOptionsCore:function(i){if(this.parent){this._ibits=this.parent._ibits;this._tooltipOptions=this.parent._tooltipOptions}else{var f=R.renderer()!=="batik";if(f){f=i.interactive;if(f==null){f=true}}if(f){var F=V.visual.Interactive;f=F.Interactive|F.ShowsInteraction;if(this._processTooltipOptions(i)){f|=F.ShowsTooltip}if(i.animate&&$.support.svg){f|=F.Animatable}var u=false;if(i.selectable){f|=F.Selectable;switch(V.parseSelectionMode(i.selectionMode)){case"rubberband":f|=F.SelectableByRubberband|F.SelectableByClick;break;case"focuswindow":f|=F.SelectableByFocusWindow;u=true;break}}if(!u&&V.parseClearSelectionMode(i.clearSelectionMode)==="emptyspaceclick"){f|=F.Unselectable}if(i.hoverable){f|=F.Hoverable}if(i.clickable){f|=F.Clickable|F.DoubleClickable}}else{f=0}this._ibits=f}},_tooltipDefaults:{gravity:"s",delayIn:200,delayOut:80,offset:2,opacity:0.9,html:true,fade:true,useCorners:false,arrowVisible:true,followMouse:false,format:undefined},_processTooltipOptions:function(i){var f=this.compatVersion()<=1,F=i.tooltip,u=i.tooltipEnabled;if(u==null){if(F){u=F.enabled}if(u==null){if(f){u=i.showTooltips}if(u==null){u=true}}}if(u){F||(F={});f&&this._importV1TooltipOptions(F,i);ad.eachOwn(this._tooltipDefaults,function(M,L){var I=i["tooltip"+ad.firstUpperCase(L)];if(I!==undefined){F[L]=I}else{if(F[L]===undefined){F[L]=M}}})}else{F={}}this._tooltipOptions=F;return u},_importV1TooltipOptions:function(i,f){if(f=f.tipsySettings){this.extend(f,"tooltip");for(var u in f){if(i[u]===undefined){i[u]=f[u]}}if(i.html==null){i.html=false}}},render:function(i,f,F){var u;V.debug>1&&V.group("CCC RENDER");this._suspendSelectionUpdate();try{this.useTextMeasureCache(function(){try{for(;;){if(!this.isCreated||f){this._create({reloadData:F})}else{!this.parent&&this.isCreated&&V.removeTipsyLegends()}this.basePanel.render({bypassAnimation:i,recreate:f});if(!this._isMultiChartOverflowClip){this._isMultiChartOverflowClipRetry=false;break}f=true;F=false;this._isMultiChartOverflowClipRetry=true;this._isMultiChartOverflowClip=false;this._multiChartOverflowClipped=true}}catch(I){if(I instanceof NoDataException){V.debug>1&&this._log("No data found.");this._addErrorPanelMessage("No data found",true)}else{if(I instanceof InvalidDataException){V.debug>1&&this._log(I.message);this._addErrorPanelMessage(I.message,true)}else{u=true;V.logError(I.message);V.debug>0&&this._addErrorPanelMessage("Error: "+I.message,false)}}}})}finally{u||this._resumeSelectionUpdate();V.debug>1&&V.groupEnd()}return this},_addErrorPanelMessage:function(i,f){var u=this.options;u=(new R.Panel).canvas(u.canvas).width(this.width).height(this.height);i=u.anchor("center").add(R.Label).text(i);f&&this.extend(i,"noDataMessage");u.render()},useTextMeasureCache:function(i,f){var u=this.root;u=u._textMeasureCache||(u._textMeasureCache=R.Text.createCache());return R.Text.usingCache(u,i,f||this)},animate:function(i,f){return this.basePanel.animate(i,f)},animatingStart:function(){return this.basePanel.animatingStart()},animatable:function(){return this._animatable&&this.base()},isOrientationVertical:function(f){return(f||this.options.orientation)===V.orientation.vertical},isOrientationHorizontal:function(f){return(f||this.options.orientation)===V.orientation.horizontal},dispose:function(){if(!this._disposed){this._disposed=true}},defaults:{width:400,height:300,orientation:"vertical",ignoreNulls:true,crosstabMode:true,isMultiValued:false,seriesInRows:false,groupedLabelSep:undefined,animate:true,titlePosition:"top",titleAlign:"center",legend:false,legendPosition:"bottom",v1StyleTooltipFormat:function(i,f,F,u){return i+", "+f+":  "+this.chart.options.valueFormat(F)+(u&&u.percent?" ("+u.percent.label+")":"")},valueFormat:ad.scope(function(){var f=R.Format.number().fractionDigits(0,2);return function(i){return f.format(i)}}),percentValueFormat:ad.scope(function(){var f=R.Format.number().fractionDigits(0,1);return function(i){return f.format(i*100)+"%"}}),clickable:false,doubleClickMaxDelay:300,hoverable:false,selectable:false,selectionMode:"rubberband",ctrlSelectMode:true,clearSelectionMode:"emptySpaceClick",compatVersion:Infinity}});V.BaseChart.add({visualRoles:null,visualRoleList:null,_serRole:null,_dataPartRole:null,_measureVisualRoles:null,visualRole:function(i){var f=ad.getOwn(this.visualRoles,i);if(!f){throw ad.error.operationInvalid("roleName","There is no visual role with name '{0}'.",[i])}return f},measureVisualRoles:function(){return this._measureVisualRoles},measureDimensionsNames:function(){return ad.query(this._measureVisualRoles).select(function(f){return f.firstDimensionName()}).where(ad.notNully).array()},_constructVisualRoles:function(){var f=this.parent;if(f){this.visualRoles=f.visualRoles;this.visualRoleList=f.visualRoleList;this._measureVisualRoles=f._measureVisualRoles;["_multiChartRole","_serRole","_colorRole","_dataPartRole"].forEach(function(i){var u=f[i];if(u){this[i]=u}},this)}else{this.visualRoles={};this.visualRoleList=[];this._measureVisualRoles=[]}},_hasDataPartRole:ad.fun.constant(false),_getSeriesRoleSpec:ad.fun.constant(null),_getColorRoleSpec:ad.fun.constant(null),_addVisualRole:function(i,f){f=ad.set(f,"index",this.visualRoleList.length);f=new V.visual.Role(i,f);this.visualRoleList.push(f);this.visualRoles[i]=f;f.isMeasure&&this._measureVisualRoles.push(f);return f},_initVisualRoles:function(){this._multiChartRole=this._addVisualRole("multiChart",{defaultDimension:"multiChart*",requireIsDiscrete:true});if(this._hasDataPartRole()){this._dataPartRole=this._addVisualRole("dataPart",{defaultDimension:"dataPart",requireSingleDimension:true,requireIsDiscrete:true,dimensionDefaults:{isHidden:true,comparer:ad.compare}})}var f=this._getSeriesRoleSpec();if(f){this._serRole=this._addVisualRole("series",f)}if(f=this._getColorRoleSpec()){this._colorRole=this._addVisualRole("color",f)}},_assertUnboundRoleIsOptional:function(f){if(f.isRequired){throw ad.error.operationInvalid("Chart type requires unassigned role '{0}'.",[f.name])}},_bindVisualRolesPreI:function(){ad.eachOwn(this.visualRoles,function(L){L.setIsReversed(false)});var i=[],f=this.options,I=f.visualRoles;this.visualRoleList.forEach(function(M){M=M.name;var L=f[M+"Role"];if(L!==undefined){if(!I){I=f.visualRoles={}}if(I[M]===undefined){I[M]=L}}});var F;if(I){F={};var u=ad.query(ad.keys(I)).select(this.visualRole,this).array();u.sort(function(M,L){return M.index-L.index});u.forEach(function(Y){var X=Y.name,O=I[X],M,L;if(ad.object.is(O)){ad.nullyTo(O.isReversed,false)&&Y.setIsReversed(true);if((L=O.from)&&L!==X){X=this.visualRoles[L]||ad.fail.operationInvalid("Source role '{0}' is not supported by the chart type.",[L]);Y.setSourceRole(X);i.push(Y)}else{M=O.dimensions}}else{M=O}if(M!==undefined){M||this._assertUnboundRoleIsOptional(Y);M=V.data.GroupingSpec.parse(M);Y.preBind(M);M.dimensions().each(function(Z){if(ad.hasOwn(F,Z.name)){delete F[Z.name]}else{F[Z.name]=Y}})}},this)}this._sourcedRoles=i;this._dimsBoundToSingleRole=F},_bindVisualRolesPreII:function(){var i=this._dimsBoundToSingleRole;if(i){delete this._dimsBoundToSingleRole;ad.eachOwn(i,this._setRoleBoundDimensionDefaults,this)}var f=this._sourcedRoles;delete this._sourcedRoles;ad.query(this.visualRoleList).where(function(u){return u.defaultSourceRoleName&&!u.sourceRole&&!u.isPreBound()}).each(function(F){var u=this.visualRoles[F.defaultSourceRoleName];if(u){F.setSourceRole(u,true);f.push(F)}},this);f.forEach(function(F){var u=F.sourceRole;u.isReversed&&F.setIsReversed(!F.isReversed);!F.defaultDimensionName&&u.isPreBound()&&F.preBind(u.preBoundGrouping())})},_setRoleBoundDimensionDefaults:function(i,f){this._complexTypeProj.setDimDefaults(f,i.dimensionDefaults)},_bindVisualRolesPostI:function(){function bb(bg,bh){ad.array.lazy(i,bg).push(bh)}function ab(bg){return F.hasDim(bg)}function Z(bg,bh){ad.array.is(bh)?bh.forEach(function(bi){bb(bi,bg)}):bb(bh,bg);bg.setSourceRole(null);bg.preBind(V.data.GroupingSpec.parse(bh))}function Y(bg,bh){if(bh.length){bg.requireSingleDimension?Z(bg,bh[0]):Z(bg,bh)}}function X(bg,bh){F.setDim(bh,{isHidden:true});Z(bg,bh)}function O(bg){u._assertUnboundRoleIsOptional(bg);bg.bind(null);bg.setSourceRole(null)}function M(bg){bg.preBoundGrouping().dimensionNames().forEach(bb)}function L(bh){if(bh.sourceRole&&!bh.isDefaultSourceRole){f.push(bh)}else{var bi=bh.defaultDimensionName;if(bi){var bg=bi.match(/^(.*?)(\*)?$/)||ad.fail.argumentInvalid("defaultDimensionName");bi=bg[1];if(bg[2]){if(bg=F.groupDimensionsNames(bi)){Y(bh,bg);return}}else{if(ab(bi)){Z(bh,bi);return}}if(bh.autoCreateDimension){X(bh,bi)}else{bh.sourceRole?f.push(bh):O(bh)}}else{bh.sourceRole?f.push(bh):O(bh)}}}function I(bg){var bh=bg.sourceRole;bh.isPreBound()?bg.preBind(bh.preBoundGrouping()):O(bg)}var u=this,F=u._complexTypeProj,i={},f=[];ad.query(u.visualRoleList).where(function(bg){return bg.isPreBound()}).each(M);ad.query(u.visualRoleList).where(function(bg){return !bg.isPreBound()}).each(L);f.forEach(I);ad.query(ad.ownKeys(i)).where(function(bg){return i[bg].length===1}).each(function(bg){u._setRoleBoundDimensionDefaults(i[bg][0],bg)})},_bindVisualRolesPostII:function(f){ad.query(this.visualRoleList).where(function(i){return i.isPreBound()}).each(function(i){i.postBind(f)})},_logVisualRoles:function(){var i=ad.ownKeys(this.visualRoles),f=Math.max(10,ad.query(i).select(function(F){return F.length}).max());i=ad.string.padRight("VisualRole",f)+" < Dimension(s)";var u=["VISUAL ROLES MAP SUMMARY",V.logSeparator,i,ad.string.padRight("",f+1,"-")+"+--------------"];ad.eachOwn(this.visualRoles,function(I,F){u.push(ad.string.padRight(F,f)+" | "+(I.grouping||"-"))});u.push("");this._log(u.join("\n"))},_getDataPartDimName:function(){var i=this._dataPartRole;if(i){if(i.isBound()){return i.firstDimensionName()}var f=i.preBoundGrouping();if(f){return f.firstDimensionName()}return i.defaultDimensionName}}});V.BaseChart.add({dataEngine:null,data:null,_partData:null,_visibleDataCache:null,resultset:[],metadata:[],_constructData:function(f){if(this.parent){this.dataEngine=this.data=f.data||ad.fail.argumentRequired("options.data")}},_checkNoDataI:function(){if(!this.allowNoData&&!this.resultset.length){throw new NoDataException}},_checkNoDataII:function(){if(!this.allowNoData&&(!this.data||!this.data.count())){this.data=null;throw new NoDataException}},_initData:function(i){if(!this.parent){var f=this.data;if(f){if(ad.get(i,"reloadData",true)){this._onReloadData()}else{f.clearVirtuals();f.disposeChildren()}}else{this._onLoadData()}}delete this._partData;delete this._visibleDataCache;V.debug>=3&&this._log(this.data.getInfo())},_onLoadData:function(){var i=this.data,f=this._translation;!i&&!f||ad.assert("Invalid state.");i=this.options;var I=this._getDataPartDimName(),F=this._complexTypeProj||ad.assert("Invalid state."),u=this._createTranslationOptions(I);f=this._translation=this._createTranslation(u);if(V.debug>=3){this._log(f.logSource());this._log(f.logTranslatorType())}f.configureType();I&&!F.isReadOrCalc(I)&&this._addDefaultDataPartCalculation(I);V.debug>=3&&this._log(f.logVItem());this._bindVisualRolesPostI();I=new V.data.ComplexType;F.configureComplexType(I,u);this._bindVisualRolesPostII(I);V.debug>=10&&this._log(I.describe());V.debug>=3&&this._logVisualRoles();i=this.dataEngine=this.data=new V.data.Data({type:I,labelSep:i.groupedLabelSep,keySep:u.separator});F={where:this._getLoadFilter(),isNull:this._getIsNullDatum()};f=f.execute(i);i.load(f,F)},_onReloadData:function(){var i=this.data,f=this._translation;i&&f||ad.assert("Invalid state.");f.setSource(this.resultset);V.debug>=3&&this._log(f.logSource());var u={where:this._getLoadFilter(),isNull:this._getIsNullDatum()};f=f.execute(i);i.load(f,u)},_createComplexTypeProject:function(){var i=this.options,f=new V.data.ComplexTypeProject(i.dimensionGroups),F=i.dimensions;for(var u in F){f.setDim(u,F[u])}if(F=this._getDataPartDimName()){f.setDim(F);this._addPlot2SeriesDataPartCalculation(f,F)}(i=i.calculations)&&i.forEach(function(I){f.setCalc(I)});return f},_getLoadFilter:function(){if(this.options.ignoreNulls){var f=this;return function(i){(i=i.isNull)&&V.debug>=4&&f._info("Datum excluded.");return !i}}},_getIsNullDatum:function(){var i=this.measureDimensionsNames(),f=i.length;if(f){return function(F){F=F.atoms;for(var u=0;u<f;u++){if(F[i[u]].value!=null){return false}}return true}}},_createTranslation:function(f){return new (this._getTranslationClass(f))(this,this._complexTypeProj,this.resultset,this.metadata,f)},_getTranslationClass:function(f){return f.crosstabMode?V.data.CrosstabTranslationOper:V.data.RelationalTranslationOper},_createTranslationOptions:function(ab){var Z=this.options,Y=Z.dataOptions||{},X=Z.dataSeparator;if(X===undefined){X=Y.separator}X||(X="~");var O=Z.dataMeasuresInColumns;if(O===undefined){O=Y.measuresInColumns}var M=Z.dataCategoriesCount;if(M===undefined){M=Y.categoriesCount}var L=Z.dataIgnoreMetadataLabels;if(L===undefined){L=Y.ignoreMetadataLabels}var I=Z.plot2,F=Z.valueFormat,i;if(F&&F!==this.defaults.valueFormat){i=function(bb){return bb!=null?F(bb):""}}var u,f;if(I){if(this._allowV1SecondAxis&&this.compatVersion()<=1){f=Z.secondAxisIdx}else{u=this._serRole!=null&&Z.plot2Series&&ad.array.as(Z.plot2Series);if(!u||!u.length){u=null;f=Z.plot2SeriesIndexes}}u||(f=V.parseDistinctIndexArray(f,-Infinity)||-1)}return{compatVersion:this.compatVersion(),plot2DataSeriesIndexes:f,seriesInRows:Z.seriesInRows,crosstabMode:Z.crosstabMode,isMultiValued:Z.isMultiValued,dataPartDimName:ab,dimensionGroups:Z.dimensionGroups,dimensions:Z.dimensions,readers:Z.readers,measuresIndexes:Z.measuresIndexes,multiChartIndexes:Z.multiChartIndexes,separator:X,measuresInColumns:O,categoriesCount:M,measuresIndex:Y.measuresIndex||Y.measuresIdx,measuresCount:Y.measuresCount||Y.numMeasures,isCategoryTimeSeries:Z.timeSeries,timeSeriesFormat:Z.timeSeriesFormat,valueNumberFormatter:i,ignoreMetadataLabels:L}},_addPlot2SeriesDataPartCalculation:function(Y,X){if(!(this.compatVersion()<=1)){var O=this.options,M=this._serRole;if((O=M!=null&&O.plot2&&O.plot2Series&&ad.array.as(O.plot2Series))&&O.length){var L=false,I=ad.query(O).uniqueIndex(),F,u,i,f;Y.setCalc({names:X,calculation:function(Z,ab){if(!L){if(M.isBound()){F=M.grouping.dimensionNames();u=Z.owner.dimensions(X)}L=true}if(u){Z=V.data.Complex.compositeKey(Z,F);ab[X]=ad.hasOwnProp.call(I,Z)?f||(f=u.intern("1")):i||(i=u.intern("0"))}}})}}},_addDefaultDataPartCalculation:function(i){var f,u;this._complexTypeProj.setCalc({names:i,calculation:function(I,F){f||(f=I.owner.dimensions(i));F[i]=u||(u=f.intern("0"))}})},partData:function(i){var f=this._dataPartRole;if(!this._partData){if(!f||!f.grouping){return this._partData=this.data}this._partData=f.flatten(this.data)}if(!i||!f||!f.grouping){return this._partData}f=f.firstDimensionName();if(ad.array.is(i)){if(i.length>1){return this._partData.where([ad.set({},f,i)])}i=i[0]}var u=this._partData.child(i+"");if(!u){u={v:i};if(i==="trend"){if(i=this._firstTrendAtomProto){u.f=i.f}}u=new V.data.Data({parent:this._partData,atoms:ad.set({},f,u),dimNames:[f],datums:[]})}return u},visibleData:function(i,f){var L=ad.get(f,"ignoreNulls",true),I=ad.get(f,"inverted",false);if(L&&this.options.ignoreNulls){L=false}var F=ad.lazy(this,"_visibleDataCache");I=I+"|"+L+"|"+i;var u=F[I];if(!u){f=f?ObjectFactory.create(f):{};f.ignoreNulls=L;u=F[I]=this._createVisibleData(i,f)}return u},_createVisibleData:function(i,f){i=this.partData(i);if(!i){return null}f=ad.get(f,"ignoreNulls");var u=this._serRole;return u&&u.grouping?u.flatten(i,{visible:true,isNull:f?false:null}):i},_generateTrends:function(){this._dataPartRole&&ad.query(ad.own(this.axes)).selectMany(ad.propGet("dataCells")).where(ad.propGet("trend")).distinct(function(f){return f.role.name+"|"+(f.dataPartValue||"")}).each(this._generateTrendsDataCell,this)},_interpolate:function(){ad.query(ad.own(this.axes)).selectMany(ad.propGet("dataCells")).where(function(f){f=f.nullInterpolationMode;return !!f&&f!=="none"}).distinct(function(f){return f.role.name+"|"+(f.dataPartValue||"")}).each(this._interpolateDataCell,this)},_interpolateDataCell:function(){},_generateTrendsDataCell:function(){},setData:function(i,f){this.setResultset(i&&i.resultset);this.setMetadata(i&&i.metadata);$.extend(this.options,f);return this},setResultset:function(f){!this.parent||ad.fail.operationInvalid("Can only set resultset on root chart.");this.resultset=f||[];this.resultset.length||this._warn("Resultset is empty");return this},setMetadata:function(f){!this.parent||ad.fail.operationInvalid("Can only set metadata on root chart.");this.metadata=f||[];this.metadata.length||this._warn("Metadata is empty");return this}});V.BaseChart.add({_initPlots:function(f){this.plotPanelList=null;if(this.parent){f=this.root;this.plots=f.plots;this.plotList=f.plotList;this.plotsByType=f.plotsByType}else{this.plots={};this.plotList=[];this.plotsByType={};this._initPlotsCore(f)}},_initPlotsCore:function(){},_addPlot:function(i){var f=this.plotsByType,M=this.plots,L=i.type,I=i.index,F=i.name,u=i.id;if(F&&ad.hasOwn(M,F)){throw ad.error.operationInvalid("Plot name '{0}' already taken.",[F])}if(ad.hasOwn(M,u)){throw ad.error.operationInvalid("Plot id '{0}' already taken.",[u])}f=ad.array.lazy(f,L);if(ad.hasOwn(f,I)){throw ad.error.operationInvalid("Plot index '{0}' of type '{1}' already taken.",[I,L])}i.globalIndex=this.plotList.length;f[I]=i;this.plotList.push(i);M[u]=i;if(F){M[F]=i}},_collectPlotAxesDataCells:function(i,f){var u=[];i.collectDataCells(u);u.length&&ad.query(u).where(function(F){return F.isBound()}).each(function(I){var F=ad.array.lazy(f,I.axisType);ad.array.lazy(F,I.axisIndex).push(I)})},_addPlotPanel:function(f){ad.lazy(this,"plotPanels")[f.plot.id]=f;ad.array.lazy(this,"plotPanelList").push(f)},_createPlotPanels:function(){throw ad.error.notImplemented()}});V.BaseChart.add({colors:null,axes:null,axesList:null,axesByType:null,_axisClassByType:{color:V.visual.ColorAxis,size:V.visual.SizeAxis,base:y,ortho:y},_axisCreateWhere:{color:1,size:2,base:3,ortho:3},_axisCreationOrder:["color","size","base","ortho"],_axisCreateIfUnbound:{},_initAxes:function(i){this.axes={};this.axesList=[];this.axesByType={};delete this._rolesColorScale;var f;if(this.parent){f=this.root._dataCellsByAxisTypeThenIndex}else{f={};this.plotList.forEach(function(F){this._collectPlotAxesDataCells(F,f)},this);this._fixTrendsLabel(f);this._dataCellsByAxisTypeThenIndex=f}var u=0;this.parent||(u|=1);if(this.parent||!i){u|=2}this._axisCreationOrder.forEach(function(L){if((this._axisCreateWhere[L]&u)!==0){var I,F=f[L];if(F){(I=this._axisClassByType[L])&&F.forEach(function(O,M){new I(this,L,M)},this)}else{if(this._axisCreateIfUnbound[L]){(I=this._axisClassByType[L])&&new I(this,L,0)}}}},this);this.parent&&this.root.axesList.forEach(function(F){ad.hasOwn(this.axes,F.id)||this._addAxis(F)},this);ad.eachOwn(f,function(I,F){this._axisCreateWhere[F]&u&&I.forEach(function(M,L){L=this.axes[V.buildIndexedId(F,L)];L.isBound()||L.bind(M)},this)},this)},_fixTrendsLabel:function(i){if(this._getDataPartDimName()){var f=ad.query(ad.ownKeys(i)).selectMany(function(F){return i[F]}).selectMany().first(function(F){return !!F.trend});if(f){var u=V.trends.get(f.trend.type).dataPartAtom;f=f.trend.label;if(f===undefined){f=u.f}this._firstTrendAtomProto={v:u.v,f:f}}else{delete this._firstTrendAtomProto}}},_addAxis:function(i){this.axes[i.id]=i;if(i.chart===this){i.axisIndex=this.axesList.length}this.axesList.push(i);var f=ad.array.lazy(this.axesByType,i.type),u=f.count||0;i.typeIndex=u;f[i.index]=i;if(!u){f.first=i}f.count=u+1;i.type==="color"&&i.isBound()&&this._onColorAxisScaleSet(i);return this},_getAxis:function(i,f){if((i=this.axesByType[i])&&f!=null&&+f>=0){return i[f]}},_setAxesScales:function(){if(!this.parent){var f=this.axesByType.color;f&&f.forEach(function(i){if(i.isBound()){this._createColorAxisScale(i);this._onColorAxisScaleSet(i)}},this)}},_createAxisScale:function(i){var f=this._createScaleByAxis(i);f.isNull&&V.debug>=3&&this._log(ad.format("{0} scale for axis '{1}'- no data",[i.scaleType,i.id]));return i.setScale(f).scale},_createScaleByAxis:function(f){return this["_create"+ad.firstUpperCase(f.scaleType)+"ScaleByAxis"].call(this,f)},_createDiscreteScaleByAxis:function(i){var f=this.visibleData(i.dataCells.map(function(u){return u.dataPartValue}),{ignoreNulls:false});f=f&&i.role.flatten(f);i=new R.Scale.ordinal;if(!f||!f.count()){i.isNull=true}else{f=f.children().select(function(u){return ad.nullyTo(u.value,"")}).array();i.domain(f)}return i},_createTimeSeriesScaleByAxis:function(i){var f=this._getContinuousVisibleExtentConstrained(i);i=new R.Scale.linear;if(f){var F=f.min,u=f.max;(function(){var I=u-F;if(I&&Math.abs(I)<1){u=F=new Date(Math.round((F+u)/2));I=0}if(I){if(I<0){if(!f.maxLocked||f.minLocked){u=new Date(F.getTime()+V.time.intervals.h)}else{F=new Date(u.getTime()-V.time.intervals.h)}}}else{f.minLocked||(F=new Date(F.getTime()-V.time.intervals.h));if(!f.maxLocked||f.minLocked){u=new Date(u.getTime()+V.time.intervals.h)}}})();i.domain(F,u);i.minLocked=f.minLocked;i.maxLocked=f.maxLocked}else{i.isNull=true}return i},_createNumericScaleByAxis:function(i){var f=this._getContinuousVisibleExtentConstrained(i),L=new R.Scale.linear;if(f){var I=f.min,F=f.max,u=function(){var M=F-I;if(M&&Math.abs(M)<=1e-10){I=(I+F)/2;I=F=+I.toFixed(10);M=0}if(M){if(M<0){if(!f.maxLocked||f.minLocked){F=Math.abs(I)>1e-10?I*1.01:+0.1}else{I=Math.abs(F)>1e-10?F*0.99:-0.1}}}else{f.minLocked||(I=Math.abs(I)>1e-10?I*0.99:-0.1);if(!f.maxLocked||f.minLocked){F=Math.abs(F)>1e-10?F*1.01:+0.1}}};u();if(i.option("OriginIsZero")){if(I===0){f.minLocked=true}else{if(F===0){f.maxLocked=true}else{if(I*F>0){if(I>0){if(!f.minLocked){f.minLocked=true;I=0}}else{if(!f.maxLocked){f.maxLocked=true;F=0}}}}}}u();L.domain(I,F);L.minLocked=f.minLocked;L.maxLocked=f.maxLocked}else{L.isNull=true}return L},_warnSingleContinuousValueRole:function(f){f.grouping.isSingleDimension||this._warn("A linear scale can only be obtained for a single dimension role.");f.grouping.isDiscrete()&&this._warn(ad.format("The single dimension of role '{0}' should be continuous.",[f.name]))},_getContinuousVisibleExtentConstrained:function(i,f,M){var L,I=function(){return L||(L=this.data.owner.dimensions(i.role.grouping.firstDimensionName()))},F=false,u=false;if(f==null){f=i.option("FixedMin");f=I.call(this).read(f);if(F=f!=null){f=f.value}}if(M==null){M=i.option("FixedMax");M=I.call(this).read(M);if(u=M!=null){M=M.value}}if(f==null||M==null){I=this._getContinuousVisibleExtent(i);if(!I){return null}if(f==null){f=I.min}if(M==null){M=I.max}}return{min:f,max:M,minLocked:F,maxLocked:u}},_getContinuousVisibleExtent:function(i){var f=i.dataCells;if(f.length===1){return this._getContinuousVisibleCellExtent(i,f[0])}return ad.query(f).select(function(u){return this._getContinuousVisibleCellExtent(i,u)},this).reduce(V.unionExtents,null)},_getContinuousVisibleCellExtent:function(i,f){var u=f.role;this._warnSingleContinuousValueRole(u);if(u.name==="series"){throw ad.error.notImplemented()}i=i.scaleUsesAbs();if(f=(f=this.visibleData(f.dataPartValue))&&f.dimensions(u.firstDimensionName()).extent({abs:i})){u=f.min.value;f=f.max.value;return{min:i?Math.abs(u):u,max:i?Math.abs(f):f}}},_createColorAxisScale:function(i){var f;if(i.dataCells){f=i.scaleType==="discrete"?this._createDiscreteColorAxisScale(i):this._createContinuousColorAxisScale(i)}return i.setScale.apply(i,f)},_createDiscreteColorAxisScale:function(i){var f=ad.query(i.dataCells).selectMany(function(u){return u.domainItemValues()}).array();i.domainValues=f;return[i.scheme()(f),true]},_createContinuousColorAxisScale:function(i){if(i.dataCells.length===1){this._warnSingleContinuousValueRole(i.role);var f=this.root.visibleData(i.dataCell.dataPartValue),u=i.option("NormByCategory");f={type:i.option("ScaleType"),colors:i.option("Colors")().range(),colorDomain:i.option("Domain"),colorMin:i.option("Min"),colorMax:i.option("Max"),colorMissing:i.option("Missing"),data:f,colorDimension:i.role.firstDimensionName(),normPerBaseCategory:u};if(!u){return[a0(f)]}i.scalesByCateg=c(f)}return[]},_onColorAxisScaleSet:function(f){switch(f.index){case 0:this.colors=f.scheme();break;case 1:if(this._allowV1SecondAxis){this.secondAxisColor=f.scheme()}break}},_getRoleColorScale:function(f){return ad.lazy(ad.lazy(this,"_rolesColorScale"),f,this._createRoleColorScale,this)},_createRoleColorScale:function(i){function f(M){var L=""+M;ad.hasOwnProp.call(u,L)||(u[L]=F(M))}var I,F,u={};this.axesByType.color.forEach(function(M){var L=M.role;if((L.name===i||L.sourceRole&&L.sourceRole.name===i)&&M.scale&&(M.index===0||M.option.isSpecified("Colors")||M.option.isSpecified("Map"))){F=M.scale;I||(I=F);M.domainValues.forEach(f)}},this);if(!I){return V.createColorScheme()()}F=function(M){var L=""+M;if(ad.hasOwnProp.call(u,L)){return u[L]}M=I(M);return u[L]=M};ad.copy(F,I);return F},_onLaidOut:function(){}});V.BaseChart.add({basePanel:null,titlePanel:null,legendPanel:null,_multiChartPanel:null,_initChartPanels:function(i){this._initBasePanel();this._initTitlePanel();var f=this._initLegendPanel(),u=i&&!this.parent;u&&this._initMultiChartPanel();f&&this._initLegendScenes(f);if(!u){f=this.options;this._createContent({margins:i?f.smallContentMargins:f.contentMargins,paddings:i?f.smallContentPaddings:f.contentPaddings,clickAction:f.clickAction,doubleClickAction:f.doubleClickAction})}},_createContent:function(){},_initBasePanel:function(){var f=this.parent;this.basePanel=new V.BasePanel(this,f&&f._multiChartPanel,{margins:this.margins,paddings:this.paddings,size:{width:this.width,height:this.height}})},_initTitlePanel:function(){var i=this,f=i.options,u=f.title;if(!ad.empty(u)){this.titlePanel=new V.TitlePanel(i,i.basePanel,{title:u,font:f.titleFont,anchor:f.titlePosition,align:f.titleAlign,alignTo:f.titleAlignTo,offset:f.titleOffset,keepInBounds:f.titleKeepInBounds,margins:f.titleMargins,paddings:f.titlePaddings,titleSize:f.titleSize,titleSizeMax:f.titleSizeMax})}},_initLegendPanel:function(){var i=this.options;if(i.legend){var f=new V.visual.Legend(this,"legend",0);return this.legendPanel=new V.LegendPanel(this,this.basePanel,{anchor:f.option("Position"),align:f.option("Align"),alignTo:i.legendAlignTo,offset:i.legendOffset,keepInBounds:i.legendKeepInBounds,size:f.option("Size"),sizeMax:f.option("SizeMax"),margins:f.option("Margins"),paddings:f.option("Paddings"),font:f.option("Font"),scenes:ad.getPath(i,"legend.scenes"),textMargin:i.legendTextMargin,itemPadding:i.legendItemPadding,markerSize:i.legendMarkerSize})}},_getLegendBulletRootScene:function(){return this.legendPanel&&this.legendPanel._getBulletRootScene()},_initMultiChartPanel:function(){var i=this.basePanel,f=this.options;this._multiChartPanel=new V.MultiChartPanel(this,i,{margins:f.contentMargins,paddings:f.contentPaddings});this._multiChartPanel.createSmallCharts();i._children.unshift(i._children.pop())},_coordinateSmallChartsLayout:function(){},_initLegendScenes:function(i){function f(Z,Y){var X=Y.option("LegendClickMode")==="togglevisible",M=Z.domainData();I||(I=i._getBulletRootScene());var O;if(X){if((X=M.atoms[u])&&X.value==="trend"){O="none"}}var ab=I.createGroup({source:M,colorAxis:Y,clickMode:O,extensionPrefix:V.buildIndexedId("",F++)});Z.legendBulletGroupScene=ab;Z.domainItemDatas().each(function(bg){var bb=ab.createItem({source:bg});bg=Z.domainItemDataValue(bg);bb.color=Y.scale(bg)})}var L=this.axesByType.color;if(L){var I,F=0,u=this._getDataPartDimName();ad.query(L).where(function(M){return M.option("LegendVisible")}).each(function(M){M.dataCells&&M.dataCells.forEach(function(O){O.role.isDiscrete()&&f(O,M)})})}}});V.BaseChart.add({_updateSelectionSuspendCount:0,_lastSelectedDatums:null,clearSelections:function(){this.data.owner.clearSelected()&&this.updateSelections();return this},_updatingSelections:function(i,f){this._suspendSelectionUpdate();try{i.call(f||this)}finally{this._resumeSelectionUpdate()}},_suspendSelectionUpdate:function(){if(this===this.root){this._updateSelectionSuspendCount++}else{this.root._suspendSelectionUpdate()}},_resumeSelectionUpdate:function(){if(this===this.root){if(this._updateSelectionSuspendCount>0){--this._updateSelectionSuspendCount||this.updateSelections()}}else{this.root._resumeSelectionUpdate()}},updateSelections:function(i){if(this===this.root){if(this._inUpdateSelections||this._updateSelectionSuspendCount){return this}var f=this._calcSelectedChangedDatums();if(!f){return this}V.removeTipsyLegends();this._inUpdateSelections=true;try{var I=this.options.selectionChangedAction;if(I){var F=this.data.selectedDatums(),u=f.values();I.call(this.basePanel.context(),F,u)}ad.get(i,"render",true)&&this.useTextMeasureCache(function(){this.basePanel.renderInteractive()},this)}finally{this._inUpdateSelections=false}}else{this.root.updateSelections()}return this},_calcSelectedChangedDatums:function(){if(this.data){var i,f=this.data.selectedDatumMap();if(i=this._lastSelectedDatums){i=i.symmetricDifference(f);if(!i.count){return}}else{if(!f.count){return}i=f.clone()}this._lastSelectedDatums=f;return i}},_onUserSelection:function(i){if(!i||!i.length){return i}if(this===this.root){var f=this.options.userSelectionAction;return f?f.call(this.basePanel.context(),i)||i:i}return this.root._onUserSelection(i)}});V.BaseChart.add({_processExtensionPoints:function(){var i;if(this.parent){i=this.parent._components}else{var f=this.options.extensionPoints;i={};if(f){for(var I in f){var F,u;u=I.indexOf("_");if(u>0){F=I.substring(0,u);u=I.substr(u+1);if(F&&u){(ad.getOwn(i,F)||(i[F]=new ad.OrderedMap)).add(u,f[I])}}}}}this._components=i},extend:function(i,f,u){ad.array.is(f)?f.forEach(function(F){this._extendCore(i,F,u)},this):this._extendCore(i,f,u)},_extendCore:function(X,O,M){if(X){var L=ad.getOwn(this._components,O);if(L){if(X.borderPanel){X=X.borderPanel}var I=V.debug>=3?[]:null,F=ad.get(M,"constOnly",false),u=X.wrap,i={tag:V.extensionTag},f=X instanceof ar;L.forEach(function(Y,Z){if(X.isLocked&&X.isLocked(Z)){I&&I.push(Z+": locked extension point!")}else{if(X.isIntercepted&&X.isIntercepted(Z)){I&&I.push(Z+":"+V.stringify(Y)+" (controlled)")}else{I&&I.push(Z+": "+V.stringify(Y));if(Y!=null){var ab=typeof Y;if(ab==="object"){if(Z==="svg"||Z==="css"){if(ab=X.propertyValue(Z)){Y=ad.copy(ab,Y)}}}else{if(f&&(u||F)&&ab==="function"){if(F){return}if(Z!=="add"){Y=u.call(X,Y,Z)}}}}if(typeof X[Z]==="function"){Z!="add"&&X.intercept&&X.properties[Z]?X.intercept(Z,Y,i):X[Z](Y)}else{X[Z]=Y}}}});if(I){if(I.length){this._log("Applying Extension Points for: '"+O+"'\n\t* "+I.join("\n\t* "))}else{V.debug>=5&&this._log("No Extension Points for: '"+O+"'")}}}}else{V.debug>=4&&this._log("Applying Extension Points for: '"+O+"' (target mark does not exist)")}},_getExtension:function(i,f){var I;if(ad.array.is(i)){for(var F=i.length-1,u;F>=0;){if((I=ad.getOwn(this._components,i[F--]))&&(u=I.get(f))!==undefined){return u}}}else{if(I=ad.getOwn(this._components,i)){return I.get(f)}}},_getComponentExtensions:function(f){return ad.getOwn(this._components,f)},_getConstantExtension:function(i,f){i=this._getExtension(i,f);if(!ad.fun.is(i)){return i}}});ad.type("pvc.BasePanel",V.Abstract).add(V.visual.Interactive).init(function(i,f,I){this.chart=i;this.base();this.axes={};if(I){if(I.scenes){this._sceneTypeExtensions=I.scenes;delete I.scenes}var F=I.axes;if(F){ad.copy(this.axes,F);delete I.axes}}$.extend(this,I);if(!this.axes.color){this.axes.color=i.axes.color}this.position={};F=I&&I.margins;if(!f&&F===undefined){F=3}this.margins=new az(F);this.paddings=new az(I&&I.paddings);this.size=new at(I&&I.size);this.sizeMax=new at(I&&I.sizeMax);if(f){this.parent=f;this.isTopRoot=false;this.root=(this.isRoot=f.chart!==i)?this:f.root;this.topRoot=f.topRoot;this._ibits=f._ibits;if(this.isRoot){this.position.left=i.left;this.position.top=i.top}f._addChild(this)}else{this.parent=null;this.root=this;this.topRoot=this;this.isTopRoot=this.isRoot=true;this._ibits=i._ibits}this.data=(this.isRoot?i:f).data;if(this.isRoot){this.offset=this.alignTo=this.align=this.anchor=null}else{this.align=V.parseAlign(this.anchor,this.align);f=this.alignTo;I=this.anchor;if(f!=null&&f!==""&&(I==="left"||I==="right")){if(f!=="page-middle"){f=isNaN(+f.charAt(0))?V.parseAlign(I,f):au.parse(f)}}else{f=this.align}this.alignTo=f;this.offset=new ap(this.offset)}if(this.borderWidth==null){var u;if(f=this._getExtensionId()){if(this._getExtension(f,"strokeStyle")!=null){u=+this._getConstantExtension(f,"lineWidth");if(isNaN(u)||!isFinite(u)){u=null}}}this.borderWidth=u==null?0:1.5}u=V.visual.Interactive;f=this._ibits;f=ad.bit.set(f,u.Clickable,i._ibits&u.Clickable&&!!this.clickAction);this._ibits=f=ad.bit.set(f,u.DoubleClickable,i._ibits&u.DoubleClickable&&!!this.doubleClickAction)}).add({chart:null,parent:null,_children:null,type:R.Panel,_extensionPrefix:"",_rubberSelectableMarks:null,height:null,width:null,borderWidth:null,anchor:"top",pvPanel:null,margins:null,paddings:null,isRoot:false,isTopRoot:false,root:null,topRoot:null,_layoutInfo:null,_signs:null,data:null,dataPartValue:null,_animating:0,_selectingByRubberband:false,_v1DimRoleName:{series:"series",category:"category",value:"value"},_sceneTypeExtensions:null,clickAction:null,doubleClickAction:null,compatVersion:function(f){return this.chart.compatVersion(f)},_createLogInstanceId:function(){return""+this.constructor+this.chart._createLogChildSuffix()},defaultVisibleBulletGroupScene:function(){var i=this.axes.color;if(i&&i.option("LegendVisible")){var f=this.dataPartValue;return ad.query(i.dataCells).where(function(u){return u.dataPartValue===f}).select(function(u){return u.legendBulletGroupScene}).first(ad.truthy)}return null},_getLegendBulletRootScene:function(){return this.chart._getLegendBulletRootScene()},_addChild:function(f){f.parent===this||ad.assert("Child has a != parent.");(this._children||(this._children=[])).push(f)},_addSign:function(f){ad.array.lazy(this,"_signs").push(f);f.selectableByRubberband()&&ad.array.lazy(this,"_rubberSelectableMarks").push(f.pvMark)},visibleData:function(f){return this.chart.visibleData(this.dataPartValue,f)},partData:function(){return this.chart.partData(this.dataPartValue)},layout:function(ab,Z){if(!this._layoutInfo||ad.get(Z,"force",false)){var Y=ad.get(Z,"referenceSize");if(!Y&&ab){Y=ad.copyOwn(ab)}var X=this.size.resolve(Y),O=this.sizeMax.resolve(Y);if(!ab){if(X.width==null||X.height==null){throw ad.error.operationInvalid("Panel layout without width or height set.")}ab=ad.copyOwn(X)}if(!Y&&ab){Y=ad.copyOwn(ab)}if(O.width!=null&&ab.width>O.width){ab.width=O.width}if(O.height!=null&&ab.height>O.height){ab.height=O.height}O=this.borderWidth/2;var M=(ad.get(Z,"margins")||this.margins).resolve(Y),L=(ad.get(Z,"paddings")||this.paddings).resolve(Y),I=az.inflate(M,O),F=az.inflate(L,O),i=I.width+F.width,u=I.height+F.height;O=new at(Math.max(ab.width-i,0),Math.max(ab.height-u,0));var f=ad.copyOwn(X);if(f.width!=null){f.width=Math.max(f.width-i,0)}if(f.height!=null){f.height=Math.max(f.height-u,0)}X=this._layoutInfo||null;Z=ad.get(Z,"canChange",true);Y=this._layoutInfo={canChange:Z,referenceSize:Y,realMargins:M,realPaddings:L,borderWidth:this.borderWidth,margins:I,paddings:F,desiredClientSize:f,clientSize:O,pageClientSize:X?X.pageClientSize:O.clone(),previous:X};if(X){delete X.previous;delete X.pageClientSize}if(M=this._calcLayout(Y)){Y.clientSize=M;ab={width:M.width+i,height:M.height+u}}else{ab=ab;M=O}this.isVisible=M.width>0&&M.height>0;delete Y.desiredClientSize;this.width=ab.width;this.height=ab.height;!Z&&X&&delete Y.previous;if(V.debug>=5){this._log("Size       = "+V.stringify(ab));this._log("Margins    = "+V.stringify(Y.margins));this._log("Paddings   = "+V.stringify(Y.paddings));this._log("ClientSize = "+V.stringify(Y.clientSize))}this._onLaidOut()}},_onLaidOut:function(){this.isRoot&&this.chart._onLaidOut()},_calcLayout:function(bm){function bl(bo,bq,bp){for(var bn=0;bo--;){if(bq.call(bp,bo,bn)===false){return true}bn++}return false}function bk(bo,bq){O&&Y._group("LayoutCycle #"+(bq+1)+" (remaining: "+bo+")");try{bo=bo>0;Z=new az(0);X=ad.copyOwn(ab);var bp;bq=0;for(var bn=L.length;bq<bn;){bp=L[bq];O&&Y._group("SIDE Child #"+(bq+1)+" at "+bp.anchor);try{if(bj.call(this,bp,bo)){return true}}finally{O&&Y._groupEnd()}bq++}bq=0;for(bn=i.length;bq<bn;){bp=i[bq];O&&Y._group("FILL Child #"+(bq+1));try{if(bj.call(this,bp,bo)){return true}}finally{O&&Y._groupEnd()}bq++}return false}finally{O&&Y._groupEnd()}}function bj(bo,bq){var bp=false,bn;f.canChange=bq;bl(3,function(bt,bs){O&&Y._group("Attempt #"+(bs+1));try{f.paddings=bn;f.canChange=bt>0;bo.layout(new at(X),f);if(bo.isVisible){if(bp=bh.call(this,bo,bq)){return false}var br=bo._layoutInfo.requestPaddings;if(bi(bn,br)){bn=br;if(bt>0){bn=new az(bn);O&&this._log("Child requested paddings change: "+V.stringify(bn));return true}V.debug>=2&&this._warn("Child requests paddings change but iterations limit has been reached.")}bg.call(this,bo);bo.anchor!=="fill"&&bb.call(this,bo)}return false}finally{O&&Y._groupEnd()}},this);return bp}function bi(bn,bo){if(!bo){return false}return ad.query(az.names).each(function(bp){if(Math.abs((bo&&bo[bp]||0)-(bn&&bn[bp]||0))>=0.1){return false}})}function bh(bo,bq){var bp=false,bn=bo.width-X.width;if(bn>0){V.debug>=3&&this._log("Child added width = "+bn);if(bq){bp=true;X.width+=bn;ab.width+=bn}else{V.debug>=2&&this._warn("Child wanted more width, but layout iterations limit has been reached.")}}bo=bo.height-X.height;if(bo>0){V.debug>=3&&this._log("Child added height ="+bo);if(bq){bp=true;X.height+=bo;ab.height+=bo}else{V.debug>=2&&this._warn("Child wanted more height, but layout iterations limit has been reached.")}}return bp}function bg(bv){var bq=bv.anchor,bp=bv.align,bt=bv.alignTo,bn;if(bq==="fill"){bq="left";bn=Z.left+X.width/2-bv.width/2;bp=bt="middle"}else{bn=Z[bq]}var bu,br;switch(bp){case"top":case"bottom":case"left":case"right":bu=bp;br=0;break;case"center":case"middle":bu=u[M[bq]];br=-bv[I[bu]]/2;break}var bo,bs;switch(bt){case"top":case"bottom":case"left":case"right":bs=bt;bo=bs!==bu?X[I[bu]]:0;break;case"center":case"middle":bs=u[M[bq]];bo=X[I[bu]]/2;break;case"page-center":case"page-middle":bs=u[M[bq]];bp=I[bu];bo=Math.min(X[bp],bm.pageClientSize[bp])/2;break}br=Z[bs]+bo+br;if(bs=bv.offset.resolve(X)){bn+=bs[F[bq]]||0;br+=bs[F[bu]]||0}if(bv.keepInBounds){if(bn<0){bn=0}if(br<0){br=0}}bv.setPosition(ad.set({},bq,bn,bu,br))}function bb(bn){var bp=bn.anchor,bo=I[bp];bn=bn[bo];Z[bp]+=bn;X[bo]-=bn}var ab,Y=this,Z,X,O;if(Y._children){var I=V.BasePanel.orthogonalLength,M=V.BasePanel.relativeAnchor,u=V.BasePanel.leftTopAnchor,F=ap.namesSidesToOffset,i=[],L=[];Y._children.forEach(function(bn){var bo=bn.anchor;if(bo){if(bo==="fill"){i.push(bn)}else{ad.hasOwn(M,bo)||ad.fail.operationInvalid("Unknown anchor value '{0}'",[bo]);L.push(bn)}}});O=V.debug>=5;ab=ad.copyOwn(bm.clientSize);var f={force:true,referenceSize:ab};O&&Y._group("CCC DOCK LAYOUT clientSize = "+V.stringify(ab));try{bl(5,bk,Y)}finally{O&&Y._groupEnd()}}return ab},invalidateLayout:function(){this._layoutInfo=null;this._children&&this._children.forEach(function(f){f.invalidateLayout()})},_create:function(i){if(!this.pvPanel||i){this.pvPanel=null;if(this.pvRootPanel){this.pvRootPanel=null}delete this._signs;this.layout();if(!(this.isTopRoot&&this.chart._isMultiChartOverflowClip)){if(this.isVisible){this.isRoot&&this._creating();var f=this._layoutInfo.margins;i=this._layoutInfo.paddings;if(this.isTopRoot){this.pvRootPanel=this.pvPanel=(new R.Panel).canvas(this.chart.options.canvas);this.pvRootPanel.lock("data",[new V.visual.Scene(null,{panel:this})]);if(f.width>0||f.height>0){this.pvPanel.width(this.width).height(this.height);this.pvPanel=this.pvPanel.add(R.Panel)}}else{this.pvPanel=this.parent.pvPanel.add(this.type)}var M=this.pvPanel,L=this.width-f.width,I=this.height-f.height;M.width(L).height(I);if(V.debug>=15&&(f.width>0||f.height>0)){(this.isTopRoot?this.pvRootPanel:this.parent.pvPanel).add(this.type).width(this.width).height(this.height).left(this.position.left!=null?this.position.left:null).right(this.position.right!=null?this.position.right:null).top(this.position.top!=null?this.position.top:null).bottom(this.position.bottom!=null?this.position.bottom:null).strokeStyle("orange").lineWidth(1).strokeDasharray("- .")}var F={};ad.eachOwn(this.position,function(X,O){M[O](X+f[O]);F[this.anchorLength(O)]=true},this);if(!F.width){f.left>0&&M.left(f.left);f.right>0&&M.right(f.right)}if(!F.height){f.top>0&&M.top(f.top);f.bottom>0&&M.bottom(f.bottom)}if(i.width>0||i.height>0){this.pvPanel=M.add(R.Panel).width(L-i.width).height(I-i.height).left(i.left).top(i.top)}M.borderPanel=M;M.paddingPanel=this.pvPanel;this.pvPanel.paddingPanel=this.pvPanel;this.pvPanel.borderPanel=M;if(V.debug>=15){this.pvPanel.strokeStyle("lightgreen").lineWidth(1).strokeDasharray("- ");this.pvPanel!==M&&M.strokeStyle("blue").lineWidth(1).strokeDasharray(". ")}i=this._getExtensionId();new V.visual.Panel(this,null,{panel:M,extensionId:i});this._createCore(this._layoutInfo);if(this.isTopRoot){this.chart._multiChartOverflowClipped&&this._addMultichartOverflowClipMarker();this._initSelection()}this.applyExtensions();if(this.isRoot&&V.debug>5){var u=["SCALES SUMMARY",V.logSeparator];this.chart.axesList.forEach(function(Y){var X=Y.scale;if(X){var O=X.domain&&X.domain();X=X.range&&X.range();u.push(Y.id);u.push("    domain: "+(!O?"?":V.stringify(O)));u.push("    range : "+(!X?"?":V.stringify(X)))}},this);this._log(u.join("\n"))}}}}},_creating:function(){this._children&&this._children.forEach(function(f){f._creating()})},_createCore:function(){this._children&&this._children.forEach(function(f){f._create()})},render:function(i){if(!this.isTopRoot){return this.topRoot.render(i)}this._create(ad.get(i,"recreate",false));if(!(this.isTopRoot&&this.chart._isMultiChartOverflowClip)){if(this.isVisible){this._onRender();var f=this.pvRootPanel,F=this._animating;this._animating=this.chart.animatable()&&!ad.get(i,"bypassAnimation",false)?1:0;try{f.render();if(this._animating){this._animating=2;var u=this;f.transition().duration(2000).ease("cubic-in-out").start(function(){if(F){F=0}else{u._animating=0;u._onRenderEnd(true)}})}else{this._onRenderEnd(false)}}finally{this._animating=0}}}},_onRender:function(){var i=this.chart.options.renderCallback;if(i){if(this.compatVersion()<=1){i.call(this.chart)}else{var f=this.context();i.call(f,f.scene)}}},_onRenderEnd:function(f){this._children&&this._children.forEach(function(i){i._onRenderEnd(f)})},renderInteractive:function(){if(this.isVisible){var f=this._getSelectableMarks();if(f&&f.length){f.forEach(function(i){i.render()})}else{if(!this._children){this.pvPanel.render();return}}this._children&&this._children.forEach(function(i){i.renderInteractive()})}},_getSelectableMarks:function(){return this._rubberSelectableMarks},animate:function(i,f){return this.topRoot._animating===1?i:f},animatingStart:function(){return this.topRoot._animating===1},animating:function(){return this.topRoot._animating>0},setPosition:function(i){for(var f in i){if(ad.hasOwn(az.namesSet,f)){var u=i[f];if(u===null){delete this.position[f]}else{u=+u;if(!isNaN(u)&&isFinite(u)){this.position[f]=u}}}}},createAnchoredSize:function(i,f){if(this.isAnchorTopOrBottom()){return new at(f.width,Math.min(f.height,i))}return new at(Math.min(f.width,i),f.height)},applyExtensions:function(){this._signs&&this._signs.forEach(function(f){f.applyExtensions()})},extend:function(i,f,u){this.chart.extend(i,this._makeExtensionAbsId(f),u)},extendAbs:function(i,f,u){this.chart.extend(i,f,u)},_extendSceneType:function(i,f,u){(i=ad.get(this._sceneTypeExtensions,i))&&V.extendType(f,i,u)},_absBaseExtId:{abs:"base"},_absSmallBaseExtId:{abs:"smallBase"},_getExtensionId:function(){if(this.isRoot){return !this.chart.parent?this._absBaseExtId:this._absSmallBaseExtId}},_getExtensionPrefix:function(){return this._extensionPrefix},_makeExtensionAbsId:function(f){return V.makeExtensionAbsId(f,this._getExtensionPrefix())},_getExtension:function(i,f){return this.chart._getExtension(this._makeExtensionAbsId(i),f)},_getExtensionAbs:function(i,f){return this.chart._getExtension(i,f)},_getConstantExtension:function(i,f){return this.chart._getConstantExtension(this._makeExtensionAbsId(i),f)},getPvPanel:function(i){var f=this.pvPanel;if(!i){return f}if(!this.parent){throw ad.error.operationInvalid("Layers are not possible in a root panel.")}if(!f){throw ad.error.operationInvalid("Cannot access layer panels without having created the main panel.")}var F=null;if(this._layers){F=this._layers[i]}else{this._layers={}}if(!F){var u=F=this.parent.pvPanel.borderPanel.add(this.type).extend(f.borderPanel);if(f!==f.borderPanel){F=u.add(R.Panel).extend(f)}u.borderPanel=u;u.paddingPanel=F;F.paddingPanel=F;F.borderPanel=u;this.initLayerPanel(F,i);this._layers[i]=F}return F},initLayerPanel:function(){},_getV1DimName:function(i){var f=this._v1DimName||(this._v1DimNameCache={}),u=f[i];if(u==null){u=(u=this.chart.visualRoles[this._v1DimRoleName[i]])?u.firstDimensionName():"";f[i]=u}return u},_getV1Datum:function(f){return f.datum},context:function(){var f=this._context;if(!f||f.isPinned){f=this._context=new V.visual.Context(this)}else{H.call(f)}return f},_isTooltipEnabled:function(){return !this.selectingByRubberband()&&!this.animating()},_getTooltipFormatter:function(i){var f=this.compatVersion()<=1,u=i.format;if(!u){if(!f){return this._summaryTooltipFormatter}u=this.chart.options.v1StyleTooltipFormat;if(!u){return}}if(f){return function(F){return u.call(F.panel,F.getV1Series(),F.getV1Category(),F.getV1Value()||"",F.getV1Datum())}}return function(F){return u.call(F,F.scene)}},_summaryTooltipFormatter:function(bg){function bb(bi,bh){F.push("<b>"+bi+"</b>: "+(ad.html.escape(bh)||" - ")+"<br/>")}function ab(bi,bh){bi=Y?Y.dimensions(bh).percentOverParent(L):M.dimensions(bh).percent(bi.value,L);return u(bi)}var Z=bg.scene;if(!Z.datum){return""}var Y=Z.group,X=Y&&Y.count()>1,O=Z.datum;if(!X&&(!O||O.isNull)){return""}var M=Z.data(),L={visible:true},F=[];if(O.isInterpolated){F.push("<i>Interpolation</i>: "+ad.html.escape(O.interpolation)+"<br/>")}else{O.isTrend&&F.push("<i>Trend</i>: "+ad.html.escape(O.trendType)+"<br/>")}O=M.type;var I=bg.panel.stacked===false?null:O.getPlayingPercentVisualRoleDimensionMap(),u=I?bg.chart.options.percentValueFormat:null,i=X?Y.atoms:Z.datum.atoms,f=false;O.sortDimensionNames(ad.keys(i)).forEach(function(bj){var bh=i[bj];if(!bh.dimension.type.isHidden){if(!X||bh.value!=null){f=true;var bi=bh.label;if(I&&I.has(bj)){bi+=" ("+ab(bh,bj)+")"}bb(ad.html.escape(bh.dimension.type.label),bi)}}});if(X){f&&F.push("<hr />");F.push("<b>#</b>: "+Y._datums.length+"<br/>");O.sortDimensionNames(Y.freeDimensionNames()).forEach(function(bj){var bh=Y.dimensions(bj);if(!bh.type.isHidden){var bi=ad.html.escape(bh.type.label);if(bh.type.valueType===Number){bh=bh.format(bh.sum(L));if(I&&I.has(bj)){bh+=" ("+ab(null,bj)+")"}bi="&sum; "+bi}else{bh=bh.atoms(L).map(function(bk){return bk.label||"- "}).join(", ")}bb(bi,bh)}})}return'<div style="text-align: left;">'+F.join("\n")+"</div>"},_onClick:function(i){var f=this.clickAction;if(f){this.compatVersion()<=1?this._onV1Click(i,f):f.call(i,i.scene)}},_onDoubleClick:function(i){var f=this.doubleClickAction;if(f){this.compatVersion()<=1?this._onV1DoubleClick(i,f):f.call(i,i.scene)}},_onV1Click:function(i,f){f.call(i.pvMark,i.getV1Series(),i.getV1Category(),i.getV1Value(),i.event,i.getV1Datum())},_onV1DoubleClick:function(i,f){f.call(i.pvMark,i.getV1Series(),i.getV1Category(),i.getV1Value(),i.event,i.getV1Datum())},_addMultichartOverflowClipMarker:function(){function i(I){var F=I.shapeRadius();if(F==null){I=I.shapeSize();if(I!=null){F=Math.sqrt(I)}}return F||f}var f=5,u=(new V.visual.Dot(this,this.pvPanel,{noSelect:true,noHover:true,noClick:true,noDoubleClick:true,noTooltip:false,freePosition:true,extensionId:"multiChartOverflowMarker"})).lock("data").pvMark.shape("triangle").shapeRadius(f).top(null).left(null).bottom(function(){return i(this)+10}).right(function(){return i(this)+10}).shapeAngle(0).lineWidth(1.5).strokeStyle("red").fillStyle("rgba(255, 0, 0, 0.2)");ad.fun.is(u.tooltip)&&u.tooltip("Some charts did not fit the available space.")},selectingByRubberband:function(){return this.topRoot._selectingByRubberband},_initSelection:function(){var Y=this,X=Y.chart;if(Y.interactive()){var O=Y.unselectable(),M=Y.selectableByRubberband();if(M||O){var L=Y.data,I=Y.pvRootPanel||Y.pvPanel.paddingPanel;Y._getExtensionAbs("base","fillStyle")||I.fillStyle(V.invisibleFill);I.lock("events","all");if(M){Y._selectingByRubberband=false;var F,u,i=this.selectBar=(new V.visual.Bar(Y,I,{extensionId:"rubberBand",normalStroke:true,noHover:true,noSelect:true,noClick:true,noDoubleClick:true,noTooltip:true})).override("defaultStrokeWidth",ad.fun.constant(1.5)).override("defaultColor",function(Z){return Z==="stroke"?"#86fe00":"rgba(203, 239, 163, 0.6)"}).override("interactiveColor",function(Z){return Z}).pvMark.lock("visible",function(){return !!u}).lock("left",function(){return u.x}).lock("right").lock("top",function(){return u.y}).lock("bottom").lock("width",function(){return u.dx}).lock("height",function(){return u.dy}).lock("cursor").lock("events","none"),f;I.intercept("data",function(){var Z=this.delegate();Z&&Z.forEach(function(ab){if(ab.x==null){ab.x=ab.y=ab.dx=ab.dy=0}});return Z}).event("mousedown",R.Behavior.select().autoRender(false)).event("select",function(Z){if(u){u=new R.Shape.Rect(Z.x,Z.y,Z.dx,Z.dy)}else{if(Y.animating()){return}if(Z.dx*Z.dx+Z.dy*Z.dy<=4){return}u=new R.Shape.Rect(Z.x,Z.y,Z.dx,Z.dy);Y._selectingByRubberband=true;F||(F=I.toScreenTransform());Y.rubberBand=u.apply(F)}i.render()}).event("selectend",function(){if(u){var Z=arguments[arguments.length-1];F||(F=I.toScreenTransform());var ab=u.apply(F);u=null;Y._selectingByRubberband=false;i.render();try{Y._processRubberBand(ab,Z)}finally{f=new Date}}});O&&I.event("click",function(){if(f){if(new Date-f<300){f=null;return}}L.clearSelected()&&X.updateSelections()})}else{O&&I.event("click",function(){L.clearSelected()&&X.updateSelections()})}}}},_processRubberBand:function(i,f,u){this.rubberBand=i;try{this._onRubberBandSelectionEnd(f,u)}finally{this.rubberBand=null}},_onRubberBandSelectionEnd:function(i,f){V.debug>=20&&this._log("rubberBand "+V.stringify(this.rubberBand));f=ObjectFactory.create(f||{});f.toggle=false;var F=this._getDatumsOnRubberBand(i,f);if(F){var u=this.chart;u._updatingSelections(function(){if(!i.ctrlKey&&u.options.ctrlSelectMode){u.data.owner.clearSelected();V.data.Data.setSelected(F,true)}else{f.toggle?V.data.Data.toggleSelected(F):V.data.Data.setSelected(F,true)}})}},_getDatumsOnRubberBand:function(i,f){i=new ad.Map;this._getDatumsOnRect(i,this.rubberBand,f);f=i.values();if(f.length){if((f=this.chart._onUserSelection(f))&&!f.length){f=null}}return f},_getDatumsOnRect:function(i,f,F){this._getOwnDatumsOnRect(i,f,F);var u=this._children;u&&u.forEach(function(I){I._getDatumsOnRect(i,f,F)})},_getOwnDatumsOnRect:function(i,f,O){var M=this;if(!M.isVisible){return false}M=M._getSelectableMarks();if(!M||!M.length){return false}var L=i.count,I=ad.get(O,"markSelectionMode"),F=function(X){X.isNull||i.set(X.id,X)},u=function(X){X.selectableByRubberband()&&X.datums().each(F)};M.forEach(function(X){X.eachSceneWithDataOnRect(f,u,null,I)});return L<i.count},isAnchorTopOrBottom:function(f){if(!f){f=this.anchor}return f==="top"||f==="bottom"},isOrientationVertical:function(f){return this.chart.isOrientationVertical(f)},isOrientationHorizontal:function(f){return this.chart.isOrientationHorizontal(f)}}).addStatic({relativeAnchor:{top:"left",bottom:"left",left:"bottom",right:"bottom"},leftBottomAnchor:{top:"bottom",bottom:"bottom",left:"left",right:"left"},leftTopAnchor:{top:"top",bottom:"top",left:"left",right:"left"},horizontalAlign:{top:"right",bottom:"left",middle:"center",right:"right",left:"left",center:"center"},verticalAlign:{top:"top",bottom:"bottom",middle:"middle",right:"bottom",left:"top",center:"middle"},verticalAlign2:{top:"top",bottom:"bottom",middle:"middle",right:"top",left:"bottom",center:"middle"},relativeAnchorMirror:{top:"right",bottom:"right",left:"top",right:"top"},oppositeAnchor:{top:"bottom",bottom:"top",left:"right",right:"left"},parallelLength:{top:"width",bottom:"width",right:"height",left:"height"},orthogonalLength:{top:"height",bottom:"height",right:"width",left:"width"},oppositeLength:{width:"height",height:"width"}});ad.scope(function(){var i=V.BasePanel,f={};ad.eachOwn({anchorOrtho:"relativeAnchor",anchorOrthoMirror:"relativeAnchorMirror",anchorOpposite:"oppositeAnchor",anchorLength:"parallelLength",anchorOrthoLength:"orthogonalLength"},function(I,F){var u=i[I];f[F]=function(L){return u[L||this.anchor]}});i.add(f)});ad.type("pvc.PlotPanel",V.BasePanel).init(function(i,f,F,u){this.base(i,f,u);this.plot=F;this._extensionPrefix=F.extensionPrefixes;this.dataPartValue=F.option("DataPart");this.axes.color=i._getAxis("color",(F.option("ColorAxis")||0)-1);this.orientation=F.option("Orientation");this.valuesVisible=F.option("ValuesVisible");this.valuesAnchor=F.option("ValuesAnchor");this.valuesMask=F.option("ValuesMask");this.valuesFont=F.option("ValuesFont");this.valuesOptimizeLegibility=F.option("ValuesOptimizeLegibility");f=this.visualRoles=ObjectFactory.create(i.visualRoles);F=F.option("ColorRole");f.color=F?i.visualRole(F):null;this.chart._addPlotPanel(this)}).add({anchor:"fill",visualRoles:null,_getExtensionId:function(){var f=["chart","plot"];this.plotName&&f.push(this.plotName);return f},isOrientationVertical:function(){return this.orientation===V.orientation.vertical},isOrientationHorizontal:function(){return this.orientation===V.orientation.horizontal}});ad.type("pvc.MultiChartPanel",V.BasePanel).add({anchor:"fill",_multiInfo:null,createSmallCharts:function(){var bi=this.chart,bh=bi.options,bg=bi.visualRoles.multiChart.flatten(bi.data,{visible:true}),bb=bg.childNodes.length,ab,Z,Y,X;if(bi._isMultiChartOverflowClipRetry){Y=bi._clippedMultiChartRowsMax;X=Z=bi._clippedMultiChartColsMax;ab=Y*Z}else{ab=Number(bh.multiChartMax);if(isNaN(ab)||ab<1){ab=Infinity}}bb=Math.min(bb,ab);if(bb!==0){if(!bi._isMultiChartOverflowClipRetry){X=+bh.multiChartColumnsMax;if(isNaN(X)||ab<1){X=3}Z=Math.min(bb,X);Z>=1&&isFinite(Z)||ad.assert("Must be at least 1 and finite");Y=Math.ceil(bb/Z);Y>=1||ad.assert("Must be at least 1")}var O=this._getCoordinatedRootAxesByScopeType(),L,M,I;if(O){L={};M=function(bm,bl,bk){bl=ad.array.lazy(L,bl);ad.array.lazy(bl,bk).push(bm)};I=function(bk){O.row&&M(bk,"row",bk.smallRowIndex);O.column&&M(bk,"column",bk.smallColIndex);O.global&&M(bk,"global",0)}}ab=this._buildSmallChartsBaseOptions();for(var F=bi.constructor,i=0;i<bb;i++){var u=bg.childNodes[i],bj=i%Z,f=Math.floor(i/Z);u=ad.set(ObjectFactory.create(ab),"smallColIndex",bj,"smallRowIndex",f,"title",u.absLabel,"data",u);u=new F(u);if(O){u._createPhase1();I(u)}else{u._create()}}if(O){ad.eachOwn(O,function(bl,bk){bl.forEach(function(bm){L[bk].forEach(function(bn){this._coordinateScopeAxes(bm.id,bn)},this)},this)},this);bi.children.forEach(function(bk){bk._createPhase2()})}this._multiInfo={data:bg,count:bb,rowCount:Y,colCount:Z,multiChartColumnsMax:X,coordScopesByType:L,multiChartOverflow:V.parseMultiChartOverflow(bh.multiChartOverflow)}}},_getCoordinatedRootAxesByScopeType:function(){var i=false,f=ad.query(this.chart.axesList).multipleIndex(function(u){if(u.scaleType!=="discrete"&&u.option.isDefined("DomainScope")){u=u.option("DomainScope");if(u!=="cell"){i=true;return u}}});return i?f:null},_coordinateScopeAxes:function(i,f){var u=ad.query(f).select(function(F){F=F.axes[i].scale;if(!F.isNull){F=F.domain();return{min:F[0],max:F[1]}}}).reduce(V.unionExtents,null);u&&f.forEach(function(I){I=I.axes[i];var F=I.scale;if(!F.isNull){F.domain(u.min,u.max);I.setScale(F)}})},_buildSmallChartsBaseOptions:function(){var i=this.chart,f=i.options;return ad.set(ObjectFactory.create(f),"parent",i,"legend",false,"titleFont",f.smallTitleFont,"titlePosition",f.smallTitlePosition,"titleAlign",f.smallTitleAlign,"titleAlignTo",f.smallTitleAlignTo,"titleOffset",f.smallTitleOffset,"titleKeepInBounds",f.smallTitleKeepInBounds,"titleMargins",f.smallTitleMargins,"titlePaddings",f.smallTitlePaddings,"titleSize",f.smallTitleSize,"titleSizeMax",f.smallTitleSizeMax)},_calcLayout:function(bb){var ab=this._multiInfo;if(ab){var Z=this.chart,Y=Z.options,X=bb.clientSize,O=bb.previous,M=O?O.initialClientWidth:X.width;O=O?O.initialClientHeight:X.height;var L=au.parse(Y.smallWidth);if(L!=null){L=au.resolve(L,M)}var I=au.parse(Y.smallHeight);if(I!=null){I=au.resolve(I,O)}var u=+Y.smallAspectRatio;if(isNaN(u)||u<=0){u=this._calculateDefaultAspectRatio()}if(L==null){if(isFinite(ab.multiChartColumnsMax)){L=X.width/ab.colCount}else{if(I==null){I=O}L=u*I}}if(I==null){I=ab.rowCount===1&&ad.get(Y,"multiChartSingleRowFillsHeight",true)||ab.colCount===1&&ad.get(Y,"multiChartSingleColFillsHeight",true)?O:L/u}Y=L*ab.colCount;u=I*ab.rowCount;if(!Z._isMultiChartOverflowClipRetry){Z._isMultiChartOverflowClip=false;switch(ab.multiChartOverflow){case"fit":if(Y>M){Y=M;L=Y/ab.colCount}if(u>O){u=O;I=u/ab.rowCount}break;case"clip":var F=ab.colCount;ab=ab.rowCount;var i=Y>M;if(i){F=Math.floor(M/L)}var f=u>O;if(f){ab=Math.floor(O/I)}if(f||i){Z._isMultiChartOverflowClip=true;Z._clippedMultiChartRowsMax=ab;Z._clippedMultiChartColsMax=F}break}}ad.set(bb,"initialClientWidth",M,"initialClientHeight",O,"width",L,"height",I);return{width:Y,height:Math.max(X.height,u)}}},_calculateDefaultAspectRatio:function(){if(this.chart instanceof V.PieChart){return 10/7}return 1.25},_getExtensionId:function(){return"content"},_createCore:function(i){!this._isMultiChartOverflowClip||ad.assert("Overflow&clip condition should be resolved.");var f=this._multiInfo;if(f){var L=this.chart,I=L.options,F=I.smallMargins;F=new az(F!=null?F:new au(0.02));var u=new az(I.smallPaddings);L.children.forEach(function(M){M._setSmallLayout({left:M.smallColIndex*i.width,top:M.smallRowIndex*i.height,width:i.width,height:i.height,margins:this._buildSmallMargins(M,F),paddings:u})},this);(f=f.coordScopesByType)&&L._coordinateSmallChartsLayout(f);this.base(i)}},_buildSmallMargins:function(i,f){var L=this._multiInfo,I=L.colCount-1;L=L.rowCount-1;var F=i.smallColIndex;i=i.smallRowIndex;var u={};if(F>0){u.left=f.left}if(F<I){u.right=f.right}if(i>0){u.top=f.top}if(i<L){u.bottom=f.bottom}return u}});ad.type("pvc.TitlePanelAbstract",V.BasePanel).init(function(i,f,I){I||(I={});var F=I.anchor||this.anchor;if(I.size==null){var u=I.titleSize;if(u!=null){I.size=(new at).setSize(u,{singleProp:this.anchorOrthoLength(F)})}}if(I.sizeMax==null){u=I.titleSizeMax;if(u!=null){I.sizeMax=(new at).setSize(u,{singleProp:this.anchorOrthoLength(F)})}}if(I.paddings==null){I.paddings=this.defaultPaddings}this.base(i,f,I);if(I.font===undefined){i=this._getExtension("label","font");if(typeof i==="string"){this.font=i}}}).add({pvLabel:null,anchor:"top",title:null,titleSize:undefined,font:"12px sans-serif",defaultPaddings:2,_extensionPrefix:"title",_calcLayout:function(Z){var Y=new at,X=this.anchor,O=this.anchorLength(X);X=this.anchorOrthoLength(X);var M=R.Text.measure(this.title,this.font).width+2,L=Z.clientSize[O],I=Z.desiredClientSize[O];if(I==null){I=M>L?L:M}else{if(I>L){I=L}}M=M>I?V.text.justify(this.title,I,this.font):this.title?[this.title]:[];L=R.Text.fontHeight(this.font);var F=M.length*L,u=Z.clientSize[X],f=Z.desiredClientSize[X];if(f==null){f=F}else{if(f>u){f=u}}if(F>f){u=Math.max(1,Math.floor(f/L));if(M.length>u){var i=M[u];M.length=u;F=f=u*L;M[u-1]=V.text.trimToWidthB(I,M[u-1]+" "+i,this.font,"..")}}Z.lines=M;Z.topOffset=(f-F)/2;Z.lineSize={width:I,height:L};Z.a_width=O;Z.a_height=X;Y[O]=I;Y[X]=f;return Y},_createCore:function(i){var f=this._buildScene(i),L={top:0,right:Math.PI/2,bottom:0,left:-Math.PI/2},I=V.BasePanel.horizontalAlign[this.align],F=V.BasePanel.leftTopAnchor[this.anchor],u;if(this.compatVersion()<=1){u=function(M){return function(){return M.call(this)}}}this.pvLabel=(new V.visual.Label(this,this.pvPanel,{extensionId:"label",wrapper:u})).lock("data",f.lineScenes).pvMark[F](function(M){return i.topOffset+M.vars.size.height/2+this.index*M.vars.size.height}).textAlign(I)[this.anchorOrtho(F)](function(M){switch(this.textAlign()){case"center":return M.vars.size.width/2;case"left":return 0;case"right":return M.vars.size.width}}).text(function(M){return M.vars.textLines[this.index]}).font(this.font).textBaseline("middle").textAngle(L[this.anchor])},_buildScene:function(i){var f=new V.visual.Scene(null,{panel:this,source:this.chart.data}),u=i.lines;f.vars.size=i.lineSize;f.vars.textLines=u;f.lineScenes=ad.array.create(u.length,f);return f},_getExtensionId:ad.fun.constant("")});ad.type("pvc.TitlePanel",V.TitlePanelAbstract).init(function(i,f,u){u||(u={});if(i.compatVersion()<=1){if(u.titleSize==null){u.titleSize=25}}this._extensionPrefix=!i.parent?"title":"smallTitle";this.base(i,f,u)}).add({font:"14px sans-serif",defaultPaddings:4});ad.type("pvc.LegendPanel",V.BasePanel).init(function(i,f,u){this.base(i,f,u);i=V.visual.Interactive;if(this._ibits&i.Interactive){this._ibits|=i.Clickable}}).add({pvRule:null,pvDot:null,pvLabel:null,anchor:"bottom",pvLegendPanel:null,textMargin:6,itemPadding:2.5,markerSize:15,font:"10px sans-serif",_calcLayout:function(f){return this._getBulletRootScene().layout(f)},_createCore:function(bi){var bh=bi.clientSize;bi=this._getBulletRootScene();var bg=bi.vars.itemPadding,bb=bi.vars.size,ab=this.isAnchorTopOrBottom(),Z=ab?"top":"left",Y=this.anchorOpposite(Z),X=this.anchorLength(Z),O=this.anchorOrthoLength(Z),L=ab?"center":"middle",M=ab?"left":"top",I=this.anchorOpposite(M),F=0;switch(this.align){case I:F=bh[X]-bb.width;break;case L:F=(bh[X]-bb.width)/2;break}this.pvPanel.overflow("hidden");bh=this.pvPanel.add(R.Panel).data(bi.vars.rows)[M](F)[Z](function(){var bk=this.sibling();return bk?bk[Z]+bk[O]+bg[O]:0})[X](function(bk){return bk.size.width})[O](function(bk){return bk.size.height});var i;if(this.compatVersion()<=1){i=function(bk){return function(bl){return bk.call(this,bl.vars.value.rawValue)}}}this.pvLegendPanel=(new V.visual.Panel(this,bh,{extensionId:"panel",wrapper:i,noSelect:false,noHover:true,noClick:false,noClickSelect:true})).lockMark("data",function(bk){return bk.items}).lock(I,null).lock(Y,null).lockMark(M,function(bl){bl=bl.vars.itemPadding;var bk=this.sibling();return bk?bk[M]+bk[X]+bl[X]:0}).lockMark("height",function(bk){return bk.vars.clientSize.height}).lockMark(Z,ab?function(bk){bk=bk.vars;return bk.row.size.height/2-bk.clientSize.height/2}:0).lockMark("width",ab?function(bk){return bk.vars.clientSize.width}:function(){return this.parent.width()}).pvMark.def("hidden","false").fillStyle(function(){return this.hidden()=="true"?"rgba(200,200,200,1)":"rgba(200,200,200,0.0001)"});var u=(new V.visual.Panel(this,this.pvLegendPanel)).pvMark.left(0).top(0).right(null).bottom(null).width(function(bk){return bk.vars.markerSize}).height(function(bk){return bk.vars.clientSize.height});if(V.debug>=20){bh.strokeStyle("red");this.pvLegendPanel.strokeStyle("green");u.strokeStyle("blue")}bi.childNodes.forEach(function(bl){var bk=(new V.visual.Panel(this,u)).pvMark.visible(function(bm){return bm.parent===bl});bl.renderer().create(this,bk,bl.extensionPrefix,i)},this);this.pvLabel=(new V.visual.Label(this,u.anchor("right"),{extensionId:"label",wrapper:i})).intercept("textStyle",function(bl){var bk=this.delegateExtension()||"black";return bl.isOn()?bk:V.toGrayScale(bk,null,undefined,150)}).pvMark.textAlign("left").text(function(bk){return bk.vars.value.label}).lock("textMargin",function(bk){return bk.vars.textMargin-4}).font(function(bk){return bk.vars.font}).textDecoration(function(bk){return bk.isOn()?"":"line-through"});if(V.debug>=16){var bj=this.font,f=R.Text.fontHeight(bj)*2/3;u.anchor("right").add(R.Panel)[this.anchorLength()](0)[this.anchorOrthoLength()](0).fillStyle(null).strokeStyle(null).lineWidth(0).add(R.Line).data(function(bk){bk=V.text.getLabelBBox(R.Text.measure(bk.vars.value.label,bj).width,f,"left","middle",0,2).source.points();if(bk.length>1){bk=bk.concat(bk[0])}return bk}).left(function(bk){return bk.x}).top(function(bk){return bk.y}).strokeStyle("red").lineWidth(0.5).strokeDasharray("-")}},_onClick:function(f){f=f.scene;ad.fun.is(f.execute)&&f.executable()&&f.execute()},_getExtensionPrefix:function(){return"legend"},_getExtensionId:function(){return"area"},_getSelectableMarks:function(){return[this.pvLegendPanel]},_getBulletRootScene:function(){var f=this._rootScene;if(!f){this._rootScene=f=new V.visual.legend.BulletRootScene(null,{panel:this,source:this.chart.data,horizontal:this.isAnchorTopOrBottom(),font:this.font,markerSize:this.markerSize,textMargin:this.textMargin,itemPadding:this.itemPadding})}return f}});ad.type("pvc.CartesianAbstract",V.BaseChart).init(function(f){this.axesPanels={};this.base(f)}).add({_gridDockPanel:null,axesPanels:null,yAxisPanel:null,xAxisPanel:null,secondXAxisPanel:null,secondYAxisPanel:null,yScale:null,xScale:null,_getSeriesRoleSpec:function(){return{isRequired:true,defaultDimension:"series*",autoCreateDimension:true,requireIsDiscrete:true}},_getColorRoleSpec:function(){return{isRequired:true,defaultDimension:"color*",defaultSourceRole:"series",requireIsDiscrete:true}},_collectPlotAxesDataCells:function(i,f){this.base(i,f);if(i.option.isDefined("BaseAxis")){var M=ad.array.lazy(f,"base");ad.array.lazy(M,i.option("BaseAxis")-1).push({plot:i,role:this.visualRole(i.option("BaseRole")),dataPartValue:i.option("DataPart")})}if(i.option.isDefined("OrthoAxis")){M=i.option("Trend");var L=i.option.isDefined("Stacked")?i.option("Stacked"):undefined;f=ad.array.lazy(f,"ortho");var I=ad.array.to(i.option("OrthoRole")),F={dataPartValue:i.option("DataPart"),isStacked:L,trend:M,nullInterpolationMode:i.option("NullInterpolationMode")},u=ad.array.lazy(f,i.option("OrthoAxis")-1);I.forEach(function(X){var O=ObjectFactory.create(F);O.role=this.visualRole(X);u.push(O)},this)}},_addAxis:function(f){this.base(f);switch(f.type){case"base":case"ortho":this.axes[f.orientedId]=f;if(f.v1SecondOrientedId){this.axes[f.v1SecondOrientedId]=f}break}return this},_generateTrendsDataCell:function(i){var f=i.trend;if(f){f=V.trends.get(f.type);var u=[];this._generateTrendsDataCellCore(u,i,f);u.length&&this.data.owner.add(u)}},_generateTrendsDataCellCore:function(){},_setAxesScales:function(f){this.base(f);if(!f||this.parent){["base","ortho"].forEach(function(i){(i=this.axesByType[i])&&i.forEach(this._createAxisScale,this)},this)}},_createAxisScale:function(i){var f=this.base(i),u=i.type==="ortho";if(u||i.type==="base"){if(u&&i.index===1){this.secondScale=f}else{i.index||(this[i.orientation+"Scale"]=f)}}return f},_createContent:function(f){this._createFocusWindow();this._gridDockPanel=new V.CartesianGridDockingPanel(this,this.basePanel,{margins:f.margins,paddings:f.paddings});["base","ortho"].forEach(function(i){(i=this.axesByType[i])&&ad.query(i).reverse().each(function(u){this._createAxisPanel(u)},this)},this);this._createPlotPanels(this._gridDockPanel,{clickAction:f.clickAction,doubleClickAction:f.doubleClickAction})},_createFocusWindow:function(){if(this.selectableByFocusWindow()){var i,f=this.focusWindow;if(f){i=f._exportData()}f=this.focusWindow=new V.visual.CartesianFocusWindow(this);i&&f._importData(i);f._initFromOptions()}else{this.focusWindow&&delete this.focusWindow}},_createAxisPanel:function(i){if(i.option("Visible")){var f,u=i.option("Title");ad.empty(u)||(f=new V.AxisTitlePanel(this,this._gridDockPanel,i,{title:u,font:i.option("TitleFont")||i.option("Font"),anchor:i.option("Position"),align:i.option("TitleAlign"),margins:i.option("TitleMargins"),paddings:i.option("TitlePaddings"),titleSize:i.option("TitleSize"),titleSizeMax:i.option("TitleSizeMax")}));u=new V.AxisPanel(this,this._gridDockPanel,i,{anchor:i.option("Position"),size:i.option("Size"),sizeMax:i.option("SizeMax"),clickAction:i.option("ClickAction"),doubleClickAction:i.option("DoubleClickAction"),useCompositeAxis:i.option("Composite"),font:i.option("Font"),labelSpacingMin:i.option("LabelSpacingMin"),grid:i.option("Grid"),gridCrossesMargin:i.option("GridCrossesMargin"),ruleCrossesMargin:i.option("RuleCrossesMargin"),zeroLine:i.option("ZeroLine"),desiredTickCount:i.option("DesiredTickCount"),showTicks:i.option("Ticks"),showMinorTicks:i.option("MinorTicks")});if(f){u.titlePanel=f}this.axesPanels[i.id]=u;this.axesPanels[i.orientedId]=u;if(i.index<=1&&i.v1SecondOrientedId){this[i.v1SecondOrientedId+"AxisPanel"]=u}return u}},_onLaidOut:function(){this.plotPanelList&&this.plotPanelList[0]&&["base","ortho"].forEach(function(f){(f=this.axesByType[f])&&f.forEach(this._setCartAxisScaleRange,this)},this)},_setCartAxisScaleRange:function(i){var f=this.plotPanelList[0]._layoutInfo.clientSize;i.setScaleRange(i.orientation==="x"?f.width:f.height);return i.scale},_getAxesRoundingPaddings:function(){function i(O,M,L){var I=F[O];if(I==null||M>I){F[O]=M;F[O+"Locked"]=L}else{if(L){F[O+"Locked"]=L}}}function f(L){if(L){var I=L.getScaleRoundingPaddings();if(I){L=L.orientation==="x";i(L?"left":"bottom",I.begin,I.beginLocked);i(L?"right":"top",I.end,I.endLocked)}}}var F={},u=this.axesByType;["base","ortho"].forEach(function(I){(I=u[I])&&I.forEach(f)});return F},markEventDefaults:{strokeStyle:"#5BCBF5",lineWidth:"0.5",textStyle:"#5BCBF5",verticalOffset:10,verticalAnchor:"bottom",horizontalAnchor:"right",forceHorizontalAnchor:false,horizontalAnchorSwapLimit:80,font:"10px sans-serif"},markEvent:function(Y,X,O){var M=this,L=M.axes.base,I=M.axes.ortho,F=L.scale,u=M.data.owner.dimensions(L.role.grouping.firstDimensionName());if(L.isDiscrete()){M._warn("Can only mark events in charts with a continuous base scale.");return M}O=$.extend({},M.markEventDefaults,O);Y=u.read(Y,X);X=F(Y.value);F=F.range();L=F[1];if(X<F[0]||X>L){this._warn("Cannot mark event because it is outside the base scale's domain.");return this}F=this.plotPanelList[0].pvPanel;I=I.scale.range()[1];u=O.horizontalAnchor;if(!O.forceHorizontalAnchor){var i=u==="right";L=i?L-X:X;var f=R.Text.measure(Y.label,O.font).width;if(L<f){u=i?"left":"right"}}L=O.verticalAnchor==="top"?O.verticalOffset:I-O.verticalOffset;F.add(R.Line).data([0,I]).bottom(ad.identity).left(X).lineWidth(O.lineWidth).strokeStyle(O.strokeStyle).anchor(u).visible(function(){return !this.index}).top(L).add(R.Label).font(O.font).text(Y.label).textStyle(O.textStyle);return M},defaults:{panelSizeRatio:0.9,timeSeries:false,timeSeriesFormat:"%Y-%m-%d"}});ad.type("pvc.GridDockingPanel",V.BasePanel).add({anchor:"fill",_calcLayout:function(bx){function bw(bC,bE){if(bb){bk._group("LayoutCycle "+(i?"- Disaster MODE":"#"+(bE+1)))}try{var bz,bD,bA=bx.canChange!==false&&!i&&bC>0,by;bE=false;var bB;bz=0;for(bD=bh.length;bz<bD;){bb&&bk._group("SIDE Child #"+(bz+1));try{by=br(bh[bz],bA);if(!i&&by){bB=false;if((by&L)!==0){bb&&bk._log("SIDE Child #"+(bz+1)+" changed overflow paddings");if(!bE){bE=true;bx.requestPaddings=bx.paddings}}if((by&u)!==0){if(bC>0){bb&&bk._log("SIDE Child #"+(bz+1)+" changed normal paddings");bB=true}else{V.debug>=2&&bk._warn("SIDE Child #"+(bz+1)+" changed paddings but no more iterations possible.")}}if((by&F)!==0){i=true;bw(0);return false}if(bB){return true}}}finally{bb&&bk._groupEnd()}bz++}if(bE){bb&&bk._log("Restarting due to overflowPaddings change");return false}bz=0;for(bD=Y.length;bz<bD;){bb&&bk._group("FILL Child #"+(bz+1));try{by=bs(Y[bz],bA);if(!i&&by){bB=false;if((by&u)!==0){if(bC>0){V.debug>=5&&bk._log("FILL Child #"+(bz+1)+" increased paddings");bB=true}else{V.debug>=2&&bk._warn("FILL Child #"+(bz+1)+" increased paddings but no more iterations possible.")}}if((by&F)!==0){i=true;bw(0);return false}if(bB){return true}}}finally{bb&&bk._groupEnd()}bz++}return false}finally{bb&&bk._groupEnd()}}function bv(bz,bA){for(var by=0;bz--;){if(bA(bz,by)===false){return true}by++}return false}function bu(by){var bz=by.anchor;if(bz){if(bz==="fill"){Y.push(by);by=by.paddings.resolve(I.referenceSize);ab=az.resolvedMax(ab,by)}else{ad.hasOwn(Z,bz)||ad.fail.operationInvalid("Unknown anchor value '{0}'",[bz]);bh.push(by)}}}function bt(bz,bA){bb&&bk._group("SIDE Child #"+(bA+1));try{bA=0;var by=bz.anchor;I.paddings=bo(by,ab);bz.layout(new at(bj),I);if(bz.isVisible){bA|=bm(by,ab,bz);bq(by,bz);bp(by,bz)}return bA}finally{bb&&bk._groupEnd()}}function bs(bz,bB){var by=0,bA=bz.anchor;I.paddings=bo(bA,ab);I.canChange=bB;bz.layout(new at(bj),I);if(bz.isVisible){by|=bm(bA,ab,bz,bB);bq(bA,bz);bn(bz,bA)}return by}function br(bB,bD){var bz=0;if(bB.isVisible){var bC=bB.anchor,bA=M[bC],by=O[bC];bA=new at(ad.set({},bA,bj[bA],by,bB[by]));I.paddings=bo(bC,ab);I.canChange=bD;bB.layout(bA,I);if(bB.isVisible){(bz=bm(bC,ab,bB,bD)|bl(bC,bx.paddings,bB,bD))||bn(bB,bB.align)}}return bz}function bq(bz,bA){var by;if(bz==="fill"){bz="left";by=bg.left+bj.width/2-bA.width/2}else{by=bg[bz]}bA.setPosition(ad.set({},bz,by))}function bp(bz,bA){var by=O[bz];bA=bA[by];bg[bz]+=bA;bj[by]-=bA}function bn(bz,bB){var by;if(bB==="fill"){bB="middle"}var bA;switch(bB){case"top":case"bottom":case"left":case"right":by=bB;bA=bg[by];break;case"middle":by="bottom";bA=bg.bottom+bj.height/2-bz.height/2;break;case"center":by="left";bA=bg.left+bj.width/2-bz.width/2;break}bz.setPosition(ad.set({},by,bA))}function bo(bz,bA){var by=new az;bi(bz).forEach(function(bB){by.set(bB,bA[bB])});return by}function bm(bB,bD,bz,bC){var bA=bz._layoutInfo.requestPaddings,by=0;if(bA){if(bb&&V.debug>=10){bk._log("=> clientSize="+V.stringify(bz._layoutInfo.clientSize));bk._log("<= requestPaddings="+V.stringify(bA))}bi(bB).forEach(function(bH){var bG=bD[bH]||0,bE=Math.floor(10000*(bA[bH]||0))/10000,bF=bE-bG;bG=Math.max(1,Math.abs(0.01*bG));if(bF!==0&&Math.abs(bF)>=bG){if(bC){by|=u;bD[bH]=bE;bb&&bk._log("Changed padding "+bH+" <- "+bE)}else{V.debug>=2&&bk._warn("CANNOT change but child wanted to: "+bH+"="+bE)}}});if(by){bB=az.names.map(function(bE){return(bD[bE]||0).toFixed(0)}).join("|");if(ad.hasOwn(X,bB)){V.debug>=2&&bk._warn("LOOP detected!!!!");by|=F}else{X[bB]=true}bD.width=bD.left+bD.right;bD.height=bD.top+bD.bottom}}return by}function bl(bB,bD,bz,bC){var bA=bz._layoutInfo.overflowPaddings||f,by=0;bb&&V.debug>=10&&bk._log("<= overflowPaddings="+V.stringify(bA));bi(bB).forEach(function(bH){if(bA.hasOwnProperty(bH)){var bG=bD[bH]||0,bE=Math.floor(10000*(bA[bH]||0))/10000;bE-=bg[bH];var bF=bE-bG;bG=Math.max(1,Math.abs(0.05*bG));if(bF>=bG){if(bC){by|=L;bD[bH]=bE;bb&&bk._log("changed overflow padding "+bH+" <- "+bE)}else{V.debug>=2&&bk._warn("CANNOT change overflow padding but child wanted to: "+bH+"="+bE)}}}});if(by){bD.width=bD.left+bD.right;bD.height=bD.top+bD.bottom}return by}function bi(by){switch(by){case"left":case"right":return az.vnames;case"top":case"bottom":return az.hnames;case"fill":return az.names}}var bk=this;if(bk._children){var bb=V.debug>=5,bg=new az(0),ab=new az(0),bj=ad.copyOwn(bx.clientSize),O=V.BasePanel.orthogonalLength,Z=V.BasePanel.relativeAnchor,M=V.BasePanel.parallelLength,I={force:true,referenceSize:bx.clientSize},Y=[],bh=[],X={},F=1,u=2,L=4,f=new az,i=false;bb&&bk._group("CCC GRID LAYOUT clientSize = "+V.stringify(bj));try{this._children.forEach(bu);bb&&bk._group("Phase 1 - Determine MARGINS and FILL SIZE from SIDE panels");try{bh.forEach(bt)}finally{if(bb){bk._groupEnd();bk._log("Final FILL margins = "+V.stringify(bg));bk._log("Final FILL border size = "+V.stringify(bj))}}bb&&bk._group("Phase 2 - Determine COMMON PADDINGS");try{bv(9,bw)}finally{if(bb){bk._groupEnd();bk._log("Final FILL clientSize = "+V.stringify({width:bj.width-ab.width,height:bj.height-ab.height}));bk._log("Final COMMON paddings = "+V.stringify(ab))}}bx.gridMargins=new az(bg);bx.gridPaddings=new az(ab);bx.gridSize=new at(bj)}finally{bb&&bk._groupEnd()}}}});ad.type("pvc.CartesianGridDockingPanel",V.GridDockingPanel).init(function(i,f,u){this.base(i,f,u);this._plotBgPanel=new V.PlotBgPanel(i,this)}).add({_getExtensionId:function(){return !this.chart.parent?"content":"smallContent"},_createCore:function(i){var f=this.chart,I=f.axes,F=I.x,u=I.y;if(F.option("Grid")){this.xGridRule=this._createGridRule(F)}if(u.option("Grid")){this.yGridRule=this._createGridRule(u)}this.base(i);f.focusWindow&&this._createFocusWindow(i);if(f.compatVersion()<=1?!!(F.option("EndLine")||u.option("EndLine")):ad.get(f.options,"plotFrameVisible",true)){this.pvFrameBar=this._createFrame(i,I)}if(F.scaleType!=="discrete"&&F.option("ZeroLine")){this.xZeroLine=this._createZeroLine(F,i)}if(u.scaleType!=="discrete"&&u.option("ZeroLine")){this.yZeroLine=this._createZeroLine(u,i)}},_createGridRule:function(bg){var bb=bg.scale;if(!bb.isNull){var ab=bg.role.grouping.isDiscrete(),Z=this._getAxisGridRootScene(bg);if(Z){var Y=this._layoutInfo.gridMargins,X=this._layoutInfo.gridPaddings,O=bg.orientation==="x"?"left":"bottom",M=this.anchorLength(O),L=this.anchorOrtho(O),F=this.anchorOpposite(L),I=Y[O]+X[O];X=Y[L];Y=Y[F];Z=Z.leafs().array();var u=Z.length;ab&&u&&Z.push(Z[u-1]);var i;if(this.compatVersion()<=1){i=function(bh){return function(bi){return bh.call(this,bi.vars.tick.rawValue)}}}bg=(new V.visual.Rule(this,this.pvPanel,{extensionId:bg.extensionPrefixes.map(function(bh){return bh+"Grid"}),wrapper:i})).lock("data",Z).lock(M,null).override("defaultColor",function(){return R.color("#f0f0f0")}).pvMark.lineWidth(1).antialias(true)[L](X)[F](Y).zOrder(-12).events("none");if(ab){var f=bb.range().step/2;bg.lock(O,function(bh){return I+bb(bh.vars.tick.value)+(this.index===u?f:-f)})}else{bg.lock(O,function(bh){return I+bb(bh.vars.tick.value)})}return bg}}},_getAxisGridRootScene:function(i){var f=this.data,F=i.isDiscrete();if(F){f=i.role.flatten(f,{visible:true})}var u=new V.visual.CartesianAxisRootScene(null,{panel:this,source:f});F?f.childNodes.forEach(function(I){new V.visual.CartesianAxisTickScene(u,{source:I,tick:I.value,tickRaw:I.rawValue,tickLabel:I.label})}):(i.ticks||i.calcContinuousTicks()).forEach(function(I){new V.visual.CartesianAxisTickScene(u,{tick:I,tickRaw:I,tickLabel:i.scale.tickFormat(I)})},this);return u},_createFrame:function(i,f){if(!(f.base.scale.isNull||f.ortho.scale.isNull&&(!f.ortho2||f.ortho2.scale.isNull))){var I=i.gridMargins;i=I.left;f=I.right;var F=I.top;I=I.bottom;var u=[];if(this.compatVersion()<=1){u.push("xAxisEndLine");u.push("yAxisEndLine")}u.push("plotFrame");return(new V.visual.Panel(this,this.pvPanel,{extensionId:u})).pvMark.lock("left",i).lock("right",f).lock("top",F).lock("bottom",I).lock("fillStyle",null).events("none").strokeStyle("#666666").lineWidth(1).antialias(false).zOrder(-8)}},_createZeroLine:function(X,O){var M=X.scale;if(!M.isNull){var L=M.domain();if(L[0]*L[1]<-1e-12){L=X.orientation==="x"?"left":"bottom";var I=this.anchorLength(L),F=this.anchorOrtho(L),u=this.anchorOpposite(F),i=O.gridMargins;O=i[L]+O.gridPaddings[L]+M(0);M=i[F];i=i[u];var f=new V.visual.Scene(null,{panel:this});return(new V.visual.Rule(this,this.pvPanel,{extensionId:X.extensionPrefixes.map(function(Y){return Y+"ZeroLine"})})).lock("data",[f]).lock(I,null).lock(F,M).lock(u,i).lock(L,O).override("defaultColor",function(){return R.color("#666666")}).pvMark.events("none").lineWidth(1).antialias(true).zOrder(-9)}}},_createFocusWindow:function(bD){function bC(){O[bi]=0-bk[bq];O[bh]=X+bk[bq]+bk[bg]}function bB(){var bH=arguments[arguments.length-1].drag.phase==="end";by._selectingByRubberband=!bH;ab.render();Y.render();var bG=O[bj],bE=O[bj]+O[bl];if(!br){var bF=bb-bG;bG=bb-bE;bE=bF}bw._updatePosition(bG,bE,bH,true)}function bA(bI,bH){var bF=bI.m,bG=bF[I],bJ,bK=O[F],bE;switch(bH){case"new":bJ=0;bE="begin";break;case"resize-begin":bJ=bK;bE="begin";break;case"move":bJ=bK;bE="begin";break;case"resize-end":bJ=bG-O[I];bE="end";break}bG={type:bH,target:bE,point:bG,length:bJ,length0:bK,min:bI.min[I],max:bI.max[I],minView:0,maxView:bb};bw._constraintPosition(bG);bF[I]=bG.point;switch(bH){case"resize-begin":bG.max=Math.min(bG.max,O[I]+O[F]);break;case"resize-end":bG.min=Math.max(bG.min,O[I]);break}bI.min[I]=bG.min;bI.max[I]=bG.max}var bz=this,by=bz.topRoot,bx=bz.chart,bw=bx.focusWindow.base,bv=bw.axis,bt=bv.scale;if(!bt.isNull){var bu=bw.option("Resizable"),bs=bw.option("Movable");bv=bv.isDiscrete();var br=bx.isOrientationVertical(),bp=br?"left":"top",bq=br?"top":"left",bn=bz.anchorOrthoLength(bp),bo=bz.anchorOpposite(bp),bm=bz.anchorOrthoLength(bq),bg=bz.anchorOpposite(bq),bj=br?"x":"y",bl="d"+bj,bi=br?"y":"x",bh="d"+bi;bx=bD.gridMargins;var bk=bD.gridPaddings;bx={left:bx.left+bk.left,right:bx.right+bk.right,top:bx.top+bk.top,bottom:bx.bottom+bk.bottom};bx.width=bx.left+bx.right;bx.height=bx.top+bx.bottom;bD=bD.clientSize;var bb=bD[bn]-bx[bn],X=bD[bm]-bx[bm],M=bk[bp],u=bk[bo],O=new V.visual.Scene(null,{panel:this});bD=bv?bt.range().step:0;bv=bD/2;O[bj]=bt(bw.begin)-bv;O[bl]=bD+(bt(bw.end)-bv)-O[bj];bC();var f=function(bE){return function(){return O[bE]}},i=function(){return Math.max(0,Math.min(bb,O[bj]))},Z=function(){var bF=i(),bE=O[bj]+O[bl];bE=Math.max(0,Math.min(bb,bE));return bE-bF};bt=function(bF,bE){return(new V.visual.Bar(bz,bF,{extensionId:bE,normalStroke:true,noHover:true,noSelect:true,noClick:true,noDoubleClick:true,noTooltip:true,showsInteraction:false})).pvMark.lock("data").lock("visible").lock(bp,i).lock(bn,Z).lock(bq,f(bi)).lock(bm,f(bh)).lock(bg).lock(bo).sign};var ab=this._plotBgPanel.pvPanel.borderPanel;ab.lock("data",[O]);bs&&bu?ab.paddingPanel.lock("events","all").lock("cursor","crosshair").event("mousedown",R.Behavior.select().autoRender(false).collapse(br?"y":"x").positionConstraint(function(bE){return bA(bE,bE.phase==="start"?"new":"resize-end")})).event("selectstart",function(bE){bC();bB(bE)}).event("select",bB).event("selectend",bB):ab.paddingPanel.events("all");bD=bt(ab.paddingPanel,"focusWindowBg").override("defaultColor",function(){return V.invisibleFill}).pvMark;bs?bD.lock("events","all").lock("cursor","move").event("mousedown",R.Behavior.drag().autoRender(false).collapse(br?"y":"x").positionConstraint(function(bE){bA(bE,"move")})).event("drag",bB).event("dragend",bB):bD.events("none");var Y=(new V.visual.Panel(bz,bz.pvPanel)).pvMark.lock("data",[O]).lock("visible").lock("fillStyle",V.invisibleFill).lock("left",bx.left).lock("right",bx.right).lock("top",bx.top).lock("bottom",bx.bottom).lock("zOrder",10).lock("events",function(){var bE=O.drag;return bE&&bE.phase!=="end"?"all":"none"}).lock("cursor",function(){var bE=O.drag;return bE&&bE.phase!=="end"?bE.type==="drag"||bE.type==="select"&&!bu?"move":br?"ew-resize":"ns-resize":null}).antialias(false);(new V.visual.Bar(bz,Y,{extensionId:"focusWindowBaseCurtain",normalStroke:true,noHover:true,noSelect:true,noClick:true,noDoubleClick:true,noTooltip:true,showsInteraction:false})).override("defaultColor",function(bE){return bE==="stroke"?null:"rgba(20, 20, 20, 0.1)"}).pvMark.lock("data",[O,O]).lock("visible").lock("events","none").lock(bp,function(){return !this.index?-M:i()+Z()}).lock(bo,function(){return !this.index?null:-u}).lock(bn,function(){return !this.index?M+i():null}).lock(bq,f(bi)).lock(bm,f(bh)).lock(bg);var L=bt(Y,"focusWindow").override("defaultColor",function(){return null}).pvMark.lock("events","none");bs=function(bH){var bG=bH==="left"||bH==="top"?"begin":"end",bE="linear-gradient(to "+bz.anchorOpposite(bH)+", rgba(20, 20, 20, 0.1), #444 90%)",bF=(new V.visual.Bar(bz,L.anchor(bH),{extensionId:bw.id+"Grip"+ad.firstUpperCase(bG),normalStroke:true,noHover:true,noSelect:true,noClick:true,noDoubleClick:true,noTooltip:true,showsInteraction:false})).override("defaultColor",function(bJ){return bJ==="stroke"?null:bE}).pvMark.lock("data").lock("visible")[bq](O[bi])[bm](O[bh]);if(bu){var bI="resize-"+bG;bF.lock("events","all")[bn](5).cursor(br?"ew-resize":"ns-resize").event("mousedown",R.Behavior.resize(bH).autoRender(false).positionConstraint(function(bJ){bA(bJ,bI)}).preserveOrtho(true)).event("resize",bB).event("resizeend",bB)}else{bF.events("none")[bn](1)}return bF};bs(bp);bs(bo);var I=bj,F=bl}},_getDatumsOnRect:function(i,f,O){var M=this.chart,L=M.axesPanels.x,I=M.axesPanels.y,F,u;if(L){F=new ad.Map;L._getDatumsOnRect(F,f,O);F.count||(F=null)}if(I){u=new ad.Map;I._getOwnDatumsOnRect(u,f,O);u.count||(u=null)}if(F&&u){F.intersect(u,i);O.toggle=true}else{if(F){i.copy(F)}else{u?i.copy(u):M.plotPanelList.forEach(function(X){X._getDatumsOnRect(i,f,O)},this)}}}});ad.type("pvc.CartesianAbstractPanel",V.PlotPanel).init(function(Z,Y,X,O){function M(ab){F[ab.type]=ab;F[ab.orientedId]=ab;if(ab.v1SecondOrientedId){F[ab.v1SecondOrientedId]=ab}}function L(bg,bb){var ab=u[bg];if(ab==null||bb>ab){f=true;u[bg]=bb}}function I(bb){var ab=bb&&bb.option("Offset");if(ab!=null&&ab>0&&ab<1){if(bb.orientation==="x"){L("left",ab);L("right",ab)}else{L("top",ab);L("bottom",ab)}}}this.base(Z,Y,X,O);var F=this.axes;M(Z._getAxis("base",X.option("BaseAxis")-1));M(Z._getAxis("ortho",X.option("OrthoAxis")-1));var u={},f=false,i=Z.axesByType;["base","ortho"].forEach(function(ab){(ab=i[ab])&&ab.forEach(I)});if(f){this.offsetPaddings=u}}).add({offsetPaddings:null,_calcLayout:function(f){f.requestPaddings=this._calcRequestPaddings(f)},_calcRequestPaddings:function(i){var f,L=this.offsetPaddings;if(L){var I=this.chart._getAxesRoundingPaddings(),F=i.clientSize,u=i.paddings;az.names.forEach(function(X){var O=V.BasePanel.orthogonalLength[X],M=F[O];O=M+u[O];if(!I[X+"Locked"]){O=O*(L[X]||0);M=M*(I[X]||0);(f||(f={}))[X]=Math.max(O-M,0)}},this)}return f},_createCore:function(){this.pvPanel.zOrder(-10);var f=this.chart.options.leafContentOverflow||"auto";(f==="auto"?ad.query(["ortho","base"]).select(function(i){return this.axes[i]},this).any(function(i){return i.option("FixedMin")!=null||i.option("FixedMax")!=null}):f==="hidden")&&this.pvPanel.borderPanel.overflow("hidden")}});ad.type("pvc.PlotBgPanel",V.BasePanel).init(function(i,f,u){this.base(i,f,u)}).add({anchor:"fill",_getExtensionId:function(){return"plotBg"},_createCore:function(f){this.pvPanel.borderPanel.lock("zOrder",-13).antialias(false);this.base(f)}});ad.type("pvc.CategoricalAbstract",V.CartesianAbstract).init(function(f){this.base(f);if(f=this.parent){this._catRole=f._catRole}}).add({_initVisualRoles:function(){this.base();this._catRole=this._addVisualRole("category",this._getCategoryRoleSpec())},_getCategoryRoleSpec:function(){return{isRequired:true,defaultDimension:"category*",autoCreateDimension:true}},_generateTrendsDataCellCore:function(bh,bg,bb){function ab(bl){var bm=F?null:function(bn){return bn.atoms[L].value},bk=function(bn){if((bn=f.child(bn.key))&&bl){bn=bn.child(bl.key)}return bn?bn.dimensions(I).sum(u):null};bm=ad.create(O,{rows:ad.query(i),x:bm,y:bk});var bj=bb.model(bm),bi=f.owner.dimensions(M).intern(this.root._firstTrendAtomProto);bj&&i.forEach(function(bn,bp){bp=bj.sample(F?bp:bn.atoms[L].value,bk(bn),bp);if(bp!=null){var bo=f.child(bn.key);bn=bo||bn;if(bl){if(bo=bo&&bo.child(bl.key)){bo=ObjectFactory.create(bo._datums[0].atoms)}else{bo=ObjectFactory.create(bn._datums[0].atoms);ad.copyOwn(bo,bl.atoms)}}else{bo=ObjectFactory.create(bn._datums[0].atoms)}bo[I]=bp;bo[M]=bi;bh.push(ad.set(new V.data.Datum(bn.owner,bo),"isVirtual",true,"isTrend",true,"trendType",bb.type))}},this)}var Z=this._serRole,Y=this._catRole,X=bg.role,O=bg.trend;this._warnSingleContinuousValueRole(X);var M=this._dataPartRole.firstDimensionName(),I=X.firstDimensionName(),L,F=Y.isDiscrete();F||(L=Y.firstDimensionName());var u={zeroIfNone:false};X={ignoreNulls:false};var f=this.visibleData(bg.dataPartValue);bg=this.visibleData(null,X);var i=Y.flatten(bg,X).childNodes;ad.scope(function(){return Z&&Z.isBound()?Z.flatten(f).children():ad.query([null])}).each(ab,this)},_interpolateDataCell:function(i){var f=i.nullInterpolationMode;if(f){var F;switch(i.nullInterpolationMode){case"linear":F=V.data.LinearInterpolationOper;break;case"zero":F=V.data.ZeroInterpolationOper;break;case"none":break;default:throw ad.error.argumentInvalid("nullInterpolationMode",""+f)}if(F){this._warnSingleContinuousValueRole(i.role);f=this.visibleData(i.dataPartValue);if(f.childCount()>0){var u=this.visibleData(null,{ignoreNulls:false});(new F(u,f,this._catRole,this._serRole,i.role,true)).interpolate()}}}},_createVisibleData:function(i,f){var I=this._serRole&&this._serRole.flattenedGrouping(),F=this._catRole.flattenedGrouping();i=this.partData(i);var u=ad.get(f,"ignoreNulls");f=ad.get(f,"inverted",false);u={visible:true,isNull:u?false:null};return I?i.groupBy(f?[I,F]:[F,I],u):i.groupBy(F,u)},_getContinuousVisibleCellExtent:function(i,f){var L=f.role;switch(L.name){case"series":case"category":return this.base(i,f)}this._warnSingleContinuousValueRole(L);var I=f.dataPartValue,F=L.firstDimensionName();L=this.visibleData(I);var u=i.scaleUsesAbs();if(i.type!=="ortho"||!f.isStacked){return L.leafs().select(function(M){M=M.dimensions(F).sum();return u&&M<0?-M:M}).range()}return L.children().select(function(O){var M=this._getStackedCategoryValueExtent(O,F,u);if(M){return{range:M,group:O}}},this).where(ad.notNully).reduce(function(O,M){return this._reduceStackedCategoryValueExtent(O,M.range,M.group)}.bind(this),null)},_getStackedCategoryValueExtent:function(i,f,I){var F=null,u=null;i.children().select(function(L){L=L.dimensions(f).sum();return I&&L<0?-L:L}).each(function(L){if(L!=null){if(L>=0){F+=L}else{u+=L}}});if(F==null&&u==null){return null}return{max:F||0,min:u||0}},_reduceStackedCategoryValueExtent:function(i,f){return V.unionExtents(i,f)},_coordinateSmallChartsLayout:function(i){this.base(i);var f=0,I,F=null,u={};this.children.forEach(function(X){X.basePanel.layout();var O,M=X.titlePanel;if(M){I||(I=M.anchorOrthoLength());O=M[I];if(O>f){f=O}}var L=X.axesPanels;F||(F=ad.query(ad.ownKeys(L)).where(function(Y){return Y===L[Y].axis.id}).select(function(Y){u[Y]={axis:0,title:0};return Y}).array());F.forEach(function(Y){var Z=L[Y];Y=u[Y];var ab=Z.axis.orientation==="x"?"height":"width";O=Z[ab];if(O>Y.axis){Y.axis=O}if(Z=Z.titlePanel){O=Z[ab];if(O>Y.title){Y.title=O}}})},this);this.children.forEach(function(O){if(f>0){var M=O.titlePanel;M.size=M.size.clone().set(I,f)}var L=O.axesPanels;F.forEach(function(Z){var X=L[Z];Z=u[Z];var Y=X.axis.orientation==="x"?"height":"width";X.size=X.size.clone().set(Y,Z.axis);if(X=X.titlePanel){X.size=X.size.clone().set(Y,Z.title)}});O.basePanel.invalidateLayout()},this)},defaults:{orthoAxisOrdinal:false}});ad.type("pvc.CategoricalAbstractPanel",V.CartesianAbstractPanel).init(function(i,f,F,u){this.base(i,f,F,u);this.stacked=F.option("Stacked")});ad.type("pvc.AxisPanel",V.BasePanel).init(function(i,f,I,F){F=ad.create(F,{anchor:I.option("Position")});var u=F.anchor||this.anchor;this.axis=I;this.base(i,f,F);this.roleName=I.role.name;this.isDiscrete=I.role.isDiscrete();this._extensionPrefix=I.extensionPrefixes;if(this.labelSpacingMin==null){this.labelSpacingMin=this.isDiscrete?0.25:1.5}if(this.showTicks==null){this.showTicks=!this.isDiscrete}if(F.font===undefined){if(i=this._getConstantExtension("label","font")){this.font=i}}if(F.tickLength===undefined){F=+this._getConstantExtension("ticks",this.anchorOrthoLength(u));if(!isNaN(F)&&isFinite(F)){this.tickLength=F}}}).add({pvRule:null,pvTicks:null,pvLabel:null,pvRuleGrid:null,pvScale:null,isDiscrete:false,roleName:null,axis:null,anchor:"bottom",tickLength:6,scale:null,ruleCrossesMargin:true,font:"9px sans-serif",labelSpacingMin:null,desiredTickCount:null,showMinorTicks:true,showTicks:null,hiddenLabelText:"\u00b7",_isScaleSetup:false,_createLogInstanceId:function(){return this.base()+" - "+this.axis.id},getTicks:function(){return this._layoutInfo&&this._layoutInfo.ticks},_calcLayout:function(i){var f=this.axis.scale;if(!this._isScaleSetup){this.scale=this.pvScale=f;this.extend(f,"scale");this._isScaleSetup=true}if(f.isNull){i.axisSize=0}else{this._calcLayoutCore(i)}return this.createAnchoredSize(i.axisSize,i.clientSize)},_calcLayoutCore:function(i){var f=i.desiredClientSize[this.anchorOrthoLength()];i.axisSize=f;if(this.isDiscrete&&this.useCompositeAxis){if(i.axisSize==null){i.axisSize=50}}else{this._readTextProperties(i);this._calcTicks();if(this.scale.type==="discrete"){this._tickIncludeModulo=this._calcDiscreteTicksIncludeModulo()}this._calcAxisSizeFromLabel(i);if(i.axisSize==null){i.axisSize=i.requiredAxisSize}this._calcMaxTextLengthThatFits();this._calcOverflowPaddings()}},_calcAxisSizeFromLabel:function(f){this._calcTicksLabelBBoxes(f);this._calcAxisSizeFromLabelBBox(f)},_readTextProperties:function(i){var f=this._getExtension("label","textAngle");i.isTextAngleFixed=f!=null;i.textAngle=ad.number.as(f,0);i.textMargin=ad.number.as(this._getExtension("label","textMargin"),3);f=this._getExtension("label","textAlign");if(typeof f!=="string"){f=this.isAnchorTopOrBottom()?"center":this.anchor=="left"?"right":"left"}i.textAlign=f;f=this._getExtension("label","textBaseline");if(typeof f!=="string"){switch(this.anchor){case"right":case"left":case"center":f="middle";break;case"bottom":f="top";break;default:f="bottom"}}i.textBaseline=f},_calcAxisSizeFromLabelBBox:function(i){var f=i.maxLabelBBox,u=this.tickLength+this._getLabelBBoxQuadrantLength(f,this.anchor);f.sourceAngle===0&&this.isAnchorTopOrBottom()||(u+=this.tickLength);i.requiredAxisSize=u},_getLabelBBoxQuadrantLength:function(i,f){var u;switch(f){case"left":u=-i.x;break;case"right":u=i.x2;break;case"top":u=-i.y;break;case"bottom":u=i.y2;break}return Math.max(u,0)},_calcOverflowPaddings:function(){if(this._layoutInfo.canChange){this._calcOverflowPaddingsFromLabelBBox()}else{V.debug>=2&&this._warn("Layout cannot change. Skipping calculation of overflow paddings.")}},_calcOverflowPaddingsFromLabelBBox:function(){var bb=null,ab=this,Z=ab._layoutInfo,Y=Z.ticks;if(Y.length){var X=Z.ticksBBoxes,O=Z.paddings,M=ab.isAnchorTopOrBottom(),L=M?"left":"bottom",I=M?"right":"top",u=ab.scale,F=u.type==="discrete",i=Z.clientSize[ab.anchorLength()];this.axis.setScaleRange(i);var f=function(bi,bj,bg,bh){bi=ab._getLabelBBoxQuadrantLength(bi,bj);if(bi>1){bh=u(F?Y[bh].value:Y[bh]);bh=bg?bh-bi:bh+bi;bg=Math.max(0,bg?-bh:bh-i);if(bg>1){bg-=O[bj]||0;if(bg>1){if(F){bg*=1.05}if(bb){bh=bb[bj];if(bh==null||bh<bg){bb[bj]=bg}}else{bb=ad.set({},bj,bg)}}}}};X.forEach(function(bg,bh){f(bg,L,true,bh);f(bg,I,false,bh)});V.debug>=6&&bb&&ab._log("OverflowPaddings = "+V.stringify(bb))}Z.overflowPaddings=bb},_calcMaxTextLengthThatFits:function(){var bh=this._layoutInfo;if(this.compatVersion()<=1){bh.maxTextWidth=null}else{var bg=bh.clientSize[this.anchorOrthoLength()],bb=Math.min(bh.axisSize,bg);if(bb>=bh.requiredAxisSize-this.tickLength){bh.maxTextWidth=null}else{bg=bh.maxLabelBBox;bb=bb-2*this.tickLength;var ab,Z;switch(this.anchor){case"left":Z=R.vector(0,1);ab=R.vector(-bb,0);break;case"right":Z=R.vector(0,1);ab=R.vector(bb,0);break;case"top":Z=R.vector(1,0);ab=R.vector(0,-bb);break;case"bottom":Z=R.vector(1,0);ab=R.vector(0,bb);break}var Y=ab.norm(),X=bg.source.points(),O=X[0],M=X[1],I=X[2];X=X[3];var L=I.minus(X),F=M.minus(O),u=R.SvgScene.lineIntersect;F=u(ab,Z,O,F);ab=u(ab,Z,X,L);u=Z=bg.sourceTextWidth;var f=F.minus(O),i=f.length();if(i<=Z&&f.dot(L)>=0){u=O.dot(Y)<M.dot(Y)?i:F.minus(M).length()}O=ab.minus(X);M=O.length();if(M<=Z&&O.dot(L)>=0){u=X.dot(Y)<I.dot(Y)?Math.min(u,M):Math.min(u,ab.minus(I).length())}if(bg.sourceAlign==="center"){u-=Z-u}bh.maxTextWidth=u;V.debug>=3&&this._log("Trimming labels' text at length "+u.toFixed(2)+"px maxOrthoLength="+bb.toFixed(2)+"px")}}},_calcTicks:function(){var f=this._layoutInfo;f.textHeight=R.Text.fontHeight(this.font)*2/3;f.maxTextWidth=null;this.axis.setTicks(null);switch(this.scale.type){case"discrete":this._calcDiscreteTicks();break;case"timeSeries":this._calcTimeSeriesTicks();break;case"numeric":this._calcNumberTicks(f);break;default:throw ad.error.operationInvalid("Undefined axis scale type")}this.axis.setTicks(f.ticks);this.axis.setScaleRange(f.clientSize[this.anchorLength()]);f.maxTextWidth==null&&this._calcTicksTextLength(f)},_calcDiscreteTicks:function(){var i=this._layoutInfo,f=this.axis.role,L=f.flatten(this.data,{visible:true});i.data=L;i.ticks=L.childNodes;var I,F;f=f.grouping;if(f.isSingleDimension&&(F=f.firstDimensionType())&&F.valueType===Date){if((F=L.dimensions(F.name).extent())&&F.min!==F.max){var u=new R.Scale.linear(F.min.value,F.max.value);u.ticks();(I=this.axis.option("TickFormatter"))&&u.tickFormatter(I);I=function(M){return u.tickFormat(M.value)}}}I||(I=function(M){return M.absLabel});i.ticksText=L.childNodes.map(I);this._clearTicksTextDeps(i)},_clearTicksTextDeps:function(f){f.maxTextWidth=f.ticksTextLength=f.ticksBBoxes=null},_calcTimeSeriesTicks:function(){this._calcContinuousTicks(this._layoutInfo)},_calcNumberTicks:function(){var f=this.desiredTickCount;if(f==null){if(this.isAnchorTopOrBottom()){this._calcNumberHTicks();return}f=this._calcNumberVDesiredTickCount()}this._calcContinuousTicks(this._layoutInfo,f)},_calcContinuousTicks:function(i,f){this._calcContinuousTicksValue(i,f);this._calcContinuousTicksText(i)},_calcContinuousTicksValue:function(i,f){i.ticks=this.axis.calcContinuousTicks(f);if(V.debug>4){this._log("DOMAIN: "+V.stringify(this.scale.domain()));this._log("TICKS:  "+V.stringify(i.ticks))}},_calcContinuousTicksText:function(i){var f=i.ticksText=i.ticks.map(function(u){return this.scale.tickFormat(u)},this);this._clearTicksTextDeps(i);return f},_calcTicksTextLength:function(i){var f=0,F=this.font,u=i.ticksText||this._calcContinuousTicksText(i);u=i.ticksTextLength=u.map(function(I){I=R.Text.measure(I,F).width;if(I>f){f=I}return I});i.maxTextWidth=f;i.ticksBBoxes=null;return u},_calcTicksLabelBBoxes:function(i){var f=this,L=f._layoutInfo,I=i.ticksTextLength||f._calcTicksTextLength(i),F,u=L.maxTextWidth;i.ticksBBoxes=I.map(function(O){var M=f._calcLabelBBox(O);if(!F&&O===u){F=M}return M},f);L.maxLabelBBox=F},_calcLabelBBox:function(i){var f=this._layoutInfo;return V.text.getLabelBBox(i,f.textHeight,f.textAlign,f.textBaseline,f.textAngle,f.textMargin)},_calcDiscreteTicksIncludeModulo:function(){var X=this.axis.option("OverlappedLabelsMode");if(X!=="hide"&&X!=="rotatethenhide"){return 1}var O=this._layoutInfo;X=O.ticks.length;if(X<=2){return 1}var M=this.scale.range().step,L=O.textHeight,I=O.maxTextWidth;if(!(I>0&&L>0&&M>0)){return 1}var F=L*this.labelSpacingMin,u=R.Text.measure("x",this.font).width+F,i=O.textAngle,f=this.isAnchorTopOrBottom();O=Math.abs(Math[f?"sin":"cos"](i));i=Math.abs(Math[f?"cos":"sin"](i));L=O<1e-8?Infinity:Math.ceil((F+L)/(M*O));M=i<1e-8?Infinity:Math.ceil((u+I)/(M*i));M=Math.min(L,M);if(!isFinite(M)||M<1||Math.ceil(X/M)<2){M=1}return M},_tickMultipliers:[1,2,5,10],_calcNumberVDesiredTickCount:function(){var i=this._layoutInfo,f=i.textHeight*(1+Math.max(0,this.labelSpacingMin));i=i.clientSize[this.anchorLength()];i=Math.max(1,~~(i/f));if(i<=1){return 1}f=this.scale.domain();f=f[1]-f[0];if(f<=0){return i}i=f/i;var L=Math.floor(R.log(i,10));L=Math.pow(10,L);for(var I,F=this._tickMultipliers,u=0;u<F.length;u++){I=F[u]*L;if(I>=i){break}}return Math.max(1,Math.floor(f/I))},_calcNumberHTicks:function(){var bh=this._layoutInfo,bg=bh.clientSize[this.anchorLength()],bb=bh.textHeight*Math.max(0,this.labelSpacingMin),ab=this._calcNumberHDesiredTickCount(bb),Z=V.debug>=7,Y,X,O,M,I;do{Z&&this._log("calculateNumberHTicks TickCount IN desired = "+ab);O={};this._calcContinuousTicksValue(O,ab);var L=O.ticks,F=L.length;if(L.exponentOverflow){if(Y==null){if(L.exponent===this.exponentMin){M=O;Y=1}else{I=O;Y=-1}}else{if(Y===1){if(M){O=M}}else{if(I){O=I}}break}}else{if(X==null||F!==X){Z&&this._log("calculateNumberHTicks TickCount desired/resulting = "+ab+" -> "+F);X=F;this._calcContinuousTicksText(O);var u=this._calcNumberHLength(O,bb),f=O.excessLength=u-bg,i=O.error=Math.abs(f/bg);if(Z){this._log("calculateNumberHTicks error="+(f>=0?"+":"-")+(O.error*100).toFixed(0)+"% count="+F+" step="+L.step);this._log("calculateNumberHTicks Length client/resulting = "+bg+" / "+u+" spacing = "+bb)}if(f>0){if(ab===1){if(F===3&&i<=1){O.ticks.splice(1,1);O.ticksText.splice(1,1);O.ticks.step*=2}else{O.ticks.length=1;O.ticksText.length=1}delete O.maxTextWidth;break}if(M){O=M;break}I=O;Y=-1}else{if(i<=0.05||Y===-1){break}M=O;Y=+1}}}ab+=Y}while(1);if(O){bh.ticks=O.ticks;bh.ticksText=O.ticksText;bh.maxTextWidth=O.maxTextWidth;if(V.debug>=5){this._log("calculateNumberHTicks RESULT error="+(O.excessLength>=0?"+":"-")+(O.error*100).toFixed(0)+"% count="+O.ticks.length+" step="+O.ticks.step)}}Z&&this._log("calculateNumberHTicks END")},_calcNumberHDesiredTickCount:function(i){var f=this._layoutInfo,u=this.scale.domain().map(function(F){F=+F.toFixed(2);F=this.scale.tickFormat(F);return R.Text.measure(F,this.font).width},this);u=Math.max((u[1]+u[0])/2,f.textHeight);f=f.clientSize[this.anchorLength()];return Math.max(1,~~(f/(u+i)))},_calcNumberHLength:function(i,f){i=i.ticksText;var u=ad.query(i).select(function(F){return R.Text.measure(F,this.font).width},this).max();return Math.max(u,(i.length-1)*(u+f))},_createCore:function(){if(!this.scale.isNull){var i=this._layoutInfo.clientSize,f=this._layoutInfo.paddings,L=this.anchorOrtho(),I=this.anchorOpposite(L),F=this.anchorOrthoLength(L),u=this.ruleCrossesMargin?-f[L]:0;this._rSize=i=i[F]+(this.ruleCrossesMargin?f[I]:0)-u;f=this._getRootScene();this.pvRule=(new V.visual.Rule(this,this.pvPanel,{extensionId:"rule"})).lock("data",[f]).override("defaultColor",ad.fun.constant("#666666")).lock(this.anchorOpposite(),0).lock(L,u).lock(F,i).pvMark.zOrder(30).strokeDasharray(null).lineCap("square");if(this.isDiscrete){this.useCompositeAxis?this.renderCompositeOrdinalAxis():this.renderOrdinalAxis()}else{this.renderLinearAxis()}}},_getExtensionId:function(){return""},_getRootScene:function(){if(!this._rootScene){var Y=this._rootScene=new V.visual.CartesianAxisRootScene(null,{panel:this,source:this._getRootData()}),X=this._layoutInfo,O=X.ticks,M=X.ticksText;if(this.isDiscrete){if(this.useCompositeAxis){this._buildCompositeScene(Y)}else{var L=this._tickIncludeModulo;X=this.hiddenLabelText;Y.vars.tickIncludeModulo=L;Y.vars.hiddenLabelText=X;var I,F,u,i;if(L>2){V.debug>=3&&this._info("Showing only one in every "+L+" tick labels");var f=Y.group.owner.keySep;u=function(){var Z=I.map(function(bb){return bb.key}).join(f),ab=F.slice(0,10).join(", ")+(F.length>10?", ...":"");(new V.visual.CartesianAxisTickScene(Y,{source:I,tick:Z,tickRaw:Z,tickLabel:ab,isHidden:true})).dataIndex=i;I=F=i=null}}O.forEach(function(Z,bb){var ab=bb%L!==0;if(ab&&L>2){if(i==null){i=bb}(I||(I=[])).push(Z);(F||(F=[])).push(M[bb])}else{I&&u();(new V.visual.CartesianAxisTickScene(Y,{source:Z,tick:Z.value,tickRaw:Z.rawValue,tickLabel:M[bb],isHidden:ab})).dataIndex=bb}});I&&u()}}else{O.forEach(function(Z,ab){(new V.visual.CartesianAxisTickScene(Y,{tick:Z,tickRaw:Z,tickLabel:M[ab]})).dataIndex=ab},this)}}return this._rootScene},_buildCompositeScene:function(i){function f(L){var I=L.group;if(u){var F=L.vars.tick;L.nodeValue=L.value=F.rawValue;L.nodeLabel=L.label=F.label}I.childCount()&&I.children().each(function(O){var M=new V.visual.CartesianAxisTickScene(L,{source:O,tick:O.value,tickRaw:O.rawValue,tickLabel:O.label});M.dataIndex=O.childIndex();f(M)})}var u=this.compatVersion()<=1;i.vars.tick=new ax("","");f(i)},_getRootData:function(){var i=this.chart,f=i.data;if(this.isDiscrete&&this.useCompositeAxis){var u=this.anchor;f=i.visualRoles[this.roleName].select(f,{visible:true,reverse:u=="bottom"||u=="left"})}return f},renderOrdinalAxis:function(){var bh=this.scale,bg=this.hiddenLabelText,bb=this._tickIncludeModulo*bh.range().step/2,ab=this.anchorOpposite(),Z=this.anchorLength(),Y=this.anchorOrtho(),X=this.anchorOrthoLength(),O=this.pvRule,M=this._getRootScene(),I=this._layoutInfo,L=this.compatVersion()<=1,F;if(L){var u=function(bi){this.value=this.absValue=bi.rawValue;this.path=(this.nodeName=""+(this.value||""))?[this.nodeName]:[];this.label=this.absLabel=bi.label};u.prototype.toString=function(){return""+this.value};F=function(bi){return function(bk){var bj=ObjectFactory.create(this);bj.index=this.parent.index;return bi.call(bj,new u(bk.vars.tick))}}}M=(new V.visual.Panel(this,this.pvPanel,{extensionId:"ticksPanel"})).lock("data",M.childNodes).lock(ab,0).lockMark(Y,function(bi){return bi.isHidden?bh(bi.previousSibling.vars.tick.value)+bb:bh(bi.vars.tick.value)}).lock("strokeDasharray",null).lock("strokeStyle",null).lock("fillStyle",null).lock("lineWidth",0).pvMark.zOrder(20);if(L||this.showTicks){this.pvTicks=(new V.visual.Rule(this,M,{extensionId:"ticks",wrapper:F})).lock("data").intercept("visible",function(){return !this.scene.isHidden&&this.delegateExtension(true)}).optional("lineWidth",1).lock(ab,0).lock(Y,0).lock(Z,null).optional(X,this.tickLength*2/3).override("defaultColor",function(){if(L){return R.Color.names.transparent}return O.scene?O.scene[0].strokeStyle:"#666666"}).pvMark}var f=this.font,i=this._layoutInfo.maxTextWidth;isFinite(i)||(i=0);this.pvLabel=(new V.visual.Label(this,M,{extensionId:"label",showsInteraction:true,noClick:false,noDoubleClick:false,noSelect:false,noTooltip:false,noHover:false,wrapper:F})).intercept("visible",function(bi){return !bi.isHidden?this.delegateExtension(true):!!bi.vars.hiddenLabelText}).intercept("text",function(bi){var bj;if(bi.isHidden){bj=bg}else{bj=this.delegateExtension();if(bj===undefined){bj=bi.vars.tick.label}if(i&&(!this.showsInteraction()||!this.scene.isActive)){bj=V.text.trimToWidthB(i,bj,f,"..",false)}}return bj}).pvMark.zOrder(40).lock(ab,this.tickLength).lock(Y,0).font(f).textStyle("#666666").textAlign(I.textAlign).textBaseline(I.textBaseline);this._debugTicksPanel(M)},_getTooltipFormatter:function(i){if(this.axis.option("TooltipEnabled")){i.gravity=this._calcTipsyGravity();var f=this.axis.option("TooltipFormat");if(f){return function(F){return f.call(F,F.scene)}}var u=this.axis.option("TooltipAutoContent");if(u==="summary"){return this._summaryTooltipFormatter}if(u==="value"){i.isLazy=false;return function(F){return F.scene.vars.tick.label}}}},_debugTicksPanel:function(i){if(V.debug>=16){var f=this._layoutInfo,u=f.ticksBBoxes||this._calcTicksLabelBBoxes(f);i.add(R.Panel)[this.anchorOpposite()](this.tickLength)[this.anchorOrtho()](0)[this.anchorLength()](0)[this.anchorOrthoLength()](0).fillStyle(null).strokeStyle(null).lineWidth(0).visible(function(F){return !F.isHidden}).add(R.Line).data(function(F){F=u[F.dataIndex].source.points();if(F.length>1){F=F.concat(F[0])}return F}).left(function(F){return F.x}).top(function(F){return F.y}).strokeStyle("red").lineWidth(0.5).strokeDasharray("-")}},renderLinearAxis:function(){var Z=this.scale,Y=this.pvRule,X=this.anchorOpposite(),O=this.anchorLength(),M=this.anchorOrtho(),L=this.anchorOrthoLength(),I=this._getRootScene(),F;if(this.compatVersion()<=1){F=function(ab){return function(bg){var bb=ObjectFactory.create(this);bb.index=this.parent.index;return ab.call(bb,bg.vars.tick.rawValue)}}}I=(new V.visual.Panel(this,this.pvPanel,{extensionId:"ticksPanel"})).lock("data",I.childNodes).lock(X,0).lockMark(M,function(ab){return Z(ab.vars.tick.value)}).lock("strokeStyle",null).lock("fillStyle",null).lock("lineWidth",0).pvMark.zOrder(20);if(this.showTicks){var u=this.pvTicks=(new V.visual.Rule(this,I,{extensionId:"ticks",wrapper:F})).lock("data").override("defaultColor",function(){return Y.scene?Y.scene[0].strokeStyle:"#666666"}).lock(X,0).lock(M,0).lock(O,null).optional(L,this.tickLength).pvMark;if(this.showMinorTicks){var f=this._layoutInfo.ticks,i=f.length;f=i>1?Math.abs(Z(f[1])-Z(f[0]))/2:0;this.pvMinorTicks=(new V.visual.Rule(this,this.pvTicks,{extensionId:"minorTicks",wrapper:F})).lock("data").intercept("visible",function(){return this.index<i-1&&(!u.scene||u.scene[0].visible)&&this.delegateExtension(true)}).override("defaultColor",function(){return u.scene?u.scene[0].strokeStyle:R.Color.names.d}).lock(X,0).lock(O,null).optional(L,this.tickLength/2).lockMark(M,f).pvMark}}this.renderLinearAxisLabel(I,F);this._debugTicksPanel(I)},renderLinearAxisLabel:function(i,f){var O=this.anchorOpposite(),M=this.anchorOrtho(),L=this.font,I=this._layoutInfo.maxTextWidth;isFinite(I)||(I=0);var F=this.pvLabel=(new V.visual.Label(this,i,{extensionId:"label",noHover:false,showsInteraction:true,wrapper:f})).lock("data").intercept("text",function(X){X=X.vars.tick.label;if(I&&(!this.showsInteraction()||!this.scene.isActive)){X=V.text.trimToWidthB(I,X,L,"..",false)}return X}).pvMark.lock(O,this.tickLength).lock(M,0).zOrder(40).font(this.font).textStyle("#666666"),u=this.pvPanel.root;this.isAnchorTopOrBottom()?F.textBaseline(O).textAlign(function(X){if(this.index===0){X=F.toScreenTransform().transformHPosition(F.left());if(X<=0){return"left"}}else{if(this.index===X.parent.childNodes.length-1){X=F.toScreenTransform().transformHPosition(F.left());if(X>=u.width()){return"right"}}}return"center"}):F.textAlign(O).textBaseline(function(X){if(this.index===0){X=F.toScreenTransform().transformVPosition(F.top());if(X>=u.height()){return"bottom"}}else{if(this.index===X.parent.childNodes.length-1){X=F.toScreenTransform().transformVPosition(F.top());if(X<=0){return"top"}}}return"middle"})},_onV1Click:function(i,f){this.isDiscrete&&this.useCompositeAxis&&f.call(i.pvMark,i.scene,i.event)},_onV1DoubleClick:function(i,f){this.isDiscrete&&this.useCompositeAxis&&f.call(i.pvMark,i.scene,i.event)},_getSelectableMarks:function(){if(this.isDiscrete&&this.isVisible&&this.pvLabel){return this.base()}},renderCompositeOrdinalAxis:function(){var X=this.isAnchorTopOrBottom(),O=X?"h":"v",M=2,L=2,I=this.font,F=R.Text.fontHeight(I)/2,u=this._pvLayout=this.getLayoutSingleCluster();u.node.def("fitInfo",null).height(function(Y){var Z=V.text.getFitInfo(Y.dx,Y.dy,Y.vars.tick.label,I,F);if(!Z.h){if(O==="v"&&Z.v){L=Math.min(M,Y.depth)}else{M=Math.min(M,Y.depth)}}this.fitInfo(Z);return Y.dy});u.node.add(R.Bar).fillStyle("rgba(127,127,127,.001)").strokeStyle(function(Y){if(Y.maxDepth===1||!Y.maxDepth){return null}return"rgba(127,127,127,0.3)"}).lineWidth(function(Y){if(Y.maxDepth===1||!Y.maxDepth){return 0}return 0.5}).text(function(Y){return Y.vars.tick.label});var i=X?"center":this.anchor=="left"?"right":"left",f;if(this.compatVersion()<=1){f=function(Y){return function(Z){return Y.call(this,Z)}}}this.pvLabel=(new V.visual.Label(this,u.label,{extensionId:"label",noClick:false,noDoubleClick:false,noSelect:false,noTooltip:false,noHover:false,showsInteraction:true,wrapper:f,tooltipArgs:{options:{offset:F*2}}})).pvMark.def("lblDirection","h").textAngle(function(Y){if(Y.depth>=L&&Y.depth<M){this.lblDirection("v");return -Math.PI/2}if(Y.depth>=M){Y=Math.atan(Y.dy/Y.dx);if(Y>1.27){this.lblDirection("v");return -Math.PI/2}if(Y>0.3){this.lblDirection("d");return -Y}}this.lblDirection("h");return 0}).textMargin(1).textAlign(function(Y){return O!="v"||Y.depth>=L||Y.depth>=M?"center":i}).left(function(Y){return O!="v"||Y.depth>=L||Y.depth>=M?Y.x+Y.dx/2:i=="right"?Y.x+Y.dx:Y.x}).font(I).textStyle("#666666").text(function(Y){var Z=Y.vars.tick.label,ab=this.sign;if(!ab.scene.isActive||!ab.showsInteraction()){ab=this.fitInfo();switch(this.lblDirection()){case"h":if(!ab.h){return V.text.trimToWidthB(Y.dx,Z,I,"..")}break;case"v":if(!ab.v){return V.text.trimToWidthB(Y.dy,Z,I,"..")}break;case"d":if(!ab.d){Y=Math.sqrt(ad.sqr(Y.dy)+ad.sqr(Y.dx));return V.text.trimToWidthB(Y-F,Z,I,"..")}break}}return Z})},getLayoutSingleCluster:function(){var i=this._getRootScene(),f=this.anchor,L=i.group.treeHeight,I=this._layoutInfo.axisSize;L++;var F=I/L;F-=L>2?1/12*I:0;L=L/(L-1);var u=V.BasePanel.orthogonalLength[f];F=u=="width"?f==="left"?[-F,0]:[F,0]:f==="top"?[0,-F]:[0,F];this.pvRule.sign.override("defaultColor",ad.fun.constant(null)).override("defaultStrokeWidth",ad.fun.constant(0));I=this.pvRule.add(R.Panel)[u](I).strokeStyle(null).lineWidth(0).add(R.Panel)[u](I*L).strokeStyle(null).lineWidth(0);I.transform(R.Transform.identity.translate(F[0],F[1]));return I.add(R.Layout.Cluster.Fill).nodes(i.nodes()).orient(f)},_calcTipsyGravity:function(){switch(this.anchor){case"bottom":return"s";case"top":return"n";case"left":return"w";case"right":return"e"}return"s"}});ad.type("pvc.AxisTitlePanel",V.TitlePanelAbstract).init(function(i,f,F,u){this.axis=F;this.base(i,f,u);this._extensionPrefix=F.extensionPrefixes.map(function(I){return I+"Title"})}).add({_calcLayout:function(i){var f=this.axis.scale;if(!f||f.isNull){return new at(0,0)}return this.base(i)},_createCore:function(i){var f=this.axis.scale;if(!(!f||f.isNull)){return this.base(i)}}});ad.type("pvc.PiePanel",V.PlotPanel).init(function(i,f,I,F){var u=I.option("ValuesLabelStyle");this.base(i,f,I,F);this.explodedOffsetRadius=I.option("ExplodedSliceRadius");this.explodedSliceIndex=I.option("ExplodedSliceIndex");this.activeOffsetRadius=I.option("ActiveSliceRadius");this.labelStyle=u;if(u==="linked"){this.linkInsetRadius=I.option("LinkInsetRadius");this.linkOutsetRadius=I.option("LinkOutsetRadius");this.linkMargin=I.option("LinkMargin");this.linkHandleWidth=I.option("LinkHandleWidth");this.linkLabelSize=I.option("LinkLabelSize");this.linkLabelSpacingMin=I.option("LinkLabelSpacingMin")}}).add({pvPie:null,pvPieLabel:null,valueRoleName:"value",_getV1Datum:function(i){var f=i.datum;if(f){f=ObjectFactory.create(f);f.percent=i.vars.value.percent;f=f}return f},_calcLayout:function(bi){function bh(bk){return ad.between(au.resolve(bk,Z),0,Z)}function bg(bk){return ad.between(au.resolve(bk,ab),0,ab)}var bb=bi.clientSize,ab=bb.width,Z=Math.min(ab,bb.height)/2;if(!Z){return new at(0,0)}bb=R.vector(bb.width/2,bb.height/2);var Y=this._getConstantExtension("label","font");if(!ad.string.is(Y)){Y=this.valuesFont}var X=Z;if(this.valuesVisible&&this.labelStyle==="linked"){var O=bh(this.linkInsetRadius),L=bh(this.linkOutsetRadius),M=bg(this.linkMargin),I=bg(this.linkLabelSize),F=ad.number.to(this._getConstantExtension("label","textMargin"),3),i=R.Text.fontHeight(Y)*2/3,u=this.linkHandleWidth*i;M+=u;var bj=this.linkLabelSpacingMin*i,f=Math.max(0,ab/2-Z);f=Math.max(0,L+M+I-f);f=Math.max(0,L+i,f);if(f>=X){this.valuesVisible=false;V.debug>=2&&this._log("Hiding linked labels due to insufficient space.")}else{X-=f;bi.link={insetRadius:O,outsetRadius:L,elbowRadius:X+L,linkMargin:M,handleWidth:u,labelSize:I,maxTextWidth:I-F,labelSpacingMin:bj,textMargin:F,lineHeight:i}}}O=bh(this.explodedOffsetRadius);L=0;if(this.hoverable()){L=bh(this.activeOffsetRadius)}M=O+L;X=X-M;if(X<0){return new at(0,0)}bi.resolvePctRadius=bh;bi.center=bb;bi.clientRadius=Z;bi.normalRadius=X;bi.explodedOffsetRadius=O;bi.activeOffsetRadius=L;bi.maxOffsetRadius=M;bi.labelFont=Y},_createCore:function(Y){var X=this,O=X.chart,M=this._buildScene(),L=Y.center,I=Y.normalRadius,F,u=["slice"];if(this.compatVersion()<=1){u.push("");F=function(Z){return function(ab){return Z.call(this,ab.vars.value.value)}}}this.pvPie=(new V.visual.PieSlice(this,this.pvPanel,{extensionId:u,center:L,activeOffsetRadius:Y.activeOffsetRadius,maxOffsetRadius:Y.maxOffsetRadius,resolvePctRadius:Y.resolvePctRadius,wrapper:F,tooltipArgs:{options:{useCorners:true,gravity:function(){var Z=this.midAngle(),ab=Math.cos(Z)>=0;Z=Math.sin(Z)>=0;return ab?Z?"nw":"sw":Z?"ne":"se"}}}})).lock("data",M.childNodes).override("angle",function(){return this.scene.vars.value.angle}).override("defaultOffsetRadius",function(){var Z=X.explodedSliceIndex;if(Z==null||Z==this.pvMark.index){return Y.explodedOffsetRadius}return 0}).lock("outerRadius",function(){return O.animate(0,I)}).localProperty("innerRadiusEx",au.parse).intercept("innerRadius",function(){var Z=this.delegateExtension();if(Z==null){Z=this.pvMark.innerRadiusEx();Z=Z!=null?au.resolve(Z,this.pvMark.outerRadius())||0:0}return Z>0?O.animate(0,Z):0}).pvMark;if(this.valuesVisible){this.valuesFont=Y.labelFont;if(this.labelStyle==="inside"){this.pvPieLabel=V.visual.ValueLabel.maybeCreate(this,this.pvPie,{wrapper:F}).intercept("visible",function(Z){return Z.vars.value.angle>=0.001&&this.delegateExtension(true)}).override("defaultText",function(){return this.scene.vars.value.sliceLabel}).pvMark.textMargin(10)}else{if(this.labelStyle==="linked"){var i=Y.link;M.layoutLinkLabels(Y);this.pvLinkPanel=this.pvPanel.add(R.Panel).data(M.childNodes).localProperty("pieSlice").pieSlice(function(){return X.pvPie.scene[this.index]});this.pvLinkLine=(new V.visual.Line(this,this.pvLinkPanel,{extensionId:"linkLine",freePosition:true,noClick:true,noDoubleClick:true,noSelect:true,noTooltip:true,noHover:true,showsActivity:false})).lockMark("data",function(Z){var bh=this.parent.pieSlice(),bg=bh.startAngle+bh.angle/2,ab=bh.outerRadius-i.insetRadius,bb=bh.left+ab*Math.cos(bg);bh=bh.top+ab*Math.sin(bg);bg=Z.childNodes[0];if(!bg||!bg._isFirstDynamicScene){bg=new V.visual.PieLinkLineScene(Z,bb,bh,0);bg._isFirstDynamicScene=true}else{bg.x=bb;bg.y=bh}return Z.childNodes}).override("defaultColor",function(Z){return Z==="stroke"?"black":this.base(Z)}).override("defaultStrokeWidth",ad.fun.constant(0.5)).pvMark.lock("visible").lock("top",function(Z){return Z.y}).lock("left",function(Z){return Z.x});this.pvPieLabel=(new V.visual.Label(this,this.pvLinkPanel,{extensionId:"label",noClick:false,noDoubleClick:false,noSelect:false,noHover:false,showsInteraction:true})).lockMark("data",function(Z){return Z.lineScenes}).intercept("textStyle",function(){this._finished=false;var Z=this.delegate();if(Z&&!this._finished&&!this.mayShowActive()&&this.mayShowNotAmongSelected()){Z=this.dimColor(Z,"text")}return Z}).pvMark.lock("visible").left(function(Z){return Z.vars.link.labelX}).top(function(Z){return Z.vars.link.labelY+(this.index+1)*i.lineHeight}).textAlign(function(Z){return Z.vars.link.labelAnchor}).textMargin(i.textMargin).textBaseline("bottom").text(function(Z){return Z.vars.link.labelLines[this.index]});if(V.debug>=20){this.pvPanel.add(R.Panel).zOrder(-10).left(L.x-Y.clientRadius).top(L.y-Y.clientRadius).width(Y.clientRadius*2).height(Y.clientRadius*2).strokeStyle("red");this.pvPanel.strokeStyle("green");var f=R.Colors.category10();this.pvLinkLine.segmented(true).strokeStyle(function(){return f(this.index)})}}}this.pvPieLabel.font(Y.labelFont)}},_getExtensionId:function(){var f=[{abs:"content"}];this.chart.parent&&f.push({abs:"smallContent"});return f.concat(this.base())},renderInteractive:function(){this.pvPanel.render()},_buildScene:function(){var f=new V.visual.PieRootScene(this);this.sum=f.vars.sumAbs.value;return f}});ad.type("pvc.visual.PieRootScene",V.visual.Scene).init(function(Z){function Y(bb,ab){if(ab){ab=ab._datums;if(ab.length===1){return ab[0].atoms[L].label}}return I.format(bb)}function X(){var bb=this.vars.value;bb.angle=this.parent.angleScale(bb.value);var ab=Math.abs(bb.value)/f;bb.percent=new ax(ab,F(ab));bb.sliceLabel=this.sliceLabel()}var O=Z.visualRoles.category.flatten(Z.data,V.data.visibleKeyArgs);this.base(null,{panel:Z,source:O});var M=new V.visual.RoleVarHelper(this,Z.visualRoles.color,{roleVar:"color"}),L=Z.visualRoles[Z.valueRoleName].firstDimensionName(),I=O.dimensions(L),F=Z.chart.options.percentValueFormat,u=this,f=0,i=ad.type(V.visual.PieCategoryScene).init(function(bb,ab){this.base(u,{source:bb});this.vars.category=ax.fromComplex(bb);f+=Math.abs(ab);this.vars.value=new ax(ab,Y(ab,bb));M.onNewScene(this,true)});Z._extendSceneType("category",i,["sliceLabel","sliceLabelMask"]);O.children().each(function(bb){var ab=bb.dimensions(L).sum(V.data.visibleKeyArgs);ab!==0&&new i(bb,ab)});if(!f&&!Z.visualRoles.multiChart.isBound()){throw new InvalidDataException("Unable to create a pie chart, please check the data values.")}this.angleScale=R.Scale.linear(0,f).range(0,2*Math.PI).by1(Math.abs);this.vars.sumAbs=new ax(f,Y(f));this.childNodes.forEach(function(ab){X.call(ab)})}).add({layoutLinkLabels:function(i){var f=-Math.PI/2,F=[],u=[];this.childNodes.forEach(function(I){f=I.layoutI(i,f);(I.vars.link.dir>0?u:F).push(I)});this._distributeLabels(-1,F,i);this._distributeLabels(+1,u,i)},_distributeLabels:function(i,f,u){f.sort(function(I,F){return ad.compare(I.vars.link.targetY,F.vars.link.targetY)});this._distributeLabelsDownwards(f,u)&&this._distributeLabelsUpwards(f,u)&&this._distributeLabelsEvenly(f,u);f.forEach(function(F){F.layoutII(u)})},_distributeLabelsDownwards:function(X,O){var M=O.link.labelSpacingMin;O=O.clientSize.height;for(var L=false,I=0,F=X.length-1;I<F;I++){var u=X[I].vars.link;if(!I&&u.labelTop()<0){L=true}var i=X[I+1].vars.link,f=u.labelBottom()+M;if(i.labelTop()<f){u=i.labelHeight/2;f=f+u;u=O-u;if(f>u){L=true;i.targetY=u}else{i.targetY=f}}}return L},_distributeLabelsUpwards:function(i,f){f=f.link.labelSpacingMin;for(var M=false,L=i.length-1;L>0;L--){var I=i[L-1].vars.link,F=i[L].vars.link;if(L===1&&I.labelTop()<0){M=true}var u=F.labelTop()-f;if(I.labelBottom()>u){F=I.labelHeight/2;u=u-F;if(u<F){M=true;I.targetY=F}else{I.targetY=u}}}return M},_distributeLabelsEvenly:function(i,f){var I=0;i.forEach(function(L){I+=L.vars.link.labelHeight});var F=f.clientSize.height-I;if(i.length>1){F/=i.length-1}var u=0;i.forEach(function(M){M=M.vars.link;var L=M.labelHeight/2;u+=L;M.targetY=u;u+=L+F});return true}});ad.type("pvc.visual.PieLinkLabelVar").add({labelTop:function(){return this.targetY-this.labelHeight/2},labelBottom:function(){return this.targetY+this.labelHeight/2}});ad.type("pvc.visual.PieCategoryScene",V.visual.Scene).add({sliceLabelMask:function(){return this.panel().valuesMask},sliceLabel:function(){return this.format(this.sliceLabelMask())},layoutI:function(X,O){var M=this.vars.value,L=O+M.angle,I=(O+L)/2;O=this.vars.link=new V.visual.PieLinkLabelVar;var F=X.link;M=V.text.justify(M.sliceLabel,F.maxTextWidth,X.labelFont);var u=M.length;O.labelLines=M;O.labelHeight=u*F.lineHeight;this.lineScenes=ad.array.create(u,this);M=Math.cos(I);var i=Math.sin(I);I=(u=M>=0)?1:-1;O.labelAnchor=u?"left":"right";X=X.center;u=F.elbowRadius;i=X.y+u*i;var f=X.x+I*u;F=f+I*F.linkMargin;new V.visual.PieLinkLineScene(this,X.x+u*M,i);new V.visual.PieLinkLineScene(this,f,i);O.elbowY=i;O.targetY=i+0;O.targetX=F;O.dir=I;return L},layoutII:function(i){var f=this.vars.link,F=f.targetY,u=f.targetX;i=i.link.handleWidth;i>0&&new V.visual.PieLinkLineScene(this,u-f.dir*i,F);new V.visual.PieLinkLineScene(this,u,F);f.labelX=u;f.labelY=F-f.labelHeight/2}});ad.type("pvc.visual.PieLinkLineScene",V.visual.Scene).init(function(i,f,F,u){this.base(i,{source:i.group,index:u});this.x=f;this.y=F}).add(R.Vector);ad.type("pvc.PieChart",V.BaseChart).add({_animatable:true,pieChartPanel:null,_getColorRoleSpec:function(){return{isRequired:true,defaultSourceRole:"category",defaultDimension:"color*",requireIsDiscrete:true}},_initVisualRoles:function(){this.base();this._addVisualRole("category",{isRequired:true,defaultDimension:"category*",autoCreateDimension:true});this._addVisualRole("value",{isMeasure:true,isRequired:true,isPercent:true,requireSingleDimension:true,requireIsDiscrete:false,valueType:Number,defaultDimension:"value"})},_initPlotsCore:function(){new V.visual.PiePlot(this)},_createContent:function(i){this.base();if(this.compatVersion()<=1){var f=V.castNumber(this.options.innerGap)||0.95;f=ad.between(f,0.1,1);i.paddings=((1-f)*100/2).toFixed(2)+"%"}else{if(i.paddings==null){i.paddings=new au(0.025)}}this.pieChartPanel=new V.PiePanel(this,this.basePanel,this.plots.pie,ad.create(i,{scenes:ad.getPath(this.options,"pie.scenes")}))}});ad.type("pvc.BarAbstractPanel",V.CategoricalAbstractPanel).add({pvBar:null,pvBarLabel:null,pvCategoryPanel:null,pvSecondLine:null,pvSecondDot:null,_creating:function(){var i=this.defaultVisibleBulletGroupScene();if(i&&!i.hasRenderer()){var f=i.colorAxis,u=f.option("LegendDrawLine");if(!u||f.option("LegendDrawMarker")){f={drawMarker:true,markerShape:f.option("LegendShape"),drawRule:u,markerPvProto:new ar};this.extend(f.markerPvProto,"",{constOnly:true});i.renderer(new V.visual.legend.BulletItemDefaultRenderer(f))}}},_createCore:function(){this.base();var bi=this,bh=bi.chart,bg=bi.plot,bb=!!bi.stacked,ab=bi.isOrientationVertical(),Z=bi.visibleData({ignoreNulls:false}),Y=bi.visualRoles.series.flatten(Z);Z=bi._buildScene(Z,Y);var X=bi.axes.ortho,O=bi.axes.base,L=X.scale,M=L(0),I=X.sceneScale({sceneVarName:"value",nullToZero:false});X=O.sceneScale({sceneVarName:"category"});L=bg.option("BarSizeRatio");var F=bg.option("BarSizeMax"),i=bg.option("BarStackedMargin"),u=O.scale.range();O=u.band;u=u.step;var bj=ab===bb;if(bb){Y=O}else{Y=Y.childCount();Y=Y>0?O*L/Y:0}if(Y>F){Y=F}bi.barWidth=Y;bi.barStepWidth=u;var f;if(bi.compatVersion()<=1){f=function(bk){return function(bm){var bl=ObjectFactory.create(this.parent),bn=ObjectFactory.create(this);bn.parent=bl;var bp=bm.parent.childIndex(),bo=bm.childIndex();if(bb){bl.index=bp;bn.index=bo}else{bl.index=bo;bn.index=bp}return bk.call(bn,bm.vars.value.rawValue)}}}bi.pvBarPanel=(new V.visual.Panel(bi,bi.pvPanel,{panelType:R.Layout.Band,extensionId:"panel"})).lock("layers",Z.childNodes).lockMark("values",function(bk){return bk.childNodes}).lockMark("orient",ab?"bottom-left":"left-bottom").lockMark("layout",bb?"stacked":"grouped").lockMark("verticalMode",bi._barVerticalMode()).lockMark("yZero",M).pvMark.band.x(X).w(O).differentialControl(bi._barDifferentialControl()).item.order(bj?"reverse":null).h(function(bk){bk=I(bk);return bk!=null?bh.animate(0,bk-M):null}).w(Y).horizontalRatio(L).verticalMargin(i).end;this.pvBar=(new V.visual.Bar(bi,bi.pvBarPanel.item,{extensionId:"",freePosition:true,wrapper:f})).lockDimensions().pvMark.antialias(false);bg.option("OverflowMarkersVisible")&&this._addOverflowMarkers(f);if(bg=V.visual.ValueLabel.maybeCreate(bi,bi.pvBar,{wrapper:f})){bi.pvBarLabel=bg.pvMark.visible(function(){return this.scene.target[this.index][ab?"height":"width"]>=4})}},_barVerticalMode:function(){return null},_barDifferentialControl:function(){return null},_getV1Datum:function(i){var f=i.datum;if(f){f=ObjectFactory.create(f);f.percent=i.vars.value.percent;f=f}return f},_addOverflowMarkers:function(i){var f=this.axes.ortho;if(f.option("FixedMax")!=null){this.pvOverflowMarker=this._addOverflowMarker(false,f.scale,i)}if(f.option("FixedMin")!=null){this.pvUnderflowMarker=this._addOverflowMarker(true,f.scale,i)}},_addOverflowMarker:function(Y,X,O){var M=this.isOrientationVertical(),L=M?"bottom":"left",I=this.anchorOpposite(L),F=this.anchorOrthoLength(L),u=this.anchorLength(L),i=this._layoutInfo.paddings,f=Y?X.min-i[L]:X.max+i[I];X=Y?M?0:Math.PI/2:M?Math.PI:-Math.PI/2;return(new V.visual.Dot(this,this.pvBar.anchor("center"),{noSelect:true,noHover:true,noClick:true,noDoubleClick:true,noTooltip:true,freePosition:true,extensionId:Y?"underflowMarker":"overflowMarker",wrapper:O})).intercept("visible",function(Z){var ab=this.delegateExtension();if(ab!==undefined&&!ab){return false}Z=Z.vars.value.value;if(Z==null){return false}ab=this.pvMark.scene.target[this.index];Z=ab[L]+(Z>0?ab[F]:0);return Y?Z<f:Z>f}).lock(I,null).lock("shapeSize").pvMark.shape("triangle").shapeRadius(function(){return Math.min(Math.sqrt(10),this.scene.target[this.index][u]/2)}).shapeAngle(X).lineWidth(1.5).strokeStyle("red").fillStyle("white")[L](function(){return f+(Y?1:-1)*(this.shapeRadius()+2)})},renderInteractive:function(){this.pvPanel.render()},_buildScene:function(i,f){function O(Z){var X=new V.visual.Scene(M,{source:Z}),Y=Z.key;X.vars.series=ax.fromComplex(Z);u.onNewScene(X,false);L.forEach(function(bb){var ab=i.child(bb.key).child(Y);ab=new V.visual.Scene(X,{source:ab});(ab.vars.category=ax.fromComplex(bb)).group=bb;F.onNewScene(ab,true);u.onNewScene(ab,true)})}var M=new V.visual.Scene(null,{panel:this,source:i}),L=i.childNodes,I=this.visualRoles,F=new V.visual.RoleVarHelper(M,I.value,{roleVar:"value",hasPercentSubVar:this.stacked}),u=new V.visual.RoleVarHelper(M,I.color,{roleVar:"color"});f.children().each(O);return M}});ad.type("pvc.BarAbstract",V.CategoricalAbstract).init(function(f){this.base(f);if(f=this.parent){this._valueRole=f._valueRole}}).add({_initVisualRoles:function(){this.base();this._addVisualRole("value",{isMeasure:true,isRequired:true,isPercent:this.options.stacked,requireSingleDimension:true,requireIsDiscrete:false,valueType:Number,defaultDimension:"value"});this._valueRole=this.visualRoles.value},_getCategoryRoleSpec:function(){var f=this.base();f.requireIsDiscrete=true;return f},_initData:function(){this.base.apply(this,arguments);this._valueDim=this.data.dimensions(this._valueRole.firstDimensionName())}});ad.type("pvc.BarPanel",V.BarAbstractPanel).add({});ad.type("pvc.BarChart",V.BarAbstract).add({_animatable:true,_allowV1SecondAxis:true,_initPlotsCore:function(){var i=this.options,f=(new V.visual.BarPlot(this)).option("Trend");if(i.plot2){i=new V.visual.PointPlot(this,{name:"plot2",fixed:{DataPart:"1"},defaults:{ColorAxis:2,LinesVisible:true,DotsVisible:true}});f||(f=i.option("Trend"))}f&&new V.visual.PointPlot(this,{name:"trend",fixed:{DataPart:"trend",TrendType:"none",ColorRole:"series",NullInterpolatioMode:"none"},defaults:{ColorAxis:2,LinesVisible:true,DotsVisible:false}})},_hasDataPartRole:function(){return true},_createPlotPanels:function(i,f){var I=this.plots,F=new V.BarPanel(this,i,I.bar,ObjectFactory.create(f));this.barChartPanel=F;var u=I.plot2;if(u){V.debug>=3&&this._log("Creating Point panel.");u=new V.PointPanel(this,i,u,ObjectFactory.create(f));F.pvSecondLine=u.pvLine;F.pvSecondDot=u.pvDot;u._applyV1BarSecondExtensions=true}if(I=I.trend){V.debug>=3&&this._log("Creating Trends Point panel.");new V.PointPanel(this,i,I,ObjectFactory.create(f))}}});ad.type("pvc.NormalizedBarPanel",V.BarAbstractPanel).add({_barVerticalMode:function(){return"expand"}});ad.type("pvc.NormalizedBarChart",V.BarAbstract).add({_processOptionsCore:function(f){f.stacked=true;this.base(f)},_getContinuousVisibleExtentConstrained:function(i,f,u){if(i.type==="ortho"){return{min:0,max:100,minLocked:true,maxLocked:true}}return this.base(i,f,u)},_initPlotsCore:function(){new V.visual.NormalizedBarPlot(this)},_createPlotPanels:function(i,f){this.barChartPanel=new V.NormalizedBarPanel(this,i,this.plots.bar,ObjectFactory.create(f))}});ad.type("pvc.visual.legend.WaterfallBulletGroupScene",V.visual.legend.BulletGroupScene).init(function(i,f){f=ad.set(f,"clickMode","none");this.base(i,f);this.createItem(f)}).add({renderer:function(f){if(f!=null){this._renderer=f}return this._renderer},itemSceneType:function(){return V.visual.legend.WaterfallBulletItemScene}});ad.type("pvc.visual.legend.WaterfallBulletItemScene",V.visual.legend.BulletItemScene).init(function(i,f){this.base.apply(this,arguments);var u=V.visual.Interactive;this._ibits=u.Interactive|u.ShowsInteraction;this.color=ad.get(f,"color");this.vars.value=new ax(null,ad.get(f,"label"))});ad.type("pvc.WaterfallPanel",V.BarAbstractPanel).add({pvWaterfallLine:null,ruleData:null,_barDifferentialControl:function(){var f=this.chart._isFalling;return function(i){if(f&&!this.index){return 1}i=i.vars.category.group;if(i._isFlattenGroup&&!i._isDegenerateFlattenGroup){return -2}return f?-1:1}},_creating:function(){var i=this._getLegendBulletRootScene();if(i){if((i=i.firstChild)&&!i.hasRenderer()){var f={drawRule:true,drawMarker:false,rulePvProto:new ar};this.extend(f.rulePvProto,"line",{constOnly:true});i.renderer(new V.visual.legend.BulletItemDefaultRenderer(f))}}},_createCore:function(){this.base();var bl=this.chart,bk=this.isOrientationVertical(),bj=bk?"bottom":"left",bi=this.anchorOrtho(bj),bh=this._buildRuleScene(),bg=bl.axes.ortho.scale,bb=bg(0),ab=bl.axes.ortho.sceneScale({sceneVarName:"value"}),Z=bl.axes.base.sceneScale({sceneVarName:"category"}),X=bl.axes.base.scale,Y=this.barWidth/2,O=this.barWidth,M=this.barStepWidth,F=bl._isFalling,L=bl._waterColor;if(this.plot.option("AreasVisible")){var i=R.Colors.category10(),u=this._buildWaterGroupScene(),f=bg.range(),I=0.04*(f[1]-f[0]);this.pvWaterfallGroupPanel=(new V.visual.Panel(this,this.pvPanel,{extensionId:"group"})).lock("data",u.childNodes).pvMark.zOrder(-1).fillStyle(function(){return i(0).alpha(0.15)})[bi](function(bm){return X(bm.vars.category.valueLeft)-M/2})[this.anchorLength(bj)](function(bm){bm=bm.vars.category;return Math.abs(X(bm.valueRight)-X(bm.valueLeft))+M})[bj](function(bm){bm=bg(bm.vars.value.valueBottom)-I/2;return bl.animate(bb,bm)})[this.anchorOrthoLength(bj)](function(bm){bm=bm.vars.value;bm=bg(bm.valueTop)-bg(bm.valueBottom)+I;return bl.animate(0,bm)})}this.pvBar.sign.override("baseColor",function(bm){var bn=this.base(bm);if(bm==="fill"){if(!this.scene.vars.category.group._isFlattenGroup){return R.color(bn).alpha(0.5)}}return bn});this.pvWaterfallLine=(new V.visual.Rule(this,this.pvPanel,{extensionId:"line",noTooltip:false,noHover:false,noSelect:false,noClick:false,noDoubleClick:false})).lock("data",bh.childNodes).optional("visible",function(){return F&&!!this.scene.previousSibling||!F&&!!this.scene.nextSibling}).optional(bj,function(){return bb+bl.animate(0,ab(this.scene)-bb)}).optional(this.anchorLength(bj),M+O).optional(bi,F?function(){return Z(this.scene)-M-Y}:function(){return Z(this.scene)-Y}).override("defaultColor",function(){return L}).pvMark.antialias(true).lineCap("butt");if(this.plot.option("TotalValuesVisible")){this.pvWaterfallLabel=(new V.visual.Label(this,this.pvWaterfallLine,{extensionId:"lineLabel"})).intercept("visible",function(bm){if(bm.vars.category.group._isFlattenGroup){return false}return F||!!bm.nextSibling}).pvMark[bj](function(bm){return bb+bl.animate(0,ab(bm)-bb)})[this.anchorOrtho(bj)](Z).textAlign(bk?"center":"left").textBaseline(function(bm){if(!bk){return"middle"}bm=bm.vars.direction;if(bm==null){return"bottom"}return !F===(bm==="up")?"bottom":"top"}).textStyle(R.Color.names.darkgray.darker(2)).textMargin(5).text(function(bm){return bm.vars.value.label})}},_buildRuleScene:function(){function i(X){var O=X.group,M=new V.visual.Scene(L,{source:O});(M.vars.category=ax.fromComplex(O)).group=O;X=X.offset;M.vars.value=new ax(X,this.chart._valueDim.format(X))}function f(X,O){var M=X.vars.value.value;X.vars.direction=!O||I===M?null:F===I<M?"up":"down";I=M}var L=new V.visual.Scene(null,{panel:this,source:this.visibleData({ignoreNulls:false})}),I,F,u=this.chart._ruleInfos;if(u){u.forEach(i,this);u=ad.query(L.childNodes);(F=!this.chart._isFalling)||(u=u.reverse());u.each(f,this)}return L},_buildWaterGroupScene:function(){function Y(Z,bb){var ab=Z.children().where(function(bg){return bg.key!==""});if(ab.next()){bb&&X(Z,bb);bb++;do{Y(ab.item,bb)}while(ab.next())}}function X(Z,bk){var bj=new V.visual.Scene(F,{source:Z}),bh=bj.vars.category=ax.fromComplex(Z);bh.group=Z;bh.level=bk;bk=bj.vars.value={};var bi=u[Z.absKey],bb=bi.offset,bg=bi.range;bj=-bg.min+bg.max;var ab;if(i){Z=M(Z);ab=u[Z.absKey];Z=bi.group.value;bi=ab.group.value}else{Z=O(Z);ab=u[Z.absKey];Z=ab.group.value;bi=bi.group.value}bb=bb-bg.max;bh.valueLeft=Z;bh.valueRight=bi;bk.valueHeight=bj;bk.valueBottom=bb;bk.valueTop=bb+bj}function O(Z){var ab=Z.childNodes;return(ab=ab&&ab[0])?O(ab):Z}function M(Z){var ab=Z.childNodes;return(ab=ab&&ab[ab.length-1])?M(ab):Z}var L=this.chart,I=L._catRole.select(L.partData(this.dataPartValue),{visible:true}),F=new V.visual.Scene(null,{panel:this,source:I}),u,i,f=L._ruleInfos;if(f){u=ad.query(f).object({name:function(Z){return Z.group.absKey}});i=L._isFalling;Y(I,0)}return F}});ad.type("pvc.WaterfallChart",V.BarAbstract).init(function(f){this.base(f);if(f=this.parent){this._isFalling=f._isFalling}}).add({_animatable:true,_isFalling:true,_ruleInfos:null,_waterColor:R.color("#1f77b4").darker(),_processOptionsCore:function(f){f.stacked=true;f.baseAxisComposite=false;this.base(f);f.plot2=false},_initPlotsCore:function(){var f=new V.visual.WaterfallPlot(this);this._isFalling=f.option("Direction")==="down";this._catRole.setTraversalMode(V.visual.TraversalMode[this._isFalling?"FlattenDfsPre":"FlattenDfsPost"]);this._catRole.setRootLabel(f.option("AllCategoryLabel"))},_initLegendScenes:function(i){var f=this.plots.water,u=this._getConstantExtension(V.makeExtensionAbsId("line",f.extensionPrefixes),"strokeStyle");if(u){this._waterColor=R.color(u)}u=i._getBulletRootScene();new V.visual.legend.WaterfallBulletGroupScene(u,{extensionPrefix:V.buildIndexedId("",1),label:f.option("TotalLineLabel"),color:this._waterColor});this.base(i)},_reduceStackedCategoryValueExtent:function(i,f,L){var I=i?i.offset:0,F=f.min+f.max;if(!i){if(f){F=I+F;this._ruleInfos=[{offset:F,group:L,range:f}];return{min:f.min,max:f.max,offset:F}}return null}var u=this._isFalling;if(L._isFlattenGroup&&!L._isDegenerateFlattenGroup){F=-f.min;if(F>0){F=I+F;if(F>i.max){i.max=F}}F=-f.max;if(F<0){F=I+F;if(F<i.min){i.min=F}}}else{F=i.offset=I+(u?-1:1)*F;if(F>i.max){i.max=F}else{if(F<i.min){i.min=F}}}this._ruleInfos.push({offset:u?I:i.offset,group:L,range:f});return i},_createPlotPanels:function(i,f){this.wfChartPanel=new V.WaterfallPanel(this,i,this.plots.water,ad.create(f,{waterfall:this.options.waterfall}))}});ad.type("pvc.PointPanel",V.CategoricalAbstractPanel).init(function(i,f,F,u){this.base(i,f,F,u);this.linesVisible=F.option("LinesVisible");this.dotsVisible=F.option("DotsVisible");this.areasVisible=F.option("AreasVisible");if(!this.linesVisible&&!this.dotsVisible&&!this.areasVisible){this.linesVisible=true;F.option.specify({LinesVisible:true})}this.visualRoles.value=i.visualRole(F.option("OrthoRole"))}).add({pvLine:null,pvArea:null,pvDot:null,pvLabel:null,pvScatterPanel:null,_creating:function(){var i=this.defaultVisibleBulletGroupScene();if(i&&!i.hasRenderer()){var f=i.colorAxis,I=ad.nullyTo(f.option("LegendDrawMarker",true),this.dotsVisible||this.areasVisible),F=!I||ad.nullyTo(f.option("LegendDrawLine",true),this.linesVisible&&!this.areasVisible);if(I||F){var u={drawMarker:I,drawRule:F};if(I){f=f.option("LegendShape",true);if(this.dotsVisible){f||(f="circle");u.markerPvProto=(new R.Dot).lineWidth(1.5,V.extensionTag).shapeSize(12,V.extensionTag)}else{u.markerPvProto=new ar}u.markerShape=f;this._applyV1BarSecondExtensions&&this.chart.extend(u.markerPvProto,"barSecondDot",{constOnly:true});this.extend(u.markerPvProto,"dot",{constOnly:true})}if(F){u.rulePvProto=(new R.Line).lineWidth(1.5,V.extensionTag);this._applyV1BarSecondExtensions&&this.chart.extend(u.rulePvProto,"barSecondLine",{constOnly:true});this.extend(u.rulePvProto,"line",{constOnly:true})}i.renderer(new V.visual.legend.BulletItemDefaultRenderer(u))}}},_createCore:function(){this.base();var bh=this,bg=this.chart,bb=this.stacked,ab=this.dotsVisible,Z=this.areasVisible,Y=this.linesVisible,X=this.isOrientationVertical()?"bottom":"left",O=this.axes.base.role.grouping.isDiscrete(),M=this._buildScene(this.visibleData({ignoreNulls:false}),O);Z?this.pvPanel.zOrder(-7):this.pvPanel.zOrder(1);this.pvScatterPanel=(new V.visual.Panel(this,this.pvPanel,{extensionId:"panel"})).lock("data",M.childNodes).pvMark;var I=Z&&Y&&!bb?0.5:null,L;if(this.compatVersion()<=1){L=bb?function(bj){return function(bk){return bj.call(this,bk.vars.value.rawValue)}}:function(bj){return function(bm){var bl={category:bm.vars.category.rawValue,value:bm.vars.value.rawValue},bk=ObjectFactory.create(this);bk.index=bm.dataIndex;return bj.call(bk,bl)}}}var F=O&&bb?function(bj){return !bj.isNull||bj.isIntermediate}:function(bj){return !bj.isNull};M=bg.selectableByFocusWindow();this.pvArea=(new V.visual.Area(this,this.pvScatterPanel,{extensionId:"area",noTooltip:false,wrapper:L,noSelect:M,noRubberSelect:true,showsSelection:!M})).lockMark("data",function(bj){return bj.childNodes}).lockMark("visible",F).override("x",function(){return this.scene.basePosition}).override("y",function(){return this.scene.orthoPosition}).override("dy",function(){return bg.animate(0,this.scene.orthoLength)}).override("color",function(bj){return Z?this.base(bj):null}).override("baseColor",function(bj){bj=this.base(bj);if(!this._finished&&bj&&I!=null){bj=bj.alpha(I)}return bj}).override("dimColor",function(bk,bj){return bb?V.toGrayScale(bk,1,null,null).brighter():this.base(bk,bj)}).lock("events",Z?"painted":"none").pvMark;var u=ab&&!Y&&!Z,f=bb&&Z,i=["line"];this._applyV1BarSecondExtensions&&i.push({abs:"barSecondLine"});F=!u&&F;u=Z&&!Y;this.pvLine=(new V.visual.Line(this,this.pvArea.anchor(this.anchorOpposite(X)),{extensionId:i,freePosition:true,wrapper:L,noTooltip:u,noDoubleClick:u,noClick:u,noHover:u,noSelect:u||M,showsSelection:!M})).lockMark("visible",F).override("defaultColor",function(bj){bj=this.base(bj);if(!this._finished&&f&&bj){bj=bj.darker(0.6)}return bj}).override("normalColor",function(bj){return Y?bj:null}).override("interactiveColor",function(bk,bj){if(!Y&&!this.mayShowAnySelected()&&!this.mayShowActive()){return null}return this.base(bk,bj)}).override("baseStrokeWidth",function(){var bj;if(Y){bj=this.base()}return bj==null?1.5:bj}).intercept("strokeDasharray",function(){var bk=this.delegateExtension();if(bk===undefined){bk=this.scene;var bj=bk.isInterpolated;if(!bj){bj=(bj=bk.nextSibling)&&bj.isIntermediate&&bj.isInterpolated;if(!bj){bj=(bj=bk.previousSibling)&&bk.isIntermediate&&bj.isInterpolated}}bk=bj?". ":null}return bk}).pvMark;var bi=!(Z&&O&&bb);i=["dot"];this._applyV1BarSecondExtensions&&i.push({abs:"barSecondDot"});this.pvDot=(new V.visual.Dot(this,this.pvLine,{extensionId:i,freePosition:true,wrapper:L})).intercept("visible",function(){var bj=this.scene;return !bj.isNull&&!bj.isIntermediate&&this.delegateExtension(true)}).override("color",function(bk){if(!ab){if(!(this.scene.isActive||!bi&&this.scene.isSingle||bi&&this.scene.isAlone)){return V.invisibleFill}}var bj=this.base(bk);if(this.scene.isInterpolated&&bk==="fill"){return bj&&R.color(bj).brighter(0.5)}return bj}).override("defaultColor",function(bj){bj=this.base(bj);if(!this._finished&&f&&bj){bj=bj.darker(0.6)}return bj}).override("baseSize",function(){if(!ab){if((this.scene.isActive||!bi&&this.scene.isSingle||bi&&this.scene.isAlone)&&!this.scene.isActive){var bj=Math.max(bh.pvLine.lineWidth(),0.2)/2;return ad.sqr(bj)}}if(this.scene.isInterpolated){return 0.8*this.base()}return this.base()}).pvMark;if(X=V.visual.ValueLabel.maybeCreate(this,this.pvDot,{wrapper:L})){this.pvLabel=X.pvMark}},renderInteractive:function(){this.pvScatterPanel.render()},_buildScene:function(bm,bl){function bk(bx){for(var bs=[],br=bx.childNodes,bv,bn=0,bw=null,bt=0,bq=0,bu=br.length;bt<bu;bt++,bq++){var bo=br[bq],bp=bt*2;bs[bp]=bo;bj.call(this,bv,bo,f&&f[bp]);if(bo.isAlone&&!bw){bw=bo}bo.isNull||bn++;if(bv){if(bv=bi.call(this,bx,bv,bo,bq,f&&f[bp-1])){bs[bp-1]=bv;bq++}}bv=bo}if(bn===1&&bw&&bu===1){bw.isSingle=true}if(Z){f=bs}}function bj(bo,bq,bp){var bn=bq.vars.value.accValue;if(bp){if(bq.isNull&&!bl){bn=F}else{bn+=bp.vars.value.accValue}bq.vars.value.accValue=bn}bq.basePosition=L(bq);bq.orthoPosition=i;bq.orthoLength=u(bn)-i;if(bo=(!bo||bo.isNull)&&!bq.isNull){bo=bq.nextSibling;bo=!bo||bo.isNull}bq.isAlone=bo;bq.isSingle=false}function bi(bp,bu,bs,bo,bt){var br=bu.isNull||bs.isNull;if(br&&!this.areasVisible){return null}var bn,bq;if(br){if(bt&&bl){bt=bt.vars.value;bn=bt.accValue;bt=bt[Y.name]}else{bt=bn=F}bq=Z&&bl?bs.basePosition-L.range().step/2:bu.isNull?bs.basePosition:bu.basePosition}else{bn=bu.vars.value;bq=bs.vars.value;bt=(bq.value+bn.value)/2;bn=(bq.accValue+bn.accValue)/2;bq=(bs.basePosition+bu.basePosition)/2}bp=new V.visual.Scene(bp,{index:bo,source:bs.source});bp.dataIndex=bs.dataIndex;bp.vars.category=bs.vars.category;bo=new ax(bt,M.format(bt),bt);bo.accValue=bn;bp.vars.value=bo;bp.ownerScene=bs;bp.isInterpolated=bs.isInterpolated;bp.isIntermediate=true;bp.isSingle=false;bp.isNull=br;bp.isAlone=br&&bs.isNull&&bu.isNull;bp.basePosition=bq;bp.orthoPosition=i;bp.orthoLength=u(bn)-i;O.onNewScene(bp,true);return bp}function bh(bo){for(var br=bo.childNodes,bp=br.length,bn,bq;bp&&(bn=br[0]).isNull;){if((bq=bn.nextSibling)&&!bq.isNull){break}bo.removeAt(0);bp--}for(;bp&&(bn=br[bp-1]).isNull;){if((bq=bn.previousSibling)&&!bq.isNull){break}bo.removeAt(bp-1);bp--}}var bg=new V.visual.Scene(null,{panel:this,source:bm}),bb=bm.childNodes,ab=this.visualRoles.series,Y=this.visualRoles.value,Z=this.stacked,X=new V.visual.RoleVarHelper(bg,Y,{roleVar:"value",hasPercentSubVar:Z}),O=new V.visual.RoleVarHelper(bg,this.visualRoles.color,{roleVar:"color"}),I=Y.firstDimensionName(),M=bm.owner.dimensions(I),u=this.axes.ortho.scale,F=ad.scope(function(){var bn=u.domain(),bo=bn[0];bn=bn[1];if(bo*bn>=0){return bo>=0?bo:bn}return 0}),i=u(F),L=this.axes.base.sceneScale({sceneVarName:"category"});ad.scope(function(){return ab&&ab.grouping?ab.flatten(bm).children():ad.query([null])}).each(function(bn){var bo=new V.visual.Scene(bg,{source:bn||bm});bo.vars.series=ax.fromComplex(bn);O.onNewScene(bo,false);bb.forEach(function(br,bp){var bs=br;if(bn){bs=bs.child(bn.key)}var bq=new V.visual.Scene(bo,{source:bs});bq.dataIndex=bp;bq.vars.category=ax.fromComplex(br);X.onNewScene(bq,true);bp=bq.vars.value;br=bp.value;bp.accValue=br!=null?br:F;O.onNewScene(bq,true);bs=bs!=null&&bs.datums().prop("isInterpolated").any(ad.truthy);bq.isInterpolated=bs;bq.isNull=br==null;bq.isIntermediate=false},this)},this);I=bg.children().reverse().array();var f;I.forEach(bk,this);I.forEach(bh,this);return bg}});ad.type("pvc.PointAbstract",V.CategoricalAbstract).add({_animatable:true,_processOptionsCore:function(f){f.panelSizeRatio=1;this.base(f)},_hasDataPartRole:function(){return true},_initVisualRoles:function(){this.base();this._addVisualRole("value",{isMeasure:true,isRequired:true,isPercent:this.options.stacked,requireSingleDimension:true,requireIsDiscrete:false,valueType:Number,defaultDimension:"value"})},_initPlotsCore:function(){var i=this.options,f=this._createPointPlot().option("Trend");if(i.plot2){i=new V.visual.PointPlot(this,{name:"plot2",fixed:{DataPart:"1"},defaults:{ColorAxis:2,LinesVisible:true,DotsVisible:true}});f||(f=i.option("Trend"))}f&&new V.visual.PointPlot(this,{name:"trend",fixed:{DataPart:"trend",TrendType:"none",ColorRole:"series",NullInterpolatioMode:"none"},defaults:{ColorAxis:2,LinesVisible:true,DotsVisible:false}})},_initAxes:function(f){this.base(f);(f=this.axesByType.base)&&f.forEach(function(i){i.scaleType==="discrete"||i.option.defaults({Offset:0.01})});(f=this.axesByType.ortho)&&f.forEach(function(i){i.option.defaults({Offset:0.04})})},_createPlotPanels:function(i,f){var F=this.plots;this.scatterChartPanel=new V.PointPanel(this,i,F.point,ObjectFactory.create(f));var u=F.plot2;if(u){V.debug>=3&&this._log("Creating second Point panel.");new V.PointPanel(this,i,u,ObjectFactory.create(f))}if(F=F.trend){V.debug>=3&&this._log("Creating Trends Point panel.");new V.PointPanel(this,i,F,ObjectFactory.create(f))}},defaults:{tooltipOffset:10}});ad.type("pvc.DotChart",V.PointAbstract).add({_createPointPlot:function(){return new V.visual.PointPlot(this,{fixed:{DotsVisible:true}})}});ad.type("pvc.LineChart",V.PointAbstract).add({_createPointPlot:function(){return new V.visual.PointPlot(this,{fixed:{LinesVisible:true}})}});ad.type("pvc.AreaChart",V.PointAbstract).add({_createPointPlot:function(){return new V.visual.PointPlot(this,{fixed:{AreasVisible:true}})}});V.mStackedLineChart=ad.type("pvc.StackedLineChart",V.PointAbstract).add({_createPointPlot:function(){return new V.visual.PointPlot(this,{fixed:{LinesVisible:true,Stacked:true}})}});ad.type("pvc.StackedDotChart",V.PointAbstract).add({_createPointPlot:function(){return new V.visual.PointPlot(this,{fixed:{DotsVisible:true,Stacked:true}})}});V.mStackedAreaChart=ad.type("pvc.StackedAreaChart",V.PointAbstract).add({_createPointPlot:function(){return new V.visual.PointPlot(this,{fixed:{AreasVisible:true,Stacked:true},defaults:{LinesVisible:true}})}});ad.type("pvc.HeatGridPanel",V.CategoricalAbstractPanel).init(function(i,f,F,u){this.base(i,f,F,u);this.axes.size=i._getAxis("size",F.option("SizeAxis")-1);f=this.visualRoles;u=F.option("SizeRole");f.size=i.visualRole(u);this.useShapes=F.option("UseShapes");this.shape=F.option("Shape");this.nullShape=F.option("NullShape")}).add({defaultBorder:1,nullBorder:2,selectedBorder:2,_createCore:function(){var bi=this;bi.base();var bh=bi._calcCellSize(),bg=bi.isOrientationVertical()?"bottom":"left",bb=V.BasePanel.relativeAnchor[bg],ab=V.BasePanel.parallelLength[bg],Z=V.BasePanel.orthogonalLength[bg],Y=bi.visualRoles.series.flatten(bi.data,{visible:true}),X=bi._buildScene(bi.visibleData({ignoreNulls:false}),Y,bh);Y=X.isColorBound;var O=X.isSizeBound,L=bi._buildSignsWrapper(X),M=bi.compatVersion()<=1,I=this.axes.base.scale,F=this.axes.ortho.scale,i=I.range().step,u=F.range().step,bj=i/2,f=u/2;bg=(new V.visual.Panel(bi,bi.pvPanel)).pvMark.data(X.childNodes)[bg](function(bk){return F(bk.vars.series.value)-f})[Z](u);Z=["panel"];M&&Z.push("");Z={extensionId:Z,wrapper:L};bi.useShapes||ad.copy(Z,{noSelect:false,noHover:false,noClick:false,noDoubleClick:false,freeColor:false,noTooltip:M});bi.pvHeatGrid=(new V.visual.Panel(bi,bg,Z)).lock("data",function(bk){return bk.childNodes}).pvMark.lock(bb,function(bk){return I(bk.vars.category.value)-bj}).lock(ab,i).antialias(false);bi.shapes=bi.useShapes?bi._createShapesHeatMap(bh,L,Y,O):bi._createNoShapesHeatMap(Y);if(bi.valuesVisible&&!bi.valuesMask){bi.valuesMask=bi._getDefaultValuesMask(Y,O)}if(bh=V.visual.ValueLabel.maybeCreate(bi,bi.pvHeatGrid,{wrapper:L})){bi.pvHeatGridLabel=bh.pvMark}},_calcCellSize:function(){var i=this.axes.x.scale,f=this.axes.y.scale;i=(i.max-i.min)/i.domain().length;f=(f.max-f.min)/f.domain().length;if(!this.isOrientationVertical()){var u=i;i=f;f=u}return{width:i,height:f}},_buildSignsWrapper:function(i){if(this.compatVersion()>1){return null}var f=ad.query(i.childNodes).object({name:function(u){return""+u.vars.series.value},value:function(u){return ad.query(u.childNodes).object({name:function(F){return""+F.vars.category.value},value:function(F){return(F=F.vars.color)?""+F.value:null}})}});return function(u){return function(X){var O=f[X.vars.series.value],M=X.vars.category.rawValue,L=ObjectFactory.create(this.parent),I=ObjectFactory.create(this);I.parent=L;var F=X.childIndex();X=X.parent.childIndex();L.index=F;I.index=X;return u.call(I,O,M)}}},_getDefaultValuesMask:function(i,f){var u=this.visualRoles;if(i=i?"color":f?"size":null){return"{#"+u[i].firstDimensionName()+"}"}},_createNoShapesHeatMap:function(i){var f=this._buildGetBaseFillColor(i);return this.pvHeatGrid.sign.override("defaultColor",function(u){if(u==="stroke"){return null}return f.call(this.pvMark,this.scene)}).override("interactiveColor",function(I,F){var u=this.scene;if(u.isActive){return I.alpha(0.6)}if(u.anySelected()&&!u.isSelected()){return this.dimColor(I,F)}return this.base(I,F)}).override("dimColor",function(u){return V.toGrayScale(u,0.6)}).pvMark.lineWidth(1.5)},_buildGetBaseFillColor:function(i){var f=this.axes.color;return i?f.sceneScale({sceneVarName:"color"}):ad.fun.constant(f.option("Unbound"))},_createShapesHeatMap:function(i,f,I,F){var u=this;i=u._calcDotAreaRange(i);F&&u.axes.size.setScaleRange(i);f={extensionId:"dot",freePosition:true,activeSeriesAware:false,wrapper:f,tooltipArgs:u._buildShapesTooltipArgs(I,F)};u=(new V.visual.DotSizeColor(u,u.pvHeatGrid,f)).override("dimColor",function(L){return V.toGrayScale(L,0.6)}).pvMark.lock("shapeAngle");F||u.sign.override("defaultSize",ad.fun.constant(i.max));return u},_calcDotAreaRange:function(i){i=Math.min(i.width,i.height)/2;if(this.shape==="diamond"){i/=Math.SQRT2}i-=2;i=ad.sqr(i);var f=12,u=i-f;if(u<=1){i=Math.max(i,2);f=1;u=i-f;V.debug>=2&&this._warn("Using rescue mode dot area calculation due to insufficient space.")}return{min:f,max:i,span:u}},_buildShapesTooltipArgs:function(i,f){var M=this.chart;if(this.compatVersion()<=1&&this.showsTooltip()){var L=M.options,I=L.customTooltip;I||(I=function(Y,X,O){if(O!=null&&O[0]!==undefined){return O.join(", ")}return O});M=this.visualRoles;var F=M.series.grouping.dimensionNames(),u=M.category.grouping.dimensionNames();return{buildTooltip:L.isMultiValued?function(Z){var Y=Z.scene.group;if(!Y){return""}var O=V.data.Complex.values(Y,F);Y=V.data.Complex.values(Y,u);var X=[];Z=Z.scene.vars;if(f){X[L.sizeValIdx||0]=Z.size.value}if(i){X[L.colorValIdx||0]=Z.color.value}return I.call(L,O,Y,X)}:function(X){X=X.scene.vars;var O=X[i?"color":"size"];return I.call(L,X.series.rawValue,X.category.rawValue,O?O.value:null)}}}},renderInteractive:function(){this.pvPanel.render()},_buildScene:function(Z,Y,X){function O(bb){var ab=new V.visual.Scene(I,{source:bb});ab.vars.series=ax.fromComplex(bb);F.forEach(function(bg){M.call(L,ab,bg,bb)})}function M(bg,bb,ab){ab=Z.child(bb.key).child(ab.key);bg=new V.visual.Scene(bg,{source:ab});bg.vars.category=ax.fromComplex(bb);f.onNewScene(bg,true);i.onNewScene(bg,true)}var L=this,I=new V.visual.Scene(null,{panel:L,source:Z}),F=Z.childNodes,u=L.visualRoles,f=new V.visual.RoleVarHelper(I,u.color,{roleVar:"color"}),i=new V.visual.RoleVarHelper(I,u.size,{roleVar:"size"});I.cellSize=X;Y.children().each(O);return I}});ad.type("pvc.HeatGridChart",V.CategoricalAbstract).add({_allowColorPerCategory:true,_axisCreateIfUnbound:{color:true},_processOptionsCore:function(i){this.base(i);ad.set(i,"orthoAxisOrdinal",true,"legend",false,"panelSizeRatio",1);i="value";var f="value2";if(this.compatVersion()<=1){switch(this.options.colorValIdx){case 0:i="value";break;case 1:i="value2";break;default:i="value"}switch(this.options.sizeValIdx){case 0:f="value";break;case 1:f="value2";break;default:f="value"}}this._colorDimName=i;this._sizeDimName=f},_getCategoryRoleSpec:function(){var f=this.base();f.requireIsDiscrete=true;return f},_getColorRoleSpec:function(){return{isMeasure:true,requireSingleDimension:true,requireIsDiscrete:false,valueType:Number,defaultDimension:this._colorDimName}},_initVisualRoles:function(){this.base();this._addVisualRole("size",{isMeasure:true,requireSingleDimension:true,requireIsDiscrete:false,valueType:Number,defaultDimension:this._sizeDimName})},_initPlotsCore:function(){new V.visual.HeatGridPlot(this)},_collectPlotAxesDataCells:function(i,f){this.base(i,f);if(i.type==="heatGrid"&&i.option("UseShapes")){var u=this.visualRole(i.option("SizeRole"));if(u.isBound()){f=ad.array.lazy(f,"size");ad.array.lazy(f,i.option("SizeAxis")-1).push({plot:i,role:u,dataPartValue:i.option("DataPart")})}}},_setAxesScales:function(f){this.base(f);if(!f||this.parent){(f=this.axes.size)&&f.isBound()&&this._createAxisScale(f)}},_createPlotPanels:function(i,f){this.heatGridChartPanel=new V.HeatGridPanel(this,i,this.plots.heatGrid,ObjectFactory.create(f))},defaults:{colorValIdx:0,sizeValIdx:1,measuresIndexes:[2],axisOffset:0,plotFrameVisible:false,colorNormByCategory:true,numSD:2}});ad.type("pvc.MetricXYAbstract",V.CartesianAbstract).add({_processOptionsCore:function(f){this.base(f);f.panelSizeRatio=1},_initVisualRoles:function(){this.base();this._addVisualRole("x",{isMeasure:true,isRequired:true,requireSingleDimension:true,requireIsDiscrete:false,defaultDimension:"x",dimensionDefaults:{valueType:this.options.timeSeries?Date:Number}});this._addVisualRole("y",{isMeasure:true,isRequired:true,requireSingleDimension:true,requireIsDiscrete:false,defaultDimension:"y",dimensionDefaults:{valueType:Number}})},_generateTrendsDataCellCore:function(ab,Z,Y){function X(bl){var bj=function(bm){return bm.atoms[i].value},bk=function(bm){return bm.atoms[u].value},bh=bl.datums().sort(null,bj).array(),bi=ad.create(I,{rows:ad.query(bh),x:bj,y:bk}),bg=Y.model(bi);if(bg){var bb=f.owner.dimensions(F).intern(this.root._firstTrendAtomProto);bh.forEach(function(bm,bn){var bo=bj(bm);if(bo){bm=bg.sample(bo,bk(bm),bn);if(bm!=null){bo=ad.set(ObjectFactory.create(bl.atoms),i,bo,u,bm,F,bb);ab.push(ad.set(new V.data.Datum(f.owner,bo),"isVirtual",true,"isTrend",true,"trendType",Y.type))}}})}}var O=this._serRole,M=this.visualRoles.x,L=Z.role,I=Z.trend;this._warnSingleContinuousValueRole(L);var F=this._dataPartRole.firstDimensionName(),i=M.firstDimensionName(),u=L.firstDimensionName(),f=this.visibleData(Z.dataPartValue);ad.scope(function(){return O.isBound()?f.children():ad.query([f])}).each(X,this)}});ad.type("pvc.data.MetricPointChartTranslationOper").add({_meaLayoutRoles:["x","y","color","size"],configureType:function(){var i=[],f=[];this.collectFreeDiscreteAndConstinuousIndexes(f,i);var L,I=[];L=i.length;if(L>0){for(var F=this._meaLayoutRoles.length,u=0;u<F&&I.length<L;){this._getUnboundRoleDefaultDimNames(this._meaLayoutRoles[u],1,I);u++}L=I.length;if(L>0){i.length=L;this.defReader({names:I,indexes:i})}}L=f.length;if(L>0){I.length=0;this._getUnboundRoleDefaultDimNames("series",L,I);L=I.length;if(L>0){f.length=L;this.defReader({names:I,indexes:f})}}}});ad.type("pvc.MetricPointPanel",V.CartesianAbstractPanel).init(function(i,f,F,u){this.base(i,f,F,u);this.axes.size=i._getAxis("size",(F.option("SizeAxis")||0)-1);f=F.option("SizeRole");this.visualRoles.size=f?i.visualRole(f):null;this.linesVisible=F.option("LinesVisible");this.dotsVisible=F.option("DotsVisible");if(!this.linesVisible&&!this.dotsVisible){this.linesVisible=true;F.option.specify({LinesVisible:true})}if(!this.offsetPaddings){this.offsetPaddings=new az(0.01)}}).add({sizeAxisRatio:0.2,sizeAxisRatioTo:"minWidthHeight",autoPaddingByDotSize:true,_v1DimRoleName:{category:"x",value:"y"},_creating:function(){var i=this.defaultVisibleBulletGroupScene();if(i&&!i.hasRenderer()){var f=i.colorAxis,I=ad.nullyTo(f.option("LegendDrawMarker",true),this.dotsVisible),F=ad.nullyTo(f.option("LegendDrawLine",true),this.linesVisible);if(I||F){var u={drawMarker:I,drawRule:F};if(I){u.markerShape=f.option("LegendShape",true)||"circle";u.markerPvProto=(new R.Dot).lineWidth(1.5,V.extensionTag).shapeSize(12,V.extensionTag);this.extend(u.markerPvProto,"dot",{constOnly:true})}if(F){u.rulePvProto=(new R.Line).lineWidth(1.5,V.extensionTag);this.extend(u.rulePvProto,"line",{constOnly:true})}i.renderer(new V.visual.legend.BulletItemDefaultRenderer(u))}}},_getRootScene:function(){return ad.lazy(this,"_rootScene",this._buildScene,this)},_calcLayout:function(i){var f=this._getRootScene();f.isSizeBound&&this.axes.size.setScaleRange(this._calcDotAreaRange(i));this._calcAxesPadding(i,f)},_getDotDiameterRefLength:function(i){var f=i.clientSize,u=i.paddings;switch(this.sizeAxisRatioTo){case"minWidthHeight":return Math.min(f.width+u.width,f.height+u.height);case"width":return f.width+u.width;case"height":return f.height+u.height}V.debug>=2&&this._log(ad.format("Invalid option 'sizeAxisRatioTo' value. Assuming 'minWidthHeight'.",[this.sizeAxisRatioTo]));this.sizeRatioTo="minWidthHeight";return this._getDotDiameterRefLength(i)},_calcDotRadiusRange:function(f){f=this.sizeAxisRatio/2*this._getDotDiameterRefLength(f);return{min:Math.sqrt(12),max:f}},_calcDotAreaRange:function(i){var f=this._calcDotRadiusRange(i);if(this.shape==="diamond"){f.max/=Math.SQRT2;f.min/=Math.SQRT2}i=ad.sqr(f.max);f=ad.sqr(f.min);var u=i-f;if(u<=1){i=Math.max(i,2);f=1;u=i-f;V.debug>=3&&this._log("Using rescue mode dot area calculation due to insufficient space.")}return{min:f,max:i,span:u}},_calcAxesPadding:function(bg,bb){var ab;if(this.autoPaddingByDotSize){var Z=this.axes,Y=bg.clientSize,X=bg.paddings;ab={};Z.x.setScaleRange(Y.width);Z.y.setScaleRange(Y.height);var O=Z.base.sceneScale({sceneVarName:"x"}),M=Z.ortho.sceneScale({sceneVarName:"y"}),L=Z.base.scale.max,F=Z.ortho.scale.max,I=bb.isSizeBound,u=I?this.axes.size.scale:null;if(!u){Z=ad.number.as(this._getExtension("dot","shapeRadius"),0);if(Z<=0){Z=ad.number.as(this._getExtension("dot","shapeSize"),0);if(Z<=0){Z=12}}else{Z=ad.sqr(Z)}u=ad.fun.constant(Z)}ab={};var i;if(this.offsetPaddings){i={};az.names.forEach(function(bi){var bh=V.BasePanel.orthogonalLength[bi];i[bi]=(this.offsetPaddings[bi]||0)*(Y[bh]+X[bh])},this)}var f=function(bj,bh){if(i){bh+=i[bj]||0}if(bh<0){bh=0}var bi=ab[bj];if(bi==null||bh>bi){ab[bj]=bh}};bb.children().selectMany(function(bh){return bh.childNodes}).each(function(bj){var bh=O(bj),bi=M(bj);bj=Math.sqrt(u(I?bj.vars.size.value:0));f("left",bj-bh);f("bottom",bj-bi);f("right",bh+bj-L);f("top",bi+bj-F)})}else{ab=this._calcRequestPaddings(bg)}bg.requestPaddings=ab},_createCore:function(){var i=this;i.base();var f=i.chart,L=i._getRootScene(),I=i._buildSignsWrapper(),F=i.compatVersion()<=1;this._finalizeScene(L);i.pvPanel.zOrder(1);this.pvScatterPanel=(new V.visual.Panel(i,i.pvPanel,{extensionId:"panel"})).lock("data",L.childNodes).pvMark;f=f.selectableByFocusWindow();var u=L.isColorBound&&this.visualRoles.color.isDiscrete();f=(new V.visual.Line(i,i.pvScatterPanel,{extensionId:"line",wrapper:I,noTooltip:false,noSelect:f,showsSelection:!f})).lockMark("data",function(M){return M.childNodes}).intercept("visible",function(O){if(!i.linesVisible){return false}var M=this.delegateExtension();if(M==null){M=!O.isNull&&(!L.isSizeBound&&!L.isColorBound||L.isSizeBound&&O.vars.size.value!=null||L.isColorBound&&(u||O.vars.color.value!=null))}return M}).override("x",function(){return this.scene.basePosition}).override("y",function(){return this.scene.orthoPosition});i.pvLine=f.pvMark;f=(new V.visual.DotSizeColor(i,i.pvLine,{extensionId:"dot",wrapper:I,activeSeriesAware:i.linesVisible})).override("x",function(){return this.scene.basePosition}).override("y",function(){return this.scene.orthoPosition}).override("color",function(M){if(!i.dotsVisible&&!this.scene.isActive&&!this.scene.isSingle){return V.invisibleFill}return this.base(M)});if(L.isSizeBound){i.autoPaddingByDotSize&&i.sizeAxisRatioTo==="minWidthHeight"||i.pvPanel.borderPanel.overflow("hidden")}else{f.override("baseSize",function(){if(!i.dotsVisible){if(this.scene.isSingle){var M=Math.max(i.pvLine.scene[this.pvMark.index].lineWidth,0.2)/2;return ad.sqr(M)}}return this.base()})}i.pvDot=f.pvMark;i.pvDot.rubberBandSelectionMode="center";if(V.visual.ValueLabel.isNeeded(i)){f=["label"];F&&f.push("lineLabel");if(I=V.visual.ValueLabel.maybeCreate(i,i.pvDot,{extensionId:f,wrapper:I})){i.pvHeatGridLabel=I.pvMark}}},_buildSignsWrapper:function(){if(this.compatVersion()>1){return null}return function(f){return function(i){var F={category:i.vars.x.rawValue,value:i.vars.y.rawValue},u=ObjectFactory.create(this);u.index=i.dataIndex;return f.call(u,F)}}},renderInteractive:function(){this.pvScatterPanel.render()},_buildScene:function(){function Y(Z){var ab=new V.visual.Scene(L,{source:Z});ab.vars.series=ax.fromComplex(Z);F.onNewScene(ab,false);Z.datums().each(function(bi,bg){var bh=bi.atoms[i.name];if(bh.value!=null){var bb=bi.atoms[f.name];if(bb.value!=null){bi=new V.visual.Scene(ab,{source:bi});bi.dataIndex=bg;bi.vars.x=ax.fromAtom(bh);bi.vars.y=ax.fromAtom(bb);u.onNewScene(bi,true);F.onNewScene(bi,true);bi.isIntermediate=false}}})}function X(Z){for(var bj=Z.childNodes,bi,bg=0,bh=0,ab=bj.length;bg<ab;bg++,bh++){var bb=bj[bh];bb.isSingle=!bi&&!bb.nextSibling;bi&&O(Z,bi,bb,bh)&&bh++;bi=bb}}function O(Z,bh,bg,ab){var bb=f.type.cast.call(null,(+bg.vars.y.value+ +bh.vars.y.value)/2);bh=i.type.cast.call(null,(+bg.vars.x.value+ +bh.vars.x.value)/2);Z=new V.visual.Scene(Z,{index:ab,source:bg.datum});Z.dataIndex=bg.dataIndex;Z.vars.x=new ax(bh,i.format(bh),bh);Z.vars.y=new ax(bb,f.format(bb),bb);u.onNewScene(Z,true);F.onNewScene(Z,true);Z.ownerScene=bg;Z.isIntermediate=true;Z.isSingle=false;return Z}var M=this.visibleData({ignoreNulls:false}),L=new V.visual.Scene(null,{panel:this,source:M}),I=this.visualRoles,F=new V.visual.RoleVarHelper(L,I.color,{roleVar:"color"}),u=new V.visual.RoleVarHelper(L,I.size,{roleVar:"size"}),i=M.owner.dimensions(I.x.firstDimensionName()),f=M.owner.dimensions(I.y.firstDimensionName());M.children().each(Y,this);L.children().each(X,this);return L},_finalizeScene:function(i){var f=this.axes,F=f.base.sceneScale({sceneVarName:"x"}),u=f.ortho.sceneScale({sceneVarName:"y"});i.children().selectMany(function(I){return I.childNodes}).each(function(I){I.basePosition=F(I);I.orthoPosition=u(I)});return i}});ad.type("pvc.MetricPointAbstract",V.MetricXYAbstract).add({_initPlotsCore:function(){this._createPointPlot().option("Trend")&&new V.visual.MetricPointPlot(this,{name:"trend",fixed:{DataPart:"trend",TrendType:"none",NullInterpolatioMode:"none",ColorRole:"series",SizeRole:null,SizeAxis:null,OrthoAxis:1},defaults:{ColorAxis:2,LinesVisible:true,DotsVisible:false}})},_hasDataPartRole:function(){return true},_getColorRoleSpec:function(){return{defaultSourceRole:"series",defaultDimension:"color*",dimensionDefaults:{valueType:Number}}},_initVisualRoles:function(){this.base();this._addVisualRole("size",{isMeasure:true,requireSingleDimension:true,requireIsDiscrete:false,defaultDimension:"size",dimensionDefaults:{valueType:Number}})},_getTranslationClass:function(f){return ad.type(this.base(f)).add(V.data.MetricPointChartTranslationOper)},_collectPlotAxesDataCells:function(i,f){this.base(i,f);if(i.type==="scatter"&&i.option("DotsVisible")){var u=i.option("SizeRole");if(u){u=this.visualRole(u);if(u.isBound()){f=ad.array.lazy(f,"size");ad.array.lazy(f,i.option("SizeAxis")-1).push({plot:i,role:u,dataPartValue:i.option("DataPart")})}}}},_setAxesScales:function(f){this.base(f);if(!f||this.parent){(f=this.axes.size)&&f.isBound()&&this._createAxisScale(f)}},_createPlotPanels:function(i,f){var u=this.options;f=ad.set(ObjectFactory.create(f),"sizeAxisRatio",u.sizeAxisRatio,"sizeAxisRatioTo",u.sizeAxisRatioTo,"autoPaddingByDotSize",u.autoPaddingByDotSize);this.scatterChartPanel=new V.MetricPointPanel(this,i,this.plots.scatter,f);(u=this.plots.trend)&&new V.MetricPointPanel(this,i,u,ObjectFactory.create(f))},defaults:{axisOriginIsZero:false,tooltipOffset:10}});ad.type("pvc.MetricDotChart",V.MetricPointAbstract).add({_createPointPlot:function(){return new V.visual.MetricPointPlot(this,{fixed:{DotsVisible:true}})}});ad.type("pvc.MetricLineChart",V.MetricPointAbstract).add({_createPointPlot:function(){return new V.visual.MetricPointPlot(this,{fixed:{LinesVisible:true}})}});ad.type("pvc.BulletChart",V.BaseChart).init(function(i){i=i||{};var f=i.dimensionGroups||(i.dimensionGroups={}),u=f.range||(f.range={});if(u.valueType===undefined){u.valueType=Number}f=f.marker||(f.marker={});if(f.valueType===undefined){f.valueType=Number}this.base(i)}).add({bulletChartPanel:null,allowNoData:true,_processOptionsCore:function(f){f.legend=false;f.selectable=false;this.base(f)},_initVisualRoles:function(){this.base();this._addVisualRole("title",{defaultDimension:"title*"});this._addVisualRole("subTitle",{defaultDimension:"subTitle*"});this._addVisualRole("value",{isMeasure:true,requireIsDiscrete:false,valueType:Number,defaultDimension:"value*"});this._addVisualRole("marker",{isMeasure:true,requireIsDiscrete:false,valueType:Number,defaultDimension:"marker*"});this._addVisualRole("range",{isMeasure:true,requireIsDiscrete:false,valueType:Number,defaultDimension:"range*"})},_createTranslation:function(i){i=this.base(i);var f=i.virtualItemSize();if(f){switch(f){case 1:i.defReader({names:"value"});break;case 2:i.defReader({names:["title","value"]});break;case 3:i.defReader({names:["title","value","marker"]});break;default:i.defReader({names:["title","subTitle","value","marker"]});f>4&&i.defReader({names:"range",indexes:R.range(4,f)});break}}return i},_initPlotsCore:function(){new V.visual.BulletPlot(this)},_createContent:function(f){this.bulletChartPanel=new V.BulletChartPanel(this,this.basePanel,this.plots.bullet,f)},defaults:{compatVersion:1,orientation:"horizontal",bulletSize:30,bulletSpacing:50,bulletMargin:100,bulletTitle:"Title",bulletSubtitle:"",bulletTitlePosition:"left",tooltipFormat:function(i,f,u){return this.chart.options.valueFormat(u)},crosstabMode:false,seriesInRows:false}});ad.type("pvc.BulletChartPanel",V.PlotPanel).add({pvBullets:null,pvBullet:null,data:null,onSelectionChange:null,_createCore:function(bh){var bg=this.chart,bb=bg.options,ab=this.buildData(),Z=bb.orientation=="horizontal"?"left":"bottom",Y,X,O,M,I,L,F,u;if(bb.orientation=="horizontal"){bh=bh.clientSize.width-this.chart.options.bulletMargin-20;Y=0;switch(bb.bulletTitlePosition){case"top":L=this.chart.options.bulletMargin;O=0;X="left";M=-12;u=parseInt(bb.titleSize/2,10);break;case"bottom":L=this.chart.options.bulletMargin;O=0;X="left";M=bb.bulletSize+32;u=0;break;case"right":L=5;O=bh+5;X="left";M=parseInt(bb.bulletSize/2,10);u=0;break;case"left":default:L=this.chart.options.bulletMargin;O=0;M=parseInt(bb.bulletSize/2,10);X="right";u=0}I="bottom";F=function(){return this.index*(bb.bulletSize+bb.bulletSpacing)+u}}else{bh=bh.clientSize.height-this.chart.options.bulletMargin-20;switch(bb.bulletTitlePosition){case"top":L=this.chart.options.bulletMargin;O=0;X="left";M=-20;Y=0;F=undefined;break;case"bottom":L=this.chart.options.bulletMargin;O=0;X="left";M=bh+20;Y=0;F=20;break;case"right":L=5;O=this.chart.options.bulletSize+40;X="left";M=bh;Y=-Math.PI/2;F=undefined;break;case"left":default:L=this.chart.options.bulletMargin;O=-12;M=this.height-this.chart.options.bulletMargin-20;X="left";Y=-Math.PI/2;F=undefined}I="right";L=function(){return bb.bulletMargin+this.index*(bb.bulletSize+bb.bulletSpacing)}}this.pvBullets=this.pvPanel.add(R.Panel).data(ab)[V.BasePanel.orthogonalLength[Z]](bh)[V.BasePanel.parallelLength[Z]](this.chart.options.bulletSize).margin(20).left(L).top(F);this.pvBullet=this.pvBullets.add(R.Layout.Bullet).orient(Z).ranges(function(bj){return bj.ranges}).measures(function(bj){return bj.measures}).markers(function(bj){return bj.markers});if(bg.clickable()&&this.clickAction){var f=this;this.pvBullet.cursor("pointer").event("click",function(bj){return f.clickAction(bj.title,bj.subtitle,bj.measures,R.event)})}this.pvBulletRange=this.pvBullet.range.add(R.Bar);this.pvBulletMeasure=this.pvBullet.measure.add(R.Bar).text(function(bk,bj){return bj.formattedMeasures[this.index]});this.pvBulletMarker=this.pvBullet.marker.add(R.Dot).shape("square").fillStyle("white").text(function(bk,bj){return bj.formattedMarkers[this.index]});if(this.showsTooltip()){var i=this;this.pvBulletMeasure.localProperty("tooltip").tooltip(function(bk,bj){return bg.options.tooltipFormat.call(i,bj.title,bj.subtitle,bk)});this.pvBulletMarker.localProperty("tooltip").tooltip(function(bk,bj){return bg.options.tooltipFormat.call(i,bj.title,bj.subtitle,bk)});this.pvBulletMeasure.event("mouseover",R.Behavior.tipsy(this.chart._tooltipOptions));this.pvBulletMarker.event("mouseover",R.Behavior.tipsy(this.chart._tooltipOptions))}this.pvBulletRule=this.pvBullet.tick.add(R.Rule);this.pvBulletRuleLabel=this.pvBulletRule.anchor(I).add(R.Label).text(this.pvBullet.x.tickFormat);this.pvBulletTitle=this.pvBullet.anchor(Z).add(R.Label).font("bold 12px sans-serif").textAngle(Y).left(-10).textAlign(X).textBaseline("bottom").left(O).top(M).text(function(bj){return bj.formattedTitle});this.pvBulletSubtitle=this.pvBullet.anchor(Z).add(R.Label).textStyle("#666").textAngle(Y).textAlign(X).textBaseline("top").left(O).top(M).text(function(bj){return bj.formattedSubtitle});var bi=typeof bb.axisDoubleClickAction=="function"?function(bk,bj){bb.axisDoubleClickAction(bk,bj)}:null;if(bg.doubleClickable()&&bi){this.pvBulletTitle.cursor("pointer").events("all").event("dblclick",function(bj){bi(bj,arguments[arguments.length-1])});this.pvBulletSubtitle.cursor("pointer").events("all").event("dblclick",function(bj){bi(bj,arguments[arguments.length-1])})}},applyExtensions:function(){this.base();this.extend(this.pvBullets,"bulletsPanel");this.extend(this.pvBullet,"bulletPanel");this.extend(this.pvBulletRange,"bulletRange");this.extend(this.pvBulletMeasure,"bulletMeasure");this.extend(this.pvBulletMarker,"bulletMarker");this.extend(this.pvBulletRule,"bulletRule");this.extend(this.pvBulletRuleLabel,"bulletRuleLabel");this.extend(this.pvBulletTitle,"bulletTitle");this.extend(this.pvBulletSubtitle,"bulletSubtitle")},_getExtensionId:function(){return[{abs:"content"}].concat(this.base())},buildData:function(){var i=this.chart,f=i.options,O=i.visualRoles.title.grouping,M=i.visualRoles.subTitle.grouping,L=i.visualRoles.value.grouping,I=i.visualRoles.marker.grouping,F=i.visualRoles.range.grouping,u={title:f.bulletTitle,formattedTitle:f.bulletTitle,subtitle:f.bulletSubtitle,formattedSubtitle:f.bulletSubtitle,ranges:ad.array.to(f.bulletRanges)||[],measures:ad.array.to(f.bulletMeasures)||[],markers:ad.array.to(f.bulletMarkers)||[]};ad.set(u,"formattedRanges",u.ranges.map(String),"formattedMeasures",u.measures.map(String),"formattedMarkers",u.markers.map(String));return !L&&!O&&!I&&!M&&!F?[u]:i.data.datums().select(function(Z){var X=ObjectFactory.create(u),Y;if(L){Y=L.view(Z);X.measures=Y.values();X.formattedMeasures=Y.labels()}if(O){Y=O.view(Z);X.title=Y.value;X.formattedTitle=Y.label}if(M){Y=M.view(Z);X.subtitle=Y.value;X.formattedSubtitle=Y.label}if(I){Y=I.view(Z);X.markers=Y.values();X.formattedMarkers=Y.labels()}if(F){Y=F.view(Z);X.ranges=Y.values();X.formattedRanges=Y.labels()}return X},this).array()}});ad.type("pvc.ParallelCoordinates",V.BaseChart).init(function(f){f=f||{};f.dimensions=f.dimensions||{};if(!f.dimensions.value){f.dimensions.value={valueType:null}}this.base(f)}).add({parCoordPanel:null,_createContent:function(f){this.parCoordPanel=new V.ParCoordPanel(this,this.basePanel,ad.create(f,{topRuleOffset:this.options.topRuleOffset,botRuleOffset:this.options.botRuleOffset,leftRuleOffset:this.options.leftRuleOffset,rightRuleOffset:this.options.rightRuleOffset,sortCategorical:this.options.sortCategorical,mapAllDimensions:this.options.mapAllDimensions,numDigits:this.options.numDigits}))},defaults:ad.create(V.BaseChart.prototype.defaults,{compatVersion:1,topRuleOffset:30,botRuleOffset:30,leftRuleOffset:60,rightRuleOffset:60,sortCategorical:true,mapAllDimensions:true,numDigits:0})});ad.type("pvc.ParCoordPanel",V.BasePanel).add({anchor:"fill",pvParCoord:null,dimensions:null,dimensionDescr:null,data:null,retrieveData:function(){var bl=this.chart.data,bk=this.chart.options.numDigits;this.dimensions=bl.getVisibleCategories();var bj=bl.getValues(),bi=bl.getVisibleSeriesIndexes(),bh=bl.getVisibleCategoriesIndexes(),bg=bl.getCategories(),bb=this.chart.options.mapAllDimensions?bh.map(function(bm){return isNaN(bj[bm][0])?{categorical:true,len:0,map:[]}:{categorical:false,len:0,map:[],displayValue:[]}}):bh.map(function(bm){return isNaN(bj[bm][0])?{categorical:true,len:0,map:[]}:null}),ab=function(bm,bn){bm=bb[bm];var bp=null;if(bm.categorical){bp=bm.map[bn];if(bp==null){bp=bm.len;bm.len++;bm.map[bn]=bp}}else{var bo=bn.toFixed(bk);bp=bm.map[bo];if(bp==null){bp=bm.len;bm.len++;bm.map[bo]=bp;bm.displayValue[bo]=bn}}return bp};for(var Z in bb){if(bb.hasOwnProperty(Z)&&bb[Z]&&bb[Z].categorical){bb[Z].displayValue=bb[Z].map}}var X;if(this.chart.options.sortCategorical||this.chart.options.mapAllDimensions){for(bl=0;bl<bb.length;bl++){if(bb[bl]){for(Z=0;Z<bj[bl].length;Z++){ab(bl,bj[bl][Z])}var Y=bb[bl].map,O=[];for(X in Y){Y.hasOwnProperty(X)&&O.push(X)}O.sort();if(bb[bl].categorical){for(Z=0;Z<O.length;Z++){Y[O[Z]]=Z}}else{for(Z=0;Z<O.length;Z++){Y[O[Z]].index=Z}}}}}var M=function(bm){var bn={};for(var bo in bh){if(bh.hasOwnProperty(bo)){bn[bg[bo]]=bb[bo]?ab(bo,bj[bo][bm]):bj[bo][bm]}}return bn};this.data=bi.map(function(bm){return M(bm)});bi=this.dimensions.map(function(bm){var bn={},bo=bm.split("__");bn.id=bm;bn.name=bo[0];bn.unit=bo.length>1?bo[1]:"";return bn});for(bl=0;bl<bi.length;bl++){X=bi[bl];Y=bh[bl];X.orgRowIndex=Y;var F=bj[Y].length,L,i,u,f;if(bb[Y]){O=L=i=u=bb[Y].displayValue[bj[Y][0]];for(Z=1;Z<F;Z++){f=bb[Y].displayValue[bj[Y][Z]];if(f<O){i=O;O=f}if(f>L){u=L;L=f}}}else{O=L=i=u=bj[Y][0];for(Z=1;Z<F;Z++){f=bj[Y][Z];if(f<O){i=O;O=f}if(f>L){u=L;L=f}}}Z=(L-u+(i-O))/2;X.min=O;X.max=L;X.step=Z;X.categorical=false;if(bb[Y]){X.map=bb[Y].map;X.mapLength=bb[Y].len;X.categorical=bb[Y].categorical;if(!X.categorical){X.orgValue=[];Z=bb[Y].map;for(var I in Z){if(Z.hasOwnProperty(I)){X.orgValue[Z[I]]=0+I}}}}}this.dimensionDescr=function(bm,bn){for(var bp={},bo=0;bo<bm.length;bo++){bp[bm[bo]]=bn[bo]}return bp}(this.dimensions,bi)},_createCore:function(){function bp(bq){var br=bq.dim;X[br].min=Math.max(M[br].domain()[0],M[br].invert(bm-bq.y-bq.dy));X[br].max=Math.min(M[br].domain()[1],M[br].invert(bm-bq.y));u=br;f.render();return false}function bo(bq){if(bq.dy<3){var br=bq.dim;X[br].min=Math.max(M[br].domain()[0],M[br].invert(0));X[br].max=Math.min(M[br].domain()[1],M[br].invert(bm));bq.y=bj;bq.dy=bg;u=br;f.render()}return false}var bn=this;this.retrieveData();var bm=this.height,bl=this.chart.options.numDigits,bk=this.chart.options.topRuleOffset,bj=this.chart.options.botRuleOffset,bi=this.chart.options.leftRuleOffset,bh=this.width-this.chart.options.rightRuleOffset,bb=this.height-bk,bg=bb-bj,ab=bk-12,Z=this.dimensions,O=this.dimensionDescr,Y=function(br,bt){var bs=O[br].min,bq=O[br].max;br=O[br].step;if(bt){bs-=br;bq+=br}return R.Scale.linear(bs,bq).range(bj,bb)},L=R.Scale.ordinal(Z).splitFlush(bi,bh),M=R.dict(Z,function(bq){var bs=Y(bq,true).range(bj,bb),br=O[bq];if(br.orgValue&&!br.categorical){bq=function(bt){return bs(br.orgValue[bt])};bq.domain=function(){return bs.domain()};bq.invert=function(bt){return bs.invert(bt)};return bq}return bs}),I=R.dict(Z,function(bq){return Y(bq,false).range("steelblue","brown")}),X=R.dict(Z,function(bq){return{min:M[bq].domain()[0],max:M[bq].domain()[1]}}),u=Z[0];bi=this.chart.options.mapAllDimensions?function(bq){return Z.every(function(bs){var br=O[bs];br=br.orgValue&&!br.categorical?br.orgValue[bq[bs]]:bq[bs];return br>=X[bs].min&&br<=X[bs].max})}:function(bq){return Z.every(function(br){return bq[br]>=X[br].min&&bq[br]<=X[br].max})};this.pvParCoord=this.pvPanel.add(R.Panel).data(bn.data).visible(bi).add(R.Line).data(Z).left(function(bq){return L(bq)}).bottom(function(bq,br){return M[bq](br[bq])}).strokeStyle("#ddd").lineWidth(1).antialias(false);this.pvPanel.add(R.Rule).data(Z).left(L).top(bk).bottom(bj).anchor("top").add(R.Label).top(ab).font("bold 10px sans-serif").text(function(bq){return O[bq].name});bk=[];for(var F in O){if(O.hasOwnProperty(F)){ab=O[F];if(ab.categorical){bh=L(ab.id)+6;for(var i in ab.map){if(ab.map.hasOwnProperty(i)){bk[bk.length]={x:bh,y:M[ab.id](ab.map[i])+3,label:i}}}}}}this.pvPanel.add(R.Panel).data(bk).add(R.Label).left(function(bq){return bq.x}).bottom(function(bq){return bq.y}).text(function(bq){return bq.label}).textAlign("left");var f=this.pvPanel.add(R.Panel);f.add(R.Panel).data(bn.data).visible(bi).add(R.Line).data(Z).left(function(bq){return L(bq)}).bottom(function(bq,br){return M[bq](br[bq])}).strokeStyle(function(bq,br){bq=O[u];return I[u](bq.orgValue&&!bq.categorical?bq.orgValue[br[u]]:br[u])}).lineWidth(1);bn=f.add(R.Panel).data(Z.map(function(bq){return{y:bj,dy:bg,dim:bq}})).left(function(bq){return L(bq.dim)-30}).width(60).fillStyle("rgba(0,0,0,.001)").cursor("crosshair").event("mousedown",R.Behavior.select()).event("select",bp).event("selectend",bo).add(R.Bar).left(25).top(function(bq){return bq.y}).width(10).height(function(bq){return bq.dy}).fillStyle(function(bq){return bq.dim==u?I[bq.dim]((X[bq.dim].max+X[bq.dim].min)/2):"hsla(0,0,50%,.5)"}).strokeStyle("white").cursor("move").event("mousedown",R.Behavior.drag()).event("dragstart",bp).event("drag",bp);bn.anchor("bottom").add(R.Label).textBaseline("top").text(function(bq){return O[bq.dim].categorical?"":X[bq.dim].min.toFixed(bl)+O[bq.dim].unit});bn.anchor("top").add(R.Label).textBaseline("bottom").text(function(bq){return O[bq.dim].categorical?"":X[bq.dim].max.toFixed(bl)+O[bq.dim].unit});this.extend(this.pvParCoord,"parCoord");this.extend(this.pvPanel,"chart")}});ad.type("pvc.DataTree",V.BaseChart).init(function(f){f=f||{};f.dimensionGroups=f.dimensionGroups||{};if(!f.dimensionGroups.value){f.dimensionGroups.value={valueType:null}}this.base(f)}).add({structEngine:null,structMetadata:null,structDataset:null,DataTreePanel:null,_getColorRoleSpec:function(){return{isRequired:true,defaultSourceRole:"category",requireIsDiscrete:true}},setStructData:function(f){this.structDataset=f.resultset;this.structDataset.length||this._log("Warning: Structure-dataset is empty");this.structMetadata=f.metadata;this.structMetadata.length||this._log("Warning: Structure-Metadata is empty")},_createContent:function(i){var f=this.structEngine,F=f?f.type:new V.data.ComplexType;F.addDimension("value",{});var u=new V.data.CrosstabTranslationOper(F,this.structDataset,this.structMetadata,{seriesInRows:true,crosstabMode:true});u.configureType();if(!f){f=this.structEngine=new V.data.Data({type:F})}f.load(u.execute(f));V.debug>=3&&this._log(this.structEngine.getInfo());this.dataTreePanel=new V.DataTreePanel(this,this.basePanel,ad.create(i,{topRuleOffset:this.options.topRuleOffset,botRuleOffset:this.options.botRuleOffset,leftRuleOffset:this.options.leftRuleOffset,rightRuleOffset:this.options.rightRuleOffset,boxplotColor:this.options.boxplotColor,valueFontsize:this.options.valueFontsize,headerFontsize:this.options.headerFontsize,border:this.options.border,perpConnector:this.options.perpConnector,numDigits:this.options.numDigits,minVerticalSpace:this.options.minVerticalSpace,connectorSpace:this.options.connectorSpace,minAspectRatio:this.options.minAspectRatio}))},defaults:{compatVersion:1,topRuleOffset:30,botRuleOffset:30,leftRuleOffset:60,rightRuleOffset:60,boxplotColor:"grey",headerFontsize:16,valueFontsize:20,border:2,perpConnector:false,numDigits:0,connectorSpace:0.15,minVerticalSpace:0.05,minAspectRatio:2}});ad.type("pvc.DataTreePanel",V.PlotPanel).add({pvDataTree:null,treeElements:null,structMap:null,structArr:null,hRules:null,vRules:null,rules:null,generatePerpConnectors:function(X){this.hRules=[];this.vRules=[];this.rules=[];for(var O in this.structMap){var M=this.structMap[O];if(M.children!=null){var L=+10000,I=-10000,F=M.left+M.width;this.hRules.push({left:F,width:X,bottom:M.bottom+M.height/2});F+=X;for(var u in M.children){var i=this.structMap[M.children[u]],f=i.bottom+i.height/2;if(f>I){I=f}if(f<L){L=f}this.hRules.push({left:F,width:i.left-F,bottom:f})}I>L&&this.vRules.push({left:F,bottom:L,height:I-L})}}},generateLineSegment:function(i,f,I,F){var u=[];u.push({x:i,y:f});u.push({x:I,y:F});this.rules.push(u)},generateConnectors:function(i){this.hRules=[];this.vRules=[];if(this.chart.options.perpConnector){this.generatePerpConnectors(i)}else{this.rules=[];for(var f in this.structMap){var O=this.structMap[f];if(O.children!=null){var M,L,I,F=+10000,u=-10000;for(I in O.children){L=this.structMap[O.children[I]];M=L.bottom+L.height/2;if(M>u){u=M}if(M<F){F=M}}F=(u+F)/2;M=O.left+O.width;u=M+i;this.generateLineSegment(M,O.bottom+O.height/2,u,F);for(I in O.children){L=this.structMap[O.children[I]];M=L.bottom+L.height/2;this.generateLineSegment(u,F,L.left,M)}}}}},retrieveStructure:function(){var ab=this.chart.structEngine,Z=this.chart.options,Y=ab.getVisibleCategories();this.treeElements=ab.getVisibleSeries();ab=ab.getValues();Y=Y.length>4;var X;for(X in this.treeElements){this.treeElements[X]=$.trim(this.treeElements[X])}var O=[];O.getElement=function(bb){if(O[bb]==null){O[bb]={min:+10000,max:-10000}}return O[bb]};O.addValue=function(bg,bb){bg=O.getElement(bg);if(bb<bg.min){bg.min=bb}if(bb>bg.max){bg.max=bb}return bg};var M,L,I;for(X in this.treeElements){I=this.treeElements[X];M=I[0];L=M.charCodeAt(0);I=parseInt(I.slice(1),10);O.addValue("__cols",L);O.addValue(M,I)}M=O.getElement("__cols");var F=this.innerWidth/(M.max-M.min+1),i=F-Z.connectorSpace*F;L=i/Z.minAspectRatio;var u=M.min;delete O.__cols;for(X in O){M=O[X];if(typeof M!="function"){var f=M.max-M.min+1;M.gridHeight=this.innerHeight/f;M.cellHeight=M.gridHeight*(1-Z.minVerticalSpace);if(M.cellHeight>L){M.cellHeight=L}M.relBottom=(M.gridHeight-M.cellHeight)/2;M.numRows=f}}Z=new RegExp("[\\s\"']+","g");this.structMap={};for(X in this.treeElements){f={};I=this.treeElements[X];f.box_id=I;this.structMap[I]=f;M=I[0];L=M.charCodeAt(0);I=parseInt(I.slice(1),10);M=O.getElement(M);f.colIndex=L-u;f.rowIndex=M.numRows-(I-M.min)-1;f.left=this.leftOffs+f.colIndex*F;f.width=i;if(Y){f.bottom=ab[4][X];f.height=ab[5][X]}else{f.bottom=this.botOffs+f.rowIndex*M.gridHeight+M.relBottom;f.height=M.cellHeight}f.label=ab[0][X];f.selector=ab[1][X];f.aggregation=ab[2][X];L=(ab[3][X]||"").replace(Z," ");f.children=L===" "||L===""?null:L.split(" ")}this.generateConnectors((F-i)/2);this.structArr=[];for(X in this.structMap){I=this.structMap[X];this.structArr.push(I)}},findDataValue:function(i,f){for(var u=0;u<f[0].length;u++){if(f[0][u]==i){return f[1][u]}}this._log("Error: value with key : "+i+" not found.")},generateBoxPlots:function(){var i=this.chart.options;for(var f in this.structArr){var O=this.structArr[f];if(O.values.length){O.subplot={};var M=O.subplot,L=[],I=O.width/6;M.hRules=[];M.vRules=[];M.marks=[];M.labels=[];L.push(this.findDataValue("_p5",O.values));L.push(this.findDataValue("_p25",O.values));L.push(this.findDataValue("_p50",O.values));L.push(this.findDataValue("_p75",O.values));L.push(this.findDataValue("_p95",O.values));var F=false;if(typeof L[2]!="undefined"){if(L[4]<L[0]){L=L.reverse();this._log(" dataset "+O.box_id+" repaired (_p95 was smaller than _p5)")}if(L[4]>L[0]){M.hScale=R.Scale.linear(L[0],L[4])}else{F=true;M.hScale=R.Scale.linear(L[0]-1e-10,L[0]+1e-10)}M.hScale.range(O.left+I,O.left+O.width-I);I=""+L[2];var u;for(u=0;u<L.length;u++){L[u]=M.hScale(L[u])}M.bot=O.bottom+O.height/3;M.top=O.bottom+2*O.height/3;M.mid=(M.top+M.bot)/2;M.textBottom=O.bottom+15;M.textBottom=M.bot-i.valueFontsize-1;if(F){M.vRules.push({left:L[0],bottom:M.bot,lWidth:3,height:M.top-M.bot})}else{M.hRules.push({left:L[0],width:L[1]-L[0],lWidth:1,bottom:M.mid});M.hRules.push({left:L[1],width:L[3]-L[1],lWidth:1,bottom:M.bot});M.hRules.push({left:L[1],width:L[3]-L[1],lWidth:1,bottom:M.top});M.hRules.push({left:L[3],width:L[4]-L[3],lWidth:1,bottom:M.mid});for(u=0;u<L.length;u++){M.vRules.push({left:L[u],bottom:M.bot,lWidth:u==2?3:1,height:M.top-M.bot})}}M.labels.push({left:L[2],bottom:M.textBottom,text:this.labelFixedDigits(I),size:i.smValueFont,color:i.boxplotColor})}}}},labelFixedDigits:function(f){if(typeof f=="string"){f=parseFloat(f)}if(typeof f=="number"){f=f.toFixed(this.chart.options.numDigits)}return""+f},addDataPoint:function(i){var f=this.chart.options;for(var L in this.structArr){var I=this.structArr[L];if(I.values.length){var F=this.findDataValue(i,I.values);if(typeof F!="undefined"){I=I.subplot;var u=I.hScale(F);I.marks.push({left:u,bottom:I.mid,color:"green"});I.labels.push({left:u,bottom:I.textBottom,text:this.labelFixedDigits(F),size:f.valueFont,color:"green"})}}}},retrieveData:function(){var Y=this.chart.data,X=this.chart.options;Y.getVisibleCategories();var O=Y.getVisibleSeries();Y=Y.getValues();var M={},L,I=Y.length;for(var F in this.structArr){var u=this.structArr[F];u.values=[];for(L=0;L<I;L++){u.values.push([])}M[u.selector]=u}F={};for(L in O){I=M[O[L]];if(typeof I!="undefined"){for(var i in Y){I.values[i].push(Y[i][L])}}else{F[O[L]]=true}}for(var f in F){this._log("Could'nt find box for selector: "+f)}this.generateBoxPlots();O=new RegExp("[\\s\"']+","g");if(X.selectParam){X=X.selectParam.replace(O,"");if(X!="undefined"&&X.length>0&&typeof window[X]!="undefined"){X=window[X];this.addDataPoint(X)}}},_createCore:function(){var i=this,f=this.chart.options;f.smValueFontsize=Math.round(0.6*f.valueFontsize);f.smValueFont=""+f.smValueFontsize+"px sans-serif";f.valueFont=""+f.valueFontsize+"px sans-serif";var L=f.topRuleOffset,I=f.botRuleOffset,F=f.leftRuleOffset;this.innerWidth=this.width-F-f.rightRuleOffset;this.innerHeight=this.height-L-I;this.botOffs=I;this.leftOffs=F;this.retrieveStructure();this.retrieveData();var u=f.headerFontsize+3;I=this.rules;for(L=0;L<I.length;L++){this.pvPanel.add(R.Line).data(I[L]).left(function(M){return M.x}).bottom(function(M){return M.y}).lineWidth(1).strokeStyle("black")}this.pvDataTree=this.pvPanel.add(R.Bar).data(i.structArr).left(function(M){return M.left}).bottom(function(M){return M.bottom}).height(function(M){return M.height}).width(function(M){return M.width}).fillStyle("green").add(R.Bar).left(function(M){return M.left+f.border}).bottom(function(M){return M.bottom+f.border}).height(function(M){return M.height-f.border-u}).width(function(M){return M.width-2*f.border}).fillStyle("white").add(R.Label).text(function(M){return M.label}).textAlign("center").left(function(M){return M.left+M.width/2}).bottom(function(M){return M.bottom+M.height-f.headerFontsize-5+f.headerFontsize/5}).font(""+f.headerFontsize+"px sans-serif").textStyle("white").fillStyle("blue");for(L=0;L<this.structArr.length;L++){I=this.structArr[L];this.pvPanel.add(R.Rule).data(I.subplot.hRules).left(function(M){return M.left}).width(function(M){return M.width}).bottom(function(M){return M.bottom}).lineWidth(function(M){return M.lWidth}).strokeStyle(i.chart.options.boxplotColor);this.pvPanel.add(R.Rule).data(I.subplot.vRules).left(function(M){return M.left}).height(function(M){return M.height}).bottom(function(M){return M.bottom}).lineWidth(function(M){return M.lWidth}).strokeStyle(i.chart.options.boxplotColor);this.pvPanel.add(R.Dot).data(I.subplot.marks).left(function(M){return M.left}).bottom(function(M){return M.bottom}).fillStyle(function(M){return M.color});this.pvPanel.add(R.Label).data(I.subplot.labels).left(function(M){return M.left}).bottom(function(M){return M.bottom}).font(function(M){return M.size}).text(function(M){return M.text}).textAlign("center").textStyle(function(M){return M.color})}if(f.perpConnector){this.pvPanel.add(R.Rule).data(i.vRules).left(function(M){return M.left}).bottom(function(M){return M.bottom}).height(function(M){return M.height}).strokeStyle("black");this.pvPanel.add(R.Rule).data(i.hRules).left(function(M){return M.left}).bottom(function(M){return M.bottom}).width(function(M){return M.width}).strokeStyle("black")}},applyExtensions:function(){this.extend(this.pvDataTree,"dataTree")}});ad.type("pvc.data.BoxplotChartTranslationOper").add({_configureTypeCore:function(){var i=[],f=[],u=[];this.collectFreeDiscreteAndConstinuousIndexes(u,f);this._getUnboundRoleDefaultDimNames("category",u.length,i);ad.query(V.BoxplotChart.measureRolesNames).take(f.length).each(function(F){this._getUnboundRoleDefaultDimNames(F,1,i)},this);i.length&&this.defReader({names:i})}});ad.type("pvc.BoxplotPanel",V.CategoricalAbstractPanel).init(function(i,f,F,u){this.base(i,f,F,u);this.boxSizeRatio=F.option("BoxSizeRatio");this.maxBoxSize=F.option("BoxSizeMax")}).add({plotType:"box",anchor:"fill",_v1DimRoleName:{value:"median"},_createCore:function(){function Y(Z){var ab=this.base(Z);return Z==="stroke"?ab.darker(1):ab}function X(Z){Z.lock(F,function(){return this.pvMark.parent[u]()/2}).override("defaultColor",Y);return Z}function O(Z){Z.lock(F,function(ab){return ab.vars.category.boxLeft}).lock(u,function(ab){return ab.vars.category.boxWidth});return Z}function M(Z){O(Z);Z.override("defaultColor",Y);return Z}this.base();var L=this._buildScene(),I=this.isOrientationVertical()?"bottom":"left",F=this.anchorOrtho(I),u=this.anchorLength(I),i=this.anchorOrthoLength(I),f=["panel"];this.compatVersion()<=1&&f.push("");this.pvBoxPanel=(new V.visual.Panel(this,this.pvPanel,{extensionId:f})).lock("data",L.childNodes).lockMark(F,function(Z){Z=Z.vars.category;return Z.x-Z.width/2}).pvMark[u](function(Z){return Z.vars.category.width});this.pvRuleWhiskerUpper=X(new V.visual.Rule(this,this.pvBoxPanel,{extensionId:"boxRuleWhisker",freePosition:true,noHover:false,noSelect:false,noClick:false,noDoubleClick:false,showsInteraction:true})).intercept("visible",function(Z){return Z.vars.category.showRuleWhiskerUpper&&this.delegateExtension(true)}).lock(I,function(Z){return Z.vars.category.ruleWhiskerUpperBottom}).lock(i,function(Z){return Z.vars.category.ruleWhiskerUpperHeight}).pvMark;this.pvRuleWhiskerLower=X(new V.visual.Rule(this,this.pvBoxPanel,{extensionId:"boxRuleWhisker",freePosition:true,noHover:false,noSelect:false,noClick:false,noDoubleClick:false,showsInteraction:true})).intercept("visible",function(Z){return Z.vars.category.showRuleWhiskerBelow&&this.delegateExtension(true)}).lock(I,function(Z){return Z.vars.category.ruleWhiskerLowerBottom}).lock(i,function(Z){return Z.vars.category.ruleWhiskerLowerHeight}).pvMark;this.pvBar=O(new V.visual.Bar(this,this.pvBoxPanel,{extensionId:"boxBar",freePosition:true,normalStroke:true})).intercept("visible",function(Z){return Z.vars.category.showBox&&this.delegateExtension(true)}).lock(I,function(Z){return Z.vars.category.boxBottom}).lock(i,function(Z){return Z.vars.category.boxHeight}).override("defaultColor",Y).override("defaultStrokeWidth",ad.fun.constant(1)).pvMark;this.pvRuleMin=M(new V.visual.Rule(this,this.pvBoxPanel,{extensionId:"boxRuleMin",freePosition:true,noHover:false,noSelect:false,noClick:false,noDoubleClick:false,showsInteraction:true})).intercept("visible",function(){return this.scene.vars.minimum.value!=null&&this.delegateExtension(true)}).lock(I,function(){return this.scene.vars.minimum.position}).pvMark;this.pvRuleMax=M(new V.visual.Rule(this,this.pvBoxPanel,{extensionId:"boxRuleMax",freePosition:true,noHover:false,noSelect:false,noClick:false,noDoubleClick:false,showsInteraction:true})).intercept("visible",function(){return this.scene.vars.maximum.value!=null&&this.delegateExtension(true)}).lock(I,function(){return this.scene.vars.maximum.position}).pvMark;this.pvRuleMedian=M(new V.visual.Rule(this,this.pvBoxPanel,{extensionId:"boxRuleMedian",freePosition:true,noHover:false,noSelect:false,noClick:false,noDoubleClick:false,showsInteraction:true})).intercept("visible",function(){return this.scene.vars.median.value!=null&&this.delegateExtension(true)}).lock(I,function(){return this.scene.vars.median.position}).override("defaultStrokeWidth",ad.fun.constant(2)).pvMark},renderInteractive:function(){this.pvBoxPanel.render()},_buildScene:function(){function Z(bj){var bh=new V.visual.Scene(L,{source:bj}),bb=bh.vars;bb.series=new ax(null,"");var bg=bb.category=new ax(bj.value,bj.label);ad.set(bg,"group",bj,"x",I(bj.value),"width",F,"boxWidth",u,"boxLeft",F/2-u/2);Y.measureVisualRoles().forEach(function(bq){var bp=X[bq.name],bo;if(bp){bo=bj.dimensions(bp);bp=bo.sum(O);bo=new ax(bp,bo.format(bp));bo.position=f(bp)}else{bo=new ax(null,"");bo.position=null}bb[bq.name]=bo});i.onNewScene(bh,true);bh=bb.minimum.value!=null;var bn=bb.lowerQuartil.value!=null,ab=bb.median.value!=null,bm=bb.upperQuartil.value!=null,bi,bk,bl=bn||bm;if(bl){bi=bn?bb.lowerQuartil.position:ab?bb.median.position:bb.upperQuartil.position;bk=bm?bb.upperQuartil.position:ab?bb.median.position:bb.lowerQuartil.position;if(bl=bk!==bi){bg.boxBottom=bi;bg.boxHeight=bk-bi}}bg.showBox=bl;if(bl=bb.maximum.value!=null){bi=bm?bb.upperQuartil.position:ab?bb.median.position:bn?bb.lowerQuartil.position:bh?bb.minimum.position:null;if(bl=bi!=null){bg.ruleWhiskerUpperBottom=bi;bg.ruleWhiskerUpperHeight=bb.maximum.position-bi}}bg.showRuleWhiskerUpper=bl;if(bl=bh){bk=bn?bb.lowerQuartil.position:ab?bb.median.position:bm?bb.upperQuartil.position:null;if(bl=bk!=null){bi=bb.minimum.position;bg.ruleWhiskerLowerHeight=bk-bi;bg.ruleWhiskerLowerBottom=bi}}bg.showRuleWhiskerBelow=bl}var Y=this.chart,X=ad.query(Y.measureVisualRoles()).object({name:function(ab){return ab.name},value:function(ab){return ab.firstDimensionName()}}),O={visible:true,zeroIfNone:false},M=this.visibleData({ignoreNulls:false}),L=new V.visual.Scene(null,{panel:this,source:M}),I=this.axes.base.scale,F=I.range().band,u=Math.min(F*this.boxSizeRatio,this.maxBoxSize),f=this.axes.ortho.scale,i=new V.visual.RoleVarHelper(L,this.visualRoles.color,{roleVar:"color"});M.children().each(Z,this);return L}});ad.type("pvc.BoxplotChart",V.CategoricalAbstract).add({_processOptionsCore:function(f){this.base.apply(this,arguments);f.stacked=false},_initVisualRoles:function(){this.base();var f={isMeasure:true,requireSingleDimension:true,requireIsDiscrete:false,valueType:Number};[{name:"median",label:"Median",defaultDimension:"median",isRequired:true},{name:"lowerQuartil",label:"Lower Quartil",defaultDimension:"lowerQuartil"},{name:"upperQuartil",label:"Upper Quartil",defaultDimension:"upperQuartil"},{name:"minimum",label:"Minimum",defaultDimension:"minimum"},{name:"maximum",label:"Maximum",defaultDimension:"maximum"}].forEach(function(i){this._addVisualRole(i.name,ad.create(f,i))},this)},_getTranslationClass:function(f){return ad.type(this.base(f)).add(V.data.BoxplotChartTranslationOper)},_initPlotsCore:function(){new V.visual.BoxPlot(this);if(this.options.plot2){this._animatable=true;new V.visual.PointPlot(this,{name:"plot2",defaults:{LinesVisible:true,DotsVisible:true,OrthoRole:"median",ColorAxis:2},fixed:{OrthoAxis:1}})}},_initAxes:function(f){this.base(f);(f=this.axesByType.ortho)&&f.forEach(function(i){i.option.defaults({Offset:0.02})})},_createPlotPanels:function(i,f){var u=this.plots;this.bpChartPanel=new V.BoxplotPanel(this,i,u.box,ObjectFactory.create(f));if(u=u.plot2){V.debug>=3&&this._log("Creating Point panel.");(new V.PointPanel(this,i,u,ObjectFactory.create(f)))._v1DimRoleName.value=u.option("OrthoRole")}},defaults:{crosstabMode:false}}).addStatic({measureRolesNames:["median","lowerQuartil","upperQuartil","minimum","maximum"]});ad.type("pvc.data.TreemapChartTranslationOper").add({_configureTypeCore:function(){var i=[],f=[],u=[];this.collectFreeDiscreteAndConstinuousIndexes(u,f);u=u.length;f=f.length;u&&this._getUnboundRoleDefaultDimNames("category",u,i);f&&ad.query(["size","color"]).take(f).each(function(F){this._getUnboundRoleDefaultDimNames(F,1,i)},this);i.length&&this.defReader({names:i})}});ad.type("pvc.TreemapPanel",V.PlotPanel).init(function(i,f,F,u){this.base(i,f,F,u);this.axes.size=i._getAxis("size",(F.option("SizeAxis")||0)-1);this.visualRoles.size=i.visualRole(F.option("SizeRole"));this.layoutMode=F.option("LayoutMode")}).add({_createCore:function(Y){var X=this;Y=Y.clientSize;var O=X._buildScene();if(O){var M=ad.number.to(X._getConstantExtension("leaf","lineWidth"),1),L=M/2,I=X.visualRoles.size.isBound()?X.axes.size.scale.by1(function(Z){return Z.vars.size.value}):100;Y=X.pvTreemapPanel=(new V.visual.Panel(X,X.pvPanel,{panelType:R.Layout.Treemap,extensionId:"panel"})).pvMark.lock("visible",true).lock("nodes",O.nodes()).lock("left",L).lock("top",L).lock("width",Y.width-M).lock("height",Y.height-M).lock("size",I).lock("mode",X.layoutMode).lock("order",null).lock("round",false);Y.node.left(function(Z){return Z.x+L}).top(function(Z){return Z.y+L}).width(function(Z){return Z.dx-M}).height(function(Z){return Z.dy-M});O=X.axes.color;var F,u;if(X.visualRoles.color.isBound()){u=F=O.sceneScale({sceneVarName:"color"});if(X.plot.option("ColorMode")==="byparent"){u=u.by(ad.propGet("parent"))}}else{u=F=ad.fun.constant(O.option("Unbound"))}var i=(new V.visual.Bar(X,Y.leaf,{extensionId:"leaf"})).lockMark("visible").override("defaultColor",function(){return u(this.scene)}).override("defaultStrokeWidth",function(){return M}).pvMark.antialias(false).lineCap("round").strokeDasharray(function(Z){return Z.vars.size.value<0?"dash":null});(new V.visual.Bar(X,Y.node,{extensionId:"ascendant",noHover:true,noSelect:true,noClick:true,noDoubleClick:true})).intercept("visible",function(Z){return !!Z.parent&&!!Z.firstChild&&this.delegateExtension(true)}).override("anyInteraction",function(){return this.scene.anyInteraction()||this.scene.isActiveDescendantOrSelf()}).override("defaultStrokeWidth",function(){return 1.5*M}).override("interactiveStrokeWidth",function(Z){if(this.showsActivity()&&this.scene.isActiveDescendantOrSelf()){Z=Math.max(1,Z)*1.5}return Z}).override("defaultColor",function(){return F(this.scene)}).override("normalColor",ad.fun.constant(null)).override("interactiveColor",function(Z,ab){if(ab==="stroke"){if(this.showsActivity()){if(this.scene.isActiveDescendantOrSelf()){return R.color(Z).brighter(0.5)}if(this.scene.anyActive()){return null}}if(this.showsSelection()&&this.scene.isSelectedDescendantOrSelf()){return R.color(Z).brighter(0.5)}}return null}).pvMark.antialias(false);if(X=V.visual.ValueLabel.maybeCreate(X,Y.label,{noAnchor:true})){var f=this.valuesFont;X.override("trimText",function(Z){var ab=this.scene[this.pvMark.textAngle()?"dy":"dx"]-2;return V.text.trimToWidthB(ab,Z,f,"..")}).override("calcBackgroundColor",function(){return i.scene[this.pvMark.index].fillStyle})}}},_getExtensionId:function(){return[{abs:!this.chart.parent?"content":"smallContent"}].concat(this.base())},renderInteractive:function(){this.pvTreemapPanel.render()},_buildScene:function(){var i=this.visibleData({ignoreNulls:false});if(!i.childCount()){return null}var f=this.visualRoles;i=new V.visual.Scene(null,{panel:this,source:i});var I=new V.visual.RoleVarHelper(i,f.size,{roleVar:"size",allowNestedVars:true,hasPercentSubVar:true}),F=f.color&&f.color.grouping,u=function(M){var L=M.group;M.vars.category=ax.fromComplex(L);I.onNewScene(M,true);if(F){M.vars.color=new ax(L.absKey,L.absLabel)}else{if(!M.parent){M.vars.color=new ax(null,"")}}L.childCount()&&L.children().each(function(O){O.value!=null&&u(new V.visual.Scene(M,{source:O}))});return M};return u(i)}});ad.type("pvc.TreemapChart",V.BaseChart).add({_animatable:false,_axisCreateIfUnbound:{color:true},_getColorRoleSpec:function(){return{defaultSourceRole:"category",defaultDimension:"color*"}},_initVisualRoles:function(){this.base();this._addVisualRole("category",{isRequired:true,defaultDimension:"category*",autoCreateDimension:true});this._addVisualRole("size",{isMeasure:true,isRequired:false,isPercent:true,requireSingleDimension:true,requireIsDiscrete:false,valueType:Number,defaultDimension:"size"})},_getTranslationClass:function(f){return ad.type(this.base(f)).add(V.data.TreemapChartTranslationOper)},_getIsNullDatum:ad.fun.constant(),_setAxesScales:function(f){this.base(f);if(!f||this.parent){if((f=this.axes.size)&&f.isBound()){this._createAxisScale(f);f.setScaleRange({min:100,max:1000})}}},_initPlotsCore:function(){var f=new V.visual.TreemapPlot(this);if(this.options.legend==null){this.options.legend=f.option("ColorMode")==="byparent"}f=f.option("RootCategoryLabel");this.visualRoles.category.setRootLabel(f);this.visualRoles.color.setRootLabel(f)},_createContent:function(f){this.base();new V.TreemapPanel(this,this.basePanel,this.plots.treemap,f)},_createVisibleData:function(i,f){return(i=this.base(i,f))?this.visualRoles.category.select(i,{visible:true}):null},defaults:{legend:null}});return V}(def,pv);;
;
/* module-key = 'com.xpandit.plugins.xray:view-execution-details-resources', location = 'templates/execution/execution-details.soy' */
// This file was automatically generated from execution-details.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.ExecuteTest.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.ExecuteTest == 'undefined') { RAVEN.ExecuteTest = {}; }


RAVEN.ExecuteTest.renderViewDetails = function(opt_data, opt_ignored) {
  return '' + RAVEN.ExecuteTest.renderViewDetailsWithIdentifier({contextPath: opt_data.contextPath, testExec: opt_data.testExec, test: opt_data.test, currentUserName: opt_data.currentUserName, assignee: opt_data.assignee, startDate: opt_data.startDate, requiresExperimentalDialog2: opt_data.requiresExperimentalDialog2, identifier: opt_data.test});
};
if (goog.DEBUG) {
  RAVEN.ExecuteTest.renderViewDetails.soyTemplateName = 'RAVEN.ExecuteTest.renderViewDetails';
}


RAVEN.ExecuteTest.renderViewDetailsWithIdentifier = function(opt_data, opt_ignored) {
  return '' + ((opt_data.currentUserName == opt_data.assignee || opt_data.startDate != null && opt_data.startDate != 'null' && opt_data.startDate != '-') ? '<a class="raven-details-link" href="' + soy.$$escapeHtml(opt_data.contextPath) + '/secure/XrayExecuteTest!default.jspa?testExecIssueKey=' + soy.$$escapeHtml(opt_data.testExec) + '&testIssueKey=' + soy.$$escapeHtml(opt_data.test) + '"><img class="raven-details-icon" src="' + soy.$$escapeHtml(opt_data.contextPath) + '/download/resources/com.xpandit.plugins.xray/images/detail-view.svg"/><span class="raven-details-text">' + soy.$$escapeHtml('View Details') + '</span></a>' : '<div class="raven-no-details-container"><img class="raven-no-details-icon" src="' + soy.$$escapeHtml(opt_data.contextPath) + '/download/resources/com.xpandit.plugins.xray/images/NO_view-details.svg"/><span class="raven-no-details-text">' + soy.$$escapeHtml('View Details') + '</span><span data-aui-trigger aria-controls="locked-testrun-dialog-t' + soy.$$escapeHtml(opt_data.test) + '-te' + soy.$$escapeHtml(opt_data.testExec) + '-id' + soy.$$escapeHtml(opt_data.identifier) + '" href="#show-on-hover" class="aui-icon aui-icon-small aui-iconfont-error">' + soy.$$escapeHtml('You cannot navigate to the details page because the Test Run has not started and it is not assigned to you.') + '</span></div>' + ((opt_data.requiresExperimentalDialog2) ? '<aui-inline-dialog2 id="locked-testrun-dialog-t' + soy.$$escapeHtml(opt_data.test) + '-te' + soy.$$escapeHtml(opt_data.testExec) + '-id' + soy.$$escapeHtml(opt_data.identifier) + '" class="aui-layer aui-inline-dialog raven-jira-inlinedialog" data-aui-alignment="right center" data-aui-responds-to="hover" aria-hidden="true"><p class="locked-testrun-info-text">' + soy.$$escapeHtml('You cannot navigate to the details page because the Test Run has not started and it is not assigned to you.') + '</p></aui-inline-dialog2>' : '<aui-inline-dialog id="locked-testrun-dialog-t' + soy.$$escapeHtml(opt_data.test) + '-te' + soy.$$escapeHtml(opt_data.testExec) + '-id' + soy.$$escapeHtml(opt_data.identifier) + '" responds-to="hover" class="raven-jira-inlinedialog"><p class="locked-testrun-info-text">' + soy.$$escapeHtml('You cannot navigate to the details page because the Test Run has not started and it is not assigned to you.') + '</p></aui-inline-dialog>'));
};
if (goog.DEBUG) {
  RAVEN.ExecuteTest.renderViewDetailsWithIdentifier.soyTemplateName = 'RAVEN.ExecuteTest.renderViewDetailsWithIdentifier';
}
;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.vendors--ec56cc9135', location = 'aui.chunk.8d2defb6169424f9142f--bcaffacbb920cee792b9.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.vendors--ec56cc9135"],{"O/HO":function(e,t,a){var i,s,r;s=[a("oDIA"),a("O+lX"),a("M4tZ")],void 0===(r="function"==typeof(i=function(e){var t;function a(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=i(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function i(t){var a="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",a,function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",a,s)}function s(){e.datepicker._isDisabledDatepicker(t.inline?t.dpDiv.parent()[0]:t.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function r(t,a){for(var i in e.extend(t,a),a)null==a[i]&&(t[i]=a[i]);return t}return e.extend(e.ui,{datepicker:{version:"1.12.1"}}),e.extend(a.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return r(this._defaults,e||{}),this},_attachDatepicker:function(t,a){var i,s,r;s="div"===(i=t.nodeName.toLowerCase())||"span"===i,t.id||(this.uuid+=1,t.id="dp"+this.uuid),(r=this._newInst(e(t),s)).settings=e.extend({},a||{}),"input"===i?this._connectDatepicker(t,r):s&&this._inlineDatepicker(t,r)},_newInst:function(t,a){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:a,dpDiv:a?i(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,a){var i=e(t);a.append=e([]),a.trigger=e([]),i.hasClass(this.markerClassName)||(this._attachments(i,a),i.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(a),e.data(t,"datepicker",a),a.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,a){var i,s,r,n=this._get(a,"appendText"),d=this._get(a,"isRTL");a.append&&a.append.remove(),n&&(a.append=e("<span class='"+this._appendClass+"'>"+n+"</span>"),t[d?"before":"after"](a.append)),t.off("focus",this._showDatepicker),a.trigger&&a.trigger.remove(),"focus"!==(i=this._get(a,"showOn"))&&"both"!==i||t.on("focus",this._showDatepicker),"button"!==i&&"both"!==i||(s=this._get(a,"buttonText"),r=this._get(a,"buttonImage"),a.trigger=e(this._get(a,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:r,alt:s,title:s}):e("<button type='button'></button>").addClass(this._triggerClass).html(r?e("<img/>").attr({src:r,alt:s,title:s}):s)),t[d?"before":"after"](a.trigger),a.trigger.on("click",function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,a,i,s,r=new Date(2009,11,20),n=this._get(e,"dateFormat");n.match(/[DM]/)&&(t=function(e){for(a=0,i=0,s=0;s<e.length;s++)e[s].length>a&&(a=e[s].length,i=s);return i},r.setMonth(t(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(t(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),e.input.attr("size",this._formatDate(e,r).length)}},_inlineDatepicker:function(t,a){var i=e(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(a.dpDiv),e.data(t,"datepicker",a),this._setDate(a,this._getDefaultDate(a),!0),this._updateDatepicker(a),this._updateAlternate(a),a.settings.disabled&&this._disableDatepicker(t),a.dpDiv.css("display","block"))},_dialogDatepicker:function(t,a,i,s,n){var d,c,o,l,h,u=this._dialogInst;return u||(this.uuid+=1,d="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+d+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),e("body").append(this._dialogInput),(u=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},e.data(this._dialogInput[0],"datepicker",u)),r(u.settings,s||{}),a=a&&a.constructor===Date?this._formatDate(u,a):a,this._dialogInput.val(a),this._pos=n?n.length?n:[n.pageX,n.pageY]:null,this._pos||(c=document.documentElement.clientWidth,o=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+l,o/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),u.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",u),this},_destroyDatepicker:function(a){var i,s=e(a),r=e.data(a,"datepicker");s.hasClass(this.markerClassName)&&(i=a.nodeName.toLowerCase(),e.removeData(a,"datepicker"),"input"===i?(r.append.remove(),r.trigger.remove(),s.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==i&&"span"!==i||s.removeClass(this.markerClassName).empty(),t===r&&(t=null))},_enableDatepicker:function(t){var a,i,s=e(t),r=e.data(t,"datepicker");s.hasClass(this.markerClassName)&&("input"===(a=t.nodeName.toLowerCase())?(t.disabled=!1,r.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==a&&"span"!==a||((i=s.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var a,i,s=e(t),r=e.data(t,"datepicker");s.hasClass(this.markerClassName)&&("input"===(a=t.nodeName.toLowerCase())?(t.disabled=!0,r.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==a&&"span"!==a||((i=s.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,a,i){var s,n,d,c,o=this._getInst(t);if(2===arguments.length&&"string"==typeof a)return"defaults"===a?e.extend({},e.datepicker._defaults):o?"all"===a?e.extend({},o.settings):this._get(o,a):null;s=a||{},"string"==typeof a&&((s={})[a]=i),o&&(this._curInst===o&&this._hideDatepicker(),n=this._getDateDatepicker(t,!0),d=this._getMinMaxDate(o,"min"),c=this._getMinMaxDate(o,"max"),r(o.settings,s),null!==d&&void 0!==s.dateFormat&&void 0===s.minDate&&(o.settings.minDate=this._formatDate(o,d)),null!==c&&void 0!==s.dateFormat&&void 0===s.maxDate&&(o.settings.maxDate=this._formatDate(o,c)),"disabled"in s&&(s.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),o),this._autoSize(o),this._setDate(o,n),this._updateAlternate(o),this._updateDatepicker(o))},_changeDatepicker:function(e,t,a){this._optionDatepicker(e,t,a)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var a=this._getInst(e);a&&(this._setDate(a,t),this._updateDatepicker(a),this._updateAlternate(a))},_getDateDatepicker:function(e,t){var a=this._getInst(e);return a&&!a.inline&&this._setDateFromField(a,t),a?this._getDate(a):null},_doKeyDown:function(t){var a,i,s,r=e.datepicker._getInst(t.target),n=!0,d=r.dpDiv.is(".ui-datepicker-rtl");if(r._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),n=!1;break;case 13:return(s=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",r.dpDiv))[0]&&e.datepicker._selectDay(t.target,r.selectedMonth,r.selectedYear,s[0]),(a=e.datepicker._get(r,"onSelect"))?(i=e.datepicker._formatDate(r),a.apply(r.input?r.input[0]:null,[i,r])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(r,"stepBigMonths"):-e.datepicker._get(r,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(r,"stepBigMonths"):+e.datepicker._get(r,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),n=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),n=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,d?1:-1,"D"),n=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(r,"stepBigMonths"):-e.datepicker._get(r,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),n=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,d?-1:1,"D"),n=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(r,"stepBigMonths"):+e.datepicker._get(r,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),n=t.ctrlKey||t.metaKey;break;default:n=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):n=!1;n&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var a,i,s=e.datepicker._getInst(t.target);if(e.datepicker._get(s,"constrainInput"))return a=e.datepicker._possibleChars(e.datepicker._get(s,"dateFormat")),i=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||i<" "||!a||a.indexOf(i)>-1},_doKeyUp:function(t){var a=e.datepicker._getInst(t.target);if(a.input.val()!==a.lastVal)try{e.datepicker.parseDate(e.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,e.datepicker._getFormatConfig(a))&&(e.datepicker._setDateFromField(a),e.datepicker._updateAlternate(a),e.datepicker._updateDatepicker(a))}catch(e){}return!0},_showDatepicker:function(t){var a,i,s,n,d,c,o;"input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t||(a=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==a&&(e.datepicker._curInst.dpDiv.stop(!0,!0),a&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),!1!==(s=(i=e.datepicker._get(a,"beforeShow"))?i.apply(t,[t,a]):{})&&(r(a.settings,s),a.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(a),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),n=!1,e(t).parents().each(function(){return!(n|="fixed"===e(this).css("position"))}),d={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,a.dpDiv.empty(),a.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(a),d=e.datepicker._checkOffset(a,d,n),a.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":n?"fixed":"absolute",display:"none",left:d.left+"px",top:d.top+"px"}),a.inline||(c=e.datepicker._get(a,"showAnim"),o=e.datepicker._get(a,"duration"),a.dpDiv.css("z-index",function(e){for(var t,a;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(a=parseInt(e.css("zIndex"),10),!isNaN(a)&&0!==a))return a;e=e.parent()}return 0}(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[c]?a.dpDiv.show(c,e.datepicker._get(a,"showOptions"),o):a.dpDiv[c||"show"](c?o:null),e.datepicker._shouldFocusInput(a)&&a.input.trigger("focus"),e.datepicker._curInst=a)))},_updateDatepicker:function(a){this.maxRows=4,t=a,a.dpDiv.empty().append(this._generateHTML(a)),this._attachHandlers(a);var i,r=this._getNumberOfMonths(a),n=r[1],d=a.dpDiv.find("."+this._dayOverClass+" a");d.length>0&&s.apply(d.get(0)),a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&a.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",17*n+"em"),a.dpDiv[(1!==r[0]||1!==r[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(a)&&a.input.trigger("focus"),a.yearshtml&&(i=a.yearshtml,setTimeout(function(){i===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),i=a.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,a,i){var s=t.dpDiv.outerWidth(),r=t.dpDiv.outerHeight(),n=t.input?t.input.outerWidth():0,d=t.input?t.input.outerHeight():0,c=document.documentElement.clientWidth+(i?0:e(document).scrollLeft()),o=document.documentElement.clientHeight+(i?0:e(document).scrollTop());return a.left-=this._get(t,"isRTL")?s-n:0,a.left-=i&&a.left===t.input.offset().left?e(document).scrollLeft():0,a.top-=i&&a.top===t.input.offset().top+d?e(document).scrollTop():0,a.left-=Math.min(a.left,a.left+s>c&&c>s?Math.abs(a.left+s-c):0),a.top-=Math.min(a.top,a.top+r>o&&o>r?Math.abs(r+d):0),a},_findPos:function(t){for(var a,i=this._getInst(t),s=this._get(i,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[s?"previousSibling":"nextSibling"];return[(a=e(t).offset()).left,a.top]},_hideDatepicker:function(t){var a,i,s,r,n=this._curInst;!n||t&&n!==e.data(t,"datepicker")||this._datepickerShowing&&(a=this._get(n,"showAnim"),i=this._get(n,"duration"),s=function(){e.datepicker._tidyDialog(n)},e.effects&&(e.effects.effect[a]||e.effects[a])?n.dpDiv.hide(a,e.datepicker._get(n,"showOptions"),i,s):n.dpDiv["slideDown"===a?"slideUp":"fadeIn"===a?"fadeOut":"hide"](a?i:null,s),a||s(),this._datepickerShowing=!1,(r=this._get(n,"onClose"))&&r.apply(n.input?n.input[0]:null,[n.input?n.input.val():"",n]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var a=e(t.target),i=e.datepicker._getInst(a[0]);(a[0].id===e.datepicker._mainDivId||0!==a.parents("#"+e.datepicker._mainDivId).length||a.hasClass(e.datepicker.markerClassName)||a.closest("."+e.datepicker._triggerClass).length||!e.datepicker._datepickerShowing||e.datepicker._inDialog&&e.blockUI)&&(!a.hasClass(e.datepicker.markerClassName)||e.datepicker._curInst===i)||e.datepicker._hideDatepicker()}},_adjustDate:function(t,a,i){var s=e(t),r=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(r,a+("M"===i?this._get(r,"showCurrentAtPos"):0),i),this._updateDatepicker(r))},_gotoToday:function(t){var a,i=e(t),s=this._getInst(i[0]);this._get(s,"gotoCurrent")&&s.currentDay?(s.selectedDay=s.currentDay,s.drawMonth=s.selectedMonth=s.currentMonth,s.drawYear=s.selectedYear=s.currentYear):(a=new Date,s.selectedDay=a.getDate(),s.drawMonth=s.selectedMonth=a.getMonth(),s.drawYear=s.selectedYear=a.getFullYear()),this._notifyChange(s),this._adjustDate(i)},_selectMonthYear:function(t,a,i){var s=e(t),r=this._getInst(s[0]);r["selected"+("M"===i?"Month":"Year")]=r["draw"+("M"===i?"Month":"Year")]=parseInt(a.options[a.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(s)},_selectDay:function(t,a,i,s){var r,n=e(t);e(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(n[0])||((r=this._getInst(n[0])).selectedDay=r.currentDay=e("a",s).html(),r.selectedMonth=r.currentMonth=a,r.selectedYear=r.currentYear=i,this._selectDate(t,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear)))},_clearDate:function(t){var a=e(t);this._selectDate(a,"")},_selectDate:function(t,a){var i,s=e(t),r=this._getInst(s[0]);a=null!=a?a:this._formatDate(r),r.input&&r.input.val(a),this._updateAlternate(r),(i=this._get(r,"onSelect"))?i.apply(r.input?r.input[0]:null,[a,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(t){var a,i,s,r=this._get(t,"altField");r&&(a=this._get(t,"altFormat")||this._get(t,"dateFormat"),i=this._getDate(t),s=this.formatDate(a,i,this._getFormatConfig(t)),e(r).val(s))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,a=new Date(e.getTime());return a.setDate(a.getDate()+4-(a.getDay()||7)),t=a.getTime(),a.setMonth(0),a.setDate(1),Math.floor(Math.round((t-a)/864e5)/7)+1},parseDate:function(t,a,i){if(null==t||null==a)throw"Invalid arguments";if(""===(a="object"==typeof a?a.toString():a+""))return null;var s,r,n,d,c=0,o=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,l="string"!=typeof o?o:(new Date).getFullYear()%100+parseInt(o,10),h=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,u=(i?i.dayNames:null)||this._defaults.dayNames,p=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,g=(i?i.monthNames:null)||this._defaults.monthNames,_=-1,f=-1,k=-1,D=-1,m=!1,y=function(e){var a=s+1<t.length&&t.charAt(s+1)===e;return a&&s++,a},v=function(e){var t=y(e),i="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,s=new RegExp("^\\d{"+("y"===e?i:1)+","+i+"}"),r=a.substring(c).match(s);if(!r)throw"Missing number at position "+c;return c+=r[0].length,parseInt(r[0],10)},M=function(t,i,s){var r=-1,n=e.map(y(t)?s:i,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(n,function(e,t){var i=t[1];if(a.substr(c,i.length).toLowerCase()===i.toLowerCase())return r=t[0],c+=i.length,!1}),-1!==r)return r+1;throw"Unknown name at position "+c},w=function(){if(a.charAt(c)!==t.charAt(s))throw"Unexpected literal at position "+c;c++};for(s=0;s<t.length;s++)if(m)"'"!==t.charAt(s)||y("'")?w():m=!1;else switch(t.charAt(s)){case"d":k=v("d");break;case"D":M("D",h,u);break;case"o":D=v("o");break;case"m":f=v("m");break;case"M":f=M("M",p,g);break;case"y":_=v("y");break;case"@":_=(d=new Date(v("@"))).getFullYear(),f=d.getMonth()+1,k=d.getDate();break;case"!":_=(d=new Date((v("!")-this._ticksTo1970)/1e4)).getFullYear(),f=d.getMonth()+1,k=d.getDate();break;case"'":y("'")?w():m=!0;break;default:w()}if(c<a.length&&(n=a.substr(c),!/^\s+/.test(n)))throw"Extra/unparsed characters found in date: "+n;if(-1===_?_=(new Date).getFullYear():_<100&&(_+=(new Date).getFullYear()-(new Date).getFullYear()%100+(_<=l?0:-100)),D>-1)for(f=1,k=D;!(k<=(r=this._getDaysInMonth(_,f-1)));)f++,k-=r;if((d=this._daylightSavingAdjust(new Date(_,f-1,k))).getFullYear()!==_||d.getMonth()+1!==f||d.getDate()!==k)throw"Invalid date";return d},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,a){if(!t)return"";var i,s=(a?a.dayNamesShort:null)||this._defaults.dayNamesShort,r=(a?a.dayNames:null)||this._defaults.dayNames,n=(a?a.monthNamesShort:null)||this._defaults.monthNamesShort,d=(a?a.monthNames:null)||this._defaults.monthNames,c=function(t){var a=i+1<e.length&&e.charAt(i+1)===t;return a&&i++,a},o=function(e,t,a){var i=""+t;if(c(e))for(;i.length<a;)i="0"+i;return i},l=function(e,t,a,i){return c(e)?i[t]:a[t]},h="",u=!1;if(t)for(i=0;i<e.length;i++)if(u)"'"!==e.charAt(i)||c("'")?h+=e.charAt(i):u=!1;else switch(e.charAt(i)){case"d":h+=o("d",t.getDate(),2);break;case"D":h+=l("D",t.getDay(),s,r);break;case"o":h+=o("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=o("m",t.getMonth()+1,2);break;case"M":h+=l("M",t.getMonth(),n,d);break;case"y":h+=c("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":h+=t.getTime();break;case"!":h+=1e4*t.getTime()+this._ticksTo1970;break;case"'":c("'")?h+="'":u=!0;break;default:h+=e.charAt(i)}return h},_possibleChars:function(e){var t,a="",i=!1,s=function(a){var i=t+1<e.length&&e.charAt(t+1)===a;return i&&t++,i};for(t=0;t<e.length;t++)if(i)"'"!==e.charAt(t)||s("'")?a+=e.charAt(t):i=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":a+="0123456789";break;case"D":case"M":return null;case"'":s("'")?a+="'":i=!0;break;default:a+=e.charAt(t)}return a},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var a=this._get(e,"dateFormat"),i=e.lastVal=e.input?e.input.val():null,s=this._getDefaultDate(e),r=s,n=this._getFormatConfig(e);try{r=this.parseDate(a,i,n)||s}catch(e){i=t?"":i}e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),e.currentDay=i?r.getDate():0,e.currentMonth=i?r.getMonth():0,e.currentYear=i?r.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,a,i){var s=null==a||""===a?i:"string"==typeof a?function(a){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),a,e.datepicker._getFormatConfig(t))}catch(e){}for(var i=(a.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,s=i.getFullYear(),r=i.getMonth(),n=i.getDate(),d=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=d.exec(a);c;){switch(c[2]||"d"){case"d":case"D":n+=parseInt(c[1],10);break;case"w":case"W":n+=7*parseInt(c[1],10);break;case"m":case"M":r+=parseInt(c[1],10),n=Math.min(n,e.datepicker._getDaysInMonth(s,r));break;case"y":case"Y":s+=parseInt(c[1],10),n=Math.min(n,e.datepicker._getDaysInMonth(s,r))}c=d.exec(a)}return new Date(s,r,n)}(a):"number"==typeof a?isNaN(a)?i:function(e){var t=new Date;return t.setDate(t.getDate()+e),t}(a):new Date(a.getTime());return(s=s&&"Invalid Date"===s.toString()?i:s)&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,a){var i=!t,s=e.selectedMonth,r=e.selectedYear,n=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=n.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=n.getMonth(),e.drawYear=e.selectedYear=e.currentYear=n.getFullYear(),s===e.selectedMonth&&r===e.selectedYear||a||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(i?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(t){var a=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(i,-a,"M")},next:function(){e.datepicker._adjustDate(i,+a,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(i)},selectDay:function(){return e.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(i,this,"Y"),!1}};e(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,a,i,s,r,n,d,c,o,l,h,u,p,g,_,f,k,D,m,y,v,M,w,b,C,I,x,Y,S,F,N,T,A,K,j,O,R,L,W,E=new Date,H=this._daylightSavingAdjust(new Date(E.getFullYear(),E.getMonth(),E.getDate())),P=this._get(e,"isRTL"),U=this._get(e,"showButtonPanel"),z=this._get(e,"hideIfNoPrevNext"),J=this._get(e,"navigationAsDateFormat"),B=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),X=this._get(e,"stepMonths"),Z=1!==B[0]||1!==B[1],$=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),q=this._getMinMaxDate(e,"min"),G=this._getMinMaxDate(e,"max"),Q=e.drawMonth-V,ee=e.drawYear;if(Q<0&&(Q+=12,ee--),G)for(t=this._daylightSavingAdjust(new Date(G.getFullYear(),G.getMonth()-B[0]*B[1]+1,G.getDate())),t=q&&t<q?q:t;this._daylightSavingAdjust(new Date(ee,Q,1))>t;)--Q<0&&(Q=11,ee--);for(e.drawMonth=Q,e.drawYear=ee,a=this._get(e,"prevText"),a=J?this.formatDate(a,this._daylightSavingAdjust(new Date(ee,Q-X,1)),this._getFormatConfig(e)):a,i=this._canAdjustMonth(e,-1,ee,Q)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(P?"e":"w")+"'>"+a+"</span></a>":z?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(P?"e":"w")+"'>"+a+"</span></a>",s=this._get(e,"nextText"),s=J?this.formatDate(s,this._daylightSavingAdjust(new Date(ee,Q+X,1)),this._getFormatConfig(e)):s,r=this._canAdjustMonth(e,1,ee,Q)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(P?"w":"e")+"'>"+s+"</span></a>":z?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(P?"w":"e")+"'>"+s+"</span></a>",n=this._get(e,"currentText"),d=this._get(e,"gotoCurrent")&&e.currentDay?$:H,n=J?this.formatDate(n,d,this._getFormatConfig(e)):n,c=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",o=U?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(P?c:"")+(this._isInRange(e,d)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+n+"</button>":"")+(P?"":c)+"</div>":"",l=parseInt(this._get(e,"firstDay"),10),l=isNaN(l)?0:l,h=this._get(e,"showWeek"),u=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),g=this._get(e,"monthNames"),_=this._get(e,"monthNamesShort"),f=this._get(e,"beforeShowDay"),k=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths"),m=this._getDefaultDate(e),y="",M=0;M<B[0];M++){for(w="",this.maxRows=4,b=0;b<B[1];b++){if(C=this._daylightSavingAdjust(new Date(ee,Q,e.selectedDay)),I=" ui-corner-all",x="",Z){if(x+="<div class='ui-datepicker-group",B[1]>1)switch(b){case 0:x+=" ui-datepicker-group-first",I=" ui-corner-"+(P?"right":"left");break;case B[1]-1:x+=" ui-datepicker-group-last",I=" ui-corner-"+(P?"left":"right");break;default:x+=" ui-datepicker-group-middle",I=""}x+="'>"}for(x+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+I+"'>"+(/all|left/.test(I)&&0===M?P?r:i:"")+(/all|right/.test(I)&&0===M?P?i:r:"")+this._generateMonthYearHeader(e,Q,ee,q,G,M>0||b>0,g,_)+"</div><table class='ui-datepicker-calendar'><thead><tr>",Y=h?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",v=0;v<7;v++)S=(v+l)%7,Y+="<th scope='col'"+((v+l+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+u[S]+"'>"+p[S]+"</span></th>";for(x+=Y+"</tr></thead><tbody>",F=this._getDaysInMonth(ee,Q),ee===e.selectedYear&&Q===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,F)),N=(this._getFirstDayOfMonth(ee,Q)-l+7)%7,T=Math.ceil((N+F)/7),A=Z&&this.maxRows>T?this.maxRows:T,this.maxRows=A,K=this._daylightSavingAdjust(new Date(ee,Q,1-N)),j=0;j<A;j++){for(x+="<tr>",O=h?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(K)+"</td>":"",v=0;v<7;v++)R=f?f.apply(e.input?e.input[0]:null,[K]):[!0,""],W=(L=K.getMonth()!==Q)&&!D||!R[0]||q&&K<q||G&&K>G,O+="<td class='"+((v+l+6)%7>=5?" ui-datepicker-week-end":"")+(L?" ui-datepicker-other-month":"")+(K.getTime()===C.getTime()&&Q===e.selectedMonth&&e._keyEvent||m.getTime()===K.getTime()&&m.getTime()===C.getTime()?" "+this._dayOverClass:"")+(W?" "+this._unselectableClass+" ui-state-disabled":"")+(L&&!k?"":" "+R[1]+(K.getTime()===$.getTime()?" "+this._currentClass:"")+(K.getTime()===H.getTime()?" ui-datepicker-today":""))+"'"+(L&&!k||!R[2]?"":" title='"+R[2].replace(/'/g,"&#39;")+"'")+(W?"":" data-handler='selectDay' data-event='click' data-month='"+K.getMonth()+"' data-year='"+K.getFullYear()+"'")+">"+(L&&!k?"&#xa0;":W?"<span class='ui-state-default'>"+K.getDate()+"</span>":"<a class='ui-state-default"+(K.getTime()===H.getTime()?" ui-state-highlight":"")+(K.getTime()===$.getTime()?" ui-state-active":"")+(L?" ui-priority-secondary":"")+"' href='#'>"+K.getDate()+"</a>")+"</td>",K.setDate(K.getDate()+1),K=this._daylightSavingAdjust(K);x+=O+"</tr>"}++Q>11&&(Q=0,ee++),w+=x+="</tbody></table>"+(Z?"</div>"+(B[0]>0&&b===B[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}y+=w}return y+=o,e._keyEvent=!1,y},_generateMonthYearHeader:function(e,t,a,i,s,r,n,d){var c,o,l,h,u,p,g,_,f=this._get(e,"changeMonth"),k=this._get(e,"changeYear"),D=this._get(e,"showMonthAfterYear"),m="<div class='ui-datepicker-title'>",y="";if(r||!f)y+="<span class='ui-datepicker-month'>"+n[t]+"</span>";else{for(c=i&&i.getFullYear()===a,o=s&&s.getFullYear()===a,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",l=0;l<12;l++)(!c||l>=i.getMonth())&&(!o||l<=s.getMonth())&&(y+="<option value='"+l+"'"+(l===t?" selected='selected'":"")+">"+d[l]+"</option>");y+="</select>"}if(D||(m+=y+(!r&&f&&k?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",r||!k)m+="<span class='ui-datepicker-year'>"+a+"</span>";else{for(h=this._get(e,"yearRange").split(":"),u=(new Date).getFullYear(),g=(p=function(e){var t=e.match(/c[+\-].*/)?a+parseInt(e.substring(1),10):e.match(/[+\-].*/)?u+parseInt(e,10):parseInt(e,10);return isNaN(t)?u:t})(h[0]),_=Math.max(g,p(h[1]||"")),g=i?Math.max(g,i.getFullYear()):g,_=s?Math.min(_,s.getFullYear()):_,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";g<=_;g++)e.yearshtml+="<option value='"+g+"'"+(g===a?" selected='selected'":"")+">"+g+"</option>";e.yearshtml+="</select>",m+=e.yearshtml,e.yearshtml=null}return m+=this._get(e,"yearSuffix"),D&&(m+=(!r&&f&&k?"":"&#xa0;")+y),m+="</div>"},_adjustInstDate:function(e,t,a){var i=e.selectedYear+("Y"===a?t:0),s=e.selectedMonth+("M"===a?t:0),r=Math.min(e.selectedDay,this._getDaysInMonth(i,s))+("D"===a?t:0),n=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,s,r)));e.selectedDay=n.getDate(),e.drawMonth=e.selectedMonth=n.getMonth(),e.drawYear=e.selectedYear=n.getFullYear(),"M"!==a&&"Y"!==a||this._notifyChange(e)},_restrictMinMax:function(e,t){var a=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),s=a&&t<a?a:t;return i&&s>i?i:s},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,a,i){var s=this._getNumberOfMonths(e),r=this._daylightSavingAdjust(new Date(a,i+(t<0?t:s[0]*s[1]),1));return t<0&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(e,r)},_isInRange:function(e,t){var a,i,s=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),n=null,d=null,c=this._get(e,"yearRange");return c&&(a=c.split(":"),i=(new Date).getFullYear(),n=parseInt(a[0],10),d=parseInt(a[1],10),a[0].match(/[+\-].*/)&&(n+=i),a[1].match(/[+\-].*/)&&(d+=i)),(!s||t.getTime()>=s.getTime())&&(!r||t.getTime()<=r.getTime())&&(!n||t.getFullYear()>=n)&&(!d||t.getFullYear()<=d)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,a,i){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var s=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(i,a,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),s,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).on("mousedown",e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var a=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(a)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(a)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(a))},e.datepicker=new a,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.12.1",e.datepicker})?i.apply(t,s):i)||(e.exports=r)}}]);
//# sourceMappingURL=aui.chunk.8d2defb6169424f9142f--bcaffacbb920cee792b9.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.component.form.date-select', location = 'aui.chunk.27310fad49ceb6fe1f1a--d9babdcfda6dd4a41ba9.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.component.form.date-select"],{Krr2:function(e,t,a){},cQgS:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DatePicker=void 0;var i=a("hvBt");Object.defineProperty(t,"DatePicker",{enumerable:!0,get:function(){return function(e){return e&&e.__esModule?e:{default:e}}(i).default}}),a("6fSn"),a("Rvtc"),a("Krr2")},hvBt:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CalendarWidget=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=p(a("+x/D")),o=p(a("O/HO")),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a("JFi+")),u=a("cWqH"),d=p(a("KloK")),l=p(a("+ay7")),s=p(a("HH5i")),c=p(a("P3bb")),f=p(a("OEua"));function p(e){return e&&e.__esModule?e:{default:e}}var h=function(e,t){var a=void 0,i=void 0,o=void 0,r=!1,u=(0,n.default)("body"),d=function(t){var a=(0,n.default)(t.target),o=a.closest(i).length||a.is(e),u=a.closest(".ui-datepicker-header").length;if(!o&&!u||t.keyCode===l.default.ESCAPE)return h(),void(r=!1);a.get(0)!==e.get(0)&&t.preventDefault()},s=function(){r||(u.on("focus blur click mousedown","*",d),r=!0)},f=function(){a.get(0).open||p()},p=function(){a.get(0).open=!0},h=function(){a.get(0).open=!1};return{calendarContainerSelector:null,getPopupContents:function(e){var l=e.$field;return a=function(e){var t=e.horizontalAlignment,a=e.datePickerUUID,i=new c.default;i.id=a;var o=(0,n.default)(i);return o.attr("persistent",""),o.attr("data-aui-focus","false"),o.attr("alignment","bottom "+t),o.addClass("aui-datepicker-dialog"),o}({horizontalAlignment:function(e){return e.offset().left<window.innerWidth/2?"left":"right"}(l),datePickerUUID:t}),(o=l.closest("aui-inline-dialog").get(0))&&(o._datePickerPopup=a,(0,n.default)(o).on("aui-hide",function(e){r&&e.preventDefault(),u.off("focus blur","*",d),o&&o._datePickerPopup&&delete o._datePickerPopup})),u.append(a),i=a,a},handleFieldFocus:f,showDatePicker:p,hideDatePicker:h,handleChangeMonthYear:function(){setTimeout(a.refresh,0)},getCalendarNode:function(){return a.get(0).childNodes[0]},destroyPolyfill:function(){h(),e.attr("placeholder",null),e.off("focus click",f),e.off("focusout keydown",s),u.off("keydown",s),u.off("focus blur click mousedown keydown",d)},createPolyfill:function(){u.on("keydown",d),e.on("focusout keydown",s)}}},k=function(e,t){var a=e.datePicker,i=t.calendarContainerSelector,o=t.getPopupContents,u=t.handleFieldFocus,d=t.showDatePicker,l=t.hideDatePicker,s=t.handleChangeMonthYear,c=t.getCalendarNode,f=t.destroyPolyfill,p=t.createPolyfill,h=a.getField(),k=a.getOptions(),g=a.getUUID(),m=void 0,v=void 0,b=void 0,x=function(e){return function(t){if(void 0!==m)return e(t)}},T=x(function(){m.datepicker("destroy")});a.show=d,a.hide=l,a.destroyPolyfill=function(){f(),h.off("propertychange keyup input paste",j),v&&(v.disconnect(),v=null),y.prototype.browserSupportsDateField&&(h.get(0).type="date"),T(),delete a.destroyPolyfill,delete a.show,delete a.hide},a.setDate=x(function(e){m.datepicker("setDate",e)}),a.getDate=x(function(){return m.datepicker("getDate")}),a.setMin=x(function(e){return m.datepicker("option","minDate",e)}),a.setMax=x(function(e){return m.datepicker("option","maxDate",e)});var j=function(e){(0,n.default)(e.currentTarget).val()&&m.datepicker("setDate",h.val())};k.languageCode in y.prototype.localisations||(k.languageCode="");var D=y.prototype.localisations;if(h.attr("aria-controls",g),i?(b=(0,n.default)(i)).addClass("aui-datepicker-dialog"):b=o({$field:h}),void 0===m){void 0!==h.attr("step")&&r.log("WARNING: The date picker polyfill currently does not support the step attribute!");var P=function(e){var t=e.dateFormat,a=e.$field,i=e.onSelect,n=e.hide,o=e.onChangeMonthYear;return{dateFormat:t,defaultDate:a.val(),maxDate:a.attr("max"),minDate:a.attr("min"),nextText:">",onSelect:function(e){a.val(e),a.trigger("change"),n(),i&&i.call(this,e)},onChangeMonthYear:o,prevText:"<"}}({dateFormat:k.dateFormat,$field:h,onSelect:k.onSelect,hide:a.hide,onChangeMonthYear:s}),w=n.default.extend(void 0,P,D);k.firstDay>-1&&(w.firstDay=k.firstDay),m=function(e){var t=e.config,a=e.popupContents,i=e.getCalendarNode,o=e.hint,r=(0,n.default)(i());r.datepicker(t);var u=void 0;return o&&((u=(0,n.default)("<div/>").addClass("aui-datepicker-hint")).append("<span/>").text(o),a.append(u)),r}({config:w,popupContents:b,getCalendarNode:function(){return i||c()},hint:k.hint}),p(),h.on("propertychange keyup input paste",j),(v=new MutationObserver(function(e){e.forEach(function(e){"min"===e.attributeName?a.setMin(e.target.getAttribute("min")):"max"===e.attributeName&&a.setMax(e.target.getAttribute("max"))})})).observe(h.get(0),{attributes:!0})}if(h.on("focus click",u),h.attr("placeholder",k.dateFormat),k.overrideBrowserDefault&&y.prototype.browserSupportsDateField){h.get(0).type="text";var C=h.get(0).getAttribute("value");C&&(h.get(0).value=C)}},g=function(){};function y(e,t){var a={},i=(0,f.default)("date-picker"),o=(0,n.default)(e);o.attr("data-aui-dp-uuid",i);var r={getUUID:function(){return i},destroyPolyfill:g,getField:function(){return o},getOptions:function(){return a},reset:function(){r.destroyPolyfill();var e=!y.prototype.browserSupportsDateField,t=a.overrideBrowserDefault;if(e||t){var n=h(o,i);k({datePicker:r},n)}},reconfigure:function(e){a=n.default.extend(void 0,y.prototype.defaultOptions,e),r.reset()}};return r.reconfigure(t),r}function m(e,t){var a=n.default.extend({nextText:">",prevText:"<"},t),i=(0,n.default)(e).addClass("aui-datepicker-dialog").datepicker(a);if(a.hint){var o=(0,n.default)("<div/>").addClass("aui-datepicker-hint");o.append("<span/>").text(a.hint),i.append(o)}return i.reconfigure=function(e){i.datepicker("destroy"),i.datepicker(e)},i.destroy=function(){i.datepicker("destroy")},i}y.prototype.browserSupportsDateField=(0,u.supportsDateField)(),y.prototype.defaultOptions={overrideBrowserDefault:!1,firstDay:-1,languageCode:(0,n.default)("html").attr("lang")||"en-AU",dateFormat:o.default.W3C},y.prototype.localisations={dayNames:[s.default.getText("ajs.datepicker.localisations.day-names.sunday"),s.default.getText("ajs.datepicker.localisations.day-names.monday"),s.default.getText("ajs.datepicker.localisations.day-names.tuesday"),s.default.getText("ajs.datepicker.localisations.day-names.wednesday"),s.default.getText("ajs.datepicker.localisations.day-names.thursday"),s.default.getText("ajs.datepicker.localisations.day-names.friday"),s.default.getText("ajs.datepicker.localisations.day-names.saturday")],dayNamesMin:[s.default.getText("ajs.datepicker.localisations.day-names-min.sunday"),s.default.getText("ajs.datepicker.localisations.day-names-min.monday"),s.default.getText("ajs.datepicker.localisations.day-names-min.tuesday"),s.default.getText("ajs.datepicker.localisations.day-names-min.wednesday"),s.default.getText("ajs.datepicker.localisations.day-names-min.thursday"),s.default.getText("ajs.datepicker.localisations.day-names-min.friday"),s.default.getText("ajs.datepicker.localisations.day-names-min.saturday")],firstDay:s.default.getText("ajs.datepicker.localisations.first-day"),isRTL:"true"===s.default.getText("ajs.datepicker.localisations.is-RTL"),monthNames:[s.default.getText("ajs.datepicker.localisations.month-names.january"),s.default.getText("ajs.datepicker.localisations.month-names.february"),s.default.getText("ajs.datepicker.localisations.month-names.march"),s.default.getText("ajs.datepicker.localisations.month-names.april"),s.default.getText("ajs.datepicker.localisations.month-names.may"),s.default.getText("ajs.datepicker.localisations.month-names.june"),s.default.getText("ajs.datepicker.localisations.month-names.july"),s.default.getText("ajs.datepicker.localisations.month-names.august"),s.default.getText("ajs.datepicker.localisations.month-names.september"),s.default.getText("ajs.datepicker.localisations.month-names.october"),s.default.getText("ajs.datepicker.localisations.month-names.november"),s.default.getText("ajs.datepicker.localisations.month-names.december")],showMonthAfterYear:"true"===s.default.getText("ajs.datepicker.localisations.show-month-after-year"),yearSuffix:s.default.getText("ajs.datepicker.localisations.year-suffix")};var v="aui-datepicker",b=function(e){return function(t){var a=this.data(v);return a?"object"===(void 0===t?"undefined":i(t))&&a.reconfigure(t):(a=new e(this,t),this.data(v,a)),a}};n.default.fn.datePicker=b(y),(0,d.default)("DatePicker",y),n.default.fn.calendarWidget=b(m),(0,d.default)("CalendarWidget",m),t.default=y,t.CalendarWidget=m}},[["cQgS","runtime","aui.splitchunk.vendors--52bf8654d5","aui.splitchunk.vendors--b47d4b691d","aui.splitchunk.vendors--20a97d6a33","aui.splitchunk.vendors--084821f40b","aui.splitchunk.vendors--02a4084a95","aui.splitchunk.vendors--ec56cc9135","aui.splitchunk.172ffb6da7","aui.splitchunk.b0831cc7d0","aui.splitchunk.572a8bf5cd","aui.splitchunk.087aba7911","aui.splitchunk.fbd1a5ab27","aui.splitchunk.d49cf794d2","aui.splitchunk.54d3f16c20","aui.splitchunk.e54c7c7304","aui.splitchunk.336ae4f9e7","aui.splitchunk.bb051ea9dd","aui.splitchunk.fb15cffa72","aui.splitchunk.f1e06f97a4","aui.splitchunk.56dfb54d0c","aui.splitchunk.479fe6ee76","aui.splitchunk.f673ef53ac","aui.splitchunk.8659b532c1","aui.splitchunk.908fe798b4","aui.splitchunk.5f851f97df","aui.splitchunk.462ee5f9ef","aui.splitchunk.d0110a864f","aui.splitchunk.afa5039e04","aui.splitchunk.bff3715233","aui.splitchunk.c750721820","aui.splitchunk.6d6f245ed3","aui.splitchunk.50dca3e042","aui.splitchunk.084821f40b","aui.splitchunk.5b8c290363","aui.splitchunk.baa83dbaf9","aui.splitchunk.e5af17b48e","aui.splitchunk.36cd9d521c","aui.splitchunk.d925afe2c0","aui.splitchunk.5b7fdbd666","aui.splitchunk.8705a83fa5","aui.splitchunk.8a641c03a4","aui.splitchunk.d727dd207f","aui.splitchunk.543254b237"]]]);
//# sourceMappingURL=aui.chunk.27310fad49ceb6fe1f1a--d9babdcfda6dd4a41ba9.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.component.dropdown2', location = 'aui.chunk.b7e891fa91a82da379d1--30b5902f9415f7a330ba.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.component.dropdown2"],[],[["XHZH","runtime","aui.splitchunk.vendors--52bf8654d5","aui.splitchunk.vendors--b47d4b691d","aui.splitchunk.vendors--9c48cc20a9","aui.splitchunk.vendors--084821f40b","aui.splitchunk.vendors--d2297af84a","aui.splitchunk.172ffb6da7","aui.splitchunk.b0831cc7d0","aui.splitchunk.087aba7911","aui.splitchunk.fbd1a5ab27","aui.splitchunk.54d3f16c20","aui.splitchunk.e54c7c7304","aui.splitchunk.bb051ea9dd","aui.splitchunk.fb15cffa72","aui.splitchunk.f1e06f97a4","aui.splitchunk.56dfb54d0c","aui.splitchunk.479fe6ee76","aui.splitchunk.f673ef53ac","aui.splitchunk.8659b532c1","aui.splitchunk.9c48cc20a9","aui.splitchunk.5f851f97df","aui.splitchunk.d0110a864f","aui.splitchunk.afa5039e04","aui.splitchunk.bff3715233","aui.splitchunk.c750721820","aui.splitchunk.6d6f245ed3","aui.splitchunk.ed86a19e01","aui.splitchunk.084821f40b","aui.splitchunk.5b8c290363","aui.splitchunk.baa83dbaf9","aui.splitchunk.e5af17b48e","aui.splitchunk.36cd9d521c","aui.splitchunk.4248e12b20","aui.splitchunk.b548966f06"]]]);
//# sourceMappingURL=aui.chunk.b7e891fa91a82da379d1--30b5902f9415f7a330ba.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.page.iconography', location = 'aui.chunk.bdafbba768eff22233fc--8f22190d7e95afd6cbd1.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.page.iconography"],[],[["rSV2","runtime","aui.splitchunk.b0831cc7d0","aui.splitchunk.336ae4f9e7","aui.splitchunk.56dfb54d0c","aui.splitchunk.908fe798b4"]]]);
//# sourceMappingURL=aui.chunk.bdafbba768eff22233fc--8f22190d7e95afd6cbd1.js.map;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/dropdown/Dropdown.js' */
define("jira/dropdown",["require"],function(i){function o(){try{return Boolean(n.require("jira/dialog/dialog").current)}catch(i){}return!1}var n=i("jira/util/top-same-origin-window")(window),t=i("jira/ajs/layer/layer-interactions"),e=i("jquery"),d=i("jira/util/key-code"),r=[],s={current:null,addInstance:function(){r.push(this)},hideInstances:function(){var i=this;e(r).each(function(){i!==this&&this.hideDropdown()})},getHash:function(){return this.hash||(this.hash={container:this.dropdown,hide:this.hideDropdown,show:this.displayDropdown}),this.hash},displayDropdown:function(){if(this.current!==this){this.hideInstances(),this.current=this,this.dropdown.css({display:"block"}),this.displayed=!0;var i=this.dropdown;o()||setTimeout(function(){var o=e(window),n=i.offset().top+i.prop("offsetHeight")-o.height()+10;o.scrollTop()<n&&e("html,body").animate({scrollTop:n},300,"linear")},100)}},hideDropdown:function(){!1!==this.displayed&&(this.current=null,this.dropdown.css({display:"none"}),this.displayed=!1)},init:function(i,o){var n=this;this.addInstance(this),this.dropdown=e(o),this.dropdown.css({display:"none"}),e(document).keydown(function(i){i.keyCode===d.TAB&&n.hideDropdown()}),i.target?e.aop.before(i,function(){n.displayed||n.displayDropdown()}):(n.dropdown.css("top",e(i).outerHeight()+"px"),i.click(function(i){n.displayed?n.hideDropdown():(n.displayDropdown(),i.stopPropagation()),i.preventDefault()})),e(document.body).click(function(){n.displayed&&n.hideDropdown()})}};return t.preventDialogHide(s),t.hideBeforeDialogShown(s),s}),AJS.namespace("JIRA.Dropdown",null,require("jira/dropdown")),AJS.namespace("jira.widget.dropdown",null,require("jira/dropdown"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/AutoComplete.js' */
define("jira/autocomplete/autocomplete",["jira/ajs/ajax/smart-ajax","jira/util/key-code","jira/util/objects","jquery"],function(e,t,o,n){return function(){var i,s=function e(t,o){e.t&&(clearTimeout(e.t),e.t=void 0),e.t=setTimeout(t,1e3*o)},r={9:!0,13:!0,14:!0,25:!0,27:!0,38:!0,40:!0,224:!0};return{dispatcher:function(){},getSavedResponse:function(){},saveResponse:function(){},renderSuggestions:function(){},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},set:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},completeField:function(e){e&&(this.field.val(e).focus(),this.field.trigger("change"))},textToSuggestionCursorPosition:function(){return this.field.val()},_makeRequest:function(t){var n=this,i=o.copyObject(t);return this.pendingRequest&&this.pendingRequest.abort(),i.complete=function(){n.pendingRequest=null},i.error=function(e){!e.aborted&&0!==e.status&&t.error&&t.error.apply(this,arguments)},this.pendingRequest=e.makeRequest(i)},addSuggestionControls:function(e){function o(e){d.dropdownController.displayed&&a(e.data.index)}function s(e){0===e.data.index&&(d.selectedIndex=-1),n(this).removeClass("active")}function r(e){d.completeField(d.suggestionNodes[e.data.index][1])}var d=this,l=function(e,t){var o=!1===d.autoSelectFirst?-1:0;return d.allowArrowCarousel?e>t?o:e<o?t:e:e>t?t:e<o?(d.responseContainer.scrollTop(0),o):e},a=function(e){void 0!==d.selectedIndex&&d.selectedIndex>-1&&d.suggestionNodes[d.selectedIndex][0].removeClass("active"),d.selectedIndex=l(e,d.suggestionNodes.length-1),d.selectedIndex>-1&&d.suggestionNodes[d.selectedIndex][0].addClass("active")},u=function(){return d.suggestionNodes&&d.suggestionNodes[d.selectedIndex]&&d.suggestionNodes[d.selectedIndex][0].hasClass("active")},p=function(e){d.responseContainer.is(":visible")&&e.keyCode===t.ENTER&&(u()&&!d.pendingRequest&&d.completeField(d.suggestionNodes[d.selectedIndex][1]),e.preventDefault(),e.stopPropagation())},c=function(e){if(d.responseContainer.is(":visible"))if(d.field[0]!==document.activeElement&&d.field.focus(),e.keyCode===t.DOWN){if(a(d.selectedIndex+1),d.selectedIndex>=0){var o=d.responseContainer.height(),n=d.suggestionNodes[d.selectedIndex][0].position().top+d.suggestionNodes[d.selectedIndex][0].outerHeight();n-o>0&&d.responseContainer.scrollTop(d.responseContainer.scrollTop()+n-o+2)}else d.responseContainer.scrollTop(0);e.preventDefault()}else if(e.keyCode===t.UP){if(a(d.selectedIndex-1),d.selectedIndex>=0){var i=d.suggestionNodes[d.selectedIndex][0].position().top;i<0&&d.responseContainer.scrollTop(d.responseContainer.scrollTop()+i-2)}e.preventDefault()}else e.keyCode===t.TAB&&(u()?(d.completeField(d.suggestionNodes[d.selectedIndex][1]),e.preventDefault()):d.dropdownController.hideDropdown())};if(e.length){this.selectedIndex=0,this.suggestionNodes=e;for(var h=0;h<d.suggestionNodes.length;h++){var f={instance:this,index:h};this.suggestionNodes[h][0].bind("mouseover",f,o).bind("mouseout",f,s).bind("click",f,r).bind("mousedown",function(e){e.preventDefault()})}this.keyboardHandlerBinded||(n(this.field).keypress(p),n(this.field).keydown(c),this.keyboardHandlerBinded=!0),a(!1===d.autoSelectFirst?-1:0),i=this}},clearResponseContainer:function(){this.responseContainer.empty(),this.suggestionNodes=void 0},delay:s,buildResponseContainer:function(){var e=this.field.parent().addClass("atlassian-autocomplete");this.responseContainer=n(document.createElement("div")),this.responseContainer.addClass("suggestions"),this.positionResponseContainer(),this.responseContainer.appendTo(e)},positionResponseContainer:function(){this.responseContainer.css({top:this.field.outerHeight()})},keyUpHandler:function(){function e(){this.responseContainer||this.buildResponseContainer(),this.dispatcher(this.field.val())}return function(o){return this.field.val().length>=this.minQueryLength&&(o.keyCode in r&&(!this.responseContainer||this.responseContainer.is(":visible")||o.keyCode!==t.UP&&o.keyCode!==t.DOWN)||e.call(this)),o}}(),addMultiSelectAdvice:function(e){var t=this,o=function e(o){if(!e.isAlerting){e.isAlerting=!0;var i=n(document.createElement("div")).css({float:"left",display:"none"}).addClass("warningBox").html("Oops! You have already entered the value <em>"+o+"</em>").appendTo(t.field.parent()).show("fast",function(){t.delay(function(){i.hide("fast",function(){i.remove(),e.isAlerting=!1})},4)})}};n.aop.before({target:this,method:"dispatcher"},function(t){var o=this.field.val();return t[0]=n.trim(o.slice(o.lastIndexOf(e)+1)),t}),n.aop.before({target:this,method:"completeField"},function(t){var i=t[0],s=this.field.val().split(e),r=n(s).map(function(){return n.trim(this)}).get();return!this.allowDuplicates&&new RegExp("(?:^|[\\s"+e+"])"+i+"\\s*"+e).test(this.field.val())?(o(i),r[r.length-1]=""):(r[r.length-1]=i,r[r.length]=""),t[0]=r.join(e.replace(/([^\s]$)/,"$1 ")),t})},addDropdownAdvice:function(){n.aop.after({target:this,method:"buildResponseContainer"},function(e){return this.dropdownController=JIRA.Dropdown.AutoComplete({target:this,method:"renderSuggestions"},this.responseContainer),n.aop.after({target:this.dropdownController,method:"hideDropdown"},function(){this.dropdown.removeClass("dropdown-ready"),clearTimeout(s.t)}),e}),n.aop.after({target:this,method:"renderSuggestions"},function(e){return e&&e.length>0?(this.dropdownController.displayDropdown(),this.maxHeight&&this.dropdownController.dropdown.prop("scrollHeight")>this.maxHeight?this.dropdownController.dropdown.css({height:this.maxHeight,overflowX:"visible",overflowY:"scroll"}):this.maxHeight&&this.dropdownController.dropdown.css({height:"",overflowX:"",overflowY:""}),this.dropdownController.dropdown.addClass("dropdown-ready")):this.dropdownController.hideDropdown(),e}),n.aop.after({target:this,method:"completeField"},this._afterCompleteField),n.aop.after({target:this,method:"keyUpHandler"},function(e){return this.field.val().length>=this.minQueryLength&&e.keyCode!==t.ESCAPE||!this.dropdownController||!this.dropdownController.displayed||(this.dropdownController.hideDropdown(),e.keyCode===t.ESCAPE&&e.stopPropagation()),e})},_afterCompleteField:function(e){return this.dropdownController.hideDropdown(),e},init:function(e){var o=this;this.set(e),this.field=this.field||n("#"+this.fieldID),this.field.attr("autocomplete","off").keyup(function(e){o.disabled||o.keyUpHandler(e)}).keydown(function(e){e.keyCode===t.ESCAPE&&o.responseContainer&&o.responseContainer.is(":visible")&&e.preventDefault()}).click(function(){i===o&&setTimeout(function(){o.dispatcher(o.field.val())},0)}).blur(function(){o.pendingRequest&&o.pendingRequest.abort()}).focus(function(e){o.disabled||(e.originalEvent&&e.originalEvent.relatedTarget&&setTimeout(function(){o.dispatcher(o.field.val())},0),i=o)}),this.addDropdownAdvice(),e.delimChar&&this.addMultiSelectAdvice(e.delimChar)}}}()}),AJS.namespace("jira.widget.autocomplete",null,require("jira/autocomplete/autocomplete")),AJS.namespace("JIRA.AutoComplete",null,require("jira/autocomplete/autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/RESTAutoComplete.js' */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("jira/autocomplete/rest-autocomplete",["jira/autocomplete/autocomplete","jira/util/objects"],function(e,t){return function(){var o=t.begetObject(e);return o.dispatcher=function(e){var t=this;e.length<this.minQueryLength||(this.getSavedResponse(e)?(t.renderSuggestions(t.getSavedResponse(e)),t.responseContainer.scrollTop(0)):this.delay(function(){var o=t.getAjaxParams();o.data.query=e,o.success=function(o){t.saveResponse(e,o),t.responseContainer.scrollTop(0),t.renderSuggestions(o)},t._makeRequest(o)},t.queryDelay))},o.getAjaxParams=function(){},o.getSavedResponse=function(e){return this.requested||(this.requested={}),this.requested[e]},o.saveResponse=function(e,t){"string"==typeof e&&"object"===(void 0===t?"undefined":_typeof(t))&&(this.requested||(this.requested={}),this.requested[e]=t)},o}()}),AJS.namespace("jira.widget.autocomplete.REST",null,require("jira/autocomplete/rest-autocomplete")),AJS.namespace("JIRA.RESTAutoComplete",null,require("jira/autocomplete/rest-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/IssueAutoComplete.js' */
define("jira/autocomplete/issue-autocomplete",["jira/data/parse-options-from-fieldset","jira/field/issue-picker","jira/autocomplete/rest-autocomplete","jira/util/objects","wrm/context-path","jquery"],function(e,t,s,a,i,n){var r=i(),d=function(e){var t=a.begetObject(s);return t.getAjaxParams=function(){return{url:r+"/rest/api/2/issue/picker",data:e.ajaxData,dataType:"json",type:"GET"}},t.renderSuggestions=function(s){var a,i=[];if(this.clearResponseContainer(),s&&s.sections&&s.sections.length>0)return a=n("<ul/>").appendTo(this.responseContainer),n(s.sections).each(function(){var t=this,s=n("<div/>").attr("id",e.fieldID+"_s_"+t.id).addClass("yag").text(t.label);if(t.sub&&s.append(n("<span/>").addClass("yagt").text("("+t.sub+")")),a.append(n("<li/>").append(s).mouseover(function(){n(this).addClass("active")}).mouseout(function(){n(this).removeClass("active")})),t.msg){var d=n("<div/>").attr("id",e.fieldID+"_i_"+t.id+"_n").addClass("yad").text(t.msg);a.append(n("<li/>").append(d).mouseover(function(){n(this).addClass("active")}).mouseout(function(){n(this).removeClass("active")}))}t.issues&&t.issues.length>0&&n(t.issues).each(function(){var s;s=/^http/.test(this.img)?this.img:r+this.img;var d=n("<li/>").append(n("<div/>").attr("id",e.fieldID+"_i_"+t.id+"_"+this.key).addClass("yad").append(n("<table/>").addClass("yat").attr({cellpadding:"0",cellspacing:"0"}).append(n("<tr/>").append(n("<td/>").append(n("<img/>").attr("src",s))).append(n("<td/>").append(n("<div/>").addClass("yak").html(this.keyHtml))).append(n("<td/>").css("width","100%").html(this.summary)))));a.append(d),i.push([d,this.key])})}),t.addSuggestionControls(i),i},e.minQueryLength=1,e.queryDelay=.25,t.init(e),t};return d.init=function(){n("fieldset.issue-picker-params").each(function(){var s=e(n(this));n("#"+s.fieldId+"-container").add("#"+s.fieldName+"_container").find("a.popup-trigger").click(function(e){var a=r+"/secure/popups/IssuePicker.jspa?";a+="currentIssue="+s.currentIssueKey+"&",a+="singleSelectOnly="+s.singleSelectOnly+"&",a+="showSubTasks="+s.showSubTasks+"&",a+="showSubTasksParent="+s.showSubTaskParent,s.currentProjectId&&""!==s.currentProjectId&&(a+="&selectedProjectId="+s.currentProjectId),t.callback=function(e){var t,a=[];e=JSON.parse(e),s.fieldId&&a&&(t=n("#"+s.fieldId))&&(n.each(e,function(){a.push(this.value)}),t.val(a.join(", ")))};var i=window.open(a,"IssueSelectorPopup","status=no,resizable=yes,top=100,left=200,width=620,height=500,scrollbars=yes,resizable");i.opener=self,i.focus(),e.preventDefault()}),s.fieldId||(s.fieldId=s.fieldName),!0===s.issuePickerEnabled&&d({fieldID:s.fieldId,delimChar:!0===s.singleSelectOnly?void 0:",",ajaxData:s})})},d}),AJS.namespace("jira.widget.autocomplete.Issues",null,require("jira/autocomplete/issue-autocomplete")),AJS.namespace("JIRA.IssueAutoComplete",null,require("jira/autocomplete/issue-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/UserAutoComplete.js' */
define("jira/autocomplete/user-autocomplete",["jira/autocomplete/rest-autocomplete","jira/data/parse-options-from-fieldset","jira/util/browser","jira/util/elements","jira/util/objects","wrm/context-path","jquery"],function(e,t,i,r,o,a,s){"use strict";var n=a(),l=function(t){function a(e){var t=!1,i=e.closest("form");return i.length&&i.hasClass("submitting")&&(t=!0),t}var l=o.begetObject(e);return l.getAjaxParams=function(){return{url:n+"/rest/api/1.0/users/picker",data:{fieldName:t.fieldID,fieldConfigId:t.fieldConfigID,projectId:t.projectId},dataType:"json",type:"GET"}},l.renderSuggestions=function(e){if(a(this.field)||!i.isSelenium()&&!r.elementIsFocused(this.field))return!1;var t,o=[];return this.clearResponseContainer(),e&&e.users&&e.users.length>0&&(t=s("<ul/>").appendTo(this.responseContainer),s(e.users).each(function(){o.push([s("<li/>").html(this.html).appendTo(t),this.name])})),e.footer&&this.responseContainer.append(s("<div/>").addClass("yui-ac-ft").html(e.footer).css("display","block")),o.length>0&&(l.addSuggestionControls(o),s(".atlassian-autocomplete div.yad, .atlassian-autocomplete .labels li").textOverflow({autoUpdate:!0})),o},t.minQueryLength=2,t.queryDelay=.25,l.init(t),l};return l.init=function(e){s("fieldset.user-picker-params",e).each(function(){var i=t(s(this)),r=i.fieldId||i.fieldName,o=s("#"+r+"_container");o.find("a.popup-trigger").click(function(e){var t,a=n;if(e.preventDefault(),i.formName||(i.formName=o.find("#"+r).parents("form").attr("name")),i.actionToOpen?a+=i.actionToOpen:a+="/secure/popups/UserPickerBrowser.jspa",a+="?formName="+i.formName+"&",a+="multiSelect="+i.multiSelect+"&",a+="decorator=popup&",a+="element="+r,i.fieldConfigId&&(a+="&fieldConfigId="+i.fieldConfigId),i.projectId)if(s.isArray(i.projectId))for(var l in i.projectId)a+="&projectId="+l;else a+="&projectId="+i.projectId;t=window.open(a,"UserPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes"),t.opener=self,t.focus()}),!0===i.userPickerEnabled&&l({field:e?e.find("#"+r):null,fieldID:r,fieldConfigID:i.fieldConfigId,projectId:i.projectId,delimChar:!1===i.multiSelect?void 0:",",ajaxData:{fieldName:i.fieldName}})})},l}),AJS.namespace("jira.widget.autocomplete.Users",null,require("jira/autocomplete/user-autocomplete")),AJS.namespace("JIRA.UserAutoComplete",null,require("jira/autocomplete/user-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/initAutoCompleteFields.js' */
!function(){"use strict";var e=require("jquery"),r=require("jira/data/parse-options-from-fieldset"),i=require("jira/util/events"),t=require("jira/util/events/reasons"),a=require("jira/util/events/types"),s=require("jira/autocomplete/issue-autocomplete"),l=require("jira/autocomplete/user-autocomplete"),o=require("wrm/context-path"),u=o();i.bind(a.NEW_CONTENT_ADDED,function(e,r,i){i!==t.panelRefreshed&&(l.init(r),s.init(r))}),i.bind(a.NEW_CONTENT_ADDED,function(i,a,s){s!==t.panelRefreshed&&e("fieldset.user-searcher-params",a).each(function(){var i=r(e(this)),t=e("#"+i.fieldId+"_container",a);if(!0===i.userPickerEnabled)var s=l({fieldID:i.fieldId,delimChar:!0===i.multiSelect?",":void 0,ajaxData:{fieldName:i.fieldName}});var o=function(r){var t=e("#"+i.fieldId,a),l=e("#"+i.fieldId+"Image",a),o=e("#"+i.fieldId+"GroupImage",a),u=e("#"+i.fieldId+"_desc",a);"select.list.none"===r?(t.val("").attr("disabled","true"),l.hide(),o.hide(),u.hide()):(t.removeAttr("disabled"),"select.list.group"===r?(l.hide(),o.show(),!0===i.userPickerEnabled&&(s.disable(),u.hide())):(l.show(),o.hide(),!0===i.userPickerEnabled&&(s.enable(),u.show())))};e("#"+i.userSelect,a).change(function(){var r=e(this).find("option:selected").attr("rel");o(r)}).find("option:selected").each(function(){o(e(this).attr("rel"))}),t.find("a.user-popup-trigger").click(function(e){var r=u+"/secure/popups/UserPickerBrowser.jspa?";r+="formName="+i.formName+"&",r+="multiSelect="+i.multiSelect+"&",r+="decorator=popup&",r+="element="+i.fieldId;var t=window.open(r,"UserPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");t.opener=self,t.focus(),e.preventDefault()}),t.find("a.group-popup-trigger").click(function(e){var r=u+"/secure/popups/GroupPickerBrowser.jspa?";r+="formName="+i.formName+"&",r+="multiSelect="+i.multiSelect+"&",r+="decorator=popup&",r+="element="+i.fieldId;var t=window.open(r,"GroupPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");t.opener=self,t.focus(),e.preventDefault()})})})}();;
;
/* module-key = 'jira.webresources:jquery-selection', location = '/includes/jquery/plugins/selection/jquery.selection.js' */
require(["jquery"],function(t){if(document.selection){var e=function(t){return t.replace(/\u000D/g,"")};t.fn.selection=function(t){var e=this[0];if(this.focus(),!e)return!1;if(null==t)return document.selection.createRange().text;var n=e.scrollTop,s=document.selection.createRange();s.text=t,s.select(),e.focus(),e.scrollTop=n},t.fn.selectionRange=function(t,n){var s=this[0];this.focus();var r=document.selection.createRange();if(null==t){var i=this.val(),o=i.length,l=r.duplicate();l.moveToElementText(s),l.setEndPoint("StartToEnd",r);var c=o-e(l.text).length;l.setEndPoint("StartToStart",r);var a=o-e(l.text).length;return c!=a&&"\n"==i.charAt(c+1)&&(c+=1),{end:c,start:a,text:i.substring(a,c),textBefore:i.substring(0,a),textAfter:i.substring(c)}}r.moveToElementText(s),r.collapse(!0),r.moveStart("character",t),r.moveEnd("character",n-t),r.select()}}else t.fn.selection=function(t){var e=this[0];if(!e)return!1;if(null==t)return!!e.setSelectionRange&&e.value.substring(e.selectionStart,e.selectionEnd);var n=e.scrollTop;if(e.setSelectionRange){var s=e.selectionStart;e.value=e.value.substring(0,s)+t+e.value.substring(e.selectionEnd),e.selectionStart=s,e.selectionEnd=s+t.length}e.focus(),e.scrollTop=n},t.fn.selectionRange=function(t,e){if(null==t){var n={start:this[0].selectionStart,end:this[0].selectionEnd},s=this.val();return n.text=s.substring(n.start,n.end),n.textBefore=s.substring(0,n.start),n.textAfter=s.substring(n.end),n}this[0].selectionStart=t,this[0].selectionEnd=e};t.fn.wrapSelection=function(t,e){this.selection(t+this.selection()+(e||""))}});;
;
/* module-key = 'jira.webresources:jqlautocomplete', location = '/includes/jira/autocomplete/JQLAutoComplete.js' */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("jira/jql/jql-grammar",function(){"use strict";var e={};return e.jql_order_by=[{value:"ORDER BY",displayName:"ORDER BY"}],e.jql_operators=[{value:"=",displayName:"="},{value:"!=",displayName:"!="},{value:"~",displayName:"~"},{value:"<=",displayName:"&lt;="},{value:">=",displayName:"&gt;="},{value:">",displayName:"&gt;"},{value:"<",displayName:"&lt;"},{value:"!~",displayName:"!~"},{value:"is not",displayName:"is not"},{value:"is",displayName:"is"},{value:"not in",displayName:"not in"},{value:"in",displayName:"in"},{value:"was",displayName:"was"},{value:"was not",displayName:"was not"},{value:"was in",displayName:"was in"},{value:"was not in",displayName:"was not in"},{value:"changed",displayName:"changed"}],e.jql_logical_operators=[{value:"AND",displayName:"AND"},{value:"OR",displayName:"OR"}],e.jql_logical_operators_and_order_by=e.jql_logical_operators.concat(e.jql_order_by),e.jql_order_by_direction=[{value:"ASC",displayName:"ASC"},{value:"DESC",displayName:"DESC"}],e.empty_operand=[{value:"EMPTY",displayName:"EMPTY",types:["java.lang.Object"]}],e.jql_not_logical_operator=[{value:"NOT",displayName:"NOT"}],e.jql_was_predicates=[{value:"AFTER",displayName:"AFTER",type:"java.util.Date",supportsList:"false"},{value:"BEFORE",displayName:"BEFORE",type:"java.util.Date",supportsList:"false"},{value:"BY",displayName:"BY",type:"com.atlassian.crowd.embedded.api.User",supportsList:"false",auto:"true"},{value:"DURING",displayName:"DURING",type:"java.util.Date",supportsList:"true"},{value:"ON",displayName:"ON",type:"java.util.Date",supportsList:"false"}],e.jql_changed_predicates=e.jql_was_predicates.concat([{value:"FROM",displayName:"FROM",type:"java.lang.String",supportsList:"true",auto:"true"},{value:"TO",displayName:"TO",type:"java.lang.String",supportsList:"true",auto:"true"}]),e.jql_was_predicates_and_order_by=e.jql_was_predicates.concat(e.jql_logical_operators_and_order_by),e.jql_was_predicates_and_logical_operators=e.jql_was_predicates.concat(e.jql_logical_operators),e.jql_changed_predicates_and_order_by=e.jql_changed_predicates.concat(e.jql_logical_operators_and_order_by),e.jql_changed_predicates_and_logical_operators=e.jql_changed_predicates.concat(e.jql_logical_operators),e.REGEXP_ANDS=/^AND\s/i,e.REGEXP_ORS=/^OR\s/i,e.REGEXP_NOTS=/^NOT\s/i,e.REGEXP_SNOT=/^\s+not/i,e.REGEXP_SIN=/^\s+in/i,e.REGEXP_SNOT_IN=/^\s+(not\s+in|not|in)/i,e.REGEXP_COMMA_DELIMITER=/^\s*,/,e.REGEXP_ASCENDING=/^\s+asc/i,e.REGEXP_DESCENDING=/^\s+desc/i,e.REGEXP_ORDER_BY=/^order\s+by/i,e.REGEXP_WHITESPACE=/^\s/,e.REGEXP_UNICODE=/^u[a-fA-F0-9]{4}/,e.REGEXP_FIELD_NAME=/^\s-\scf\[\d\d\d\d\d\]/,e.REGEXP_NEW_LINE=/[\r\n]/,e.REGEXP_NUMBER=/\d/,e.REGEXP_TOKEN_CHAR=/[^=!~<>(),\s&|\]]/,e.REGEXP_SPECIAL_CHAR=/[{}*\/%+$#@?;\][]/,e.REGEXP_SPACE_OR_ELSE=/[\s(]/,e.REGEXP_CHARS_TO_ESCAPE=/[^trn"'\\\s]/,e.REGEXP_NOTSTART=/^NO?$/i,e.REGEXP_INSTART=/^IN?$/i,e.REGEXP_PREDICATE=/^(after|before|by|during|from|on|to)/i,e.version_field_type="com.atlassian.jira.project.version.Version",e.jql_text_operator_names=["~","!~"],e}),define("jira/autocomplete/jql-autocomplete",["jira/util/formatter","jira/autocomplete/autocomplete","jira/jql/jql-grammar","jira/jql/util","jira/jql/operator-util","jira/util/data/meta","jira/util/objects","jira/util/users/logged-in-user","jira/featureflags/feature-manager","jquery","underscore","jira/util/logger","wrm/context-path"],function(e,t,r,s,a,n,i,l,o,d,u,g,c){var h=c();return function(c){var p,O=i.begetObject(t),f=c.parser,m=d.grep(c.jqlFieldNames,function(e){return e.searchable}),S=d.grep(c.jqlFieldNames,function(e){return e.orderable}),L=c.jqlFunctionNames,C=d("#"+c.errorID),N=0,y=d("#jqlcolumnnum"),E=d("#jqlrownum"),R=c.autoCompleteUrl||h+"/rest/api/2/jql/autocompletedata/suggestions",I=[],_=[];if(O.textToSuggestionCursorPosition=function(){return O.field.selectionRange().textBefore},O.pushSuggestionsOnHtmlStack=function(e,t,r,s,a){for(var n=Math.min(15,e.length),i=0;i<n;i++){var l,o;if(e[i].value){var d=e[i];l=p&&a?(p.getNeedsOpenParen()?"(":"")+d.value:d.value,o=d.displayName}else o=e[i],l=o;t.push(l),r.push('<li id="',s,i,'">',o,"</li>")}},O.setAutoSelectFirst=function(e){var t=O.getReplacementStartIndex(p,""),r=O.field.selectionRange().end,s=O.field.val().substring(t,r);O.autoSelectFirst=O.shouldSelectFirstValue(O.field.val(),p,s,e)},O.shouldSelectFirstValue=function(e,t,r,a){return O.isSmartAutoSelectFirstEnabled()?!(0===r.length&&t.getIsInSubmittableState()):!(0===r.length||a&&a.length>0&&s.equalsIgnoreCase(r,a[0][1]))},O.renderSuggestions=function(t,r,s){var a=[];if(t instanceof Array){if(t.length<1&&r&&r.length<1&&s&&s.length<1)return a;var i=["<ul>"];s&&s.length>0&&O.pushSuggestionsOnHtmlStack(s,a,i,"jql_operator_suggest_",!1),O.pushSuggestionsOnHtmlStack(t,a,i,"jql_value_suggest_",!0),r&&r.length>0&&O.pushSuggestionsOnHtmlStack(r,a,i,"jql_function_suggest_",!1),i.push("</ul>");var l=d('<span class="esc-prompt">').text("Hit Esc to close"),o=d('<a class="syntax-help" target="_jiraHelp"></a>').attr("title",n.get("advanced-search-help-title")).attr("href",n.get("advanced-search-help-url")).text("Syntax Help").append(l),u=d('<div class="syntax-help-container">').append(o);O.responseContainer.html(i.join("")).append(u).find("li").each(function(e){a[e]=[d(this),a[e]]}),O.setAutoSelectFirst(a),O.addSuggestionControls(a),g.trace("jira.jql.suggestions.done")}return a},O.needsSpaceInCompletion=function(){return!(p.isInsideList()||p.getNeedsOpenParen()||p.getNeedsOrderByDirection())},O.completeField=function(e){var t,r=O.getReplacementStartIndex(p,e),s=O.getReplacementEndIndex(p,r);t=O.needsSpaceInCompletion()?e+" ":e,O.replaceValue(r,s,t);var a=f.parse(O.field.val());O.updateParseIndicator(a)},O._afterCompleteField=function(e){return t._afterCompleteField.call(this),O.needsSpaceInCompletion()&&O.dispatcher(O.field.val()),e},O.prepareOperandSuggestions=function(e,t,r,n,i){if(e){var l=N,o=null==i?null===p.getLastOperand()?"":s.stripEscapeCharacters(p.getLastOperand()):i,d=t+":"+o,u={fieldName:s.stripEscapeCharacters(t)};null===p.getLastOperand()&&null===i||(u.fieldValue=o);var g=a.isWasOperator(p.getLastOperator());O.getSavedResponse(d)?O.renderSuggestionsForOperands(o,O.getSavedResponse(d),r,n,l):(O.dropdownController.dropdown.removeClass("dropdown-ready"),O.delay(function(){O._makeRequest({url:R,dataType:"json",data:u,success:function(e){var t;if(t=null!==e&&null!==e.results?e.results:[],g){var s=u.fieldValue;t=O.appendEmpty(s,t)}O.saveResponse(d,t),O.renderSuggestionsForOperands(o,t,r,n,l)},error:function(){O.renderSuggestionsForOperands(o,[],r,n,l)}})},O.queryDelay))}else O.renderSuggestionsForOperands(s.stripEscapeCharacters(p.getLastOperand()),[],r,n,N)},O.preparePredicateSuggestions=function(e,t){void 0===t&&(t=null);var r=O.slimListForPredicates(t,L,e);O.boldMatchingString(t,r);var a=null==t?null===p.getLastOperand()?"":s.stripEscapeCharacters(p.getLastOperand()):t,n=e+":"+a,i={predicateName:s.stripEscapeCharacters(e)};null===p.getLastOperand()&&null===t||(i.predicateValue=a),null!==p.getLastFieldName()&&(i.fieldName=p.getLastFieldName(),n=p.getLastFieldName()+":"+n),O.predicateSupportsAutoComplete(e)?O.getSavedResponse(n)?O.renderSuggestions(O.getSavedResponse(n),r):(O.dropdownController.dropdown.removeClass("dropdown-ready"),O.delay(function(){O._makeRequest({url:R,dataType:"json",data:i,success:function(e){var t;t=null!==e&&null!==e.results?e.results:[];var s=i.predicateValue;t=O.appendEmpty(s,t),O.saveResponse(n,t),O.renderSuggestions(t,r)},error:function(){O.renderSuggestionsForOperands(a,[])}})},O.queryDelay)):O.renderSuggestions([],r)},O.incompleteOperator=function(){var e=p.getTokens();return null==e||e.length<2?"":(e=O.textToSuggestionCursorPosition().split(" "),e.length>2?e[e.length-1]:"")},O.incompletePredicateValue=function(){var e=p.getTokens();return null==e||e.length<3?"":(e=O.textToSuggestionCursorPosition().split(/[\s(,]+/),e.length>3?e[e.length-1]:"")},O.appendEmpty=function(e,t){var s=O.slimListForMapResults(e,r.empty_operand,!0);return null!=e&&O.boldMatchingString(e,s),t.length<15?t=t.concat(s):t[14]=s[0],t},O.dispatcher=function(e){var t,n,i,l=d(O.field).selectionRange(),o=e.substring(0,l.start),u=f.parse(o);if(p=u.getResult(),N++,p.getNeedsField())i=p.getLastFieldName()||!I.length?m:I,O.renderSuggestionsFromMap(s.stripEscapeCharacters(p.getLastFieldName()),i,r.jql_not_logical_operator,!0);else if(p.getNeedsOperatorOrOperand()){n=a.isEmptyOnlyOperator(p.getLastOperator())?r.empty_operand:L,u.calcLastOperandStartIndex();var g=u.getParsedOperator(),c=O.getSuggestionsForOperators(g,r.jql_operators);if(c&&c.length>0){var h=O.incompleteOperator();O.prepareOperandSuggestions(!0,p.getLastFieldName(),n,c,h)}}else if(p.getNeedsOperator())O.renderSuggestionsForOperators(p.getLastOperator(),r.jql_operators);else if(p.getNeedsPredicateOperand()){var C=p.getLastWasPredicate();O.preparePredicateSuggestions(C,s.stripEscapeCharacters(p.getLastOperand()))}else if(p.getNeedsLogicalOperator())p.getNeedsWasPredicate()?p.getNeedsOrderBy()?(t=null===p.getLastOrderBy()?p.getLastWasPredicate():p.getLastOrderBy(),"was"===p.getLastOperator()?O.renderSuggestionsFromMap(t,r.jql_was_predicates_and_order_by,!1):O.renderSuggestionsFromMap(t,r.jql_changed_predicates_and_order_by,!1)):"was"===p.getLastOperator()?O.renderSuggestionsFromMap(p.getLastWasPredicate(),r.jql_was_predicates_and_logical_operators,!1):O.renderSuggestionsFromMap(p.getLastWasPredicate(),r.jql_changed_predicates_and_logical_operators,!1):p.getNeedsOrderBy()?(t=null===p.getLastOrderBy()?p.getLastLogicalOperator():p.getLastOrderBy(),O.renderSuggestionsFromMap(t,r.jql_logical_operators_and_order_by,!1)):O.renderSuggestionsFromMap(p.getLastLogicalOperator(),r.jql_logical_operators,!1);else if(p.getNeedsOrderByField())i=p.getLastOrderByFieldName()||!_.length?S:_,O.renderSuggestionsFromMap(s.stripEscapeCharacters(p.getLastOrderByFieldName()),i,!0);else if(p.getNeedsOrderByDirection())O.renderSuggestionsFromMap(p.getLastOrderByDirection(),r.jql_order_by_direction,!1);else if(p.getNeedsOperand()){var y=p.getLastFieldName(),E=!1;if(!a.isEmptyOnlyOperator(p.getLastOperator()))for(var R=d.inArray(p.getLastOperator(),r.jql_text_operator_names)>-1,P=0;P<m.length;P++)if(s.equalsIgnoreCase(s.getUnquotedString(m[P].value),y)||m[P].cfid&&s.equalsIgnoreCase(m[P].cfid,y)){E=O.calculateAutocompleteFlag(R,m[P].types[0],m[P].auto);break}n=a.isEmptyOnlyOperator(p.getLastOperator())?r.empty_operand:L,O.prepareOperandSuggestions(E,y,n,{})}else p.getNeedsOrderBy()?O.renderSuggestionsFromMap(p.getLastOrderBy(),r.jql_logical_operators_and_order_by,!1):O.dropdownController.hideDropdown();O.parse(e)},O.calculateAutocompleteFlag=function(e,t,s){return(!e||void 0===t||t!==r.version_field_type)&&s},O.parse=function(e){var t=f.parse(e);return O.updateParseIndicator(t),O.updateColumnLineCount(),t.getResult()},O.renderSuggestionsFromMap=function(e,t,r,s){r||(r={});var a=O.slimListForMapResults(e,t,s),n=O.slimListForMapResults(e,r,s);O.boldMatchingString(e,n),O.boldMatchingString(e,a),O.renderSuggestions(a,n),0===a.length&&0===n.length&&O.dropdownController.hideDropdown()},O.getSuggestionsForOperators=function(e,t){for(var r,a=O.slimListForMapResults(e,t,!1),n=p.getLastFieldName(),i=0;i<m.length;i++)if(s.equalsIgnoreCase(s.getUnquotedString(m[i].value),n)||m[i].cfid&&s.equalsIgnoreCase(m[i].cfid,n)){r=m[i].operators;break}return r&&(a=d.grep(a,function(e){return d.inArray(e.value,r)>-1})),O.boldMatchingString(e,a),a},O.renderSuggestionsForOperators=function(e,t){var r=O.getSuggestionsForOperators(e,t);O.renderSuggestions(r),0===r.length&&O.dropdownController.hideDropdown()},O.renderSuggestionsForOperands=function(e,t,r,s,a){if(a===N){var n=O.slimListForFunctionResults(e,r,p.getLastOperator());O.boldMatchingString(e,n),O.renderSuggestions(t,n,s),0===t.length&&0===n.length&&0===s.length&&O.dropdownController.hideDropdown()}},O.boldMatchingString=function(e,t){if(null!=e&&0!==t.length){for(var r=e.length,s=0,a=r;s<a;s++)switch(e.charAt(s)){case"<":case">":r+=3;break;case"&":r+=4;break;case'"':r+=5}for(var n=0;n<t.length;n++)if(t[n].displayName){var i=t[n].displayName;t[n]={value:t[n].value,displayName:"<b>"+i.substring(0,r)+"</b>"+i.substring(r)}}else t[n]={value:t[n],displayName:"<b>"+t[n].substring(0,r)+"</b>"+t[n].substring(r)}}},O.getReplacementStartIndex=function(e,t){var r,s=d(O.field);return r=e.getNeedsField()?e.getLastFieldNameStartIndex():e.getNeedsOperatorOrOperand()?e.getNeedsOperator()&&a.isWasOperator(t)?e.getLastOperatorStartIndex():e.getLastOperandStartIndex():e.getNeedsOperand()?e.getLastOperandStartIndex():e.getNeedsOperator()?e.getLastOperatorStartIndex():e.getNeedsOrderByField()?e.getLastOrderByFieldNameStartIndex():e.getNeedsOrderByDirection()?e.getLastOrderByDirectionStartIndex():e.getNeedsPredicateOperand()?e.getLastOperandStartIndex():e.getNeedsLogicalOperator()?null!==e.getLastLogicalOperatorStartIndex()&&0!==e.getLastLogicalOperatorStartIndex()?e.getLastLogicalOperatorStartIndex():null!==e.getLastOrderBy()&&0!==e.getLastOrderByStartIndex()?e.getLastOrderByStartIndex():null!=e.getLastWasPredicate()&&0!==e.getLastWasPredicateStartIndex()?e.getLastWasPredicateStartIndex():!0===e.getMustBeOperatorOrPredicate()?s.selectionRange().start:s.selectionRange().start-1:e.getNeedsWasPredicate()?e.getLastWasPredicateStartIndex():e.getNeedsOrderBy()?e.getLastOrderByStartIndex():s.selectionRange().start-1,null!=r?r:s.selectionRange().start},O.getReplacementEndIndex=function(e,t){var s=d(O.field),a=s.selectionRange(),n=null;if(a.start===a.end&&a.end!==O.field.val().length&&t<a.start){var i=e.getTokens().length-1,l=f.parse(O.field.val()),o=l.getResult().getTokens()[i];if(null!==o&&"("!==o&&")"!==o){for(var u=O.field.val(),g=u.substring(t,u.length),c=g.split(""),h=0,p=0;p<c.length&&r.REGEXP_WHITESPACE.test(c[p]);p++)h++;n=t+o.length+h}}return null===n&&(n=a.end),n<t&&(O.replaceValue(t,n," "),n=t),n},O.replaceValue=function(e,t,r){var s=d(O.field);s.selectionRange(e,t),d.browser.webkit?document.execCommand("insertText",!1,r):s.selection(r);var a=s.selectionRange().end;s.selectionRange(a,a)},O.slimListForMapResults=function(e,t,r){var a=s.htmlEscape(e),n=d.grep(t,function(e){return s.startsWithIgnoreCaseNullsMeanAll(a,e.displayName)});return r||1!==n.length||s.startsWithNotEqualsIgnoreCaseNullMeansAll(a,n[0].displayName)?n:{}},O.slimListForFunctionResults=function(e,t,n){for(var i,l=p.getLastFieldName(),o=0;o<m.length;o++)if(s.equalsIgnoreCase(s.getUnquotedString(m[o].value),l)||m[o].cfid&&s.equalsIgnoreCase(m[o].cfid,l)){i=m[o].types;break}var u=d.grep(t,function(t){if(t.isList&&!a.isListSupportingOperator(n)||!t.isList&&a.isListSupportingOperator(n))return!1;if(!i)return!1;var l=d.inArray("java.lang.Object",t.types)>-1||d.inArray("java.lang.Object",i)>-1;if(d.inArray(n,r.jql_text_operator_names)>-1&&d.inArray(r.version_field_type,i)>-1)return l;for(var o=0;o<i.length&&!l;o++)l=-1!==d.inArray(i[o],t.types);return!!l&&(s.startsWithIgnoreCaseNullsMeanAll(e,t.value)||s.startsWithIgnoreCaseNullsMeanAll(e,t.displayName))});return 1!==u.length||s.startsWithNotEqualsIgnoreCaseNullMeansAll(e,u[0].displayName)?u:{}},O.slimListForPredicates=function(e,t,a){for(var n,i,l=0;l<r.jql_changed_predicates.length;l++)if(s.equalsIgnoreCase(s.getUnquotedString(r.jql_changed_predicates[l].value),a)){n=r.jql_changed_predicates[l].type,i=r.jql_changed_predicates[l].supportsList;break}var o=d.grep(t,function(t){return(void 0===t.isList||!(t.isList&&i||!t.isList&&i))&&(!(-1===d.inArray(n,t.types))&&(s.startsWithIgnoreCaseNullsMeanAll(e,t.value)||s.startsWithIgnoreCaseNullsMeanAll(e,t.displayName)))});return 1!==o.length||s.startsWithNotEqualsIgnoreCaseNullMeansAll(e,o[0].displayName)?o:{}},O.predicateSupportsAutoComplete=function(e){for(var t,a=0;a<r.jql_changed_predicates.length;a++)if(s.equalsIgnoreCase(s.getUnquotedString(r.jql_changed_predicates[a].value),e)){t=r.jql_changed_predicates[a].auto;break}return t},O.getSavedResponse=function(e){return this.requested||(this.requested={}),this.requested[e]},O.saveResponse=function(e,t){"string"==typeof e&&"object"===(void 0===t?"undefined":_typeof(t))&&(this.requested||(this.requested={}),this.requested[e]=t)},O.startsWithIgnoreCase=function(e,t){return!(null===t||null===e||t.length<e.length)&&e.toLowerCase()==t.substr(0,e.length).toLowerCase()},O.updateParseIndicator=function(e){e.getParseError()?C.attr("title",e.getResult().getParseErrorMsg()).removeClass("jqlgood").addClass("jqlerror"):C.attr("title","").removeClass("jqlerror").addClass("jqlgood")},O.updateColumnLineCount=function(){var e=d(O.field),t=0;if(O.field[0]===document.activeElement){t=e.selectionRange().start}else t=O.field[0].value.length;for(var s=1,a=1,n=O.field.val(),i=0;i<t;i++)r.REGEXP_NEW_LINE.test(n.charAt(i))?(s++,a=1):a++;y.text(a),E.text(s)},O.isSuggestRecentFieldsEnabled=function(){return o.isFeatureEnabled("jira.jql.suggestrecentfields")},O.isSmartAutoSelectFirstEnabled=function(){return o.isFeatureEnabled("jira.jql.smartautoselectfirst")},O.init(c),O.isSuggestRecentFieldsEnabled()){var P=null,v=function(e){var t=e.value.sort();I=d.grep(m,function(e){return u.contains(t,s.getUnquotedString(e.value))}),_=d.grep(S,function(e){return u.contains(t,s.getUnquotedString(e.value))})},j=function(){l.isAnonymous()||d.ajax({url:h+"/rest/api/2/user/properties/jqlValues?username="+l.username()}).done(v)};v(s.getRecentFields()),P=setInterval(j,5e3),O.field.focus(function(){j(),P||(P=setInterval(j,5e3))}).blur(function(){P&&(clearInterval(P),P=null)})}return O}}),define("jira/jql/util",["jira/jql/jql-grammar","wrm/data"],function(e,t){"use strict";var r={};return r.htmlEscape=function(e){if(null==e)return null;for(var t="",r=e.split(""),s=0;s<r.length;s++)"<"===r[s]?t+="&lt;":">"===r[s]?t+="&gt;":"&"===r[s]?t+="&amp;":'"'===r[s]?t+="&quot;":t+=r[s];return t},r.stripEscapeCharacters=function(t){if(null==t)return t;for(var r="",s=t.split(""),a=0;a<s.length&&("\\"!==s[a]||e.REGEXP_UNICODE.test(t.substring(a,t.length))||!(++a>=t.length));a++)r+=s[a];return r},r.equalsIgnoreCase=function(e,t){return null===e&&null===t||null!==e&&null!==e&&e.toLowerCase()===t.toLowerCase()},r.startsWithIgnoreCaseNullsMeanAll=function(e,t){return null===t||null===e||!(t.length<e.length)&&e.toLowerCase()==t.substr(0,e.length).toLowerCase()},r.startsWithNotEqualsIgnoreCaseNullMeansAll=function(t,r){if(null===r||null===t)return!0;if(r.length<t.length)return!1;if(t.toLowerCase()==r.substr(0,t.length).toLowerCase()){var s=null;return s=e.REGEXP_FIELD_NAME.test(r.substr(t.length,r.length))?r.substr(0,t.length):r,t.toLowerCase()!=s.toLowerCase()}return!1},r.getRecentFields=function(){return null==r.recentValues&&(r.recentValues=t.claim("jira.core:jqlautocomplete-data.jql.autocomplete.recentFields")),r.recentValues},r.getUnquotedString=function(e){var t=null!=e&&e.length>=3&&"\\"!==e.charAt(e.length-2);return null!=e&&'"'===e.charAt(0)?(e=e.substring(1,e.length),'"'===e.charAt(e.length-1)&&t&&(e=e.substring(0,e.length-1))):null!=e&&"'"===e.charAt(0)&&(e=e.substring(1,e.length),"'"===e.charAt(e.length-1)&&t&&(e=e.substring(0,e.length-1))),e},r}),define("jira/jql/operator-util",function(){"use strict";var e={};return e.isListSupportingOperator=function(e){return"in"===e||"not in"===e||"was not in"===e||"was in"===e},e.isEmptyOnlyOperator=function(e){return"is"===e||"is not"===e},e.isWasOperator=function(e){return"was"===e||"was in"===e||"was not in"===e||"was not"===e},e.isChangedOperator=function(e){return"changed"===e},e.isHistoryOperator=function(t){return e.isWasOperator(t)||e.isChangedOperator(t)},e}),define("jira/jql/jql-parser",["jira/jql/jql-grammar","jira/jql/jql-parse-token","jira/jql/operator-util","jira/jql/util","jquery"],function(e,t,r,s,a){return function(n){var i=n;return{parse:function(e){var r=t();return r.init(e),this.jql(r),r},orderByClause:function(t){var r=t.remainingString(),s=r.match(e.REGEXP_ORDER_BY);if(s){var a=r.substring(0,s[0].length);t.consumeCharacters(a.length),t.getResult().setLastOrderBy(a,t),t.isComplete()?(t.getResult().resetLogicalOperators(),t.setParseError()):(r=t.remainingString(),e.REGEXP_WHITESPACE.test(r)?(this.chewWhitespace(t),this.orderByFields(t)):(t.getResult().resetLogicalOperators(),t.setParseError()))}else t.consumeCharacters(r.length),t.getResult().setLastOrderBy(r,t),t.setParseError()},orderByFields:function(e){if(this.orderByField(e),this.chewWhitespace(e),e.isComplete())e.getResult().getNeedsOrderByField()||e.getResult().setLastOrderByDirection("",e);else{var t=e.remainingString();this.startsWithIgnoreCase(",",t)?(e.consumeCharacter(),this.orderByFields(e),this.chewWhitespace(e)):(t=e.remainingString(),null!==t&&e.consumeCharacters(t.length),e.getResult().setNeedsOrderByDirection(),e.getResult().setLastOrderByDirection(t,e),e.setParseError())}},orderByField:function(t){this.chewWhitespace(t);var r=this.fieldName(t);if(0!==r.length){t.getResult().setLastOrderByFieldName(r,t);var s=t.remainingString();t.isComplete()||e.REGEXP_COMMA_DELIMITER.test(s)?(t.getResult().setNeedsOrderByField(),this.chewWhitespace(t)):e.REGEXP_ASCENDING.test(s)?(this.chewWhitespace(t),t.consumeCharacters(3),t.getResult().setLastOrderByDirection("asc",t),t.getResult().setNeedsOrderByComma()):e.REGEXP_DESCENDING.test(s)?(this.chewWhitespace(t),t.consumeCharacters(4),t.getResult().setLastOrderByDirection("desc",t),t.getResult().setNeedsOrderByComma()):t.getResult().setNeedsOrderByDirection()}else t.getResult().setLastOrderByFieldName("",t),t.getResult().setNeedsOrderByField(),t.setParseError()},jql:function(e){this.orClause(e);var t=e.remainingString();this.startsWithIgnoreCase("ord",t)&&this.orderByClause(e),e.result.setInsideList(0!==e.inListParens)},orClause:function(t){for(;!t.isComplete()&&!this.startsWithIgnoreCase(")",t.remainingString());){this.chewWhitespace(t);var r=t.remainingString();if(this.startsWithIgnoreCase("ord",r))break;if(t.getResult().getMustBeOperatorOrPredicate()?t.getResult().resetLastPredicates():(t.getResult().resetLogicalOperators(),this.andClause(t)),!t.isComplete()&&null===t.getResult().getLastLogicalOperator()){if(t.getResult().getNeedsWasPredicate()&&this.predicateClause(t),t.isComplete())return;if(r=t.remainingString(),this.startsWithIgnoreCase("ord",r))break;if(null!==r&&(e.REGEXP_ORS.test(r)||this.startsWithIgnoreCase("|",r)||this.startsWithIgnoreCase("||",r)))this.startsWithIgnoreCase("||",r)?(t.getResult().setLastLogicalOperator("||",t.getTokenStringIdx()),t.consumeCharacters(2)):e.REGEXP_ORS.test(r)?(t.getResult().setLastLogicalOperator("OR",t.getTokenStringIdx()),t.consumeCharacters(3)):(t.getResult().setLastLogicalOperator("|",t.getTokenStringIdx()),t.consumeCharacters(1)),t.getResult().resetTerminalClause(),t.isComplete()&&t.setParseError(),t.getResult().setNeedsField();else if(!this.startsWithIgnoreCase(")",r)||!t.getInParens()){this.chewWhitespace(t);var s,a=null===r?t.getMaxTokenStringIdx():t.getMaxTokenStringIdx()-r.length;null!=r&&(s=r.split(" "),t.getResult().setLastLogicalOperator(s[0],a),t.getResult().setLastWasPredicate(s[0],t),t.getResult().setNeedsLogicalOperator(t)),null==t.getResult().getLastWasOperator()?t.setParseError():null!=s&&(e.REGEXP_PREDICATE.test(s[0])?(t.getResult().setLastLogicalOperator(null),t.getResult().resetNeedsPredicateOperand()):(e.REGEXP_ANDS.test(r)&&(t.consumeCharacters(4),t.getResult().resetTerminalClause(),t.getResult().setNeedsField()),(t.isComplete()||1===s.length)&&t.setParseError()))}}}},andClause:function(t){if(this.chewWhitespace(t),this.notClause(t),!t.isComplete()&&null===t.getResult().getLastLogicalOperator()){this.chewWhitespace(t);var r=t.remainingString();null!==r&&(e.REGEXP_ANDS.test(r)||this.startsWithIgnoreCase("&",r)||this.startsWithIgnoreCase("&&",r))?(this.startsWithIgnoreCase("&&",r)?(t.getResult().setLastLogicalOperator("&&",t.getTokenStringIdx()),t.consumeCharacters(2)):this.startsWithIgnoreCase("&",r)?(t.getResult().setLastLogicalOperator("&",t.getTokenStringIdx()),t.consumeCharacters(1)):(t.getResult().setLastLogicalOperator("AND",t.getTokenStringIdx()),t.consumeCharacters(4)),t.getResult().resetTerminalClause(),t.isComplete()&&t.setParseError(),t.getResult().setNeedsField()):(t.getResult().setNeedsLogicalOperator(t),t.isComplete()&&t.getResult().setLastLogicalOperator(null,t.getMaxTokenStringIdx()))}},notClause:function(t){if(this.chewWhitespace(t),t.isComplete())this.terminalClause(t),t.setParseError();else{this.chewWhitespace(t);var r=t.remainingString();null!==r&&(e.REGEXP_NOTS.test(r)||this.startsWithIgnoreCase("!",r))?(t.getResult().needsField=!1,this.startsWithIgnoreCase("!",r)?(t.getResult().setLastLogicalOperator("!",t.getTokenStringIdx()),t.consumeCharacters(1)):(t.getResult().setLastLogicalOperator("NOT",t.getTokenStringIdx()),t.consumeCharacters(4)),t.getResult().resetTerminalClause(),t.isComplete()&&t.setParseError(),t.getResult().setNeedsField()):this.terminalClause(t)}},predicateClause:function(e){if(this.chewWhitespace(e),e.isComplete())e.setParseError();else{var t=e.remainingString(),r=t.split(/[\s(]+/);if(null!==t){if(e.getResult().setMustBeOperatorOrPredicate(!1),this.startsWithLogicalOperator(t)){if(1===r.length)return e.getResult().setLastWasPredicate(r[0],e),void e.setParseError();return}if(e.getResult().resetNeedsPredicateOperand(),e.consumeCharacters(r[0].length),e.getResult().setLastWasPredicate(r[0],e),1===r.length)return void e.setParseError();this.wasPredicateComplete(r[0])?(e.getResult().setNeedsPredicateOperand(),e.getResult().setLastOperand(null,e),this.predicateOperand(e)):e.setParseError()}}},predicateOperand:function(e){this.chewWhitespace(e);var t=this.collectPredicateOperands(e);null!=t&&""!=t||(e.getResult().setLastOperandStartIndex(e.getTokenStringIdx()),e.setParseError()),null!=e.remainingString()&&(e.getResult().resetNeedsPredicateOperand(),e.getResult().resetLastPredicates(),e.getResult().setMustBeOperatorOrPredicate(!0),e.getResult().setNeedsLogicalOperator(e),this.chewWhitespace(e))},collectPredicateOperands:function(e){"DURING"===e.getResult().getLastWasPredicate()&&e.getResult().setNeedsOpenParen(!0);var t=this.listOperand(e,!0);return 0===t.length?(t=this.functionOperand(e),0===t.length?t=this.singleValueOperand(e):e.getResult().setNeedsOpenParen(!1)):e.getResult().setNeedsOpenParen(!1),s.getUnquotedString(t)},terminalClause:function(t){t.getResult().resetTerminalClause(),this.chewWhitespace(t);var r=t.remainingString();if(this.startsWithIgnoreCase("(",r))t.getResult().addToken("("),t.setInParens(),t.consumeCharacter(),this.orClause(t),this.chewWhitespace(t),r=t.remainingString(),this.startsWithIgnoreCase(")",r)?(t.getResult().addToken(")"),t.consumeCharacter(),t.setOutOfParens(),t.isComplete()&&(t.getResult().resetLogicalOperators(),t.getResult().resetLastPredicates())):t.setParseError();else if(this.field(t),t.isComplete())t.getResult().setNeedsField(),t.setParseError();else if(this.oper(t),t.isComplete()){if("was"===t.getResult().getLastOperator()||"was not"===t.getResult().getLastOperator())t.getResult().setNeedsOperandOrOperator();else{if("changed"===t.getResult().getLastWasOperator()){var s=t.currentCharacter();return void(null!==s&&e.REGEXP_SPACE_OR_ELSE.test(s)?t.getResult().setNeedsLogicalOperator(t):(t.getResult().resetLogicalOperators(),t.getResult().setNeedsOrderBy(!1)))}t.getResult().setNeedsOperator()}t.setParseError()}else{if("changed"===t.getResult().getLastWasOperator())return void t.getResult().setNeedsLogicalOperator(t);if(this.operand(t),t.getResult().getOperandComplete()){var a=t.getResult().getLastWasOperator();t.getResult().setNeedsNothing(),a&&t.getResult().setLastWasOperator(a)}else t.isComplete()&&!t.getResult().getNeedsListComma()&&t.getResult().setNeedsOperand()}},field:function(e){var t=this.fieldName(e);if(0!==t.length)e.getResult().setLastFieldName(t,e);else if(null===e.getResult().getLastFieldName()){var r=e.remainingString();e.getResult().setNeedsField(),e.getResult().setLastFieldName(r,e),e.setParseError()}},fieldName:function(e){this.chewWhitespace(e);var t=e.remainingString();if(this.startsWithIgnoreCase("cf",t)){var r=e.getTokenStringIdx(),s=e.remainingString();if(e.consumeCharacters(2),this.chewWhitespace(e),t=e.remainingString(),this.startsWithIgnoreCase("[",t)){e.consumeCharacter(),t=e.remainingString();if(0!==this.numberValue(e).length&&(this.chewWhitespace(e),t=e.remainingString(),this.startsWithIgnoreCase("]",t)))return e.consumeCharacter(),s.substring(0,e.getTokenStringIdx()-r)}return e.setParseError(),s}return this.startsWithIgnoreCase("issue.property",t)?this.entityPropertyName("issue.property",e):this.fieldOrFunctionName(e)},entityPropertyName:function(e,t){t.consumeCharacters(e.length),this.chewWhitespace(t);var r=t.remainingString();if(this.startsWithIgnoreCase("[",r)){t.consumeCharacter();for(var s=[this.stringValue(t)];!t.parseError&&this.startsWithIgnoreCase(".",t.remainingString());)t.consumeCharacter(),s[s.length]=this.stringValue(t);if(0!==s.length&&0!==s[0].length&&!this.startsWithIgnoreCase(".",s[0])&&(this.chewWhitespace(t),r=t.remainingString(),this.startsWithIgnoreCase("]",r))){t.consumeCharacter();for(var a=[this.stringValue(t)];!t.parseError&&this.startsWithIgnoreCase(".",t.remainingString());)t.consumeCharacter(),a[a.length]=this.stringValue(t);return e+"["+s.join(".")+"]"+a.join(".")}}return t.setParseError(),""},oper:function(t){this.chewWhitespace(t);var s=t.remainingString(),a=this.getLongestOperatorMatch(s,e.jql_operators);if(null!==a){if(t.getResult().setLastOperator(a,t.getTokenStringIdx()),(r.isWasOperator(a)||r.isChangedOperator(a))&&t.getResult().setLastWasOperator(a),t.consumeCharacters(a.length),"in"===a||"is"===a||"is not"===a||"not in"===a||"was"===a||"was not"===a||"was in"===a||"was not in"===a){var n=t.currentCharacter();null===n||e.REGEXP_SPACE_OR_ELSE.test(n)||t.setParseError()}"was"===a?(t.getResult().setNeedsOperandOrOperator(),this.chewWhitespace(t),null!=(s=t.remainingString())&&(e.REGEXP_NOTSTART.test(s)||e.REGEXP_INSTART.test(s))&&t.setParseError()):"was not"===a?(t.getResult().setNeedsOperandOrOperator(),this.chewWhitespace(t),null!=(s=t.remainingString())&&e.REGEXP_INSTART.test(s)&&t.setParseError()):"changed"===a?t.getResult().setNeedsLogicalOperator(t):t.getResult().setNeedsOperand()}else if(null===t.getResult().getLastOperator()){var i=null===s?t.getMaxTokenStringIdx():t.getMaxTokenStringIdx()-s.length;t.getResult().setLastOperator(s,i),t.getResult().setNeedsOperator(),t.setParseError()}},operand:function(e){this.chewWhitespace(e),"in"!==e.getResult().getLastOperator()&&"not in"!==e.getResult().getLastOperator()&&"was not in"!==e.getResult().getLastOperator()&&"was in"!==e.getResult().getLastOperator()||e.getResult().setNeedsOpenParen(!0);var t=this.listOperand(e,!0);if(0===t.length?(t=this.functionOperand(e),0===t.length?t=this.singleValueOperand(e):e.getResult().setNeedsOpenParen(!1)):e.getResult().setNeedsOpenParen(!1),null===t||0===t.length){var r=e.remainingString();e.getResult().setLastOperand(r,e),e.getResult().setNeedsOperand(),e.setParseError()}return 0!==t.length?t:""},singleValueOperand:function(e){var t=this.stringValue(e);return 0!==t.length?(e.getResult().setLastOperand(t,e),"empty"!==t.toLowerCase()&&"null"!==t.toLowerCase()&&this.isReservedWord(t.toLowerCase())&&e.setParseError(),t):""},functionOperand:function(e){var t=e.getTokenStringIdx(),r=this.fieldOrFunctionName(e);this.chewWhitespace(e);var s=this.listOperand(e,!1);if(0!==r.length&&0!==s.length){var a=r+s;return e.getResult().setLastOperand(a,e),a}return e.backTrackToIdx(t),""},listOperand:function(e,t){if("("===e.currentCharacter()){e.consumeCharacter(),e.setInListParens();var r=this.collectListValues(e,t),s="("+r;return this.chewWhitespace(e),")"===e.currentCharacter()?(e.consumeCharacter(),
e.setOutOfListParens(),s+=")","()"===s&&t&&e.getResult().setLastOperand(s,e),t&&(e.getResult().setOperandComplete(),e.getResult().resetNeedsPredicateOperand())):e.setParseError(),s}return""},collectListValues:function(e,t){t&&e.getResult().setNeedsOperand(),this.chewWhitespace(e);var r=t?this.operand(e):this.stringValue(e);if(0!==r.length){if(this.chewWhitespace(e)&&t&&e.getResult().setNeedsListComma(),","===e.currentCharacter()){e.consumeCharacter();var s=this.collectListValues(e,t);return 0===s.length&&e.setParseError(),r+", "+s}return r}return""},startsWithIgnoreCase:function(e,t){return!(null===t||null===e||t.length<e.length)&&e.toLowerCase()==t.substr(0,e.length).toLowerCase()},startsWithLogicalOperator:function(e){return null!==e&&(this.startsWithOr(e)||this.startsWithAnd(e)||this.startsWithNot(e)||this.startsWithBraces(e))},startsWithOr:function(e){return this.startsWithIgnoreCase("|",e)||this.startsWithIgnoreCase("||",e)||this.startsWithIgnoreCase("or",e)},startsWithAnd:function(e){return this.startsWithIgnoreCase("&",e)||this.startsWithIgnoreCase("&&",e)||this.startsWithIgnoreCase("and",e)},startsWithNot:function(e){return this.startsWithIgnoreCase("!",e)||this.startsWithIgnoreCase("not",e)},startsWithBraces:function(e){return this.startsWithIgnoreCase("(",e)||this.startsWithIgnoreCase(")",e)},chewWhitespace:function(t){for(var r=!1,s=t.currentCharacter();null!==s&&e.REGEXP_WHITESPACE.test(s);)t.consumeCharacter(),s=t.currentCharacter(),r=!0;return r},getLongestOperatorMatch:function(t,r){var s,a=null;if(this.startsWithIgnoreCase("is",t)&&(s=t.substring(2).match(e.REGEXP_SNOT),a=s?t.substring(0,s[0].length+2):"is"),this.startsWithIgnoreCase("was",t))s=t.substring(3).match(e.REGEXP_SNOT_IN),a=s?t.substring(0,s[0].length+3):"was";else if(this.startsWithIgnoreCase("not",t)){var n=t.substring(3).match(e.REGEXP_SIN);n&&(a=t.substring(0,n[0].length+3))}else for(var i=0;i<r.length;i++)this.startsWithIgnoreCase(r[i].value,t)&&(null===a||e.jql_operators[i].value.length>a)&&(a=e.jql_operators[i].value);return a},getValueMinusExtraWhitespace:function(t){if(null===t)return null;for(var r="",s=!0,a=t.split(""),n=0;n<a.length;n++){var i=a[n];e.REGEXP_WHITESPACE.test(i)?s&&(s=!1,r+=i):(s=!0,r+=i)}return r},fieldOrFunctionName:function(e){var t=this.stringValue(e);return'""'!==t&&"''"!==t||e.setParseError(),this.isReservedWord(t.toLowerCase())&&e.setParseError(),t},isReservedWord:function(e){return-1!==a.inArray(e,i)},stringValue:function(t){for(var r="",s=!1,a=!1,n=t.currentCharacter();null!==n&&(s||a||e.REGEXP_TOKEN_CHAR.test(n));){if(r+=n,t.consumeCharacter(),"\\"===n){if(null===(n=t.currentCharacter())){t.setParseError();break}if(e.REGEXP_CHARS_TO_ESCAPE.test(n)){var i=t.remainingString();if(!e.REGEXP_UNICODE.test(i)){t.setParseError();break}}r+=n,t.consumeCharacter()}else{if(e.REGEXP_SPECIAL_CHAR.test(n)&&!s&&!a){t.setParseError();break}'"'!==n||a?"'"!==n||s||(a=!a):s=!s}n=t.currentCharacter()}return t.isComplete()&&(s||a)&&t.setParseError(),r},numberValue:function(t){var r="";this.chewWhitespace(t);for(var s=t.currentCharacter();null!==s&&e.REGEXP_NUMBER.test(s);)r+=s,t.consumeCharacter(),s=t.currentCharacter();return r},wasPredicateComplete:function(t){for(var r=!1,s=e.jql_changed_predicates.length,a=0;a<s;++a)if(t.toLowerCase()==e.jql_changed_predicates[a].value.toLowerCase()){r=!0;break}return r}}}}),define("jira/jql/jql-parse-result",["jira/jql/util"],function(e){"use strict";return function(){var t=[],r=0;return{getTokens:function(){return t},addToken:function(e){t[r++]=e},setLastFieldName:function(s,a){this.fieldNameStartIndex=null===s?a.getMaxTokenStringIdx():a.getTokenStringIdx()-s.length,this.lastFieldName=e.getUnquotedString(s),t[r++]=s},getLastFieldName:function(){return this.lastFieldName},getLastFieldNameStartIndex:function(){return this.fieldNameStartIndex},setLastOrderByFieldName:function(s,a){this.orderByFieldNameStartIndex=null===s?a.getMaxTokenStringIdx():a.getTokenStringIdx()-s.length,this.lastOrderByFieldName=e.getUnquotedString(s),this.lastOrderByDirection=null,t[r++]=s},getLastOrderByFieldName:function(){return this.lastOrderByFieldName},getLastOrderByFieldNameStartIndex:function(){return this.orderByFieldNameStartIndex},setLastOrderByDirection:function(e,s){this.orderByDirectionStartIndex=null===e?s.getMaxTokenStringIdx():s.getTokenStringIdx()-e.length,this.lastOrderByDirection=e,t[r++]=e},getLastOrderByDirection:function(){return this.lastOrderByDirection},getLastOrderByDirectionStartIndex:function(){return this.orderByDirectionStartIndex},setNeedsField:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!0,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1,this.needsWasPredicate=!1,this.lastWasOperator=null},getNeedsField:function(){return this.needsField},setNeedsOrderByField:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!0,this.needsOrderByDirection=!1,this.lastOrderByDirection=null,this.needsListComma=!1},getNeedsOrderByField:function(){return this.needsOrderByField},setNeedsOrderByDirection:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!0,this.needsListComma=!1},getNeedsOrderByDirection:function(){return this.needsOrderByDirection},setNeedsOrderByComma:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1},setNeedsListComma:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!0},getNeedsListComma:function(){return this.needsListComma},setLastOperator:function(e,s){this.lastOperator=e,this.operatorStartIndex=s,t[r++]=e},setLastWasOperator:function(e){this.lastWasOperator=e},getLastWasOperator:function(){return this.lastWasOperator},getLastOperator:function(){return this.lastOperator},getLastOperatorStartIndex:function(){return this.operatorStartIndex},setLastOperand:function(s,a){this.operandStartIndex=null===s?a.getMaxTokenStringIdx():a.getTokenStringIdx()-s.length,this.lastOperand=e.getUnquotedString(s),t[r++]=s},getLastOperand:function(){return this.lastOperand},setNeedsOperand:function(){this.needsField=!1,this.needsOperator=!1,this.needsLogicalOperator=!1,this.needsOperand=!0,this.needsOrderBy=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1},setNeedsOperandOrOperator:function(){this.needsField=!1,this.needsOperator=!0,this.needsLogicalOperator=!1,this.needsOperand=!0,this.needsOrderBy=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1},getNeedsOperand:function(){return this.needsOperand},setNeedsPredicateOperand:function(){this.needsPredicateOperand=!0,this.needsLogicalOperator=!1,this.needsOrderBy=!1},resetNeedsPredicateOperand:function(){this.needsPredicateOperand=!1,this.needsOperand=!1},getNeedsPredicateOperand:function(){return this.needsPredicateOperand},getLastOperandStartIndex:function(){return this.operandStartIndex},setLastOperandStartIndex:function(e){this.operandStartIndex=e},setLastLogicalOperator:function(e,s){this.lastLogicalOperator=e,this.logicalOperatorStartIndex=s,t[r++]=e},setNeedsOperator:function(){this.needsField=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsOperator=!0,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1},getNeedsOperatorOrOperand:function(){return this.needsOperator&&this.needsOperand},getNeedsOperator:function(){return this.needsOperator},getLastLogicalOperator:function(){return this.lastLogicalOperator},getLastLogicalOperatorStartIndex:function(){return this.logicalOperatorStartIndex},setNeedsLogicalOperator:function(e){this.needsLogicalOperator=!0,this.needsOperator=!1,this.needsOperand=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1,this.needsOrderBy=!e.getInParens(),null!=this.lastWasOperator&&(this.needsWasPredicate=!0)},setNeedsOpenParen:function(e){this.needsOpenParen=e},getNeedsOpenParen:function(){return this.needsOpenParen},getNeedsLogicalOperator:function(){return this.needsLogicalOperator},setNeedsOrderBy:function(e){this.needsOrderBy=e},getNeedsOrderBy:function(){return this.needsOrderBy},getNeedsWasPredicate:function(){return this.needsWasPredicate},setLastWasPredicate:function(e,s){this.wasPredicateStartIndex=null===e?s.getMaxTokenStringIdx():s.getTokenStringIdx()-e.length,this.lastWasPredicate=e,t[r++]=e},getLastWasPredicate:function(){return this.lastWasPredicate},resetLastPredicates:function(){this.lastLogicalOperator=null,this.lastWasPredicate=null,this.lastOperand=null,this.wasPredicateStartIndex=null,this.operandStartIndex=null},getLastWasPredicateStartIndex:function(){return this.wasPredicateStartIndex},setLastOrderBy:function(e,s){this.orderByStartIndex=null===e?s.getMaxTokenStringIdx():s.getTokenStringIdx()-e.length,this.lastOrderBy=e,t[r++]=e},getLastOrderBy:function(){return this.lastOrderBy},getLastOrderByStartIndex:function(){return this.orderByStartIndex},resetLogicalOperators:function(){this.lastLogicalOperator=null,this.logicalOperatorStartIndex=null,this.needsLogicalOperator=null},getUnquotedString:function(t){e.getUnquotedString(t)},setParseError:function(e){this.parseError=!0,this.parseErrorMsg=e},getParseError:function(){return this.parseError},getParseErrorMsg:function(){return this.parseErrorMsg},setNeedsNothing:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsOpenParen=!1,this.needsListComma=!1,this.needsWasPredicate=null,this.needsPredicateOperand=null,this.mustBeOperatorOrPredicate=null,this.lastWasOperator=null},setOperandComplete:function(){this.operandComplete=!0},getOperandComplete:function(){return this.operandComplete},setInsideList:function(e){this.insideList=e},isInsideList:function(){return this.insideList},setMustBeOperatorOrPredicate:function(e){this.mustBeOperatorOrPredicate=e},getMustBeOperatorOrPredicate:function(){return this.mustBeOperatorOrPredicate},getIsInSubmittableState:function(){return 0===t.length||1===t.length&&null===t[0]||this.getNeedsLogicalOperator()||this.getNeedsOrderBy()||this.getNeedsOrderByDirection()},resetTerminalClause:function(){this.lastFieldName=null,this.fieldNameStartIndex=null,this.needsField=null,this.lastOperator=null,this.operatorStartIndex=null,this.needsOperator=null,this.lastOperand=null,this.operandStartIndex=null,this.needsOperand=null,this.operandComplete=null,this.needsOpenParen=null,this.needsListComma=!1,this.mustBeOperatorOrPredicate=null},init:function(){this.lastFieldName=null,this.fieldNameStartIndex=null,this.needsField=null,this.lastOperator=null,this.operatorStartIndex=null,this.needsOperator=null,this.lastOperand=null,this.operandStartIndex=null,this.needsOperand=null,this.lastLogicalOperator=null,this.logicalOperatorStartIndex=null,this.lastOrderByFieldName=null,this.lastOrderByFieldNameStartIndex=null,this.lastOrderByDirection=null,this.lastOrderByDirectionStartIndex=null,this.orderByStartIndex=null,this.lastOrderBy=null,this.needsOrderBy=null,this.needsOrderByField=null,this.needsOrderByDirection=null,this.operandComplete=null,this.needsOpenParen=null,this.needsListComma=null,this.wasPredicateStartIndex=null,this.lastWasPredicate=null,this.needsWasPredicate=null,this.needsPredicateOperand=null,this.mustBeOperatorOrPredicate=null,this.lastWasOperator=null,this.insideList=null,this.setNeedsField()}}}}),define("jira/jql/jql-parse-token",["jira/jql/jql-parse-result"],function(e){"use strict";return function(){return{init:function(t){this.tokenStringIdx=0,this.tokenString=t,this.parseError=!1,this.parseErrorMsg=null,this.result=e(),this.result.init(),this.inParens=0,this.inListParens=0},consumeCharacter:function(){this.tokenStringIdx++},consumeCharacters:function(e){this.tokenStringIdx=this.tokenStringIdx+e},backTrackToIdx:function(e){this.tokenStringIdx=e,this.parseError=!1,this.parseErrorMsg=null,this.result.parseError=!1,this.result.parseErrorMsg=null},getTokenStringIdx:function(){return this.tokenStringIdx},currentCharacter:function(){return this.tokenStringIdx>=this.tokenString.length?null:this.tokenString.charAt(this.tokenStringIdx)},remainingString:function(){return this.tokenStringIdx>=this.tokenString.length?null:this.tokenString.substr(this.tokenStringIdx,this.tokenString.length)},getMaxTokenStringIdx:function(){return this.tokenString.length},isComplete:function(){return!!this.parseError||this.tokenStringIdx>=this.tokenString.length},setInParens:function(){this.inParens++},setOutOfParens:function(){0!==this.inParens&&this.inParens--},getInParens:function(){return 0!==this.inParens},setInListParens:function(){this.inListParens++},setOutOfListParens:function(){this.inListParens>0&&this.inListParens--},getInListParens:function(){return this.inListParens>0},setParseError:function(){this.parseError=!0;var e=this.tokenStringIdx-9<0?0:this.tokenStringIdx-9,t=this.tokenString.substring(e,this.tokenStringIdx-1);this.result.setParseError("..."+t+"^"+this.tokenString.substring(this.tokenStringIdx,this.tokenString.length))},getParseError:function(){return this.parseError},calcLastOperandStartIndex:function(){var e=this.getResult(),t=e.getLastOperator();if(t.length>0){var r=t.length-t.replace(/\s+/g,"").length;e.setLastOperandStartIndex(e.getLastOperatorStartIndex()+t.length+r+1)}},getParsedOperator:function(){var e=this.getResult();return e.getLastOperator().length>0?this.tokenString.substr(e.getLastOperatorStartIndex()):null},getResult:function(){return this.result}}}}),AJS.namespace("jira.widget.autocomplete.JQL",null,require("jira/autocomplete/jql-autocomplete")),AJS.namespace("JIRA.JQLAutoComplete",null,require("jira/autocomplete/jql-autocomplete")),AJS.namespace("JIRA.JQLAutoComplete.MyParser",null,require("jira/jql/jql-parser")),AJS.namespace("JIRA.JQLAutoComplete.ParseResult",null,require("jira/jql/jql-parse-result")),AJS.namespace("JIRA.JQLAutoComplete.Token",null,require("jira/jql/jql-parse-token"));;
;
/* module-key = 'jira.webresources:jqlautocomplete', location = '/includes/jira/autocomplete/initJQLAutoComplete.js' */
!function(){"use strict";var e=require("jira/autocomplete/jql-autocomplete"),r=require("jira/jql/jql-parser"),t=require("jira/util/forms"),i=require("jira/util/key-code"),l=require("jquery");l(function(){l(".jql-autocomplete-params").each(function(){var n={};l(this).find("input").each(function(){var e=l(this);n[e.attr("id")]=e.val()});var o=JSON.parse(l("#jqlFieldz").text()),a=JSON.parse(l("#jqlFunctionNamez").text()),u=JSON.parse(l("#jqlReservedWordz").text()),s=e({fieldID:"jqltext",parser:r(u),queryDelay:.65,jqlFieldNames:o,jqlFunctionNames:a,minQueryLength:0,allowArrowCarousel:!0,errorID:"jqlerrormsg"}),d=l("#jqltext");d.unbind("keypress",t.submitOnEnter).keypress(function(e){if(null===s.dropdownController||!s.dropdownController.displayed||s.selectedIndex<0)return!(e.keyCode===i.ENTER&&!e.ctrlKey&&!e.shiftKey)||(l("#jqlform").submit(),!1)}),s.buildResponseContainer(),s.parse(d.text()),s.updateColumnLineCount()})})}();;
;
/* module-key = 'com.xpandit.plugins.xray:raven-jqlautocomplete-resources', location = 'js/dialog/jqlautocomplete/jql-expressions-generator.js' */
var jqlExpressionGenerator=jqlExpressionGenerator||(function(){function a(i){return(Array.isArray(i)&&i.length>0)||(!Array.isArray(i)&&i)}function f(i){if(Array.isArray(i)){return i.map(function(j){return'"'+j+'"'}).join(",")}else{if(i){return'"'+i+'"'}}return null}function e(i){if(Array.isArray(i)&&i.length>0){i=i[0]}if(i){return'filter = "'+i+'"'}return null}function d(i){if(a(i)){if(!Array.isArray(i)){i=[i]}var j=i.map(function(k){return"issueKey in testSetTests("+k+")"}).join(" OR ");if(j){return"("+j+")"}}return null}function g(j,i){if(a(i)){var k=f(i);if(k){if(!j){j="";console.error("testsWithTestSetVersion: Project Id/Key must be provided to get correct values")}return'key in testsWithTestSetVersion("'+j+'", '+k+")"}}return null}function c(i){if(a(i)){if(!Array.isArray(i)){i=[i]}var j=i.map(function(k){return"issueKey in requirementTests("+k+")"}).join(" OR ");if(j){return"("+j+")"}}return null}function b(j,i){if(a(i)){var k=f(i);if(k){if(!j){j="";console.error("testsWithReqVersion: Project Id/Key must be provided to get correct values")}return'key in testsWithReqVersion("'+j+'", '+k+")"}}return null}function h(i,k,l){if(i&&k&&k!=="All"){var j=k.split("/").slice(1);var m=$("#"+l+"-descendants-checkbox").is(":checked");if(j){return'issue in testRepositoryFolderTests("'+i+'","'+j.join("/")+'","'+!!m+'")'}}return null}return{getFilterJqlClause:e,getTestSetJqlClause:d,getTestSetVersionJqlClause:g,getRequirementJqlClause:c,getRequirementVersionJqlClause:b,getTestRepositoryFolderJqlClause:h}})();;
;
/* module-key = 'com.xpandit.plugins.xray:raven-jqlautocomplete-resources', location = 'js/dialog/jqlautocomplete/issue-jql-autocomplete.js' */
var IssueLinkJQLAutoComplete=IssueLinkJQLAutoComplete||(function(b){function a(q){var p=q.fieldID;var g=q.errorID;var c=q.autoCompleteUrl;var j=q.autoCompleteData;var n=q.formSubmitFunction;var f=q.limitSuggestion||null;var k=b("#"+p);var e=k.length>0&&k[0]==document.activeElement;var h=j.visibleFieldNames||[];var m=j.visibleFunctionNames||[];var l=j.jqlReservedWords||[];var d=function(){var r=require("js/dialog/jqlautocomplete/feature-manager");return r.isFeatureEnabled("jira.jql.autoselectfirst")};var i=JIRA.JQLAutoComplete({fieldID:p,parser:JIRA.JQLAutoComplete.MyParser(l),queryDelay:0.65,jqlFieldNames:h,jqlFunctionNames:m,minQueryLength:0,allowArrowCarousel:true,autoSelectFirst:d(),errorID:g,autoCompleteUrl:c});if(f){const o=i.renderSuggestions;i.renderSuggestions=function(){if(arguments&&Array.isArray(arguments["0"])){arguments["0"]=arguments["0"].slice(0,f-1)}return o.apply(i,arguments)}}k.unbind("keypress",submitOnEnter);if(n){k.keypress(function(r){if(i.dropdownController===null||!i.dropdownController.displayed||i.selectedIndex<0){if(r.keyCode===13&&!r.ctrlKey&&!r.shiftKey){n();return false}else{return true}}})}i.buildResponseContainer();i.parse(k.text());i.updateColumnLineCount();k.click(function(){i.dropdownController.hideDropdown()});if(e){k.select()}}return{initialize:a}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:raven-jqlautocomplete-resources', location = 'js/dialog/jqlautocomplete/feature-manager.js' */
define("js/dialog/jqlautocomplete/feature-manager",["wrm/data","exports"],function(c,b){var f=c.claim("jira.webresources:raven-feature-flags.feature-flag-data");var e=(f&&f["enabled-feature-keys"])||[];var a=(f&&f["feature-flag-states"])||{};var d=function(g,h){return g.indexOf(h)!==-1};b.isFeatureEnabled=function(j){var i=a[j];if(i===true){var h=d(e,j+".disabled");return !h}else{if(i===false){var g=d(e,j+".enabled");return g}else{return d(e,j)}}}});;
;
/* module-key = 'com.xpandit.plugins.xray:xray-base-resources', location = '/js/common/shim.js' */
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2014 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/master/LICENSE
 */
(function(a,b){if(typeof define==="function"&&define.amd){define(b)}else{if(typeof exports==="object"){module.exports=b()}else{a.returnExports=b()}}}(this,function(){function Q(){}if(!Function.prototype.bind){Function.prototype.bind=function g(ag){var ah=this;if(typeof ah!="function"){throw new TypeError("Function.prototype.bind called on incompatible "+ah)}var ad=E.call(arguments,1);var ac=function(){if(this instanceof af){var aj=ah.apply(this,ad.concat(E.call(arguments)));if(Object(aj)===aj){return aj}return this}else{return ah.apply(ag,ad.concat(E.call(arguments)))}};var e=Math.max(0,ah.length-ad.length);var ai=[];for(var ae=0;ae<e;ae++){ai.push("$"+ae)}var af=Function("binder","return function("+ai.join(",")+"){return binder.apply(this,arguments)}")(ac);if(ah.prototype){Q.prototype=ah.prototype;af.prototype=new Q();Q.prototype=null}return af}}var b=Function.prototype.call;var D=Array.prototype;var v=Object.prototype;var E=D.slice;var F=b.bind(v.toString);var L=b.bind(v.hasOwnProperty);var R;var ab;var P;var Y;var m;if((m=L(v,"__defineGetter__"))){R=b.bind(v.__defineGetter__);ab=b.bind(v.__defineSetter__);P=b.bind(v.__lookupGetter__);Y=b.bind(v.__lookupSetter__)}if([1,2].splice(0).length!=2){var l=Array.prototype.splice;var h=Array.prototype.push;var Z=Array.prototype.unshift;if(function(){function ac(af){var ae=[];while(af--){ae.unshift(af)}return ae}var ad=[],e;ad.splice.bind(ad,0,0).apply(null,ac(20));ad.splice.bind(ad,0,0).apply(null,ac(26));e=ad.length;ad.splice(5,0,"XXX");if(e+1==ad.length){return true}}()){Array.prototype.splice=function(ac,e){if(!arguments.length){return[]}else{return l.apply(this,[ac===void 0?0:ac,e===void 0?(this.length-ac):e].concat(E.call(arguments,2)))}}}else{Array.prototype.splice=function(af,ad){var e,ac=E.call(arguments,2),ae=ac.length;if(!arguments.length){return[]}if(af===void 0){af=0}if(ad===void 0){ad=this.length-af}if(ae>0){if(ad<=0){if(af==this.length){h.apply(this,ac);return[]}if(af==0){Z.apply(this,ac);return[]}}e=E.call(this,af,af+ad);ac.push.apply(ac,E.call(this,af+ad,this.length));ac.unshift.apply(ac,E.call(this,0,af));ac.unshift(0,this.length);l.apply(this,ac);return e}return l.call(this,af,ad)}}}if([].unshift(0)!=1){var Z=Array.prototype.unshift;Array.prototype.unshift=function(){Z.apply(this,arguments);return this.length}}if(!Array.isArray){Array.isArray=function z(e){return F(e)=="[object Array]"}}var V=Object("a");var O=V[0]!="a"||!(0 in V);var x=function X(ac){var e=true;if(ac){ac.call("foo",function(af,ad,ae){if(typeof ae!=="object"){e=false}})}return !!ac&&e};if(!Array.prototype.forEach||!x(Array.prototype.forEach)){Array.prototype.forEach=function c(e){var ad=G(this),ac=O&&F(this)=="[object String]"?this.split(""):ad,af=arguments[1],ae=-1,ag=ac.length>>>0;if(F(e)!="[object Function]"){throw new TypeError()}while(++ae<ag){if(ae in ac){e.call(af,ac[ae],ae,ad)}}}}if(!Array.prototype.map||!x(Array.prototype.map)){Array.prototype.map=function C(ac){var ae=G(this),ad=O&&F(this)=="[object String]"?this.split(""):ae,ah=ad.length>>>0,e=Array(ah),ag=arguments[1];if(F(ac)!="[object Function]"){throw new TypeError(ac+" is not a function")}for(var af=0;af<ah;af++){if(af in ad){e[af]=ac.call(ag,ad[af],af,ae)}}return e}}if(!Array.prototype.filter||!x(Array.prototype.filter)){Array.prototype.filter=function J(ac){var ae=G(this),ad=O&&F(this)=="[object String]"?this.split(""):ae,ah=ad.length>>>0,e=[],ai,ag=arguments[1];if(F(ac)!="[object Function]"){throw new TypeError(ac+" is not a function")}for(var af=0;af<ah;af++){if(af in ad){ai=ad[af];if(ac.call(ag,ai,af,ae)){e.push(ai)}}}return e}}if(!Array.prototype.every||!x(Array.prototype.every)){Array.prototype.every=function H(e){var ad=G(this),ac=O&&F(this)=="[object String]"?this.split(""):ad,ag=ac.length>>>0,af=arguments[1];if(F(e)!="[object Function]"){throw new TypeError(e+" is not a function")}for(var ae=0;ae<ag;ae++){if(ae in ac&&!e.call(af,ac[ae],ae,ad)){return false}}return true}}if(!Array.prototype.some||!x(Array.prototype.some)){Array.prototype.some=function N(e){var ad=G(this),ac=O&&F(this)=="[object String]"?this.split(""):ad,ag=ac.length>>>0,af=arguments[1];if(F(e)!="[object Function]"){throw new TypeError(e+" is not a function")}for(var ae=0;ae<ag;ae++){if(ae in ac&&e.call(af,ac[ae],ae,ad)){return true}}return false}}if(!Array.prototype.reduce){Array.prototype.reduce=function n(ac){var ae=G(this),ad=O&&F(this)=="[object String]"?this.split(""):ae,ag=ad.length>>>0;if(F(ac)!="[object Function]"){throw new TypeError(ac+" is not a function")}if(!ag&&arguments.length==1){throw new TypeError("reduce of empty array with no initial value")}var af=0;var e;if(arguments.length>=2){e=arguments[1]}else{do{if(af in ad){e=ad[af++];break}if(++af>=ag){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;af<ag;af++){if(af in ad){e=ac.call(void 0,e,ad[af],af,ae)}}return e}}if(!Array.prototype.reduceRight){Array.prototype.reduceRight=function y(ac){var ae=G(this),ad=O&&F(this)=="[object String]"?this.split(""):ae,ag=ad.length>>>0;if(F(ac)!="[object Function]"){throw new TypeError(ac+" is not a function")}if(!ag&&arguments.length==1){throw new TypeError("reduceRight of empty array with no initial value")}var e,af=ag-1;if(arguments.length>=2){e=arguments[1]}else{do{if(af in ad){e=ad[af--];break}if(--af<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}if(af<0){return e}do{if(af in this){e=ac.call(void 0,e,ad[af],af,ae)}}while(af--);return e}}if(!Array.prototype.indexOf||([0,1].indexOf(1,2)!=-1)){Array.prototype.indexOf=function o(ac){var e=O&&F(this)=="[object String]"?this.split(""):G(this),ae=e.length>>>0;if(!ae){return -1}var ad=0;if(arguments.length>1){ad=M(arguments[1])}ad=ad>=0?ad:Math.max(0,ae+ad);for(;ad<ae;ad++){if(ad in e&&e[ad]===ac){return ad}}return -1}}if(!Array.prototype.lastIndexOf||([0,1].lastIndexOf(0,-3)!=-1)){Array.prototype.lastIndexOf=function K(ac){var e=O&&F(this)=="[object String]"?this.split(""):G(this),ae=e.length>>>0;if(!ae){return -1}var ad=ae-1;if(arguments.length>1){ad=Math.min(ad,M(arguments[1]))}ad=ad>=0?ad:ae-Math.abs(ad);for(;ad>=0;ad--){if(ad in e&&ac===e[ad]){return ad}}return -1}}if(!Object.keys){var k=true,T=(function(){}).propertyIsEnumerable("prototype"),p=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=p.length;for(var r in {toString:null}){k=false}Object.keys=function B(ae){var ac=F(ae)==="[object Function]",aj=ae!==null&&typeof ae==="object";if(!aj&&!ac){throw new TypeError("Object.keys called on a non-object")}var ai=[],ak=T&&ac;for(var e in ae){if(!(ak&&e==="prototype")&&L(ae,e)){ai.push(e)}}if(k){var ah=ae.constructor,ad=ah&&ah.prototype===ae;for(var ag=0;ag<i;ag++){var af=p[ag];if(!(ad&&af==="constructor")&&L(ae,af)){ai.push(af)}}}return ai}}var w=-62198755200000,f="-000001";if(!Date.prototype.toISOString||(new Date(w).toISOString().indexOf(f)===-1)){Date.prototype.toISOString=function j(){var e,ad,ae,ac,af;if(!isFinite(this)){throw new RangeError("Date.prototype.toISOString called on non-finite value.")}ac=this.getUTCFullYear();af=this.getUTCMonth();ac+=Math.floor(af/12);af=(af%12+12)%12;e=[af+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()];ac=((ac<0?"-":(ac>9999?"+":""))+("00000"+Math.abs(ac)).slice(0<=ac&&ac<=9999?-4:-6));ad=e.length;while(ad--){ae=e[ad];if(ae<10){e[ad]="0"+ae}}return(ac+"-"+e.slice(0,2).join("-")+"T"+e.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z")}}var U=false;try{U=(Date.prototype.toJSON&&new Date(NaN).toJSON()===null&&new Date(w).toJSON().indexOf(f)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return true}}))}catch(W){}if(!U){Date.prototype.toJSON=function I(ad){var ae=Object(this),ac=q(ae),e;if(typeof ac==="number"&&!isFinite(ac)){return null}e=ae.toISOString;if(typeof e!="function"){throw new TypeError("toISOString property is not callable")}return e.call(ae)}}if(!Date.parse||isNaN(Date.parse("2000-01-01T00:00:00.000Z"))){Date=(function(af){function ac(al,aq,aj,ap,ao,ar,ak){var am=arguments.length;if(this instanceof af){var an=am==1&&String(al)===al?new af(ac.parse(al)):am>=7?new af(al,aq,aj,ap,ao,ar,ak):am>=6?new af(al,aq,aj,ap,ao,ar):am>=5?new af(al,aq,aj,ap,ao):am>=4?new af(al,aq,aj,ap):am>=3?new af(al,aq,aj):am>=2?new af(al,aq):am>=1?new af(al):new af();an.constructor=ac;return an}return af.apply(this,arguments)}var ah=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$");var e=[0,31,59,90,120,151,181,212,243,273,304,334,365];function ag(ak,al){var aj=al>1?1:0;return(e[al]+Math.floor((ak-1969+aj)/4)-Math.floor((ak-1901+aj)/100)+Math.floor((ak-1601+aj)/400)+365*(ak-1970))}function ad(aj){return Number(new af(1970,0,1,0,0,0,aj))}for(var ae in af){ac[ae]=af[ae]}ac.now=af.now;ac.UTC=af.UTC;ac.prototype=af.prototype;ac.prototype.constructor=ac;ac.parse=function ai(ar){var aq=ah.exec(ar);if(aq){var au=Number(aq[1]),at=Number(aq[2]||1)-1,av=Number(aq[3]||1)-1,an=Number(aq[4]||0),am=Number(aq[5]||0),aj=Number(aq[6]||0),ax=Math.floor(Number(aq[7]||0)*1000),al=Boolean(aq[4]&&!aq[8]),ap=aq[9]==="-"?1:-1,ak=Number(aq[10]||0),ao=Number(aq[11]||0),aw;if(an<(am>0||aj>0||ax>0?24:25)&&am<60&&aj<60&&ax<1000&&at>-1&&at<12&&ak<24&&ao<60&&av>-1&&av<(ag(au,at+1)-ag(au,at))){aw=((ag(au,at)+av)*24+an+ak*ap)*60;aw=((aw+am+ao*ap)*60+aj)*1000+ax;if(al){aw=ad(aw)}if(-8640000000000000<=aw&&aw<=8640000000000000){return aw}}return NaN}return af.parse.apply(this,arguments)};return ac})(Date)}if(!Date.now){Date.now=function S(){return new Date().getTime()}}if(!Number.prototype.toFixed||(0.00008).toFixed(3)!=="0.000"||(0.9).toFixed(0)==="0"||(1.255).toFixed(2)!=="1.25"||(1000000000000000100).toFixed(0)!=="1000000000000000128"){(function(){var e,aj,ag,ah;e=10000000;aj=6;ag=[0,0,0,0,0,0];function ac(am,al){var ak=-1;while(++ak<aj){al+=am*ag[ak];ag[ak]=al%e;al=Math.floor(al/e)}}function af(am){var ak=aj,al=0;while(--ak>=0){al+=ag[ak];ag[ak]=Math.floor(al/am);al=(al%am)*e}}function ad(){var al=aj;var am="";while(--al>=0){if(am!==""||al===0||ag[al]!==0){var ak=String(ag[al]);if(am===""){am=ak}else{am+="0000000".slice(0,7-ak.length)+ak}}}return am}function ai(ak,am,al){return(am===0?al:(am%2===1?ai(ak,am-1,al*ak):ai(ak*ak,am/2,al)))}function ae(ak){var al=0;while(ak>=4096){al+=12;ak/=4096}while(ak>=2){al+=1;ak/=2}return al}Number.prototype.toFixed=function(ar){var an,aq,at,ak,ao,ap,am,al;an=Number(ar);an=an!==an?0:Math.floor(an);if(an<0||an>20){throw new RangeError("Number.toFixed called with invalid number of decimals")}aq=Number(this);if(aq!==aq){return"NaN"}if(aq<=-1e+21||aq>=1e+21){return String(aq)}at="";if(aq<0){at="-";aq=-aq}ak="0";if(aq>1e-21){ao=ae(aq*ai(2,69,1))-69;ap=(ao<0?aq*ai(2,-ao,1):aq/ai(2,ao,1));ap*=4503599627370496;ao=52-ao;if(ao>0){ac(0,ap);am=an;while(am>=7){ac(10000000,0);am-=7}ac(ai(10,am,1),0);am=ao-1;while(am>=23){af(1<<23);am-=23}af(1<<am);ac(1,1);af(2);ak=ad()}else{ac(0,ap);ac(1<<(-ao),0);ak=ad()+"0.00000000000000000000".slice(2,2+an)}}if(an>0){al=ak.length;if(al<=an){ak=at+"0.0000000000000000000".slice(0,an-al+2)+ak}else{ak=at+ak.slice(0,al-an)+"."+ak.slice(al-an)}}else{ak=at+ak}return ak}}())}var u=String.prototype.split;if("ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"".split(/.?/).length||".".split(/()()/).length>1){(function(){var e=/()??/.exec("")[1]===void 0;String.prototype.split=function(ah,ag){var ak=this;if(ah===void 0&&ag===0){return[]}if(Object.prototype.toString.call(ah)!=="[object RegExp]"){return u.apply(this,arguments)}var ae=[],af=(ah.ignoreCase?"i":"")+(ah.multiline?"m":"")+(ah.extended?"x":"")+(ah.sticky?"y":""),ac=0,ah=new RegExp(ah.source,af+"g"),ad,ai,aj,al;ak+="";if(!e){ad=new RegExp("^"+ah.source+"$(?!\\s)",af)}ag=ag===void 0?-1>>>0:ag>>>0;while(ai=ah.exec(ak)){aj=ai.index+ai[0].length;if(aj>ac){ae.push(ak.slice(ac,ai.index));if(!e&&ai.length>1){ai[0].replace(ad,function(){for(var am=1;am<arguments.length-2;am++){if(arguments[am]===void 0){ai[am]=void 0}}})}if(ai.length>1&&ai.index<ak.length){Array.prototype.push.apply(ae,ai.slice(1))}al=ai[0].length;ac=aj;if(ae.length>=ag){break}}if(ah.lastIndex===ai.index){ah.lastIndex++}}if(ac===ak.length){if(al||!ah.test("")){ae.push("")}}else{ae.push(ak.slice(ac))}return ae.length>ag?ae.slice(0,ag):ae}}())}else{if("0".split(void 0,0).length){String.prototype.split=function(ac,e){if(ac===void 0&&e===0){return[]}return u.apply(this,arguments)}}}if("".substr&&"0b".substr(-1)!=="b"){var d=String.prototype.substr;String.prototype.substr=function(ac,e){return d.call(this,ac<0?((ac=this.length+ac)<0?0:ac):ac,e)}}var aa="\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF";if(!String.prototype.trim||aa.trim()){aa="["+aa+"]";var A=new RegExp("^"+aa+aa+"*"),s=new RegExp(aa+aa+"*$");String.prototype.trim=function a(){if(this===void 0||this===null){throw new TypeError("can't convert "+this+" to object")}return String(this).replace(A,"").replace(s,"")}}if(parseInt(aa+"08")!==8||parseInt(aa+"0x16")!==22){parseInt=(function(e){var ac=/^0[xX]/;return function ad(af,ae){af=String(af).trim();if(!+ae){ae=ac.test(af)?16:10}return e(af,ae)}}(parseInt))}function M(e){e=+e;if(e!==e){e=0}else{if(e!==0&&e!==(1/0)&&e!==-(1/0)){e=(e>0||-1)*Math.floor(Math.abs(e))}}return e}function t(e){var ac=typeof e;return(e===null||ac==="undefined"||ac==="boolean"||ac==="number"||ac==="string")}function q(ac){var ae,e,ad;if(t(ac)){return ac}e=ac.valueOf;if(typeof e==="function"){ae=e.call(ac);if(t(ae)){return ae}}ad=ac.toString;if(typeof ad==="function"){ae=ad.call(ac);if(t(ae)){return ae}}throw new TypeError()}var G=function(e){if(e==null){throw new TypeError("can't convert "+e+" to object")}return Object(e)};if(window.console&&typeof(window.console.time)=="undefined"){console.time=function(e,ad){if(!e){return}var ae=new Date().getTime();if(!console.timeCounters){console.timeCounters={}}var ac="KEY"+e.toString();if(!ad&&console.timeCounters[ac]){return}console.timeCounters[ac]=ae};console.timeEnd=function(ac){var ag=new Date().getTime();if(!console.timeCounters){return}var ad="KEY"+ac.toString();var ae=console.timeCounters[ad];var af;if(ae){af=ag-ae;var e=ac+": "+af+"ms";console.log(e);delete console.timeCounters[ad]}return af}}}));;
;
/* module-key = 'com.xpandit.plugins.xray:xray-base-resources', location = '/js/common/sham.js' */
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2014 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/master/LICENSE
 */
(function(a){a()})(function(){var b=Function.prototype.call;var n=Object.prototype;var w=b.bind(n.hasOwnProperty);var D;var H;var C;var G;var k;if((k=w(n,"__defineGetter__"))){D=b.bind(n.__defineGetter__);H=b.bind(n.__defineSetter__);C=b.bind(n.__lookupGetter__);G=b.bind(n.__lookupSetter__)}if(!Object.getPrototypeOf){Object.getPrototypeOf=function F(K){return K.__proto__||(K.constructor?K.constructor.prototype:n)}}function I(K){try{K.sentinel=0;return Object.getOwnPropertyDescriptor(K,"sentinel").value===0}catch(L){}}if(Object.defineProperty){var f=I({});var h=typeof document=="undefined"||I(document.createElement("div"));if(!h||!f){var c=Object.getOwnPropertyDescriptor}}if(!Object.getOwnPropertyDescriptor||c){var a="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function o(M,O){if((typeof M!="object"&&typeof M!="function")||M===null){throw new TypeError(a+M)}if(c){try{return c.call(Object,M,O)}catch(N){}}if(!w(M,O)){return}var P={enumerable:true,configurable:true};if(k){var L=M.__proto__;M.__proto__=n;var K=C(M,O);var Q=G(M,O);M.__proto__=L;if(K||Q){if(K){P.get=K}if(Q){P.set=Q}return P}}P.value=M[O];P.writable=true;return P}}if(!Object.getOwnPropertyNames){Object.getOwnPropertyNames=function u(K){return Object.keys(K)}}if(!Object.create){var x;var v=Object.prototype.__proto__===null;if(v||typeof document=="undefined"){x=function(){return{__proto__:null}}}else{x=function(){var M=document.createElement("iframe");var L=document.body||document.documentElement;M.style.display="none";L.appendChild(M);M.src="javascript:";var N=M.contentWindow.Object.prototype;L.removeChild(M);M=null;delete N.constructor;delete N.hasOwnProperty;delete N.propertyIsEnumerable;delete N.isPrototypeOf;delete N.toLocaleString;delete N.toString;delete N.valueOf;N.__proto__=null;function K(){}K.prototype=N;x=function(){return new K()};return new K()}}Object.create=function g(M,N){var L;function K(){}if(M===null){L=x()}else{if(typeof M!=="object"&&typeof M!=="function"){throw new TypeError("Object prototype may only be an Object or null")}K.prototype=M;L=new K();L.__proto__=M}if(N!==void 0){Object.defineProperties(L,N)}return L}}function q(K){try{Object.defineProperty(K,"sentinel",{});return"sentinel" in K}catch(L){}}if(Object.defineProperty){var e=q({});var r=typeof document=="undefined"||q(document.createElement("div"));if(!e||!r){var p=Object.defineProperty,E=Object.defineProperties}}if(!Object.defineProperty||p){var d="Property description must be an object: ";var y="Object.defineProperty called on non-object: ";var j="getters & setters can not be defined on this javascript engine";Object.defineProperty=function A(L,N,O){if((typeof L!="object"&&typeof L!="function")||L===null){throw new TypeError(y+L)}if((typeof O!="object"&&typeof O!="function")||O===null){throw new TypeError(d+O)}if(p){try{return p.call(Object,L,N,O)}catch(M){}}if(w(O,"value")){if(k&&(C(L,N)||G(L,N))){var K=L.__proto__;L.__proto__=n;delete L[N];L[N]=O.value;L.__proto__=K}else{L[N]=O.value}}else{if(!k){throw new TypeError(j)}if(w(O,"get")){D(L,N,O.get)}if(w(O,"set")){H(L,N,O.set)}}return L}}if(!Object.defineProperties||E){Object.defineProperties=function s(K,M){if(E){try{return E.call(Object,K,M)}catch(L){}}for(var N in M){if(w(M,N)&&N!="__proto__"){Object.defineProperty(K,N,M[N])}}return K}}if(!Object.seal){Object.seal=function z(K){return K}}if(!Object.freeze){Object.freeze=function m(K){return K}}try{Object.freeze(function(){})}catch(i){Object.freeze=(function m(L){return function K(M){if(typeof M=="function"){return M}else{return L(M)}}})(Object.freeze)}if(!Object.preventExtensions){Object.preventExtensions=function t(K){return K}}if(!Object.isSealed){Object.isSealed=function J(K){return false}}if(!Object.isFrozen){Object.isFrozen=function B(K){return false}}if(!Object.isExtensible){Object.isExtensible=function l(L){if(Object(L)!==L){throw new TypeError()}var K="";while(w(L,K)){K+="?"}L[K]=true;var M=w(L,K);delete L[K];return M}}});;
;
/* module-key = 'com.xpandit.plugins.xray:xray-base-resources', location = '/js/common/util.js' */
var RAVEN=window.RAVEN||{};RAVEN.namespace=function(d,c,e){var f=d.split(".");c=c||window;for(var b=0,g=f.length-1;b<g;b++){var a=c[f[b]];c=(a!=null)?a:c[f[b]]={}}c[f[b]]=e||c[f[b]]||{};return c[f[b]]};RAVEN.escapeHtml=function(a){if(!a){return a}return $("<div>").text(a).html()};RAVEN.waitForConditionAndExecute=function(c,f,b,a,g){function d(){if(c()){a()}else{if(e<f){e++;setTimeout(d,b)}else{g()}}}var e=0;d()};RAVEN.isFunction=function(a){return !!a&&{}.toString.call(a)==="[object Function]"};RAVEN.elementOverlapsWithAnyChildren=function(g,e){var c=document.querySelector(e);if(!c){return false}var a=document.querySelectorAll(g);if(!a){return false}var f=c.getBoundingClientRect();var d=Array.from(a).filter(this.elementIsVisible);for(var b=0;b<d.length;b++){var h=d[b].getBoundingClientRect();if(this.elementsOverlap(f,h)){return true}}return false};RAVEN.elementIsVisible=function(a){var b=window.getComputedStyle(a);return b.display!=="none"&&b.visibility!=="hidden"};RAVEN.elementsOverlap=function(b,a){return !(b.right<a.left||b.left>a.right||b.bottom<a.top||b.top>a.bottom)};;
;
/* module-key = 'com.xpandit.plugins.xray:folder-resources', location = '/templates/testrepository/folder/folder.soy' */
// This file was automatically generated from folder.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Folder.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Folder == 'undefined') { RAVEN.Folder = {}; }


RAVEN.Folder.renderFolderViewInit = function(opt_data, opt_ignored) {
  var output = '<div id="raven-test-repository-tree">' + ((opt_data.hasAllFolder) ? RAVEN.Folder.renderAllFolder({allTestsCount: opt_data.testCount}) : '') + ((opt_data.hasOrphansFolder) ? RAVEN.Folder.renderOrphansFolder({allOrphanTestsCount: opt_data.orphanTestCount}) : '');
  var rootTestCount__soy12 = opt_data.testCount - opt_data.orphanTestCount;
  output += RAVEN.Folder.renderRootFolder({rootTestCount: rootTestCount__soy12, rootDescription: opt_data.rootDescription}) + '</div>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Folder.renderFolderViewInit.soyTemplateName = 'RAVEN.Folder.renderFolderViewInit';
}


RAVEN.Folder.renderFolderActions = function(opt_data, opt_ignored) {
  return '<div id="raven-folders-footer"><div id="raven-folder-creator" style="display: none;"><span>' + soy.$$escapeHtml('Created by') + ': </span><span id="folder-creator"></span></div>' + ((opt_data.hasFolderActions == true) ? '<div class="raven-action-buttons"><span id="raven-folder-create" class="raven-folder-create" title="' + soy.$$escapeHtml('Create Folder') + '"></span><span id="raven-folder-edit" class="raven-folder-edit" title="' + soy.$$escapeHtml('Edit Folder') + '"></span><span id="raven-folder-delete" class="raven-folder-delete" title="' + soy.$$escapeHtml('Delete Folder') + '"></span></div>' : '') + '</div>';
};
if (goog.DEBUG) {
  RAVEN.Folder.renderFolderActions.soyTemplateName = 'RAVEN.Folder.renderFolderActions';
}


RAVEN.Folder.renderCreator = function(opt_data, opt_ignored) {
  return '<span class="tinylink"><a class="user-hover" rel="' + soy.$$escapeHtml(opt_data.userName) + '" data-user-key="' + soy.$$escapeHtml(opt_data.userKey) + '" id="folder-created-by" href="/secure/ViewProfile.jspa?name=' + soy.$$escapeHtml(opt_data.userName) + '">' + soy.$$escapeHtml(opt_data.displayName) + '</a></span>';
};
if (goog.DEBUG) {
  RAVEN.Folder.renderCreator.soyTemplateName = 'RAVEN.Folder.renderCreator';
}


RAVEN.Folder.renderAllFolder = function(opt_data, opt_ignored) {
  return '<ul class="raven-folder-all-tests"><li class="raven-folder-item droppable-folder-test" id="all-tests" data-parent-id="-2"><div style="height:34px; display: inline; max-height:34px; padding-bottom: -10px;"><div class="raven-wrapper" style="width: calc(100% - 13px)"><div class="raven-global-folder" id="raven-all-folder"><span class="raven-folder-closed-a"></span><div class="raven-folder-global-name raven-folder-caption" title="' + soy.$$escapeHtml('All') + '">' + soy.$$escapeHtml('All') + '</div><div class="raven-folder-number-of-tests raven-global-number-of-tests" id="all-tests-count" data-total-test-count="' + soy.$$escapeHtml(opt_data.allTestsCount) + '">(' + soy.$$escapeHtml(opt_data.allTestsCount) + ')</div></div></div></div></li></ul>';
};
if (goog.DEBUG) {
  RAVEN.Folder.renderAllFolder.soyTemplateName = 'RAVEN.Folder.renderAllFolder';
}


RAVEN.Folder.renderOrphansFolder = function(opt_data, opt_ignored) {
  return '<ul class="raven-folder-all-orphan-tests"><ul class="raven-folder-all-orphan-tests"><li class="raven-folder-item droppable-folder" id="all-orphan-tests" data-parent-id="-3"><div style="height:34px; display: inline; max-height:34px; padding-bottom: -10px;"><div class="raven-wrapper" style="width: calc(100% - 13px);"><div class="raven-global-folder" id="raven-orphans-folder"><span class="raven-folder-closed-a"></span><div class="raven-folder-global-name raven-folder-caption" title="' + soy.$$escapeHtml('Orphans') + '">' + soy.$$escapeHtml('Orphans') + '</div><div id="orphan-test-count" class="raven-folder-number-of-tests raven-global-number-of-tests" data-total-test-count="' + soy.$$escapeHtml(opt_data.allOrphanTestsCount) + '">(' + soy.$$escapeHtml(opt_data.allOrphanTestsCount) + ')</div></div></div></div></li></ul>';
};
if (goog.DEBUG) {
  RAVEN.Folder.renderOrphansFolder.soyTemplateName = 'RAVEN.Folder.renderOrphansFolder';
}


RAVEN.Folder.renderRootFolder = function(opt_data, opt_ignored) {
  return '<ul class="folder-root"><li class="raven-folder-item droppable-folder-test" id="-1" data-parent-id="-4" level="-1" expanded="false"><div style="height:34px; display: inline; max-height:34px; padding-bottom: -10px;"><div class="raven-wrapper" style="width: calc(100% - 13px)"><div id="raven-global-folder-root" class="raven-global-folder droppable-folder"><span class="raven-folder-open-a" id="icon--1"></span><div class="raven-folder-global-name raven-folder-caption" title="' + soy.$$escapeHtml(opt_data.rootDescription) + '">' + soy.$$escapeHtml(opt_data.rootDescription) + '</div><div class="raven-folder-number-of-tests raven-global-number-of-tests" id="root-test-count" data-total-test-count="' + soy.$$escapeHtml(opt_data.rootTestCount) + '">(' + soy.$$escapeHtml(opt_data.rootTestCount) + ')</div></div></div></div></li></ul>';
};
if (goog.DEBUG) {
  RAVEN.Folder.renderRootFolder.soyTemplateName = 'RAVEN.Folder.renderRootFolder';
}


RAVEN.Folder.renderFolderLevel = function(opt_data, opt_ignored) {
  var output = '<ul class="raven-folder-children" ' + ((opt_data.level == 0) ? 'style="padding-left: 10px !important;"' : '') + '>';
  var folderList77 = opt_data.folders;
  var folderListLen77 = folderList77.length;
  for (var folderIndex77 = 0; folderIndex77 < folderListLen77; folderIndex77++) {
    var folderData77 = folderList77[folderIndex77];
    output += RAVEN.Folder.renderFolder({folder: folderData77, parentId: opt_data.parentId, level: opt_data.level, canMoveFolders: folderData77.canMoveFolders});
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Folder.renderFolderLevel.soyTemplateName = 'RAVEN.Folder.renderFolderLevel';
}


RAVEN.Folder.renderFolder = function(opt_data, opt_ignored) {
  var output = '<li class="raven-folder-item" id="' + soy.$$escapeHtml(opt_data.folder.id) + '" data-parent-id="' + soy.$$escapeHtml(opt_data.parentId) + '" level="' + soy.$$escapeHtml(opt_data.level) + '" data-clickable="true"' + ((opt_data.folder.userKey) ? 'data-user-key="' + soy.$$escapeHtml(opt_data.folder.userKey) + '" data-user-name="' + soy.$$escapeHtml(opt_data.folder.userName) + '" data-display-name="' + soy.$$escapeHtml(opt_data.folder.displayName) + '"' : '') + 'expanded="false" ><div class="raven-folder-item-structure">';
  if (opt_data.level > 0) {
    var iLimit105 = opt_data.level;
    for (var i105 = 0; i105 < iLimit105; i105++) {
      output += '<span style="' + ((i105 > 0) ? 'margin-left: 14px;' : '') + ' visibility:hidden" class="raven-tree-dot-line-extension raven-tree-dot-line-extension-normal"></span>';
    }
  }
  output += '<span ' + ((opt_data.level > 0) ? 'style="margin-left: 14px;"' : '') + ' class="raven-tree-dot-line raven-tree-dot-line-normal"></span>' + RAVEN.Folder.renderFolderDetails(opt_data) + '</div></li>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Folder.renderFolder.soyTemplateName = 'RAVEN.Folder.renderFolder';
}


RAVEN.Folder.renderFolderDetails = function(opt_data, opt_ignored) {
  return '<div class="raven-wrapper" style="width: calc(100% - ' + soy.$$escapeHtml(opt_data.level + 1) + '*22px - ' + soy.$$escapeHtml(opt_data.level) + '*14px - 15px);"><div class="raven-folder-rank"></div><div class="raven-folders-view-mode droppable-folder ' + ((opt_data.canMoveFolders) ? 'draggable-folder' : '') + '" id="span-' + soy.$$escapeHtml(opt_data.folder.id) + '" draggable="' + soy.$$escapeHtml(opt_data.canMoveFolders) + '" style="" title="' + soy.$$escapeHtml(opt_data.folder.name) + '"><span class="raven-folder-closed-c" id="icon-' + soy.$$escapeHtml(opt_data.folder.id) + '"></span><input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" style="display: none;" class="raven-folder-name-input" value="' + soy.$$escapeHtml(opt_data.folder.name) + '"></input><span class="raven-folder-name raven-folder-caption">' + soy.$$escapeHtml(opt_data.folder.name) + '</span><span class="raven-folder-number-of-tests" data-total-test-count="' + soy.$$escapeHtml(opt_data.folder.totalTestCount) + '">' + soy.$$escapeHtml(opt_data.folder.testCount) + ' (' + soy.$$escapeHtml(opt_data.folder.totalTestCount) + ')</span></div></div>';
};
if (goog.DEBUG) {
  RAVEN.Folder.renderFolderDetails.soyTemplateName = 'RAVEN.Folder.renderFolderDetails';
}


RAVEN.Folder.createTemporaryFolder = function(opt_data, opt_ignored) {
  var output = '<li class="raven-folder-item activeFolder temporary-item-folder" data-parent-id="' + soy.$$escapeHtml(opt_data.parentId) + '" level="' + soy.$$escapeHtml(opt_data.level) + '" expanded="false"><div class="raven-folder-item-structure">';
  if (opt_data.level > 0) {
    var iLimit157 = opt_data.level;
    for (var i157 = 0; i157 < iLimit157; i157++) {
      output += '<span style="' + ((i157 > 0) ? 'margin-left: 14px;' : '') + ' visibility:hidden;" class="raven-tree-dot-line-extension raven-tree-dot-line-extension-normal"></span>';
    }
  }
  output += '<span ' + ((opt_data.level > 0) ? 'style="margin-left: 14px;"' : '') + ' class="raven-tree-dot-line raven-tree-dot-line-normal"></span><div class="raven-wrapper" style="width: calc(100% - ' + soy.$$escapeHtml(opt_data.level + 1) + '*22px - ' + soy.$$escapeHtml(opt_data.level) + '*14px - 15px);"><div class="raven-folder-rank"></div><div class="raven-folders-view-mode droppable-folder draggable-folder" draggable="true" style="" id="span-temporary"><span class="raven-folder-open-b" id="icon-temporary"></span><input style="display:none;" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="raven-folder-name-input" value="' + soy.$$escapeHtml('New Folder') + '"></input><span class="raven-folder-name raven-folder-caption">' + soy.$$escapeHtml('New Folder') + '</span><span class="raven-folder-number-of-tests" data-total-test-count="0">0 (0)</span></div></div><ul class="raven-folder-children" style="display:none;" id="ul-temporary"></ul></div></li>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Folder.createTemporaryFolder.soyTemplateName = 'RAVEN.Folder.createTemporaryFolder';
}


RAVEN.Folder.deleteFoldersDialog = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + soy.$$escapeHtml(opt_data.title) + '</h2><form class="aui" action="#" method="post"><div class="form-body"><div class="aui-message info"><span class="aui-icon icon-info"></span>' + soy.$$filterNoAutoescape(opt_data.message) + '</div></div><div class="form-footer buttons-container"><div class="buttons"><input class="button" type="submit" id="raven-confirm-dialog-form-submit" value="' + soy.$$escapeHtml(opt_data.confirmButton) + '"/><a href="#" class="cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
};
if (goog.DEBUG) {
  RAVEN.Folder.deleteFoldersDialog.soyTemplateName = 'RAVEN.Folder.deleteFoldersDialog';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:folder-resources', location = '/js/testrepository/folder/folder-view.js' */
(function(a){RAVEN.namespace("RAVEN.Folder");RAVEN.Folder.FolderModel=Backbone.Model.extend({repositoryPath:null,entityKey:null,initialize:function(b){if(b){_.extend(this,_.pick(b,"repositoryPath"));_.extend(this,_.pick(b,"entityKey"))}},urlRoot:function(){return contextPath+"/rest/raven/1.0/"+this.repositoryPath+"/baseFolderInfo?entityKey="+this.entityKey},defaults:function(){return[]}});RAVEN.Folder.FolderView=Backbone.View.extend({el:null,ALL_TESTS:"all-tests",ALL_ORPHAN_TESTS:"all-orphan-tests",FOLDER_ROOT:-1,self:this,META_FOLDER_PATHS:null,TEMPORARY:"temporary",COLLAPSE:"collapse",EXPAND:"expand",COLLAPSE_ALL:"collapse_all",EXPAND_ALL:"expand_all",ACTIVATE:"activate",ROOT_ID_NUMERIC:-1,repositoryPath:null,entityKey:null,hasAllFolder:null,hasOrphansFolder:null,rootDescription:null,canCreateFolders:false,canMoveEditAllFolders:false,canMoveEditOwnFolders:false,canDeleteAllFolders:false,canDeleteOwnFolders:false,canMoveIssues:false,hasFolderActions:null,isTestPlanBoard:false,folderMap:{},externalDisableActions:false,isEditingFolderName:false,loggedInUser:null,events:{"click.raven.test-repository .raven-folder-create":"createFolder","click.raven.test-repository .raven-folder-edit":"_editFolder","dblclick.raven.test-repository .raven-folder-name":"_editFolder","click.raven.test-repository .raven-folder-delete":"_deleteFolder","click.raven.test-repository .raven-folders-view-mode":"folderItemClick","click.raven.test-repository .raven-global-folder":"globalFolderItemClick","keyup.raven.test-repository .raven-folder-name-input":"_keyupNameChange","blur.raven.test-repository .raven-folder-name-input":"_blurNameChange"},initialize:function(c){if(c){_.extend(this,_.pick(c,"el"));_.extend(this,_.pick(c,"repositoryPath"));_.extend(this,_.pick(c,"entityKey"));_.extend(this,_.pick(c,"hasAllFolder"));_.extend(this,_.pick(c,"hasOrphansFolder"));_.extend(this,_.pick(c,"rootDescription"));_.extend(this,_.pick(c,"canCreateFolders"));_.extend(this,_.pick(c,"canMoveEditAllFolders"));_.extend(this,_.pick(c,"canMoveEditOwnFolders"));_.extend(this,_.pick(c,"canDeleteOwnFolders"));_.extend(this,_.pick(c,"canDeleteAllFolders"));_.extend(this,_.pick(c,"canMoveIssues"));_.extend(this,_.pick(c,"hasFolderActions"));_.extend(this,_.pick(c,"isTestPlanBoard"))}const b=this;a.ajax({type:"GET",async:false,url:contextPath+"/rest/api/2/myself",success:function(d){b.loggedInUser=d.key}});this.META_FOLDER_PATHS={ALL:{name:"\\raven_all_tests",id:b.ALL_TESTS},ORPHANS:{name:"\\raven_orphans",id:b.ALL_ORPHAN_TESTS},ROOT:{name:"\\raven_root",id:b.FOLDER_ROOT}};this.model=new RAVEN.Folder.FolderModel({repositoryPath:this.repositoryPath,entityKey:this.entityKey});this.model.fetch({success:function(){b.render()},error:function(e,d){console.error("Failed to fetch root folder information")}})},render:function(){var b=RAVEN.Folder.renderFolderViewInit({testCount:this.model.attributes.testCount,orphanTestCount:this.model.attributes.orphanTestCount,hasAllFolder:this.hasAllFolder,hasOrphansFolder:this.hasOrphansFolder,rootDescription:this.rootDescription});this.$el.html(b);this.$el.append(RAVEN.Folder.renderFolderActions({hasFolderActions:this.hasFolderActions,}));if(!this._canCreateFolders(true)){this._disableCreateFolder()}this._loadFoldersOfRoot(new a.Deferred())},_getCurrentUserKey:function(){return this.loggedInUser},_loadFoldersOfRoot:function(b){var d=this._getExpandCollapseElement(this.FOLDER_ROOT);d.block().spin("small");var c=a.proxy(this._renderRootFolders,this);this._getFolders(this.FOLDER_ROOT).done(c,function(){b.resolve()});return b.promise()},_renderRootFolders:function(b){const c=this._adCanMoveFoldersPermission(b.folders);var d=RAVEN.Folder.renderFolderLevel({folders:c,parentId:this.FOLDER_ROOT,level:0,});this._getFolderElem(this.FOLDER_ROOT).append(d).attr("expanded",true);this._initTreeDotLineStructure();this.$el.trigger("folderInitializedEvt");this._folderElementsAdded();var e=this._getExpandCollapseElement(this.FOLDER_ROOT);e.unblock().spinStop()},_getFolders:function(c){var b=this;return a.ajax({type:"GET",url:contextPath+"/rest/raven/1.0/"+b.repositoryPath+"/folders?entityKey="+b.entityKey+"&folderId="+c,processData:true,async:true,contentType:"application/json",error:function(e,f,d){b.$el.trigger("messageEvt",["Error getting sub folders",b._getErrorString(e,d)])}})},destroy:function(){this.$el.removeData().unbind()},_removeActiveFolderStyle:function(){var b=this.$el.find(".raven-folder-global-name.active");b.removeClass("active").find(".raven-folder-number-of-tests").removeClass("active");this.$el.find(".raven-folder-name.active").removeClass("active");this.$el.find(".raven-folder-number-of-tests.active").removeClass("active")},addActiveFolderStyle:function(b){if(b[0].id==="-1"){return}b.find(".raven-folder-name").first().addClass("active");b.find(".raven-folder-number-of-tests").first().addClass("active")},addActiveFolderGlobalStyle:function(b){b.find(".raven-folder-global-name").first().addClass("active");b.find(".raven-folder-number-of-tests").first().addClass("active")},activateAllFolder:function(){var b=this.$el.find("#"+this.ALL_TESTS);this.addActiveFolderGlobalStyle(b);this.setActiveFolder(b);this._disableEditFolder();this._disableDeleteFolder()},activatePath:function(c){if(!c||c.length===0){return}if(c==="/"){this.setActiveFolder(this._getFolderElem(this.ROOT_ID_NUMERIC));return}c=this._startsWith(c,"/")?c.substring(1,c.length):c;var d=c.split("/");var b=this;this._loadPath(d,null).then(function(e){if(e){b._activateFolderById(e)}})},_startsWith:function(b,c){return b.indexOf(c)===0},_activateFolderById:function(b){var c=this._getFolderElem(b);if(this._isMetaFolder(b)){this.addActiveFolderGlobalStyle(c);this.setActiveFolder(c)}else{this.setActiveFolder(c);this._refreshTreeActivePathActivate(b)}},_loadPath:function(g,e){var f=this;var c=new a.Deferred();if(g.length==1){var d=this._getNextFolderId(this._getCursorId(e),g[0]);c.resolve(d);return c.promise()}var b=g[0];this._expandNextFolder(e,b).then(function(h){if(!h){c.resolve(e)}else{f._loadPath.call(f,g.slice(1,g.length),h).then(function(i){c.resolve(i)})}});return c.promise()},_getIdOfMetaFolder:function(c){var b=this._getMetaFolderByName(c);return b?b.id:null},_getMetaFolderByName:function(c){for(var b in this.META_FOLDER_PATHS){if(this.META_FOLDER_PATHS[b].name==c){return this.META_FOLDER_PATHS[b]}}return null},_getMetaFolderById:function(b){for(var c in this.META_FOLDER_PATHS){if(this.META_FOLDER_PATHS[c].id==b){return this.META_FOLDER_PATHS[c]}}return null},_expandNextFolder:function(d,c){if(!d){var f=this._getIdOfMetaFolder(c);if(f){return new a.Deferred.resolve(f)}}var g=this._getCursorId(d);var e=this._getNextFolderId(g,c);var b=new a.Deferred();if(this._isFolderExpanded(e)){b.resolve(e);return b.promise()}this._subExpandFolder(e).then(function(){b.resolve(e)}).fail(function(){b.resolve(e)});return b.promise()},_getCursorId:function(b){return b?b:this.ROOT_ID_NUMERIC},_getNextFolderId:function(d,c){var b=this._getIdOfMetaFolder(c);if(b){return b}return a("#"+d).find("ul.raven-folder-children").find("input[value='"+c+"']").first().closest("li.raven-folder-item").attr("id")},activateAllFolderAndResetPath:function(){var b=this.$el.find("#"+this.ALL_TESTS);this.unhighlightOutOfPathFolders(this.$el.find("li"));this._clearTreeDotLineStructure();this._removeActiveFolderStyle();this.addActiveFolderGlobalStyle(b);this.$el.find(".raven-folder-open-b").removeClass("raven-folder-open-b").addClass("raven-folder-open-c");this.$el.find(".raven-folder-closed-b").removeClass("raven-folder-closed-b").addClass("raven-folder-closed-c");this.setActiveFolder(b);this._disableEditFolder();this._disableDeleteFolder()},getActiveFolderTestCount:function(){return this.getActiveFolder().find(".raven-folder-number-of-tests").data("total-test-count")},_hideTreeDotLineStructure:function(){a(".raven-tree-dot-line-extension").css("visibility","hidden")},_initTreeDotLineStructure:function(){var b=this;this.$el.find(".raven-folders-view-mode").each(function(){var e=a(this).closest("li").find("div").first().children(".raven-tree-dot-line-extension").length;var d="#"+b.FOLDER_ROOT;var c=a(this).parents("li:not("+d+")").first();if(c.nextAll("li").length>0){if(a(this).closest("li").nextAll("li").length>0){a(this).closest("li").find("ul.raven-folder-children").first().find("li.raven-folder-item").each(function(){a(this).children("div").children(".raven-tree-dot-line-extension:eq("+e+")").css("visibility","visible")})}}})},_clearTreeDotLineStructure:function(){var b=this.$el.find("ul.raven-folder-children");b.find(".raven-tree-dot-line").removeClass("raven-tree-dot-line-selected").addClass("raven-tree-dot-line-normal");b.find(".raven-tree-dot-line").removeClass("raven-tree-dot-line-breadcrumb").addClass("raven-tree-dot-line-normal");b.find(".raven-tree-dot-line-extension").removeClass("raven-tree-dot-line-extension-selected").addClass("raven-tree-dot-line-extension-normal")},_resetTreeLines:function(){this._clearTreeDotLineStructure();this._initTreeDotLineStructure()},_removeTreeDotLineExtension:function(b){var c=b.find("div").first().children(".raven-tree-dot-line-extension").length;if(b.nextAll("li").length===0){b.prevAll("li").each(function(){a(this).find("li").each(function(){a(this).find(".raven-tree-dot-line-extension:eq("+c+")").css("visibility","hidden")})})}},updateTreeDotLineStructure:function(b,c){if(c===this.EXPAND){this._expandTreeDotLine(b)}else{if(c===this.COLLAPSE){this._collapseTreeDotLine(b)}else{if(c===this.EXPAND_ALL){this._expandAllTreeDotLine(b)}else{if(c===this.ACTIVATE){this._activateTreeDotLine(b)}}}}},_expandTreeDotLine:function(b){var c="#"+this.FOLDER_ROOT;b.parents("li:not("+c+")").each(function(){a(this).find(".raven-tree-dot-line").first().removeClass("raven-tree-dot-line-normal").addClass("raven-tree-dot-line-selected");a(this).find(".raven-folders-view-mode").first().children(".raven-folder-closed-b").first().removeClass("raven-folder-closed-b").addClass("raven-folder-open-b");a(this).find(".raven-folders-view-mode").first().children(".raven-folder-open-c").first().removeClass("raven-folder-open-c").addClass("raven-folder-open-b");a(this).find(".raven-folders-view-mode").first().children(".raven-folder-closed-c").first().removeClass("raven-folder-closed-c").addClass("raven-folder-open-b");var d=a(this).find("div").first().children(".raven-tree-dot-line-extension").length;a(this).prevAll("li").each(function(){a(this).find(".raven-tree-dot-line").first().removeClass("raven-tree-dot-line-normal").addClass("raven-tree-dot-line-breadcrumb");a(this).find("li").each(function(){a(this).find(".raven-tree-dot-line-extension:eq("+d+")").removeClass("raven-tree-dot-line-extension-normal").addClass("raven-tree-dot-line-extension-selected")})})})},_collapseTreeDotLine:function(b){b.closest("li").prevAll("li").each(function(){a(this).find(".raven-tree-dot-line").first().removeClass("raven-tree-dot-line-breadcrumb").addClass("raven-tree-dot-line-normal")});var c=b.closest("li").find("div").first().children(".raven-tree-dot-line-extension").length;b.closest("li").prevAll("li").each(function(){a(this).find("li").each(function(){a(this).find(".raven-tree-dot-line-extension:eq("+c+")").removeClass("raven-tree-dot-line-extension-selected").addClass("raven-tree-dot-line-extension-normal")})})},_folderClosedToOpen:function(b){b.find(".raven-folders-view-mode").first().children(".raven-folder-closed-b").first().removeClass("raven-folder-closed-b").addClass("raven-folder-open-b")},_expandAllTreeDotLine:function(b){this._folderClosedToOpen(b);b.find("li").each(function(){a(this).find(".raven-folders-view-mode").first().children(".raven-folder-open-b").first().removeClass("raven-folder-open-b").addClass("raven-folder-open-c");a(this).find(".raven-folders-view-mode").first().children(".raven-folder-closed-c").first().removeClass("raven-folder-closed-c").addClass("raven-folder-open-c");a(this).find(".raven-tree-dot-line").first().removeClass("raven-tree-dot-line-breadcrumb").addClass("raven-tree-dot-line-normal");a(this).find(".raven-tree-dot-line").first().removeClass("raven-tree-dot-line-selected").addClass("raven-tree-dot-line-normal");var c=a(this).find("div").first().children(".raven-tree-dot-line-extension").length;a(this).prevAll("li").each(function(){a(this).find("li").each(function(){a(this).find(".raven-tree-dot-line-extension:eq("+c+")").removeClass("raven-tree-dot-line-extension-selected").addClass("raven-tree-dot-line-extension-normal")})})})},_activateTreeDotLine:function(c){this._activateTreeDotLineFolder(c);var b=this;var d="#"+this.FOLDER_ROOT;c.parents("li:not("+d+")").each(function(){b._expandTreeDotLineFolder(a(this))})},_activateTreeDotLineFolder:function(b){b.find(".raven-tree-dot-line").first().removeClass("raven-tree-dot-line-normal").addClass("raven-tree-dot-line-selected");b.find(".raven-folders-view-mode").first().children(".raven-folder-open-c").first().removeClass("raven-folder-open-c").addClass("raven-folder-open-b");b.find(".raven-folders-view-mode").first().children(".raven-folder-closed-c").first().removeClass("raven-folder-closed-c").addClass("raven-folder-closed-b");var c=b.find("div").first().children(".raven-tree-dot-line-extension").length;b.prevAll("li").each(function(){a(this).find(".raven-tree-dot-line").first().removeClass("raven-tree-dot-line-normal").addClass("raven-tree-dot-line-breadcrumb");a(this).find("li").each(function(){a(this).find(".raven-tree-dot-line-extension:eq("+c+")").removeClass("raven-tree-dot-line-extension-normal").addClass("raven-tree-dot-line-extension-selected")})})},_expandTreeDotLineFolder:function(b){b.find(".raven-tree-dot-line").first().removeClass("raven-tree-dot-line-normal").addClass("raven-tree-dot-line-selected");b.find(".raven-folders-view-mode").first().children(".raven-folder-open-c").first().removeClass("raven-folder-open-c").addClass("raven-folder-open-b");b.find(".raven-folders-view-mode").first().children(".raven-folder-closed-c").first().removeClass("raven-folder-closed-c").addClass("raven-folder-open-b");var c=b.find("div").first().children(".raven-tree-dot-line-extension").length;b.prevAll("li").each(function(){a(this).find(".raven-tree-dot-line").first().removeClass("raven-tree-dot-line-normal").addClass("raven-tree-dot-line-breadcrumb");a(this).find("li").each(function(){a(this).find(".raven-tree-dot-line-extension:eq("+c+")").removeClass("raven-tree-dot-line-extension-normal").addClass("raven-tree-dot-line-extension-selected")})})},unhighlightOutOfPathFolders:function(b){this.$el.find(".raven-folder-open-b, .raven-folder-closed-b").closest("li").each(function(){var d=false;var c=a(this);a(b).each(function(){if(c.attr("id")===a(this).attr("id")){d=true}});if(!d){a(this).find(".raven-folder-open-b").first().removeClass("raven-folder-open-b").addClass("raven-folder-open-c");a(this).find(".raven-folder-closed-b").first().removeClass("raven-folder-closed-b").addClass("raven-folder-closed-c")}})},createFolder:function(){if(!this._canCreateFolders(true)||this.isEditingFolderName){return}var d=this.getActiveFolder();if(d.length<=0){return}d.removeClass("raven-activeFolder");if(this._isMetaFolder(d.attr("id"))){d=this._getFolderElem(this.FOLDER_ROOT)}if(!this.externalDisableActions){this._enableEditFolder();this._enableDeleteFolder()}this._clearTreeDotLineStructure();this._removeActiveFolderStyle();var c=this;var b=d.first().attr("id");this._renderCreatedFolder(d).done(function(){var e=c.$el.find(".temporary-item-folder");c.addActiveFolderStyle(e);c.unhighlightOutOfPathFolders(e.find(".raven-wrapper").parents("li"));c._confirmCreateFolder(e);c._initTreeDotLineStructure();c.updateTreeDotLineStructure(e.find(".raven-wrapper"),c.EXPAND);c.$el.trigger("folderCreateEvt",b);c.lastActiveFolder=c.TEMPORARY})},_isMetaFolder:function(b){return this._getMetaFolderById(b)!=null},_renderCreatedFolder:function(f){var d=f.first().attr("id");var c=new a.Deferred();var g=this._getLevelOfFolder(d)+1;var e=this;var b=a.proxy(function(){e._subRenderCreatedFolder(f,g,c)},e);this._subExpandFolder(d).done(b);return c.promise()},_subExpandFolder:function(d){if(this._isFolderCollapsed(d)){var b=new a.Deferred();var c=this._getExpandCollapseElement(d);this._expandFolder(c).done(function(){b.resolve()});return b.promise()}return new a.Deferred().resolve()},_subRenderCreatedFolder:function(c,e,b){var d=RAVEN.Folder.createTemporaryFolder({level:e,parentId:c.first().attr("id")});c.find("ul.raven-folder-children").first().append(d).show();return b.resolve()},_confirmCreateFolder:function(c){var e=c.find(".raven-folder-name-input").first().val();var f=c.attr("data-parent-id");var d="?name="+e+"&entityKey="+this.entityKey;if(f&&f!==this.ROOT_ID_NUMERIC.toString()){d+="&parentId="+f}if(e!==null&&e!==""){this.$el.trigger("blockElementEvt");var b=this;a.ajax({type:"POST",url:contextPath+"/rest/raven/1.0/"+b.repositoryPath+"/create"+d,processData:true,contentType:"application/json",error:function(i,j,h){var g=b._getErrorString(i,h);b.$el.trigger("messageEvt",["Error creating folder.",g]);c.remove()},success:function(h,i,g){c.attr("id",h.id).removeClass("temporary-item-folder");if(h.userKey){c.attr("data-user-key",h.userKey);c.attr("data-user-name",h.userName);c.attr("data-display-name",h.displayName)}b.$el.find("#span-temporary").attr("id","span-"+h.id);b.$el.find("#icon-temporary").attr("id","icon-"+h.id);b.$el.find("#ul-temporary").attr("id","ul-"+h.id);b._setNameOfElement(c,h.name);b._setInputText(c);b.setActiveFolder(c);b.createdFolderId=h.id;b._messageFlag("A new folder has been created.")},complete:function(){b.$el.trigger("unblockElementEvt")}})}else{c.find(".raven-folder-name-input").first().attr("placeholder","Please fill in the folder\'s name")}},_setNameOfElement:function(b,c){b.find(".raven-folder-name-input").first().val(c);b.find(".raven-folder-name").first().text(c);b.find(".raven-folders-view-mode").first().attr("title",c)},_editFolder:function(){if(!this._canMoveEditFolders(true,this._getCreatorName())){return}this.isEditingFolderName=true;var b=this.getActiveFolder();this._setInputText(b)},_setInputText:function(b){b.find(".raven-folder-name").first().hide();b.find(".raven-folder-name-input").first().show();var c=b.find(".raven-folder-name-input").first();var d=c.val();if(d!==null&&d!==undefined){c.setSelectionRange(d.length,d.length)}},_confirmEditFolder:function(e){var b=e.find(".raven-folder-name").first().text();var f=e.find(".raven-folder-name-input").first().val();if(f===null||f===""){e.find(".raven-folder-name-input").first().attr("placeholder","Please fill in the folder\'s name");return}var c=e.attr("id");if(b!==f){this.$el.trigger("blockElementEvt");var d=this;a.ajax({type:"PUT",url:contextPath+"/rest/raven/1.0/"+d.repositoryPath+"/rename?id="+c+"&name="+encodeURIComponent(f),processData:true,async:true,contentType:"application/json",error:function(i,j,h){var g=d._getErrorString(i,h);d._revertFolderNameChange(e,b);d.$el.trigger("messageEvt",["Error updating folder\'s name.",g])},success:function(h,i,g){if(h){d._setNameOfElement(e,h.name);e.find(".raven-folder-name").first().show();e.find(".raven-folder-name-input").first().hide();d.$el.trigger("folderEditEvt",{name:h.name,id:c});d._messageFlag(AJS.format("Folder \u003cb\u003e{0}\u003c/b\u003e has been renamed to \u003cb\u003e{1}\u003c/b\u003e.",AJS.escapeHtml(b),AJS.escapeHtml(h.name)))}else{d.$el.trigger("messageEvt",["Error updating folder\'s name."])}},complete:function(){d.$el.trigger("unblockElementEvt");d.isEditingFolderName=false}})}else{this._revertFolderNameChange(e,b);this.isEditingFolderName=false}},_getExpandCollapseElement:function(b){return a("span#icon-"+b)},_isSameParentFolder:function(c,b){return this._getParentIdOfFolder(c)===this._getParentIdOfFolder(b)},_getParentIdOfFolder:function(b){return a("#"+b).attr("data-parent-id")},_getFolderElem:function(b){return this.$el.find("#"+b)},_removeFolder:function(b){this._getFolderElem(b).remove()},_isFolderCollapsed:function(b){return this._getFolderElem(b).attr("expanded")==="false"},_isFolderExpanded:function(b){return !this._isFolderCollapsed(b)},_getLevelOfFolder:function(b){var c=parseInt(b)===this.FOLDER_ROOT?this.FOLDER_ROOT.toString():b;var d=this._getFolderElem(c);return parseInt(d.attr("level"))},_getLevelOfChildFolder:function(b){return this._getLevelOfFolder(b)+1},moveIntoCollapsedFolder:function(e,b){var c=this.getActiveFolderIdNumeric();this._removeFolder(b);this.refreshFolderTestCount();this._hideTreeDotLineStructure();if(parseInt(b)!==c){this._refreshTreeActivePathActivate(c);return}var d=this._getExpandCollapseElement(e);this.setActiveFolder(d);this._refreshTreeActivePathActivate(e)},moveIntoFolder:function(e,b){if(this._isFolderCollapsed(e)){this.moveIntoCollapsedFolder(e,b);return}var d=this.getActiveFolderId();this._removeFolder(b);var c=this;this._getFolderBean(b).done(function(f){c._renderChildFolder(f,e);c._hideTreeDotLineStructure();c._refreshTreeActivePathActivate(d);c.refreshFolderTestCount();c._folderElementsAdded()}).fail(c._errorGettingFolder)},_renderChildFolder:function(c,e){var d=this._getLevelOfChildFolder(e);var b=this._$renderFolderFromBean(c,d,e);if(this._containsFolders(e)){this._appendChildFolderToBottom(e,b)}else{this._appendChildFolder(e,b)}},_containsFolders:function(b){return this._getFolderElem(b).find(".raven-folder-item").length>0},_appendChildFolderToBottom:function(e,c){var d=this._getFolderElem(e);var b=d.children(".raven-folder-children").first().children(".raven-folder-item").last();b.after(c)},_appendChildFolder:function(e,c){var d=this._getFolderElem(e);var b=d.find(".raven-folder-children").first();b.append(c)},moveFolder:function(h,f,c){if(this._isSameParentFolder(f,c)){this._reOrderFolder(c,f);return}var b=this._getFolderElem(f);var g=this._getLevelOfChildFolder(h);var e=this.getActiveFolderId();var d=this;this._getFolderBean(c).done(function(j){d._removeFolder(c);var i=d._$renderFolderFromBean(j,g,h);b.before(i);d._refreshTreeActivePathActivate(e);d.refreshFolderTestCount();d._folderElementsAdded()}).fail(d._errorGettingFolder)},_folderElementsAdded:function(){this.$el.trigger("folderElementsAddedEvt")},_errorGettingFolder:function(c,d,b){this.$el.trigger("messageEvt",[AJS.format("raven.test-repository.folders.error-getting-folder",folderId),self._getErrorString(c,b)])},_$renderFolderFromBean:function(c,e,d){var b=RAVEN.Folder.renderFolder({folder:c,parentId:d,level:e,canMoveFolders:this._canMoveEditFolders(false,c.userKey)});return a(b)},_reOrderFolder:function(c,e){if(c===e){return}var f=this._getFolderElem(c);var b=this._getFolderElem(e);var d=this.getActiveFolderId();f.detach();b.before(f);this._refreshTreeActivePathActivate(d)},_getFolderBean:function(b){var c=this.repositoryPath;return a.ajax({type:"GET",url:contextPath+"/rest/raven/1.0/"+c+"/folder?folderId="+b,processData:true,async:true,contentType:"application/json"})},_revertFolderNameChange:function(c,b){c.find(".raven-folder-name").first().text(b).attr("title",b).show();c.find(".raven-folder-name-input").first().val(b).hide()},_expandFolder:function(f){var g=this._getIconParentFolderElement(f);var b=new a.Deferred();var e=this;var d=g.attr("id");if(this._isMetaFolder(d)){return this._expandRootFolder(f)}f.block().spin("small");var c=a.proxy(function(h){e._renderExpandedFolderLevel(h,f,d)},e);this._getFolders(g.attr("id")).done(c,function(){b.resolve()});return b.promise()},_renderExpandedFolderLevel:function(c,b,d){this._renderFolders(d,c.folders);this._expandVisualAdjustments(b);this._folderElementsAdded();b.unblock().spinStop()},_renderFolders:function(f,c){var e=this._getLevelOfChildFolder(f);const b=this._adCanMoveFoldersPermission(c);var d=RAVEN.Folder.renderFolderLevel({folders:b,parentId:f,level:e});this._getFolderElem(f).append(d).attr("expanded","true")},_expandAllFolders:function(b){var c=this;var d=a("#raven-test-repository-navigation");d.block().spin("large");this._removeChildFolders(b);a.when(c._renderAndExpandAll(b)).then(function(){c._refreshTreeActivePathExpandAll(b);c._folderElementsAdded();d.unblock().spinStop()})},_renderAndExpandAll:function(d){var g=this._getFolderElem(d);var f=this._getLevelOfChildFolder(d);var b=new a.Deferred();var e=this;g.attr("expanded","true");this._folderClosedToOpen(g);var c=a.proxy(function(h){e._renderFolderLevelAndExpand(h,d,f,b)},e);this._getFolders(d).done(c);return b.promise()},_renderFolderLevelAndExpand:function(f,e,b,g){const c=this._adCanMoveFoldersPermission(f.folders);var h=RAVEN.Folder.renderFolderLevel({folders:c,parentId:e,level:b});this._getFolderElem(e).append(h);if(f.folders.length===0){g.resolve();return}var i=this;var d=this._getChildFolders(e);var j=d.map(function(k){return i._renderAndExpandAll(k)});a.when.apply(a,j).then(function(){g.resolve()})},_getChildFolders:function(b){var c=[];this._getFolderElem(b).find(".raven-folder-item").each(function(){c.push(a(this).attr("id"))});return c},_getIconParentFolderElement:function(b){return b.parents("li").first()},_expandVisualAdjustments:function(b){this._resetTreeLines();this.unhighlightOutOfPathFolders(b.parents("li"));this._clearTreeDotLineStructure();b.removeClass("raven-folder-closed-c").addClass("raven-folder-open-c");b.removeClass("raven-folder-closed-b").addClass("raven-folder-open-b");if(this._isMetaFolder(this.getActiveFolderId())){return}this._activateTreeDotLine(this.getActiveFolder())},_removeChildFolders:function(b){this.$el.find("#"+b+" .raven-folder-children").remove()},_collapseFolder:function(b){var c=b.parents("li").first().attr("id");this._getFolderElem(c).attr("expanded","false");this._removeChildFolders(c);if(b.hasClass("raven-folder-open-c")){b.closest("li").find(".raven-folder-open-c").removeClass("raven-folder-open-c").addClass("raven-folder-closed-c")}else{b.closest("li").find(".raven-folder-closed-b").removeClass("raven-folder-closed-b").addClass("raven-folder-closed-c");b.closest("li").find(".raven-folder-open-c").removeClass("raven-folder-open-c").addClass("raven-folder-closed-c");b.closest("li").find(".raven-folder-open-b").first().removeClass("raven-folder-open-b").addClass("raven-folder-closed-b");b.closest("li").find(".raven-folder-open-b").removeClass("raven-folder-open-b").addClass("raven-folder-closed-c")}},_expandRootFolder:function(c){var b=new a.Deferred();this._loadFoldersOfRoot(b);c.removeClass("raven-folder-root-closed").addClass("raven-folder-open-a");return b.promise()},_collapseRootFolder:function(b){this._removeChildFolders(this.FOLDER_ROOT);b.removeClass("raven-folder-open-a").addClass("raven-folder-root-closed");this._getFolderElem(this.FOLDER_ROOT).attr("expanded",false)},getActiveFolderId:function(){return this.getActiveFolder().attr("id")},getActiveFolderIdNumeric:function(){var c=this.getActiveFolderId();var b=c===this.FOLDER_ROOT?this.FOLDER_ROOT:c;return parseInt(b)},getActiveFolder:function(){return this.$el.find(".raven-activeFolder")},getFolderName:function(b){return this.$el.find("#"+b).find(".raven-folder-caption").first().text()},getGlobalFolderName:function(){return this.getActiveFolder().find(".raven-folder-caption").first().text()},setActiveFolder:function(b){this.$el.find("li").removeClass("raven-activeFolder");b.closest("li").addClass("raven-activeFolder");this.$el.trigger("folderSelectEvt",b.closest("li").attr("id"));this._setCreatorName();this._enableEditFolder();this._enableDeleteFolder()},_setCreatorName:function(){if(this.isTestPlanBoard){return}const e=this.$el.find(".raven-activeFolder").first();const c=e.attr("id");const f=e.attr("data-user-key");const d=e.attr("data-user-name");const b=e.attr("data-display-name");if(!f||c===this.ALL_TESTS||c===this.ALL_ORPHAN_TESTS){this.$el.find("#raven-folder-creator").hide();this.$el.find("#folder-creator").empty();return}this.$el.find("#folder-creator").html(RAVEN.Folder.renderCreator({userName:d,userKey:f,displayName:b}));this.$el.find("#raven-folder-creator").show()},_getCreatorName:function(){if(this.isTestPlanBoard){return null}return this.$el.find("#folder-created-by").attr("data-user-key")},_isOwner:function(b){return b===this._getCurrentUserKey()},_getErrorString:function(c,b){if(b&&b.trim()!==""){return b+": "+c.responseText}else{return c.responseText}},_deleteFolder:function(){if(!this._canDeleteFolders(true,this._getCreatorName())){return}var d=this.getActiveFolder();var c=d.attr("id");if(!c){console.error("undefined folder id");return}var f=this.getFolderName(c);var b=this;if(d.length>0&&c!==b.ALL_ORPHAN_TESTS&&c!==b.ALL_TESTS&&c!==b.FOLDER_ROOT){var e=new JIRA.FormDialog({id:"raven-delete-folder-dialog",width:530,height:"250px",content:function(k){var j="Delete Folder";var h=AJS.format("Are you sure you want to delete the folder {0}?\u003c/br\u003e\u003c/br\u003e\u003cb\u003eAll its children folders will be removed.\u003c/b\u003e",d.find(".folder-name").first().text());var i="Delete";var g=RAVEN.Folder.deleteFoldersDialog({title:j,message:h,confirmButton:i});k(g)},submitHandler:function(g,h){g.preventDefault();b.$el.trigger("blockElementEvt","DELETE_FOLDER");a.ajax({type:"DELETE",url:contextPath+"/rest/raven/1.0/"+b.repositoryPath+"/delete?id="+c,processData:true,async:true,contentType:"application/json",error:function(k,l,j){var i=b._getErrorString(k,j);e.hide();b.$el.trigger("messageEvt",[AJS.format("Error deleting folder {0}.",d.find(".raven-folder-name").html()),i])},success:function(k,l,j){var i=d.parents("li").first();b._removeActiveFolderStyle();if(i.attr("id")===b.FOLDER_ROOT){b.addActiveFolderGlobalStyle(i);b._clearTreeDotLineStructure();this._disableEditFolder();this._disableDeleteFolder()}else{b.addActiveFolderStyle(i)}b.setActiveFolder(i);b._removeTreeDotLineExtension(d);b.updateTreeDotLineStructure(d,b.COLLAPSE);b.$el.trigger("folderSelectEvt",b.getActiveFolderId());d.remove();e.hide();b.refreshFolderTestCount();b._messageFlag(AJS.format("Folder {0} deleted successfully.",AJS.escapeHtml(f)))},complete:function(){b.$el.trigger("unblockElementEvt","DELETE_FOLDER")}})},autoClose:true});e.show()}},refreshFolderTestCount:function(){this.$el.trigger("clearMessageEvt");this.$el.trigger("blockElementEvt");var c="#"+this.FOLDER_ROOT;var d=a(c).find("li.raven-folder-item").map(function(){return this.id}).get();var b=this;a.ajax({type:"PUT",url:contextPath+"/rest/raven/1.0/"+b.repositoryPath+"/testCounters?entityKey="+b.entityKey,data:JSON.stringify(d),processData:true,contentType:"application/json",error:function(g,h,f){var e=b._getErrorString(g,f);b.$el.trigger("messageEvt",[e])},success:function(f,g,e){if(!f){return}b._updateTestCounts(f)},complete:function(){b.$el.trigger("unblockElementEvt")}})},_updateTestCounts:function(b){this._updateOrphanTestsCount(b.testRepositoryInfo.orphanTestCount);this._updateAllTestsCount(b.testRepositoryInfo.testCount);this._updateRootTestCount(b.testRepositoryInfo.testCount-b.testRepositoryInfo.orphanTestCount);this._updateFoldersTestCount(b.folderTestCount)},_updateFoldersTestCount:function(c){var b=this;c.forEach(function(d){b._setTotalTests(d.id,d.testCount,d.totalTestCount)})},_folderTreeClimb:function(b){for(var c=0;c<b.length;c++){this._setTotalTests(b[c].id,b[c].testCount,b[c].totalTestCount);this._folderTreeClimb(b[c].children)}},_setTotalTestsText:function(b,c){b.text(this._formatTestCountGlobal(c)).data("total-test-count",c)},_formatTestCountGlobal:function(b){return"("+b+")"},_formatTestCount:function(c,b){return c+" ("+b+")"},_setTotalTests:function(b,e,c){var f=this.$el.find("#"+b);if(!f){return}var d=f.find(".raven-folder-number-of-tests").first();if(!d){return}d.data("total-test-count",c);d.text(this._formatTestCount(e,c))},_updateOrphanTestsCount:function(b){this.$el.find("#all-orphan-tests").find(".raven-folder-number-of-tests").text("("+b+")").data("total-test-count",b)},_updateAllTestsCount:function(b){this._setTotalTestsText(this.$el.find("#all-tests-count"),b)},_updateRootTestCount:function(b){this._setTotalTestsText(this.$el.find("#root-test-count").first(),b)},expandAll:function(){var b=this.getActiveFolderIdNumeric();this._expandAllFolders(b)},collapseAll:function(){var b=this._getExpandCollapseElement(this.getActiveFolderId());this._collapseFolder(b)},_isFolderImg:function(b){return b.hasClass("raven-folder-open-b")||b.hasClass("raven-folder-closed-b")||b.hasClass("raven-folder-open-c")||b.hasClass("raven-folder-closed-c")},buildCompletePath:function(b){return this.buildFolderPath(b,true)},buildFolderPath:function(b,c){var d=this.$el.find("#"+b).parents("li").andSelf();var g="#"+this.FOLDER_ROOT;d=c?d:d.not(g);var f=this.$el.find(d[0]).find(".raven-folder-caption").first().text();for(var e=1;e<d.length;e++){f+="/"+a(d[e]).find(".raven-folder-caption").first().text()}return f},buildURLPath:function(b){var c=this._getMetaFolderById(b);if(c){return c.name}var d=this.$el.find("#"+b).parents("li").andSelf();d=d.not("#"+this.FOLDER_ROOT);var f=this.$el.find(d[0]).find(".raven-folder-caption").first().text();for(var e=1;e<d.length;e++){f+="/"+a(d[e]).find(".raven-folder-caption").first().text()}return f},folderItemClick:function(f,g){var d=this;f.stopPropagation();var c=d.$el.find(f.target);var b=false;if(c.closest("li").hasClass("raven-activeFolder")){b=true}if(g||!d._isFolderImg(c)){c=c.parents("li").first()}if(c.hasClass("raven-folder-closed-b")||c.hasClass("raven-folder-closed-c")){d._expandFolder(c)}else{if(c.hasClass("raven-folder-open-b")||c.hasClass("raven-folder-open-c")){d._collapseFolder(c)}else{if(!b){d.unhighlightOutOfPathFolders(c.find(".raven-folders-view-mode").first().parents("li"));d._clearTreeDotLineStructure();d._removeActiveFolderStyle();d.addActiveFolderStyle(c);d.setActiveFolder(c);d.updateTreeDotLineStructure(c,d.ACTIVATE)}d.$el.trigger("folderActiveEvt",c.closest("li").attr("id"))}}},_refreshTreeActivePathExpandAll:function(b){this._refreshTreeActivePath(b);var c=this._getFolderElem(b);this._expandAllTreeDotLine(c)},_refreshTreeActivePathActivate:function(b){this._refreshTreeActivePath(b);var c=this._getFolderElem(b);this._activateTreeDotLine(c)},_refreshTreeActivePath:function(b){this._resetTreeLines();var d=this._getFolderElem(b);var c=this;c.unhighlightOutOfPathFolders(d.find(".raven-folders-view-mode").first().parents("li"));c._clearTreeDotLineStructure();c._removeActiveFolderStyle();c.addActiveFolderStyle(d);this.$el.find("li").removeClass("raven-activeFolder");d.closest("li").addClass("raven-activeFolder");c.updateTreeDotLineStructure(d,c.ACTIVATE)},globalFolderItemClick:function(d,f){var c=this;d.stopPropagation();var b=c.$el.find(d.target);if(!b.hasClass("raven-folder-root-closed")&&!b.hasClass("raven-folder-open-a")){c.$el.trigger("folderActiveEvt",b.closest("li").attr("id"))}if(!f){if(b.hasClass("raven-folder-root-closed")){c._expandRootFolder(b)}else{if(b.hasClass("raven-folder-open-a")){c._collapseRootFolder(b)}}}b=b.parents("li").first();c.unhighlightOutOfPathFolders(c.$el.find("li"));c._clearTreeDotLineStructure();c._removeActiveFolderStyle();c.addActiveFolderGlobalStyle(b);c.$el.find(".raven-folder-open-b").removeClass("raven-folder-open-b").addClass("raven-folder-open-c");c.$el.find(".raven-folder-closed-b").removeClass("raven-folder-closed-b").addClass("raven-folder-closed-c");c.setActiveFolder(b)},_keyupNameChange:function(c){var b=this.$el.find(c.target).closest("li");if(this._canCreateFolders(false)||this._canMoveEditFolders(false,b.attr("data-user-key"))){if(c.keyCode===13){this._confirmEditFolder(b)}else{if(c.keyCode===27){var d=b.find(".raven-folder-name").first().text();b.find(".raven-folder-name-input").first().val(d);b.find(".raven-folder-name-input").first().attr("placeholder","")}else{b.find(".raven-folder-name-input").first().attr("placeholder","")}}}},_blurNameChange:function(c){var b=this.$el.find(c.target).closest("li");if(this._canCreateFolders(false)||this._canMoveEditFolders(false,b.attr("data-user-key"))){this._confirmEditFolder(b)}},enableActions:function(){this.externalDisableActions=false;this._enableCreateFolder();this._enableEditFolder();this._enableDeleteFolder()},disableActions:function(){this.externalDisableActions=true;this._disableCreateFolder();this._disableEditFolder();this._disableDeleteFolder()},_canCreateFolders:function(b){if(b){return this.canCreateFolders&&!this.externalDisableActions}return this.canCreateFolders},_enableCreateFolder:function(){if(this._canCreateFolders(false)){this.$el.find("#raven-folder-create").attr("title","Create Folder").removeClass("raven-folder-create-disabled").addClass("raven-folder-create")}else{this.$el.find("#raven-folder-create").attr("title","You do not have permission to create folders.").removeClass("raven-folder-create").addClass("raven-folder-create-disabled")}},_disableCreateFolder:function(){if(this._canCreateFolders(false)){this.$el.find("#raven-folder-create").attr("title","").removeClass("raven-folder-create").addClass("raven-folder-create-disabled")}else{this.$el.find("#raven-folder-create").attr("title","You do not have permission to create folders.").removeClass("raven-folder-create").addClass("raven-folder-create-disabled")}},_adCanMoveFoldersPermission:function(c){const b=this;c.forEach(function(d){d.canMoveFolders=b._canMoveEditFolders(false,d.userKey)});return c},_canMoveEditFolders:function(c,b){const d=this.canMoveEditAllFolders||(this.canMoveEditOwnFolders&&this._isOwner(b));if(c){return d&&!this.externalDisableActions}return d},_enableEditFolder:function(){if(this._canMoveEditFolders(false,this._getCreatorName())){this.$el.find("#raven-folder-edit").attr("title","Edit Folder").removeClass("raven-folder-edit-disabled").addClass("raven-folder-edit")}else{this.$el.find("#raven-folder-edit").attr("title","You do not have permission to edit this folder.").removeClass("raven-folder-edit").addClass("raven-folder-edit-disabled")}},_disableEditFolder:function(){if(this._canMoveEditFolders(false,this._getCreatorName())){this.$el.find("#raven-folder-edit").attr("title","").removeClass("raven-folder-edit").addClass("raven-folder-edit-disabled")}else{this.$el.find("#raven-folder-edit").attr("title","You do not have permission to edit this folder.").removeClass("raven-folder-edit").addClass("raven-folder-edit-disabled")}},_canDeleteFolders:function(c,b){const d=this.canDeleteAllFolders||(this.canDeleteOwnFolders&&this._isOwner(b));if(c){return d&&!this.externalDisableActions}return d},_enableDeleteFolder:function(){if(this._canDeleteFolders(false,this._getCreatorName())){this.$el.find("#raven-folder-delete").attr("title","Delete Folder").removeClass("raven-folder-delete-disabled").addClass("raven-folder-delete")}else{this.$el.find("#raven-folder-delete").attr("title","You do not have permission to delete this folder.").removeClass("raven-folder-delete").addClass("raven-folder-delete-disabled")}},_disableDeleteFolder:function(){if(this._canDeleteFolders(false,this._getCreatorName())){this.$el.find("#raven-folder-delete").attr("title","").removeClass("raven-folder-delete").addClass("raven-folder-delete-disabled")}else{this.$el.find("#raven-folder-delete").attr("title","You do not have permission to delete this folder.").removeClass("raven-folder-delete").addClass("raven-folder-delete-disabled")}},_messageFlag:function(b){require("aui/flag")({type:"success",body:b,close:"auto"})}})})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:folder-picker-resources', location = '/templates/testrepository/picker.soy' */
// This file was automatically generated from picker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.TestRepository.Fields.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.TestRepository == 'undefined') { RAVEN.TestRepository = {}; }
if (typeof RAVEN.TestRepository.Fields == 'undefined') { RAVEN.TestRepository.Fields = {}; }


RAVEN.TestRepository.Fields.includeSubFolders = function(opt_data, opt_ignored) {
  return '<div id="' + soy.$$escapeHtml(opt_data.pickerId) + '-checkbox-wrapper" class="complementary-checkbox"><input id="' + soy.$$escapeHtml(opt_data.pickerId) + '-descendants-checkbox" type="checkbox"><label for="' + soy.$$escapeHtml(opt_data.pickerId) + '-descendants-checkbox" style="display: inline;">' + soy.$$escapeHtml('Include sub-folders') + '</label></div>';
};
if (goog.DEBUG) {
  RAVEN.TestRepository.Fields.includeSubFolders.soyTemplateName = 'RAVEN.TestRepository.Fields.includeSubFolders';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:folder-picker-resources', location = 'js/testrepository/picker/test-repository-picker.js' */
(function(a){RAVEN.namespace("RAVEN.TestRepository.Fields");RAVEN.TestRepository.Fields.FolderPicker=Backbone.View.extend({pickerId:null,repositoryPath:null,entityKey:null,folderJQLName:null,$picker:null,$selector:null,$tree:null,siblingDropdownElements:null,testRepositoryView:null,rootFolderName:null,label:null,allDescendants:null,includeRootInFolderPath:true,fullWidth:null,resizeTree:null,addTooltip:null,hasAllFolder:true,hasOrphansFolder:false,defaultSelectValue:"all-tests",defaultSelectLabel:"All",unscopedEvents:{"pickFolderEvt .raven-test-repository-folder-picker":"_pickFolderEvt","selectFolderSilentEvt .raven-test-repository-folder-picker":"_selectFolderSilentEvt","click.raven.test-repository.picker .raven-test-repository-folder-picker":"_showFolderPicker","click.raven.test-repository.picker .raven-test-repository-folder-tree":"_clickOnFolderTree","click.raven.test-repository.picker html":"_hideFolderPicker","clear.raven.test-repository.picker .raven-test-repository-folder-picker":"clearPicker","disable.raven.test-repository.picker .raven-test-repository-folder-picker":"disablePicker","enable.raven.test-repository.picker .raven-test-repository-folder-picker":"enablePicker"},initialize:function(b){if(b){_.extend(this,_.pick(b,"repositoryPath"));_.extend(this,_.pick(b,"entityKey"));_.extend(this,_.pick(b,"folderJQLName"));_.extend(this,_.pick(b,"$picker"));_.extend(this,_.pick(b,"siblingDropdownElements"));_.extend(this,_.pick(b,"rootFolderName"));_.extend(this,_.pick(b,"label"));_.extend(this,_.pick(b,"allDescendants"));_.extend(this,_.pick(b,"fullWidth"));_.extend(this,_.pick(b,"resizeTree"));_.extend(this,_.pick(b,"addTooltip"));_.extend(this,_.pick(b,"hasAllFolder"));_.extend(this,_.pick(b,"hasOrphansFolder"));_.extend(this,_.pick(b,"defaultSelectValue"));_.extend(this,_.pick(b,"defaultSelectLabel"));_.extend(this,_.pick(b,"includeRootInFolderPath"));if(this.$picker){this.pickerId=this.$picker.attr("id")}}else{console.log("Error: unable to init Test Repository Folder Picker");return null}this._initializeFolderPicker()},_initializeFolderPicker:function(){this._delegateUnscopedEvents();this.render();this.testRepositoryView=new RAVEN.TestRepository.Fields.TestRepositoryView({el:this.$tree,repositoryPath:this.repositoryPath,entityKey:this.entityKey,testRepositoryFolderPicker:a("#"+this.pickerId+"-picker"),rootFolderName:this.rootFolderName,pickerId:this.pickerId,hasAllFolder:this.hasAllFolder,hasOrphansFolder:this.hasOrphansFolder,defaultSelectValue:this.defaultSelectValue,defaultSelectLabel:this.defaultSelectLabel,allDescendants:this.allDescendants,includeRootInFolderPath:this.includeRootInFolderPath});this._initDomChangeEvt()},render:function(){var c=a("<input/>").attr({id:this.pickerId+"-field-name","class":"text aui-ss-field ajs-dirty-warning-exempt search-entry raven-tooltip",type:"text",readonly:"true",name:this.pickerId,"has-complementary-checkbox":true});var d=a("<input/>").attr({id:this.pickerId+"-field-id","class":"text aui-ss-field ajs-dirty-warning-exempt",type:"hidden"});var g=a("<span/>").attr({"class":"icon aui-ss-icon noloading drop-menu"});this.$selector=a("<div/>").attr({id:this.pickerId+"-picker","class":"aui-ss ajax-ss raven-test-repository-folder-picker","data-field-id":this.pickerId,"data-is-xray-jql":true,style:"width: 100%;"});this.$selector.append(c).append(d).append(g);this.$tree=a("<div/>").attr({id:this.pickerId+"-tree","class":"raven-test-repository-folder-tree"}).css({display:"none"});if(this.fullWidth){c.addClass("full-max-width");d.addClass("full-max-width");if(!this.resizeTree){this.$tree.addClass("field-full-width")}this.$selector.addClass("full-max-width aui-ss-select aui-ss-editing")}this.$picker.empty();if(this.label){var b=a("<label/>").attr({"for":this.pickerId+"-field-name",});var f=a("<span/>").attr({id:"tooltip-info-"+this.pickerId,"class":"aui-icon aui-icon-small aui-iconfont-info-filled test-repository-tooltip-info raven-tooltip"});b.html(this.addTooltip?this.label+f.prop("outerHTML"):this.label);this.$picker.append(b);if(this.addTooltip){this._initTooltip(this.$picker.find("#tooltip-info-"+this.pickerId),"Searching by folder is only available when a single project is selected.")}}this.$picker.append(this.$selector).append(this.$tree);if(this.allDescendants){var e=RAVEN.TestRepository.Fields.includeSubFolders({pickerId:this.pickerId});this.$picker.append(e)}},_isDropdownFilter:function(b){return a.inArray(b,this.siblingDropdownElements)>-1},clearPicker:function(){this.testRepositoryView.resetPicker()},setEntityKey:function(b){this.entityKey=b},resetFolderPicker:function(){this._undelegateUnscopedEvents();this._initializeFolderPicker()},buildJql:function(){var d=a("#"+this.$picker.attr("id")+"-field-name").val();var b=0;if(this.testRepositoryView._includesRootFolderInPath()){b++}if(d.indexOf("/")===0){b++}var c=d.split("/").slice(b);if(c&&c.length>0){return"issue in "+this.folderJQLName+' ("'+this.entityKey+'", "'+c.join("/")+'")'}return null},disablePicker:function(){this.clearPicker();this.$selector.addClass("picker-disable");this.$selector.addClass("no-pointer-events");this.$selector.find(".drop-menu").addClass("icon-disable");a("#"+this.$picker.attr("id")+"-field-name").attr("disabled","");if(this.allDescendants){a("#"+this.pickerId+"-descendants-checkbox").attr("disabled","")}},enablePicker:function(c,b){if(b){this.entityKey=b;this._unblockPicker();this._resetFolder();this.$selector.removeClass("picker-disable")}else{console.warn("Raven ProjectFolderPicker projectKey is undefined. The component will not be enabled.")}},_unblockPicker:function(){this.$selector.removeClass("picker-disable");this.$selector.removeClass("no-pointer-events");this.$selector.find(".drop-menu").removeClass("icon-disable");a("#"+this.$picker.attr("id")+"-field-name").removeAttr("disabled");if(this.allDescendants){a("#"+this.pickerId+"-descendants-checkbox").removeAttr("disabled")}},_resetFolder:function(){a("#"+this.pickerId+"-tree").remove();this.$tree=a("<div/>").attr({id:this.pickerId+"-tree","class":"raven-test-repository-folder-tree"}).css({display:"none"});this.$picker.append(this.$tree);if(this.testRepositoryView){this.testRepositoryView.destroy()}this.testRepositoryView=new RAVEN.TestRepository.Fields.TestRepositoryView({el:this.$tree,repositoryPath:this.repositoryPath,entityKey:this.entityKey,testRepositoryFolderPicker:a("#"+this.pickerId+"-picker"),rootFolderName:this.rootFolderName,pickerId:this.pickerId})},setSelectedFolder:function(b,c){this._selectFolderSilentEvt(null,b,c);this.$picker.trigger("changeFolderPick",[b,c])},_delegateUnscopedEvents:function(){var b=this;b._undelegateUnscopedEvents();a.each(this.unscopedEvents,function(e,f){var d=e.substring(0,e.indexOf(" "));var c=e.substring(e.indexOf(" ")+1);if(c!=="html"){c+="#"+b.pickerId+"-picker"}a(document).on(d,c,a.proxy(b[f],b))})},_undelegateUnscopedEvents:function(){a(document).off(".raven-test-repository-folder-picker#"+this.pickerId+"-picker");a(document).off(".raven-test-repository-folder-picker")},_initDomChangeEvt:function(){var b=this;a(window).bind("DOMSubtreeModified",function(c){if(b._isDropdownFilter(c.target.id)){b._hideFolderPicker()}})},_selectFolderSilentEvt:function(h,b,g){var f=this.$picker.attr("id");var d=this.$picker.find("#"+f+"-field-name");d.val(g);this._initTooltip(d,g);var c=this.$picker.find("#"+f+"-field-id");c.val(b)},_pickFolderEvt:function(d,b,c){this._selectFolderSilentEvt(d,b,c);this.$picker.trigger("changeFolderPick",[b,c]);this._hideFolderPicker()},_initTooltip:function(b,c){b.attr("title",c);AJS.$(b).tooltip()},showFolderPicker:function(){if(this.$tree.is(":hidden")){this._showPicker()}else{this._hideFolderPicker()}},_showFolderPicker:function(b){b.stopPropagation();this.showFolderPicker()},_showPicker:function(){this.$tree.show();this.$picker.find("input").first().addClass("active");this.$picker.trigger("raven-folder-picker-opened",[this])},_hideFolderPicker:function(b){if(!b||!b.target||this._isOutsideDialog(b.target)){this.$tree.hide();this.$picker.find("input").first().removeClass("active");this.$picker.trigger("raven-folder-picker-closed",[this])}},_isOutsideDialog:function(b){return this.$picker.find(b).length===0&&this.$picker[0]!==b},_clickOnFolderTree:function(b){b.stopPropagation()}});RAVEN.TestRepository.Fields.TestRepositoryView=Backbone.View.extend({el:null,pickerId:null,FOLDER_ROOT:"-1",defaultSelectValue:"all-tests",defaultSelectLabel:"All",FOLDER_ROOT_PATH:"Board",rootFolderName:null,folderView:null,entityKey:null,repositoryPath:null,testRepositoryFolderPicker:null,defaultFolderItemWidth:null,hasAllFolder:true,hasOrphansFolder:false,allDescendants:null,includeRootInFolderPath:true,MIN_FOLDER_NAME_WIDTH:250,TREE_SELECTOR_MIN_WIDTH:450,TREE_DOT_LINE_SIZE:36,initialize:function(c){if(c){_.extend(this,_.pick(c,"el"));_.extend(this,_.pick(c,"pickerId"));_.extend(this,_.pick(c,"repositoryPath"));_.extend(this,_.pick(c,"testRepositoryFolderPicker"));_.extend(this,_.pick(c,"entityKey"));_.extend(this,_.pick(c,"rootFolderName"));_.extend(this,_.pick(c,"hasAllFolder"));_.extend(this,_.pick(c,"hasOrphansFolder"));_.extend(this,_.pick(c,"defaultSelectValue"));_.extend(this,_.pick(c,"defaultSelectLabel"));_.extend(this,_.pick(c,"allDescendants"));_.extend(this,_.pick(c,"includeRootInFolderPath"))}else{console.log("Error: invalid repository path");return null}var b=this;this.$el.on({folderInitializedEvt:function(){b._initializeFilterPickerProperties()},folderActiveEvt:function(g,h){var f=b.folderView.buildFolderPath(h,b._includesRootFolderInPath());b.testRepositoryFolderPicker.trigger("pickFolderEvt",[h,f])},folderSelectEvt:function(f,g){b._increaseTreeWidth(g)},folderCollapseEvt:function(g,h,f){b._decreaseTreeWidth(h,f)}});var d=this.rootFolderName?this.rootFolderName:this.FOLDER_ROOT_PATH;this.folderView=new RAVEN.Folder.FolderView({el:this.$el,mainView:this,repositoryPath:this.repositoryPath,entityKey:this.entityKey,hasAllFolder:this.hasAllFolder,hasOrphansFolder:this.hasOrphansFolder,rootDescription:d,hasFolderActions:false})},destroy:function(){if(this.folderView){this.folderView.destroy()}},resetPicker:function(){this.resetPickerNoValueReset();this.testRepositoryFolderPicker.trigger("pickFolderEvt",[this.defaultSelectValue,this.defaultSelectLabel])},resetPickerNoValueReset:function(){this.folderView.activateAllFolderAndResetPath()},_initializeFilterPickerProperties:function(){var c=this.$el.find("#raven-test-repository-tree");c.children("ul").css("cssText","padding-left: 14px !important");c.children("ul").first().css("margin-top","14px");c.children("ul").last().css("margin-bottom","14px");c.css("overflow-x","auto");c.css("min-height","55px");var d="#"+this.folderView.FOLDER_ROOT;this.defaultFolderItemWidth=c.find(".raven-folder-item:not("+d+")").first().width();this.folderView.activateAllFolderAndResetPath();if(this.pickerId){var b=this.testRepositoryFolderPicker.find("#"+this.pickerId+"-field-name").val();if(!b){this.testRepositoryFolderPicker.trigger("selectFolderSilentEvt",[this.defaultSelectValue,this.defaultSelectLabel])}}},_increaseTreeWidth:function(g){var e=this.$el.find("#raven-test-repository-tree");var f=0;if(g!==this.defaultSelectValue){var b=e.find(".raven-activeFolder .raven-folders-view-mode").first();var c=b.width();if(c<this.MIN_FOLDER_NAME_WIDTH&&c>f){f=this.MIN_FOLDER_NAME_WIDTH-c}var d=e.find("."+this.defaultSelectValue);d.width(d.width()+f)}},_decreaseTreeWidth:function(f,c){var d=this.$el.find("#raven-test-repository-tree");var e=d.find("#"+f);var b=this;a.each(c.ids,function(k,j){if(e.find("#"+j).andSelf().length>0){var h=e.find(".raven-folder-item-structure").first().children(".raven-tree-dot-line-extension").length;var n=e.find(".raven-folder-item-structure").first().children(".raven-tree-dot-line").length;var l=h+n;var m=d.find("."+b.defaultSelectValue);var o=m.width();if(o>b.TREE_SELECTOR_MIN_WIDTH){var g=o-b.TREE_DOT_LINE_SIZE*(c.level-l);if(g<=b.TREE_SELECTOR_MIN_WIDTH){m.width(b.TREE_SELECTOR_MIN_WIDTH)}else{m.width(g)}}}})},_includesRootFolderInPath:function(){return this.allDescendants||this.includeRootInFolderPath}})})(AJS.$);;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.component.form.select2', location = 'aui.chunk.6a46c4082f29a6fd6bc5--45a2652d5835a7989256.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.component.form.select2"],{"02/N":function(e,t){!function(e){void 0===e.fn.each2&&e.extend(e.fn,{each2:function(t){for(var s=e([0]),i=-1,n=this.length;++i<n&&(s.context=s[0]=this[i])&&!1!==t.call(s[0],i,s););return this}})}(jQuery),function(e,t){"use strict";if(window.Select2===t){var s,i,n,o,a,c,l,r={x:0,y:0},h={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case h.LEFT:case h.RIGHT:case h.UP:case h.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case h.SHIFT:case h.CTRL:case h.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return(e=e.which?e.which:e)>=112&&e<=123}},u="<div class='select2-measure-scrollbar'></div>",d={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z"};c=e(document),o=function(){var e=1;return function(){return e++}}(),c.on("mousemove",function(e){r.x=e.pageX,r.y=e.pageY}),s=A(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(s){var i,n;this.opts=s=this.prepareOpts(s),this.id=s.id,s.element.data("select2")!==t&&null!==s.element.data("select2")&&s.element.data("select2").destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(s.element.attr("id")||"autogen"+o()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=function(e){var t,s=!1;return function(){return!1===s&&(t=e(),s=!0),t}}(function(){return s.element.closest("body")}),S(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",s.element.attr("style")),this.container.css(P(s.containerCss)),this.container.addClass(P(s.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",b),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),S(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(P(s.dropdownCssClass)),this.dropdown.data("select2",this),this.dropdown.on("click",b),this.results=i=this.container.find(".select2-results"),this.search=n=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",b),function(s){s.on("mousemove",function(s){var i=r;i!==t&&i.x===s.pageX&&i.y===s.pageY||e(s.target).trigger("mousemove-filtered",s)})}(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",".select2-results",this.bind(this.highlightUnderEvent)),function(e,t){var s=C(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){f(e.target,t.get())>=0&&s(e)})}(80,this.results),this.dropdown.on("scroll-debounced",".select2-results",this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&i.mousewheel(function(e,t,s,n){var o=i.scrollTop();n>0&&o-n<=0?(i.scrollTop(0),b(e)):n<0&&i.get(0).scrollHeight-i.scrollTop()+n<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),b(e))}),w(n),n.on("keyup-change input paste",this.bind(this.updateResults)),n.on("focus",function(){n.addClass("select2-focused")}),n.on("blur",function(){n.removeClass("select2-focused")}),this.dropdown.on("mouseup",".select2-results",this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==s.maximumInputLength&&this.search.attr("maxlength",s.maximumInputLength);var a=s.element.prop("disabled");a===t&&(a=!1),this.enable(!a);var c=s.element.prop("readonly");c===t&&(c=!1),this.readonly(c),l=l||function(){var t=e(u);t.appendTo("body");var s={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),s}(),this.autofocus=s.element.prop("autofocus"),s.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.nextSearchTerm=t},destroy:function(){var e=this.opts.element,s=e.data("select2");this.close(),this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),s!==t&&(s.container.remove(),s.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show())},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:g(e.attr("locked"),"locked")||g(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(s){var i,n,o,a,c=this;if("select"===(i=s.element).get(0).tagName.toLowerCase()&&(this.select=n=s.element),n&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in s)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),"function"!=typeof(s=e.extend({},{populateResults:function(i,n,o){var a,l=this.opts.id;(a=function(i,n,r){var h,u,d,p,f,g,m,v,w,C;for(h=0,u=(i=s.sortResults(i,n,o)).length;h<u;h+=1)p=!(f=!0===(d=i[h]).disabled)&&l(d)!==t,g=d.children&&d.children.length>0,(m=e("<li></li>")).addClass("select2-results-dept-"+r),m.addClass("select2-result"),m.addClass(p?"select2-result-selectable":"select2-result-unselectable"),f&&m.addClass("select2-disabled"),g&&m.addClass("select2-result-with-children"),m.addClass(c.opts.formatResultCssClass(d)),(v=e(document.createElement("div"))).addClass("select2-result-label"),(C=s.formatResult(d,v,o,c.opts.escapeMarkup))!==t&&v.html(C),m.append(v),g&&((w=e("<ul></ul>")).addClass("select2-result-sub"),a(d.children,w,r+1),m.append(w)),m.data("select2-data",d),n.append(m)})(n,i,0)}},e.fn.select2.defaults,s)).id&&(o=s.id,s.id=function(e){return e[o]}),e.isArray(s.element.data("select2Tags"))){if("tags"in s)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+s.element.attr("id");s.tags=s.element.data("select2Tags")}if(n?(s.query=this.bind(function(e){var s,n,o,a={results:[],more:!1},l=e.term;o=function(t,s){var i;t.is("option")?e.matcher(l,t.text(),t)&&s.push(c.optionToData(t)):t.is("optgroup")&&(i=c.optionToData(t),t.children().each2(function(e,t){o(t,i.children)}),i.children.length>0&&s.push(i))},s=i.children(),this.getPlaceholder()!==t&&s.length>0&&(n=this.getPlaceholderOption())&&(s=s.not(n)),s.each2(function(e,t){o(t,a.results)}),e.callback(a)}),s.id=function(e){return e.id},s.formatResultCssClass=function(e){return e.css}):"query"in s||("ajax"in s?((a=s.element.data("ajax-url"))&&a.length>0&&(s.ajax.url=a),s.query=x.call(s.element,s.ajax)):"data"in s?s.query=T(s.data):"tags"in s&&(s.query=O(s.tags),s.createSearchChoice===t&&(s.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),s.initSelection===t&&(s.initSelection=function(t,i){var n=[];e(m(t.val(),s.separator)).each(function(){var t={id:this,text:this},i=s.tags;e.isFunction(i)&&(i=i()),e(i).each(function(){if(g(this.id,t.id))return t=this,!1}),n.push(t)}),i(n)}))),"function"!=typeof s.query)throw"query function not defined for Select2 "+s.element.attr("id");return s},monitorSource:function(){var e,s,i=this.opts.element;i.on("change.select2",this.bind(function(e){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),e=this.bind(function(){var e=i.prop("disabled");e===t&&(e=!1),this.enable(!e);var s=i.prop("readonly");s===t&&(s=!1),this.readonly(s),S(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(P(this.opts.containerCssClass)),S(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(P(this.opts.dropdownCssClass))}),i.on("propertychange.select2",e),this.mutationCallback===t&&(this.mutationCallback=function(t){t.forEach(e)}),(s=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new s(this.mutationCallback),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var s=e.Event("select2-selecting",{val:this.id(t),object:t});return this.opts.element.trigger(s),!s.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){return e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface(),!0)},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,s,i,n,o,a=this.dropdown,c=this.container.offset(),r=this.container.outerHeight(!1),h=this.container.outerWidth(!1),u=a.outerHeight(!1),d=e(window),p=d.width(),f=d.height(),g=d.scrollLeft()+p,m=d.scrollTop()+f,v=c.top+r,w=c.left,C=v+u<=m,b=c.top-u>=this.body().scrollTop(),S=a.outerWidth(!1),y=w+S<=g;a.hasClass("select2-drop-above")?(s=!0,!b&&C&&(i=!0,s=!1)):(s=!1,!C&&b&&(i=!0,s=!0)),i&&(a.hide(),c=this.container.offset(),r=this.container.outerHeight(!1),h=this.container.outerWidth(!1),u=a.outerHeight(!1),g=d.scrollLeft()+p,m=d.scrollTop()+f,v=c.top+r,y=(w=c.left)+(S=a.outerWidth(!1))<=g,a.show()),this.opts.dropdownAutoWidth?(o=e(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),(S=a.outerWidth(!1)+(o.scrollHeight===o.clientHeight?0:l.width))>h?h=S:S=h,y=w+S<=g):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body().css("position")&&(v-=(t=this.body().offset()).top,w-=t.left),y||(w=c.left+h-S),n={left:w,width:h},s?(n.bottom=f-c.top,n.top="auto",this.container.addClass("select2-drop-above"),a.addClass("select2-drop-above")):(n.top=v,n.bottom="auto",this.container.removeClass("select2-drop-above"),a.removeClass("select2-drop-above")),n=e.extend(n,P(this.opts.dropdownCss)),a.css(n)},shouldOpen:function(){var t;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),!0)},opening:function(){var t,s=this.containerId,i="scroll."+s,n="resize."+s,o="orientationchange."+s;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),0==(t=e("#select2-drop-mask")).length&&((t=e(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body()),t.on("mousedown touchstart click",function(t){var s,i=e("#select2-drop");i.length>0&&((s=i.data("select2")).opts.selectOnBlur&&s.selectHighlighted({noFocus:!0}),s.close({focus:!0}),t.preventDefault(),t.stopPropagation())})),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var a=this;this.container.parents().add(window).each(function(){e(this).on(n+" "+i+" "+o,function(e){a.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerId,s="scroll."+t,i="resize."+t,n="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(s).off(i).off(n)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return P(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var t,s,i,n,o,a,c,l=this.results;(s=this.highlight())<0||(0!=s?(t=this.findHighlightableChoices().find(".select2-result-label"),n=(i=e(t[s])).offset().top+i.outerHeight(!0),s===t.length-1&&(c=l.find("li.select2-more-results")).length>0&&(n=c.offset().top+c.outerHeight(!0)),n>(o=l.offset().top+l.outerHeight(!0))&&l.scrollTop(l.scrollTop()+(n-o)),(a=i.offset().top-l.offset().top)<0&&"none"!=i.css("display")&&l.scrollTop(l.scrollTop()+a)):l.scrollTop(0))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled, .select2-selected)")},moveHighlight:function(t){for(var s=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<s.length;){var n=e(s[i+=t]);if(n.hasClass("select2-result-selectable")&&!n.hasClass("select2-disabled")&&!n.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(t){var s,i,n=this.findHighlightableChoices();if(0===arguments.length)return f(n.filter(".select2-highlighted")[0],n.get());t>=n.length&&(t=n.length-1),t<0&&(t=0),this.removeHighlight(),(s=e(n[t])).addClass("select2-highlighted"),this.ensureHighlightVisible(),(i=s.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var s=e(t.target).closest(".select2-result-selectable");if(s.length>0&&!s.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(s))}else 0==s.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),s=this.resultsPage+1,i=this,n=this.search.val(),o=this.context;0!==t.length&&t.offset().top-e.offset().top-e.height()<=this.opts.loadMorePadding&&(t.addClass("select2-active"),this.opts.query({element:this.opts.element,term:n,page:s,context:o,matcher:this.opts.matcher,callback:this.bind(function(a){i.opened()&&(i.opts.populateResults.call(this,e,a.results,{term:n,page:s,context:o}),i.postprocessResults(a,!1,!1),!0===a.more?(t.detach().appendTo(e).text(i.opts.formatLoadMore(s+1)),window.setTimeout(function(){i.loadMoreIfNeeded()},10)):t.remove(),i.positionDropdown(),i.resultsPage=s,i.context=a.context,this.opts.element.trigger({type:"select2-loaded",items:a}))})}))},tokenize:function(){},updateResults:function(s){var i,n,o,a=this.search,c=this.results,l=this.opts,r=this,h=a.val(),u=e.data(this.container,"select2-last-term");if((!0===s||!u||!g(h,u))&&(e.data(this.container,"select2-last-term",h),!0===s||!1!==this.showSearchInput&&this.opened())){o=++this.queryCount;var d=this.getMaximumSelectionSize();if(!(d>=1&&(i=this.data(),e.isArray(i)&&i.length>=d&&k(l.formatSelectionTooBig,"formatSelectionTooBig"))))return a.val().length<l.minimumInputLength?(k(l.formatInputTooShort,"formatInputTooShort")?f("<li class='select2-no-results'>"+l.formatInputTooShort(a.val(),l.minimumInputLength)+"</li>"):f(""),void(s&&this.showSearch&&this.showSearch(!0))):void(l.maximumInputLength&&a.val().length>l.maximumInputLength?k(l.formatInputTooLong,"formatInputTooLong")?f("<li class='select2-no-results'>"+l.formatInputTooLong(a.val(),l.maximumInputLength)+"</li>"):f(""):(l.formatSearching&&0===this.findHighlightableChoices().length&&f("<li class='select2-searching'>"+l.formatSearching()+"</li>"),a.addClass("select2-active"),this.removeHighlight(),(n=this.tokenize())!=t&&null!=n&&a.val(n),this.resultsPage=1,l.query({element:l.element,term:a.val(),page:this.resultsPage,context:null,matcher:l.matcher,callback:this.bind(function(i){var n;o==this.queryCount&&(this.opened()?(this.context=i.context===t?null:i.context,this.opts.createSearchChoice&&""!==a.val()&&(n=this.opts.createSearchChoice.call(r,a.val(),i.results))!==t&&null!==n&&r.id(n)!==t&&null!==r.id(n)&&0===e(i.results).filter(function(){return g(r.id(this),r.id(n))}).length&&i.results.unshift(n),0===i.results.length&&k(l.formatNoMatches,"formatNoMatches")?f("<li class='select2-no-results'>"+l.formatNoMatches(a.val())+"</li>"):(c.empty(),r.opts.populateResults.call(this,c,i.results,{term:a.val(),page:this.resultsPage,context:null}),!0===i.more&&k(l.formatLoadMore,"formatLoadMore")&&(c.append("<li class='select2-more-results'>"+r.opts.escapeMarkup(l.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){r.loadMoreIfNeeded()},10)),this.postprocessResults(i,s),p(),this.opts.element.trigger({type:"select2-loaded",items:i}))):this.search.removeClass("select2-active"))})})));f("<li class='select2-selection-limit'>"+l.formatSelectionTooBig(d)+"</li>")}function p(){a.removeClass("select2-active"),r.positionDropdown()}function f(e){c.html(e),p()}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){!function(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,s=e[0],i=e.val().length;e.focus(),e.is(":visible")&&s===document.activeElement&&(s.setSelectionRange?s.setSelectionRange(i,i):s.createTextRange&&((t=s.createTextRange()).collapse(!1),t.select()))},0)}(this.search)},selectHighlighted:function(e){var t=this.highlight(),s=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");s?(this.highlight(t),this.onSelect(s,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var e=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&e||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.text()&&""===e.val())return e}},initContainerWidth:function(){var s=function(){var s,i,n,o,a;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if((s=this.opts.element.attr("style"))!==t)for(o=0,a=(i=s.split(";")).length;o<a;o+=1)if(null!==(n=i[o].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&n.length>=1)return n[1];return"resolve"===this.opts.width?(s=this.opts.element.css("width")).indexOf("%")>0?s:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==s&&this.container.css("width",s)}}),i=A(s,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow'><b></b></span>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var s,i,n;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.search.focus(),(s=this.search.get(0)).createTextRange?((i=s.createTextRange()).collapse(!1),i.select()):s.setSelectionRange&&(n=this.search.val().length,s.setSelectionRange(n,n)),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(e){this.opened()&&(this.parent.close.apply(this,arguments),e=e||{focus:!0},this.focusser.removeAttr("disabled"),e.focus&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var t,s=this.container,i=this.dropdown;this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=s.find(".select2-choice"),this.focusser=s.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+o()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled())if(e.which!==h.PAGE_UP&&e.which!==h.PAGE_DOWN)switch(e.which){case h.UP:case h.DOWN:return this.moveHighlight(e.which===h.UP?-1:1),void b(e);case h.ENTER:return this.selectHighlighted(),void b(e);case h.TAB:return void this.selectHighlighted({noFocus:!0});case h.ESC:return this.cancel(e),void b(e)}else b(e)})),this.search.on("blur",this.bind(function(e){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==h.TAB&&!h.isControl(e)&&!h.isFunctionKey(e)&&e.which!==h.ESC){if(!1!==this.opts.openOnEnter||e.which!==h.ENTER){if(e.which==h.DOWN||e.which==h.UP||e.which==h.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void b(e)}return e.which==h.DELETE||e.which==h.BACKSPACE?(this.opts.allowClear&&this.clear(),void b(e)):void 0}b(e)}})),w(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),function(e){e.preventDefault(),e.stopImmediatePropagation()}(e),this.close(),this.selection.focus())})),t.on("mousedown",this.bind(function(t){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),b(t)})),i.on("mousedown",this.bind(function(){this.search.focus()})),t.on("focus",this.bind(function(e){b(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var s=this.selection.data("select2-data");if(s){var i=e.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var n=this.getPlaceholderOption();this.opts.element.val(n?n.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==t&&(this.opts.element.trigger({type:"select2-removed",val:this.id(s),choice:s}),this.triggerChange({removed:s}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(s){s!==t&&null!==s&&(e.updateSelection(s),e.close(),e.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var e;return!!this.getPlaceholder()&&((e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val())},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),s=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=e.find("option").filter(function(){return this.selected});t(s.optionToData(i))}:"data"in t&&(t.initSelection=t.initSelection||function(s,i){var n=s.val(),o=null;t.query({matcher:function(e,s,i){var a=g(n,t.id(i));return a&&(o=i),a},callback:e.isFunction(i)?function(){i(o)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(t,s,i){var n=0,o=this;if(this.findHighlightableChoices().each2(function(e,t){if(g(o.id(t.data("select2-data")),o.opts.element.val()))return n=e,!1}),!1!==i&&(!0===s&&n>=0?this.highlight(n):this.highlight(0)),!0===s){var a=this.opts.minimumResultsForSearch;a>=0&&this.showSearch(function t(s){var i=0;return e.each(s,function(e,s){s.children?i+=t(s.children):i++}),i}(t.results)>=a)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var s=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||this.focusser.focus(),g(s,this.id(e))||this.triggerChange({added:e,removed:i})}},updateSelection:function(e){var s,i,n=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),n.empty(),null!==e&&(s=this.opts.formatSelection(e,n,this.opts.escapeMarkup)),s!==t&&n.append(s),(i=this.opts.formatSelectionCssClass(e,n))!==t&&n.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,s=!1,i=null,n=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(s=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return i=n.optionToData(t),!1}),this.updateSelection(i),this.setPlaceholder(),s&&this.triggerChange({added:i,removed:o});else{if(!e&&0!==e)return void this.clear(s);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){n.opts.element.val(e?n.id(e):""),n.updateSelection(e),n.setPlaceholder(),s&&n.triggerChange({added:e,removed:o})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var s,i=!1;if(0===arguments.length)return(s=this.selection.data("select2-data"))==t&&(s=null),s;arguments.length>1&&(i=arguments[1]),e?(s=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:s})):this.clear(i)}}),n=A(s,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),s=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=[];e.find("option").filter(function(){return this.selected}).each2(function(e,t){i.push(s.optionToData(t))}),t(i)}:"data"in t&&(t.initSelection=t.initSelection||function(s,i){var n=m(s.val(),t.separator),o=[];t.query({matcher:function(s,i,a){var c=e.grep(n,function(e){return g(e,t.id(a))}).length;return c&&o.push(a),c},callback:e.isFunction(i)?function(){for(var e=[],s=0;s<n.length;s++)for(var a=n[s],c=0;c<o.length;c++){var l=o[c];if(g(a,t.id(l))){e.push(l),o.splice(c,1);break}}i(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var t,s=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(s);var i=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(t){i.search[0].focus(),i.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+o()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(s){if(this.isInterfaceEnabled()){++this.keydowns;var i=t.find(".select2-search-choice-focus"),n=i.prev(".select2-search-choice:not(.select2-locked)"),o=i.next(".select2-search-choice:not(.select2-locked)"),a=function(t){var s=0,i=0;if("selectionStart"in(t=e(t)[0]))s=t.selectionStart,i=t.selectionEnd-s;else if("selection"in document){t.focus();var n=document.selection.createRange();i=document.selection.createRange().text.length,n.moveStart("character",-t.value.length),s=n.text.length-i}return{offset:s,length:i}}(this.search);if(i.length&&(s.which==h.LEFT||s.which==h.RIGHT||s.which==h.BACKSPACE||s.which==h.DELETE||s.which==h.ENTER)){var c=i;return s.which==h.LEFT&&n.length?c=n:s.which==h.RIGHT?c=o.length?o:null:s.which===h.BACKSPACE?(this.unselect(i.first()),this.search.width(10),c=n.length?n:o):s.which==h.DELETE?(this.unselect(i.first()),this.search.width(10),c=o.length?o:null):s.which==h.ENTER&&(c=null),this.selectChoice(c),b(s),void(c&&c.length||this.open())}if((s.which===h.BACKSPACE&&1==this.keydowns||s.which==h.LEFT)&&0==a.offset&&!a.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void b(s);if(this.selectChoice(null),this.opened())switch(s.which){case h.UP:case h.DOWN:return this.moveHighlight(s.which===h.UP?-1:1),void b(s);case h.ENTER:return this.selectHighlighted(),void b(s);case h.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case h.ESC:return this.cancel(s),void b(s)}if(s.which!==h.TAB&&!h.isControl(s)&&!h.isFunctionKey(s)&&s.which!==h.BACKSPACE&&s.which!==h.ESC){if(s.which===h.ENTER){if(!1===this.opts.openOnEnter)return;if(s.altKey||s.ctrlKey||s.shiftKey||s.metaKey)return}this.open(),s.which!==h.PAGE_UP&&s.which!==h.PAGE_DOWN||b(s),s.which===h.ENTER&&b(s)}}})),this.search.on("keyup",this.bind(function(e){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",s,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",s,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(s){s!==t&&null!==s&&(e.updateSelection(s),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),s=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(s>0?s:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var s=[],i=[],n=this;e(t).each(function(){f(n.id(this),s)<0&&(s.push(n.id(this)),i.push(this))}),t=i,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){n.addSelectedChoice(this)}),n.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),!this.select&&this.opts.closeOnSelect||this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(s){var i,n,o=!s.locked,a=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),c=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=o?a:c,r=this.id(s),h=this.getVal();(i=this.opts.formatSelection(s,l.find("div"),this.opts.escapeMarkup))!=t&&l.find("div").replaceWith("<div>"+i+"</div>"),(n=this.opts.formatSelectionCssClass(s,l.find("div")))!=t&&l.addClass(n),o&&l.find(".select2-search-choice-close").on("mousedown",b).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),b(t))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",s),l.insertBefore(this.searchContainer),h.push(r),this.setVal(h)},unselect:function(t){var s,i,n=this.getVal();if(0===(t=t.closest(".select2-search-choice")).length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(s=t.data("select2-data")){for(;(i=f(this.id(s),n))>=0;)n.splice(i,1),this.setVal(n),this.select&&this.postprocessResults();var o=e.Event("select2-removing");o.val=this.id(s),o.choice=s,this.opts.element.trigger(o),o.isDefaultPrevented()||(t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(s),choice:s}),this.triggerChange({removed:s}))}},postprocessResults:function(e,t,s){var i=this.getVal(),n=this.results.find(".select2-result"),o=this.results.find(".select2-result-with-children"),a=this;n.each2(function(e,t){f(a.id(t.data("select2-data")),i)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),o.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&!1!==s&&a.highlight(0),!this.opts.createSearchChoice&&!n.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&k(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+a.opts.formatNoMatches(a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-v(this.search)},resizeSearch:function(){var t,s,i,n,o=v(this.search);t=function(t){if(!a){var s=t[0].currentStyle||window.getComputedStyle(t[0],null);(a=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:s.fontSize,fontFamily:s.fontFamily,fontStyle:s.fontStyle,fontWeight:s.fontWeight,letterSpacing:s.letterSpacing,textTransform:s.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),e("body").append(a)}return a.text(t.val()),a.width()}(this.search)+10,s=this.search.offset().left,(n=(i=this.selection.width())-(s-this.selection.offset().left)-o)<t&&(n=i-o),n<40&&(n=i-o),n<=0&&(n=t),this.search.width(Math.floor(n))},getVal:function(){var e;return this.select?null===(e=this.select.val())?[]:e:m(e=this.opts.element.val(),this.opts.separator)},setVal:function(t){var s;this.select?this.select.val(t):(s=[],e(t).each(function(){f(this,s)<0&&s.push(this)}),this.opts.element.val(0===s.length?"":s.join(this.opts.separator)))},buildChangeDetails:function(e,t){t=t.slice(0),e=e.slice(0);for(var s=0;s<t.length;s++)for(var i=0;i<e.length;i++)g(this.opts.id(t[s]),this.opts.id(e[i]))&&(t.splice(s,1),s>0&&s--,e.splice(i,1),i--);return{added:t,removed:e}},val:function(s,i){var n,o=this;if(0===arguments.length)return this.getVal();if((n=this.data()).length||(n=[]),!s&&0!==s)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:n}));if(this.setVal(s),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(n,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var s=e.map(t,o.id);o.setVal(s),o.updateSelection(t),o.clearSearch(),i&&o.triggerChange(o.buildChangeDetails(n,o.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],s=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(s.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,s){var i,n,o=this;if(0===arguments.length)return this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get();n=this.data(),t||(t=[]),i=e.map(t,function(e){return o.opts.id(e)}),this.setVal(i),this.updateSelection(t),this.clearSearch(),s&&this.triggerChange(this.buildChangeDetails(n,this.data()))}}),e.fn.select2=function(){var s,o,a,c,l,r=Array.prototype.slice.call(arguments,0),h=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],u=["opened","isFocused","container","dropdown"],d=["val","data"],p={search:"externalSearch"};return this.each(function(){if(0===r.length||"object"==typeof r[0])(s=0===r.length?{}:e.extend({},r[0])).element=e(this),"select"===s.element.get(0).tagName.toLowerCase()?l=s.element.prop("multiple"):(l=s.multiple||!1,"tags"in s&&(s.multiple=l=!0)),(o=l?new n:new i).init(s);else{if("string"!=typeof r[0])throw"Invalid arguments to select2 plugin: "+r;if(f(r[0],h)<0)throw"Unknown method: "+r[0];if(c=t,(o=e(this).data("select2"))===t)return;if("container"===(a=r[0])?c=o.container:"dropdown"===a?c=o.dropdown:(p[a]&&(a=p[a]),c=o[a].apply(o,r.slice(1))),f(r[0],u)>=0||f(r[0],d)&&1==r.length)return!1}}),c===t?this:c},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,s,i){var n=[];return y(e.text,s.term,n,i),n.join("")},formatSelection:function(e,s,i){return e?i(e.text):t},sortResults:function(e,t,s){return e},formatResultCssClass:function(e){return t},formatSelectionCssClass:function(e,s){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var s=t-e.length;return"Please enter "+s+" more character"+(1==s?"":"s")},formatInputTooLong:function(e,t){var s=e.length-t;return"Please delete "+s+" character"+(1==s?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(e){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return p(""+t).toUpperCase().indexOf(p(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:function(e,s,i,n){var o,a,c,l,r,h=e,u=!1;if(!n.createSearchChoice||!n.tokenSeparators||n.tokenSeparators.length<1)return t;for(;;){for(a=-1,c=0,l=n.tokenSeparators.length;c<l&&(r=n.tokenSeparators[c],!((a=e.indexOf(r))>=0));c++);if(a<0)break;if(o=e.substring(0,a),e=e.substring(a+r.length),o.length>0&&(o=n.createSearchChoice.call(this,o,s))!==t&&null!==o&&n.id(o)!==t&&null!==n.id(o)){for(u=!1,c=0,l=s.length;c<l;c++)if(g(n.id(o),n.id(s[c]))){u=!0;break}u||i(o)}}return h!==e?e:void 0},escapeMarkup:E,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,s){return t}},e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:x,local:T,tags:O},util:{debounce:C,markMatch:y,escapeMarkup:E,stripDiacritics:p},class:{abstract:s,single:i,multi:n}}}function p(e){var t,s,i,n;if(!e||e.length<1)return e;for(t="",s=0,i=e.length;s<i;s++)n=e.charAt(s),t+=d[n]||n;return t}function f(e,t){for(var s=0,i=t.length;s<i;s+=1)if(g(e,t[s]))return s;return-1}function g(e,s){return e===s||e!==t&&s!==t&&(null!==e&&null!==s&&(e.constructor===String?e+""==s+"":s.constructor===String&&s+""==e+""))}function m(t,s){var i,n,o;if(null===t||t.length<1)return[];for(n=0,o=(i=t.split(s)).length;n<o;n+=1)i[n]=e.trim(i[n]);return i}function v(e){return e.outerWidth(!1)-e.width()}function w(s){var i="keyup-change-value";s.on("keydown",function(){e.data(s,i)===t&&e.data(s,i,s.val())}),s.on("keyup",function(){var n=e.data(s,i);n!==t&&s.val()!==n&&(e.removeData(s,i),s.trigger("keyup-change"))})}function C(e,s,i){var n;return i=i||t,function(){var t=arguments;window.clearTimeout(n),n=window.setTimeout(function(){s.apply(i,t)},e)}}function b(e){e.preventDefault(),e.stopPropagation()}function S(t,s,i){var n,o,a=[];(n=t.attr("class"))&&e((n=""+n).split(" ")).each2(function(){0===this.indexOf("select2-")&&a.push(this)}),(n=s.attr("class"))&&e((n=""+n).split(" ")).each2(function(){0!==this.indexOf("select2-")&&(o=i(this))&&a.push(o)}),t.attr("class",a.join(" "))}function y(e,t,s,i){var n=p(e.toUpperCase()).indexOf(p(t.toUpperCase())),o=t.length;n<0?s.push(i(e)):(s.push(i(e.substring(0,n))),s.push("<span class='select2-match'>"),s.push(i(e.substring(n,n+o))),s.push("</span>"),s.push(i(e.substring(n+o,e.length))))}function E(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function x(s){var i,n=null,o=s.quietMillis||100,a=s.url,c=this;return function(l){window.clearTimeout(i),i=window.setTimeout(function(){var i=s.data,o=a,r=s.transport||e.fn.select2.ajaxDefaults.transport,h={type:s.type||"GET",cache:s.cache||!1,jsonpCallback:s.jsonpCallback||t,dataType:s.dataType||"json"},u=e.extend({},e.fn.select2.ajaxDefaults.params,h);i=i?i.call(c,l.term,l.page,l.context):null,o="function"==typeof o?o.call(c,l.term,l.page,l.context):o,n&&n.abort(),s.params&&(e.isFunction(s.params)?e.extend(u,s.params.call(c)):e.extend(u,s.params)),e.extend(u,{url:o,dataType:s.dataType,data:i,success:function(e){var t=s.results(e,l.page);l.callback(t)}}),n=r.call(c,u)},o)}}function T(t){var s,i,n=t,o=function(e){return""+e.text};e.isArray(n)&&(n={results:i=n}),!1===e.isFunction(n)&&(i=n,n=function(){return i});var a=n();return a.text&&(o=a.text,e.isFunction(o)||(s=a.text,o=function(e){return e[s]})),function(t){var s,i=t.term,a={results:[]};""!==i?(s=function(n,a){var c,l;if((n=n[0]).children){for(l in c={},n)n.hasOwnProperty(l)&&(c[l]=n[l]);c.children=[],e(n.children).each2(function(e,t){s(t,c.children)}),(c.children.length||t.matcher(i,o(c),n))&&a.push(c)}else t.matcher(i,o(n),n)&&a.push(n)},e(n().results).each2(function(e,t){s(t,a.results)}),t.callback(a)):t.callback(n())}}function O(s){var i=e.isFunction(s);return function(n){var o=n.term,a={results:[]};e(i?s():s).each(function(){var e=this.text!==t,s=e?this.text:this;(""===o||n.matcher(o,s))&&a.results.push(e?this:{id:this,text:this})}),n.callback(a)}}function k(t,s){if(e.isFunction(t))return!0;if(!t)return!1;throw new Error(s+" must be a function or a falsy value")}function P(t){return e.isFunction(t)?t():t}function A(t,s){var i=function(){};return(i.prototype=new t).constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,s),i}}(jQuery)},cpPd:function(e,t,s){},tNzr:function(e,t,s){},tW0B:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s("6fSn"),s("tNzr"),s("cpPd"),s("vX7Z")},vX7Z:function(e,t,s){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(s("+x/D"));s("02/N");var n=i.default.fn.select2,o="aui-select2-drop aui-dropdown2 aui-style-default";i.default.fn.auiSelect2=function(e){var t;if(i.default.isPlainObject(e)){var s=i.default.extend({},e),a=s.hasAvatar?" aui-has-avatar":"";s.containerCssClass="aui-select2-container"+a+(s.containerCssClass?" "+s.containerCssClass:""),s.dropdownCssClass=o+a+(s.dropdownCssClass?" "+s.dropdownCssClass:""),(t=Array.prototype.slice.call(arguments,1)).unshift(s)}else t=arguments.length?arguments:[{containerCssClass:"aui-select2-container",dropdownCssClass:o}];return n.apply(this,t)}}},[["tW0B","runtime","aui.splitchunk.172ffb6da7","aui.splitchunk.b0831cc7d0","aui.splitchunk.572a8bf5cd","aui.splitchunk.fbd1a5ab27","aui.splitchunk.d49cf794d2","aui.splitchunk.336ae4f9e7","aui.splitchunk.fb15cffa72","aui.splitchunk.56dfb54d0c","aui.splitchunk.908fe798b4","aui.splitchunk.462ee5f9ef","aui.splitchunk.50dca3e042"]]]);
//# sourceMappingURL=aui.chunk.6a46c4082f29a6fd6bc5--45a2652d5835a7989256.js.map;
;
/* module-key = 'com.xpandit.plugins.xray:raven-checkbox-multi-select', location = '/js/field/checkbox-multi-select.js' */
(function(a){RAVEN.namespace("RAVEN.Field.CheckboxMultiSelect");RAVEN.Field.CheckboxMultiSelectEvents={ITEM_PRE_SELECT:"itemPreSelectedEvt",ITEM_PRE_UNSELECT:"itemPreUnselectedEvt",ITEM_SELECTED:"itemSelectedEvt",ITEM_UNSELECTED:"itemUnselectedEvt",CHECKBOX_MULTI_SELECT_UPDATED:"checkboxMultiSelectUpdatedEvt"};RAVEN.Field.CheckboxMultiSelectView=Backbone.View.extend({el:null,id:null,selector:null,title:"",events:{},selectedItems:null,selectedItemsId:null,preSelectedLabels:null,fixedTitle:null,resetSelectedItems:null,isUpward:null,maxResultsDisplayed:null,items:null,groupLabel:null,placeholder:null,url:null,originalState:null,saveStateOnChange:true,unscopedEvents:{"click.raven.checkbox-multi-select html":"_triggerCheckboxSelector",},itemPreSelectFunction:function(b,d,e,c){a(document).trigger(RAVEN.Field.CheckboxMultiSelectEvents.ITEM_PRE_SELECT,[d,e,c])},itemPreUnselectFunction:function(b,e,f,c,d){a(document).trigger(RAVEN.Field.CheckboxMultiSelectEvents.ITEM_PRE_UNSELECT,[e,f,c,d])},initialize:function(d){if(d){_.extend(this,_.pick(d,"url"));_.extend(this,_.pick(d,"placeholder"));_.extend(this,_.pick(d,"groupLabel"));_.extend(this,_.pick(d,"items"));_.extend(this,_.pick(d,"maxResultsDisplayed"));_.extend(this,_.pick(d,"isUpward"));_.extend(this,_.pick(d,"resetSelectedItems"));_.extend(this,_.pick(d,"fixedTitle"));_.extend(this,_.pick(d,"title"));_.extend(this,_.pick(d,"saveStateOnChange"));_.extend(this,_.pick(d,"itemPreSelectFunction"));_.extend(this,_.pick(d,"itemPreUnselectFunction"));_.extend(this,_.pick(d,"preSelectedLabels"))}else{console.log("Error: Missing arguments");return null}this.render();a(document).off(RAVEN.Field.CheckboxMultiSelectEvents.ITEM_PRE_SELECT,"document",this._itemSelected()).on(RAVEN.Field.CheckboxMultiSelectEvents.ITEM_PRE_SELECT,this._itemSelected()).off(RAVEN.Field.CheckboxMultiSelectEvents.ITEM_PRE_UNSELECT,"document",this._itemUnselected()).on(RAVEN.Field.CheckboxMultiSelectEvents.ITEM_PRE_UNSELECT,this._itemUnselected());this._delegateUnscopedEvents();this.selectedItems=new RavenSet();this.selectedItemsId=new RavenSet();if(Array.isArray(this.preSelectedLabels)){const f=[];const c=this.getItems();const h={};for(var e=0;e<c.length;e++){h[c[e].id]=c[e].name}for(var e=0;e<this.preSelectedLabels.length;e++){const j=this.preSelectedLabels[e];if(h[parseInt(j)]){const g=new AJS.ItemDescriptor({value:j,label:h[parseInt(j)],title:h[parseInt(j)],allowDuplicate:false,selected:null});f.push(g)}}this._bulkSelectItems(f)}if(this.resetSelectedItems){this.selectedItems=new RavenSet();this.selectedItemsId=new RavenSet()}var b=this;JIRA.bind(JIRA.Events.CHECKBOXMULITSELECT_READY,function(k,i){if(b.saveStateOnChange!==false&&i&&i[0]&&i[0].id&&i[0].id.indexOf(b.id)){b.saveOriginalState()}})},render:function(){const b=RAVEN.Field.CheckboxMultiSelect.render({id:this.id,title:this.getTitle(),placeholder:this.getPlaceholder(),groupLabel:this.getGroupLabel(),items:this.getItems(),isUpward:this.isUpward});this.$el.html(b)},_initCheckboxMultiSelect:function(){const c=this;const b=require("jira/ajs/select/checkbox-multi-select");c.selector=new b({element:a("#"+c.id+"-searcher"),stallEventBind:false,maxInlineResultsDisplayed:c.getMaxResultsDisplayed(),content:"mixed",ajaxOptions:{url:c.getUrl(),data:{},query:true,formatResponse:function(e){function d(h){var l=false;const g=c.getItems();const j=g.length;for(var k=0;k<j;k++){if(g[k].name===h.name){l=true;break}}return l}var f=new AJS.GroupDescriptor({weight:0,id:c.id+"-filter-opt-group",replace:true});a(e).each(function(h,g){if(!d(g)){const j=new AJS.ItemDescriptor({value:g.id,label:g.name,title:g.name,allowDuplicate:false,selected:null});f.addItem(j)}});return[f]}}});c._catchSelectionEvents();a("input#"+c.id+"-searcher-input").addClass("aui-field check-list-field text raven-field-filter")},_removeCheckboxMultiSelect:function(){a("#"+this.id+"-searcher-multi-select").remove()},getUrl:function(){return this.url},getTitle:function(){return this.title},getPlaceholder:function(){return this.placeholder},getGroupLabel:function(){return this.groupLabel},getItems:function(){return this.items},getMaxResultsDisplayed:function(){return this.maxResultsDisplayed},isFixedTitle:function(){return !!this.fixedTitle},getSelectedItemsId:function(){return this.selectedItemsId.toArray()},clear:function(){if(this.selector&&this.selector.model){this._clearSelector(false);this.selectedItemsId.clear();this.selectedItems.clear();this.setPickerTitle()}},saveOriginalState:function(){this.originalState=a.extend(true,[],this.selectedItemsId.toArray())},_clearSelector:function(d){var b=this.selector;var c=b.model.getDisplayableSelectedDescriptors();b.model.setAllUnSelected();if(b.$field.val().length===0){b.$field.val("");b.listController.$container.find(":checkbox").removeAttr("checked")}else{b.clearQueryField();b.listController.moveToFirst()}if(d){jQuery.each(c,function(){b.model.$element.trigger("unselect",[this,b,true])})}},bulkSelectItems:function(f,c){if(c){this.clear()}var b=new Set();f.forEach(function(g){b.add(g)});var d=this.getItems().filter(function(g){return b.has(g.id)}).map(function(g){return new AJS.ItemDescriptor({value:g.id,label:g.label,title:g.name,allowDuplicate:false,selected:null})});this._bulkSelectItems(d);if(this.selector){var e=this;d.forEach(function(g){e.selector.selectItem(g,true)})}this.saveOriginalState()},_bulkSelectItems:function(c){if(Array.isArray(c)){var b=this;c.forEach(function(d){b.selectedItems.add(d.label());b.selectedItemsId.add(d.value());b.setPickerTitle()})}},setPickerTitle:function(){var c,b=null;if(this.selectedItems.size()>0&&!this.isFixedTitle()){c=this.selectedItems.toString(", ");b=c}else{c=this.getTitle()}a("#"+this.id+"-items-trigger-text").text(c).attr("title",b)},commit:function(){this.originalState=null},rollback:function(){if(this.originalState!==null){this.bulkSelectItems(this.originalState,true)}},_delegateUnscopedEvents:function(){const b=this;a.each(b.unscopedEvents,function(e,f){const d=e.substring(0,e.indexOf(" "))+"."+b.id;const c=e.substring(e.indexOf(" ")+1);a(document).off(d).on(d,c,a.proxy(b[f],b))})},_catchSelectionEvents:function(){const b=this;const c=a("#"+b.id+"-searcher");c.off("selected").on("selected",function(e,f,d){b.itemPreSelectFunction(b.selector,e,f,d)}).off("unselect").on("unselect",function(f,g,d,e){b.itemPreUnselectFunction(b.selector,f,g,d,e)})},_isThisEvent:function(b){return b.target&&b.target.id===this.id+"-searcher"},_itemSelected:function(){const b=this;return function(d,e,f,c){if(b._isThisEvent(e)){b.selectedItems.add(f.label());b.selectedItemsId.add(f.value());b.setPickerTitle();b.$el.trigger(RAVEN.Field.CheckboxMultiSelectEvents.ITEM_SELECTED,[f]);b.$el.trigger(RAVEN.Field.CheckboxMultiSelectEvents.CHECKBOX_MULTI_SELECT_UPDATED,[b.selectedItemsId])}}},_itemUnselected:function(){const b=this;return function(d,f,g,c,e){if(b._isThisEvent(f)){if(e){b.selectedItems.clear();b.selectedItemsId.clear()}else{b.selectedItems.remove(g.label());b.selectedItemsId.remove(g.value())}b.setPickerTitle();b.$el.trigger(RAVEN.Field.CheckboxMultiSelectEvents.ITEM_UNSELECTED,[g,e]);b.$el.trigger(RAVEN.Field.CheckboxMultiSelectEvents.CHECKBOX_MULTI_SELECT_UPDATED,[b.selectedItemsId])}}},_triggerCheckboxSelector:function(b){const c=a("#"+this.id+"-checkbox-multi-select");if(!this._clickOnElement(this.$el,b)&&c.is(":visible")){this._hideSelector();this._removeCheckboxMultiSelect();return}if(this._clickOnPicker(b)){if(c.is(":visible")){this._hideSelector();this._removeCheckboxMultiSelect()}else{this._initCheckboxMultiSelect();this._showSelector()}}},_clickOnElement:function(b,c){return this.$el.has(c.target).length!==0||this.$el.is(c.target)},_clickOnPicker:function(b){const c=this.$el.find(".raven-checkbox-multi-select-button").first();return c.has(b.target).length!==0||c.is(b.target)},_showSelector:function(){a("#"+this.id+"-checkbox-multi-select").show();a("#"+this.id+"-searcher-input").focus();this._keepPreviousSelection();this._activatePickerButton()},_keepPreviousSelection:function(){const e=this.selectedItemsId.toArray();const c=this.selectedItems.toArray();if(e.length===c.length){for(var b=0;b<e.length;b++){const d=new AJS.ItemDescriptor({value:e[b],label:c[b],title:c[b]});this.selector.selectItem(d,true)}this.selector.render()}else{console.error("Size of the selected items lists is inconsistent")}},_hideSelector:function(){a("#"+this.id+"-checkbox-multi-select").hide();this._deactivatePickerButton()},_activatePickerButton:function(){this.$el.find(".raven-checkbox-multi-select-button").first().addClass("active")},_deactivatePickerButton:function(){this.$el.find(".raven-checkbox-multi-select-button").first().removeClass("active")},destroy:function(){a.each(this.unscopedEvents,function(c){const b=c.substring(0,c.indexOf(" "));a(document).off(b)});this.$el.empty()}})})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:raven-checkbox-multi-select', location = '/templates/field/checkbox-multi-select.soy' */
// This file was automatically generated from checkbox-multi-select.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Field.CheckboxMultiSelect.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Field == 'undefined') { RAVEN.Field = {}; }
if (typeof RAVEN.Field.CheckboxMultiSelect == 'undefined') { RAVEN.Field.CheckboxMultiSelect = {}; }


RAVEN.Field.CheckboxMultiSelect.render = function(opt_data, opt_ignored) {
  var output = '';
  var upwardClass__soy3 = opt_data.isUpward == true ? 'upward-dropdown' : '';
  output += '<form id="' + soy.$$escapeHtml(opt_data.id) + '-form" class="checkbox-multi-select-form aui raven-checkbox-multi-select-form"><a id="' + soy.$$escapeHtml(opt_data.id) + '-items-trigger" class="aui-button js-nav-items aui-button-subtle drop-arrow raven-checkbox-multi-select-button"><span id="' + soy.$$escapeHtml(opt_data.id) + '-items-trigger-text" class="raven-checkbox-multi-select-text no-user-selection">' + soy.$$escapeHtml(opt_data.title) + '</span></a><div id="' + soy.$$escapeHtml(opt_data.id) + '-checkbox-multi-select" class="raven-checkbox-multi-select ' + soy.$$escapeHtml(upwardClass__soy3) + '" style="display: none;"><select id="' + soy.$$escapeHtml(opt_data.id) + '-searcher" class="select" name="' + soy.$$escapeHtml(opt_data.id) + '" data-placeholder-text="' + soy.$$escapeHtml(opt_data.placeholder) + '" multiple="multiple" style="display: none;"><optgroup id="' + soy.$$escapeHtml(opt_data.id) + '-group" label="' + soy.$$escapeHtml(opt_data.groupLabel) + '">';
  if (opt_data.items != null) {
    var itemList29 = opt_data.items;
    var itemListLen29 = itemList29.length;
    for (var itemIndex29 = 0; itemIndex29 < itemListLen29; itemIndex29++) {
      var itemData29 = itemList29[itemIndex29];
      output += '<option title="' + soy.$$escapeHtml(itemData29.name) + '" value="' + soy.$$escapeHtml(itemData29.id) + '" data-position="' + soy.$$escapeHtml(itemIndex29) + '">' + soy.$$escapeHtml(itemData29.name) + '</option>';
    }
  }
  output += '</optgroup></select></div></form>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Field.CheckboxMultiSelect.render.soyTemplateName = 'RAVEN.Field.CheckboxMultiSelect.render';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:raven-utility-resources', location = 'js/common/util.js' */
var RAVEN=window.RAVEN||{};RAVEN.namespace=function(d,c,e){var f=d.split(".");c=c||window;for(var b=0,g=f.length-1;b<g;b++){var a=c[f[b]];c=(a!=null)?a:c[f[b]]={}}c[f[b]]=e||c[f[b]]||{};return c[f[b]]};RAVEN.escapeHtml=function(a){if(!a){return a}return $("<div>").text(a).html()};RAVEN.waitForConditionAndExecute=function(c,f,b,a,g){function d(){if(c()){a()}else{if(e<f){e++;setTimeout(d,b)}else{g()}}}var e=0;d()};RAVEN.isFunction=function(a){return !!a&&{}.toString.call(a)==="[object Function]"};RAVEN.elementOverlapsWithAnyChildren=function(g,e){var c=document.querySelector(e);if(!c){return false}var a=document.querySelectorAll(g);if(!a){return false}var f=c.getBoundingClientRect();var d=Array.from(a).filter(this.elementIsVisible);for(var b=0;b<d.length;b++){var h=d[b].getBoundingClientRect();if(this.elementsOverlap(f,h)){return true}}return false};RAVEN.elementIsVisible=function(a){var b=window.getComputedStyle(a);return b.display!=="none"&&b.visibility!=="hidden"};RAVEN.elementsOverlap=function(b,a){return !(b.right<a.left||b.left>a.right||b.bottom<a.top||b.top>a.bottom)};;
;
/* module-key = 'com.xpandit.plugins.xray:raven-utility-resources', location = '/js/util/set.js' */
function RavenSet(a){this._hashFunction=a||JSON.stringify;this._values={};this._size=0}RavenSet.prototype={add:function add(a){if(!this.contains(a)){this._values[this._hashFunction(a)]=a;this._size++}},remove:function remove(a){if(this.contains(a)){delete this._values[this._hashFunction(a)];this._size--}},contains:function contains(a){return typeof this._values[this._hashFunction(a)]!=="undefined"},size:function size(){return this._size},each:function each(a,c){for(var b in this._values){a.call(c,this._values[JSON.parse(b)])}},clear:function clear(){for(var a in this._values){this.remove(JSON.parse(a))}},toArray:function toArray(){var b=[];for(var a in this._values){b.push(JSON.parse(a))}return b},fromArray:function fromArray(b){for(var a in b){this.add(b[a])}},toString:function toString(a){return this.toArray().join(a)}};;
;
/* module-key = 'com.xpandit.plugins.xray:raven-utility-resources', location = '/js/util/string-utils.js' */
var StringUtils=(function(){function a(){}a.isEmpty=function(b){return b===null||b.length===0};a.isNotEmpty=function(b){return !a.isEmpty(b)};a.isBlank=function(d){var c;if(d==null||(c=d.length)===0){return true}for(var b=0;b<c;b++){if(d[b]!==""&&d[b]!==" "&&d[b]!=="\n"&&d[b]!=="\t"){return false}}return true};a.isNotBlank=function(b){return !a.isBlank(b)};a.clean=function(b){return b==null?a.EMPTY:b.trim()};a.trim=function(b){return b==null?null:b.trim()};a.trimToNull=function(c){var b=a.trim(c);return a.isEmpty(b)?null:b};a.trimToEmpty=function(b){return b==null?a.EMPTY:b.trim()};a.replace=function(i,j,d,h){if(h==null||typeof h==="undefined"){h=-1}if(a.isEmpty(i)||a.isEmpty(j)||d===null||h===0){return i}var b=0;var e=i.indexOf(j,b);if(e===a.INDEX_NOT_FOUND){return i}var f=j.length;var g=d.length-f;g=(g<0?0:g);g*=(h<0?16:(h>64?64:h));var c=new Array();while(e!==a.INDEX_NOT_FOUND){c.push(i.substring(b,e));c.push(d);b=e+f;if(--h===0){break}e=i.indexOf(j,b)}c.push(i.substring(b));return c.join("")};a.INDEX_NOT_FOUND=-1;a.EMPTY="";a.PAD_LIMIT=8192;return a}());var su=StringUtils;;
;
/* module-key = 'com.xpandit.plugins.xray:raven-utility-resources', location = '/js/util/table-utils.js' */
(function(a){RAVEN.namespace("RAVEN.RavenTableUtils");RAVEN.RavenTableUtils.trimEntries=function(b,c){return b.filter(function(f){for(var e=0;e<c.length;e++){const d=c[e];if(!f[d]){console.error("~^~^ Property '"+d+"' not present in entry.");return false}}return true})}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-dialog-resources', location = 'js/dialog/util/dialog-jql-suggestions-util.js' */
(function(a){window.RAVEN=window.RAVEN||{};RAVEN.Dialogs=RAVEN.Dialogs||{};RAVEN.Dialogs.moveSuggestionsBox=function(c,b){setTimeout(function(){const d=a("#"+c);const e=d.outerHeight(true);var f=d.parent().find(".suggestions");if(f.length===0){f=a("#"+c+"-suggestions").find(".suggestions.raven-filter-jql-suggestions")}const g=d.offset();g.top+=e;if(f.hasClass("raven-filter-jql-suggestions")){f.css("position","absolute").css(g)}else{f.addClass("raven-filter-jql-suggestions").appendTo("body").css("position","absolute").offset(g).wrap("<div id='"+c+"-suggestions' class='atlassian-autocomplete raven-filter-jql-suggestions "+b+"'></div>")}},0)};RAVEN.Dialogs.expandTextarea=function(c){const b=12;const f=a("#"+c);const h=parseInt(f.attr("rows"));const g=f.innerWidth()-f.width();if(parseInt(f.attr("data-padding"))===0){f.attr("rows",1);f.attr("data-padding",2)}const e=parseFloat(f.css("line-height"));const d=Math.round((f[0].scrollHeight-g)/e);if(d<b+1){f.css("overflow","hidden")}if(d>=b+1){f.css("overflow","visible");f.attr("rows",(b))}else{if(d!==h&&f[0].scrollHeight-g>0){f.attr("rows",d)}}};RAVEN.Dialogs.resetTextArea=function(b){const c=a("#"+b);c.attr("rows",1);c.attr("data-padding",2)}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-dialog-resources', location = 'templates/dialog/issue-selector.soy' */
// This file was automatically generated from issue-selector.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Dialogs.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Dialogs == 'undefined') { RAVEN.Dialogs = {}; }


RAVEN.Dialogs.issueSelectorDialog = function(opt_data, opt_ignored) {
  var output = ((opt_data.dialogMode == true) ? '<h2>' + soy.$$escapeHtml(opt_data.title) + '</h2>' : '') + '<div id="issue-selector-dialog" class="aui" style="padding-top:20px"><form action="#" method="post" id="issue-selector-form" class="aui"><div id="raven-issue-selector-message-bar" class="form-body">';
  if (opt_data.appLinks != null && opt_data.appLinks.length > 1) {
    output += '<div class="field-group"><label for="raven-field-issuepicker" style="width: 140px;">' + soy.$$escapeHtml('Server') + '</label><select id="jira-app-link" class="select">';
    var appLinkList14 = opt_data.appLinks;
    var appLinkListLen14 = appLinkList14.length;
    for (var appLinkIndex14 = 0; appLinkIndex14 < appLinkListLen14; appLinkIndex14++) {
      var appLinkData14 = appLinkList14[appLinkIndex14];
      output += '<option value="' + soy.$$escapeHtml(appLinkData14.id) + '">' + soy.$$escapeHtml(appLinkData14.name) + '</option>';
    }
    output += '</select></div>';
  }
  output += '<div class="field-group"><label for="raven-field-issuepicker" style="width: 140px;">' + soy.$$escapeHtml(opt_data.label) + '</label><select class="hidden raven-multi-select" id="raven-field-issuepicker" multiple="multiple" name="raven-issue-selector" data-popup-link-message="[Select ' + soy.$$escapeHtml(opt_data.label) + ']" data-popup-width="620" data-popup-height="500" data-remove-on-un-select="true" data-ajax-options.query="true"' + ((opt_data.issueType == null || opt_data.issueType == 'DEFAULT') ? 'data-ajax-options.url="' + soy.$$escapeHtml(opt_data.contextPath) + '/rest/api/2/issue/picker?currentJQL="' : 'data-ajax-options.url="' + soy.$$escapeHtml(opt_data.contextPath) + '/rest/raven/1.0/issue/picker" data-ajax-options.data.issue-type="' + soy.$$escapeHtml(opt_data.issueType) + '"' + ((opt_data.jql != null) ? 'data-ajax-options.data.jql="' + soy.$$escapeHtml(opt_data.jql) + '"' : '')) + 'data-ajax-options.data.current-issue-key="' + soy.$$escapeHtml(opt_data.issueKey) + '" data-ajax-options.data.show-sub-tasks="true" data-ajax-options.data.show-sub-task-parent="true" data-ajax-options.data.hide-unexecutable-tests="true" data-ajax-options.data.current-project-id=""></select>' + ((opt_data.dialogMode == true) ? '<span style="margin-left:10px;margin-right:5px;vertical-align:bottom;" class="issue-link-search-link">' + soy.$$escapeHtml('or') + '</span><a id="raven-issue-selector-search-trigger" href="#" style="margin: 6px 0 0 6px;vertical-align:bottom;" title="' + soy.$$escapeHtml('search for an issue') + '">' + soy.$$escapeHtml('search for an issue') + '</a>' : '') + '<div class="description raven-select-textarea-label">' + soy.$$escapeHtml(opt_data.description) + '</div></div><div id="raven-custom-element-anchor" class="field-group" style="display: none"></div>' + ((opt_data.redirectOption == true) ? '<div class="field-group"><div class="checkbox"><input class="checkbox" type="checkbox" name="canRedirectExecutePage" id="can-redirect-execute-page" checked><label for="can-redirect-execute-page">' + soy.$$escapeHtml('Execute Immediately') + '</label></div></div>' : '') + '</div>' + ((opt_data.dialogMode == true) ? '<div class="form-footer buttons-container"><div class="buttons"><input class="button" type="submit" id="issue-selector-form-submit" value="' + soy.$$escapeHtml('Add') + '" /><a href="#" class="cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div>' : '') + '</form></div>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Dialogs.issueSelectorDialog.soyTemplateName = 'RAVEN.Dialogs.issueSelectorDialog';
}


RAVEN.Dialogs.parentIssueSelectorDialog = function(opt_data, opt_ignored) {
  var output = ((opt_data.dialogMode == true) ? '<h2>' + soy.$$escapeHtml(opt_data.title) + '</h2>' : '') + '<div id="issue-selector-dialog" class="aui" style="padding-top:20px"><form action="#" method="post" id="issue-selector-form" class="aui"><div id="raven-issue-selector-message-bar" class="form-body">';
  if (opt_data.appLinks != null && opt_data.appLinks.length > 1) {
    output += '<div class="field-group"><label for="raven-field-issuepicker" style="width: 140px;">' + soy.$$escapeHtml('Server') + '</label><select id="jira-app-link" class="select">';
    var appLinkList84 = opt_data.appLinks;
    var appLinkListLen84 = appLinkList84.length;
    for (var appLinkIndex84 = 0; appLinkIndex84 < appLinkListLen84; appLinkIndex84++) {
      var appLinkData84 = appLinkList84[appLinkIndex84];
      output += '<option value="' + soy.$$escapeHtml(appLinkData84.id) + '">' + soy.$$escapeHtml(appLinkData84.name) + '</option>';
    }
    output += '</select></div>';
  }
  output += '<div class="field-group"><label for="raven-field-st-issuepicker">' + soy.$$escapeHtml(opt_data.label) + '</label><select class="hidden" id="raven-field-singleissuepicker" name="raven-issue-selector" data-popup-link-message="[Select ' + soy.$$escapeHtml(opt_data.label) + ']" data-popup-width="620" data-popup-height="500" data-ajax-options.data.current-issue-key="" data-ajax-options.data.show-sub-tasks="false" data-ajax-options.data.show-sub-task-parent="true" data-ajax-options.data.current-project-id=""></select><div class="description" style="width:350px">' + soy.$$escapeHtml(opt_data.description) + '</div></div>' + ((opt_data.redirectOption == true) ? '<div class="field-group"><div class="checkbox"><input class="checkbox" type="checkbox" name="canRedirectExecutePage" id="can-redirect-execute-page" checked><label for="can-redirect-execute-page">' + soy.$$escapeHtml('Execute Immediately') + '</label></div></div>' : '') + '</div>' + ((opt_data.dialogMode == true) ? '<div class="form-footer buttons-container"><div class="buttons"><input class="button" type="submit" id="issue-selector-form-submit" value="' + soy.$$escapeHtml('Next') + '" /><a href="#" class="cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div>' : '') + '</form></div>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Dialogs.parentIssueSelectorDialog.soyTemplateName = 'RAVEN.Dialogs.parentIssueSelectorDialog';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-dialog-resources', location = 'templates/dialog/issue-search.soy' */
// This file was automatically generated from issue-search.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Dialogs.IssueSearch.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Dialogs == 'undefined') { RAVEN.Dialogs = {}; }
if (typeof RAVEN.Dialogs.IssueSearch == 'undefined') { RAVEN.Dialogs.IssueSearch = {}; }


RAVEN.Dialogs.IssueSearch.dialog = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml('Find Jira issues') + '</h2><div class="aui-group issue-selector-content"><form class="aui search-form" id="raven-issue-simple-search-form" action="#" method="post"><fieldset id="raven-issue-simple-search-fieldset"><label for="raven-issue-search-text">' + soy.$$escapeHtml('Search') + ':</label><input id="raven-issue-search-text" type="text" tabindex="0" class="text" size="50"><span class="buttons"><input type="submit" tabindex="0" class="button" id="simple-search-panel-button" value="' + soy.$$escapeHtml('Search') + '"></span><span id="raven-issue-search-loading" class="icon loading throbber hidden"/></fieldset></form><div class="message-panel hidden"></div><div id="search-results-table" class="data-table"></div></div><div class="buttons-container form-footer"><div class="buttons"><a accesskey="`" class="aui-button aui-button-link cancel" href="#" id="remote-jira-link-cancel" title="' + soy.$$escapeHtml('Press Esc to close') + '">' + soy.$$escapeHtml('Close') + '</a></div></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.dialog.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.dialog';
}


RAVEN.Dialogs.IssueSearch.advancedDialog = function(opt_data, opt_ignored) {
  return '<div id="raven-initialization-error"></div><div class="aui-group issue-selector-content"><form class="aui search-form" id="raven-issue-advanced-search-form" action="#" method="post"><fieldset><label for="jql-search-text"><span id="jql-search-error" class="icon jqlgood " style="margin-bottom: 4px" ></span>&nbsp;' + soy.$$escapeHtml('JQL Search') + '<span id="autocomplete-loading" class="hidden"><span class="icon loading throbber" ></span>&nbsp;' + soy.$$escapeHtml('Loading auto-complete') + '</span><span id="autocomplete-failed" class="hidden">' + soy.$$escapeHtml('(auto-complete unavailable)') + '</span></label><div class="atlassian-autocomplete"><textarea id="jql-search-text" tabindex="0" rows="1" class="textarea jql-auto-expand-issue-search raven-issue-selector-autoExpand" data-min-rows="0" data-padding="0"></textarea></div><span class="buttons float-right"><button id="advanced-search-panel-button" class="aui-button aui-button-primary search-button" type="submit" value="' + soy.$$escapeHtml('Search') + '" original-title="' + soy.$$escapeHtml('Search') + '"><span class="aui-icon aui-icon-small aui-iconfont-search"></span><span>&nbsp;' + soy.$$escapeHtml('Search') + '</span></button><span id="raven-issue-advanced-search-loading" class="icon loading throbber hidden"/></span></fieldset><div class="raven-issueselector-error-message"></div></form><div class="message-panel hidden"></div><div id="advanced-search-results-table" class="data-table"></div></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.advancedDialog.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.advancedDialog';
}


RAVEN.Dialogs.IssueSearch.searchForm = function(opt_data, opt_ignored) {
  return '<div id="raven-initialization-error"></div><div id="raven-issue-search" class="aui-group" style="display: none;"><div class="raven-search-table"><div class="raven-left-column raven-column"><div id="raven-fields-control-fieldset-container"><fieldset class="raven-fields-control-fieldset"><div class="group"><div id="raven-fields-selection"></div></div></fieldset></div><div id="raven-issue-simple-search-fieldset-container"><form class="aui search-form" id="raven-issue-simple-search-form" action="#" method="post"><fieldset id="raven-issue-simple-search-fieldset"><div id="raven-issue-search-spinner" style="margin-top:15px; width:100%; padding-top:150px;"><div class="aui-test-spinner-container"><aui-spinner size="medium" filled></aui-spinner></div></div><div id="fields-addition-marker"></div></fieldset></form></div><fieldset class="raven-control-fieldset"><!-- controls filter --><div class="group"><!-- Clear button --><button id="clear-button" class="aui-button search-button" original-title="' + soy.$$escapeHtml('Clear') + '"><span>' + soy.$$escapeHtml('Clear') + '</span></button></div><div class="group"><!-- More button --><button id="simple-search-panel-button" class="aui-button aui-button-primary search-button" type="submit" original-title="' + soy.$$escapeHtml('Search') + '"><span class="aui-icon aui-icon-small aui-iconfont-search"></span><span>&nbsp;' + soy.$$escapeHtml('Search') + '</span></button><span id="raven-issue-search-loading" class="icon loading throbber hidden"/></div><div id="filter-additions" style="clear:both;"></div><div id="raven-issue-search-filter-additions" class="aui-dropdown2 aui-style-default search-filter-additions" data-aui-alignment="bottom left"><ul></ul></div></fieldset></div><div class="raven-right-column raven-column"><div class="message-panel hidden"></div><div id="raven-no-results-image"><img class="raven-issue-selector-center-img" src="' + soy.$$escapeHtml(opt_data.contextPath) + '/download/resources/com.xpandit.plugins.xray/images/xray-server-search-didnt-returned-results.svg"><p>' + soy.$$escapeHtml('Choose the search criteria using the filters on the left panel and press search.') + '</p></div><div id="search-results-table" class="data-table"></div></div></div></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.searchForm.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.searchForm';
}


RAVEN.Dialogs.IssueSearch.renderTabsContent = function(opt_data, opt_ignored) {
  return '<div class="aui-tabs horizontal-tabs"><ul class="tabs-menu"><li class="menu-item active-tab"><a href="#select-tab-pane">' + soy.$$escapeHtml('Select') + '</a></li><li class="menu-item"><a href="#simple-search-tab-pane">' + soy.$$escapeHtml('Search') + '</a></li><li class="menu-item"><a href="#advanced-search-tab-pane">JQL</a></li></ul><div class="raven-issue-search-tabs-pane tabs-pane active-pane" id="select-tab-pane" data-pane-id="0"><div>' + soy.$$filterNoAutoescape(opt_data.selectPane) + '</div></div><div class="raven-issue-search-tabs-pane tabs-pane" id="simple-search-tab-pane" data-pane-id="1"><div>' + RAVEN.Dialogs.IssueSearch.searchForm(opt_data) + '</div></div><div class="raven-issue-search-tabs-pane tabs-pane" id="advanced-search-tab-pane" data-pane-id="2"><div class="raven-issue-selector-advanced-dialog-container">' + RAVEN.Dialogs.IssueSearch.advancedDialog(null) + '</div></div></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.renderTabsContent.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.renderTabsContent';
}


RAVEN.Dialogs.IssueSearch.renderVersionFilter = function(opt_data, opt_ignored) {
  return '<!-- version filter --><div class="field-group" data-is-xray-jql="true"><label for="version-filter">' + soy.$$escapeHtml('Version') + ':</label><select class="select raven-multi-select hidden" id="version-filter" name="raven-version-selector" multiple="multiple" data-remove-null-options="true" data-submit-input-val="true" data-input-text style="display: none;"></select></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.renderVersionFilter.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.renderVersionFilter';
}


RAVEN.Dialogs.IssueSearch.renderLabelFilter = function(opt_data, opt_ignored) {
  return '<!-- label filter --><div class="field-group" data-is-xray-jql="true"><label for="label-filter">' + soy.$$escapeHtml('Label') + '</label><select class="multi-select raven-multi-select long-field hidden edit-labels-inline" id="label-filter" name="labels" multiple="multiple" style="display: none;"></select></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.renderLabelFilter.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.renderLabelFilter';
}


RAVEN.Dialogs.IssueSearch.renderTestSetVersionFilter = function(opt_data, opt_ignored) {
  return '<!-- test set version filter --><div class="field-group" data-is-xray-jql="true"><label for="testset-version-filter">' + soy.$$escapeHtml('Test Set FixVersion') + ':</label><select class="select hidden" id="testset-version-filter" name="testset-version-filter" data-remove-null-options="true" data-submit-input-val="true" data-input-text style="display: none;"></select></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.renderTestSetVersionFilter.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.renderTestSetVersionFilter';
}


RAVEN.Dialogs.IssueSearch.renderFilterFilter = function(opt_data, opt_ignored) {
  return '<!-- test set version filter --><div class="field-group" data-is-xray-jql="true"><label for="filter-filter">' + soy.$$escapeHtml('Saved Filter') + ':</label><select class="select hidden" id="filter-filter" name="filter-filter"  style="display: none;"/></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.renderFilterFilter.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.renderFilterFilter';
}


RAVEN.Dialogs.IssueSearch.renderStatusFilter = function(opt_data, opt_ignored) {
  return '<!-- test set version filter --><div class="field-group" data-is-xray-jql="true"><label for="workflow-status-filter">' + soy.$$escapeHtml('Workflow Status') + ':</label><select class="multi-select raven-multi-select long-field hidden" id="workflow-status-filter" name="workflow-status-filter" multiple="multiple" style="display: none;"></select></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.renderStatusFilter.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.renderStatusFilter';
}


RAVEN.Dialogs.IssueSearch.renderComponentFilter = function(opt_data, opt_ignored) {
  return '<!-- test component filter --><div class="field-group" data-is-xray-jql="true"><label for="component-filter">' + soy.$$escapeHtml('Component/s') + ':</label><select class="multi-select raven-multi-select long-field hidden" id="component-filter" name="component-filter" multiple="multiple" style="display: none;"></select></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.renderComponentFilter.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.renderComponentFilter';
}


RAVEN.Dialogs.IssueSearch.renderEnvironmentFilter = function(opt_data, opt_ignored) {
  return '<!-- test component filter --><div class="field-group" data-is-xray-jql="true"><label for="environment-filter">' + soy.$$escapeHtml('Environments') + ':</label><select class="multi-select raven-multi-select long-field hidden" id="environment-filter" name="environment-filter" multiple="multiple" style="display: none;"></select></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.renderEnvironmentFilter.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.renderEnvironmentFilter';
}


RAVEN.Dialogs.IssueSearch.renderTestSetFilter = function(opt_data, opt_ignored) {
  return '<!-- test set filter --><div class="field-group" data-is-xray-jql="true"><label for="testset-filter">' + soy.$$escapeHtml('Test Set') + ':</label><select class="select raven-multi-select hidden" id="testset-filter" multiple="multiple" name="testset-filter" data-remove-on-un-select="true" data-ajax-options.query="true" data-ajax-options.url="' + soy.$$escapeHtml(opt_data.contextPath) + '/rest/raven/1.0/issue/picker" data-ajax-options.data.issue-type="TESTSET" data-ajax-options.data.show-sub-tasks="false" data-ajax-options.data.show-sub-task-parent="true" data-ajax-options.data.current-project-id=""><!--\t\t\tdata-ajax-options.data.fix-versions="' + soy.$$escapeHtml(opt_data.versions) + '" --></select></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.renderTestSetFilter.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.renderTestSetFilter';
}


RAVEN.Dialogs.IssueSearch.renderRequirementVersionFilter = function(opt_data, opt_ignored) {
  return '<!-- requirement version filter --><div class="field-group" data-is-xray-jql="true"><label for="requirement-version-filter">' + soy.$$escapeHtml('Requirement FixVersion') + ':</label><select class="select hidden" id="requirement-version-filter" name="requirement-version-filter"  data-remove-null-options="true" data-submit-input-val="true" data-input-text style="display: none;"></select></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.renderRequirementVersionFilter.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.renderRequirementVersionFilter';
}


RAVEN.Dialogs.IssueSearch.renderRequirementFilter = function(opt_data, opt_ignored) {
  return '<!-- requirement filter --><div class="field-group" data-is-xray-jql="true"><label for="requirement-filter">' + soy.$$escapeHtml('Requirement') + ':</label><select class="select  raven-multi-select hidden" id="requirement-filter" multiple="multiple" name="requirement-filter" data-remove-on-un-select="true" data-ajax-options.query="true" data-ajax-options.url="' + soy.$$escapeHtml(opt_data.contextPath) + '/rest/raven/1.0/issue/picker" data-ajax-options.data.issue-type="REQUIREMENT" data-ajax-options.data.show-sub-tasks="true" data-ajax-options.data.show-sub-task-parent="true" data-ajax-options.data.current-project-id=""><!--\t\t\tdata-ajax-options.data.fix-versions="' + soy.$$escapeHtml(opt_data.versions) + '" --></select></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.renderRequirementFilter.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.renderRequirementFilter';
}


RAVEN.Dialogs.IssueSearch.linkResultsTable = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.result.issues.length > 0) {
    output += '<table id="raven-search-result-table" class="aui"><thead><tr><th width="40px">' + soy.$$escapeHtml('Type') + '</th><th width="80px">' + soy.$$escapeHtml('Key') + '</th><th width="600px">' + soy.$$escapeHtml('Summary') + '</th><th width="100px">' + soy.$$escapeHtml('Status') + '</th></tr></thead><tbody>';
    var issueList116 = opt_data.result.issues;
    var issueListLen116 = issueList116.length;
    for (var issueIndex116 = 0; issueIndex116 < issueListLen116; issueIndex116++) {
      var issueData116 = issueList116[issueIndex116];
      output += '<tr title="' + soy.$$escapeHtml(issueData116.key) + '"><td class="type" data-key="' + soy.$$escapeHtml(issueData116.key) + '">' + RAVEN.Dialogs.IssueSearch.issueType({issueType: issueData116.fields.issuetype, contextPath: opt_data.contextPath}) + '</td><td class="key">' + soy.$$escapeHtml(issueData116.key) + '</td><td class="summary">' + soy.$$escapeHtml(issueData116.fields.summary) + '</td><td class="status" style="margin-left: 0 !important; width: 80px !important; border-top: none;">' + RAVEN.Dialogs.IssueSearch.status({status: issueData116.fields.status}) + '</td></tr>';
    }
    output += '</tbody></table>';
  } else {
    output += '<div class="aui-message info"><span class="aui-icon icon-info"></span><p>' + soy.$$escapeHtml('Search returned no results.') + '</p></div>';
  }
  return output;
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.linkResultsTable.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.linkResultsTable';
}


RAVEN.Dialogs.IssueSearch.renderAssigneePicker = function(opt_data, opt_ignored) {
  var output = '<form id="raven-assignee-select-form" class="aui assignee-form" action="#" method="post"><fieldset class="parameters hidden dont-default-focus"><input type="hidden"  name="assigneeEditIssueKey" title="assigneeEditIssueKey" value="' + soy.$$escapeHtml(opt_data.issueKey) + '"></fieldset><div class="field-group"><label for="raven-assignee-select">' + soy.$$escapeHtml('Assignee') + '</label><select id="raven-assignee-select" data-show-dropdown-button="true" data-user-type="assignee" class="single-user-picker xray-assignee-picker aui-ss-select"><optgroup id="assignee-group-suggested" label="Suggestions" data-weight="0"><option selected="selected" value="-1" data-field-text="' + soy.$$escapeHtml('Issue Assignee') + '" data-field-label="' + soy.$$escapeHtml('Issue Assignee') + '">' + soy.$$escapeHtml('Issue Assignee') + '</option>';
  var customFieldList151 = opt_data.customFields;
  var customFieldListLen151 = customFieldList151.length;
  for (var customFieldIndex151 = 0; customFieldIndex151 < customFieldListLen151; customFieldIndex151++) {
    var customFieldData151 = customFieldList151[customFieldIndex151];
    output += '<option style="background-image: url(' + soy.$$escapeHtml(customFieldData151.imgURL) + ')" data-is-cf="true" value="' + soy.$$escapeHtml(customFieldData151.customFieldId) + '" data-field-text="' + soy.$$escapeHtml(customFieldData151.value) + '" data-field-label="' + soy.$$escapeHtml(customFieldData151.value) + '">' + soy.$$escapeHtml(customFieldData151.value) + '</option>';
  }
  output += '</optgroup></select></div></form>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.renderAssigneePicker.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.renderAssigneePicker';
}


RAVEN.Dialogs.IssueSearch.resultTable = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.result.entries.length > 0) {
    output += '<table id="raven-search-result-table" class="aui"><thead><tr><th width="10px"><input type="checkbox" name="all" value="' + soy.$$escapeHtml('All') + '" title="' + soy.$$escapeHtml('Select All/None') + '"/></th>';
    var colList173 = opt_data.columns;
    var colListLen173 = colList173.length;
    for (var colIndex173 = 0; colIndex173 < colListLen173; colIndex173++) {
      var colData173 = colList173[colIndex173];
      output += '<th data-column-id="' + soy.$$escapeHtml(colData173.id) + '">$col.label</th>';
    }
    output += '</tr></thead><tbody>';
    var issueList179 = opt_data.result.entries;
    var issueListLen179 = issueList179.length;
    for (var issueIndex179 = 0; issueIndex179 < issueListLen179; issueIndex179++) {
      var issueData179 = issueList179[issueIndex179];
      output += '<tr data-key="' + soy.$$escapeHtml(issueData179.key) + '" title="' + soy.$$escapeHtml(issueData179.key) + '"><td><input type="checkbox" name="' + soy.$$escapeHtml(issueData179.key) + '" value="' + soy.$$escapeHtml(issueData179.key) + '"/></td>';
      var colList189 = opt_data.columns;
      var colListLen189 = colList189.length;
      for (var colIndex189 = 0; colIndex189 < colListLen189; colIndex189++) {
        var colData189 = colList189[colIndex189];
        output += (issueData179[colData189]) ? '<td class="' + soy.$$escapeHtml(colData189) + '">$issue[$col]</td>' : '';
      }
      output += '</tr>';
    }
    output += '</tbody></table>';
  } else {
    output += '<div class="aui-message info"><span class="aui-icon icon-info"></span><p>' + soy.$$escapeHtml('Search returned no results.') + '</p></div>';
  }
  return output;
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.resultTable.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.resultTable';
}


RAVEN.Dialogs.IssueSearch.renderSearchResultsTable = function(opt_data, opt_ignored) {
  var output = '<table id="raven-search-result-table" class="aui"><thead><tr><th width="10px"><input id="page-select-all" type="checkbox" name="all" value="' + soy.$$escapeHtml('All') + '" title="' + soy.$$escapeHtml('Select All/None') + '"/></th>';
  var colList209 = opt_data.columns;
  var colListLen209 = colList209.length;
  for (var colIndex209 = 0; colIndex209 < colListLen209; colIndex209++) {
    var colData209 = colList209[colIndex209];
    output += '<th data-column-id="' + soy.$$escapeHtml(colData209.id) + '">' + soy.$$escapeHtml(colData209.label) + '</th>';
  }
  output += '</tr></thead><tbody></tbody></table>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.renderSearchResultsTable.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.renderSearchResultsTable';
}


RAVEN.Dialogs.IssueSearch.issueType = function(opt_data, opt_ignored) {
  return '<img src="' + ((opt_data.contextPath) ? soy.$$escapeHtml(opt_data.contextPath) : '') + soy.$$escapeHtml(opt_data.issueType.iconUrl) + '" alt="' + soy.$$escapeHtml(opt_data.issueType.name) + '" title="' + soy.$$escapeHtml(opt_data.issueType.name) + ' - ' + soy.$$escapeHtml(opt_data.issueType.description) + '" width="16px" height="16px"/>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.issueType.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.issueType';
}


RAVEN.Dialogs.IssueSearch.status = function(opt_data, opt_ignored) {
  return '<span class="jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-' + soy.$$escapeHtml(opt_data.status.statusCategory.colorName) + ' jira-issue-status-lozenge-' + soy.$$escapeHtml(opt_data.status.statusCategory.key) + ' jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=\'jira-issue-status-tooltip-title\'>' + soy.$$escapeHtml(opt_data.status.name) + '</span><br><span class=\'jira-issue-status-tooltip-desc\'>' + soy.$$escapeHtml(opt_data.status.description) + '</span>">' + soy.$$escapeHtml(opt_data.status.name) + '</span>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.status.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.status';
}


RAVEN.Dialogs.IssueSearch.renderColumnsButton = function(opt_data, opt_ignored) {
  return '<div class="raven-issue-results-button"><div class="list-view"><div class="aui-group aui-group-split issue-table-info-bar issue-selector-table-column-wrapper"><div class="aui-item"><div class="column-picker-trigger-container"><div id="issue-selector-columns-button-' + soy.$$escapeHtml(opt_data.suffix) + '" class="raven-columns-button" title="' + soy.$$escapeHtml('Columns') + '" resolved="">' + soy.$$escapeHtml('Columns') + '</div></div></div></div></div></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.renderColumnsButton.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.renderColumnsButton';
}


RAVEN.Dialogs.IssueSearch.datePickers = function(opt_data, opt_ignored) {
  return '<label for="searcher-' + soy.$$escapeHtml(opt_data.fieldID) + '">' + soy.$$escapeHtml(opt_data.fieldName) + '</label><div class="raven-date-picker-issue-search"><div data-date-type="withinTheLast" class="field-group"><input type="radio" class="js-dp-type-toggle" id="withinTheLastRadio-' + soy.$$escapeHtml(opt_data.fieldID) + '" name="radio-picker-' + soy.$$escapeHtml(opt_data.fieldID) + '"><div class="raven-date-picker-issue-search-group-wrapper"><label for="withinTheLastRadio-' + soy.$$escapeHtml(opt_data.fieldID) + '" class="raven-date-input-label">' + soy.$$escapeHtml('Within the last') + '&nbsp;</label><input class="js-val text raven-date-input" data-field-type="withinTheLast" type="text" maxlength="15" placeholder="4d 12h" name="' + soy.$$escapeHtml(opt_data.fieldID) + ':previous"><label for="withinTheLastRadio-' + soy.$$escapeHtml(opt_data.fieldID) + '" class="raven-date-input-label no-width">&nbsp;</label></div></div><div data-date-type="moreThan" class="field-group"><input type="radio" tabindex="-1" class="js-dp-type-toggle" id="moreThanRadio-' + soy.$$escapeHtml(opt_data.fieldID) + '" name="radio-picker-' + soy.$$escapeHtml(opt_data.fieldID) + '"><div class="raven-date-picker-issue-search-group-wrapper"><label for="moreThanRadio-' + soy.$$escapeHtml(opt_data.fieldID) + '" class="raven-date-input-label">' + soy.$$escapeHtml('More than') + '&nbsp;</label><input class="js-val text raven-date-input" data-field-type="moreThan" type="text" maxlength="15" placeholder="4d 12h" name="' + soy.$$escapeHtml(opt_data.fieldID) + ':next"><span class="raven-form-text-color">&nbsp;' + soy.$$escapeHtml('ago') + '</span></div></div><div data-date-type="dateBetween" class="field-group"><input type="radio" tabindex="-1" class="js-dp-type-toggle" id="dateBetweenRadio-' + soy.$$escapeHtml(opt_data.fieldID) + '" name="radio-picker-' + soy.$$escapeHtml(opt_data.fieldID) + '"><div class="raven-date-picker-issue-search-group-wrapper"><label for="dateBetweenRadio-' + soy.$$escapeHtml(opt_data.fieldID) + '" class="raven-date-input-label">' + soy.$$escapeHtml('Between') + '&nbsp;</label><input class="js-start-date text raven-date-input" data-field-type="dateBetweenA" maxlength="15" type="text" name="' + soy.$$escapeHtml(opt_data.fieldID) + ':after"><span class="js-start-date-trigger aui-icon aui-icon-small aui-iconfont-calendar">' + soy.$$escapeHtml('Select a date') + '</span><label for="dateBetweenRadio-' + soy.$$escapeHtml(opt_data.fieldID) + '" class="raven-date-input-label middle">' + soy.$$escapeHtml('and') + '&nbsp;</label><input class="js-end-date text raven-date-input middle" data-field-type="dateBetweenB" maxlength="12" type="text" name="' + soy.$$escapeHtml(opt_data.fieldID) + ':before"><span class="js-end-date-trigger aui-icon aui-icon-small aui-iconfont-calendar extra-top-margin">' + soy.$$escapeHtml('Select a date') + '</span></div></div><div data-date-type="inRange" class="field-group"><input type="radio" tabindex="-1" maxlength="15" class="js-dp-type-toggle" id="inRangeRadio-' + soy.$$escapeHtml(opt_data.fieldID) + '" name="radio-picker-' + soy.$$escapeHtml(opt_data.fieldID) + '"><div class="raven-date-picker-issue-search-group-wrapper"><label for="inRangeRadio-' + soy.$$escapeHtml(opt_data.fieldID) + '" class="raven-date-input-label">' + soy.$$escapeHtml('In range') + '&nbsp;</label><input class="js-start-range text raven-date-input" data-field-type="inRangeA" placeholder="-1w 2d" type="text" name="' + soy.$$escapeHtml(opt_data.fieldID) + ':previous">&nbsp;<label for="inRangeRadio-' + soy.$$escapeHtml(opt_data.fieldID) + '" class="raven-date-input-label middle">' + soy.$$escapeHtml('to') + '&nbsp;</label><input class="js-end-range text raven-date-input middle" data-field-type="inRangeB" maxlength="15" placeholder="4d 12h" type="text" name="' + soy.$$escapeHtml(opt_data.fieldID) + ':next"></div></div></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.datePickers.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.datePickers';
}


RAVEN.Dialogs.IssueSearch.textField = function(opt_data, opt_ignored) {
  return '<div class="field-group aui-field-textquery raven-field-selector-field-group" data-field-id="' + soy.$$escapeHtml(opt_data.fieldID) + '"><label for="searcher-' + soy.$$escapeHtml(opt_data.fieldID) + '">' + soy.$$escapeHtml(opt_data.fieldName) + '</label><input class="text search-entry" id="searcher-' + soy.$$escapeHtml(opt_data.fieldID) + '" name="' + soy.$$escapeHtml(opt_data.fieldID) + '" type="text" value=""></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.textField.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.textField';
}


RAVEN.Dialogs.IssueSearch.genericMultiSelect = function(opt_data, opt_ignored) {
  return '<div class="field-group raven-field-selector-field-group ' + ((opt_data.isFullWidth) ? ' full-width ' : '') + '" data-field-id="' + soy.$$escapeHtml(opt_data.fieldID) + '"><label for="searcher-' + soy.$$escapeHtml(opt_data.fieldID) + '">' + soy.$$escapeHtml(opt_data.fieldName) + '</label><select class="multi-select" id="' + soy.$$escapeHtml(opt_data.fieldID) + '" name="' + soy.$$escapeHtml(opt_data.fieldID) + '" multiple="multiple"></select></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.genericMultiSelect.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.genericMultiSelect';
}


RAVEN.Dialogs.IssueSearch.genericSingleSelect = function(opt_data, opt_ignored) {
  return '<div class="field-group raven-field-selector-field-group ' + ((opt_data.isFullWidth) ? ' full-width ' : '') + '" data-field-id="' + soy.$$escapeHtml(opt_data.fieldID) + '"><label for="searcher-' + soy.$$escapeHtml(opt_data.fieldID) + '">' + soy.$$escapeHtml(opt_data.fieldName) + '</label><select class="single-select" id="' + soy.$$escapeHtml(opt_data.fieldID) + '" name="' + soy.$$escapeHtml(opt_data.fieldID) + '"></select></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.genericSingleSelect.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.genericSingleSelect';
}


RAVEN.Dialogs.IssueSearch.genericDatePicker = function(opt_data, opt_ignored) {
  return '<div class="js-created-searcher date-searcher filter-field-group full-width raven-field-selector-field-group" data-field-id="' + soy.$$escapeHtml(opt_data.fieldID) + '" data-field-name="' + soy.$$escapeHtml(opt_data.fieldName) + '">' + RAVEN.Dialogs.IssueSearch.datePickers(opt_data) + '</div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.genericDatePicker.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.genericDatePicker';
}


RAVEN.Dialogs.IssueSearch.renderRestoreDefaultsOption = function(opt_data, opt_ignored) {
  return '<li class="check-list-group-actions raven-restore-option"><a class="clear-all raven-restore-option" href="#">' + soy.$$escapeHtml('Restore Defaults') + '</a></li>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.renderRestoreDefaultsOption.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.renderRestoreDefaultsOption';
}


RAVEN.Dialogs.IssueSearch.fieldNotAvailable = function(opt_data, opt_ignored) {
  return '<div class="field-group" data-field-id="' + soy.$$escapeHtml(opt_data.fieldID) + '"><label for="searcher-' + soy.$$escapeHtml(opt_data.fieldID) + '">' + soy.$$escapeHtml(opt_data.fieldName) + '</label><div class="searcher-no-edit-content raven-not-available-searcher-message"><div class="aui-message info"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml(AJS.format('To search by {0} please switch to advanced.',opt_data.fieldName)) + '</div></div></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.fieldNotAvailable.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.fieldNotAvailable';
}


RAVEN.Dialogs.IssueSearch.controlButtonsPanel = function(opt_data, opt_ignored) {
  return '<div class="issue-selector-button-panel"><input id="issue-selector-done-button" class="aui-button submit" value="' + soy.$$escapeHtml('Done') + '"/> <a id="issue-selector-cancel-button" class="aui-button aui-button-link close-dialog">' + soy.$$escapeHtml('Cancel') + '</a></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.IssueSearch.controlButtonsPanel.soyTemplateName = 'RAVEN.Dialogs.IssueSearch.controlButtonsPanel';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-dialog-resources', location = 'templates/dialog/confirm.soy' */
// This file was automatically generated from confirm.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Dialog.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Dialog == 'undefined') { RAVEN.Dialog = {}; }


RAVEN.Dialog.confirmationDialogWithData = function(opt_data, opt_ignored) {
  return '' + RAVEN.Dialog.messageDialogWithData(soy.$$augmentMap(opt_data, {actionText: 'Yes', severity: '' + ((opt_data.severity) ? soy.$$escapeHtml(opt_data.severity) : 'info')}));
};
if (goog.DEBUG) {
  RAVEN.Dialog.confirmationDialogWithData.soyTemplateName = 'RAVEN.Dialog.confirmationDialogWithData';
}


RAVEN.Dialog.confirmationDialog = function(opt_data, opt_ignored) {
  return '' + RAVEN.Dialog.messageDialog(soy.$$augmentMap(opt_data, {actionText: 'Yes', secondaryActionText: 'Cancel', severity: '' + ((opt_data.severity) ? soy.$$escapeHtml(opt_data.severity) : 'info')}));
};
if (goog.DEBUG) {
  RAVEN.Dialog.confirmationDialog.soyTemplateName = 'RAVEN.Dialog.confirmationDialog';
}


RAVEN.Dialog.deleteConfirmationDialog = function(opt_data, opt_ignored) {
  return '' + RAVEN.Dialog.messageDialog(soy.$$augmentMap(opt_data, {actionText: 'Delete', secondaryActionText: 'Cancel', severity: '' + ((opt_data.severity) ? soy.$$escapeHtml(opt_data.severity) : 'info')}));
};
if (goog.DEBUG) {
  RAVEN.Dialog.deleteConfirmationDialog.soyTemplateName = 'RAVEN.Dialog.deleteConfirmationDialog';
}


RAVEN.Dialog.deleteRequirementTestConfirmationDialog = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + soy.$$escapeHtml(opt_data.title) + '</h2><form class="aui" action="#" method="post"><div class="form-body"><p>' + soy.$$escapeHtml(AJS.format('Are you sure you want to remove the selected Tests from Requirement {0}?',opt_data.reqIssueKey)) + '</p>' + ((opt_data.showTestDescendentWarning) ? '<div class="raven-delete-test-confirmation-warning"><span class="aui-icon aui-icon-small aui-iconfont-warning raven-warning-color"></span>' + soy.$$escapeHtml('You are removing Tests from descendent issues.') + '</div>' : '') + ((opt_data.message) ? '<div class="raven-delete-test-confirmation-warning"><span class="aui-icon aui-icon-small aui-iconfont-warning raven-warning-color"></span>' + soy.$$escapeHtml(opt_data.message) + ((opt_data.confirmTestSetDelete) ? '<div class="raven-delete-test-set-confirmation-warning"><input type="checkbox" name="raven-test-set-delete-confirmation" id="raven-test-set-delete-confirmation" /><label for="raven-test-set-delete-confirmation">' + soy.$$escapeHtml('Remove Test Set(s).') + '</label></div>' : '') + '</div>' : '') + '</div><div class="form-footer buttons-container"><div class="buttons">' + ((opt_data.withSubmitButton) ? '<input class="aui-button aui-button-primary" type="submit" id="raven-confirm-dialog-form-submit" value="' + soy.$$escapeHtml(opt_data.actionText) + '" />' : '') + '<a href="#" class="aui-button cancel" id="raven-cancel-dialog-form-submit">' + soy.$$escapeHtml(opt_data.secondaryActionText) + '</a></div></div></form>';
};
if (goog.DEBUG) {
  RAVEN.Dialog.deleteRequirementTestConfirmationDialog.soyTemplateName = 'RAVEN.Dialog.deleteRequirementTestConfirmationDialog';
}


RAVEN.Dialog.cloneConfirmationDialog = function(opt_data, opt_ignored) {
  return '' + RAVEN.Dialog.messageDialog(soy.$$augmentMap(opt_data, {actionText: 'Clone', secondaryActionText: 'Cancel', severity: '' + ((opt_data.severity) ? soy.$$escapeHtml(opt_data.severity) : 'info')}));
};
if (goog.DEBUG) {
  RAVEN.Dialog.cloneConfirmationDialog.soyTemplateName = 'RAVEN.Dialog.cloneConfirmationDialog';
}


RAVEN.Dialog.messageDialog = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + soy.$$escapeHtml(opt_data.title) + '</h2><form class="aui" action="#" method="post"><div class="form-body"><div class="aui-message ' + soy.$$escapeHtml(opt_data.severity) + '"><span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.severity) + '"></span>' + soy.$$escapeHtml(opt_data.message) + '</div></div><div class="form-footer buttons-container"><div class="buttons"><input class="aui-button aui-button-primary" type="submit" id="raven-confirm-dialog-form-submit" value="' + soy.$$escapeHtml(opt_data.actionText) + '" /><a href="#" class="aui-button cancel" id="raven-cancel-dialog-form-submit">' + soy.$$escapeHtml(opt_data.secondaryActionText) + '</a></div></div></form>';
};
if (goog.DEBUG) {
  RAVEN.Dialog.messageDialog.soyTemplateName = 'RAVEN.Dialog.messageDialog';
}


RAVEN.Dialog.editValueDialog = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + soy.$$escapeHtml(opt_data.title) + '</h2><form class="aui" action="#" method="post"><div class="form-body">' + soy.$$escapeHtml(opt_data.fieldName) + '<input type="text" id="edit-value-dialog-value" style="margin-left:4px" class="text"><div id="dialog-invalid-value" class="error" style="display: none;">' + soy.$$escapeHtml('Invalid value') + '</div></div><div class="form-footer buttons-container"><div class="buttons"><input class="button" type="submit" id="raven-confirm-dialog-form-submit" value="' + soy.$$escapeHtml(opt_data.actionText) + '" /><a href="#" class="cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
};
if (goog.DEBUG) {
  RAVEN.Dialog.editValueDialog.soyTemplateName = 'RAVEN.Dialog.editValueDialog';
}


RAVEN.Dialog.messageDialogWithData = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + soy.$$escapeHtml(opt_data.title) + '</h2><form class="aui" action="#" method="post"><div class="form-body"><div class="aui-message ' + soy.$$escapeHtml(opt_data.severity) + '"><span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.severity) + '"></span>' + soy.$$escapeHtml(opt_data.message) + '</div><div id="dataList" class="module toggle-wrap"><div class="mod-header"><ul class="ops"></ul><h3 class="toggle-title">' + soy.$$escapeHtml('Conflicts') + '</h3></div><div class="mod-content">' + RAVEN.Dialog.links({idata: opt_data.data, url: opt_data.url}) + '</div></div></div><div class="form-footer buttons-container"><div class="buttons"><input class="button" type="submit" id="raven-confirm-dialog-form-submit" value="' + soy.$$escapeHtml(opt_data.actionText) + '" /><a href="#" class="cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
};
if (goog.DEBUG) {
  RAVEN.Dialog.messageDialogWithData.soyTemplateName = 'RAVEN.Dialog.messageDialogWithData';
}


RAVEN.Dialog.links = function(opt_data, opt_ignored) {
  var output = '<ul>';
  var linkList119 = opt_data.idata;
  var linkListLen119 = linkList119.length;
  for (var linkIndex119 = 0; linkIndex119 < linkListLen119; linkIndex119++) {
    var linkData119 = linkList119[linkIndex119];
    output += '<li style="list-style-type: none;"><a href="' + soy.$$escapeHtml(opt_data.url) + '/browse/' + soy.$$escapeHtml(linkData119) + '" target="_blank">' + soy.$$escapeHtml(linkData119) + '</a></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Dialog.links.soyTemplateName = 'RAVEN.Dialog.links';
}


RAVEN.Dialog.changeValueDialog = function(opt_data, opt_ignored) {
  return '' + RAVEN.Dialog.changeMessageValueDialog(soy.$$augmentMap(opt_data, {title: '' + soy.$$escapeHtml(opt_data.title), message: '' + soy.$$escapeHtml(opt_data.message), actionText: 'Yes'}));
};
if (goog.DEBUG) {
  RAVEN.Dialog.changeValueDialog.soyTemplateName = 'RAVEN.Dialog.changeValueDialog';
}


RAVEN.Dialog.hideTestRunsDialog = function(opt_data, opt_ignored) {
  return '' + RAVEN.Dialog.messageDialog(soy.$$augmentMap(opt_data, {actionText: 'Hide', secondaryActionText: 'Show', severity: '' + ((opt_data.severity) ? soy.$$escapeHtml(opt_data.severity) : 'info')}));
};
if (goog.DEBUG) {
  RAVEN.Dialog.hideTestRunsDialog.soyTemplateName = 'RAVEN.Dialog.hideTestRunsDialog';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-dialog-resources', location = 'templates/dialog/create-testexec.soy' */
// This file was automatically generated from create-testexec.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Dialogs.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Dialogs == 'undefined') { RAVEN.Dialogs = {}; }


RAVEN.Dialogs.createTestExec = function(opt_data, opt_ignored) {
  return ((opt_data.dialogMode == true) ? '<h2>' + soy.$$escapeHtml(opt_data.title) + '</h2>' : '') + '<div id="create-testexec-dialog" class="aui" style="padding-top:20px"><form action="#" method="post" id="issue-selector-form" class="aui"><div class="field-group"><label for="project">' + soy.$$escapeHtml('Project') + '<span class="aui-icon icon-required">Required</span></label><select class="select multi-select edit-labels-inline" id="projects-filter-te" name="raven-project-selector"><optgroup label="All Projects"><option value="' + soy.$$escapeHtml(opt_data.project.key) + '" title="undefined" selected="selected" style="background-image: url(' + soy.$$escapeHtml(opt_data.project.avatarUrls['16x16']) + ');">' + soy.$$escapeHtml(opt_data.project.name) + '</option></optgroup></select></div><div class="content"><div class="field-group"><label for="summary">' + soy.$$escapeHtml('Summary') + '<span class="aui-icon icon-required">Required</span></label><input class="text long-field" id="create-testexec-summary" name="summary" type="text" value="' + soy.$$escapeHtml(opt_data.summary) + '"></div><div class="field-group"><div class="parameters"><input class="hidden" title="projectKeys" value="' + soy.$$escapeHtml(opt_data.project.key) + '"/></div><label for="assignee">' + soy.$$escapeHtml('Assignee') + '</label><select class="single-user-picker js-assignee-picker aui-ss-select" data-show-dropdown-button="true" data-user-type="assignee" data-container-class="long-field" id="assignee-filter" name="raven-assignee-selector"><optgroup label="All Users"><option value="' + soy.$$escapeHtml(opt_data.assignee.name) + '" selected="selected" style="background-image: url(' + soy.$$escapeHtml(opt_data.assignee.avatarUrls['16x16']) + ');">' + soy.$$escapeHtml(opt_data.assignee.displayName) + '</option><option value="-1">' + soy.$$escapeHtml('Unassigned') + '</option></optgroup></select><div class="description">' + soy.$$escapeHtml('Choose a user to assign the Test Execution') + '</div></div><div class="field-group"><label for="priority">' + soy.$$escapeHtml('Priority') + '</label><div id="priority-field"><select class="select" id="priority-field-filter" name="raven-priority-selector" data-container-class="long-field"></select></div><div class="description">' + soy.$$escapeHtml('Start typing to get a list of possible matches or press down to select.') + '</div></div><div class="field-group"><label for="fix-version">' + soy.$$escapeHtml('Fix Version/s') + '</label><div id="fix-version-field"><select class="select raven-multi-select hidden" id="fix-version-filter" name="raven-fix-version-selector" multiple="multiple" data-remove-null-options="true" data-submit-input-val="true" data-input-text style="display: none;"></select></div><div class="description">' + soy.$$escapeHtml('Start typing to get a list of possible matches or press down to select.') + '</div></div><div class="field-group" id="raven-sprint-picker"><label for="raven-sprint">' + soy.$$escapeHtml('Sprint') + '</label><div id="raven-sprint-field"><select id="raven-sprint-filter" name="raven-sprint-selector" class="single-select long-field hidden js-sprint-picker aui-ss-select" data-container-class="long-field" data-saved-id="" data-saved-state=""></select></div><div class="description">' + soy.$$escapeHtml('Start typing to get a list of possible matches or press down to select.') + '</div></div><div class="field-group"><label for="test-environment">' + soy.$$escapeHtml('Test Environments') + '</label><select class="select raven-multi-select hidden" id="test-environment-filter" name="raven-test-environment-selector" multiple="multiple" data-remove-null-options="true" data-submit-input-val="true" data-input-text style="display: none;"></select><div class="description">Start typing to get a list of possible matches or press down to select.<p>Each environment where the Test is to be executed</div></div><div class="field-group" id="revision-field-group" ' + ((opt_data.hasRevision != true) ? 'style="display:none"' : '') + '><label for="revision">' + soy.$$escapeHtml('Revision') + '</label><input class="textfield text long-field" id="revision-field" name="raven-revision" type="text"/><div class="description">' + soy.$$escapeHtml('The system revision for the test execution') + '</div></div>' + ((opt_data.isXEADialog == true) ? '<div class="form-footer buttons-container"><div class="buttons"><input class="button" type="submit" id="issue-selector-form-submit" value="' + soy.$$escapeHtml('Execute with Exploratory App') + '"/><a href="#" class="cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div>' : '<div class="field-group"><div class="checkbox"><input class="checkbox" type="checkbox" name="automaticRedirectToExecuteTestPageOption" id="can-redirect-execute-page" checked><label for="can-redirect-execute-page">' + soy.$$escapeHtml('Execute Immediately') + '</label></div></div><div class="form-footer buttons-container"><div class="buttons"><input class="button" type="submit" id="issue-selector-form-submit" value="' + soy.$$escapeHtml('Create') + '"/><a href="#" class="cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div>') + '</form></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.createTestExec.soyTemplateName = 'RAVEN.Dialogs.createTestExec';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-dialog-resources', location = 'js/dialog/issue-selector.js' */
(function(A){window.RAVEN=window.RAVEN||{};RAVEN.Dialogs=RAVEN.Dialogs||{};var H=0;var y=1;var g=0;var O=1;var B=2;var s="1";var x="2";var j="3";var E=1;RAVEN.Dialogs.FILTER_TESTTYPE="testtype";RAVEN.Dialogs.FILTER_PROJECT="project";RAVEN.Dialogs.FILTER_FOLDER="folder";RAVEN.Dialogs.FILTER_ASSIGNEE="assignee";RAVEN.Dialogs.PROJECT_FIELD_ID="project";RAVEN.Dialogs.TEXT_FIELD_ID="text";RAVEN.Dialogs.RAVEN_EPIC_LINK_FILTER="raven-epic-link";var z=[];var J=null;var u=null;var C=false;function M(){z=[];J=new RAVEN.Dialogs.TestVersion()}function D(Q){var R=z.indexOf(Q.name);if(R>-1){z.splice(R,1)}}function r(Q){var R=z.indexOf(Q.name);if(R<0){z.push(Q.name)}}function P(){var Q=A("#raven-search-result-table tbody tr").find('input[type="checkbox"]');var S=0;for(var R=0;R<Q.length;R++){if(A(Q[R]).is(":checked")){S++}}return Q.length===S}function N(U,Q){var R=new Set();U.forEach(function(V){R.add(V)});var S=new Set();Q.forEach(function(V){S.add(V)});var T={removed:new Set(),added:new Set()};R.forEach(function(V){if(!S.has(V)){T.removed.add(V)}});S.forEach(function(V){if(!R.has(V)){T.added.add(V)}});return T}RAVEN.Dialogs.getDefaultTestLabels=function(Q){var R={};R.label="Tests";R.title=AJS.format("Add Tests to {0} {1}","",Q);R.description="Start typing to get a list of possible matches or press down to select from a list of recent Tests to add to this item";R.enter="Enter Test key";return R};RAVEN.Dialogs.IssueSelectorBase=function(W,U,R,X,T,Q,S,V){this.type=U;this.issueKey=R;this.labels=X;this.action=V;this.mode=W;this.appLinks=T;this.redirectOption=Q;this.projectKey=S;u=S;this.resultsTable=null;this.tableContext=null;this.columns=null;this.getUserColumns();this.columnsPicker=null;this.selectorColumnsId="issue-selector-columns-renderer-id";this.fieldsPicker=null;this.folderRepository=null;this.selectedFields=new Set();this.jqlContext="";this.multiselects={};this.defaultElementsList=null;this.defaultElements=null;return this};RAVEN.Dialogs.IssueSelectorBase.prototype.initIssuePicker=function(S){var R="";if(this.labels&&this.labels.enter){R=this.labels.enter}else{R="Enter Issue key"}var Q=new JIRA.IssuePicker({element:A("#raven-field-issuepicker"),userEnteredOptionsMsg:R,uppercaseUserEnteredOnSelect:true,width:"70%"});if(S===E){new AJS.SingleSelect({element:A("#raven-field-singleissuepicker"),showDropdownButton:true,submitInputVal:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:contextPath+"/rest/api/2/issue/picker?currentJQL=",formatResponse:Q._formatResponse}})}A("#issue-selector-dialog").find(".jira-issue-picker").css("width",350);A("#issue-selector-dialog textarea").focus()};RAVEN.Dialogs.IssueSelectorBase.prototype.getIssueSelectorContent=function(){var S,Q,R;if(this.labels&&this.labels.title){S=this.labels.title}else{S=AJS.format("Choose issue to associate with {0}",this.issueKey)}if(this.labels&&this.labels.label){Q=this.labels.label}else{Q=AJS.format("Issues",this.issueKey)}if(this.labels&&this.labels.description){R=this.labels.description}else{R="Start typing to get a list of possible matches or press down to select from a list of recent issues"}return RAVEN.Dialogs.issueSelectorDialog({dialogMode:this.mode===H,issueKey:this.issueKey,issueType:this.type,jql:this.jql,title:S,label:Q,description:R,contextPath:contextPath,appLinks:this.appLinks,redirectOption:this.redirectOption})};RAVEN.Dialogs.IssueSelectorBase.prototype.getParentIssueSelectorContent=function(){var S="Choose parent issue";var Q="Parent Issue";var R="Start typing to get a list of possible matches or press down to select from a list of recent issues";return RAVEN.Dialogs.parentIssueSelectorDialog({dialogMode:this.mode===H,title:S,label:Q,description:R,appLinks:this.appLinks,redirectOption:this.redirectOption})};RAVEN.Dialogs.IssueSelectorBase.prototype._getFlattenGroups=function(R){var Q=R.searchers["groups"].map(function(S){return S.searchers});return[].concat.apply([],Q)};RAVEN.Dialogs.IssueSelectorBase.prototype._processFieldsAvailableResponse=function(T){var S=this;var R=this._getFlattenGroups(T);var Q=R.filter(function(V){return !!V.isShown&&!S.defaultElements.has(V.id)&&V.id!=="issuetype"&&!S.hideFields.includes(V.id)}).map(function(V){return{id:V.id,name:V.name}});var U=this.extraFields||[];return Q.concat(U)};RAVEN.Dialogs.IssueSelectorBase.prototype._createFieldsPickerDropdown=function(R){var Q=this;var S="raven-asl-labels-filter-id";this.fieldsPicker=new RAVEN.Field.CheckboxMultiSelectView({el:"#raven-fields-selection",id:S,title:"Filter(s)",groupLabel:"Fields",placeholder:"",maxResultsDisplayed:1000,resetSelectedItems:true,fixedTitle:true,items:R,isUpward:false});A("#raven-fields-selection").on("checkboxMultiSelectUpdatedEvt",function(V,X){var U=A("#"+Q.fieldsPicker.id+"-checkbox-multi-select").block();var W=false;X=A("#raven-asl-labels-filter-id-searcher").val();if(!X){X=[]}X.forEach(function(Z){if(!Q.selectedFields.has(Z)){var Y=A("<div class='tmp_marker'></div>").insertBefore("#fields-addition-marker");Q.addField(Z,Y);W=true}});var T=new Set();X.forEach(function(Y){T.add(Y)});Q.selectedFields.forEach(function(Y){if(!T.has(Y)&&!Q.defaultElements.has(Y)){Q.removeField(Y,A("#raven-issue-simple-search-fieldset"));W=true}});Q.selectedFields=T;if(!W){U.unblock()}})};RAVEN.Dialogs.IssueSelectorBase.prototype._expandTextarea=function(Q){RAVEN.Dialogs.expandTextarea(Q);RAVEN.Dialogs.moveSuggestionsBox(Q,"raven-issueselector-jql-suggestions")};RAVEN.Dialogs.IssueSelectorBase.prototype.initSearchDialog=function(W){var X=A("#jira-app-link").val();var S=G(X);var R=this;A("#clear-button").off("click").on("click",function(){A("#raven-issue-simple-search-form :input").val("").prop("checked",false);A("#raven-issue-search").find(".error").remove();if(R.multiselects){A.each(R.multiselects,function(Y,Z){Z.clear();if(Z.clearLozenges){Z.clearLozenges()}})}W.find(".raven-test-repository-folder-picker").trigger("clear");R._setDefaultValues(RAVEN.Dialogs.FILTER_PROJECT,A("div[data-field-id='project'].raven-issue-selector-field-group.field-group"))});A("#raven-issue-simple-search-form",W).off("submit").submit(function(aa){var Y=A("#simple-search-panel-button");var Z=Y.prop("disabled");if(!Z){Y.prop("disabled",true);R.performSimpleSearch(W)}aa.preventDefault();return false});A("#raven-issue-simple-search-form").off("focusout").focusout(function(){setTimeout(function(){var Y=A("#raven-issue-simple-search-form .error").parent().find("input, textarea").toArray().filter(function(Z){return A(Z).val()}).length;A("#simple-search-panel-button").attr("disabled",Y>0)},0)});A("#simple-search-panel-button").click(function(){A("#raven-issue-simple-search-form",W).submit()});A("#raven-issue-simple-search-form",W).off("before-submit").on("before-submit",function(Y){Y.preventDefault();return false});A("#advanced-search-panel-button",W).click(function(){try{t(W,R)}catch(Y){console.log(Y)}finally{return false}});A(document).off("focus.raven-issue-selector-autoExpand").off("input.raven-issue-selector-autoExpand").on("focus.raven-issue-selector-autoExpand","textarea.jql-auto-expand-issue-search.raven-issue-selector-autoExpand",function(){A(".raven-issueselector-jql-suggestions").show();R._expandTextarea("jql-search-text")}).on("input.raven-issue-selector-autoExpand","textarea.jql-auto-expand-issue-search.raven-issue-selector-autoExpand",function(){A(".raven-issueselector-jql-suggestions").show();R._expandTextarea("jql-search-text")});A(document,W).off("advanced-search-selected").on("advanced-search-selected",function(){var Y=A("#jql-search-text");if(!Y.attr("jql-initialized")){d(true,W);S.done(function(Z){if(Z.successful){IssueLinkJQLAutoComplete.initialize({fieldID:"jql-search-text",errorID:"jql-search-error",autoCompleteUrl:K(X),autoCompleteData:Z.data,formSubmitFunction:function(){t(W,R)}})}else{n(false,W);l(true,W)}d(false,W);Y.attr("jql-initialized",1);Y.next(".suggestions").css("top","52px")})}Y.focus()});var Q=R.issueTypeId;if(Array.isArray(R.issueTypeId)){Q=R.issueTypeId[0]}if(Q&&R.mode===y){Q=Q.toString();var U=new FormData();U.append("decorator","none");U.append("type",Q);U.append("check_prev_assignee","true");var V=A.ajax({processData:false,contentType:false,type:"POST",url:AJS.contextPath()+"/secure/QueryComponent!Default.jspa",data:U,success:function(Y){if(Y&&Y.searchers&&Y.searchers["groups"]){R.defaultElementsList=R._getDefaultPickerOptions(Y);R.defaultElements=new Set();R.defaultElementsList.forEach(function(aa){R.defaultElements.add(aa)});var Z=R._processFieldsAvailableResponse(Y);R._createFieldsPickerDropdown(Z)}else{console.error("Response doesn't have the expected format");console.error(Y)}},error:R.showError});var T=A.ajax({processData:false,contentType:false,type:"GET",url:AJS.contextPath()+"/rest/raven/1.0/configuration/testRepository",success:function(Y){R.isTestRepositoryEnabled=!!Y.isEnabled},error:function(Z,aa,Y){console.error("Error while getting Test Repository Configurations",Z,aa,Y)}});A.when(V,T).done(function(Y){const Z=Y[0];R._setDefaultFields(Z,R.fieldsPicker)})}};RAVEN.Dialogs.IssueSelectorBase.prototype._isElementEpicLink=function(Q){return Q.find("select.js-epiclink-checkboxmultiselect").length>0};RAVEN.Dialogs.IssueSelectorBase.prototype._renderSpecialField=function(S,R){var T;if(S.indexOf(RAVEN.Dialogs.RAVEN_EPIC_LINK_FILTER)===0){const Q=this._epicLinkCustomField(S);T=A("option[value="+Q+"]").first().text();return RAVEN.common.components.util.RAVEN_EPIC_LINK_FILTER(S,T)}T=A("option[value="+S+"]").text();if(T==="TestRunStatus"||S==="text"){if(S==="text"){T="Contains text"}return AJS.$(RAVEN.Dialogs.IssueSearch.textField({fieldID:S,fieldName:T}))}else{if(S==="test-repository"){return b(u,R)}}return null};function b(Q,R){R.attr("id","test-repository");R.removeClass("tmp_marker");R.addClass("field-group raven-field-selector-field-group full-width");this.testRepositoryFolderPicker=new RAVEN.TestRepository.Fields.FolderPicker({$picker:R,repositoryPath:"folderStructure",folderJQLName:"testRepositoryFolderTests",entityKey:Q,siblingDropdownElements:[],rootFolderName:"Test Repository",label:"Folder",fullWidth:true,resizeTree:true,addTooltip:true,allDescendants:true});return R}RAVEN.Dialogs.IssueSelectorBase.prototype._addElementToPage=function(V,S,T,U){if(V.filter(".date-searcher").length>0){V.filter(".date-searcher").addClass("field-group").empty().append(this._createDatePicker(S))}if(U.find("[data-field-id="+S+"]").length===0){if(T&&T.length>0){T.replaceWith(V)}else{V.insertBefore("#fields-addition-marker")}V.attr("data-field-id",S).addClass("raven-issue-selector-field-group")}var R=V.find("label[for=searcher-"+S+"]");if(R.length>0&&!R.text()){var Q=A("#raven-asl-labels-filter-id-searcher option[value="+S+"]").text();if(Q){R.text(Q)}}};RAVEN.Dialogs.IssueSelectorBase.prototype._activateDatePicker=function(Q){RAVEN.common.components.util.activateDatePicker(Q)};RAVEN.Dialogs.IssueSelectorBase.prototype._activateDropdownPicker=function(R){var Q=this;if(R.hasClass("aui-field-cascadingselect")){R.find("select").each(function(){var S=A(this);Q.multiselects[S.attr("name")]=new AJS.SingleSelect({element:S,itemAttrDisplayed:"label",showDropdownButton:true,removeOnUnSelect:false,submitInputVal:false,errorMessage:"{0} is not a valid value.",maxInlineResultsDisplayed:15})});R.find("select.cascadingselect-child").on("suggestionsRefreshed",function(U,S){if(S&&S.suggestionsContainerId){var T=R.find("select.cascadingselect-parent").val();if(T&&T.length>0){T=T[0];if(T){A("[id='"+S.suggestionsContainerId+"']").find("a:not(.option-group-"+T+")").parent().remove()}else{A("[id='"+S.suggestionsContainerId+"']").find("a").parent().remove()}}}})}else{if(R.hasClass("aui-field-userlist")){R.find("select").each(function(){var S=A(this);Q.multiselects[S.attr("name")]=new AJS.MultiSelect({element:S,itemAttrDisplayed:"label",showDropdownButton:true,removeOnUnSelect:false,submitInputVal:false,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:false,content:"mixed",errorMessage:"{0} is not a valid value.",maxInlineResultsDisplayed:15,ajaxOptions:{url:AJS.contextPath()+"/rest/api/latest/groupuserpicker",query:true,data:{showAvatar:true},formatResponse:function(U){var V=Q._getValidUserSuggestions(S,U.users);var T=Q._getValidUserGroupsSuggestions(S,U.groups);return[].concat(V).concat(T)}}})})}else{R.find("select").each(function(){var S=A(this);Q.multiselects[S.attr("name")]=new AJS.MultiSelect({element:S,itemAttrDisplayed:"label",showDropdownButton:true,removeOnUnSelect:false,submitInputVal:false,errorMessage:"{0} is not a valid value.",maxInlineResultsDisplayed:15})})}}};RAVEN.Dialogs.IssueSelectorBase.prototype._activateTextInput=function(Q){A(Q).find("input.text").on("keypress",function(R){if(R.which===13||R.key==="Enter"){A("#simple-search-panel-button").click()}})};RAVEN.Dialogs.IssueSelectorBase.prototype._getValidUserGroupsSuggestions=function(S,Q){Q=JIRA.GroupPickerUtil.formatResponse(Q);if(Q.length===1){Q=Q[0];var T=new Set();S.find("option").map(function(U,V){return V.value}).filter(function(U,V){return V&&V.indexOf("group:")===0}).map(function(U,V){return V.substring(6)}).each(function(U,V){T.add(V)});var R=new AJS.GroupDescriptor({id:Q.id(),label:Q.label()});Q.items().filter(function(U){return !T.has(U.value())}).map(function(V){var U=V.properties;U.value="group:"+U.value;return new AJS.ItemDescriptor(U)}).forEach(function(U){R.addItem(U)});return[R]}else{console.error("Unexpected (groups) response format: ",Q)}return Q};RAVEN.Dialogs.IssueSelectorBase.prototype._getValidUserSuggestions=function(R,T){T=JIRA.UserPickerUtil.formatResponse(T);if(T.length===1){T=T[0];var S=new Set();R.find("option").map(function(U,V){return V.value}).filter(function(U,V){return V&&V.indexOf("user:")===0}).map(function(U,V){return V.substring(5)}).each(function(V,U){S.add(U)});var Q=new AJS.GroupDescriptor({id:T.id(),label:T.label()});T.items().filter(function(U){return !S.has(U.value())}).map(function(V){var U=V.properties;U.value="user:"+U.value;return new AJS.ItemDescriptor(U)}).forEach(function(U){Q.addItem(U)});return[Q]}else{console.error("Unexpected (user) response format: ",T)}return T};RAVEN.Dialogs.IssueSelectorBase.prototype._addLabelSuggestions=function(R){var Q=A.Deferred();A.ajax({dataType:"json",contentType:"application/json",type:"GET",url:AJS.contextPath()+"/rest/api/1.0/labels/suggest?query=",success:function(U){var S=R.find("select");if(U&&U.suggestions){S.append(A("<optgroup>",{label:R.find("label").text()}));var T=S.find("optgroup");U.suggestions.filter(function(V){return !!V}).forEach(function(V){var W=V.label;T.append(A("<option>",{value:W}).text(W))});Q.resolve(R)}},error:function(T,U,S){console.error("Unable to obtain Label suggestions");console.error(T);console.error(U);console.error(S)}});return Q.promise()};RAVEN.Dialogs.IssueSelectorBase.prototype._addFieldProcessResponse=function(S,U,T){var R=this;if(S){var Q=A.Deferred();var V=Q.promise();if(U==="labels"){V=this._addLabelSuggestions(AJS.$(S))}else{if(RAVEN.isFunction(S)){S(T);A("#"+R.fieldsPicker.id+"-checkbox-multi-select").unblock()}else{Q.resolve(AJS.$(S))}}V.done(function(W){R._addElementToPage(W,U,T,A("#raven-issue-simple-search-fieldset"));R._activateDatePicker(W);R._activateDropdownPicker(W);R._activateTextInput(W);R._setDefaultValues(U,W);if(U==="project"){h()}A("#"+R.fieldsPicker.id+"-checkbox-multi-select").unblock()})}else{A("#"+R.fieldsPicker.id+"-checkbox-multi-select").unblock()}};function h(){var Q=function(){var R=w(A("#raven-issue-selector-dialog #searcher-pid").val());if(R.length!==1){A(".raven-test-repository-folder-picker#test-repository-picker").trigger("disable")}else{A.ajax({dataType:"json",contentType:"application/json",type:"GET",url:AJS.contextPath()+"/rest/api/2/project/"+R[0],success:function(S){u=S.key;A(".raven-test-repository-folder-picker#test-repository-picker").trigger("enable",[S.key])},error:function(T,U,S){console.error("Error while getting the Project Key",T,U,S)}})}};A("#raven-issue-selector-dialog #searcher-pid").on("selected unselect",Q)}function w(U){var T=[];var S=new Set();if(Array.isArray(U)){for(var R=0;R<U.length;R++){const Q=U[R];if(!S.has(Q)){T.push(Q);S.add(Q)}}}return T}RAVEN.Dialogs.IssueSelectorBase.prototype._addFieldNotAvailable=function(S,T){var Q=A("#raven-asl-labels-filter-id-searcher option[value="+S+"]").text();var R=RAVEN.Dialogs.IssueSearch.fieldNotAvailable({fieldID:S,fieldName:Q});this._addFieldProcessResponse(R,S,T)};RAVEN.Dialogs.IssueSelectorBase.prototype.addField=function(U,T){var Q=this;var S=Q._renderSpecialField(U,T);if(!S){var R=new FormData();R.append("fieldId",U);R.append("decorator","none");R.append("jqlContext","");A.ajax({processData:false,contentType:false,type:"POST",url:AJS.contextPath()+"/secure/QueryComponentRendererEdit!Default.jspa",data:R,dataType:"text",success:function(V){if(V){if(Q._isElementEpicLink(A(V))){U=Q._epicLinkNameBuilder(U);Q.addField(U,T)}else{Q._addFieldProcessResponse(V,U,T)}}else{Q._addFieldNotAvailable(U,T)}},error:function(){console.log("Unable to find renderer for element: "+U+". Maybe it's an Xray custom element?")},complete:function(){A("#"+Q.fieldsPicker.id+"-checkbox-multi-select").unblock()}})}else{Q._addFieldProcessResponse(S,U,T)}};RAVEN.Dialogs.IssueSelectorBase.prototype.removeField=function(Q,T){var S=this._removeFieldElementFinder(Q,T);var R=this;if(S.length>0){S.find("select").each(function(){var U=A(this).attr("name");if(U&&U in R.multiselects){delete R.multiselects[U]}});S.remove()}A("#"+R.fieldsPicker.id+"-checkbox-multi-select").unblock()};RAVEN.Dialogs.IssueSelectorBase.prototype._removeFieldElementFinder=function(Q,S){var R=S.find("[data-field-id='"+Q+"']");if(R.length>0){return R}return S.find("[data-field-id='"+this._epicLinkNameBuilder(Q)+"']")};RAVEN.Dialogs.IssueSelectorBase.prototype._getDefaultPickerOptions=function(R){var S=null;var Q=this._getFlattenGroups(R).filter(function(T){return T.name==="Test Type"});if(Q&&Q.length>0){S=Q[0].id}return[RAVEN.Dialogs.PROJECT_FIELD_ID,S,RAVEN.Dialogs.TEXT_FIELD_ID]};RAVEN.Dialogs.IssueSelectorBase.prototype._setDefaultFields=function(R,V){if(V){var Q=this;var U=this._getFlattenGroups(R).filter(function(W){return !!W.isShown}).map(function(W){return W.id});var S=new Set();U.forEach(function(W){S.add(W)});var T=this.defaultElementsList.filter(function(W){return S.has(W)});if(this.type==="TEST"&&this.isTestRepositoryEnabled){T.push("test-repository")}T.forEach(function(X){var W=A("<div class='tmp_marker'></div>").insertBefore("#fields-addition-marker");Q.addField(X,W)});A("#raven-issue-search-spinner").remove()}};RAVEN.Dialogs.IssueSelectorBase.prototype.formatSelectOption=function(S){if(S.id&&S.element.length>0&&S.element[0].dataset.icon){var Q=S.element[0].dataset.fallbackIcon||"";var R=S.element[0].dataset.icon;return"<span><img class='raven-xs-icon' alt='"+Q+"'src='"+R+"'/>&nbsp;"+S.text+"</span>"}else{return"<span>"+S.text+"</span>"}};RAVEN.Dialogs.IssueSelectorBase.prototype._getProjectId=function(){var S=A.Deferred();var R=JIRA.API.Projects.getCurrentProjectId();if(R){S.resolve(R)}else{var Q=this.issueKey.split("-")[0];A.ajax({dataType:"json",contentType:"application/json",type:"GET",url:AJS.contextPath()+"/rest/api/2/project/"+Q,success:function(T){S.resolve(T.id)},error:function(U,V,T){console.error("Error retrieving the Project ID!");console.error(U);console.error(V);console.error(T);S.resolve(null)}})}return S.promise()};RAVEN.Dialogs.IssueSelectorBase.prototype._setDefaultValues=function(R,U){var Q=this;switch(R){case"project":Q._getProjectId().done(function(V){if(V){U.find("option[value="+V+"]").prop("selected",true);var W=U.find("select").attr("name");if(W in Q.multiselects){Q.multiselects[W]._restoreSelectedOptions()}A("#raven-issue-selector-dialog #searcher-pid").trigger("selected")}});break;case"issuetype":var T=Q.issueTypeId;U.find("option[value="+T+"]").prop("selected",true);var S=U.find("select").attr("name");if(S in Q.multiselects){Q.multiselects[S]._restoreSelectedOptions()}break}};RAVEN.Dialogs.IssueSelectorBase.prototype._createDatePicker=function(Q){var R=A(".raven-control-fieldset option[value="+Q+"]").text();return AJS.$(RAVEN.Dialogs.IssueSearch.datePickers({fieldID:Q,fieldName:R}))};RAVEN.Dialogs.IssueSelectorBase.prototype.performSimpleSearch=function(T){var Q=this;try{A("#search-results-table",T).empty();var S=A("#raven-issue-search-text",T).val();S=A.trim(S);if(Q.mode===y||S){Q.doSimpleSearch(S,T)}else{AJS.messages.info("#search-results-table",{body:"Please enter search value.",closeable:false});A("#simple-search-panel-button").prop("disabled",false)}}catch(R){console.log(R)}finally{A("#raven-no-results-image").hide();return false}};function K(Q){if(Q&&Q!==""){return contextPath+"/rest/remoteJiraIssueLink/1/remoteJira/autocomplete?appId="+Q}return""}function t(U,R){RAVEN.Dialogs.resetTextArea("jql-search-text");R._expandTextarea("jql-search-text");A(".raven-issueselector-jql-suggestions").hide();var Q=A("#advanced-search-panel-button");var T=Q.prop("disabled");if(!T){Q.prop("disabled",true);A("#advanced-search-results-table",U).empty();var S=A("#jql-search-text",U).val();S=A.trim(S);if(S){R.doAdvancedSearch(encodeURIComponent(S),U)}else{A("#advanced-search-results-table").empty();A("#advanced-search-results-table").append('<span class="aui-icon aui-icon-small aui-iconfont-info aui-iconfont-info-filled" style="color: #0052cc"></span><span class="raven-issueselector-info-message">'+"Please enter search value."+"</span>");Q.prop("disabled",false);A("#raven-issue-selector-dialog .raven-issue-results-button").remove()}}}function e(R,Q){A("#raven-issue-search-loading, #raven-issue-advanced-search-loading",Q).toggleClass("hidden",!R)}function d(R,Q){A("#autocomplete-loading",Q).toggleClass("hidden",!R)}function l(R,Q){A("#autocomplete-failed",Q).toggleClass("hidden",!R)}function n(R,Q){A("#jql-search-error",Q).toggleClass("hidden",!R)}function v(Q){if(!Q){return null}return'(project = "'+Q+'")'}function c(R){if(!R){return null}if(R.constructor===Array){var S="(";for(var Q=0;Q<R.length;Q++){S+="(issuetype = "+R[Q]+")";if(Q<R.length-1){S=S+=" OR "}}S+=")";return S}return"(issuetype = "+R+")"}function a(Q){var R=[];Q.each(function(U,V){V=A(V);var T=V.attr("name");var S=V.val();if(Array.isArray(S)){S.forEach(function(W){R.push({key:T,value:W})})}else{if(S){R.push({key:T,value:S})}}});return R}function F(Q){var R=[];Q.each(function(T,V){V=A(V);var W=V.find(":checked");if(W.length>0){var U=W.parent().data("date-type");var S=W.parent().find("input[type=text]");S.each(function(X,Z){if(Z.value){var Y=Z.value;if(U==="withinTheLast"||U==="moreThan"){Y="-"+Y}R.push({key:Z.name,value:Y})}})}});return R}RAVEN.Dialogs.IssueSelectorBase.prototype._executeJqlCall=function(S,U,W,R,V,X){var T=this;if(T.jql!==null&&this.type!=="TESTSET"){S+=S?" and "+T.jql:T.jql}if(T.issueTypeId){var Q="issueType IN ("+T.issueTypeId+")";S+=S?" and "+Q:Q}if(S){if(U){U+=U?" and "+S:S;U=encodeURIComponent(U)}W+=W?" and "+S:S;W=encodeURIComponent(W)}if(this.mode===y){if(U){T.advancedJqlSearch(U).done(function(Y){if(Y.successful&&Y.data){e(false,R);T.showResults(Y,R)}else{if(V){T.createServerSearchDataTable(W,R)}else{e(false,R);if(Y.successful){T.showResults(Y,R)}else{L(Y)}}}A("#simple-search-panel-button, #advanced-search-panel-button").attr("disabled",false)})}else{T.createServerSearchDataTable(W,R)}}else{T.jqlSearch(U,X).done(function(Y){if(Y.successful&&Y.data){e(false,R);T.showResults(Y,R)}else{if(V){T.jqlSearch(W,X).done(function(Z){e(false,R);if(Z.successful){T.showResults(Z,R)}else{L(Z)}})}else{e(false,R);if(Y.successful){T.showResults(Y,R)}else{L(Y)}}}A("#simple-search-panel-button").prop("disabled",false)})}};RAVEN.Dialogs.IssueSelectorBase.prototype._generateJqlFromSpecialFields=function(){return A("#raven-issue-selector-dialog [data-is-xray-jql=true]").map(function(){var T=A(this).data("field-id");var S=A(this).find("select").val();switch(T){case"testset-filter":return jqlExpressionGenerator.getTestSetJqlClause(S);case"testset-version-filter":if(S&&S.length>0){var R=S[S.length-1].split(/-(.+)/);if(!R||R.length<2){return null}var U=R[0];var Q=R[1];return jqlExpressionGenerator.getTestSetVersionJqlClause(U,Q)}return null;case"requirement-version-filter":if(S&&S.length>0){var R=S[S.length-1].split(/-(.+)/);if(!R||R.length<2){return null}var U=R[0];var Q=R[1];return jqlExpressionGenerator.getRequirementVersionJqlClause(U,Q)}return null;case"filter-filter":return jqlExpressionGenerator.getFilterJqlClause(S);case"requirement-filter":return jqlExpressionGenerator.getRequirementJqlClause(S);case"test-repository":if(!A(this).hasClass("picker-disable")){S=A(this).find("#test-repository-field-name").val();return jqlExpressionGenerator.getTestRepositoryFolderJqlClause(u,S,"test-repository")}return null;default:return null}}).filter(function(){return !!this}).get().join(" AND ")};RAVEN.Dialogs.IssueSelectorBase.prototype._epicLinkNameBuilder=function(Q){return RAVEN.Dialogs.RAVEN_EPIC_LINK_FILTER+":"+Q};RAVEN.Dialogs.IssueSelectorBase.prototype._epicLinkCustomField=function(Q){return Q.split(":")[1]};RAVEN.Dialogs.IssueSelectorBase.prototype._getFieldOriginalName=function(Q){if(Q&&Q.indexOf(RAVEN.Dialogs.RAVEN_EPIC_LINK_FILTER)>=0){return this._epicLinkCustomField(Q)}return Q};RAVEN.Dialogs.IssueSelectorBase.prototype._generateJqlFromFields=function(T){function Q(Y){var X=Y;var W=S._generateJqlFromSpecialFields();W=W||null;if(W){X+=X?" AND "+W:W}return X}var S=this;var R=A.Deferred();var V=[];if(T.length>0){var U=new FormData();T.forEach(function(X){const W=S._getFieldOriginalName(X.key);U.append(W,X.value);V[W]={value:X.value}});A.ajax({url:AJS.contextPath()+"/secure/QueryComponentRendererValue!Default.jspa",processData:false,contentType:false,type:"POST",data:U,success:function(Y){var X=[];const W=Object.keys(Y).map(function(Z){return RAVEN.common.components.util.FiltersPickerUtils.getFieldJql(Y,V,Z).always(function(aa){X.push(aa)})});A.when.apply(A,W).always(function(){var Z=X.filter(function(aa){return !!aa}).join(" AND ");Z=Q(Z);R.resolve(Z)})},error:function(Y,W,X){console.error("Error getting JQL from server",Y,W,X);R.resolve("")}})}else{R.resolve(Q(""))}return R.promise()};RAVEN.Dialogs.IssueSelectorBase.prototype.doSimpleSearch=function(Z,W){e(true,W);var aa=A("#jira-app-link").val();var ab=this;var ac="";var S="";if(Z){ac='key = "'+Z+'"';S='(summary ~ "'+Z+'" OR description ~ "'+Z+'" OR comment ~ "'+Z+'")'}var Q="";var R=c(this.issueTypeId);if(R!==null){Q=R}if(this.mode===y){var Y=[];var X=A("#raven-issue-simple-search-form .field-group");var V=X.find("select");var U=X.find("input.text:not(.raven-date-input)");var T=X.filter(".date-searcher.field-group");Y=Y.concat(a(V));Y=Y.concat(a(U));Y=Y.concat(F(T));ab._generateJqlFromFields(Y).done(function(ad){ab._executeJqlCall(ad,ac,S,W,Z,aa)})}else{ab._executeJqlCall(Q,ac,S,W,Z,aa)}};var k={OK:"OK",SANITIZED:"SANITIZED",ERROR:"ERROR"};var i=function(R){var Q=new A.Deferred();A.ajax({dataType:"json",contentType:"application/json",type:"GET",url:contextPath+"/rest/raven/1.0/issue/search/sanitizeUnorderable?jql="+R,success:function(S){Q.resolve(S.jql)},error:function(T,U,S){console.error("Error sanitizing JQL function");console.error(T);console.error(U);console.error(S);Q.reject()}});return Q.promise()};RAVEN.Dialogs.IssueSelectorBase.prototype.doAdvancedSearch=function(R,Q){var S=this;i(R).then(function(T){p.call(S,T,Q)})};function p(S,R){var T=this;S="("+S+")";var Q=c(this.issueTypeId);if(Q!==null){S+=" and "+Q}if(T.jql!==null&&(m(this.type))){S+=" and "+T.jql}if(T.type==="TESTPLAN"){S+=" and "+T.jql}A("#raven-no-results-image").show();if(this.mode===y){this.createServerSearchDataTable(encodeURIComponent(S),R,"advanced-search-results-table",B)}else{e(true,R);var U=A("#jira-app-link").val();this.jqlSearch(S,U).done(function(V){A("#advanced-search-panel-button").prop("disabled",false);e(false,R);if(V.successful){T.showResults(V,R)}else{if(V.status===400){AJS.messages.warning("#advanced-search-results-table",{body:"Invalid JQL query.",closeable:false});A("#advanced-search-panel-button").prop("disabled",false)}else{L(V)}}})}}function m(Q){return(Q==="TESTSET"||Q==="TEST")}RAVEN.Dialogs.IssueSelectorBase.prototype.jqlSearch=function(Q,T){var R=A.Deferred();var S;if(T&&T!==""){S=contextPath+"/rest/remoteJiraIssueLink/1/remoteJira/search?jql="+Q+"&appId="+T}else{if(Q){Q="("+Q+")"}Q+=" and key != "+this.issueKey;S=contextPath+"/rest/api/2/search?jql="+Q}JIRA.SmartAjax.makeRequest({url:S,complete:function(V,W,U){R.resolve(U)}});return R.promise()};RAVEN.Dialogs.IssueSelectorBase.prototype.advancedJqlSearch=function(Q){var R=A.Deferred();if(Q){Q="("+Q+")"}Q+=" and key != "+this.issueKey;var S=contextPath+"/rest/raven/1.0/issue/search?jql="+Q+"&issueType="+this.type;JIRA.SmartAjax.makeRequest({url:S,complete:function(U,V,T){R.resolve(T)}});return R.promise()};function G(T){var Q=A.Deferred();var S;var R;if(T&&T!==""){R=contextPath+"/rest/remoteJiraIssueLink/1/remoteJira/autocompletedata?appId="+T;S=true}else{R=contextPath+"/rest/api/2/jql/autocompletedata";S=false}JIRA.SmartAjax.makeRequest({url:R,complete:function(V,W,U){if(!U.successful&&S){JIRA.SmartAjax.makeRequest({url:contextPath+"/rest/remoteJiraIssueLink/1/remoteJira/autocompletedata/legacy?appId="+T,complete:function(Y,Z,X){Q.resolve(X)}})}else{Q.resolve(U)}}});return Q.promise()}RAVEN.Dialogs.IssueSelectorBase.prototype.showResults=function(R,Q){if(this.mode===H){this.showSimpleResults(R,Q)}else{this.showAdvancedResults(R,Q)}};RAVEN.Dialogs.IssueSelectorBase.prototype.showSimpleResults=function(T,R){var S=this;var Q=RAVEN.Dialogs.IssueSearch.linkResultsTable({result:T.data,contextPath:AJS.contextPath()});A("#search-results-table",R).html(Q);A("#raven-search-result-table tbody tr",R).click(function(){var U=A(this).children().first().data("key");S.remoteJiraSearchDialog.hide();A("#raven-field-issuepicker").trigger("selectOption",[{value:U}]);A("#issue-selector-dialog textarea").focus().select()})};RAVEN.Dialogs.IssueSelectorBase.prototype.showAdvancedResults=function(S,R){var Q=RAVEN.Dialogs.IssueSearch.resultTable({result:S.data,columns:self.columns.visibleColumnLayoutItems});A("#advanced-search-results-table",R).html(Q);this._addColumnButton("#advanced-search-results-table",B);this._initColumnsButton(B);if(A("#raven-search-result-table").length>0){var T=I("advanced-search-results-table");A('#advanced-search-results-table th input[name="all"]').change(function(){if(A(this).is(":checked")){A('input[type="checkbox"]',T.fnGetNodes()).attr("checked","checked")}else{A('input[type="checkbox"]',T.fnGetNodes()).removeAttr("checked")}});A(T.fnGetNodes()).click(function(V){var U=A(this).find('input[type="checkbox"]');if(U.is(":checked")){U.removeAttr("checked")}else{U.attr("checked","checked")}});A('input[type="checkbox"]',T.fnGetNodes()).click(function(U){U.stopPropagation()})}};RAVEN.Dialogs.IssueSelectorBase.prototype.getSelectedIssues=function(){var Q=[];A(document.body).find("#issue-selector-dialog ul.items li.item-row").each(function(){var R=A(this).find("button.value-item span.value-text");Q.push(R.text())});return Q};RAVEN.Dialogs.IssueSelectorBase.prototype.getUserColumns=function(){var Q=this;A.ajax({dataType:"json",contentType:"application/json",type:"GET",url:contextPath+"/rest/raven/1.0/issue/search/columns?issueType="+Q.type+"&action="+Q.action,success:function(R){Q.columns=R},error:function(S,T,R){console.error("Error retrieving user columns!");console.error(S);console.error(T);console.error(R)}})};RAVEN.Dialogs.IssueSelectorBase.prototype._updateColumnsInServer=function(S,T){var Q={};this.columns.availableColumnLayoutItems.forEach(function(U){Q[U.id]=U});this.columns.visibleColumnLayoutItems=S.map(function(U){return Q[U]});if(this.columns.visibleColumnLayoutItems.length>0){var R=this;A.ajax({type:"POST",url:AJS.contextPath()+"/rest/raven/1.0/issue/search/columns?issueType="+R.type,processData:true,async:true,data:JSON.stringify(R.columns),contentType:"application/json",success:function(){if(T){R.createServerSearchDataTable(R.tableContext.jql,R.tableContext.$context,R.tableContext.tableId,R.tableContext.buttonSuffix)}},error:function(V,W,U){console.error("Error updating new columns in server");console.error(V);console.error(W);console.error(U)}})}else{if(T){this._restoreDefaultColumns()}}};RAVEN.Dialogs.IssueSelectorBase.prototype._addColumnButton=function(S,R){if(A(S).prev(".raven-issue-results-button").length===0){var Q=RAVEN.Dialogs.IssueSearch.renderColumnsButton({suffix:R});A(Q).insertBefore(A(S))}};RAVEN.Dialogs.IssueSelectorBase.prototype._refreshTable=function(Q){this._updateColumnsInServer(Q,true)};RAVEN.Dialogs.IssueSelectorBase.prototype._restoreDefaultColumns=function(){var Q=this;A.ajax({type:"POST",url:AJS.contextPath()+"/rest/raven/1.0/issue/search/columns/restore?issueType="+Q.type+"&action="+Q.action,processData:true,async:true,contentType:"application/json",success:function(S){Q.columns=S;var T=Q.columns.visibleColumnLayoutItems.map(function(U){return U.id});Q._refreshTable(T);Q.columnsPicker.bulkSelectItems(T,true)},error:function(T,U,S){console.error("Error restoring columns in server");console.error(T);console.error(U);console.error(S)}});var R=A("#raven-issue-selector-dialog .raven-issue-search-tabs-pane.active-pane").data("pane-id");this._closeColumnsSuggestions(R)};RAVEN.Dialogs.IssueSelectorBase.prototype._closeColumnsSuggestions=function(Q){if(A("#"+this.selectorColumnsId+"-"+Q+"-searcher-multi-select").length>0){A("#"+this.selectorColumnsId+"-"+Q+"-items-trigger-text").click()}};RAVEN.Dialogs.IssueSelectorBase.prototype._insertRestoreOption=function(S){var Q=this;A(S).parent().find(".check-list-group-actions").remove();var R=RAVEN.Dialogs.IssueSearch.renderRestoreDefaultsOption();var V=A(S).parent().find(".check-list-field-container");A(R).insertAfter(V);var U=A(S).parent().find(".clear-all.raven-restore-option");var T="Restore Defaults";U.text(T).on("click",function(W){W.stopPropagation();W.preventDefault();Q.columnsPicker.commit();Q._restoreDefaultColumns()});U.parent().attr("style","display: block !important")};RAVEN.Dialogs.IssueSelectorBase.prototype._initColumnsButton=function(U){var T="#issue-selector-columns-button-"+U;var V=this.selectorColumnsId+"-"+U;if(A(T).find("#"+V+"-form").length===0){var R=this.columns.visibleColumnLayoutItems.map(function(W){return new AJS.ItemDescriptor({value:W.id,label:W.label,title:W.name,allowDuplicate:false,selected:null})});var S=this;this.columnsPicker=new RAVEN.Field.CheckboxMultiSelectView({el:T,id:V,title:"Columns",groupLabel:"",placeholder:"",maxResultsDisplayed:1000,resetSelectedItems:true,fixedTitle:true,items:S.columns.availableColumnLayoutItems});this.columnsPicker._bulkSelectItems(R);var Q=JIRA.Events.CHECKBOXMULITSELECT_READY+"."+T;A(document).on(JIRA.Events.CHECKBOXMULITSELECT_READY,function(X,W){A(document).trigger(Q,[X,W]);S.columnsPicker.saveOriginalState()});A(document).off(Q).on(Q,function(X,W){if(W&&W[0]&&W[0].id&&W[0].id.indexOf(V)>=0){setTimeout(function(){S._insertRestoreOption(W);var Y=A("#"+S.selectorColumnsId+"-"+U+"-searcher-multi-select");Y.append(RAVEN.Dialogs.IssueSearch.controlButtonsPanel());Y.find(".issue-selector-button-panel .aui-button.submit").click(function(){A("#"+V+"-checkbox-multi-select").block();S.columnsPicker.commit();var aa=A("#search-results-table thead th").map(function(ab,ac){return A(ac).attr("data-column-id")}).filter(function(ab,ac){return !!ac}).toArray();var Z=N(aa,S.columnsPicker.selectedItemsId.toArray());aa=aa.filter(function(ab){return !Z.removed.has(ab)});Z.added.forEach(function(ab){aa.push(ab)});S._refreshTable(aa);S._closeColumnsSuggestions(U)});Y.find(".issue-selector-button-panel .aui-button.close-dialog").click(function(){S._closeColumnsSuggestions(U)});Y.on("remove",function(){S.columnsPicker.rollback()})},10)}})}};RAVEN.Dialogs.IssueSelectorBase.prototype._destroyTable=function(){try{if(this.resultsTable){this.resultsTable.fnDestroy(true)}}catch(Q){console.log("Unable to destroy DataTable. Maybe the table is not initialized or already have been destroyed")}A("#raven-issue-selector-dialog .data-table .aui-message").remove();A("#raven-issue-selector-dialog .raven-issue-results-button").remove()};RAVEN.Dialogs.IssueSelectorBase.prototype.addToSelectedValues=function(Q){r(Q);J.addValue(Q.name)};RAVEN.Dialogs.IssueSelectorBase.prototype.removeFromSelectedValues=function(Q){D(Q);J.removeValue(Q.name)};RAVEN.Dialogs.IssueSelectorBase.prototype.createServerSearchDataTable=function(Q,U,S,V){S=S||"search-results-table";if(S[0]!=="#"){S="#"+S}V=V||O;M();e(false,U);this._destroyTable();var X=this;var T=this.type==="TEST"?this.testTypeCFMeta.key:null;var R=RAVEN.Dialogs.IssueSearch.renderSearchResultsTable({columns:X.columns.visibleColumnLayoutItems});A(S).hide();this._addColumnButton(S,V);A(S,U).html(R);this._initColumnsButton(V);if(A("#raven-search-result-table").length>0){e(true,U);var Y=contextPath+"/rest/raven/1.0/issue/search?jql="+Q+"&issueType="+this.type;if(T){Y+="&hideUnexecutableTests="+A("#cbHideForbiddenTests").is(":checked")}if(this.action===RAVEN.TestVersionConstants.addTestsToTestExecution){Y+="&action="+this.action}this.tableContext={jql:Q,$context:U,tableId:S,buttonSuffix:V};var W=A("#raven-search-result-table").xrayDataTable({oLanguage:{oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sInfoEmpty:"No tests to show",sEmptyTable:"No tests available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sZeroRecords:"No records found",sInfoFiltered:"(filtered from _MAX_ total entries)",sSearch:"Search",sLengthMenu:"Show _MENU_ entries"},bServerSide:true,sAjaxSource:Y,sAjaxDataProp:"entries",bProcessing:false,bFilter:false,bLengthChange:false,iDisplayLength:10,bDestroy:true,bAutoWidth:false,sPaginationType:"full_numbers",aaSorting:[],bSort:true,aoColumnDefs:this._createServerDataTableColumnDefs(),fnServerData:function(Z,aa,ab){A.ajax({dataType:"json",contentType:"application/json",type:"GET",url:Z,data:aa,success:function(ac){if(ac&&ac.iTotalDisplayRecords>0){A(".raven-columns-button").show()}else{A(".raven-columns-button").hide()}ab(ac)},error:function(ad,ae,ac){X.showError(ad,ae,ac);e(false,U);if(P()){A("#page-select-all").attr("checked","checked")}}})},fnDrawCallback:function(Z){X.toogleSearchResultsTable(Z,S);e(false,U);if(P()){A("#page-select-all").attr("checked","checked")}A("#"+X.selectorColumnsId+"-"+V+"-checkbox-multi-select").unblock();A("#simple-search-panel-button, #advanced-search-panel-button").attr("disabled",false);J.onTableDraw()},fnRowCallback:function(ad,ac,ab,aa){ad.id=ac.key;A(ad).data("key",ac.key);A("#page-select-all").removeAttr("checked");if(z.indexOf(ac.key)>-1){var Z=A(ad).find('input[type="checkbox"]');if(Z.length>0){Z.attr("checked","checked")}}return ad}});X.resultsTable=W;A("#raven-search-result-table thead tr th:first").addClass("fixed");A("#raven-search-result-table thead tr").sortable({items:"th:not(.fixed)",placeholder:"dragging-placeholder",update:function(){var aa=A("#raven-search-result-table thead tr th");var Z=aa.map(function(){return A.trim(A(this).data("column-id"))}).filter(function(){return !!this.length}).get();X.resultsTable.fnDestroy();X._updateColumnsInServer(Z,true)}})}A('#raven-search-result-table th input[name="all"]').change(function(){if(A(this).is(":checked")){A('input[type="checkbox"]',W.fnGetNodes()).attr("checked","checked");var Z=W.fnGetNodes();for(var aa=0;aa<Z.length;aa++){X.addToSelectedValues({name:Z[aa].id})}}else{A('input[type="checkbox"]',W.fnGetNodes()).removeAttr("checked");var Z=W.fnGetNodes();for(var aa=0;aa<Z.length;aa++){X.removeFromSelectedValues({name:Z[aa].id})}}});A(document).off("click","#raven-search-result-table tbody tr");A(document).on("click","#raven-search-result-table tbody tr",function(aa){var Z=A(this).find('input[type="checkbox"]');if(Z.is(":checked")){X.removeFromSelectedValues(Z[0]);Z.removeAttr("checked");A("#page-select-all").removeAttr("checked")}else{X.addToSelectedValues(Z[0]);Z.attr("checked","checked");if(P()){A("#page-select-all").attr("checked","checked")}}});A(document).off("click",'#raven-search-result-table tbody tr input[type="checkbox"]');A(document).on("click",'#raven-search-result-table tbody tr input[type="checkbox"]',function(aa){var Z=A(this);if(!Z.is(":checked")){X.removeFromSelectedValues(Z[0]);A("#page-select-all").removeAttr("checked")}else{X.addToSelectedValues(Z[0]);if(P()){A("#page-select-all").attr("checked","checked")}}});A(document).off("click",'#raven-search-result-table tr input[type="checkbox"]');A(document).on("click",'#raven-search-result-table tr input[type="checkbox"]',function(Z){Z.stopPropagation()})};RAVEN.Dialogs.IssueSelectorBase.prototype.toogleSearchResultsTable=function(U,S){var T=A("#raven-search-result-table").xrayDataTable();var R=A("#raven-issue-selector-dialog .dialog-button-panel .button-panel-button.button-panel-submit-button");var Q=R.last();if(!T||T.fnRecordsTotal()===0){T.fnDestroy(true);R.hide();A(S).empty().append('<span class="aui-icon aui-icon-small aui-iconfont-info aui-iconfont-info-filled" style="color: #0052cc"></span><span class="raven-issueselector-info-message">'+"Search returned no results."+"</span>");A("#raven-issue-selector-dialog .raven-issue-results-button").remove()}else{if(U.meta){this.allSearchResultKeys=U.meta}Q.text("Add all"+" ("+T.fnRecordsTotal()+")");R.show()}A(S).show()};RAVEN.Dialogs.IssueSelectorBase.prototype.showError=function(R,S,Q){if(R.status===400){A("#raven-issue-selector-dialog .active-pane .data-table").empty().append('<span class="icon jqlerror"></span><span class="raven-issueselector-error-message">'+f(R.responseText)+"</span>").show();A("#raven-issue-selector-dialog .raven-issue-results-button").remove()}A("#simple-search-panel-button, #advanced-search-panel-button").attr("disabled",false);A("#raven-issue-selector-dialog .dialog-button-panel .button-panel-button.button-panel-submit-button").hide()};function f(Q){var R=Q.replace("Errors: ["," ");R=R.replace("], Warnings: []","");return R}RAVEN.Dialogs.IssueSelectorBase.prototype._createServerDataTableColumnDefs=function(){var R=[{mData:null,mDataProp:null,sWidth:"20px",sDefaultContent:"<input type='checkbox' ></input>",bSortable:false,bSearchable:false,mRender:function(T,S,U){return'<input type="checkbox" name="'+U.key+'" value="'+U.key+'"/>'},aTargets:[0]}];if(this.columns&&this.columns.visibleColumnLayoutItems){var Q=this.columns.visibleColumnLayoutItems;Q=Q.map(function(T,S){return{mData:T.id,bSortable:T.sortable,bSearchable:false,sTitle:AJS.escapeHTML(T.label),aTargets:[S+1]}});R=R.concat(Q)}return R};function I(Q){Q=Q||"raven-search-result-table";Q="#"+Q;return A(Q).xrayDataTable({bProcessing:false,bFilter:false,bLengthChange:false,iDisplayLength:8,bDestroy:true,bAutoWidth:false,sPaginationType:"full_numbers",aaSorting:[],bSort:true,aoColumnDefs:[{bSortable:false,aTargets:[0,1]}]})}function L(Q){AJS.messages.error("#raven-issue-selector-dialog .active-pane .data-table",{body:JIRA.SmartAjax.buildSimpleErrorContent(Q),closeable:false});A("#simple-search-panel-button, #advanced-search-panel-button").attr("disabled",false)}RAVEN.Dialogs.createIssueSelectorDialog=function(ab,S,Y,T,Z,aa,ad,X,U,R){RAVEN.Dialogs.IssueSelectorBase.call(this,H,ab,T,Z,X,U,R);this.issueTypeId=Y;this.projectKey=R;var ac=this;this.remoteJiraSearchDialog=null;this.jql=S;var W=new JIRA.FormDialog({id:"raven-issue-selector-dialog",width:680,height:"250px",stacked:true,content:function(af){var ae=ac.getIssueSelectorContent();V(A(ae).filter("#issue-selector-dialog"));af(A(ae));ac.initIssuePicker()},submitHandler:function(ae){ae.preventDefault();aa(ac.getSelectedIssues(),Q());W.hide()},autoClose:true});function Q(){return AJS.$("#can-redirect-execute-page").is(":checked")}A(document).off("click.raven.issue.selector").on("click.raven.issue.selector","#raven-issue-selector-search-trigger",function(ae){ae.stopPropagation();ae.preventDefault();ac.remoteJiraSearchDialog.show()});W.show();function V(ae){ac.remoteJiraSearchDialog=new JIRA.FormDialog({id:"remote-jira-search-dialog",height:"565px",widthClass:"large",content:function(af){var ah=RAVEN.Dialogs.IssueSearch.dialog();var ag=A(ah);ac.initSearchDialog(ag);af(ag);A("#remote-jira-search-dialog").addClass("raven-issue-search-dialog")},submitHandler:function(af,ag){af.preventDefault();A("#search-panel-button").click().removeAttr("disabled");ag()}})}};RAVEN.Dialogs.createParentIssueSelectorDialog=function(ab,Y,T,Z,aa,ad,X,U,S){RAVEN.Dialogs.IssueSelectorBase.call(this,H,ab,T,Z,X,U);this.issueTypeId=Y;var ac=this;this.remoteJiraSearchDialog=null;var W=new JIRA.FormDialog({id:"raven-parent-issue-selector-dialog",width:530,height:"250px",content:function(af){var ae=ac.getParentIssueSelectorContent();V(A(ae).filter("#issue-selector-dialog"));af(A(ae));ac.initIssuePicker(E)},submitHandler:function(ae){ae.preventDefault();var af=A("#raven-field-singleissuepicker").find(":selected").text();if(af!==""){var ag=null;A.ajax({url:contextPath+"/rest/api/2/issue/"+af.slice(0,af.indexOf(" ")),type:"GET",contentType:"application/json",async:false,success:function(ah){ag=ah.id}});W.hide();R(ag)}else{W.hide();W.show();require("aui/flag")({type:"error",body:"Parent issue key is required.",close:"auto"})}},autoClose:true});function R(ag){var af=JIRA.Forms.createSubtaskForm({parentIssueId:ag});var ae=af.asDialog({id:"create-subtask-dialog"});ae.show()}function Q(){return AJS.$("#can-redirect-execute-page").is(":checked")}A(document).off("click.raven.issue.selector").on("click.raven.issue.selector","#raven-issue-selector-search-trigger",function(ae){ae.stopPropagation();ae.preventDefault();ac.remoteJiraSearchDialog.show()});if(S!==null){A(S).bind("click",function(ae){ae.stopPropagation();ae.preventDefault();W.show()})}else{W.show()}function V(ae){ac.remoteJiraSearchDialog=new JIRA.FormDialog({id:"remote-jira-search-dialog",height:"565px",widthClass:"large",content:function(af){var ah=RAVEN.Dialogs.IssueSearch.dialog();var ag=A(ah);ac.initSearchDialog(ag);af(ag);A("#remote-jira-search-dialog").addClass("raven-issue-search-dialog")},submitHandler:function(af,ag){af.preventDefault();A("#search-panel-button").click().removeAttr("disabled");ag()}})}};RAVEN.Dialogs.createIssueSelectorDialog.prototype=Object.create(RAVEN.Dialogs.IssueSelectorBase.prototype);RAVEN.Dialogs.createParentIssueSelectorDialog.prototype=Object.create(RAVEN.Dialogs.IssueSelectorBase.prototype);RAVEN.Dialogs.createIssueSelectorAdvancedDialog=function(a3,aN,aS,aB,an,aE,ag,aW,aU,a2,aF,aY,V){this.issueKey=aB;if(!aF){aF=av()}this.parent=RAVEN.Dialogs.IssueSelectorBase.call(this,y,a3,aB,an,null,null,aF,V);J=new RAVEN.Dialogs.TestVersion();var aj=this;this.issueTypeId=aS;this.jql=aN;this.assign=aW;this.allowedFilters=a2;this.projectKey=aF;this.selectedProjectKey=null;this.projectPicker=null;this.versionPicker=null;this.testSetVersionPicker=null;this.testSetPicker=null;this.filterPicker=null;this.reqVersionPicker=null;this.requirementPicker=null;this.testTypeCFMeta=null;this.testEnvironmentsCFMeta=null;this.allSearchResultKeys=null;this.statusPicker=null;this.componentPicker=null;this.testRepositoryFolderPicker=null;u=aF;this.extraFields=[];this.hideFields=aY||[];this.action=V;var ae=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;var ap=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;var Q=Math.max(Math.round(ae*0.85),740);var W=Math.max(Math.round(ap*0.9),500);A("#raven-issue-selector-dialog").remove();var aX=new AJS.Dialog({width:Q,height:W,id:"raven-issue-selector-dialog",keypressListener:function(a5){var a4=A(".suggestions.raven-filter-jql-suggestions.dropdown-ready");if(a5.keyCode===A.ui.keyCode.ESCAPE&&aj.dialog.popup.element.is(":visible")&&a4.length===0){AJS.$(".raven-tooltip").tooltip("destroy");aj.dialog.remove()}}});this.dialog=aX;AJS.bind("remove.dialog",function(a5,a4){A(".atlassian-autocomplete.raven-issueselector-jql-suggestions").remove()});if(an&&an.title){title=an.title}else{title=AJS.format("Choose issue to associate with {0}",aB)}aX.addHeader(title);aX.addPanel("",RAVEN.Dialogs.IssueSearch.renderTabsContent({contextPath:AJS.contextPath(),selectPane:aA()}),"panel-body","1");aX.addSubmit("Add selected",function(a5){if(aW===true){var a4=A("#raven-assignee-select")[0].value;if(a4=="-1"){a4=null}aE(aj.getSelectedIssues(),a4,J.getValue())}else{aE(aj.getSelectedIssues())}a5.remove()});aX.addSubmit("Add all",function(a6){var a7=A("#raven-search-result-table").xrayDataTable();const a8=a7.fnSettings().meta;const a4=J.getValue();if(a4.length===0){a8.forEach(function(a9){const ba=a4.find(function(bb){return bb.issueKey===a9});if(!ba){a4.push({testVersionId:null,issueKey:a9})}})}if(a7&&a7.fnSettings()&&a7.fnSettings().meta){if(aW===true){var a5=A("#raven-assignee-select")[0].value;if(a5=="-1"){a5=null}aE(a7.fnSettings().meta,a5,a4)}else{aE(a7.fnSettings().meta,null,a4)}}a6.remove()});var ai=A("#raven-issue-selector-dialog .dialog-button-panel .button-panel-button.button-panel-submit-button").last();ai.hide();aX.addLink("Cancel",function(a4){if(AJS.$("#filter-additions-button").attr("aria-expanded")==="true"){AJS.$("#filter-additions-button").trigger("aui-button-invoke")}a4.remove();if(ag){ag()}});if(this.assign===true){ao()}a0();S();aX.show();AJS.tabs.setup();aP();aZ(a3);A("#raven-issue-selector-dialog .dialog-page-body .tabs-menu li.menu-item").click(function(a7){var a4=A(a7.currentTarget).find("a").attr("href");var a6=A(a4).data("pane-id");var a5=A("#raven-issue-selector-dialog .dialog-button-panel .button-panel-button.button-panel-submit-button");if(a6===O||a6===B){if(A(a4).find("table#raven-search-result-table").length>0){a5.show()}else{a5.hide()}}else{a5.first().show();a5.last().hide()}if(a6===B){A(document).trigger("advanced-search-selected")}});function aP(){var a5=A("#raven-issue-selector-dialog .dialog-panel-body.panel-body").height()-25;A("#raven-issue-selector-dialog .raven-search-table .raven-column, #raven-issue-selector-dialog .raven-issue-selector-advanced-dialog-container").css("height",a5+"px");var a4=A("#raven-issue-selector-dialog .raven-control-fieldset").outerHeight(true)+80;A("#raven-issue-selector-dialog #raven-issue-simple-search-fieldset").css("height",(a5-a4)+"px")}function aZ(a6){if(aU){var a7=document.createElement("div");a7.className="xray-cb-container";var a5=document.createElement("label");a5.htmlFor="cbHideForbiddenTests";a5.style="margin-right: 50px;";A("#raven-issue-selector-dialog .dialog-button-panel").append(a7);A("<input>",{type:"checkbox",id:"cbHideForbiddenTests",checked:"checked",}).appendTo(".xray-cb-container");A(".xray-cb-container").append(a5);if(a6==="TEST"){a5.appendChild(document.createTextNode("Hide Tests in non-executable Statuses"));A("#cbHideForbiddenTests").change(function(){var a8=A("#raven-field-issuepicker");var a9=A(this).is(":checked");q(a8,a9)})}else{if(a6==="TESTSET"){a5.appendChild(document.createTextNode("Ignore Tests in non-executable Statuses"))}}}else{var a4=A("#raven-field-issuepicker");q(a4,false)}}function aA(){var a4=aj.getIssueSelectorContent();return a4}function a0(){aj.initIssuePicker();A("#issue-selector-form").submit(function(){return false})}function ao(){if(!Y(RAVEN.Dialogs.FILTER_ASSIGNEE)){return}A.ajax({type:"GET",url:contextPath+"/rest/raven/1.0/testexec/"+A("#raven-testexec-tests-issue-key").val()+"/test/"+aB+"/cf/bulk/",contentType:"application/json",success:function(a6,a4){var a5=RAVEN.Dialogs.IssueSearch.renderAssigneePicker({issueKey:aB,customFields:ax(a6),});A("#raven-issue-selector-dialog .dialog-components").append(a5);this.assigneePicker=new JIRA.AssigneePicker({element:A(".xray-assignee-picker")})},error:function(a4){console.error("error getting the custom fields associated with the test in bulk",a4)}})}function ax(a4){return a4.map(function(a5){if(!a5.hasOwnProperty("imgURL")){a5.imgURL=contextPath+"/secure/useravatar?size=xsmall&avatarId=10123"}if(a5.hasOwnProperty("key")){a5.value=a5.customFieldName+": "+a5.key}else{a5.value=a5.customFieldName}return a5})}function ay(){var a4=RAVEN.Dialogs.IssueSearch.searchForm({contextPath:contextPath});return a4}function S(){if(a3==="TEST"){aJ()}else{if(a3==="TESTSET"){aT()}else{if(a3==="PRECONDITION"){ah()}else{if(a3==="TESTPLAN"){aa()}else{if(a3==="TESTEXECUTION"){R()}}}}}}function aJ(){aD(function(a4){aj.testTypeCFMeta=a4;aj.initSearchDialog(A("#raven-issue-selector-dialog"));aw(au)})}function aT(){aj.initSearchDialog(A("#raven-issue-selector-dialog"));ak(A("#project-filter"));aw(au)}function aa(){aj.initSearchDialog(A("#raven-issue-selector-dialog"));ak(A("#project-filter"));aw(au)}function ah(){az(function(a4){aj.testTypeCFMeta=a4;aj.initSearchDialog(A("#raven-issue-selector-dialog"));U(A("#precondition-type-filter"));ak(A("#project-filter"));aw(au)})}function R(){aD(function(a4){aj.testTypeCFMeta=a4});aC(function(a4){aj.testEnvironmentsCFMeta=a4},"TEST_ENVIRONMENTS");aj.initSearchDialog(A("#raven-issue-selector-dialog"));ak(A("#project-filter"));aw(au)}function au(a4){A("#raven-issue-search").show();if(a4&&a4.length>0){A(a4).each(function(){if(!Y(this.name)){return}aj.extraFields.push({id:this.name,name:this.label});A("#raven-fields-selection").on("itemSelectedEvt",function(a5,a6){if(a6&&a6.value()){aG(a6.value())}}).on("itemUnselectedEvt",function(a5,a6){if(a6&&a6.value()){Z(a6.value())}})})}}function aG(a4){var a6=A("#raven-issue-simple-search-fieldset");A("#"+aj.fieldsPicker.id+"-checkbox-multi-select").block();if(a6.find("[data-field-id="+a4+"]").length>0){return}else{if(a4==="labels"){var a5=RAVEN.Dialogs.IssueSearch.renderLabelFilter();aj.parent._addElementToPage(A(a5),a4,null,a6);aj.multiselects["label-filter"]=aQ(a6.find("#label-filter"))}else{if(a4==="version-filter"){var a5=RAVEN.Dialogs.IssueSearch.renderVersionFilter();aj.parent._addElementToPage(A(a5),a4,null,a6);aj.versionPicker=af(a6.find("#version-filter"))}else{if(a4==="testset-version-filter"){var a5=RAVEN.Dialogs.IssueSearch.renderTestSetVersionFilter();aj.parent._addElementToPage(A(a5),a4,null,a6);aj.testSetVersionPicker=aV(a6.find("#testset-version-filter"))}else{if(a4==="requirement-version-filter"){var a5=RAVEN.Dialogs.IssueSearch.renderRequirementVersionFilter();aj.parent._addElementToPage(A(a5),a4,null,a6);aj.reqVersionPicker=aR(a6.find("#requirement-version-filter"))}else{if(a4==="testset-filter"){var a5=RAVEN.Dialogs.IssueSearch.renderTestSetFilter({versions:"",contextPath:contextPath});aj.parent._addElementToPage(A(a5),a4,null,a6);aj.testSetPicker=at(a6.find("#testset-filter"))}else{if(a4==="requirement-filter"){var a5=RAVEN.Dialogs.IssueSearch.renderRequirementFilter({versions:"",contextPath:contextPath});aj.parent._addElementToPage(A(a5),a4,null,a6);aj.requirementPicker=aH(a6.find("#requirement-filter"));aj.multiselects[a4]=aj.requirementPicker}else{if(a4==="filter-filter"){var a5=RAVEN.Dialogs.IssueSearch.renderFilterFilter();aj.parent._addElementToPage(A(a5),a4,null,a6);aj.filterPicker=a1(a6.find("#filter-filter"))}else{if(a4==="workflow-status-filter"){var a5=RAVEN.Dialogs.IssueSearch.renderStatusFilter();aj.parent._addElementToPage(A(a5),a4,null,a6);aj.statusPicker=aL(a6.find("#workflow-status-filter"))}else{if(a4==="component-filter"){var a5=RAVEN.Dialogs.IssueSearch.renderComponentFilter();aj.parent._addElementToPage(A(a5),a4,null,a6);aj.componentPicker=aM(a6.find("#component-filter"))}else{if(a4==="environment-filter"){var a5=RAVEN.Dialogs.IssueSearch.renderEnvironmentFilter();aj.parent._addElementToPage(A(a5),a4,null,a6);aj.environmentPicker=T(a6.find("#environment-filter"))}}}}}}}}}}}}function Z(a4){if(a4==="version-filter"){aj.versionPicker=null}else{if(a4==="testset-version-filter"){ar(aj.testSetPicker,null);aj.testSetVersionPicker=null}else{if(a4==="requirement-version-filter"){ar(aj.requirementPicker,null);aj.reqVersionPicker=null}else{if(a4==="testset-filter"){aj.testSetPicker=null}else{if(a4==="requirement-filter"){aj.requirementPicker=null}else{if(a4==="filter-filter"){aj.filterPicker=null}else{if(a4==="workflow-status-filter"){aj.statusPicker=null}else{if(a4==="component-filter"){aj.componentPicker=null}else{if(a4==="environment-filter"){aj.environmentPicker=null}}}}}}}}}}function aD(a4){A.ajax({type:"GET",url:contextPath+"/rest/raven/1.0/customField/TEST_TYPE",processData:true,async:true,contentType:"application/json",error:function(a6,a7,a5){if(a5&&a5.trim()!=""){a5=a5+": "+a6.responseText}else{a5=a6.responseText}aK()},success:function(a6,a7,a5){a4(a6)}})}function aC(a4,a5){A.ajax({type:"GET",url:contextPath+"/rest/raven/1.0/customField/"+a5,processData:true,async:true,contentType:"application/json",error:function(a7,a8,a6){aK()},success:function(a7,a8,a6){a4(a7)}})}function az(a4){A.ajax({type:"GET",url:contextPath+"/rest/raven/1.0/customField/PRECONDITION_TYPE",processData:true,async:true,contentType:"application/json",error:function(a6,a7,a5){if(a5&&a5.trim()!=""){a5=a5+": "+a6.responseText}else{a5=a6.responseText}aK()},success:function(a6,a7,a5){a4(a6)}})}function aw(a4){A.ajax({type:"GET",url:contextPath+"/rest/raven/1.0/issue/search/filter?issueType="+a3,processData:true,async:true,contentType:"application/json",error:function(a6,a7,a5){if(a5&&a5.trim()!=""){a5=a5+": "+a6.responseText}else{a5=a6.responseText}aK()},success:function(a6,a7,a5){a4(a6)}})}function ac(){return["project-filter-field","test-type-filter-textarea","label-filter-textarea","version-filter-textarea","testset-filter-textarea","testset-version-filter-textarea","requirement-filter-textarea","requirement-version-filter-textarea","filter-filter-field","workflow-status-filter-textarea","component-filter-textarea"]}function ak(a4){if(!Y(RAVEN.Dialogs.FILTER_PROJECT)){a4.closest(".group").hide();return}a4.on("initialized",function(a7,a6){ab(av());var a5=A("body").data("version");if(!a5||a5.toString().charAt(0)==="5"){A("input",a4.parent()).height("23px")}});this.projectPicker=new AJS.SingleSelect({element:a4,showDropdownButton:true,submitInputVal:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:contextPath+"/rest/api/2/project",formatResponse:function(a6){var a5=new AJS.GroupDescriptor({weight:0,id:"all-projects-opt-group",replace:true,label:"All Projects"});A(a6).each(function(a7,a8){var a9=new AJS.ItemDescriptor({value:a8.key,label:a8.name,icon:a8.avatarUrls["16x16"],allowDuplicate:false,selected:a8.key===av()?"selected":null});a5.addItem(a9)});return[a5]}}});a4.change(function(){var a5=a4.find("option:selected").attr("value");if(this.selectedProjectKey!==a5){this.selectedProjectKey=a5;ad(aj.versionPicker,a5);ad(aj.testSetVersionPicker,a5);ad(aj.reqVersionPicker,a5);ar(aj.testSetPicker,null);ar(aj.requirementPicker,null);aI(aj.componentPicker);aq(a5)}})}function ad(a5,a4){if(a5){a5.clearLozenges();var a6=a5.model.$element;a6.empty();a5.setProjectKey(a4)}}function ar(a6,a5,a4){if(a6){if(!a4||a4===true){a6.clearLozenges();var a7=a6.model.$element;a7.empty()}a6.setFixVersions(a5)}}function aI(a4){if(a4){A("#component-filter").closest(".group").remove();var a5=RAVEN.Dialogs.IssueSearch.renderComponentFilter();A("#filter-additions").append(a5);aj.componentPicker=aM(A("#component-filter"))}}function aq(a4){if(this.testRepositoryFolderPicker){this.testRepositoryFolderPicker.setEntityKey(a4);this.testRepositoryFolderPicker.resetFolderPicker()}}function ab(a4){A.ajax({type:"GET",url:contextPath+"/rest/api/2/project/"+a4,processData:true,async:true,contentType:"application/json",success:function(a5,a8,a6){var a7=new AJS.ItemDescriptor({value:a5.key,label:a5.name,icon:a5.avatarUrls["16x16"],allowDuplicate:false,selected:"selected"});projectPicker.setSelection(a7)}})}function av(){if(aB){return aB.split("-")[0]}return aF}function aO(a5,a7,a4){var a6=a5.find("option:selected").map(function(){return A(this).attr("value")}).toArray().join(";");ar(a7,a6,a4)}function al(a4){new AJS.SingleSelect({element:a4,showDropdownButton:true,removeOnUnSelect:false,submitInputVal:false,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:contextPath+"/rest/raven/1.0/issue/search/versions/all",formatResponse:function(a6){var a7=null;var a5=[];A(a6).each(function(){if(a7!==this.projectKey){a5.push(new AJS.GroupDescriptor({weight:0,id:"raven-search-filter",replace:true,label:this.projectName}));a7=this.projectKey}var a9=a5[a5.length-1];var a8=new AJS.ItemDescriptor({value:this.projectKey+"-"+this.versionName,label:this.versionName,title:this.versionName,highlighted:true});a9.addItem(a8)});return a5}}})}function am(a4){this.filterPicker=new AJS.SingleSelect({element:a4,showDropdownButton:true,submitInputVal:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:contextPath+"/rest/raven/1.0/filter/search",formatResponse:function(a6){var a5=new AJS.GroupDescriptor({weight:0,id:"all-filter-opt-group",replace:true,label:this.data.query!=""?"Search results":"Favourite filters"});A(a6).each(function(a7,a8){this.label=this.name;var a9=new AJS.ItemDescriptor({value:this.id+"",label:this.name,title:this.name,highlighted:true,});a5.addItem(a9)});return[a5]}},})}function af(a4){return al(a4)}function aV(a4){a4.off("selected").on("selected",function(a6,a5){aO(A(this),aj.testSetPicker)});a4.off("unselect").on("unselect",function(a6,a5){aO(A(this),aj.testSetPicker,false)});return al(a4)}function a1(a4){var a5=am(a4);return a5}function aR(a4){a4.off("selected").on("selected",function(a6,a5){aO(A(this),aj.requirementPicker)});a4.off("unselect").on("unselect",function(a6,a5){aO(A(this),aj.requirementPicker,false)});return al(a4)}function Y(a4){if(!a2||a2.get(a4)===undefined){return true}return a2.get(a4)===true}function U(a4){if(!Y(RAVEN.Dialogs.FILTER_TESTTYPE)){a4.hide();return}if(aj.testTypeCFMeta&&aj.testTypeCFMeta.options){X(a4,aj.testTypeCFMeta.options)}return new AJS.MultiSelect({element:a4,itemAttrDisplayed:"label",showDropdownButton:true,removeOnUnSelect:false,submitInputVal:false,errorMessage:"{0} is not a valid value.",maxInlineResultsDisplayed:15})}function aH(a4){var a6="";if(this.labels&&this.labels.enter){a6=this.labels.enter}else{a6="Enter Issue key"}var a5=new RAVEN.IssuePicker({element:a4,userEnteredOptionsMsg:a6,uppercaseUserEnteredOnSelect:true});a5.$container.next(".issue-picker-popup").remove();a5.$container.removeClass("hasIcon");return a5}function X(a4,a5){A(a5).each(function(a6,a7){a4.append('<option data-option-id="'+a7.id+'" value="'+a7.name+'">'+a7.name+"</option>")})}function aQ(a4){return new JIRA.LabelPicker({element:a4,ajaxOptions:{url:contextPath+"/rest/api/1.0/labels/suggest",data:{},query:true}})}function aL(a4){return new AJS.MultiSelect({element:a4,showDropdownButton:true,submitInputVal:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:contextPath+"/rest/api/2/status/",formatResponse:function(a6){var a5=new AJS.GroupDescriptor({weight:0,id:"all-filter-opt-group",replace:true});A(a6).each(function(a8,a7){this.label=this.name;var a9=new AJS.ItemDescriptor({value:this.name,label:this.name,title:this.description,highlighted:true,});a5.addItem(a9)});return[a5]}}})}function aM(a4){var a5=A("#project-filter option:selected").attr("value");if(!a5){a5=av()}return new AJS.MultiSelect({element:a4,showDropdownButton:true,submitInputVal:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:contextPath+"/rest/api/2/project/"+a5+"/components",formatResponse:function(a7){var a6=new AJS.GroupDescriptor({weight:0,id:"all-filter-opt-group",replace:true});A(a7).each(function(a9,a8){this.label=this.name;var ba=new AJS.ItemDescriptor({value:this.name,label:this.name,title:this.description,highlighted:true,});a6.addItem(ba)});return[a6]}}})}function T(a4){return new AJS.MultiSelect({element:a4,showDropdownButton:true,submitInputVal:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:contextPath+"/rest/raven/1.0/testenvironment/list",formatResponse:function(a8){var a5=new AJS.GroupDescriptor({weight:0,id:"all-environments-opt-group",replace:true});for(var a6=0;a6<a8.length;a6++){var a7=new AJS.ItemDescriptor({value:a8[a6],label:a8[a6],title:a8[a6],highlighted:true});a5.addItem(a7)}return[a5]}}})}function at(a4){var a6="";if(this.labels&&this.labels.enter){a6=this.labels.enter}else{a6="Enter Issue key"}var a5=new RAVEN.IssuePicker({element:a4,userEnteredOptionsMsg:a6,uppercaseUserEnteredOnSelect:true});a5.$container.next(".issue-picker-popup").remove();a5.$container.removeClass("hasIcon");return a5}function aK(){AJS.messages.error("#raven-initialization-error",{body:"Initialization Error",closeable:false})}return aj};RAVEN.Dialogs.createIssueSelectorAdvancedDialog.prototype=Object.create(RAVEN.Dialogs.IssueSelectorBase.prototype);RAVEN.Dialogs.createIssueSelectorAdvancedDialog.prototype.getIssuesFromSearchPanel=function(){if(A("#raven-search-result-table").length>0){return z}};RAVEN.Dialogs.createIssueSelectorAdvancedDialog.prototype.getIssuesFromSelectPanel=function(){var Q=[];A(document.body).find("#issue-selector-dialog ul.items li.item-row").each(function(){var R=A(this).find("button.value-item span.value-text");Q.push(R.text())});return Q};RAVEN.Dialogs.createIssueSelectorAdvancedDialog.prototype.getSelectedIssues=function(){var Q=A(".raven-issue-search-tabs-pane.active-pane").data("pane-id");if(Q===g){return this.getIssuesFromSelectPanel()}else{return this.getIssuesFromSearchPanel()}};var o=function(Q,R){if(Q.length){Q.attr("data-ajax-options.data.app-id",R);if(R&&R!==""){Q.attr("data-ajax-options.url",contextPath+"/rest/remoteJiraIssueLink/1/remoteJira/picker")}Q.trigger("updateOptions");Q.trigger("clearSelection")}};var q=function(Q,R){if(Q.length){Q.attr("data-ajax-options.data.hide-unexecutable-tests",R);Q.trigger("updateOptions")}};JIRA.bind(JIRA.Events.NEW_PAGE_ADDED,function(T,R){var Q=A("#raven-field-issuepicker",R);if(Q.length){var S=A("#jira-app-link",R).val();o(Q,S)}A("#jira-app-link",R).change(function(){var U=A(this).val();o(Q,U)})})})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-dialog-resources', location = 'js/dialog/test-version-issue-selector.js' */
RAVEN.TestVersionConstants={addTestsToTestExecution:"testExecutionTests"};(function(e){window.RAVEN=window.RAVEN||{};RAVEN.Dialogs=RAVEN.Dialogs||{};RAVEN.Dialogs.TestVersion=RAVEN.Dialogs.TestVersion||{};var a=[];var f=false;RAVEN.Dialogs.TestVersion=function(){a=[];f=e("#raven-is-xray-enterprise").val()==="true"};RAVEN.Dialogs.TestVersion.prototype.onTableDraw=function(){if(!f){return}c();d()};RAVEN.Dialogs.TestVersion.prototype.getValue=function(){if(!f){return[]}if(e("#raven-search-result-table").length>0){return a}return[]};RAVEN.Dialogs.TestVersion.prototype.removeValue=function(g){if(!f){return}a=a.filter(function(h){return h.issueKey!==g})};RAVEN.Dialogs.TestVersion.prototype.addValue=function(g){if(!f){return}a.push({issueKey:g,testVersionId:b(g)})};function b(g){try{return parseInt(document.getElementById("test-version-select-"+g).selectedOptions[0].value)}catch(h){return -1}}function c(){e(".raven-test-version-select").click(function(g){g.stopPropagation();g.preventDefault()})}function d(){e(".raven-test-version-select").change(function(){const k=e("#raven-search-result-table");const j=e("option:selected",this).attr("data-test-type");const h=e("#test-type-field-id").val();const m=k.find("[data-column-id='"+h+"']").index();const l=this.id.split("-").slice(-2).join("-");const g=k.find("tr#"+l).find("td")[m];e(g).text(j);if(!e("tr#"+l+" input:checkbox").prop("checked")){e("tr#"+l).click()}const i=parseInt(e("option:selected",this).attr("value"));a=a.map(function(n){if(n.issueKey===l){return{issueKey:l,testVersionId:i}}return n})})}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-dialog-resources', location = 'js/common/components/filterpickerbutton/filter-picker-util.js' */
(function(a){RAVEN.namespace("RAVEN.common.components.util.FiltersPickerUtils");RAVEN.common.components.util.FiltersPickerUtils.TEST_RUN_UNASSIGNED="\u241Eunassigned\u241E";RAVEN.common.components.util.FiltersPickerUtils.getFieldJql=function(b,h,g){const e=a.Deferred();const d=b[g].jql||"";if(g==="text"){if(h==null||h[g]==null||h[g].value==null){return e.resolve(d)}const c="issueKey = '"+h[g].value.trim()+"'";const f=b[g].jql?"("+b[g].jql+" OR "+c+")":"";this.validateJqlExpression(c).done(function(i){if(i.isJQLValid){return e.resolve(f)}else{return e.resolve(d)}}).fail(function(){return e.reject(d)})}else{return e.resolve(d)}return e.promise()};RAVEN.common.components.util.FiltersPickerUtils.validateJqlExpression=function(b){const c=a.Deferred();a.ajax({url:AJS.contextPath()+"/rest/raven/1.0/jql/validation",type:"POST",dataType:"json",data:{jql:b},success:function(d){c.resolve(d)},error:function(f,d,e){console.error("Unable to validate JQL",f,d,e);require("aui/flag")({type:"error",body:"Error filtering Xray Issues",close:"auto"});c.reject({isJQLValid:false,error:"Error filtering Xray Issues"})}});return c.promise()}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-dialog-resources', location = 'js/common/components/filterpickerbutton/customfields/custom-fields-renderer.js' */
(function(b){RAVEN.namespace("RAVEN.common.components.util");RAVEN.common.components.util.FIX_VERSION_FILTER=function(f,e,d){return RAVEN.common.components.util._genericAutoCompleteMultiSelect(f,e,"fixVersion",d)};RAVEN.common.components.util.AFFECTS_VERSION_FILTER=function(f,e,d){return RAVEN.common.components.util._genericAutoCompleteMultiSelect(f,e,"affectedVersion",d)};function a(d,e){if(d!=null&&d.length>0){return b.param({projects:d})}var f=b("#"+e+" #searcher-pid").val();if(f==null||f.length===0){return""}return b.param({projects:f})}RAVEN.common.components.util.COMPONENT_FILTER=function(i,g,f,d,e){f=f||10;var h=b(RAVEN.Dialogs.IssueSearch.genericMultiSelect({fieldID:i,fieldName:g,}));return function(j){var k=AJS.contextPath()+"/rest/raven/1.0/issue/search/components/all";j.replaceWith(h);return new AJS.MultiSelect({element:h.find("#"+i),revertOnInvalid:false,removeOnUnSelect:false,submitInputVal:false,noQueryNoRequest:false,itemAttrDisplayed:"label",maxInlineResultsDisplayed:f,removeDuplicates:true,ajaxOptions:{contentType:"application/json",query:true,url:function(){var l=a(d(),e);if(l&&l.length!==0){return k+"?"+l}return k},suggestionsHandler:null,formatResponse:function(l){var m=[];m.push(new AJS.GroupDescriptor());b.each(l,function(n,p){var q=m[0];var o=new AJS.ItemDescriptor({value:p,label:p,title:p,highlighted:true});q.addItem(o)});setTimeout(c,100);return m}}})}};RAVEN.common.components.util.RAVEN_EPIC_LINK_FILTER=function(g,e,d){d=d||15;var f=b(RAVEN.Dialogs.IssueSearch.genericMultiSelect({fieldID:g,fieldName:e}));return function(h){var i=AJS.contextPath()+"/rest/greenhopper/1.0/epics";h.replaceWith(f);b("[data-field-id='"+g+"']").attr("data-is-xray-jql",true);return new AJS.MultiSelect({element:f.find("[id='"+g+"']"),revertOnInvalid:false,removeOnUnSelect:true,submitInputVal:false,noQueryNoRequest:false,itemAttrDisplayed:"label",maxInlineResultsDisplayed:d,ajaxOptions:{query:true,processData:true,data:{searchQuery:"",projectKey:"",filterEpicsByGivenProjects:false,maxResults:d},url:i,suggestionsHandler:null,formatResponse:function(k){if(k&&Array.isArray(k.epicLists)){var j=[];const n=RAVEN.common.components.util._getEmptyOptionEpicLinkGroup();j.push(n);for(var m=0;m<k.epicLists.length;m++){const l=RAVEN.common.components.util._parseEpicLinkGroup(m,k.epicLists);j.push(l)}setTimeout(c,100);return j}else{console.error("Error occurred while obtaining field Epic Link field information",k)}return null}}})}};RAVEN.common.components.util._getEmptyOptionEpicLinkGroup=function(){const d=new AJS.GroupDescriptor({id:"raven-epic-link-group-0"});d.addItem(new AJS.ItemDescriptor({value:"EMPTY",label:"No Epic Link",title:"No Epic Link",highlighted:true}));return d};RAVEN.common.components.util._parseEpicLinkGroup=function(f,g){const e=g[f];const d=new AJS.GroupDescriptor({id:"raven-epic-link-group-"+(f+1),label:e.listDescriptor||""});if(Array.isArray(e.epicNames)){e.epicNames.forEach(function(k){var j=k.key;var h=k.name+" ("+k.key+")";var i=new AJS.ItemDescriptor({value:j,label:h,title:h,highlighted:true});d.addItem(i)})}return d};RAVEN.common.components.util.SAVED_FILTER=function(g,e,d){d=d?d:15;var f=b(RAVEN.Dialogs.IssueSearch.genericSingleSelect({fieldID:g,fieldName:e}));return function(i){var h=f.find("#"+g);var j=AJS.contextPath()+"/rest/raven/1.0/filter/search";i.replaceWith(f);h.siblings(".aui-ss.ajax-ss").remove();return new AJS.SingleSelect({element:h,showDropdownButton:true,submitInputVal:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,itemAttrDisplayed:"label",removeOnUnSelect:true,errorMessage:"{0} is not a valid value.",maxInlineResultsDisplayed:d,ajaxOptions:{query:true,url:j,formatResponse:function(l){var k=new AJS.GroupDescriptor({weight:0,id:"all-filter-opt-group",replace:true,label:this.data.query?"Search results":"Favourite filters"});b(l).each(function(){this.label=this.name;var m=new AJS.ItemDescriptor({value:this.id+"",label:this.name,title:this.name,highlighted:true,});k.addItem(m)});setTimeout(function(){var m=b(".ajs-layer");if(!m.data("stop-event-propagation")){m.click(function(n){n.stopPropagation()}).data("stop-event-propagation",true)}},100);return[k]}},})}};RAVEN.common.components.util.SAVED_FILTER_TEXT_RENDER=function(e){var d="";const f=e.$element.find("option:last").text();if(e.value&&e.value.length===1&&e.value[0]!==""&&f){d+=" <b>"+e.name+"</b>:&nbsp;";d+=RAVEN.escapeHtml(f)}return d};RAVEN.common.components.util.LATEST_STATUS_RENDERER=function(f,d){var e=b(RAVEN.Dialogs.IssueSearch.genericMultiSelect({fieldID:f,fieldName:d}));return function(h){var g=AJS.contextPath();var i=g+"/rest/raven/1.0/testplan/"+self.testPlanKey+"/filters";h.replaceWith(e);return new AJS.MultiSelect({element:e.find("#"+f),revertOnInvalid:true,submitInputVal:false,itemAttrDisplayed:"label",maxInlineResultsDisplayed:15,ajaxOptions:{query:true,processData:true,data:{showSubTasks:true},url:i,suggestionsHandler:null,formatResponse:function(j){if(j){var k=new AJS.GroupDescriptor();j.statuses.forEach(function(l){l=new AJS.ItemDescriptor({value:l.name,label:l.name,title:l.name,allowDuplicate:false});k.addItem(l)});setTimeout(c,100);return[k]}return null}}})}};RAVEN.common.components.util.FOLDER_RENDERER=function(g,e,f){var d=b("<div/>").attr({"class":"field-group raven-field-selector-field-group full-width",id:g,"data-field-id":g,name:e});return function(h){h.after(d);var i=["testplan-tests-filter-testsets-field","testplan-tests-filter-assignee-field","testplan-tests-filter-status-textarea","testplan-tests-filter-component-multi-select","testplan-tests-filter-test-environment-multi-select"];new RAVEN.TestRepository.Fields.FolderPicker({$picker:b(d),repositoryPath:"testPlanRepository",folderJQLName:"testPlanFolderTests",entityKey:f,siblingDropdownElements:i,label:e,allDescendants:true,fullWidth:true})}};RAVEN.common.components.util.TEST_ENVIRONMENT_RENDERER=function(g,d,f){var e=b(RAVEN.Dialogs.IssueSearch.genericMultiSelect({fieldID:g,fieldName:d}));return function(i){var h=AJS.contextPath();var j=h+"/rest/api/1.0/labels/suggest?customFieldId="+f;i.replaceWith(e);return new AJS.MultiSelect({element:e.find("#"+g),revertOnInvalid:true,submitInputVal:false,itemAttrDisplayed:"label",maxInlineResultsDisplayed:15,ajaxOptions:{query:true,processData:true,data:{showSubTasks:true},url:j,suggestionsHandler:null,formatResponse:function(k){if(k){var l=new AJS.GroupDescriptor();k.suggestions.forEach(function(m){m=new AJS.ItemDescriptor({value:m.label,label:m.label,title:m.label,allowDuplicate:false});l.addItem(m)});setTimeout(c,100);return[l]}return null}}})}};RAVEN.common.components.util.TEST_SET_RENDERER=function(h,e,g,d){var f=b(RAVEN.Dialogs.IssueSearch.genericSingleSelect({fieldID:h,fieldName:e}));return function(k){var j=AJS.contextPath();var l=j+"/rest/raven/1.0/issue/picker?issueType=TESTSET&jql=issueType in ("+d+")&currentIssueKey="+g+"&showSubTasks=false&showSubTaskParent=false&hideUnexecutableTests=false&currentProjectId=";k.replaceWith(f);var i=new AJS.SingleSelect({element:f.find("#"+h),revertOnInvalid:false,removeOnUnSelect:true,submitInputVal:false,itemAttrDisplayed:"label",maxInlineResultsDisplayed:15,width:"100%",ajaxOptions:{query:true,processData:true,url:l,suggestionsHandler:null,formatResponse:function(m){if(m){var o=new AJS.GroupDescriptor();const n=m.sections[0].issues;if(n){n.forEach(function(p){p=new AJS.ItemDescriptor({value:p.key,label:p.key+" - "+p.summary,title:p.summary,icon:j+"/download/resources/com.xpandit.plugins.xray/images/test-set.png",html:'<div style="overflow: hidden;text-overflow: ellipsis;" title="'+p.key+" - "+p.summary+'" ><img class="icon" alt="" src="'+j+'/download/resources/com.xpandit.plugins.xray/images/test-set.png"><span>'+p.key+" - "+p.summary+"</span></div>",styleClass:"aui-iconised-link",allowDuplicate:false});o.addItem(p)})}setTimeout(c,100);return[o]}return null}}});return i}};RAVEN.common.components.util.DATE_RENDERER=function(d,e){return function(f){f.replaceWith(AJS.$(RAVEN.Dialogs.IssueSearch.genericDatePicker({fieldID:d,fieldName:e})));RAVEN.common.components.util.activateDatePicker(AJS.$("[data-field-id='"+d+"']"))}};RAVEN.common.components.util.USER_RENDERER=function(d,e){return function(g){var h=b(RAVEN.Dialogs.IssueSearch.genericMultiSelect({fieldID:d,fieldName:e}));g.replaceWith(h);var f=h.find("#"+d);return new AJS.MultiSelect({element:f,itemAttrDisplayed:"label",showDropdownButton:true,removeOnUnSelect:true,submitInputVal:false,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,errorMessage:"{0} is not a valid value.",maxInlineResultsDisplayed:15,ajaxOptions:{url:AJS.contextPath()+"/rest/api/latest/groupuserpicker",query:true,data:{showAvatar:true},formatResponse:function(i){var j=JIRA.UserPickerUtil.formatResponse(i.users);j[0].items().push(new AJS.ItemDescriptor({value:RAVEN.common.components.util.FiltersPickerUtils.TEST_RUN_UNASSIGNED,label:"Unassigned",allowDuplicate:false}));if(!JIRA.Users.LoggedInUser.isAnonymous()){j[0].items().push(new AJS.ItemDescriptor({value:JIRA.Users.LoggedInUser.userName(),label:"Current User",allowDuplicate:false}))}setTimeout(c,100);return j}}})}};RAVEN.common.components.util.TEXT_FIELD=function(d,e){return function(f){f.replaceWith(AJS.$(RAVEN.Dialogs.IssueSearch.textField({fieldID:d,fieldName:e})))}};RAVEN.common.components.util.activateDatePicker=function(d){d.find(".js-start-date, .js-end-date").click(function(e){const f=b(e.target).attr("data-aui-dp-uuid");var g=b("aui-inline-dialog[id="+f+"]");g=g.length>0?g:b("div.aui-inline-dialog.aui-datepicker-dialog");g.css("z-index",3100).click(function(h){h.stopPropagation()})}).each(function(f,g){var e=AJS.$(g);e.datePicker({overrideBrowserDefault:true,dateFormat:"yy-mm-dd"});e.attr("placeholder","yyyy-mm-dd")});d.find("input.raven-date-input").click(function(e){b(e.target).siblings("input[type=radio]").prop("checked",true)});if(d.length>0){d.next(".description").appendTo(b(d[0]))}};function c(){var d=b(".ajs-layer");d.each(function(f,g){var e=b(g);if(!e.data("stop-event-propagation")){e.click(function(h){h.stopPropagation()}).data("stop-event-propagation",true)}})}RAVEN.common.components.util.TEST_PLAN_TEST_SET_TEXT_RENDERER=function(f){var e="";if(f.value!==null&&f.value.length>0){var d=f.value[f.value.length-1];e+=" <b>"+f.name+"</b>: ";e+=RAVEN.escapeHtml(d.split(" - ")[0])}return e};RAVEN.common.components.util.FOLDER_TEXT_RENDERER=function(e){var d="";if(e.value!==null&&e.value.length>0&&e.value!=="All"){d+=" <b>"+"Folder"+"</b>: ";d+=RAVEN.escapeHtml(e.value)}return d};RAVEN.common.components.util._genericAutoCompleteMultiSelect=function(h,e,g,d){d=d||15;var f=b(RAVEN.Dialogs.IssueSearch.genericMultiSelect({fieldID:h,fieldName:e}));return function(i){var j=AJS.contextPath()+"/rest/api/2/jql/autocompletedata/suggestions";i.replaceWith(f);return new AJS.MultiSelect({element:f.find("#"+h),revertOnInvalid:false,removeOnUnSelect:true,submitInputVal:false,noQueryNoRequest:false,itemAttrDisplayed:"label",maxInlineResultsDisplayed:d,ajaxOptions:{query:true,processData:true,data:{fieldName:g,fieldValue:function(){const k=b("#"+h+"-textarea").val();return k||""}},url:j,suggestionsHandler:null,formatResponse:function(k){if(k&&Array.isArray(k.results)){var l=new AJS.GroupDescriptor({id:"raven-versions-opt-group"});k.results.filter(function(m){return !!m&&!!m.value}).forEach(function(m){var o=m.value.replace(/^(")/,"").replace(/(")$/,"");var n=new AJS.ItemDescriptor({value:o,label:o,title:o,highlighted:true});l.addItem(n)});setTimeout(c,100);return[l]}else{console.error("Error occurred while obtaining field: "+e,k)}return null}}})}};RAVEN.common.components.util.EXECUTION_STATUS_RENDER=function(f,d){var e=b(RAVEN.Dialogs.IssueSearch.genericMultiSelect({fieldID:f,fieldName:d,isFullWidth:false}));return function(h){var g=AJS.contextPath();var i=g+"/rest/raven/1.0/chart/test/statuses";h.replaceWith(e);return new AJS.MultiSelect({element:e.find("#"+f),revertOnInvalid:true,submitInputVal:false,itemAttrDisplayed:"label",maxInlineResultsDisplayed:15,ajaxOptions:{query:true,processData:true,data:{showSubTasks:true},url:i,suggestionsHandler:null,formatResponse:function(j){if(j){var k=new AJS.GroupDescriptor();j.forEach(function(l){l=new AJS.ItemDescriptor({value:l,label:l,title:l,allowDuplicate:false});k.addItem(l)});setTimeout(c,100);return[k]}return null}}})}}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-dialog-resources', location = 'js/dialog/version-picker.js' */
RAVEN.VersionPicker=AJS.MultiSelect.extend({init:function(a){if(a&&a.projectKey){this.setProjectKey(a.projectKey)}this._super(a);if(!this.projectKey){this.disable()}},setProjectKey:function(a){this.projectKey=a},_getDefaultOptions:function(){var a=this;return AJS.$.extend(true,this._super(),{ajaxOptions:{url:function(){return contextPath+"/rest/api/2/project/"+a.projectKey+"/versions"},query:true,formatResponse:this._formatResponse,},itemAttrDisplayed:"label",submitInputVal:true,removeDuplicates:true,removeOnUnSelect:true,noQueryNoRequest:false,revertOnInvalid:true})},_formatResponse:function(b){var a=new AJS.GroupDescriptor({label:AJS.I18n.getText("Project Versions"),type:"optgroup"});if(b){AJS.$.each(b,function(){a.addItem(new AJS.ItemDescriptor({value:this.id,label:this.name,title:this.description,highlighted:true}))})}return[a]}});;
;
/* module-key = 'com.xpandit.plugins.xray:xray-dialog-resources', location = 'js/dialog/issue-picker.js' */
RAVEN.IssuePicker=JIRA.IssuePicker.extend({setFixVersions:function(a){if(a){this.options.ajaxOptions.data.fixVersions=a}else{delete this.options.ajaxOptions.data.fixVersions}}});;
;
/* module-key = 'com.xpandit.plugins.xray:xray-dialog-resources', location = 'js/dialog/create-testexec.js' */
(function(i){window.RAVEN=window.RAVEN||{};RAVEN.Dialogs=RAVEN.Dialogs||{};RAVEN.Dialogs.createSimpleTestExecDialog=function(v,z,r,s,B,C,t,y,u){var A;var w;this.remoteJiraSearchDialog=null;B=B||[];var x=i.Deferred();a(r,x);i.when(x,i.ajax({type:"GET",url:contextPath+"/rest/api/2/project/"+r,contentType:"application/json",success:function(D){A=D}}),i.ajax({type:"GET",url:contextPath+"/rest/api/2/user?key="+s,contentType:"application/json",success:function(D){w=D}})).then(function(D){var E=new JIRA.FormDialog({id:"raven-create-testExec-dialog",width:680,height:"250px",stacked:true,content:function(F){var H=RAVEN.Dialogs.createTestExec({dialogMode:true,title:v.title,summary:z,assignee:w,project:A,hasRevision:D,isXEADialog:u});var G=i(H);F(G)},submitHandler:function(I){I.preventDefault();var F=0;if(d()!=null){F=d().length}var H=i("#fix-version-filter-multi-select button .value-text").length;if(F>H){var G=d()[F-1];i(".fix-version-error").remove();i("#fix-version-filter-multi-select").after("<div class='fix-version-error' style='color:#ff0000'>"+AJS.format("Invalid version \"{0}\"",AJS.escapeHTML(G))+"</div>");i("#raven-create-testExec-dialog").find("span.icon.throbber.loading").remove();i("#raven-create-testExec-dialog").find("#issue-selector-form-submit").removeAttr("disabled")}else{y(n(),g(),b(),f(),c(),d(),j(),e(),p());E.hide()}},autoClose:true});E.show();q(i("#projects-filter-te"),B);k("#fix-version-filter",r,B);h("#priority-field-filter",n());m(i("#test-environment-filter"),t,r)})};RAVEN.Dialogs.createSimpleTestExecDialog.prototype=Object.create(RAVEN.Dialogs.createSimpleTestExecDialog.prototype);function n(){return AJS.$("#projects-filter-te").selected().val()[0]}function g(){return AJS.$("#create-testexec-summary").val()}function b(){return AJS.$("#assignee-filter").val()[0]}function c(){return AJS.$("#raven-can-redirect-execute-page").is(":checked")}function d(){return AJS.$("#fix-version-filter").val()}function p(){var r=AJS.$("#raven-sprint-filter").val();if(r===null||r===undefined){r=""}return r}function j(){return AJS.$("#test-environment-filter").val()}function e(){return AJS.$("#revision-field").val()}function f(){return AJS.$("#priority-field-filter").find(":selected").val()}function q(r,u){var s=this;projectFilter=new AJS.SingleSelect({element:r,showDropdownButton:true,submitInputVal:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:contextPath+"/rest/api/2/project",formatResponse:function(w){var v=new AJS.GroupDescriptor({weight:0,id:"all-projects-opt-group",replace:true,label:"All Projects"});i(w).each(function(x,y){var z=new AJS.ItemDescriptor({value:y.key,label:y.name,icon:y.avatarUrls["16x16"],allowDuplicate:false,});v.addItem(z)});return[v]}}});const t=i("#projects-filter-te");t.off("change.raven.test.project");t.on("change.raven.test.project",function(){var A=i("#revision-field-group");i("#raven-create-testExec-dialog").block();const x=i("#priority-field");const w=i("#fix-version-field");x.empty();w.empty();var z=i("<select>").attr({id:"priority-field-filter",name:"raven-priority-selector","data-container-class":"long-field"});x.append(z);var v=i("<select>").attr({id:"fix-version-filter",name:"raven-fix-version-selector","class":"select raven-multi-select hidden","data-remove-null-options":"true","data-submit-input-val":"true",multiple:"multiple","data-input-text-style":"display: none;"});w.append(v);h("#priority-field-filter",n());k("#fix-version-filter",n(),u);const B=i("#raven-create-testExec-dialog");B.block();var y=i.Deferred();a(n(),y);i.when(y).then(function(C){if(C){A.show()}else{A.hide()}});B.unblock()})}function o(r,s){assigneeFilter=new AJS.SingleSelect({element:r,showDropdownButton:true,submitInputVal:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:contextPath+"/rest/api/2/user/assignable/search?username=&project="+s+"&maxResults=1000&startAt=0",formatResponse:function(w){var u=new AJS.GroupDescriptor({weight:0,id:"suggestions-assignee-opt-group",replace:true,label:"Suggestions"});var v=new AJS.ItemDescriptor({value:"",label:"Unassigned",html:"<div><span>"+"Unassigned"+"</span></div>",icon:contextPath+"/secure/useravatar?size=xsmall&avatarId=10123",allowDuplicate:false,selected:null});u.addItem(v);var t=new AJS.GroupDescriptor({weight:1,id:"all-assignee-opt-group",replace:true,label:"All Users"});i(w).each(function(y,x){var z=new AJS.ItemDescriptor({value:x.key,label:x.displayName,html:"<div><span>"+x.displayName+" - "+x.emailAddress+"</span></div>",icon:x.avatarUrls["16x16"],allowDuplicate:false,selected:null});t.addItem(z)});return[u,t]}}});AJS.$("#assignee-filter-single-select").addClass("long-field")}function k(r,t,u){u=u||[];var s=new Set();u.filter(function(v){return v&&v.name}).map(function(v){return v.name}).forEach(function(v){s.add(v)});i.ajax({type:"GET",url:AJS.contextPath()+"/rest/api/2/project/"+t+"/versions",contentType:"application/json",success:function(v){var w=i('<optgroup label="'+"Fix Version/s"+'" />');i(v).each(function(y,A){var x=s.has(A.name);var z=new Option(A.name,A.id,x,x);z.setAttribute("title",A.name);w.append(z)});i(r).append(w);l(r)}})}function h(s,t){var r=AJS.contextPath();i.ajax({type:"GET",url:r+"/rest/raven/1.0/api/project/"+t+"/priorities",contentType:"application/json",success:function(u){i(u).each(function(x,w){var v=new Option(w.label,w.id);v.setAttribute("style","background-image: url("+r+w.icon+")");i(s).append(v)});RAVEN.create.testexec.dialog.loadSinglePicker(s)}})}function l(r){i(r).each(function(s,t){new AJS.MultiSelect({itemAttrDisplayed:"title",element:t,showDropdownButton:true,submitInputVal:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,})})}function m(r,t,s){if(JIRA.ApwideXray){JIRA.ApwideXray.createTestEnvironmentPicker(r,t,s)}else{projectFilter=new AJS.LabelPicker({element:r,showDropdownButton:true,submitInputVal:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:contextPath+"/rest/api/1.0/labels/suggest?customFieldId="+t,formatResponse:function(v){var u=new AJS.GroupDescriptor({weight:0,id:"suggestions-opt-group",replace:true,label:"Suggestions"});console.log(v);console.log(v.suggestions);i(v.suggestions).each(function(w,x){var y=new AJS.ItemDescriptor({value:x.label,label:x.label,allowDuplicate:false,selected:null});u.addItem(y)});return[u]}}})}}function a(s,t){var r=false;i.ajax({type:"GET",url:contextPath+"/rest/raven/1.0/customField/isInCreateScreen?project="+s+"&field="+i("#raven-testexec-test-revisionId").val(),contentType:"application/json",success:function(u){r=u;t.resolve(r)}})}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-dialog-resources', location = 'js/dialog/create-test-exec-dialog.js' */
(function(a){RAVEN.namespace("RAVEN.create.testexec.dialog");RAVEN.create.testexec.dialog.loadSinglePicker=function(b){a(b).each(function(c,d){new AJS.SingleSelect({element:d,showDropdownButton:true,submitInputVal:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true})})}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-dialog-resources', location = 'js/dialog/create-testexec-plan.js' */
(function($){window.RAVEN=window.RAVEN||{};RAVEN.Dialogs=RAVEN.Dialogs||{};var versionPicker;var createTestExecDialog;var defaultQuickCreate;RAVEN.Dialogs.testPlanTestExecDialog=function(labels,projectKey,testExecIssueType,assigneeKey,summary,fixVersion,sprint,defaultEnvironments,customField,projectsWithTestExecIssueType,submit,defaultQuickCreateFn){var assignee;this.remoteJiraSearchDialog=null;defaultQuickCreate=defaultQuickCreateFn;var revisionDeferred=$.Deferred();hasRevision(projectKey,revisionDeferred);var projectDeferred=$.Deferred();getDefaultProject(projectKey,projectsWithTestExecIssueType,projectDeferred);var assigneeDeferred=$.Deferred();var versions=fixVersion.map(function(version){return encodeURIComponent(version.name)});$.when(revisionDeferred,projectDeferred,assigneeDeferred).then(function(hasRevision,project){if(!project){var warnDialog=new JIRA.FormDialog({id:"raven-testPlan-testExec-dialog",width:680,height:"250px",stacked:true,content:function(render){var content=RAVEN.Dialogs.permissionError({title:"Create Test Execution",message:"You do not have permission to create Test Execution Issues"});render(content)}});warnDialog.show();return}project.selected=true;createTestExecDialog=new JIRA.FormDialog({id:"raven-testPlan-testExec-dialog",width:680,height:"250px",stacked:true,content:function(render){var content=RAVEN.Dialogs.createTestExecTestPlan({dialogMode:true,title:labels.title,assignee:assignee,project:project,versions:getProjectFixVersions(project.alias,versions),sprint:sprint,environments:defaultEnvironments,hasRevision:hasRevision,projectsWithTestExecIssueType:projectsWithTestExecIssueType,});var $dialogWrapper=$(content);render($dialogWrapper)},submitHandler:function(e){e.preventDefault();var numberFixVersions=0;if(getFixVersions()!=null){numberFixVersions=getFixVersions().length}var numberSelectedVersions=$("#fix-version-filter-multi-select button .value-text").length;if(numberFixVersions>numberSelectedVersions){var invalidVersion=getFixVersions()[numberFixVersions-1];$(".fix-version-error").remove();$("#fix-version-filter-multi-select").after("<div class='fix-version-error' style='color:#ff0000'>"+AJS.format("Invalid version \"{0}\"",AJS.escapeHTML(invalidVersion))+"</div>");$("#raven-testPlan-testExec-dialog").find("span.icon.throbber.loading").remove();$("#raven-testPlan-testExec-dialog").find("#issue-selector-form-submit").removeAttr("disabled")}else{submit(getSelectedProjectKey(),getSummary(),getAssignee(),getPriority(),canRedirectToTestExecPage(),getFixVersions(),getEnvironment(),getRevision(),getSprint());createTestExecDialog.hide()}},autoClose:true});createTestExecDialog.show();createProjectPicker($("#projects-filter-te"));createFixVersionPicker($("#fix-version-filter"),fixVersion,projectKey);createPriorityPicker("#priority-field-filter",getSelectedProjectKey());createTestEnvironmentPicker($("#test-environment-filter"),customField,projectKey);validateProject($("#projects-filter-te").val()[0]);$("#create-testexec-summary").val(summary);$("#projects-filter-te").on("change",function(e){var selectedProjectKey=$("#projects-filter-te").val()[0];const $priorityField=$("#priority-field");const $sprintField=$("#raven-sprint-field");$priorityField.empty();var prioritySelect=$("<select>").attr({id:"priority-field-filter",name:"raven-priority-selector","data-container-class":"long-field"});$priorityField.append(prioritySelect);$(".fix-version-error").remove();$("#fix-version-filter-textarea").val("");$("#fix-version-filter-multi-select .item-delete").click();$("#fix-version-filter .free-input").remove();versionPicker.setProjectKey(selectedProjectKey);if(validateProject(selectedProjectKey)){createPriorityPicker("#priority-field-filter",getSelectedProjectKey());var projectFixVersions=getProjectFixVersions(selectedProjectKey,versions);$(projectFixVersions).each(function(index,jsonObj){$(createTestExecDialog.$popup[0]).find("#fix-version-filter").trigger("selectOption",[{value:jsonObj.value,title:jsonObj.name,label:jsonObj.name}])})}})});if(assigneeKey!=="undefined"&&assigneeKey!==""){$.ajax({type:"GET",url:contextPath+"/rest/api/2/user?key="+assigneeKey,contentType:"application/json",success:function(data){assignee=data;assigneeDeferred.resolve()}})}else{assignee="";assigneeDeferred.resolve()}};RAVEN.Dialogs.testPlanTestExecDialog.prototype=Object.create(RAVEN.Dialogs.testPlanTestExecDialog.prototype);function getDefaultProject(projectKey,projectsWithTestExecIssueType,deferred){const project=projectsWithTestExecIssueType.find(function(project){return project.alias===projectKey});if(project){return deferred.resolve(project)}return deferred.resolve(projectsWithTestExecIssueType.length>0?projectsWithTestExecIssueType[0]:undefined)}function validateProject(projectKey){var eval=false;$.ajax({type:"GET",url:contextPath+"/rest/raven/1.0/ravenDialog/validateSelectedProject?projectKey="+projectKey,async:false,contentType:"application/json",success:function(data){if(typeof data==="object"&&data.message){$("#create-testexec-dialog #issue-selector-form-submit").hide();$("#create-testexec-dialog .content").hide();$("#create-testexec-dialog #messages-container").empty();AJS.messages.error("#create-testexec-dialog #messages-container",{title:data.title?data.title:"",body:data.message,closeable:false});$("#create-testexec-dialog #messages-container").show();var link=$("#jira-create-dialog");link.click(function(){createTestExecDialog.hide();defaultQuickCreate(link.data().project)})}else{$("#create-testexec-dialog #messages-container").empty();$("#create-testexec-dialog #messages-container").hide();$("#create-testexec-dialog .content").show();$("#create-testexec-dialog #issue-selector-form-submit").show();eval=true}},error:function(xhr,ajaxOptions,thrownError){console.error(xhr.responseText)}});return eval}function getProjectFixVersions(selectedProject,versionNames){var versions=[];var queryParams="?projectKey="+selectedProject+(versionNames.length>0?"&versionName="+versionNames.join("&versionName="):"");$.ajax({type:"GET",url:contextPath+"/rest/raven/1.0/ravenDialog/getVersionByName"+queryParams,async:false,contentType:"application/json",success:function(data){versions=data}});return versions}function getSelectedProjectKey(){return AJS.$("#projects-filter-te").selected().val()[0]}function getSummary(){return AJS.$("#create-testexec-summary").val()}function getAssignee(){return AJS.$("#assignee-filter").val()[0]}function canRedirectToTestExecPage(){return AJS.$("#raven-can-redirect-exec-page").is(":checked")}function getFixVersions(){return AJS.$("#fix-version-filter").val()}function getSprint(){var sprintId=AJS.$("#raven-sprint-filter").val();if(sprintId===null||sprintId===undefined){sprintId=""}return sprintId}function getEnvironment(){return AJS.$("#test-environment-filter").val()}function getRevision(){return AJS.$("#revision-field").val()}function getPriority(){return AJS.$("#priority-field-filter").find(":selected").val()}function createProjectPicker($selectField){projectFilter=new AJS.SingleSelect({element:$selectField,showDropdownButton:true,submitInputVal:true,noQueryNoRequest:false,revertOnInvalid:true,});$("#projects-filter-te").off("change.raven.tp.project");$("#projects-filter-te").on("change.raven.tp.project",function(){var ele=$("#revision-field-group");$("#raven-testPlan-testExec-dialog").block();var revisionDeferred=$.Deferred();hasRevision(getSelectedProjectKey(),revisionDeferred);$.when(revisionDeferred).then(function(rev){if(rev){ele.show()}else{ele.hide()}});$("#raven-testPlan-testExec-dialog").unblock()})}function createAssigneePicker($selectField,projectKey){assigneeFilter=new AJS.SingleSelect({element:$selectField,showDropdownButton:true,submitInputVal:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:contextPath+"/rest/api/2/user/assignable/search?username=&project="+projectKey+"&maxResults=50&startAt=0",formatResponse:function(data){var suggestionsOptGroup=new AJS.GroupDescriptor({weight:0,id:"suggestions-assignee-opt-group",replace:true,label:"Suggestions"});var item=new AJS.ItemDescriptor({value:"",label:"Unassigned",html:"<div><span>"+"Unassigned"+"</span></div>",icon:contextPath+"/secure/useravatar?size=xsmall&avatarId=10123",allowDuplicate:false,selected:null});suggestionsOptGroup.addItem(item);var optgroup=new AJS.GroupDescriptor({weight:1,id:"all-assignee-opt-group",replace:true,label:"All Users"});$(data).each(function(i,assignee){var item=new AJS.ItemDescriptor({value:assignee.key,label:assignee.displayName,html:"<div><span>"+assignee.displayName+" - "+assignee.emailAddress+"</span></div>",icon:assignee.avatarUrls["16x16"],allowDuplicate:false,selected:null});optgroup.addItem(item)});return[suggestionsOptGroup,optgroup]}}});AJS.$("#assignee-filter-single-select").addClass("long-field")}function createFixVersionPicker($selectField,fixversions,project){versionPicker=new RAVEN.VersionPicker({element:$selectField,loadOnInit:true,errorMessage:"{0} is not a valid version.",maxInlineResultsDisplayed:15,projectKey:project})}function createPriorityPicker(selectField,project){var contextPath=AJS.contextPath();$.ajax({type:"GET",url:contextPath+"/rest/raven/1.0/api/project/"+project+"/priorities",contentType:"application/json",success:function(data){$(data).each(function(i,priority){var priorityOption=new Option(priority.label,priority.id);priorityOption.setAttribute("style","background-image: url("+contextPath+priority.icon+")");$(selectField).append(priorityOption)});RAVEN.create.testexec.dialog.loadSinglePicker(selectField)}})}function createTestEnvironmentPicker($selectField,customField,projectKey){if(JIRA.ApwideXray){JIRA.ApwideXray.createTestEnvironmentPicker($selectField,customField,projectKey)}else{projectFilter=new AJS.LabelPicker({element:$selectField,showDropdownButton:true,submitInputVal:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:contextPath+"/rest/api/1.0/labels/suggest?customFieldId="+customField,formatResponse:function(data){var optgroup=new AJS.GroupDescriptor({weight:0,id:"suggestions-opt-group",replace:true,label:"Suggestions"});$(data.suggestions).each(function(i,env){var item=new AJS.ItemDescriptor({value:env.label,label:env.label,allowDuplicate:false,selected:null});optgroup.addItem(item)});return[optgroup]}}})}}function hasRevision(projectKey,deferred){var hasRevision=false;$.ajax({type:"GET",url:contextPath+"/rest/raven/1.0/customField/isInCreateScreen?project="+projectKey+"&field="+$("#raven-testplan-testexec-revisionId").val(),contentType:"application/json",success:function(data){hasRevision=data;deferred.resolve(hasRevision)}})}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-dialog-resources', location = 'templates/dialog/create-testexec-plan.soy' */
// This file was automatically generated from create-testexec-plan.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Dialogs.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Dialogs == 'undefined') { RAVEN.Dialogs = {}; }


RAVEN.Dialogs.createTestExecTestPlan = function(opt_data, opt_ignored) {
  var output = ((opt_data.dialogMode == true) ? '<h2>' + soy.$$escapeHtml(opt_data.title) + '</h2>' : '') + '<div id="create-testexec-dialog" class="aui" style="padding-top:20px"><form action="#" method="post" id="issue-selector-form" class="aui"><div class="field-group"><label for="project">' + soy.$$escapeHtml('Project') + '<span class="aui-icon icon-required">' + soy.$$escapeHtml('Required') + '</span></label><select class="select multi-select edit-labels-inline" id="projects-filter-te" name="raven-project-selector"><optgroup label="All Projects">';
  var projectWithTestExecIssueTypeList13 = opt_data.projectsWithTestExecIssueType;
  var projectWithTestExecIssueTypeListLen13 = projectWithTestExecIssueTypeList13.length;
  for (var projectWithTestExecIssueTypeIndex13 = 0; projectWithTestExecIssueTypeIndex13 < projectWithTestExecIssueTypeListLen13; projectWithTestExecIssueTypeIndex13++) {
    var projectWithTestExecIssueTypeData13 = projectWithTestExecIssueTypeList13[projectWithTestExecIssueTypeIndex13];
    output += '<option value="' + soy.$$escapeHtml(projectWithTestExecIssueTypeData13.alias) + '" title="undefined"' + ((projectWithTestExecIssueTypeData13.selected) ? 'selected="selected"' : '') + 'style="background-image: url(' + soy.$$escapeHtml(projectWithTestExecIssueTypeData13.avatarUrl) + ');" >' + soy.$$escapeHtml(projectWithTestExecIssueTypeData13.name) + '</option>';
  }
  output += '</optgroup></select></div><div class="content"><div class="field-group"><label for="summary">' + soy.$$escapeHtml('Summary') + '<span class="aui-icon icon-required">' + soy.$$escapeHtml('Required') + '</span></label><input class="text long-field" id="create-testexec-summary" name="summary" type="text" required></div><div class="field-group"><div class="parameters"><input class="hidden" title="projectKeys" value="' + soy.$$escapeHtml(opt_data.project.alias) + '"/></div><label for="assignee">' + soy.$$escapeHtml('Assignee') + '</label><select class="single-user-picker js-assignee-picker aui-ss-select" data-show-dropdown-button="true" data-user-type="assignee" data-container-class="long-field" id="assignee-filter" name="raven-assignee-selector"><optgroup label="All Users">' + ((opt_data.assignee != '') ? '<option value="' + soy.$$escapeHtml(opt_data.assignee.name) + '" selected="selected" style="background-image: url(' + soy.$$escapeHtml(opt_data.assignee.avatarUrls['16x16']) + ');">' + soy.$$escapeHtml(opt_data.assignee.displayName) + '</option>' : '') + '<option value="-1">' + soy.$$escapeHtml('Unassigned') + '</option></optgroup></select><div class="description">' + soy.$$escapeHtml('Choose a user to assign the Test Execution') + '</div></div><div class="field-group"><label for="priority">' + soy.$$escapeHtml('Priority') + '</label><div id="priority-field"><select class="select" id="priority-field-filter" name="raven-priority-selector" data-container-class="long-field"></select></div><div class="description">' + soy.$$escapeHtml('Start typing to get a list of possible matches or press down to select.') + '</div></div><div class="field-group"><label for="fix-version">' + soy.$$escapeHtml('Fix Version/s') + '</label><select class="select raven-multi-select hidden" id="fix-version-filter" name="raven-fix-version-selector" multiple="multiple" data-remove-null-options="true" data-submit-input-val="true" data-input-text style="display: none;">';
  var versionList55 = opt_data.versions;
  var versionListLen55 = versionList55.length;
  for (var versionIndex55 = 0; versionIndex55 < versionListLen55; versionIndex55++) {
    var versionData55 = versionList55[versionIndex55];
    output += '<option value="' + soy.$$escapeHtml(versionData55.value) + '" title="' + soy.$$escapeHtml(versionData55.name) + '" selected="selected">' + soy.$$escapeHtml(versionData55.name) + '</option>';
  }
  output += '</select><div class="description">' + soy.$$escapeHtml('Start typing to get a list of possible matches or press down to select.') + '</div></div><div class="field-group" id="raven-sprint-picker"><label for="raven-sprint">' + soy.$$escapeHtml('Sprint') + '</label><div id="raven-sprint-field"><select id="raven-sprint-filter" name="raven-sprint-selector" class="single-select long-field hidden js-sprint-picker aui-ss-select" data-container-class="long-field" data-saved-id="" data-saved-state="">' + ((opt_data.sprint.value != -1) ? '<option value="' + soy.$$escapeHtml(opt_data.sprint.value) + '" title="' + soy.$$escapeHtml(opt_data.sprint.name) + '"selected="selected">' + soy.$$escapeHtml(opt_data.sprint.name) + '</option>' : '') + '</select></div><div class="description">' + soy.$$escapeHtml('Start typing to get a list of possible matches or press down to select.') + '</div></div><div class="field-group"><label for="test-environment">' + soy.$$escapeHtml('Test Environments') + '</label><select class="select raven-multi-select hidden" id="test-environment-filter" name="raven-test-environment-selector" multiple="multiple" data-remove-null-options="true" data-submit-input-val="true" data-input-text style="display: none;">';
  var environmentList83 = opt_data.environments;
  var environmentListLen83 = environmentList83.length;
  for (var environmentIndex83 = 0; environmentIndex83 < environmentListLen83; environmentIndex83++) {
    var environmentData83 = environmentList83[environmentIndex83];
    output += '<option value="' + soy.$$escapeHtml(environmentData83.value) + '" title="' + soy.$$escapeHtml(environmentData83.name) + '" selected="selected">' + soy.$$escapeHtml(environmentData83.name) + '</option>';
  }
  output += '</select><div class="description">' + soy.$$escapeHtml('Start typing to get a list of possible matches or press down to select.') + '<p>' + soy.$$escapeHtml('Each environment where the Test is to be executed') + '</p></div></div><div class="field-group" id="revision-field-group" ' + ((opt_data.hasRevision != true) ? 'style="display:none"' : '') + '><label for="revision">' + soy.$$escapeHtml('Revision') + '</label><input class="textfield text long-field" id="revision-field" name="raven-revision" type="text"/><div class="description">' + soy.$$escapeHtml('The system revision for the test execution') + '</div></div><div class="field-group"><div class="checkbox"><input class="checkbox" type="checkbox" name="automaticRedirectTestExecutionPageOption" id="can-redirect-exec-page" checked><label for="can-redirect-exec-page">' + soy.$$escapeHtml('Redirect to Test Execution') + '</label></div></div></div><div id="messages-container" style="margin:2%" hidden></div><div class="form-footer buttons-container"><div class="buttons"><input class="button" type="submit" id="issue-selector-form-submit" value="' + soy.$$escapeHtml('Create') + '"/><a href="#" class="cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form></div>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Dialogs.createTestExecTestPlan.soyTemplateName = 'RAVEN.Dialogs.createTestExecTestPlan';
}


RAVEN.Dialogs.permissionError = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml(opt_data.title) + '</h2><div class = "aui-message aui-message-error">' + soy.$$escapeHtml(opt_data.message) + '</div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.permissionError.soyTemplateName = 'RAVEN.Dialogs.permissionError';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-dialog-resources', location = 'js/dialog/pick-status.js' */
(function(f){window.RAVEN=window.RAVEN||{};RAVEN.Dialogs=RAVEN.Dialogs||{};var m;var b;var g;RAVEN.Dialogs.pickStatusesDialog=function(o){b={};g=[];m=o;i(m.statusesEndpoint,n)};RAVEN.Dialogs.pickStatusesDialog.prototype=Object.create(RAVEN.Dialogs.pickStatusesDialog.prototype);function i(o,q,p){if(!p&&m.genericBlockHandler&&m.genericUnblockHandler){m.genericBlockHandler()}else{if(p){e(p,p)}}f.ajax({type:"GET",url:o,async:true,contentType:"application/json",success:function(r){g=r;q(r)},complete:function(){if(!p&&m.genericBlockHandler&&m.genericUnblockHandler){m.genericUnblockHandler()}else{if(p){k(p,p)}}}})}function n(q){var r;var o=m.labels?m.labels.title:"";var p=new JIRA.FormDialog({id:"raven-testPlan-pickStatuses-dialog",width:m.isRequirement?890:560,height:"250px",stacked:true,content:function(u){const t={dialogMode:true,title:o,statuses:q,};var v;if(m.isRequirement){t.hasSubTaskTestExecutionIssueType=m.hasSubTaskTestExecutionIssueType?m.hasSubTaskTestExecutionIssueType:false;v=RAVEN.Dialogs.pickStatusRequirement(t)}else{v=RAVEN.Dialogs.pickStatus(t)}r=f(v);u(r);if(m.onLoad!=null){m.onLoad()}},submitHandler:function(x){x.preventDefault();const u=c();const t=h();var w=d();p.hide();const v=g.filter(function(y){return w.includes(y.status)}).map(function(y){return y.keys}).reduce(function(y,z){return y.concat(z)},[]);m.submitHandler(w,v,t,u)},});p.show();p.bind("Dialog.hide",function(){if(m.onClose){m.onClose()}});if(f(".dialogStatusPicker.selected").length===0){f(".buttons #issue-selector-form-submit").attr("disabled",true)}if(r){if(!m.isRequirement){var s=a(r);f(s).on("selectedItemChanged",function(){var t=j(s);if(m.onEnvironmentSelect){m.onEnvironmentSelect(t)}i(m.statusesEndpoint,function(u){p.get$popupContent().find(".statusesContainer").html(RAVEN.Dialogs.renderStatuses({statuses:u,selections:b}))},p.get$popupContent())})}f("#test-coverage-scope-analysis-dialog").on("refreshRavenStatusPicker",function(){const t=m.getStatusesEndpoint();i(t,function(u){p.get$popupContent().find(".statusesContainer").html(RAVEN.Dialogs.renderStatuses({statuses:u,selections:b}))},p.get$popupContent())})}}function j(o){if(!o||!o.selectedItem||!o.selectedItem.id){return"-1"}return o.selectedItem.id}function d(){var o=[];f(".dialogStatusPicker.selected").each(function(p,q){o.push(f(q).attr("data-status"))});return o}function h(){return AJS.$("#raven-can-redirect-exec-page").is(":checked")}function c(){return AJS.$("#raven-create-sub-test-exec").is(":checked")}function a(t){var s;if(t){var r=f("#test-environments-custom-field-id").val()||f("#raven-testplan-testexec-testEnvironmentsFullId").val();var o=r.split("_")[1];var p="/rest/api/1.0/labels/suggest?customFieldId="+o;var q=[{id:"-1",name:"All Environments"},{id:"__NULL__",name:"Empty"}];s=new RAVEN.Field.SubtleSingleSelect(q,{id:"-1",name:"All Environments"},t.find("#status-picker-environment"),p);s.render()}return s}function l(o){return{id:o.value,name:o.title}}function e(o,p){o.block();if(p){p.spin("large")}}function k(o,p){o.unblock();if(p){p.spinStop()}}f(document).on("click",".selectStatus",function(p){var o=f(p.currentTarget).find("span");if(o.attr("class").indexOf("selected")>=0){o.removeClass("selected");delete b[o.data().status];if(Object.keys(b)==0){f(".buttons #issue-selector-form-submit").attr("disabled",true)}}else{b[o.data().status]="";o.addClass("selected");f(".buttons #issue-selector-form-submit").attr("disabled",false)}});f(document).on("click",".allNoneStatus.left",function(o){f(".dialogStatusPicker").each(function(p,r){var q=f(r);q.addClass("selected");b[q.data().status]=""});f(".buttons #issue-selector-form-submit").attr("disabled",false)});f(document).on("click",".allNoneStatus.right",function(o){f(".dialogStatusPicker").each(function(p,r){var q=f(r);q.removeClass("selected");delete b[q.data().status]});f(".buttons #issue-selector-form-submit").attr("disabled",true)})})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-dialog-resources', location = 'templates/dialog/pick-status.soy' */
// This file was automatically generated from pick-status.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Dialogs.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Dialogs == 'undefined') { RAVEN.Dialogs = {}; }


RAVEN.Dialogs.pickStatusRequirement = function(opt_data, opt_ignored) {
  return ((opt_data.dialogMode == true) ? '<h2>' + soy.$$escapeHtml(opt_data.title) + '</h2>' : '') + '<div id="pick-status-dialog-requirement" class="aui"><div class="test-coverage-scope-analysis" id="test-coverage-scope-analysis-dialog"style="padding-top:20px; display: none; margin: 10px"><h6 class="title">' + soy.$$escapeHtml('Test Coverage For The Following Analysis Scope') + '</h6><a href="#" aria-controls="raven-scope-inline-dialog" data-aui-trigger class="aui-button aui-style-default raven-dropdown2-arrow aui-button-subtle raven-scope-trigger">' + soy.$$escapeHtml('Filter') + '</a><div class="filter-field top-label requirement-status-field"></div><div class="scope-dialog-wrapper"></div></div><form action="#" method="post" id="issue-selector-form" class="aui pick-status-dialog-requirement-form"><div><div style="height:35px;display: block"><a class="allNoneStatus left">' + soy.$$escapeHtml('All') + '</a><a class="allNoneStatus right">' + soy.$$escapeHtml('None') + '</a></div><div class="statusesContainer">' + RAVEN.Dialogs.renderStatuses(opt_data) + '</div><div class="description">' + soy.$$escapeHtml('The statuses selected above will be used to filter the Tests that will be added to the Test Execution') + '</div></div>' + ((opt_data.hasSubTaskTestExecutionIssueType == true) ? '<div class="checkbox"><input class="checkbox" type="checkbox" id="raven-create-sub-test-exec" checked><label for="raven-create-sub-test-exec">' + soy.$$escapeHtml('Sub Test Execution') + '</label></div>' : '') + '<div class="checkbox"><input class="checkbox" type="checkbox" id="raven-can-redirect-exec-page" checked><label for="raven-can-redirect-exec-page">' + soy.$$escapeHtml('Redirect to Test Execution') + '</label></div><div class="form-footer buttons-container"><div class="buttons"><input class="button" type="submit" id="issue-selector-form-submit" value="' + soy.$$escapeHtml('Create') + '"/><a href="#" class="cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.pickStatusRequirement.soyTemplateName = 'RAVEN.Dialogs.pickStatusRequirement';
}


RAVEN.Dialogs.pickStatus = function(opt_data, opt_ignored) {
  return ((opt_data.dialogMode == true) ? '<h2>' + soy.$$escapeHtml(opt_data.title) + '</h2>' : '') + '<div id="pick-status-dialog" class="aui" style="padding-top:20px"><form action="#" method="post" id="issue-selector-form" class="aui"><div><div style="padding-left:20px;height:35px;display: inline-block"><a class="allNoneStatus left">' + soy.$$escapeHtml('All') + '</a><a class="allNoneStatus right">' + soy.$$escapeHtml('None') + '</a></div><div id="environment-picker-container" style="padding-right:20px;display: inline-block; float: right;">' + RAVEN.Dialogs.renderEnvironmentPicker(null) + '</div><div class="statusesContainer">' + RAVEN.Dialogs.renderStatuses(opt_data) + '</div></div><div class="description">' + soy.$$escapeHtml('The statuses selected above will be used to filter the Tests that will be added to the Test Execution') + '</div><div class="form-footer buttons-container"><div class="buttons"><input class="button" type="submit" id="issue-selector-form-submit" value="' + soy.$$escapeHtml('Create') + '" /><a href="#" class="cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.pickStatus.soyTemplateName = 'RAVEN.Dialogs.pickStatus';
}


RAVEN.Dialogs.renderStatuses = function(opt_data, opt_ignored) {
  var output = '';
  var statusList59 = opt_data.statuses;
  var statusListLen59 = statusList59.length;
  for (var statusIndex59 = 0; statusIndex59 < statusListLen59; statusIndex59++) {
    var statusData59 = statusList59[statusIndex59];
    output += '<div class="statusElement"><a class="selectStatus"><span data-status="' + soy.$$escapeHtml(statusData59.status) + '" class="aui-lozenge testentry-progress-bar teststatus dialogStatusPicker ' + ((opt_data.selections != null && opt_data.selections[statusData59.status] != null) ? ' selected ' : '') + '" style=" background-color:' + soy.$$escapeHtml(statusData59.statusColor) + '" title="' + soy.$$escapeHtml(statusData59.statusTitle) + '">' + soy.$$escapeHtml(statusData59.status) + ' ' + ((statusData59.issueCount != null) ? '(' + soy.$$escapeHtml(statusData59.issueCount) + ') ' : '') + '</span></a></div>';
  }
  return output;
};
if (goog.DEBUG) {
  RAVEN.Dialogs.renderStatuses.soyTemplateName = 'RAVEN.Dialogs.renderStatuses';
}


RAVEN.Dialogs.renderEnvironmentPicker = function(opt_data, opt_ignored) {
  return '<div id="status-picker-environment" style="padding-right:20px;display: inline-block;float:right"><select class="select hidden aui-ss-select" id="raven-environment-status-picker" name="environment-selector" multiple="multiple" style="display: none;"></select></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.renderEnvironmentPicker.soyTemplateName = 'RAVEN.Dialogs.renderEnvironmentPicker';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-requirement-status-picker-resources', location = '/js/report/requirement-status-picker.js' */
(function(d){window.RAVEN=window.RAVEN||{};RAVEN.namespace("RAVEN.Pickers");const b="raven-requirement-selected";const e="#F5F6F7";const a="raven-requirement-button";const c="raven-requirement-button-list";RAVEN.Pickers.RequirementStatusPicker=function(k,j,f,g){this.$container=k;this.statuses=j;this.onChange=f;this.onAfterRender=g;var i=function(){return d("."+a)};var h={getButtonColor:function(l){return l.data("requirement-color")},isButtonSelected:function(l){return l.hasClass(b)},selectButton:function(l){l.addClass(b);h.setColor(l,h.getButtonColor(l))},unselectButton:function(l){l.removeClass(b);h.setColor(l,e)},setColor:function(m,l){m.css("background-color",l)}};this.renderStatuses=function(){d("#"+c).remove();var l=RAVEN.Pickers.renderStatuses({statuses:j});k.append(l);i().on("click",this.selectionChanged);if(g){g.call()}};this.selectionChanged=function(n){var l=function(p){var o=d(p);return o.hasClass(a)?o:o.parents("."+a).first()};n.preventDefault();n.stopPropagation();var m=l(n.target);if(h.isButtonSelected(m)){h.unselectButton(m)}else{h.selectButton(m)}if(f){f.call()}};this.getSelectedStatuses=function(){var o=d("."+b);var m=o.length;var l=[];var n=function(p,q){l.push(d(q).data("status-name"))};if(m===0){i().each(n);return[]}else{o.each(n)}return l};this.setStatuses=function(l){j=l};this.reset=function(){i().each(function(m,l){h.unselectButton(d(l))})}}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-requirement-status-picker-resources', location = 'templates/reports/requirement-status-picker.soy' */
// This file was automatically generated from requirement-status-picker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Pickers.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Pickers == 'undefined') { RAVEN.Pickers = {}; }


RAVEN.Pickers.renderStatuses = function(opt_data, opt_ignored) {
  var output = '<div id="raven-requirement-button-list">';
  var statusList4 = opt_data.statuses;
  var statusListLen4 = statusList4.length;
  for (var statusIndex4 = 0; statusIndex4 < statusListLen4; statusIndex4++) {
    var statusData4 = statusList4[statusIndex4];
    output += '<div class="raven-requirement-status-button"><div class="raven-requirement-status-button-inner-wrapper"><button class="raven-requirement-button" data-requirement-color="' + soy.$$escapeHtml(statusData4.color) + '" data-status-name="' + soy.$$escapeHtml(statusData4.name) + '"><span class="raven-button-text-wrapper"><span class="raven-button-text">' + soy.$$escapeHtml(statusData4.name) + ' (' + soy.$$escapeHtml(statusData4.count) + ')</span></span></button></div></div>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Pickers.renderStatuses.soyTemplateName = 'RAVEN.Pickers.renderStatuses';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:raven-datatable-filters-button', location = 'js/datatable/filters-button.js' */
(function(a){RAVEN.namespace("RAVEN.DataTable");RAVEN.DataTable.DataTableHeaderButtons=function(b,e,c,f,d){this.$el=b;this.buttonId=e;this.extraClasses=c||"";this.withArrow=!!f;this.withMargin=d!==false;this._render();return this};RAVEN.DataTable.DataTableHeaderButtons.prototype.getButton=function(){return a("#"+this.buttonId)};RAVEN.DataTable.DataTableHeaderButtons.prototype._render=function(){var b=this;var c=RAVEN.DataTable.DataTableHeaderButtons.renderButtons({buttonId:b.buttonId,extraClasses:b.extraClasses,hasArrow:b.withArrow,hasMargin:b.withMargin,});this.$el.prepend(c)}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:raven-datatable-filters-button', location = 'templates/datatable/filters-button.soy' */
// This file was automatically generated from filters-button.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.DataTable.DataTableHeaderButtons.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.DataTable == 'undefined') { RAVEN.DataTable = {}; }
if (typeof RAVEN.DataTable.DataTableHeaderButtons == 'undefined') { RAVEN.DataTable.DataTableHeaderButtons = {}; }


RAVEN.DataTable.DataTableHeaderButtons.renderButtons = function(opt_data, opt_ignored) {
  return '<div class="raven-filters-button-wrapper" style="width:100%;"><div class="raven-dataset-parameter-flex"><button id="' + soy.$$escapeHtml(opt_data.buttonId) + '" style="height: 32px" class="aui-button aui-button-compact raven-filters-button ' + soy.$$escapeHtml(opt_data.extraClasses) + ' ' + ((opt_data.hasArrow) ? 'raven-arrow' : '') + ' ' + ((opt_data.hasMargin) ? 'margin' : '') + '" title="' + soy.$$escapeHtml('Filter(s)') + '"><span class="aui-icon aui-icon-small aui-iconfont-filter raven-filter-icon"></span><span class="button-content">' + soy.$$escapeHtml('Filter(s)') + '</span></button></div></div>';
};
if (goog.DEBUG) {
  RAVEN.DataTable.DataTableHeaderButtons.renderButtons.soyTemplateName = 'RAVEN.DataTable.DataTableHeaderButtons.renderButtons';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:raven-jquery-deparam', location = 'js/common/jquery-deparam.js' */
(function(e){if("function"===typeof require&&"object"===typeof exports&&"object"===typeof module){try{var h=require("jquery")}catch(l){}module.exports=e(h)}else{if("function"===typeof define&&define.amd){define(["jquery"],function(c){return e(c)})}else{try{var c=(0,eval)("this")}catch(l){c=window}c.deparam=e(c.jQuery)}}})(function(b){var a=function(j,i){var g={},d={"true":!0,"false":!1,"null":null};if(!j){return g}j.replace(/\+/g," ").split("&").forEach(function(e){var f=e.split("=");e=decodeURIComponent(f[0]);var n=g,h=0,m=e.split("]["),l=m.length-1;/\[/.test(m[0])&&/\]$/.test(m[l])?(m[l]=m[l].replace(/\]$/,""),m=m.shift().split("[").concat(m),l=m.length-1):l=0;if(2===f.length){if(f=decodeURIComponent(f[1]),i&&(f=f&&!isNaN(f)&&+f+""===f?+f:"undefined"===f?void 0:void 0!==d[f]?d[f]:f),l){for(;h<=l;h++){e=""===m[h]?n.length:m[h],n=n[e]=h<l?n[e]||(m[h+1]&&isNaN(m[h+1])?{}:[]):f}}else{"[object Array]"===Object.prototype.toString.call(g[e])?g[e].push(f):{}.hasOwnProperty.call(g,e)?g[e]=[g[e],f]:g[e]=f}}else{e&&(g[e]=i?void 0:"")}});return g};b&&(b.prototype.deparam=b.deparam=a);return a});;
;
/* module-key = 'com.xpandit.plugins.xray:raven-common-components-filters-picker', location = 'js/common/components/filterpickerbutton/jira-fields-data-util.js' */
(function(a){RAVEN.namespace("RAVEN.common.components.util");RAVEN.common.components.util.JiraFieldsData=function(c){c=c||{};this.extraFields=c.extraFields;this.excludeFields=c.excludeFields||new Set();this.result=new a.Deferred();var b=this;var d=new FormData();d.append("decorator","none");d.append("check_prev_assignee","true");if(c.issueProjectId){d.append("pid",c.issueProjectId)}if(c.issueTypeId){d.append("type",c.issueTypeId)}a.ajax({processData:false,contentType:false,type:"POST",url:AJS.contextPath()+"/secure/QueryComponent!Default.jspa",data:d,success:function(e){var f=null;if(e&&e.searchers&&e.searchers["groups"]){f=b._processFieldsAvailableResponse(e)}else{console.error("Response doesn't have the expected format");console.error(e)}b.result.resolve(f)},error:function(e,g,f){console.error(e,g,f);b.result.resolve(null)}})};RAVEN.common.components.util.JiraFieldsData.prototype._processFieldsAvailableResponse=function(e){var d=this;var c=this._getFlattenGroups(e);var b=c.filter(function(g){return !!g.isShown&&!d.excludeFields.has(g.id)}).map(function(g){return{id:g.id,name:g.name}});var f=this.extraFields||[];return b.concat(f)};RAVEN.common.components.util.JiraFieldsData.prototype._getFlattenGroups=function(c){var b=c.searchers["groups"].map(function(d){return d.searchers});return[].concat.apply([],b)};RAVEN.common.components.util.JiraFieldsData.prototype.getPromise=function(){return this.result.promise()}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:raven-common-components-filters-picker', location = 'js/common/components/filterpickerbutton/filter-button-picker-text-util.js' */
(function(a){RAVEN.namespace("RAVEN.common.components.util");RAVEN.common.components.util.ButtonText=function(b){if(!b){throw new Error("filterButtonPicker is required!")}this.filterButtonPicker=b;return this};RAVEN.common.components.util.ButtonText.prototype._getPlaceholder=function(b){if(b){return"@@@"+b.trim()+"@@@"}return""};RAVEN.common.components.util.ButtonText.prototype._removesAllPlaceholders=function(c){if(c){var b=new RegExp(this._getPlaceholder(".*"));return c.replace(b,"")}return""};RAVEN.common.components.util.ButtonText.prototype._generateDatesButtonHTML=function(d,e){var c=this;var b=Object.keys(e);if(b&&b.length>0){b.forEach(function(h){var g=e[h].values.join(" ").trim();var i=e[h].name;if(g){var f=" <b>"+RAVEN.escapeHtml(i)+"</b>: "+g;d=d.replace(c._getPlaceholder(i),f)}else{d=d.replace(c._getPlaceholder(i),"")}})}return d};RAVEN.common.components.util.ButtonText.prototype._generateCustomText=function(e,c){var d=this.filterButtonPicker.customButtonTextRenderer[e.id];var b=d(e)||"";c=c.replace(this._getPlaceholder(e.name),b);return c};RAVEN.common.components.util.ButtonText.prototype._groupDateFields=function(e,c){var b=e.id;if(!(b in c)){c[b]={name:e.name,values:[]}}if(e.value!==null){var d=e.value;if((e.subtype==="withinTheLast"||e.subtype==="moreThan")&&d&&d.indexOf("-")===0){d=d.substring(1)}if(d){c[b].values.push(e.subname+RAVEN.escapeHtml(d))}}};RAVEN.common.components.util.ButtonText.prototype._groupNumberRangeFields=function(d,c){var b=d.id;if(!(b in c)){c[b]={name:d.name,values:[null,null]}}if(d.elementName&&(d.elementName.indexOf(":greaterThan")>=0||d.elementName.indexOf(":min")>=0)){c[b][0]=RAVEN.escapeHtml(d.value)||null}else{if(d.elementName&&(d.elementName.indexOf(":lessThan")>=0||d.elementName.indexOf(":max")>=0)){c[b][1]=RAVEN.escapeHtml(d.value)||null}}};RAVEN.common.components.util.ButtonText.prototype._generateFreeInputText=function(d,b){if(d.value){var c=" <b>"+RAVEN.escapeHtml(d.name)+"</b>: "+RAVEN.escapeHtml(d.value);b=b.replace(this._getPlaceholder(d.name),c)}else{b=b.replace(this._getPlaceholder(d.name),"")}return b};RAVEN.common.components.util.ButtonText.prototype._generateSelectCascadingText=function(e,c){var b=e.$element.parent().find("select option:selected").toArray().filter(function(g,f){return !e.value||e.value[f]}).map(function(f){return RAVEN.escapeHtml(a(f).html())}).join(" - ");if(b){var d=" <b>"+RAVEN.escapeHtml(e.name)+"</b>: "+b;c=c.replace(this._getPlaceholder(e.name),d)}else{c=c.replace(this._getPlaceholder(e.name),"")}return c};RAVEN.common.components.util.ButtonText.prototype._generateSelectText=function(e,c){var b=e.$element.parent().find(".representation .value-text").toArray().map(function(f){return RAVEN.escapeHtml(a(f).html())}).join(", ");if(b){var d=" <b>"+RAVEN.escapeHtml(e.name)+"</b>: "+b;c=c.replace(this._getPlaceholder(e.name),d)}else{c=c.replace(this._getPlaceholder(e.name),"")}return c};RAVEN.common.components.util.ButtonText.prototype._generateNumberRangeButtonHTML=function(d,e){var c=this;var b=Object.keys(e);if(b&&b.length>0){b.forEach(function(g){const f=e[g];const k=f[0]||f[1];const l=e[g].name;if(k){const i=f[0]||"any value";const h=f[1]||"...";const j=" <b>"+RAVEN.escapeHtml(l)+"</b>: "+AJS.format("between {0} and {1}",i,h);d=d.replace(c._getPlaceholder(l),j)}else{d=d.replace(c._getPlaceholder(l),"")}})}return d};RAVEN.common.components.util.ButtonText.prototype.setButtonText=function(){var d=this;var e=d.filterButtonPicker.getValue();var c="";if(e.activeTab===RAVEN.common.components.FiltersPicker.BASIC_TAB&&RAVEN.common.components.FiltersPicker.BASIC_TAB in e){a("#"+d.filterButtonPicker.id).find(".raven-field-selector-field-group > label").each(function(k,j){c+=d._getPlaceholder(a(j).text())});e=e[RAVEN.common.components.FiltersPicker.BASIC_TAB];var g=Object.keys(e);if(g.length===0){d.filterButtonPicker.$buttonElement.find(".button-content").html(d.filterButtonPicker.$buttonElement.data("original-text"));return}var f={};var i={};g.forEach(function(j){var k=e[j];if(k.id in d.filterButtonPicker.customButtonTextRenderer){c=d._generateCustomText(k,c)}else{if(k.type===RAVEN.common.components.FiltersPicker.DATE_TYPE){d._groupDateFields(k,f)}else{if(k.type===RAVEN.common.components.FiltersPicker.TEXT_TYPE){c=d._generateFreeInputText(k,c)}else{if(k.type===RAVEN.common.components.FiltersPicker.SELECT_TYPE){c=d._generateSelectText(k,c)}else{if(k.type===RAVEN.common.components.FiltersPicker.NUMBER_RANGE_TYPE){d._groupNumberRangeFields(k,i)}else{if(k.type===RAVEN.common.components.FiltersPicker.SELECT_CASCADING_TYPE){c=d._generateSelectCascadingText(k,c)}else{console.error("No text renderer for field ("+k.type+"): "+k.id)}}}}}}});c=d._generateDatesButtonHTML(c,f);c=d._generateNumberRangeButtonHTML(c,i);c=d._removesAllPlaceholders(c);if(!c){c=d.filterButtonPicker.$buttonElement.data("original-text")}d.filterButtonPicker.$buttonElement.find(".button-content").html(c)}else{if(e.activeTab===RAVEN.common.components.FiltersPicker.ADVANCED_TAB&&RAVEN.common.components.FiltersPicker.ADVANCED_TAB in e){var h="";var b=e[RAVEN.common.components.FiltersPicker.ADVANCED_TAB].jql;if(b){h="<b>JQL: </b>"+RAVEN.escapeHtml(b)}else{h=d.filterButtonPicker.$buttonElement.data("original-text")}d.filterButtonPicker.$buttonElement.find(".button-content").html(h)}}}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:raven-common-components-filters-picker', location = 'js/common/components/filterpickerbutton/filter-buttom-picker-url-params-util.js' */
(function(a){RAVEN.common.components.util.UrlParams=function(b){this.filterButtonPicker=b};RAVEN.common.components.util.UrlParams.prototype._parseQueryParams=function(){var b=window.location.search;if(!b){return{}}else{if(b.indexOf("?")===0){b=b.substring(1)}}return a.deparam(b,false)};RAVEN.common.components.util.UrlParams.prototype._isCascadingSelectField=function(b){return b&&b.type===RAVEN.common.components.FiltersPicker.SELECT_CASCADING_TYPE};RAVEN.common.components.util.UrlParams.prototype._isDateField=function(c){const b=["previous","next","after","before"];return Array.isArray(c)&&c.length===2&&c[0]&&c[1]&&b.includes(c[1].toLowerCase())};RAVEN.common.components.util.UrlParams.prototype._getDateValue=function(c,i,b,e){const h=RAVEN.common.components.FiltersPicker.QUERY_PARAM_PREFIX+c+":"+i;const g=c+":previous";const d=c+":next";const f={elementName:c+":"+i,id:c,subtype:"",type:RAVEN.common.components.FiltersPicker.DATE_TYPE,value:e[h]};if(i==="after"||i==="before"){f.subtype="dateBetween"}else{if(i==="previous"&&b.has(d)){f.subtype="inRange"}else{if(i==="previous"&&!b.has(d)){f.subtype="withinTheLast"}else{if(i==="next"&&b.has(g)){f.subtype="inRange"}else{if(i==="next"&&!b.has(g)){f.subtype="moreThan"}else{console.error("Date Field not identified!",c,i)}}}}}return f};RAVEN.common.components.util.UrlParams.prototype._generateCallback=function(c,b,d){return function(){var e=c.filterButtonPicker.getValue();e.activeTab=RAVEN.common.components.FiltersPicker.BASIC_TAB;b.forEach(function(f){const h=f.split(":");var g=d[RAVEN.common.components.FiltersPicker.QUERY_PARAM_PREFIX+f];if(e[RAVEN.common.components.FiltersPicker.BASIC_TAB][h[0]]){if(c._isDateField(h)){g=c._getDateValue(h[0],h[1],b,d);e[RAVEN.common.components.FiltersPicker.BASIC_TAB][f]=g}else{if(c._isCascadingSelectField(e[RAVEN.common.components.FiltersPicker.BASIC_TAB][f])){e[RAVEN.common.components.FiltersPicker.BASIC_TAB][f].value=g;e[RAVEN.common.components.FiltersPicker.BASIC_TAB][f].valuesName=["",""]}else{e[RAVEN.common.components.FiltersPicker.BASIC_TAB][f].value=g}}}});c.filterButtonPicker.setBasicTabValues(e);c.filterButtonPicker.fieldsSnapshot=c.filterButtonPicker.getValue()}};RAVEN.common.components.util.UrlParams.prototype.getValueQueryParams=function(){const f=this.filterButtonPicker.getValue();const c={};if(f.activeTab===RAVEN.common.components.FiltersPicker.BASIC_TAB){const e=f[RAVEN.common.components.FiltersPicker.BASIC_TAB];const d=Object.keys(e);d.filter(function(g){const h=e[g].value;if(Array.isArray(h)){return h.some(function(i){return !!i||i===0})}return !!h||h===0}).forEach(function(g){var h=e[g].value;if(Array.isArray(h)){h=h.filter(function(i){return !!i||i===0})}c[RAVEN.common.components.FiltersPicker.QUERY_PARAM_PREFIX+g]=h})}else{if(f.activeTab===RAVEN.common.components.FiltersPicker.ADVANCED_TAB){const b=f[RAVEN.common.components.FiltersPicker.ADVANCED_TAB].jql;if(b){c[RAVEN.common.components.FiltersPicker.QUERY_PARAM_PREFIX+"jql"]=b}}else{console.error("[getValueQueryParams]","No valid Active Tab found!")}}return a.param(c)};RAVEN.common.components.util.UrlParams.prototype.addFieldsFromQueryParams=function(h){const l=this;const f=RAVEN.common.components.FiltersPicker.QUERY_PARAM_PREFIX+"jql";const k=this._parseQueryParams();if(f in k){var d=this.filterButtonPicker.getValue();d.activeTab=RAVEN.common.components.FiltersPicker.ADVANCED_TAB;d[RAVEN.common.components.FiltersPicker.ADVANCED_TAB].jql=k[f];this.filterButtonPicker.setAdvancedTabValues(d)}else{const b=a("#"+this.filterButtonPicker.id);const g="raven-"+this.filterButtonPicker.id+"-fields-id";const i=RAVEN.common.components.FiltersPicker.QUERY_PARAM_PREFIX.length;var e=Object.keys(k);var c=new Set();e=e.filter(function(m){const n=m.indexOf(RAVEN.common.components.FiltersPicker.QUERY_PARAM_PREFIX)===0;return m&&n}).filter(function(m){if(!h){return m.split(RAVEN.common.components.FiltersPicker.QUERY_PARAM_PREFIX)[1]!=="project"}return true}).map(function(m){const n=m.substring(i);c.add(n);return n});var j=e.length;j-=b.find("div.field-group").toArray().filter(function(n){const m=n.getAttribute("data-field-id");return c.has(m)}).length;e.forEach(function(o){const q=o.split(":");const m=q[0];const n=b.find("[data-field-id='"+m+"']").length===0;if(n){const p=l._generateCallback(l,c,k);l.filterButtonPicker.addField(m,g,a("#"+l.filterButtonPicker.id+" .raven-field-picker-flex-container"),p)}});if(j<=0){l._generateCallback(l,c,k)()}}};RAVEN.common.components.util.UrlParams.prototype.addDefaultProject=function(g,e){const k=this;const j={"field-project":e};const b=a("#"+this.filterButtonPicker.id);const f="raven-"+this.filterButtonPicker.id+"-fields-id";const h=RAVEN.common.components.FiltersPicker.QUERY_PARAM_PREFIX.length;var d=Object.keys(j);var c=new Set();d=d.filter(function(l){const m=l.indexOf(RAVEN.common.components.FiltersPicker.QUERY_PARAM_PREFIX)===0;return l&&m}).filter(function(l){if(!g){return l.split(RAVEN.common.components.FiltersPicker.QUERY_PARAM_PREFIX)[1]!=="project"}return true}).map(function(l){const m=l.substring(h);c.add(m);return m});var i=d.length;i-=b.find("div.field-group").toArray().filter(function(m){const l=m.getAttribute("data-field-id");return c.has(l)}).length;d.forEach(function(n){const p=n.split(":");const l=p[0];const m=b.find("[data-field-id='"+l+"']").length===0;if(m){const o=k._generateCallback(k,c,j);k.filterButtonPicker.addField(l,f,a("#"+k.filterButtonPicker.id+" .raven-field-picker-flex-container"),o)}});if(i<=0){k._generateCallback(k,c,j)()}}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:raven-common-components-filters-picker', location = 'js/dialog/jqlautocomplete/jql-expressions-generator.js' */
var jqlExpressionGenerator=jqlExpressionGenerator||(function(){function a(i){return(Array.isArray(i)&&i.length>0)||(!Array.isArray(i)&&i)}function f(i){if(Array.isArray(i)){return i.map(function(j){return'"'+j+'"'}).join(",")}else{if(i){return'"'+i+'"'}}return null}function e(i){if(Array.isArray(i)&&i.length>0){i=i[0]}if(i){return'filter = "'+i+'"'}return null}function d(i){if(a(i)){if(!Array.isArray(i)){i=[i]}var j=i.map(function(k){return"issueKey in testSetTests("+k+")"}).join(" OR ");if(j){return"("+j+")"}}return null}function g(j,i){if(a(i)){var k=f(i);if(k){if(!j){j="";console.error("testsWithTestSetVersion: Project Id/Key must be provided to get correct values")}return'key in testsWithTestSetVersion("'+j+'", '+k+")"}}return null}function c(i){if(a(i)){if(!Array.isArray(i)){i=[i]}var j=i.map(function(k){return"issueKey in requirementTests("+k+")"}).join(" OR ");if(j){return"("+j+")"}}return null}function b(j,i){if(a(i)){var k=f(i);if(k){if(!j){j="";console.error("testsWithReqVersion: Project Id/Key must be provided to get correct values")}return'key in testsWithReqVersion("'+j+'", '+k+")"}}return null}function h(i,k,l){if(i&&k&&k!=="All"){var j=k.split("/").slice(1);var m=$("#"+l+"-descendants-checkbox").is(":checked");if(j){return'issue in testRepositoryFolderTests("'+i+'","'+j.join("/")+'","'+!!m+'")'}}return null}return{getFilterJqlClause:e,getTestSetJqlClause:d,getTestSetVersionJqlClause:g,getRequirementJqlClause:c,getRequirementVersionJqlClause:b,getTestRepositoryFolderJqlClause:h}})();;
;
/* module-key = 'com.xpandit.plugins.xray:raven-common-components-filters-picker', location = 'js/common/components/filterpickerbutton/filter-button-picker.js' */
(function(b){RAVEN.namespace("RAVEN.common.components");RAVEN.common.components.FiltersPicker=function(d){d=d?d:{};const c=this;this.$buttonElement=d.$buttonElement;this.id=d.id;this.entityKey=d.entityKey;this.entityType=d.entityType;this.fieldsPicker=null;this.extraFields=[];this.availableFields=d.availableFields;this.jqlSuggestionsLimit=d.jqlSuggestionsLimit||null;this.confirmText=d.confirmText||null;this.defaultElements=new Set();this.defaultElementsList=d.defaultFields||[];this.defaultElementsList.forEach(function(f){c.defaultElements.add(f)});this.selectedFields=new Set();this.multiselects={};this.fieldsSnapshot={};this.customRenders=this._transformCustomRenderers(d.customRenders);this.changeButtonText=!!d.changeButtonText;this.customButtonTextRenderer=d.customButtonTextRenderer?d.customButtonTextRenderer:{};this.projectsContext=Array.isArray(d.projectsContext)?d.projectsContext:[];this.onInitializationReady=d.onInitializationReady;this.repository=d.repository;this.height=d.height?d.height:"350px";this.isEnterprise=d.isEnterprise;if(RAVEN.isFunction(this.onInitializationReady)){this.onInitializationReady(this.$buttonElement)}this._destroyOldModals();this._addModal();this._destroyMoreFieldsButton();this._addMoreFieldsButton(d.availableFields);this._enableButtonTitleChange();this._enableChangeTabEvents();this._enableJQLAutocomplete();return this};RAVEN.common.components.FiltersPicker.REGULAR_FIELD="regular_field";RAVEN.common.components.FiltersPicker.SPECIAL_FIELD="special_field";RAVEN.common.components.FiltersPicker.NO_OP_FIELD="no_op_field";RAVEN.common.components.FiltersPicker.BASIC_TAB="basic";RAVEN.common.components.FiltersPicker.ADVANCED_TAB="advanced";RAVEN.common.components.FiltersPicker.SELECT_TYPE="select_type";RAVEN.common.components.FiltersPicker.SELECT_CASCADING_TYPE="select_cascading_type";RAVEN.common.components.FiltersPicker.TEXT_TYPE="text_type";RAVEN.common.components.FiltersPicker.DATE_TYPE="date_type";RAVEN.common.components.FiltersPicker.NUMBER_RANGE_TYPE="number_range_type";RAVEN.common.components.FiltersPicker.QUERY_PARAM_PREFIX="field-";RAVEN.common.components.FiltersPicker.JQL_SUGGESTIONS_CLASS="raven-dynamicfilters-jql-suggestions";RAVEN.common.components.FiltersPicker.LABEL_FILTER="labels";RAVEN.common.components.FiltersPicker.FIX_VERSION_FILTER="fixfor";RAVEN.common.components.FiltersPicker.AFFECTS_VERSION_FILTER="version";RAVEN.common.components.FiltersPicker.COMPONENT_FILTER="component";RAVEN.common.components.FiltersPicker.RAVEN_EPIC_LINK_FILTER="raven-epic-link";RAVEN.common.components.FiltersPicker.PROJECT_FILTER="project";RAVEN.common.components.FiltersPicker.TEXT_FILTER="text";RAVEN.common.components.FiltersPicker.SAVED_FILTER="savedfilter";RAVEN.common.components.FiltersPicker.TEST_RUN_STATUS_FILTER="testexec_testrun_status";RAVEN.common.components.FiltersPicker.TEST_RUN_ASSIGNEE_FILTER="testrun_assignee";RAVEN.common.components.FiltersPicker.TEST_RUN_EXECUTED_BY_FILTER="testrun_executedby";RAVEN.common.components.FiltersPicker.TEST_RUN_OVERALL_COMMENT_FILTER="testrun_overallcomment";RAVEN.common.components.FiltersPicker.TEST_RUN_START_DATE_FILTER="testrun_start_date";RAVEN.common.components.FiltersPicker.TEST_RUN_END_DATE_FILTER="testrun_end_date";RAVEN.common.components.FiltersPicker.ENTITY_TYPE={TEST:"TEST",TEST_EXECUTION:"TEST_EXECUTION",TEST_PLAN:"TEST_PLAN"};RAVEN.common.components.FiltersPicker.prototype._changeTab=function(d){const f=b("aui-inline-dialog#"+this.id);const c=f.find("[data-tab-type='"+d+"']").attr("id");const e=f.find("a[href='#"+c+"']");AJS.tabs.change(e);if(d==="advanced"){b(".jql-auto-expand-search-box.raven-autoExpand").trigger("raven-dynamicfilters-textarea")}else{b("#"+this.id+"-jql-search-text").trigger({type:"keyup",keyCode:b.ui.keyCode.ESCAPE})}};RAVEN.common.components.FiltersPicker.prototype._enableChangeTabEvents=function(){const c=this;b("aui-inline-dialog#"+this.id).find(".aui-tabs .tabs-menu li.menu-item > a").click(function(d){d.preventDefault();d.stopPropagation();const e=d.target.getAttribute("data-tab");c._changeTab(e)})};RAVEN.common.components.FiltersPicker.prototype._enableJQLAutocomplete=function(){const e=this;var c=this.id+"-jql-search-text";var f=this.id+"-search-error";var d=this._getJqlAutoCompleteData();var g=b("#"+c);b(document).off("raven-dynamicfilters-textarea").off("input.raven-autoExpand").on("raven-dynamicfilters-textarea","textarea.jql-auto-expand-search-box.raven-autoExpand",function(){e._expandTextarea(c)}).on("input.raven-autoExpand","textarea.jql-auto-expand-search-box.raven-autoExpand",function(){e._expandTextarea(c)});if(!g.attr("filter-jql-initialized")){d.done(function(h){if(h.successful){IssueLinkJQLAutoComplete.initialize({fieldID:c,errorID:f,autoCompleteData:h.data,limitSuggestion:e.jqlSuggestionsLimit,formSubmitFunction:function(){}});g.on("mouseup.jql-suggestions-context",function(){RAVEN.Dialogs.moveSuggestionsBox(c,RAVEN.common.components.FiltersPicker.JQL_SUGGESTIONS_CLASS)})}else{console.error("JQL filter: Unable to initialize JQL filter")}g.attr("filter-jql-initialized",true)})}};RAVEN.common.components.FiltersPicker.prototype._expandTextarea=function(c){RAVEN.Dialogs.expandTextarea(this.id+"-jql-search-text");RAVEN.Dialogs.moveSuggestionsBox(c,RAVEN.common.components.FiltersPicker.JQL_SUGGESTIONS_CLASS)};RAVEN.common.components.FiltersPicker.prototype._getJqlAutoCompleteData=function(){var c=b.Deferred();var d=AJS.contextPath()+"/rest/api/2/jql/autocompletedata";JIRA.SmartAjax.makeRequest({url:d,complete:function(f,g,e){c.resolve(e)}});return c.promise()};RAVEN.common.components.FiltersPicker.prototype._destroyOldModals=function(){b("[id='"+this.id+"']").remove();b("[id='"+this.id+"-jql-search-text-suggestions']").remove()};RAVEN.common.components.FiltersPicker.prototype._addModal=function(){const c=this;this.$buttonElement.attr({"data-aui-trigger":"","aria-controls":c.id,resolved:"","aria-expanded":"false","data-original-text":c.$buttonElement.text()});const d=RAVEN.common.components.FiltersButtonPicker.renderDialog({id:c.id,confirmText:c.confirmText,height:c.height});this.$buttonElement.after(d);this._addEventListeners(c.$buttonElement)};RAVEN.common.components.FiltersPicker.prototype._closeDialog=function(c){return function(){b("#"+c+"-message-panel").empty();b("aui-inline-dialog#"+c).removeAttr("open").trigger("aui-hide")}};RAVEN.common.components.FiltersPicker.prototype._enableButtonTitleChange=function(){if(!this.changeButtonText){return}this.$buttonElement.tooltip({html:true,title:function(){return c.$buttonElement.find(".button-content").html()||""}});const c=this;this.$buttonElement.on("search-button-click",function(){c._setButtonText()})};RAVEN.common.components.FiltersPicker.prototype._setButtonText=function(){const h=new RAVEN.common.components.util.ButtonText(this);h.setButtonText(this);if(this.$buttonElement.hasClass("raven-arrow")){const e=this.$buttonElement.find("span.button-content");e.css("margin-right",0);const d=parseFloat(this.$buttonElement.css("padding-right"));const c=this.$buttonElement.width();const f=e.width();if(f+d>c){const g=c-f-d;e.css("margin-right",g+"px")}}};RAVEN.common.components.FiltersPicker.prototype._validateJql=function(){b("aui-inline-dialog#"+this.id).block();const d=b.Deferred();const e=this.getValue();if(!e||!e.activeTab){d.resolve({isJQLValid:false,error:""})}else{if(e.activeTab===RAVEN.common.components.FiltersPicker.ADVANCED_TAB){const c=e[RAVEN.common.components.FiltersPicker.ADVANCED_TAB].jql||"";RAVEN.common.components.util.FiltersPickerUtils.validateJqlExpression(c).then(function(f){d.resolve(f)})}else{if(e.activeTab===RAVEN.common.components.FiltersPicker.BASIC_TAB){d.resolve({isJQLValid:true})}else{console.error("Active tab not recognized! tab:",e.activeTab);d.resolve({isJQLValid:true})}}}return d.promise()};RAVEN.common.components.FiltersPicker.prototype._addEventListeners=function(d){const c=this;b(".raven-filter-dialog-content-container").scroll(function(){const e=b(".raven-filter-dialog-content-container");const k=b("div.raven-fields-more-button-container:not(.raven-placeholder)");const i=b("div.raven-fields-more-button-container.raven-placeholder");const g="raven-fixed";const f="disabled";const h=k.hasClass(g);const j=e.scrollTop();if(j>=45&&!h){k.addClass(g);i.removeClass(f)}else{if(j<45&&h){k.removeClass(g);i.addClass(f)}}});b("#"+this.id+"-cancel-button").click(function(e){c._closeDialog(c.id)();d.trigger("cancel-button-click",[e,c])});b("#"+this.id+"-simple-search-panel-button").click(function(e){RAVEN.Dialogs.resetTextArea(c.id+"-jql-search-text");c._expandTextarea(c.id+"-jql-search-text");c._validateJql().always(function(g){b("aui-inline-dialog#"+c.id).unblock();if(g&&g.isJQLValid===true){c.snapshot(true);c._closeDialog(c.id)();d.trigger("search-button-click",[e,c])}else{b("#"+c.id+"-message-panel").empty();const f=g&&g.error?g.error:"";b("#"+c.id+"-message-panel").append('<div class="error"><span id="raven-test-table-filters-button-modal-search-error" class="icon jqlerror"></span>&nbsp;'+f+"</div>")}})});b("#"+this.id+"-clear-button").click(function(f){c._expandTextarea(c.id+"-jql-search-text");d.trigger("clear-button-click",[f,c]);var g=b("aui-inline-dialog#"+c.id);var e=g.find(".tabs-pane.active-pane").attr("data-tab-type");c._clearAllErrorMessages();g.find("div.active-pane :input").val("").prop("checked",false);if(c.multiselects&&e===RAVEN.common.components.FiltersPicker.BASIC_TAB){b.each(c.multiselects,function(i,h){h.clear();if(h.clearLozenges){h.clearLozenges()}})}RAVEN.Dialogs.resetTextArea(c.id+"-jql-search-text");g.find(".raven-test-repository-folder-picker").trigger("clear")});b("aui-inline-dialog#"+this.id+" form").submit(function(e){e.preventDefault()});b("#"+this.id+"-message-panel").click(function(e){e.stopPropagation()});b("#"+this.id+"-jql-search-text").keydown(function(f){const e=b("aui-inline-dialog#"+c.id).find(".tabs-pane.active-pane").attr("data-tab-type");if(e===RAVEN.common.components.FiltersPicker.ADVANCED_TAB&&b(".raven-filter-jql-suggestions.dropdown-ready li.active").length>0&&f.keyCode===b.ui.keyCode.ENTER){b(".jql-auto-expand-search-box.raven-autoExpand").trigger("raven-dynamicfilters-textarea")}if(e===RAVEN.common.components.FiltersPicker.ADVANCED_TAB&&b(".raven-filter-jql-suggestions.dropdown-ready li.active").length===0&&f.keyCode===b.ui.keyCode.ENTER){b("#"+c.id+"-simple-search-panel-button").click()}});b("aui-inline-dialog#"+this.id).on("keydown keyup",function(e){if(e.keyCode===b.ui.keyCode.ESCAPE&&b(".raven-filter-jql-suggestions.dropdown-ready").length>0){e.stopPropagation()}});b("body").on("close-dynamic-filter-dialog",function(){c.closeDialog()})};RAVEN.common.components.FiltersPicker.prototype._destroyMoreFieldsButton=function(){b("[id='raven-"+this.id+"-fields-id-checkbox-multi-select']").remove()};RAVEN.common.components.FiltersPicker.prototype._addMoreFieldsButton=function(c){function d(g,f){if(g.name<f.name){return -1}if(g.name>f.name){return 1}return 0}const e="raven-"+this.id+"-fields-id";if(Array.isArray(c)){c=c.sort(d)}this._createFieldsPickerDropdown(c,e);this._setDefaultFields(c,this.fieldsPicker,e)};RAVEN.common.components.FiltersPicker.prototype._stopEventPropagation=function(c){c.stopPropagation();this.$buttonElement.trigger("more-menu-click",[c])};RAVEN.common.components.FiltersPicker.prototype._setDefaultFields=function(h,c,j){if(c){const k=this;const e=h.map(function(m){return m.id});const l={};h.forEach(function(m){l[m.id]=m.name});const g=new Set();e.forEach(function(m){g.add(m)});const d=this.defaultElementsList.filter(function(m){return g.has(m)||m in k.customRenders});const f=new Set();d.forEach(function(m){f.add(m)});var i=d.length;this.$buttonElement.off("field-added.initialized-context").on("field-added.initialized-context",function(m,n){if(f.has(n)&&--i<=0){k.$buttonElement.trigger("initialized",[this,k])}});d.forEach(function(m){const n=function(){k._fixMissingLabels(m,l[m])};k.addField(m,j,b("#"+k.id+" .raven-field-picker-flex-container"),n)})}};RAVEN.common.components.FiltersPicker.prototype._transformCustomRenderers=function(d){var c={};if(!Array.isArray(d)){return c}d.forEach(function(e){c[e.id]=e});return c};RAVEN.common.components.FiltersPicker.prototype._createFieldsPickerDropdown=function(c,e){const d=this;var f="#raven-"+this.id+"-fields-selection";c=c.filter(function(g){return !d.defaultElements.has(g.id)}).map(function(g){g.label=g.name;return g});this.fieldsPicker=new RAVEN.Field.CheckboxMultiSelectView({el:f,id:e,title:"More",groupLabel:"Fields",placeholder:"",maxResultsDisplayed:1000,resetSelectedItems:true,fixedTitle:true,items:c,isUpward:false,saveStateOnChange:false});b("#"+e+"-checkbox-multi-select").appendTo("body").on("click",function(g){d._stopEventPropagation(g)});b(".raven-field-picker-flex-container").on("click",function(g){if(!b(g.target).parent().hasClass("raven-test-repository-folder-picker")){d._stopEventPropagation(g)}const h=b("#"+e+"-checkbox-multi-select");if(h.is(":visible")){b(f).find("a").click()}});b("#"+this.id).on("aui-show",function(){d.snapshot();d.fieldsPicker.saveOriginalState();b("#"+d.id+"-message-panel").empty();b("#"+d.id+"-search-error.icon.jqlerror").removeClass("jqlerror").addClass("jqlgood");b(f).on("mousedown.move-more-button",function(){const g=b("#"+e+"-checkbox-multi-select");const h=b(f);const i=b("#"+d.id);const j=h.offset();j.left=Math.max(j.left-251,0);j.top=i.offset().top+10;j["z-index"]=i.css("z-index")+1;g.css(j);Object.keys(d.multiselects).forEach(function(k){const l=d.multiselects[k];d._reDrawMultiSelects(l)})});setTimeout(function(){b(".jql-auto-expand-search-box.raven-autoExpand").trigger("raven-dynamicfilters-textarea")},0)}).on("aui-hide",function(){if(b("#"+e+"-checkbox-multi-select").is(":visible")){b(f).find("a").click()}d.restore()});b("#raven-"+this.id+"-fields-selection").on("checkboxMultiSelectUpdatedEvt",function(i,k){const h=b("#"+d.fieldsPicker.id+"-checkbox-multi-select").block();var j=false;k=b("#"+e+"-searcher").val();if(!k){k=[]}k.forEach(function(l){if(!d.selectedFields.has(l)){d.addField(l,e+"-searcher",b("#"+d.id+" .raven-field-picker-flex-container"));j=true}});const g=new Set();k.forEach(function(l){g.add(l)});d.selectedFields.forEach(function(l){if(!g.has(l)&&!d.defaultElements.has(l)){d.removeField(l,b("#"+d.id+" .raven-field-picker-flex-container"));j=true}});d.selectedFields=g;if(!j){h.unblock()}}).click(function(){setTimeout(function(){b("#"+d.fieldsPicker.id+"-checkbox-multi-select").find("input.aui-field.check-list-field").blur()},0)})};RAVEN.common.components.FiltersPicker.prototype._renderSpecialField=function(g,m){var l=this;var k=this._getFieldName(g);if(k==="TestRunStatus"||g==="text"){if(g==="text"){k="Contains text"}return{result:RAVEN.common.components.FiltersPicker.SPECIAL_FIELD,html:b(RAVEN.Dialogs.IssueSearch.textField({fieldID:g,fieldName:k}))}}if(g===RAVEN.common.components.FiltersPicker.LABEL_FILTER){var h=RAVEN.Dialogs.IssueSearch.renderLabelFilter();this._addElementToPage(b(h),g,null,m);this.multiselects[g]=a(b("#"+this.id).find("#label-filter"));this._suppressDropdownClickEvents(this.multiselects[g].$container.find(".drop-menu"),this.multiselects[g].$field);return{result:RAVEN.common.components.FiltersPicker.NO_OP_FIELD}}if(g===RAVEN.common.components.FiltersPicker.FIX_VERSION_FILTER){var c=RAVEN.common.components.util.FIX_VERSION_FILTER(g,k);return this._handleJiraSelectInsertFunction(g,m,c)}if(g===RAVEN.common.components.FiltersPicker.AFFECTS_VERSION_FILTER){var j=RAVEN.common.components.util.AFFECTS_VERSION_FILTER(g,k);return this._handleJiraSelectInsertFunction(g,m,j)}if(g===RAVEN.common.components.FiltersPicker.COMPONENT_FILTER){var d=RAVEN.common.components.util.COMPONENT_FILTER(g,k,null,function(){l.getProjectsContext()},l.id);return this._handleJiraSelectInsertFunction(g,m,d)}if(g.indexOf(RAVEN.common.components.FiltersPicker.RAVEN_EPIC_LINK_FILTER)===0){const e=this._epicLinkCustomField(g);k=this._getFieldName(e);var f=RAVEN.common.components.util.RAVEN_EPIC_LINK_FILTER(g,k);return this._handleJiraSelectInsertFunction(g,b("[id='"+g+"_tmp']"),f)}if(g in this.customRenders){var i=this.customRenders[g].renderer;if(RAVEN.isFunction(i)){return this._handleJiraSelectInsertFunction(g,m,i)}else{return{result:RAVEN.common.components.FiltersPicker.SPECIAL_FIELD,html:b(i)}}}return{result:RAVEN.common.components.FiltersPicker.REGULAR_FIELD}};RAVEN.common.components.FiltersPicker.prototype._getFieldName=function(c){const d=this.availableFields.filter(function(e){return e.id===c}).map(function(e){return e.name});return d.length>0?d[0]:""};RAVEN.common.components.FiltersPicker.prototype._handleJiraSelectInsertFunction=function(e,c,d){var f=d(c);if(f){this.multiselects[e]=f;this._suppressDropdownClickEvents(this.multiselects[e].$container.find(".drop-menu"),this.multiselects[e].$field);this._removeDropdownErrorTextOnEmpty(this.multiselects[e].$field)}return{result:RAVEN.common.components.FiltersPicker.NO_OP_FIELD}};function a(c){return new JIRA.LabelPicker({element:c,ajaxOptions:{url:contextPath+"/rest/api/1.0/labels/suggest",data:{},query:true}})}RAVEN.common.components.FiltersPicker.prototype._addFieldProcessResponse=function(c,d,f,k,g){const i=this;if(c){var j=null;if(d==="labels"){j=this._addLabelSuggestions(AJS.$(c))}else{if(this._isElementEpicLink(AJS.$(c))){const e=this._epicLinkNameBuilder(d);k.remove();this.addField(e,f,b("#"+i.id+" .raven-field-picker-flex-container"),g);return}else{var h=b.Deferred();j=h.promise();h.resolve(AJS.$(c))}}j.done(function(l){if(!l){console.error("Unable to add element to the page.");return}const m=i._addElementToPage(l,d,f,k);i._activateDatePicker(m);i._activateDropdownPicker(m);if(RAVEN.isFunction(g)){g(d,c)}b("#"+i.fieldsPicker.id+"-checkbox-multi-select").unblock()})}else{if(RAVEN.isFunction(g)){g(d,c)}b("#"+i.fieldsPicker.id+"-checkbox-multi-select").unblock()}};RAVEN.common.components.FiltersPicker.prototype._isElementEpicLink=function(c){return c.find("select.js-epiclink-checkboxmultiselect").length>0};RAVEN.common.components.FiltersPicker.prototype._addFieldNotAvailable=function(f,e,g,h){var c=b("#"+e+" option[value="+f+"]").text();var d=RAVEN.Dialogs.IssueSearch.fieldNotAvailable({fieldID:f,fieldName:c});this._addFieldProcessResponse(d,f,e,g,h)};RAVEN.common.components.FiltersPicker.prototype._addLabelSuggestions=function(d){var c=b.Deferred();b.ajax({dataType:"json",contentType:"application/json",type:"GET",url:AJS.contextPath()+"/rest/api/1.0/labels/suggest?query=",success:function(g){const f=d.find("select");if(g&&g.suggestions){f.append(b("<optgroup>",{label:d.find("label").text()}));var e=f.find("optgroup");g.suggestions.filter(function(h){return !!h}).forEach(function(h){const i=h.label;e.append(b("<option>",{value:i}).text(i))});c.resolve(d)}},error:function(f,g,e){console.error("Unable to obtain Label suggestions");console.error(f,g,e);c.resolve(null)}});return c.promise()};RAVEN.common.components.FiltersPicker.prototype._addElementToPage=function(i,f,e,h){if(i.filter(".date-searcher").length>0){i.filter(".date-searcher").addClass("filter-field-group full-width").empty().append(this._createDatePicker(f))}var g=b("aui-inline-dialog#"+this.id);if(g.find("[data-field-id='"+f+"']").length===0){h.replaceWith(i);i.attr("data-field-id",f).addClass("raven-field-selector-field-group")}var d=i.find("label[for=searcher-"+f+"]");if(d.length>0&&!d.text()){var c=b("#"+e+" option[value="+f+"]").text();if(c){d.text(AJS.escapeHtml(c))}}else{d.text(AJS.escapeHtml(d.text()))}return g.find("[data-field-id='"+f+"']").first()};RAVEN.common.components.FiltersPicker.prototype._createDatePicker=function(d){const f="raven-"+this.id+"-fields-id-searcher";const g=b("#"+f+" option[value="+d+"]").text();const e=AJS.$(RAVEN.Dialogs.IssueSearch.datePickers({fieldID:d,fieldName:g}));if(!g){var c=b(e).siblings("label");b.ajax({dataType:"json",contentType:"application/json",type:"GET",url:AJS.contextPath()+"/rest/api/2/field",success:function(h){if(Array.isArray(h)){var i=h.filter(function(j){return j.id===d}).map(function(j){return j.name}).filter(function(j){return !!j});if(i&&i.length>0){c.text(i[0])}}},error:function(i,j,h){console.error("Unable to obtain Field '"+d+"' name",i,j,h)}})}return e};RAVEN.common.components.FiltersPicker.prototype._activateDatePicker=function(c){RAVEN.common.components.util.activateDatePicker(c)};RAVEN.common.components.FiltersPicker.prototype._removeDropdownErrorTextOnEmpty=function(c){c.blur(function(){setTimeout(function(){if(c.val()===""){c.parent().siblings("div.error").remove()}},0)})};RAVEN.common.components.FiltersPicker.prototype._activateDropdownPicker=function(e){const c=this;if(e.hasClass("aui-field-cascadingselect")){e.find("select").each(function(){const f=b(this);c.multiselects[f.attr("name")]=new AJS.SingleSelect({element:f,itemAttrDisplayed:"label",showDropdownButton:true,revertOnInvalid:true,removeOnUnSelect:true,submitInputVal:false,errorMessage:"{0} is not a valid value.",maxInlineResultsDisplayed:15});c._removeDropdownErrorTextOnEmpty(c.multiselects[f.attr("name")].$field)});const d=e.find("select.cascadingselect-child");d.on("suggestionsRefreshed",function(h,f){if(f&&f.suggestionsContainerId){var g=e.find("select.cascadingselect-parent").val();if(g&&g.length>0){g=g[0];if(g){b("[id='"+f.suggestionsContainerId+"']").find("a:not(.option-group-"+g+")").parent().remove()}else{b("[id='"+f.suggestionsContainerId+"']").find("a").parent().remove()}}}});d.prev("div.aui-ss").addClass("raven-cascading-select-child")}else{if(e.hasClass("aui-field-userlist")){e.find("select").each(function(){const f=b(this);c.multiselects[f.attr("name")]=new AJS.MultiSelect({element:f,itemAttrDisplayed:"label",showDropdownButton:true,removeOnUnSelect:false,submitInputVal:false,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:false,content:"mixed",errorMessage:"{0} is not a valid value.",maxInlineResultsDisplayed:15,ajaxOptions:{url:AJS.contextPath()+"/rest/api/latest/groupuserpicker",query:true,data:{showAvatar:true},formatResponse:function(h){var i=RAVEN.Dialogs.IssueSelectorBase.prototype._getValidUserSuggestions(f,h.users);var g=RAVEN.Dialogs.IssueSelectorBase.prototype._getValidUserGroupsSuggestions(f,h.groups);return[].concat(i).concat(g)}}});c._removeDropdownErrorTextOnEmpty(c.multiselects[f.attr("name")].$field)})}else{if(e.hasClass("raven-single-select")){e.find("select").each(function(){const f=b(this);c.multiselects[f.attr("name")]=new AJS.SingleSelect({element:f,itemAttrDisplayed:"label",showDropdownButton:true,removeOnUnSelect:false,submitInputVal:false,errorMessage:"{0} is not a valid value.",maxInlineResultsDisplayed:15});c._removeDropdownErrorTextOnEmpty(c.multiselects[f.attr("name")].$field)})}else{if(e.find("select").length>0){e.find("select").each(function(){const f=b(this);c.multiselects[f.attr("name")]=new AJS.MultiSelect({element:f,itemAttrDisplayed:"label",showDropdownButton:true,removeOnUnSelect:false,submitInputVal:false,errorMessage:"{0} is not a valid value.",maxInlineResultsDisplayed:15});c._removeDropdownErrorTextOnEmpty(c.multiselects[f.attr("name")].$field)})}}}}this._suppressDropdownClickEvents(e.find(".drop-menu"),e.find("textarea"))};RAVEN.common.components.FiltersPicker.prototype.waitForElementRenderToDisableClick=function(){const f=".ajs-layer";const e=function(){return b(f).length>0};const g=10;const d=50;const c=function(){b(f).click(function(i){i.stopPropagation()})};const h=function(){console.error(f+" not found!")};RAVEN.waitForConditionAndExecute(e,g,d,c,h)};RAVEN.common.components.FiltersPicker.prototype._suppressDropdownClickEvents=function(d,c){var e=this;function f(){setTimeout(function(){e.waitForElementRenderToDisableClick()},0)}d.click(f);c.keyup(f)};RAVEN.common.components.FiltersPicker.prototype._getBasicSearchValue=function(h){var d={};var f=h.find("form.raven-issue-field-picker-form");var g=f.find("select, input.text.search-entry:not(.raven-date-input), .field-group.aui-field-text input.text");var e=f.find(".date-searcher.filter-field-group");var c=f.find(".field-group.aui-field-numberrange input.text, .field-group.aui-field-workratio input.text");g.each(function(t,j){var v=b(j);var l=v.val();var u=null;var m=v.parent().attr("data-field-id");var p=!!v.attr("has-complementary-checkbox");var i=v.prop("tagName");var q=null;if(i==="SELECT"){if(v.parent().hasClass("aui-field-cascadingselect")){q=RAVEN.common.components.FiltersPicker.SELECT_CASCADING_TYPE;l=v.parent().find("select").toArray().map(function(y){return y.value});u=v.parent().find("option:selected").map(function(y){if(!l[y]){return""}return this.innerHTML}).toArray()}else{q=RAVEN.common.components.FiltersPicker.SELECT_TYPE;const r=v.find("option:selected").map(function(){return this.innerHTML}).toArray();const s=new RavenSet();s.fromArray(l);const x=s.toArray();if(x.length>0){l=x}const w=new RavenSet();w.fromArray(r);const o=w.toArray();if(o.length>0){u=o}}}else{if(i==="INPUT"){q=RAVEN.common.components.FiltersPicker.TEXT_TYPE;u=l}}if(i==="SELECT"&&!v.hasClass("multi-select-select")&&!v.parent().hasClass("aui-field-cascadingselect")){if(Array.isArray(l)&&l.length>0){const n=l[l.length-1];l=[n]}if(Array.isArray(u)&&u.length>0){const k=u[u.length-1];u=[k]}}d[m]={$element:v,elementName:v.attr("name"),id:m,name:v.siblings("label").text(),type:q,value:l?l:null,valuesName:u};if(p){d[m].checkboxValue=v.parent().siblings(".complementary-checkbox").find(":checkbox").is(":checked")}});e.each(function(l,n){const i=b(n);const j=i.attr("data-field-id");const o=i.find(":checked");if(o.length>0){var m=o.parent().data("date-type");var k=o.parent().find("input[type=text]");k.each(function(q,s){var r=s.value;if(r&&(m==="withinTheLast"||m==="moreThan")){r="-"+r}var p=b(s);d[s.name]={$element:p,elementName:p.attr("name"),id:j,name:i.children("label").text(),subname:p.prev("label").text(),type:RAVEN.common.components.FiltersPicker.DATE_TYPE,subtype:m,value:r?r:null}})}else{d[j]={$element:i,elementName:null,id:j,name:i.children("label").text(),subname:null,type:RAVEN.common.components.FiltersPicker.DATE_TYPE,subtype:null,value:null}}});c.each(function(k,l){const j=b(l);const i=j.parent().parent();const m=j.val()||null;d[j.attr("name")]={$element:j,elementName:j.attr("name"),id:i.data("field-id"),name:i.children("label").text(),subname:j.prev("label").text(),type:RAVEN.common.components.FiltersPicker.NUMBER_RANGE_TYPE,subtype:null,value:m}});return d};RAVEN.common.components.FiltersPicker.prototype._getAdvancedSearchValue=function(c){return{jql:c.find("#"+this.id+"-jql-search-text").val()||""}};RAVEN.common.components.FiltersPicker.prototype._restoreBasicTab=function(f,j){const n=this;const i=b("#"+this.id);const h="raven-"+this.id+"-fields-id";const k=i.find("div.raven-field-selector-field-group");const m=i.find(".raven-field-picker-flex-container");const d=new Set();const g=new Set();const l=Object.keys(f);this._clearAllErrorMessages();l.forEach(function(o){g.add(f[o].id)});k.toArray().forEach(function(o){var p=b(o).data("field-id");if(!g.has(p)&&!n.defaultElements.has(p)){n.removeField(p,m)}else{d.add(p)}});const e=new Set();const c=new Set();l.forEach(function(p){var o=f[p].id;if(!d.has(o)&&!n.defaultElements.has(o)){const q=function(){n._setFieldValues(f[p],f[p].value,c,j);n._fixMissingLabels(f[p].id,f[p].name)};n.addField(o,h,m,q,q);e.add(o)}});l.filter(function(o){return !e.has(f[o].id)}).forEach(function(o){n._setFieldValues(f[o],f[o].value,c,j);n._fixMissingLabels(f[o].id,f[o].name)})};RAVEN.common.components.FiltersPicker.prototype._restoreAdvancedTab=function(c){if(c&&(c.jql||c.jql==="")){b("#"+this.id+"-jql-search-text").val(c.jql)}};RAVEN.common.components.FiltersPicker.prototype._fixMissingLabels=function(c,e){const d=b("[data-field-id='"+c+"'] > label").first();if(d.length>0&&!d.text()){d.text(e)}};RAVEN.common.components.FiltersPicker.prototype._setFieldValues=function(f,d,e,c){switch(f.type){case RAVEN.common.components.FiltersPicker.SELECT_CASCADING_TYPE:this._setSelectCascadingValues(f,d);break;case RAVEN.common.components.FiltersPicker.SELECT_TYPE:this._setSelectValues(f,d);break;case RAVEN.common.components.FiltersPicker.NUMBER_RANGE_TYPE:case RAVEN.common.components.FiltersPicker.TEXT_TYPE:this._setTextValues(f,d);break;case RAVEN.common.components.FiltersPicker.DATE_TYPE:this._setDateValues(f,d,e);break;default:console.error("Invalid field type: "+f.type)}if(c){this.$buttonElement.trigger("finished-adding-element",[f,d])}};RAVEN.common.components.FiltersPicker.prototype._reDrawMultiSelects=function(c){if(!c){return}if(c._restoreSelectedOptions){c._restoreSelectedOptions()}setTimeout(function(){if(c.updateItemsIndent){c.updateItemsIndent()}},0)};RAVEN.common.components.FiltersPicker.prototype._setSelectCascadingValues=function(e,d){const c=b.extend({},e);e.elementName=c.id;e.valuesName=[c.valuesName[0]];e.value=[d[0]];this._setSelectValues(e,e.value);e.elementName=c.id+":1";e.valuesName=[c.valuesName[1]];e.value=[d[1]];this._setSelectValues(e,e.value)};RAVEN.common.components.FiltersPicker.prototype._setSelectValues=function(f,i){const l=this;const c=b("aui-inline-dialog#"+this.id);const h=c.find("[name='"+f.elementName+"']");const k=h.attr("name");const e=this.multiselects[k];if(!e){console.error("No MultiSelect object found with name: "+k);return}if(i&&!Array.isArray(i)){i=[i]}if(e.clearLozenges){e.clearLozenges();if(Array.isArray(i)){i.forEach(function(o,n){const m=l._getDescriptorLabel(f,i,n);e.model.setSelected(new AJS.ItemDescriptor({value:o,label:m,title:m,allowDuplicate:false,selected:true}))});this._reDrawMultiSelects(e)}}else{e.clear();if(Array.isArray(i)&&i.length>0){const g=this._getDescriptorLabel(f,i,0);const d=new AJS.ItemDescriptor({value:i[0],label:g,title:g,allowDuplicate:false,selected:true});e.setSelection(d,false);if(!f.valuesName[0]){const j=h.find("option[value='"+i[0]+"']:selected").text();if(j){h.prev("div").find("input").val(j)}}}}};RAVEN.common.components.FiltersPicker.prototype._getDescriptorLabel=function(f,c,e){var d=c[e];if(Array.isArray(f.valuesName)&&f.valuesName.length===c.length&&f.valuesName[e]){d=f.valuesName[e]}return d};RAVEN.common.components.FiltersPicker.prototype._setTextValues=function(f,e){const d=b("aui-inline-dialog#"+this.id);const c=d.find("[name='"+f.elementName+"']");c.val(e);if(c.attr("has-complementary-checkbox")){var g=c.parent().siblings(".complementary-checkbox").find(":checkbox");g.prop("checked",f.checkboxValue)}};RAVEN.common.components.FiltersPicker.prototype._setDateValues=function(j,k,h){var f=b("aui-inline-dialog#"+this.id);if(j.subtype===null&&j.subname===null){f.find("[data-field-name='"+j.id+"']").find("input").val("").prop("checked",false)}else{const d=f.find("[name='"+j.elementName+"']").filter("[data-field-type^='"+j.subtype+"']");const c=d.parent();const e=c.parent();const i=e.data("field-name");const l=d.attr("name");if(!h||!h.has(i)){e.find("input").val("").prop("checked",false)}if((j.subtype==="withinTheLast"||j.subtype==="moreThan")&&k&&k.indexOf("-")===0){k=k.substring(1)}d.val(k);c.find("[type=radio]").prop("checked",true);if(k&&l&&(l.indexOf(":before")>0||l.indexOf(":after")>0)){var g=b.datepicker.parseDate("yy-mm-dd",k);d.datePicker({overrideBrowserDefault:true,dateFormat:"yy-mm-dd"});d.datePicker("setDate",g)}if(h){h.add(i)}}};RAVEN.common.components.FiltersPicker.prototype._clearAllErrorMessages=function(){b("#"+this.id).find(".error").remove();b("#"+this.id+"-search-error.icon.jqlerror").removeClass("jqlerror").addClass("jqlgood")};this._getDescendantsCheckboxValue=function(e,c){var d=c.parent().siblings("#folder-checkbox-wrapper").find("#"+e+"-descendants-checkbox");return d.is(":checked")};this._buildTestPlanTestRunStatusJQL=function(f,d){var g=[];for(var e in f){var c='issue in testPlanTests("'+d+'" , "'+f[e]+'")';g.push(c)}if(g.length>0){return"("+g.join(" or ")+")"}return null};this._buildTestExecutionTestsJQL=function(e,c){if(c.length>0){const d=c.map(function(f){const g=f===RAVEN.common.components.util.FiltersPickerUtils.TEST_RUN_UNASSIGNED?"":f;return'issue in testExecutionTests("'+e+'", "", "'+g+'")'}).join(" OR ");return"("+d+")"}else{return null}};RAVEN.common.components.FiltersPicker.prototype._generateJqlFromSpecialFields=function(c){var d=this;if(c){return Object.keys(c).map(function(l){switch(l){case"savedfilter":var k=c[l].value;if(Array.isArray(k)&&k.length>0){return"savedfilter = "+k[0]}return null;case"folder":var m=c[l].value;if(m){var g=this._getDescendantsCheckboxValue(l,c[l].$element);var e="issue in ";if(m==="Board"){e+=d.repository.folderJQLName+'("'+d.repository.entityKey+'", "", "'+g+'")'}else{var j=m.split("/").slice(1);if(j&&j.length>0){e+=d.repository.folderJQLName+'("'+d.repository.entityKey+'", "'+j.join("/")+'", "'+g+'")'}else{e+=d.repository.repositoryPath+'("'+d.repository.entityKey+'")'}}return e}return null;case"testplan_testrun_status":var f=c[l].value;if(f){return this._buildTestPlanTestRunStatusJQL(f,d.entityKey)}return null;case"test_set":var i=c[l].value;if(i){return'issue in testSetTests("'+i+'")'}return null;case"testrun_assignee":var h=c[l].value;if(d.entityType===RAVEN.common.components.FiltersPicker.ENTITY_TYPE.TEST_EXECUTION&&h){return this._buildTestExecutionTestsJQL(d.entityKey,h)}return null;default:return null}}).filter(function(e){return !!e}).join(" AND ")}return""};RAVEN.common.components.FiltersPicker.prototype._getProjectsContextJql=function(){if(Array.isArray(this.getProjectsContext())&&this.getProjectsContext().length>0){return"project in ("+this.getProjectsContext().join(",")+")"}return""};RAVEN.common.components.FiltersPicker.prototype.getProjectsContext=function(){if(this.isEnterprise){const d=b("aui-inline-dialog#"+this.id);const c=this._getBasicSearchValue(d);if(c.hasOwnProperty("project")){const e=this._getBasicSearchValue(d)["project"].value;if(e!=null&&e.length>0){return e}}}else{if(Array.isArray(this.projectsContext)&&this.projectsContext.length>0){return this.projectsContext}}return[]};RAVEN.common.components.FiltersPicker.prototype.getValue=function(f){function e(i,l,k){const j={activeTab:i};j[RAVEN.common.components.FiltersPicker.BASIC_TAB]=l;j[RAVEN.common.components.FiltersPicker.ADVANCED_TAB]=k;return j}const h=b("aui-inline-dialog#"+this.id);const d=h.find(".tabs-pane.active-pane").attr("data-tab-type");const c=new e(d,this._getBasicSearchValue(h),this._getAdvancedSearchValue(h));if(f===true){var g=c[RAVEN.common.components.FiltersPicker.BASIC_TAB];if(g){Object.keys(g).forEach(function(i){if(g[i].$element){delete g[i].$element}})}}return c};RAVEN.common.components.FiltersPicker.prototype.getValueQueryParams=function(){return new RAVEN.common.components.util.UrlParams(this).getValueQueryParams()};RAVEN.common.components.FiltersPicker.prototype.addFieldsFromQueryParams=function(){new RAVEN.common.components.util.UrlParams(this).addFieldsFromQueryParams(this.isEnterprise)};RAVEN.common.components.FiltersPicker.prototype.addDefaultProject=function(){new RAVEN.common.components.util.UrlParams(this).addDefaultProject(this.isEnterprise,this.projectsContext[0])};RAVEN.common.components.FiltersPicker.prototype.closeDialog=function(){this._closeDialog(this.id)()};RAVEN.common.components.FiltersPicker.prototype.snapshot=function(d){d=!!d;const c=this.$buttonElement.data("raven-ignore-restore");if(d!==c){this.fieldsSnapshot=this.getValue();this.$buttonElement.data("raven-ignore-restore",d)}if(d===true){this.fieldsPicker.commit()}};RAVEN.common.components.FiltersPicker.prototype.restore=function(){if(this.$buttonElement.data("raven-ignore-restore")===false){const c=this.fieldsSnapshot;this.fieldsPicker.rollback();if(RAVEN.common.components.FiltersPicker.BASIC_TAB in c){this._restoreBasicTab(c[RAVEN.common.components.FiltersPicker.BASIC_TAB],false)}if(RAVEN.common.components.FiltersPicker.ADVANCED_TAB in c){this._restoreAdvancedTab(c[RAVEN.common.components.FiltersPicker.ADVANCED_TAB])}this._changeTab(c.activeTab);this.$buttonElement.data("raven-ignore-restore",true)}};RAVEN.common.components.FiltersPicker.prototype.setAdvancedTabValues=function(d){this.fieldsSnapshot=d;if(d&&RAVEN.common.components.FiltersPicker.ADVANCED_TAB in d){const c=d[RAVEN.common.components.FiltersPicker.ADVANCED_TAB];if(c&&c.jql){this._restoreAdvancedTab(c);if(d.activeTab===RAVEN.common.components.FiltersPicker.ADVANCED_TAB){this._changeTab(RAVEN.common.components.FiltersPicker.ADVANCED_TAB);this._setButtonText()}}}else{console.error("Unable to set the Advanced Tab")}};RAVEN.common.components.FiltersPicker.prototype.setBasicTabValues=function(g){this.fieldsSnapshot=g;if(g&&RAVEN.common.components.FiltersPicker.BASIC_TAB in g){const e=this;const f=g[RAVEN.common.components.FiltersPicker.BASIC_TAB];var d=Object.keys(f).length;this.$buttonElement.off("finished-adding-element.set-button-text-context").on("finished-adding-element.set-button-text-context",function(){if(--d<=0&&g.activeTab===RAVEN.common.components.FiltersPicker.BASIC_TAB){e._changeTab(RAVEN.common.components.FiltersPicker.BASIC_TAB);e._setButtonText()}});this._restoreBasicTab(g[RAVEN.common.components.FiltersPicker.BASIC_TAB],true);var c=Object.keys(f).map(function(h){return e._getFieldOriginalName(f[h].id)});b(this.fieldsPicker.el).on("click.basic-tab-reset-context",function(){b(e.fieldsPicker.el).off("click.basic-tab-reset-context");e.fieldsPicker.bulkSelectItems(c,true)})}else{console.error("Unable to set the Basic Tab")}};RAVEN.common.components.FiltersPicker.prototype.removeField=function(c,f){const e=this._removeFieldElementFinder(c,f);const d=this;if(e.length>0){e.find("select").each(function(){var g=b(this).attr("name");if(g&&g in d.multiselects){delete d.multiselects[g]}});e.remove()}b("#"+d.fieldsPicker.id+"-checkbox-multi-select").unblock();if(this.selectedFields){this.selectedFields["delete"](c)}};RAVEN.common.components.FiltersPicker.prototype._removeFieldElementFinder=function(c,e){var d=e.find("[data-field-id='"+c+"']");if(d.length>0){return d}return e.find("[data-field-id='"+this._epicLinkNameBuilder(c)+"']")};RAVEN.common.components.FiltersPicker.prototype._epicLinkNameBuilder=function(c){return RAVEN.common.components.FiltersPicker.RAVEN_EPIC_LINK_FILTER+":"+c};RAVEN.common.components.FiltersPicker.prototype._epicLinkCustomField=function(c){return c.split(":")[1]};RAVEN.common.components.FiltersPicker.prototype._getFieldOriginalName=function(c){if(c&&c.indexOf(RAVEN.common.components.FiltersPicker.RAVEN_EPIC_LINK_FILTER)>=0){return this._epicLinkCustomField(c)}return c};RAVEN.common.components.FiltersPicker.prototype.getActiveTab=function(){const c=b("aui-inline-dialog#"+this.id);return c.find(".tabs-pane.active-pane").attr("data-tab-type")};RAVEN.common.components.FiltersPicker.prototype.getJql=function(){function f(h){const g=b.Deferred();g.resolve(h);return g.promise()}const c=this.getActiveTab();if(c===RAVEN.common.components.FiltersPicker.BASIC_TAB){return this.getBasicTabJql()}else{if(c===RAVEN.common.components.FiltersPicker.ADVANCED_TAB){const e=b("aui-inline-dialog#"+this.id);const d=this._getAdvancedSearchValue(e).jql;return f(d)}else{console.error("No Active Tab found!");return f(null)}}};RAVEN.common.components.FiltersPicker.prototype.getBasicTabJql=function(){const e=this;function c(m,j){var l=m;var k=e._generateJqlFromSpecialFields(j);k=k||null;if(k){l+=l?" AND "+k:k}return l}const d=b.Deferred();const i=this.getValue();if(i&&i[RAVEN.common.components.FiltersPicker.BASIC_TAB]){var h=i[RAVEN.common.components.FiltersPicker.BASIC_TAB];var g=new FormData();var f=false;Object.keys(h).forEach(function(j){var k=h[j];if(k.value){j=k.elementName;if(Array.isArray(k.value)&&k.value.length>0){k.value.filter(function(l){return !!l}).forEach(function(l){g.append(e._getFieldOriginalName(j),(j===RAVEN.common.components.FiltersPicker.COMPONENT_FILTER?encodeURIComponent(l):l))})}else{g.append(e._getFieldOriginalName(j),k.value)}f=true}});if(f){b.ajax({url:AJS.contextPath()+"/secure/QueryComponentRendererValue!Default.jspa",processData:false,contentType:false,type:"POST",data:g,success:function(l){var k=[];const j=Object.keys(l).map(function(m){return RAVEN.common.components.util.FiltersPickerUtils.getFieldJql(l,h,m).always(function(n){k.push(unescape(n))})});b.when.apply(b,j).always(function(){var m=k.filter(function(n){return !!n}).join(" AND ");m=c(m,h);d.resolve(m)})},error:function(l,j,k){console.error("Error getting JQL from server",l,j,k);d.resolve(null)}})}else{d.resolve(null)}}else{d.resolve(null)}return d.promise()};RAVEN.common.components.FiltersPicker.prototype.addField=function(g,h,k,i,f){const j=this;if(!g||b("#"+this.id+" [data-field-id='"+g+"']").length>0){if(RAVEN.isFunction(f)){f(g)}b("#"+this.fieldsPicker.id+"-checkbox-multi-select").unblock();return}const c=g+"_tmp";b("<div/>",{id:c,style:"display: none;"}).appendTo(k);k=b("#"+c);if(this.selectedFields){this.selectedFields.add(g)}const e=j._renderSpecialField(g,k);if(e.result===RAVEN.common.components.FiltersPicker.REGULAR_FIELD){var d=new FormData();d.append("fieldId",g);d.append("decorator","none");d.append("jqlContext",j._getProjectsContextJql());b.ajax({processData:false,contentType:false,type:"POST",url:AJS.contextPath()+"/secure/QueryComponentRendererEdit!Default.jspa",data:d,dataType:"text",success:function(l){if(l){j._addFieldProcessResponse(l,g,h,k,i)}else{j._addFieldNotAvailable(g,h,k,i)}},error:function(){console.log("Unable to find renderer for element: "+g+". Maybe it's an Xray custom element?")},complete:function(){b("#"+j.fieldsPicker.id+"-checkbox-multi-select").unblock();j.$buttonElement.trigger("field-added",[g])}})}else{if(e.result===RAVEN.common.components.FiltersPicker.SPECIAL_FIELD){j._addFieldProcessResponse(e.html,g,h,k,i);j.$buttonElement.trigger("field-added",[g]);k.remove()}else{if(e.result===RAVEN.common.components.FiltersPicker.NO_OP_FIELD){if(RAVEN.isFunction(i)){i(g)}b("#"+j.fieldsPicker.id+"-checkbox-multi-select").unblock();j.$buttonElement.trigger("field-added",[g]);k.remove()}else{console.error("Field result type not recognized: "+e.result);b("#"+j.fieldsPicker.id+"-checkbox-multi-select").unblock();j.$buttonElement.trigger("field-added",[g]);k.remove()}}}}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:raven-common-components-filters-picker', location = 'js/common/components/filterpickerbutton/filter-picker-util.js' */
(function(a){RAVEN.namespace("RAVEN.common.components.util.FiltersPickerUtils");RAVEN.common.components.util.FiltersPickerUtils.TEST_RUN_UNASSIGNED="\u241Eunassigned\u241E";RAVEN.common.components.util.FiltersPickerUtils.getFieldJql=function(b,h,g){const e=a.Deferred();const d=b[g].jql||"";if(g==="text"){if(h==null||h[g]==null||h[g].value==null){return e.resolve(d)}const c="issueKey = '"+h[g].value.trim()+"'";const f=b[g].jql?"("+b[g].jql+" OR "+c+")":"";this.validateJqlExpression(c).done(function(i){if(i.isJQLValid){return e.resolve(f)}else{return e.resolve(d)}}).fail(function(){return e.reject(d)})}else{return e.resolve(d)}return e.promise()};RAVEN.common.components.util.FiltersPickerUtils.validateJqlExpression=function(b){const c=a.Deferred();a.ajax({url:AJS.contextPath()+"/rest/raven/1.0/jql/validation",type:"POST",dataType:"json",data:{jql:b},success:function(d){c.resolve(d)},error:function(f,d,e){console.error("Unable to validate JQL",f,d,e);require("aui/flag")({type:"error",body:"Error filtering Xray Issues",close:"auto"});c.reject({isJQLValid:false,error:"Error filtering Xray Issues"})}});return c.promise()}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:raven-common-components-filters-picker', location = 'js/dialog/util/dialog-jql-suggestions-util.js' */
(function(a){window.RAVEN=window.RAVEN||{};RAVEN.Dialogs=RAVEN.Dialogs||{};RAVEN.Dialogs.moveSuggestionsBox=function(c,b){setTimeout(function(){const d=a("#"+c);const e=d.outerHeight(true);var f=d.parent().find(".suggestions");if(f.length===0){f=a("#"+c+"-suggestions").find(".suggestions.raven-filter-jql-suggestions")}const g=d.offset();g.top+=e;if(f.hasClass("raven-filter-jql-suggestions")){f.css("position","absolute").css(g)}else{f.addClass("raven-filter-jql-suggestions").appendTo("body").css("position","absolute").offset(g).wrap("<div id='"+c+"-suggestions' class='atlassian-autocomplete raven-filter-jql-suggestions "+b+"'></div>")}},0)};RAVEN.Dialogs.expandTextarea=function(c){const b=12;const f=a("#"+c);const h=parseInt(f.attr("rows"));const g=f.innerWidth()-f.width();if(parseInt(f.attr("data-padding"))===0){f.attr("rows",1);f.attr("data-padding",2)}const e=parseFloat(f.css("line-height"));const d=Math.round((f[0].scrollHeight-g)/e);if(d<b+1){f.css("overflow","hidden")}if(d>=b+1){f.css("overflow","visible");f.attr("rows",(b))}else{if(d!==h&&f[0].scrollHeight-g>0){f.attr("rows",d)}}};RAVEN.Dialogs.resetTextArea=function(b){const c=a("#"+b);c.attr("rows",1);c.attr("data-padding",2)}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:raven-common-components-filters-picker', location = 'templates/common/components/filterpickerbutton/filter-button-picker.soy' */
// This file was automatically generated from filter-button-picker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.common.components.FiltersButtonPicker.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.common == 'undefined') { RAVEN.common = {}; }
if (typeof RAVEN.common.components == 'undefined') { RAVEN.common.components = {}; }
if (typeof RAVEN.common.components.FiltersButtonPicker == 'undefined') { RAVEN.common.components.FiltersButtonPicker = {}; }


RAVEN.common.components.FiltersButtonPicker.renderDialog = function(opt_data, opt_ignored) {
  return '<aui-inline-dialog id="' + soy.$$escapeHtml(opt_data.id) + '" alignment="bottom left">' + RAVEN.common.components.FiltersButtonPicker.renderContent(opt_data) + RAVEN.common.components.FiltersButtonPicker.renderControlButtons(opt_data) + '</aui-inline-dialog>';
};
if (goog.DEBUG) {
  RAVEN.common.components.FiltersButtonPicker.renderDialog.soyTemplateName = 'RAVEN.common.components.FiltersButtonPicker.renderDialog';
}


RAVEN.common.components.FiltersButtonPicker.renderContent = function(opt_data, opt_ignored) {
  return '<div class="raven-filter-dialog-content-container" style="height: ' + soy.$$escapeHtml(opt_data.height) + '"><div class="aui-tabs horizontal-tabs"><ul class="tabs-menu"><li class="menu-item active-tab"><a href="#' + soy.$$escapeHtml(opt_data.id) + '-basic-tab" data-tab="basic">' + soy.$$escapeHtml('Basic') + '</a></li><li class="menu-item"><a href="#' + soy.$$escapeHtml(opt_data.id) + '-advanced-tab" data-tab="advanced">' + soy.$$escapeHtml('Advanced') + '</a></li></ul><div class="tabs-pane active-pane" id="' + soy.$$escapeHtml(opt_data.id) + '-basic-tab" data-tab-type="basic">' + RAVEN.common.components.FiltersButtonPicker.basicFilterDialog(opt_data) + '</div><div class="tabs-pane" id="' + soy.$$escapeHtml(opt_data.id) + '-advanced-tab" data-tab-type="advanced"><div class="raven-issue-filter-jql-container">' + RAVEN.common.components.FiltersButtonPicker.advancedFilterDialog(opt_data) + '</div></div></div></div>';
};
if (goog.DEBUG) {
  RAVEN.common.components.FiltersButtonPicker.renderContent.soyTemplateName = 'RAVEN.common.components.FiltersButtonPicker.renderContent';
}


RAVEN.common.components.FiltersButtonPicker.basicFilterDialog = function(opt_data, opt_ignored) {
  return '<div class="raven-fields-more-button-container disabled raven-placeholder"></div><div class="raven-fields-more-button-container"><div id="raven-' + soy.$$escapeHtml(opt_data.id) + '-fields-selection" class="raven-fields-more-button"></div></div><form class="aui raven-issue-field-picker-form"><div class="raven-field-picker-flex-container"></div></form>';
};
if (goog.DEBUG) {
  RAVEN.common.components.FiltersButtonPicker.basicFilterDialog.soyTemplateName = 'RAVEN.common.components.FiltersButtonPicker.basicFilterDialog';
}


RAVEN.common.components.FiltersButtonPicker.advancedFilterDialog = function(opt_data, opt_ignored) {
  return '<div id="raven-initialization-error"></div><div class="aui-group"><form class="aui search-form" id="raven-' + soy.$$escapeHtml(opt_data.id) + '-advanced-search-form" action="#" method="post"><fieldset><label for="' + soy.$$escapeHtml(opt_data.id) + '-search-text"><span id="' + soy.$$escapeHtml(opt_data.id) + '-search-error" class="icon jqlgood" />&nbsp;' + soy.$$escapeHtml('JQL Search') + '<span id="' + soy.$$escapeHtml(opt_data.id) + '-autocomplete-loading" class="hidden"><span class="icon loading throbber"/>' + soy.$$escapeHtml('Loading auto-complete') + '</span><span id="' + soy.$$escapeHtml(opt_data.id) + '-autocomplete-failed" class="hidden">' + soy.$$escapeHtml('(auto-complete unavailable)') + '</span></label><div class="atlassian-autocomplete"><textarea style=\'min-height: 1em\' rows=\'0\' id="' + soy.$$escapeHtml(opt_data.id) + '-jql-search-text" class=\'jql-auto-expand-search-box raven-autoExpand\' data-min-rows=\'0\' data-padding=\'0\'></textarea></div><span id="raven-' + soy.$$escapeHtml(opt_data.id) + '-issue-advanced-search-loading" class="icon loading throbber hidden"/></fieldset></form><div id="' + soy.$$escapeHtml(opt_data.id) + '-message-panel" class="raven-filter-jql-message-panel raven-error-message"></div></div>';
};
if (goog.DEBUG) {
  RAVEN.common.components.FiltersButtonPicker.advancedFilterDialog.soyTemplateName = 'RAVEN.common.components.FiltersButtonPicker.advancedFilterDialog';
}


RAVEN.common.components.FiltersButtonPicker.renderControlButtons = function(opt_data, opt_ignored) {
  return '<div class="raven-control-container raven-control-border"><div class="group align-right"><!-- Cancel button --><button id="' + soy.$$escapeHtml(opt_data.id) + '-cancel-button" class="aui-button aui-button-link" original-title="' + soy.$$escapeHtml('Cancel') + '"><span>' + soy.$$escapeHtml('Cancel') + '</span></button></div><div class="group align-right"><!-- Search button --><button id="' + soy.$$escapeHtml(opt_data.id) + '-simple-search-panel-button" class="aui-button aui-button-primary search-button" type="submit" original-title="' + soy.$$escapeHtml('Apply') + '">' + ((opt_data.confirmText) ? '<span>' + soy.$$escapeHtml(opt_data.confirmText) + '</span>' : '<span>&nbsp;' + soy.$$escapeHtml('Apply') + '</span>') + '</button><span id="' + soy.$$escapeHtml(opt_data.id) + '-raven-issue-search-loading" class="icon loading throbber hidden"/></div><div class="group align-left"><!-- Clear button --><button id="' + soy.$$escapeHtml(opt_data.id) + '-clear-button" class="aui-button search-button" original-title="' + soy.$$escapeHtml('Clear') + '"><span>' + soy.$$escapeHtml('Clear') + '</span></button></div></div>';
};
if (goog.DEBUG) {
  RAVEN.common.components.FiltersButtonPicker.renderControlButtons.soyTemplateName = 'RAVEN.common.components.FiltersButtonPicker.renderControlButtons';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:raven-common-components-filters-picker', location = 'js/common/components/filterpickerbutton/customfields/custom-fields-renderer.js' */
(function(b){RAVEN.namespace("RAVEN.common.components.util");RAVEN.common.components.util.FIX_VERSION_FILTER=function(f,e,d){return RAVEN.common.components.util._genericAutoCompleteMultiSelect(f,e,"fixVersion",d)};RAVEN.common.components.util.AFFECTS_VERSION_FILTER=function(f,e,d){return RAVEN.common.components.util._genericAutoCompleteMultiSelect(f,e,"affectedVersion",d)};function a(d,e){if(d!=null&&d.length>0){return b.param({projects:d})}var f=b("#"+e+" #searcher-pid").val();if(f==null||f.length===0){return""}return b.param({projects:f})}RAVEN.common.components.util.COMPONENT_FILTER=function(i,g,f,d,e){f=f||10;var h=b(RAVEN.Dialogs.IssueSearch.genericMultiSelect({fieldID:i,fieldName:g,}));return function(j){var k=AJS.contextPath()+"/rest/raven/1.0/issue/search/components/all";j.replaceWith(h);return new AJS.MultiSelect({element:h.find("#"+i),revertOnInvalid:false,removeOnUnSelect:false,submitInputVal:false,noQueryNoRequest:false,itemAttrDisplayed:"label",maxInlineResultsDisplayed:f,removeDuplicates:true,ajaxOptions:{contentType:"application/json",query:true,url:function(){var l=a(d(),e);if(l&&l.length!==0){return k+"?"+l}return k},suggestionsHandler:null,formatResponse:function(l){var m=[];m.push(new AJS.GroupDescriptor());b.each(l,function(n,p){var q=m[0];var o=new AJS.ItemDescriptor({value:p,label:p,title:p,highlighted:true});q.addItem(o)});setTimeout(c,100);return m}}})}};RAVEN.common.components.util.RAVEN_EPIC_LINK_FILTER=function(g,e,d){d=d||15;var f=b(RAVEN.Dialogs.IssueSearch.genericMultiSelect({fieldID:g,fieldName:e}));return function(h){var i=AJS.contextPath()+"/rest/greenhopper/1.0/epics";h.replaceWith(f);b("[data-field-id='"+g+"']").attr("data-is-xray-jql",true);return new AJS.MultiSelect({element:f.find("[id='"+g+"']"),revertOnInvalid:false,removeOnUnSelect:true,submitInputVal:false,noQueryNoRequest:false,itemAttrDisplayed:"label",maxInlineResultsDisplayed:d,ajaxOptions:{query:true,processData:true,data:{searchQuery:"",projectKey:"",filterEpicsByGivenProjects:false,maxResults:d},url:i,suggestionsHandler:null,formatResponse:function(k){if(k&&Array.isArray(k.epicLists)){var j=[];const n=RAVEN.common.components.util._getEmptyOptionEpicLinkGroup();j.push(n);for(var m=0;m<k.epicLists.length;m++){const l=RAVEN.common.components.util._parseEpicLinkGroup(m,k.epicLists);j.push(l)}setTimeout(c,100);return j}else{console.error("Error occurred while obtaining field Epic Link field information",k)}return null}}})}};RAVEN.common.components.util._getEmptyOptionEpicLinkGroup=function(){const d=new AJS.GroupDescriptor({id:"raven-epic-link-group-0"});d.addItem(new AJS.ItemDescriptor({value:"EMPTY",label:"No Epic Link",title:"No Epic Link",highlighted:true}));return d};RAVEN.common.components.util._parseEpicLinkGroup=function(f,g){const e=g[f];const d=new AJS.GroupDescriptor({id:"raven-epic-link-group-"+(f+1),label:e.listDescriptor||""});if(Array.isArray(e.epicNames)){e.epicNames.forEach(function(k){var j=k.key;var h=k.name+" ("+k.key+")";var i=new AJS.ItemDescriptor({value:j,label:h,title:h,highlighted:true});d.addItem(i)})}return d};RAVEN.common.components.util.SAVED_FILTER=function(g,e,d){d=d?d:15;var f=b(RAVEN.Dialogs.IssueSearch.genericSingleSelect({fieldID:g,fieldName:e}));return function(i){var h=f.find("#"+g);var j=AJS.contextPath()+"/rest/raven/1.0/filter/search";i.replaceWith(f);h.siblings(".aui-ss.ajax-ss").remove();return new AJS.SingleSelect({element:h,showDropdownButton:true,submitInputVal:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,itemAttrDisplayed:"label",removeOnUnSelect:true,errorMessage:"{0} is not a valid value.",maxInlineResultsDisplayed:d,ajaxOptions:{query:true,url:j,formatResponse:function(l){var k=new AJS.GroupDescriptor({weight:0,id:"all-filter-opt-group",replace:true,label:this.data.query?"Search results":"Favourite filters"});b(l).each(function(){this.label=this.name;var m=new AJS.ItemDescriptor({value:this.id+"",label:this.name,title:this.name,highlighted:true,});k.addItem(m)});setTimeout(function(){var m=b(".ajs-layer");if(!m.data("stop-event-propagation")){m.click(function(n){n.stopPropagation()}).data("stop-event-propagation",true)}},100);return[k]}},})}};RAVEN.common.components.util.SAVED_FILTER_TEXT_RENDER=function(e){var d="";const f=e.$element.find("option:last").text();if(e.value&&e.value.length===1&&e.value[0]!==""&&f){d+=" <b>"+e.name+"</b>:&nbsp;";d+=RAVEN.escapeHtml(f)}return d};RAVEN.common.components.util.LATEST_STATUS_RENDERER=function(f,d){var e=b(RAVEN.Dialogs.IssueSearch.genericMultiSelect({fieldID:f,fieldName:d}));return function(h){var g=AJS.contextPath();var i=g+"/rest/raven/1.0/testplan/"+self.testPlanKey+"/filters";h.replaceWith(e);return new AJS.MultiSelect({element:e.find("#"+f),revertOnInvalid:true,submitInputVal:false,itemAttrDisplayed:"label",maxInlineResultsDisplayed:15,ajaxOptions:{query:true,processData:true,data:{showSubTasks:true},url:i,suggestionsHandler:null,formatResponse:function(j){if(j){var k=new AJS.GroupDescriptor();j.statuses.forEach(function(l){l=new AJS.ItemDescriptor({value:l.name,label:l.name,title:l.name,allowDuplicate:false});k.addItem(l)});setTimeout(c,100);return[k]}return null}}})}};RAVEN.common.components.util.FOLDER_RENDERER=function(g,e,f){var d=b("<div/>").attr({"class":"field-group raven-field-selector-field-group full-width",id:g,"data-field-id":g,name:e});return function(h){h.after(d);var i=["testplan-tests-filter-testsets-field","testplan-tests-filter-assignee-field","testplan-tests-filter-status-textarea","testplan-tests-filter-component-multi-select","testplan-tests-filter-test-environment-multi-select"];new RAVEN.TestRepository.Fields.FolderPicker({$picker:b(d),repositoryPath:"testPlanRepository",folderJQLName:"testPlanFolderTests",entityKey:f,siblingDropdownElements:i,label:e,allDescendants:true,fullWidth:true})}};RAVEN.common.components.util.TEST_ENVIRONMENT_RENDERER=function(g,d,f){var e=b(RAVEN.Dialogs.IssueSearch.genericMultiSelect({fieldID:g,fieldName:d}));return function(i){var h=AJS.contextPath();var j=h+"/rest/api/1.0/labels/suggest?customFieldId="+f;i.replaceWith(e);return new AJS.MultiSelect({element:e.find("#"+g),revertOnInvalid:true,submitInputVal:false,itemAttrDisplayed:"label",maxInlineResultsDisplayed:15,ajaxOptions:{query:true,processData:true,data:{showSubTasks:true},url:j,suggestionsHandler:null,formatResponse:function(k){if(k){var l=new AJS.GroupDescriptor();k.suggestions.forEach(function(m){m=new AJS.ItemDescriptor({value:m.label,label:m.label,title:m.label,allowDuplicate:false});l.addItem(m)});setTimeout(c,100);return[l]}return null}}})}};RAVEN.common.components.util.TEST_SET_RENDERER=function(h,e,g,d){var f=b(RAVEN.Dialogs.IssueSearch.genericSingleSelect({fieldID:h,fieldName:e}));return function(k){var j=AJS.contextPath();var l=j+"/rest/raven/1.0/issue/picker?issueType=TESTSET&jql=issueType in ("+d+")&currentIssueKey="+g+"&showSubTasks=false&showSubTaskParent=false&hideUnexecutableTests=false&currentProjectId=";k.replaceWith(f);var i=new AJS.SingleSelect({element:f.find("#"+h),revertOnInvalid:false,removeOnUnSelect:true,submitInputVal:false,itemAttrDisplayed:"label",maxInlineResultsDisplayed:15,width:"100%",ajaxOptions:{query:true,processData:true,url:l,suggestionsHandler:null,formatResponse:function(m){if(m){var o=new AJS.GroupDescriptor();const n=m.sections[0].issues;if(n){n.forEach(function(p){p=new AJS.ItemDescriptor({value:p.key,label:p.key+" - "+p.summary,title:p.summary,icon:j+"/download/resources/com.xpandit.plugins.xray/images/test-set.png",html:'<div style="overflow: hidden;text-overflow: ellipsis;" title="'+p.key+" - "+p.summary+'" ><img class="icon" alt="" src="'+j+'/download/resources/com.xpandit.plugins.xray/images/test-set.png"><span>'+p.key+" - "+p.summary+"</span></div>",styleClass:"aui-iconised-link",allowDuplicate:false});o.addItem(p)})}setTimeout(c,100);return[o]}return null}}});return i}};RAVEN.common.components.util.DATE_RENDERER=function(d,e){return function(f){f.replaceWith(AJS.$(RAVEN.Dialogs.IssueSearch.genericDatePicker({fieldID:d,fieldName:e})));RAVEN.common.components.util.activateDatePicker(AJS.$("[data-field-id='"+d+"']"))}};RAVEN.common.components.util.USER_RENDERER=function(d,e){return function(g){var h=b(RAVEN.Dialogs.IssueSearch.genericMultiSelect({fieldID:d,fieldName:e}));g.replaceWith(h);var f=h.find("#"+d);return new AJS.MultiSelect({element:f,itemAttrDisplayed:"label",showDropdownButton:true,removeOnUnSelect:true,submitInputVal:false,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,errorMessage:"{0} is not a valid value.",maxInlineResultsDisplayed:15,ajaxOptions:{url:AJS.contextPath()+"/rest/api/latest/groupuserpicker",query:true,data:{showAvatar:true},formatResponse:function(i){var j=JIRA.UserPickerUtil.formatResponse(i.users);j[0].items().push(new AJS.ItemDescriptor({value:RAVEN.common.components.util.FiltersPickerUtils.TEST_RUN_UNASSIGNED,label:"Unassigned",allowDuplicate:false}));if(!JIRA.Users.LoggedInUser.isAnonymous()){j[0].items().push(new AJS.ItemDescriptor({value:JIRA.Users.LoggedInUser.userName(),label:"Current User",allowDuplicate:false}))}setTimeout(c,100);return j}}})}};RAVEN.common.components.util.TEXT_FIELD=function(d,e){return function(f){f.replaceWith(AJS.$(RAVEN.Dialogs.IssueSearch.textField({fieldID:d,fieldName:e})))}};RAVEN.common.components.util.activateDatePicker=function(d){d.find(".js-start-date, .js-end-date").click(function(e){const f=b(e.target).attr("data-aui-dp-uuid");var g=b("aui-inline-dialog[id="+f+"]");g=g.length>0?g:b("div.aui-inline-dialog.aui-datepicker-dialog");g.css("z-index",3100).click(function(h){h.stopPropagation()})}).each(function(f,g){var e=AJS.$(g);e.datePicker({overrideBrowserDefault:true,dateFormat:"yy-mm-dd"});e.attr("placeholder","yyyy-mm-dd")});d.find("input.raven-date-input").click(function(e){b(e.target).siblings("input[type=radio]").prop("checked",true)});if(d.length>0){d.next(".description").appendTo(b(d[0]))}};function c(){var d=b(".ajs-layer");d.each(function(f,g){var e=b(g);if(!e.data("stop-event-propagation")){e.click(function(h){h.stopPropagation()}).data("stop-event-propagation",true)}})}RAVEN.common.components.util.TEST_PLAN_TEST_SET_TEXT_RENDERER=function(f){var e="";if(f.value!==null&&f.value.length>0){var d=f.value[f.value.length-1];e+=" <b>"+f.name+"</b>: ";e+=RAVEN.escapeHtml(d.split(" - ")[0])}return e};RAVEN.common.components.util.FOLDER_TEXT_RENDERER=function(e){var d="";if(e.value!==null&&e.value.length>0&&e.value!=="All"){d+=" <b>"+"Folder"+"</b>: ";d+=RAVEN.escapeHtml(e.value)}return d};RAVEN.common.components.util._genericAutoCompleteMultiSelect=function(h,e,g,d){d=d||15;var f=b(RAVEN.Dialogs.IssueSearch.genericMultiSelect({fieldID:h,fieldName:e}));return function(i){var j=AJS.contextPath()+"/rest/api/2/jql/autocompletedata/suggestions";i.replaceWith(f);return new AJS.MultiSelect({element:f.find("#"+h),revertOnInvalid:false,removeOnUnSelect:true,submitInputVal:false,noQueryNoRequest:false,itemAttrDisplayed:"label",maxInlineResultsDisplayed:d,ajaxOptions:{query:true,processData:true,data:{fieldName:g,fieldValue:function(){const k=b("#"+h+"-textarea").val();return k||""}},url:j,suggestionsHandler:null,formatResponse:function(k){if(k&&Array.isArray(k.results)){var l=new AJS.GroupDescriptor({id:"raven-versions-opt-group"});k.results.filter(function(m){return !!m&&!!m.value}).forEach(function(m){var o=m.value.replace(/^(")/,"").replace(/(")$/,"");var n=new AJS.ItemDescriptor({value:o,label:o,title:o,highlighted:true});l.addItem(n)});setTimeout(c,100);return[l]}else{console.error("Error occurred while obtaining field: "+e,k)}return null}}})}};RAVEN.common.components.util.EXECUTION_STATUS_RENDER=function(f,d){var e=b(RAVEN.Dialogs.IssueSearch.genericMultiSelect({fieldID:f,fieldName:d,isFullWidth:false}));return function(h){var g=AJS.contextPath();var i=g+"/rest/raven/1.0/chart/test/statuses";h.replaceWith(e);return new AJS.MultiSelect({element:e.find("#"+f),revertOnInvalid:true,submitInputVal:false,itemAttrDisplayed:"label",maxInlineResultsDisplayed:15,ajaxOptions:{query:true,processData:true,data:{showSubTasks:true},url:i,suggestionsHandler:null,formatResponse:function(j){if(j){var k=new AJS.GroupDescriptor();j.forEach(function(l){l=new AJS.ItemDescriptor({value:l,label:l,title:l,allowDuplicate:false});k.addItem(l)});setTimeout(c,100);return[k]}return null}}})}}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:raven-field-types', location = '/js/client/fieldTypes.js' */
define("raven-field-types",["jquery"],function(g){var b="";var d={OPTION_MULTI:{hasOptions:true},OPTION_SINGLE:{hasOptions:true},DATA:{hasOptions:false},NATIVE:{hasOptions:false},};var i;g.ajax({url:AJS.contextPath()+"/rest/raven/1.0/customFields/getDateAndDateTimeFormat",type:"GET",async:false,contentType:"application/json",success:function(p,n,q){if(q.responseJSON){i=q.responseJSON}else{if(q.responseText){try{i=JSON.parse(q.responseText)}catch(o){console.error("[getDateAndDateTimeFormat] failed to parse response");console.error(o)}}}},error:function(){console.error("An error occurred while getting jira date formats.")}});var a=function(n){return n.options?m(n):AJS.escapeHTML(n.value)};var m=function(o){var n=o.options.filter(function(p){return p.selected}).map(function(p){return p.value});return n.length?AJS.escapeHTML(n.join(", ")):""};var k=function(n){return n.options.filter(function(o){return o.selected}).map(function(o){return AJS.escapeHTML(o.value)})};var l=function(o){var n=JSON.parse(o.value);return n.rendered};var e=function(n){return n.wikiField.rendered};var h=function(n){if(n.value.length===0){return""}return ravenmoment.utc(parseInt(n.value)).format(i.dateFormat)};var f=function(n){if(n.value.length===0){return""}return ravenmoment(parseInt(n.value)).tz(i.timeZoneId).format(i.dateTimeFormat)};var j=function(n){return n.value?n.value:"false"};var c=function(o){if(!o||!o.value||o.value.trim().length<=0){return b}try{const n=JSON.parse(o.value);const q=n.name;return q?AJS.escapeHTML(q):b}catch(p){console.error("Error parsing user field for render")}return b};return{dataTypes:d,fieldTypes:{TOGGLE:{name:"TOGGLE",dataType:d.DATA,nameKey:"raven-step-field.type.toggle.name",columnRenderer:j,testRunRenderer:j},DATE:{name:"DATE",dataType:d.DATA,nameKey:"raven-step-field.type.date.name",columnRenderer:h,testRunRenderer:h},DATE_TIME:{name:"DATE_TIME",dataType:d.DATA,nameKey:"raven-step-field.type.date-time.name",columnRenderer:f,testRunRenderer:f},NUMBER:{name:"NUMBER",dataType:d.DATA,nameKey:"raven-step-field.type.number.name",columnRenderer:a,testRunRenderer:a},RADIO_BUTTONS:{name:"RADIO_BUTTONS",dataType:d.OPTION_SINGLE,nameKey:"raven-step-field.type.radio-buttons.name",columnRenderer:m,testRunRenderer:m},MULTI_SELECT_LIST:{name:"MULTI_SELECT_LIST",dataType:d.OPTION_MULTI,nameKey:"raven-step-field.type.checkboxes.name",columnRenderer:m,testRunRenderer:k},SINGLE_SELECT_LIST:{name:"SINGLE_SELECT_LIST",dataType:d.OPTION_SINGLE,nameKey:"raven-step-field.type.single-select.name",columnRenderer:m,testRunRenderer:m},MULTI_LINE_TEXT:{name:"MULTI_LINE_TEXT",dataType:d.DATA,nameKey:"raven-step-field.type.multi-line-text.name",columnRenderer:l,testRunRenderer:l},SINGLE_LINE_TEXT:{name:"SINGLE_LINE_TEXT",dataType:d.DATA,nameKey:"raven-step-field.type.single-line-text.name",columnRenderer:a,testRunRenderer:a},NATIVE:{name:"NATIVE",dataType:d.NATIVE,nameKey:"",columnRenderer:e,testRunRenderer:e},USER_PICKER:{name:"USER_PICKER",dataType:d.DATA,nameKey:"raven-step-field.type.user-picker.name",columnRenderer:c,testRunRenderer:c}},entityTypes:{TEST_STEP:"TEST_STEP",TEST_RUN:"TEST_RUN"}}});;
;
/* module-key = 'com.xpandit.plugins.xray:raven-field-types', location = 'js/moment.js' */
(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a():typeof define==="function"&&define.amd?define(a):b.ravenmoment=a()}(this,function(){var bZ;function c4(){return bZ.apply(null,arguments)}function aU(dP){bZ=dP}function aE(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false}}function bo(dP){return Object.prototype.toString.call(dP)==="[object Array]"}function aI(dP){return Object.prototype.toString.call(dP)==="[object Date]"||dP instanceof Date}function aZ(dP,dS){var dR=[],dQ;for(dQ=0;dQ<dP.length;++dQ){dR.push(dS(dP[dQ],dQ))}return dR}function a5(dQ,dP){return Object.prototype.hasOwnProperty.call(dQ,dP)}function cA(dQ,dP){for(var dR in dP){if(a5(dP,dR)){dQ[dR]=dP[dR]}}if(a5(dP,"toString")){dQ.toString=dP.toString}if(a5(dP,"valueOf")){dQ.valueOf=dP.valueOf}return dQ}function G(dR,dS,dP,dQ){return cX(dR,dS,dP,dQ,true).utc()}function b(dP){if(dP._isValid==null){dP._isValid=!isNaN(dP._d.getTime())&&dP._pf.overflow<0&&!dP._pf.empty&&!dP._pf.invalidMonth&&!dP._pf.nullInput&&!dP._pf.invalidFormat&&!dP._pf.userInvalidated;if(dP._strict){dP._isValid=dP._isValid&&dP._pf.charsLeftOver===0&&dP._pf.unusedTokens.length===0&&dP._pf.bigHour===undefined}}return dP._isValid}function bR(dQ){var dP=G(NaN);if(dQ!=null){cA(dP._pf,dQ)}else{dP._pf.userInvalidated=true}return dP}var an=c4.momentProperties=[];function q(dT,dS){var dP,dR,dQ;if(typeof dS._isAMomentObject!=="undefined"){dT._isAMomentObject=dS._isAMomentObject}if(typeof dS._i!=="undefined"){dT._i=dS._i}if(typeof dS._f!=="undefined"){dT._f=dS._f}if(typeof dS._l!=="undefined"){dT._l=dS._l}if(typeof dS._strict!=="undefined"){dT._strict=dS._strict}if(typeof dS._tzm!=="undefined"){dT._tzm=dS._tzm}if(typeof dS._isUTC!=="undefined"){dT._isUTC=dS._isUTC}if(typeof dS._offset!=="undefined"){dT._offset=dS._offset}if(typeof dS._pf!=="undefined"){dT._pf=dS._pf}if(typeof dS._locale!=="undefined"){dT._locale=dS._locale}if(an.length>0){for(dP in an){dR=an[dP];dQ=dS[dR];if(typeof dQ!=="undefined"){dT[dR]=dQ}}}return dT}var dB=false;function by(dP){q(this,dP);this._d=new Date(+dP._d);if(dB===false){dB=true;c4.updateOffset(this);dB=false}}function bM(dP){return dP instanceof by||(dP!=null&&a5(dP,"_isAMomentObject"))}function dH(dP){var dR=+dP,dQ=0;if(dR!==0&&isFinite(dR)){if(dR>=0){dQ=Math.floor(dR)}else{dQ=Math.ceil(dR)}}return dQ}function K(dU,dT,dQ){var dP=Math.min(dU.length,dT.length),dR=Math.abs(dU.length-dT.length),dV=0,dS;for(dS=0;dS<dP;dS++){if((dQ&&dU[dS]!==dT[dS])||(!dQ&&dH(dU[dS])!==dH(dT[dS]))){dV++}}return dV+dR}function aF(){}var cH={};var az;function dr(dP){return dP?dP.toLowerCase().replace("_","-"):dP}function X(dU){var dS=0,dQ,dT,dP,dR;while(dS<dU.length){dR=dr(dU[dS]).split("-");dQ=dR.length;dT=dr(dU[dS+1]);dT=dT?dT.split("-"):null;while(dQ>0){dP=Z(dR.slice(0,dQ).join("-"));if(dP){return dP}if(dT&&dT.length>=dQ&&K(dR,dT,true)>=dQ-1){break}dQ--}dS++}return null}function Z(dP){var dR=null;if(!cH[dP]&&typeof module!=="undefined"&&module&&module.exports){try{dR=az._abbr;require("./locale/"+dP);dj(dR)}catch(dQ){}}return cH[dP]}function dj(dQ,dP){var dR;if(dQ){if(typeof dP==="undefined"){dR=n(dQ)}else{dR=k(dQ,dP)}if(dR){az=dR}}return az._abbr}function k(dQ,dP){if(dP!==null){dP.abbr=dQ;if(!cH[dQ]){cH[dQ]=new aF()}cH[dQ].set(dP);dj(dQ);return cH[dQ]}else{delete cH[dQ];return null}}function n(dQ){var dP;if(dQ&&dQ._locale&&dQ._locale._abbr){dQ=dQ._locale._abbr}if(!dQ){return az}if(!bo(dQ)){dP=Z(dQ);if(dP){return dP}dQ=[dQ]}return X(dQ)}var l={};function dE(dR,dP){var dQ=dR.toLowerCase();l[dQ]=l[dQ+"s"]=l[dP]=dR}function Y(dP){return typeof dP==="string"?l[dP]||l[dP.toLowerCase()]:undefined}function cC(dR){var dQ={},dP,dS;for(dS in dR){if(a5(dR,dS)){dP=Y(dS);if(dP){dQ[dP]=dR[dS]}}}return dQ}function bY(dP,dQ){return function(dR){if(dR!=null){L(this,dP,dR);c4.updateOffset(this,dQ);return this}else{return ap(this,dP)}}}function ap(dQ,dP){return dQ._d["get"+(dQ._isUTC?"UTC":"")+dP]()}function L(dQ,dP,dR){return dQ._d["set"+(dQ._isUTC?"UTC":"")+dP](dR)}function bm(dP,dR){var dQ;if(typeof dP==="object"){for(dQ in dP){this.set(dQ,dP[dQ])}}else{dP=Y(dP);if(typeof this[dP]==="function"){return this[dP](dR)}}return this}function R(dT,dS,dR){var dQ=""+Math.abs(dT),dP=dT>=0;while(dQ.length<dS){dQ="0"+dQ}return(dP?(dR?"+":""):"-")+dQ}var v=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g;var aP=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var a2={};var dc={};function a0(dQ,dR,dP,dT){var dS=dT;if(typeof dT==="string"){dS=function(){return this[dT]()}}if(dQ){dc[dQ]=dS}if(dR){dc[dR[0]]=function(){return R(dS.apply(this,arguments),dR[1],dR[2])}}if(dP){dc[dP]=function(){return this.localeData().ordinal(dS.apply(this,arguments),dQ)}}}function cO(dP){if(dP.match(/\[[\s\S]/)){return dP.replace(/^\[|\]$/g,"")}return dP.replace(/\\/g,"")}function a1(dR){var dS=dR.match(v),dP,dQ;for(dP=0,dQ=dS.length;dP<dQ;dP++){if(dc[dS[dP]]){dS[dP]=dc[dS[dP]]}else{dS[dP]=cO(dS[dP])}}return function(dU){var dT="";for(dP=0;dP<dQ;dP++){dT+=dS[dP] instanceof Function?dS[dP].call(dU,dR):dS[dP]}return dT}}function g(dP,dQ){if(!dP.isValid()){return dP.localeData().invalidDate()}dQ=cv(dQ,dP.localeData());if(!a2[dQ]){a2[dQ]=a1(dQ)}return a2[dQ](dP)}function cv(dS,dP){var dQ=5;function dR(dT){return dP.longDateFormat(dT)||dT}aP.lastIndex=0;while(dQ>=0&&aP.test(dS)){dS=dS.replace(aP,dR);aP.lastIndex=0;dQ-=1}return dS}var dy=/\d/;var dx=/\d\d/;var dv=/\d{3}/;var du=/\d{4}/;var dt=/[+-]?\d{6}/;var cp=/\d\d?/;var cm=/\d{1,3}/;var ck=/\d{1,4}/;var ci=/[+-]?\d{1,6}/;var aD=/\d+/;var dI=/[+-]?\d+/;var dJ=/Z|[+-]\d\d:?\d\d/gi;var Q=/[+-]?\d+(\.\d{1,3})?/;var A=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var cz={};function j(dP,dQ,dR){cz[dP]=typeof dQ==="function"?dQ:function(dS){return(dS&&dR)?dR:dQ}}function ak(dQ,dP){if(!a5(cz,dQ)){return new RegExp(a6(dQ))}return cz[dQ](dP._strict,dP._locale)}function a6(dP){return dP.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(dQ,dU,dT,dS,dR){return dU||dT||dS||dR}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var M={};function b4(dQ,dS){var dP,dR=dS;if(typeof dQ==="string"){dQ=[dQ]}if(typeof dS==="number"){dR=function(dT,dU){dU[dS]=dH(dT)}}for(dP=0;dP<dQ.length;dP++){M[dQ[dP]]=dR}}function dN(dP,dQ){b4(dP,function(dR,dU,dS,dT){dS._w=dS._w||{};dQ(dR,dS._w,dS,dT)})}function aX(dR,dP,dQ){if(dP!=null&&a5(M,dR)){M[dR](dP,dQ._a,dQ,dR)}}var cj=0;var cu=1;var cc=2;var ay=3;var dd=4;var cx=5;var dF=6;function cE(dP,dQ){return new Date(Date.UTC(dP,dQ+1,0)).getUTCDate()}a0("M",["MM",2],"Mo",function(){return this.month()+1});a0("MMM",0,0,function(dP){return this.localeData().monthsShort(this,dP)});a0("MMMM",0,0,function(dP){return this.localeData().months(this,dP)});dE("month","M");j("M",cp);j("MM",cp,dx);j("MMM",A);j("MMMM",A);b4(["M","MM"],function(dP,dQ){dQ[cu]=dH(dP)-1});b4(["MMM","MMMM"],function(dP,dT,dQ,dR){var dS=dQ._locale.monthsParse(dP,dR,dQ._strict);if(dS!=null){dT[cu]=dS}else{dQ._pf.invalidMonth=dP}});var dL="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function cr(dP){return this._months[dP.month()]}var bt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function cG(dP){return this._monthsShort[dP.month()]}function bC(dQ,dU,dP){var dR,dT,dS;if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(dR=0;dR<12;dR++){dT=G([2000,dR]);if(dP&&!this._longMonthsParse[dR]){this._longMonthsParse[dR]=new RegExp("^"+this.months(dT,"").replace(".","")+"$","i");this._shortMonthsParse[dR]=new RegExp("^"+this.monthsShort(dT,"").replace(".","")+"$","i")}if(!dP&&!this._monthsParse[dR]){dS="^"+this.months(dT,"")+"|^"+this.monthsShort(dT,"");this._monthsParse[dR]=new RegExp(dS.replace(".",""),"i")}if(dP&&dU==="MMMM"&&this._longMonthsParse[dR].test(dQ)){return dR}else{if(dP&&dU==="MMM"&&this._shortMonthsParse[dR].test(dQ)){return dR}else{if(!dP&&this._monthsParse[dR].test(dQ)){return dR}}}}}function dp(dP,dQ){var dR;if(typeof dQ==="string"){dQ=dP.localeData().monthsParse(dQ);if(typeof dQ!=="number"){return dP}}dR=Math.min(dP.date(),cE(dP.year(),dQ));dP._d["set"+(dP._isUTC?"UTC":"")+"Month"](dQ,dR);return dP}function o(dP){if(dP!=null){dp(this,dP);c4.updateOffset(this,true);return this}else{return ap(this,"Month")}}function aQ(){return cE(this.year(),this.month())}function co(dP){var dR;var dQ=dP._a;if(dQ&&dP._pf.overflow===-2){dR=dQ[cu]<0||dQ[cu]>11?cu:dQ[cc]<1||dQ[cc]>cE(dQ[cj],dQ[cu])?cc:dQ[ay]<0||dQ[ay]>24||(dQ[ay]===24&&(dQ[dd]!==0||dQ[cx]!==0||dQ[dF]!==0))?ay:dQ[dd]<0||dQ[dd]>59?dd:dQ[cx]<0||dQ[cx]>59?cx:dQ[dF]<0||dQ[dF]>999?dF:-1;if(dP._pf._overflowDayOfYear&&(dR<cj||dR>cc)){dR=cc}dP._pf.overflow=dR}return dP}function dh(dP){if(c4.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+dP)}}function cD(dQ,dP){var dR=true;return cA(function(){if(dR){dh(dQ);dR=false}return dP.apply(this,arguments)},dP)}var ag={};function cf(dP,dQ){if(!ag[dP]){dh(dQ);ag[dP]=true}}c4.suppressDeprecationWarnings=false;var b1=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var di=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]];var ch=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]];var db=/^\/?Date\((\-?\d+)/i;function d(dS){var dT,dP,dR=dS._i,dQ=b1.exec(dR);if(dQ){dS._pf.iso=true;for(dT=0,dP=di.length;dT<dP;dT++){if(di[dT][1].exec(dR)){dS._f=di[dT][0]+(dQ[6]||" ");break}}for(dT=0,dP=ch.length;dT<dP;dT++){if(ch[dT][1].exec(dR)){dS._f+=ch[dT][0];break}}if(dR.match(dJ)){dS._f+="Z"}x(dS)}else{dS._isValid=false}}function bn(dQ){var dP=db.exec(dQ._i);if(dP!==null){dQ._d=new Date(+dP[1]);return}d(dQ);if(dQ._isValid===false){delete dQ._isValid;c4.createFromInputFallback(dQ)}}c4.createFromInputFallback=cD("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(dP){dP._d=new Date(dP._i+(dP._useUTC?" UTC":""))});function au(dW,dP,dU,dT,dV,dS,dR){var dQ=new Date(dW,dP,dU,dT,dV,dS,dR);if(dW<1970){dQ.setFullYear(dW)}return dQ}function bB(dQ){var dP=new Date(Date.UTC.apply(null,arguments));if(dQ<1970){dP.setUTCFullYear(dQ)}return dP}a0(0,["YY",2],0,function(){return this.year()%100});a0(0,["YYYY",4],0,"year");a0(0,["YYYYY",5],0,"year");a0(0,["YYYYYY",6,true],0,"year");dE("year","y");j("Y",dI);j("YY",cp,dx);j("YYYY",ck,du);j("YYYYY",ci,dt);j("YYYYYY",ci,dt);b4(["YYYY","YYYYY","YYYYYY"],cj);b4("YY",function(dP,dQ){dQ[cj]=c4.parseTwoDigitYear(dP)});function dn(dP){return bW(dP)?366:365}function bW(dP){return(dP%4===0&&dP%100!==0)||dP%400===0}c4.parseTwoDigitYear=function(dP){return dH(dP)+(dH(dP)>68?1900:2000)};var T=bY("FullYear",false);function cN(){return bW(this.year())}a0("w",["ww",2],"wo","week");a0("W",["WW",2],"Wo","isoWeek");dE("week","w");dE("isoWeek","W");j("w",cp);j("ww",cp,dx);j("W",cp);j("WW",cp,dx);dN(["w","ww","W","WW"],function(dP,dS,dQ,dR){dS[dR.substr(0,1)]=dH(dP)});function dO(dT,dR,dU){var dQ=dU-dR,dP=dU-dT.day(),dS;if(dP>dQ){dP-=7}if(dP<dQ-7){dP+=7}dS=bQ(dT).add(dP,"d");return{week:Math.ceil(dS.dayOfYear()/7),year:dS.year()}}function cW(dP){return dO(dP,this._week.dow,this._week.doy).week}var bs={dow:0,doy:6};function aJ(){return this._week.dow}function s(){return this._week.doy}function bg(dP){var dQ=this.localeData().week(this);return dP==null?dQ:this.add((dP-dQ)*7,"d")}function ds(dP){var dQ=dO(this,1,4).week;return dP==null?dQ:this.add((dP-dQ)*7,"d")}a0("DDD",["DDDD",3],"DDDo","dayOfYear");dE("dayOfYear","DDD");j("DDD",cm);j("DDDD",dv);b4(["DDD","DDDD"],function(dP,dR,dQ){dQ._dayOfYear=dH(dP)});function aB(dT,dS,dU,dW,dP){var dV=bB(dT,0,1).getUTCDay();var dR;var dQ;dV=dV===0?7:dV;dU=dU!=null?dU:dP;dR=dP-dV+(dV>dW?7:0)-(dV<dP?7:0);dQ=7*(dS-1)+(dU-dP)+dR+1;return{year:dQ>0?dT:dT-1,dayOfYear:dQ>0?dQ:dn(dT-1)+dQ}}function bJ(dP){var dQ=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/86400000)+1;return dP==null?dQ:this.add((dP-dQ),"d")}function a8(dQ,dP,dR){if(dQ!=null){return dQ}if(dP!=null){return dP}return dR}function bh(dQ){var dP=new Date();if(dQ._useUTC){return[dP.getUTCFullYear(),dP.getUTCMonth(),dP.getUTCDate()]}return[dP.getFullYear(),dP.getMonth(),dP.getDate()]}function P(dT){var dU,dS,dR=[],dQ,dP;if(dT._d){return}dQ=bh(dT);if(dT._w&&dT._a[cc]==null&&dT._a[cu]==null){ab(dT)}if(dT._dayOfYear){dP=a8(dT._a[cj],dQ[cj]);if(dT._dayOfYear>dn(dP)){dT._pf._overflowDayOfYear=true}dS=bB(dP,0,dT._dayOfYear);dT._a[cu]=dS.getUTCMonth();dT._a[cc]=dS.getUTCDate()}for(dU=0;dU<3&&dT._a[dU]==null;++dU){dT._a[dU]=dR[dU]=dQ[dU]}for(;dU<7;dU++){dT._a[dU]=dR[dU]=(dT._a[dU]==null)?(dU===2?1:0):dT._a[dU]}if(dT._a[ay]===24&&dT._a[dd]===0&&dT._a[cx]===0&&dT._a[dF]===0){dT._nextDay=true;dT._a[ay]=0}dT._d=(dT._useUTC?bB:au).apply(null,dR);if(dT._tzm!=null){dT._d.setUTCMinutes(dT._d.getUTCMinutes()-dT._tzm)}if(dT._nextDay){dT._a[ay]=24}}function ab(dR){var dP,dT,dS,dU,dW,dV,dQ;dP=dR._w;if(dP.GG!=null||dP.W!=null||dP.E!=null){dW=1;dV=4;dT=a8(dP.GG,dR._a[cj],dO(bQ(),1,4).year);dS=a8(dP.W,1);dU=a8(dP.E,1)}else{dW=dR._locale._week.dow;dV=dR._locale._week.doy;dT=a8(dP.gg,dR._a[cj],dO(bQ(),dW,dV).year);dS=a8(dP.w,1);if(dP.d!=null){dU=dP.d;if(dU<dW){++dS}}else{if(dP.e!=null){dU=dP.e+dW}else{dU=dW}}}dQ=aB(dT,dS,dU,dV,dW);dR._a[cj]=dQ.year;dR._dayOfYear=dQ.dayOfYear}c4.ISO_8601=function(){};function x(dR){if(dR._f===c4.ISO_8601){d(dR);return}dR._a=[];dR._pf.empty=true;var dU=""+dR._i,dT,dQ,dX,dS,dW,dP=dU.length,dV=0;dX=cv(dR._f,dR._locale).match(v)||[];for(dT=0;dT<dX.length;dT++){dS=dX[dT];dQ=(dU.match(ak(dS,dR))||[])[0];if(dQ){dW=dU.substr(0,dU.indexOf(dQ));if(dW.length>0){dR._pf.unusedInput.push(dW)}dU=dU.slice(dU.indexOf(dQ)+dQ.length);dV+=dQ.length}if(dc[dS]){if(dQ){dR._pf.empty=false}else{dR._pf.unusedTokens.push(dS)}aX(dS,dQ,dR)}else{if(dR._strict&&!dQ){dR._pf.unusedTokens.push(dS)}}}dR._pf.charsLeftOver=dP-dV;if(dU.length>0){dR._pf.unusedInput.push(dU)}if(dR._pf.bigHour===true&&dR._a[ay]<=12){dR._pf.bigHour=undefined}dR._a[ay]=bU(dR._locale,dR._a[ay],dR._meridiem);P(dR);co(dR)}function bU(dP,dR,dS){var dQ;if(dS==null){return dR}if(dP.meridiemHour!=null){return dP.meridiemHour(dR,dS)}else{if(dP.isPM!=null){dQ=dP.isPM(dS);if(dQ&&dR<12){dR+=12}if(!dQ&&dR===12){dR=0}return dR}else{return dR}}}function w(dP){var dT,dR,dS,dQ,dU;if(dP._f.length===0){dP._pf.invalidFormat=true;dP._d=new Date(NaN);return}for(dQ=0;dQ<dP._f.length;dQ++){dU=0;dT=q({},dP);if(dP._useUTC!=null){dT._useUTC=dP._useUTC}dT._pf=aE();dT._f=dP._f[dQ];x(dT);if(!b(dT)){continue}dU+=dT._pf.charsLeftOver;dU+=dT._pf.unusedTokens.length*10;dT._pf.score=dU;if(dS==null||dU<dS){dS=dU;dR=dT}}cA(dP,dR||dT)}function cg(dP){if(dP._d){return}var dQ=cC(dP._i);dP._a=[dQ.year,dQ.month,dQ.day||dQ.date,dQ.hour,dQ.minute,dQ.second,dQ.millisecond];P(dP)}function cb(dQ){var dP=dQ._i,dS=dQ._f,dR;dQ._locale=dQ._locale||n(dQ._l);if(dP===null||(dS===undefined&&dP==="")){return bR({nullInput:true})}if(typeof dP==="string"){dQ._i=dP=dQ._locale.preparse(dP)}if(bM(dP)){return new by(co(dP))}else{if(bo(dS)){w(dQ)}else{if(dS){x(dQ)}else{bk(dQ)}}}dR=new by(co(dQ));if(dR._nextDay){dR.add(1,"d");dR._nextDay=undefined}return dR}function bk(dQ){var dP=dQ._i;if(dP===undefined){dQ._d=new Date()}else{if(aI(dP)){dQ._d=new Date(+dP)}else{if(typeof dP==="string"){bn(dQ)}else{if(bo(dP)){dQ._a=aZ(dP.slice(0),function(dR){return parseInt(dR,10)});P(dQ)}else{if(typeof(dP)==="object"){cg(dQ)}else{if(typeof(dP)==="number"){dQ._d=new Date(dP)}else{c4.createFromInputFallback(dQ)}}}}}}}function cX(dS,dT,dP,dR,dQ){var dU={};if(typeof(dP)==="boolean"){dR=dP;dP=undefined}dU._isAMomentObject=true;dU._useUTC=dU._isUTC=dQ;dU._l=dP;dU._i=dS;dU._f=dT;dU._strict=dR;dU._pf=aE();return cb(dU)}function bQ(dR,dS,dP,dQ){return cX(dR,dS,dP,dQ,false)}var aH=cD("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var dP=bQ.apply(null,arguments);return dP<this?this:dP});var dC=cD("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var dP=bQ.apply(null,arguments);return dP>this?this:dP});function bP(dR,dS){var dQ,dP;if(dS.length===1&&bo(dS[0])){dS=dS[0]}if(!dS.length){return bQ()}dQ=dS[0];for(dP=1;dP<dS.length;++dP){if(dS[dP][dR](dQ)){dQ=dS[dP]}}return dQ}function cw(){var dP=[].slice.call(arguments,0);return bP("isBefore",dP)}function aR(){var dP=[].slice.call(arguments,0);return bP("isAfter",dP)}function ad(dU){var dW=cC(dU),dV=dW.year||0,dQ=dW.quarter||0,dR=dW.month||0,dP=dW.week||0,dZ=dW.day||0,dX=dW.hour||0,dT=dW.minute||0,dY=dW.second||0,dS=dW.millisecond||0;this._milliseconds=+dS+dY*1000+dT*60000+dX*3600000;this._days=+dZ+dP*7;this._months=+dR+dQ*3+dV*12;this._data={};this._locale=n();this._bubble()}function J(dP){return dP instanceof ad}function dw(dP,dQ){a0(dP,0,0,function(){var dS=this.utcOffset();var dR="+";if(dS<0){dS=-dS;dR="-"}return dR+R(~~(dS/60),2)+dQ+R(~~(dS)%60,2)})}dw("Z",":");dw("ZZ","");j("Z",dJ);j("ZZ",dJ);b4(["Z","ZZ"],function(dP,dR,dQ){dQ._useUTC=true;dQ._tzm=bu(dP)});var bp=/([\+\-]|\d\d)/gi;function bu(dQ){var dS=((dQ||"").match(dJ)||[]);var dP=dS[dS.length-1]||[];var dT=(dP+"").match(bp)||["-",0,0];var dR=+(dT[1]*60)+dH(dT[2]);return dT[0]==="+"?dR:-dR}function B(dP,dQ){var dR,dS;if(dQ._isUTC){dR=dQ.clone();dS=(bM(dP)||aI(dP)?+dP:+bQ(dP))-(+dR);dR._d.setTime(+dR._d+dS);c4.updateOffset(dR,false);return dR}else{return bQ(dP).local()}return dQ._isUTC?bQ(dP).zone(dQ._offset||0):bQ(dP).local()}function a(dP){return -Math.round(dP._d.getTimezoneOffset()/15)*15}c4.updateOffset=function(){};function ce(dP,dS){var dR=this._offset||0,dQ;if(dP!=null){if(typeof dP==="string"){dP=bu(dP)}if(Math.abs(dP)<16){dP=dP*60}if(!this._isUTC&&dS){dQ=a(this)}this._offset=dP;this._isUTC=true;if(dQ!=null){this.add(dQ,"m")}if(dR!==dP){if(!dS||this._changeInProgress){m(this,cT(dP-dR,"m"),1,false)}else{if(!this._changeInProgress){this._changeInProgress=true;c4.updateOffset(this,true);this._changeInProgress=null}}}return this}else{return this._isUTC?dR:a(this)}}function ax(dP,dQ){if(dP!=null){if(typeof dP!=="string"){dP=-dP}this.utcOffset(dP,dQ);return this}else{return -this.utcOffset()}}function f(dP){return this.utcOffset(0,dP)}function bj(dP){if(this._isUTC){this.utcOffset(0,dP);this._isUTC=false;if(dP){this.subtract(a(this),"m")}}return this}function bx(){if(this._tzm){this.utcOffset(this._tzm)}else{if(typeof this._i==="string"){this.utcOffset(bu(this._i))}}return this}function b9(dP){if(!dP){dP=0}else{dP=bQ(dP).utcOffset()}return(this.utcOffset()-dP)%60===0}function cd(){return(this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset())}function cY(){if(this._a){var dP=this._isUTC?G(this._a):bQ(this._a);return this.isValid()&&K(this._a,dP.toArray())>0}return false}function a4(){return !this._isUTC}function bI(){return this._isUTC}function a3(){return this._isUTC&&this._offset===0}var aL=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/;var aG=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;function cT(dR,dU){var dV=dR,dT=null,dQ,dS,dP;if(J(dR)){dV={ms:dR._milliseconds,d:dR._days,M:dR._months}}else{if(typeof dR==="number"){dV={};if(dU){dV[dU]=dR}else{dV.milliseconds=dR}}else{if(!!(dT=aL.exec(dR))){dQ=(dT[1]==="-")?-1:1;dV={y:0,d:dH(dT[cc])*dQ,h:dH(dT[ay])*dQ,m:dH(dT[dd])*dQ,s:dH(dT[cx])*dQ,ms:dH(dT[dF])*dQ}}else{if(!!(dT=aG.exec(dR))){dQ=(dT[1]==="-")?-1:1;dV={y:bS(dT[2],dQ),M:bS(dT[3],dQ),d:bS(dT[4],dQ),h:bS(dT[5],dQ),m:bS(dT[6],dQ),s:bS(dT[7],dQ),w:bS(dT[8],dQ)}}else{if(dV==null){dV={}}else{if(typeof dV==="object"&&("from" in dV||"to" in dV)){dP=aT(bQ(dV.from),bQ(dV.to));dV={};dV.ms=dP.milliseconds;dV.M=dP.months}}}}}}dS=new ad(dV);if(J(dR)&&a5(dR,"_locale")){dS._locale=dR._locale}return dS}cT.fn=ad.prototype;function bS(dR,dP){var dQ=dR&&parseFloat(dR.replace(",","."));return(isNaN(dQ)?0:dQ)*dP}function df(dR,dP){var dQ={milliseconds:0,months:0};dQ.months=dP.month()-dR.month()+(dP.year()-dR.year())*12;if(dR.clone().add(dQ.months,"M").isAfter(dP)){--dQ.months}dQ.milliseconds=+dP-+(dR.clone().add(dQ.months,"M"));return dQ}function aT(dR,dP){var dQ;dP=B(dP,dR);if(dR.isBefore(dP)){dQ=df(dR,dP)}else{dQ=df(dP,dR);dQ.milliseconds=-dQ.milliseconds;dQ.months=-dQ.months}return dQ}function bi(dQ,dP){return function(dU,dT){var dS,dR;if(dT!==null&&!isNaN(+dT)){cf(dP,"moment()."+dP+"(period, number) is deprecated. Please use moment()."+dP+"(number, period).");dR=dU;dU=dT;dT=dR}dU=typeof dU==="string"?+dU:dU;dS=cT(dU,dT);m(this,dS,dQ);return this}}function m(dR,dU,dT,dS){var dQ=dU._milliseconds,dV=dU._days,dP=dU._months;dS=dS==null?true:dS;if(dQ){dR._d.setTime(+dR._d+dQ*dT)}if(dV){L(dR,"Date",ap(dR,"Date")+dV*dT)}if(dP){dp(dR,ap(dR,"Month")+dP*dT)}if(dS){c4.updateOffset(dR,dV||dP)}}var V=bi(1,"add");var bL=bi(-1,"subtract");function ai(dT){var dQ=dT||bQ(),dP=B(dQ,this).startOf("day"),dS=this.diff(dP,"days",true),dR=dS<-6?"sameElse":dS<-1?"lastWeek":dS<0?"lastDay":dS<1?"sameDay":dS<2?"nextDay":dS<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(dR,this,bQ(dQ)))}function cR(){return new by(this)}function bH(dQ,dP){var dR;dP=Y(typeof dP!=="undefined"?dP:"millisecond");if(dP==="millisecond"){dQ=bM(dQ)?dQ:bQ(dQ);return +this>+dQ}else{dR=bM(dQ)?+dQ:+bQ(dQ);return dR<+this.clone().startOf(dP)}}function b6(dQ,dP){var dR;dP=Y(typeof dP!=="undefined"?dP:"millisecond");if(dP==="millisecond"){dQ=bM(dQ)?dQ:bQ(dQ);return +this<+dQ}else{dR=bM(dQ)?+dQ:+bQ(dQ);return +this.clone().endOf(dP)<dR}}function bG(dR,dQ,dP){return this.isAfter(dR,dP)&&this.isBefore(dQ,dP)}function F(dQ,dP){var dR;dP=Y(dP||"millisecond");if(dP==="millisecond"){dQ=bM(dQ)?dQ:bQ(dQ);return +this===+dQ}else{dR=+bQ(dQ);return +(this.clone().startOf(dP))<=dR&&dR<=+(this.clone().endOf(dP))}}function bw(dP){if(dP<0){return Math.ceil(dP)}else{return Math.floor(dP)}}function cn(dS,dR,dP){var dU=B(dS,this),dT=(dU.utcOffset()-this.utcOffset())*60000,dV,dQ;dR=Y(dR);if(dR==="year"||dR==="month"||dR==="quarter"){dQ=cy(this,dU);if(dR==="quarter"){dQ=dQ/3}else{if(dR==="year"){dQ=dQ/12}}}else{dV=this-dU;dQ=dR==="second"?dV/1000:dR==="minute"?dV/60000:dR==="hour"?dV/3600000:dR==="day"?(dV-dT)/86400000:dR==="week"?(dV-dT)/604800000:dV}return dP?dQ:bw(dQ)}function cy(dQ,dP){var dU=((dP.year()-dQ.year())*12)+(dP.month()-dQ.month()),dR=dQ.clone().add(dU,"months"),dS,dT;if(dP-dR<0){dS=dQ.clone().add(dU-1,"months");dT=(dP-dR)/(dR-dS)}else{dS=dQ.clone().add(dU+1,"months");dT=(dP-dR)/(dS-dR)}return -(dU+dT)}c4.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";function E(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function cq(){var dP=this.clone().utc();if(0<dP.year()&&dP.year()<=9999){if("function"===typeof Date.prototype.toISOString){return this.toDate().toISOString()}else{return g(dP,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}else{return g(dP,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}function i(dQ){var dP=g(this,dQ||c4.defaultFormat);return this.localeData().postformat(dP)}function cM(dQ,dP){return cT({to:this,from:dQ}).locale(this.locale()).humanize(!dP)}function a9(dP){return this.from(bQ(),dP)}function bV(dQ){var dP;if(dQ===undefined){return this._locale._abbr}else{dP=n(dQ);if(dP!=null){this._locale=dP}return this}}var c5=cD("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(dP){if(dP===undefined){return this.localeData()}else{return this.locale(dP)}});function bF(){return this._locale}function dm(dP){dP=Y(dP);switch(dP){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(dP==="week"){this.weekday(0)}if(dP==="isoWeek"){this.isoWeekday(1)}if(dP==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function cI(dP){dP=Y(dP);if(dP===undefined||dP==="millisecond"){return this}return this.startOf(dP).add(1,(dP==="isoWeek"?"week":dP)).subtract(1,"ms")}function bD(){return +this._d-((this._offset||0)*60000)}function bE(){return Math.floor(+this/1000)}function aA(){return this._offset?new Date(+this):this._d}function I(){var dP=this;return[dP.year(),dP.month(),dP.date(),dP.hour(),dP.minute(),dP.second(),dP.millisecond()]}function cs(){return b(this)}function e(){return cA({},this._pf)}function bb(){return this._pf.overflow}a0(0,["gg",2],0,function(){return this.weekYear()%100});a0(0,["GG",2],0,function(){return this.isoWeekYear()%100});function af(dQ,dP){a0(0,[dQ,dQ.length],0,dP)}af("gggg","weekYear");af("ggggg","weekYear");af("GGGG","isoWeekYear");af("GGGGG","isoWeekYear");dE("weekYear","gg");dE("isoWeekYear","GG");j("G",dI);j("g",dI);j("GG",cp,dx);j("gg",cp,dx);j("GGGG",ck,du);j("gggg",ck,du);j("GGGGG",ci,dt);j("ggggg",ci,dt);dN(["gggg","ggggg","GGGG","GGGGG"],function(dP,dS,dQ,dR){dS[dR.substr(0,2)]=dH(dP)});dN(["gg","GG"],function(dP,dS,dQ,dR){dS[dR]=c4.parseTwoDigitYear(dP)});function am(dP,dR,dQ){return dO(bQ([dP,11,31+dR-dQ]),dR,dQ).week}function cF(dP){var dQ=dO(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return dP==null?dQ:this.add((dP-dQ),"y")}function cB(dP){var dQ=dO(this,1,4).year;return dP==null?dQ:this.add((dP-dQ),"y")}function dM(){return am(this.year(),1,4)}function c2(){var dP=this.localeData()._week;return am(this.year(),dP.dow,dP.doy)}a0("Q",0,0,"quarter");dE("quarter","Q");j("Q",dy);b4("Q",function(dP,dQ){dQ[cu]=(dH(dP)-1)*3});function bO(dP){return dP==null?Math.ceil((this.month()+1)/3):this.month((dP-1)*3+this.month()%3)}a0("D",["DD",2],"Do","date");dE("date","D");j("D",cp);j("DD",cp,dx);j("Do",function(dQ,dP){return dQ?dP._ordinalParse:dP._ordinalParseLenient});b4(["D","DD"],cc);b4("Do",function(dP,dQ){dQ[cc]=dH(dP.match(cp)[0],10)});var H=bY("Date",true);a0("d",0,"do","day");a0("dd",0,0,function(dP){return this.localeData().weekdaysMin(this,dP)});a0("ddd",0,0,function(dP){return this.localeData().weekdaysShort(this,dP)});a0("dddd",0,0,function(dP){return this.localeData().weekdays(this,dP)});a0("e",0,0,"weekday");a0("E",0,0,"isoWeekday");dE("day","d");dE("weekday","e");dE("isoWeekday","E");j("d",cp);j("e",cp);j("E",cp);j("dd",A);j("ddd",A);j("dddd",A);dN(["dd","ddd","dddd"],function(dP,dR,dQ){var dS=dQ._locale.weekdaysParse(dP);if(dS!=null){dR.d=dS}else{dQ._pf.invalidWeekday=dP}});dN(["d","e","E"],function(dP,dS,dQ,dR){dS[dR]=dH(dP)});function c1(dQ,dP){if(typeof dQ==="string"){if(!isNaN(dQ)){dQ=parseInt(dQ,10)}else{dQ=dP.weekdaysParse(dQ);if(typeof dQ!=="number"){return null}}}return dQ}var al="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function bK(dP){return this._weekdays[dP.day()]}var u="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function D(dP){return this._weekdaysShort[dP.day()]}var cQ="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function z(dP){return this._weekdaysMin[dP.day()]}function de(dS){var dP,dR,dQ;if(!this._weekdaysParse){this._weekdaysParse=[]}for(dP=0;dP<7;dP++){if(!this._weekdaysParse[dP]){dR=bQ([2000,1]).day(dP);dQ="^"+this.weekdays(dR,"")+"|^"+this.weekdaysShort(dR,"")+"|^"+this.weekdaysMin(dR,"");this._weekdaysParse[dP]=new RegExp(dQ.replace(".",""),"i")}if(this._weekdaysParse[dP].test(dS)){return dP}}}function cS(dQ){var dP=this._isUTC?this._d.getUTCDay():this._d.getDay();if(dQ!=null){dQ=c1(dQ,this.localeData());return this.add(dQ-dP,"d")}else{return dP}}function aK(dP){var dQ=(this.day()+7-this.localeData()._week.dow)%7;return dP==null?dQ:this.add(dP-dQ,"d")}function br(dP){return dP==null?this.day()||7:this.day(this.day()%7?dP:dP-7)}a0("H",["HH",2],0,"hour");a0("h",["hh",2],0,function(){return this.hours()%12||12});function p(dP,dQ){a0(dP,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),dQ)})}p("a",true);p("A",false);dE("hour","h");function ct(dQ,dP){return dP._meridiemParse}j("a",ct);j("A",ct);j("H",cp);j("h",cp);j("HH",cp,dx);j("hh",cp,dx);b4(["H","HH"],ay);b4(["a","A"],function(dP,dR,dQ){dQ._isPm=dQ._locale.isPM(dP);dQ._meridiem=dP});b4(["h","hh"],function(dP,dR,dQ){dR[ay]=dH(dP);dQ._pf.bigHour=true});function bf(dP){return((dP+"").toLowerCase().charAt(0)==="p")}var dl=/[ap]\.?m?\.?/i;function c(dP,dQ,dR){if(dP>11){return dR?"pm":"PM"}else{return dR?"am":"AM"}}var cJ=bY("Hours",true);a0("m",["mm",2],0,"minute");dE("minute","m");j("m",cp);j("mm",cp,dx);b4(["m","mm"],dd);var c8=bY("Minutes",false);a0("s",["ss",2],0,"second");dE("second","s");j("s",cp);j("ss",cp,dx);b4(["s","ss"],cx);var cl=bY("Seconds",false);a0("S",0,0,function(){return ~~(this.millisecond()/100)});a0(0,["SS",2],0,function(){return ~~(this.millisecond()/10)});function b8(dP){a0(0,[dP,3],0,"millisecond")}b8("SSS");b8("SSSS");dE("millisecond","ms");j("S",cm,dy);j("SS",cm,dx);j("SSS",cm,dv);j("SSSS",aD);b4(["S","SS","SSS","SSSS"],function(dP,dQ){dQ[dF]=dH(("0."+dP)*1000)});var aq=bY("Milliseconds",false);a0("z",0,0,"zoneAbbr");a0("zz",0,0,"zoneName");function O(){return this._isUTC?"UTC":""}function b3(){return this._isUTC?"Coordinated Universal Time":""}var dK=by.prototype;dK.add=V;dK.calendar=ai;dK.clone=cR;dK.diff=cn;dK.endOf=cI;dK.format=i;dK.from=cM;dK.fromNow=a9;dK.get=bm;dK.invalidAt=bb;dK.isAfter=bH;dK.isBefore=b6;dK.isBetween=bG;dK.isSame=F;dK.isValid=cs;dK.lang=c5;dK.locale=bV;dK.localeData=bF;dK.max=dC;dK.min=aH;dK.parsingFlags=e;dK.set=bm;dK.startOf=dm;dK.subtract=bL;dK.toArray=I;dK.toDate=aA;dK.toISOString=cq;dK.toJSON=cq;dK.toString=E;dK.unix=bE;dK.valueOf=bD;dK.year=T;dK.isLeapYear=cN;dK.weekYear=cF;dK.isoWeekYear=cB;dK.quarter=dK.quarters=bO;dK.month=o;dK.daysInMonth=aQ;dK.week=dK.weeks=bg;dK.isoWeek=dK.isoWeeks=ds;dK.weeksInYear=c2;dK.isoWeeksInYear=dM;dK.date=H;dK.day=dK.days=cS;dK.weekday=aK;dK.isoWeekday=br;dK.dayOfYear=bJ;dK.hour=dK.hours=cJ;dK.minute=dK.minutes=c8;dK.second=dK.seconds=cl;dK.millisecond=dK.milliseconds=aq;dK.utcOffset=ce;dK.utc=f;dK.local=bj;dK.parseZone=bx;dK.hasAlignedHourOffset=b9;dK.isDST=cd;dK.isDSTShifted=cY;dK.isLocal=a4;dK.isUtcOffset=bI;dK.isUtc=a3;dK.isUTC=a3;dK.zoneAbbr=O;dK.zoneName=b3;dK.dates=cD("dates accessor is deprecated. Use date instead.",H);dK.months=cD("months accessor is deprecated. Use month instead",o);dK.years=cD("years accessor is deprecated. Use year instead",T);dK.zone=cD("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",ax);var aO=dK;function bA(dP){return bQ(dP*1000)}function aW(){return bQ.apply(null,arguments).parseZone()}var aC={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function bq(dR,dS,dQ){var dP=this._calendar[dR];return typeof dP==="function"?dP.call(dS,dQ):dP}var ar={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"};function b7(dQ){var dP=this._longDateFormat[dQ];if(!dP&&this._longDateFormat[dQ.toUpperCase()]){dP=this._longDateFormat[dQ.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(dR){return dR.slice(1)});this._longDateFormat[dQ]=dP}return dP}var ah="Invalid date";function cK(){return this._invalidDate}var bc="%d";var dk=/\d{1,2}/;function aw(dP){return this._ordinal.replace("%d",dP)}function t(dP){return dP}var c0={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function da(dS,dR,dQ,dT){var dP=this._relativeTime[dQ];return(typeof dP==="function")?dP(dS,dR,dQ,dT):dP.replace(/%d/i,dS)}function cZ(dR,dP){var dQ=this._relativeTime[dR>0?"future":"past"];return typeof dQ==="function"?dQ(dP):dQ.replace(/%s/i,dP)}function dG(dP){var dR,dQ;for(dQ in dP){dR=dP[dQ];if(typeof dR==="function"){this[dQ]=dR}else{this["_"+dQ]=dR}}this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}var bl=aF.prototype;bl._calendar=aC;bl.calendar=bq;bl._longDateFormat=ar;bl.longDateFormat=b7;bl._invalidDate=ah;bl.invalidDate=cK;bl._ordinal=bc;bl.ordinal=aw;bl._ordinalParse=dk;bl.preparse=t;bl.postformat=t;bl._relativeTime=c0;bl.relativeTime=da;bl.pastFuture=cZ;bl.set=dG;bl.months=cr;bl._months=dL;bl.monthsShort=cG;bl._monthsShort=bt;bl.monthsParse=bC;bl.week=cW;bl._week=bs;bl.firstDayOfYear=s;bl.firstDayOfWeek=aJ;bl.weekdays=bK;bl._weekdays=al;bl.weekdaysMin=z;bl._weekdaysMin=cQ;bl.weekdaysShort=D;bl._weekdaysShort=u;bl.weekdaysParse=de;bl.isPM=bf;bl._meridiemParse=dl;bl.meridiem=c;function bd(dT,dQ,dS,dU){var dP=n();var dR=G().set(dU,dQ);return dP[dS](dR,dT)}function aM(dU,dQ,dT,dS,dV){if(typeof dU==="number"){dQ=dU;dU=undefined}dU=dU||"";if(dQ!=null){return bd(dU,dQ,dT,dV)}var dR;var dP=[];for(dR=0;dR<dS;dR++){dP[dR]=bd(dU,dR,dT,dV)}return dP}function av(dQ,dP){return aM(dQ,dP,"months",12,"month")}function bv(dQ,dP){return aM(dQ,dP,"monthsShort",12,"month")}function c3(dQ,dP){return aM(dQ,dP,"weekdays",7,"day")}function dg(dQ,dP){return aM(dQ,dP,"weekdaysShort",7,"day")}function cV(dQ,dP){return aM(dQ,dP,"weekdaysMin",7,"day")}dj("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(dR){var dP=dR%10,dQ=(dH(dR%100/10)===1)?"th":(dP===1)?"st":(dP===2)?"nd":(dP===3)?"rd":"th";return dR+dQ}});c4.lang=cD("moment.lang is deprecated. Use moment.locale instead.",dj);c4.langData=cD("moment.langData is deprecated. Use moment.localeData instead.",n);var h=Math.abs;function bz(){var dP=this._data;this._milliseconds=h(this._milliseconds);this._days=h(this._days);this._months=h(this._months);dP.milliseconds=h(dP.milliseconds);dP.seconds=h(dP.seconds);dP.minutes=h(dP.minutes);dP.hours=h(dP.hours);dP.months=h(dP.months);dP.years=h(dP.years);return this}function cL(dT,dQ,dR,dS){var dP=cT(dQ,dR);dT._milliseconds+=dS*dP._milliseconds;dT._days+=dS*dP._days;dT._months+=dS*dP._months;return dT._bubble()}function bN(dP,dQ){return cL(this,dP,dQ,1)}function b0(dP,dQ){return cL(this,dP,dQ,-1)}function bT(){var dR=this._milliseconds;var dW=this._days;var dP=this._months;var dU=this._data;var dV,dT,dQ,dS=0;dU.milliseconds=dR%1000;dV=bw(dR/1000);dU.seconds=dV%60;dT=bw(dV/60);dU.minutes=dT%60;dQ=bw(dT/60);dU.hours=dQ%24;dW+=bw(dQ/24);dS=bw(dz(dW));dW-=bw(ao(dS));dP+=bw(dW/30);dW%=30;dS+=bw(dP/12);dP%=12;dU.days=dW;dU.months=dP;dU.years=dS;return this}function dz(dP){return dP*400/146097}function ao(dP){return dP*146097/400}function c7(dQ){var dS;var dP;var dR=this._milliseconds;dQ=Y(dQ);if(dQ==="month"||dQ==="year"){dS=this._days+dR/86400000;dP=this._months+dz(dS)*12;return dQ==="month"?dP:dP/12}else{dS=this._days+Math.round(ao(this._months/12));switch(dQ){case"week":return dS/7+dR/604800000;case"day":return dS+dR/86400000;case"hour":return dS*24+dR/3600000;case"minute":return dS*24*60+dR/60000;case"second":return dS*24*60*60+dR/1000;case"millisecond":return Math.floor(dS*24*60*60*1000)+dR;default:throw new Error("Unknown unit "+dQ)}}}function aV(){return(this._milliseconds+this._days*86400000+(this._months%12)*2592000000+dH(this._months/12)*31536000000)}function dA(dP){return function(){return this.as(dP)}}var r=dA("ms");var y=dA("s");var aY=dA("m");var C=dA("h");var cU=dA("d");var be=dA("w");var U=dA("M");var aN=dA("y");function ae(dP){dP=Y(dP);return this[dP+"s"]()}function cP(dP){return function(){return this._data[dP]}}var aS=cP("milliseconds");var ac=cP("seconds");var a7=cP("minutes");var b2=cP("hours");var W=cP("days");var c6=cP("months");var c9=cP("years");function dD(){return bw(this.days()/7)}var S=Math.round;var ba={s:45,m:45,h:22,d:26,M:11};function dq(dQ,dS,dR,dT,dP){return dP.relativeTime(dS||1,!!dR,dQ,dT)}function at(dT,dQ,dX){var dR=cT(dT).abs();var dY=S(dR.as("s"));var dS=S(dR.as("m"));var dW=S(dR.as("h"));var dZ=S(dR.as("d"));var dP=S(dR.as("M"));var dU=S(dR.as("y"));var dV=dY<ba.s&&["s",dY]||dS===1&&["m"]||dS<ba.m&&["mm",dS]||dW===1&&["h"]||dW<ba.h&&["hh",dW]||dZ===1&&["d"]||dZ<ba.d&&["dd",dZ]||dP===1&&["M"]||dP<ba.M&&["MM",dP]||dU===1&&["y"]||["yy",dU];dV[2]=dQ;dV[3]=+dT>0;dV[4]=dX;return dq.apply(null,dV)}function aj(dP,dQ){if(ba[dP]===undefined){return false}if(dQ===undefined){return ba[dP]}ba[dP]=dQ;return true}function bX(dR){var dP=this.localeData();var dQ=at(this,!dR,dP);if(dR){dQ=dP.pastFuture(+this,dQ)}return dP.postformat(dQ)}var b5=Math.abs;function N(){var dU=b5(this.years());var dV=b5(this.months());var dT=b5(this.days());var dR=b5(this.hours());var dP=b5(this.minutes());var dQ=b5(this.seconds()+this.milliseconds()/1000);var dS=this.asSeconds();if(!dS){return"P0D"}return(dS<0?"-":"")+"P"+(dU?dU+"Y":"")+(dV?dV+"M":"")+(dT?dT+"D":"")+((dR||dP||dQ)?"T":"")+(dR?dR+"H":"")+(dP?dP+"M":"")+(dQ?dQ+"S":"")}var aa=ad.prototype;aa.abs=bz;aa.add=bN;aa.subtract=b0;aa.as=c7;aa.asMilliseconds=r;aa.asSeconds=y;aa.asMinutes=aY;aa.asHours=C;aa.asDays=cU;aa.asWeeks=be;aa.asMonths=U;aa.asYears=aN;aa.valueOf=aV;aa._bubble=bT;aa.get=ae;aa.milliseconds=aS;aa.seconds=ac;aa.minutes=a7;aa.hours=b2;aa.days=W;aa.weeks=dD;aa.months=c6;aa.years=c9;aa.humanize=bX;aa.toISOString=N;aa.toString=N;aa.toJSON=N;aa.locale=bV;aa.localeData=bF;aa.toIsoString=cD("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",N);aa.lang=c5;a0("X",0,0,"unix");a0("x",0,0,"valueOf");j("x",dI);j("X",Q);b4("X",function(dP,dR,dQ){dQ._d=new Date(parseFloat(dP,10)*1000)});b4("x",function(dP,dR,dQ){dQ._d=new Date(dH(dP))});c4.version="2.10.2";aU(bQ);c4.fn=aO;c4.min=cw;c4.max=aR;c4.utc=G;c4.unix=bA;c4.months=av;c4.isDate=aI;c4.locale=dj;c4.invalid=bR;c4.duration=cT;c4.isMoment=bM;c4.weekdays=c3;c4.parseZone=aW;c4.localeData=n;c4.isDuration=J;c4.monthsShort=bv;c4.weekdaysMin=cV;c4.defineLocale=k;c4.weekdaysShort=dg;c4.normalizeUnits=Y;c4.relativeTimeThreshold=aj;var ca=c4;return ca}));;
;
/* module-key = 'com.xpandit.plugins.xray:raven-field-types', location = 'js/moment-timezone.js' */
(function(a,b){if(typeof define==="function"&&define.amd){define(["moment"],b)}else{if(typeof exports==="object"){module.exports=b(require("moment"))}else{b(a.ravenmoment)}}}(this,function(d){if(d.tz!==undefined){y("Moment Timezone "+d.tz.version+" was already loaded "+(d.tz.dataVersion?"with data from ":"without any data")+d.tz.dataVersion);return d}var w="0.4.0",r={},h={},q={},m=d.version.split("."),s=+m[0],i=+m[1];if(s<2||(s===2&&i<6)){y("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+d.version+". See momentjs.com")}function f(D){if(D>96){return D-87}else{if(D>64){return D-29}}return D-48}function l(J){var H=0,F=J.split("."),K=F[0],E=F[1]||"",L=1,I,G=0,D=1;if(J.charCodeAt(0)===45){H=1;D=-1}for(H;H<K.length;H++){I=f(K.charCodeAt(H));G=60*G+I}for(H=0;H<E.length;H++){L=L/60;I=f(E.charCodeAt(H));G+=I*L}return G*D}function v(E){for(var D=0;D<E.length;D++){E[D]=l(E[D])}}function A(F,E){for(var D=0;D<E;D++){F[D]=Math.round((F[D-1]||0)+(F[D]*60000))}F[E-1]=Infinity}function a(F,G){var D=[],E;for(E=0;E<G.length;E++){D[E]=F[G[E]]}return D}function b(D){var F=D.split("|"),E=F[2].split(" "),H=F[3].split(""),G=F[4].split(" ");v(E);v(H);v(G);A(G,H.length);return{name:F[0],abbrs:a(F[1].split(" "),H),offsets:a(E,H),untils:G}}function g(D){if(D){this._set(b(D))}}g.prototype={_set:function(D){this.name=D.name;this.abbrs=D.abbrs;this.untils=D.untils;this.offsets=D.offsets},_index:function(E){var F=+E,G=this.untils,D;for(D=0;D<G.length;D++){if(F<G[D]){return D}}},parse:function(K){var J=+K,E=this.offsets,D=this.untils,L=D.length-1,G,I,F,H;for(H=0;H<L;H++){G=E[H];I=E[H+1];F=E[H?H-1:H];if(G<I&&z.moveAmbiguousForward){G=I}else{if(G>F&&z.moveInvalidForward){G=F}}if(J<D[H]-(G*60000)){return E[H]}}return E[L]},abbr:function(D){return this.abbrs[this._index(D)]},offset:function(D){return this.offsets[this._index(D)]}};function n(D){return(D||"").toLowerCase().replace(/\//g,"_")}function t(D){var F,E,G;if(typeof D==="string"){D=[D]}for(F=0;F<D.length;F++){E=D[F].split("|")[0];G=n(E);r[G]=D[F];q[G]=E}}function p(F,E){F=n(F);var D=r[F];var G;if(D instanceof g){return D}if(typeof D==="string"){D=new g(D);r[F]=D;return D}if(h[F]&&E!==p&&(G=p(h[F],p))){D=r[F]=new g();D._set(G);D.name=q[F];return D}return null}function C(){var E,D=[];for(E in q){if(q.hasOwnProperty(E)&&(r[E]||r[h[E]])&&q[E]){D.push(q[E])}}return D.sort()}function k(D){var F,E,H,G;if(typeof D==="string"){D=[D]}for(F=0;F<D.length;F++){E=D[F].split("|");H=n(E[0]);G=n(E[1]);h[H]=G;q[H]=E[0];h[G]=H;q[G]=E[1]}}function c(D){t(D.zones);k(D.links);z.dataVersion=D.version}function x(D){if(!x.didShowError){x.didShowError=true;y("moment.tz.zoneExists('"+D+"') has been deprecated in favor of !moment.tz.zone('"+D+"')")}return !!p(D)}function j(D){return !!(D._a&&(D._tzm===undefined))}function y(D){if(typeof console!=="undefined"&&typeof console.error==="function"){console.error(D)}}function z(E){var H=Array.prototype.slice.call(arguments,0,-1),G=arguments[arguments.length-1],D=p(G),F=d.utc.apply(null,H);if(D&&!d.isMoment(E)&&j(F)){F.add(D.parse(F),"minutes")}F.tz(G);return F}z.version=w;z.dataVersion="";z._zones=r;z._links=h;z._names=q;z.add=t;z.link=k;z.load=c;z.zone=p;z.zoneExists=x;z.names=C;z.Zone=g;z.unpack=b;z.unpackBase60=l;z.needsOffset=j;z.moveInvalidForward=true;z.moveAmbiguousForward=false;var o=d.fn;d.tz=z;d.defaultZone=null;d.updateOffset=function(E,F){var D=d.defaultZone,G;if(E._z===undefined){if(D&&j(E)&&!E._isUTC){E._d=d.utc(E._a)._d;E.utc().add(D.parse(E),"minutes")}E._z=D}if(E._z){G=E._z.offset(E);if(Math.abs(G)<16){G=G/60}if(E.utcOffset!==undefined){E.utcOffset(-G,F)}else{E.zone(G,F)}}};o.tz=function(D){if(D){this._z=p(D);if(this._z){d.updateOffset(this)}else{y("Moment Timezone has no data for "+D+". See http://momentjs.com/timezone/docs/#/data-loading/.")}return this}if(this._z){return this._z.name}};function e(D){return function(){if(this._z){return this._z.abbr(this)}return D.call(this)}}function B(D){return function(){this._z=null;return D.apply(this,arguments)}}o.zoneName=e(o.zoneName);o.zoneAbbr=e(o.zoneAbbr);o.utc=B(o.utc);d.tz.setDefault=function(D){if(s<2||(s===2&&i<9)){y("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+d.version+".")}d.defaultZone=D?p(D):null;return d};var u=d.momentProperties;if(Object.prototype.toString.call(u)==="[object Array]"){u.push("_z");u.push("_a")}else{if(u){u._z=null}}c({version:"2015d",zones:["Africa/Abidjan|LMT GMT|g.8 0|01|-2ldXH.Q","Africa/Accra|LMT GMT GHST|.Q 0 -k|012121212121212121212121212121212121212121212121|-26BbX.8 6tzX.8 MnE 1BAk MnE 1BAk MnE 1BAk MnE 1C0k MnE 1BAk MnE 1BAk MnE 1BAk MnE 1C0k MnE 1BAk MnE 1BAk MnE 1BAk MnE 1C0k MnE 1BAk MnE 1BAk MnE 1BAk MnE 1C0k MnE 1BAk MnE 1BAk MnE 1BAk MnE 1C0k MnE 1BAk MnE 1BAk MnE","Africa/Addis_Ababa|LMT EAT BEAT BEAUT|-2r.g -30 -2u -2J|01231|-1F3Cr.g 3Dzr.g okMu MFXJ","Africa/Algiers|PMT WET WEST CET CEST|-9.l 0 -10 -10 -20|0121212121212121343431312123431213|-2nco9.l cNb9.l HA0 19A0 1iM0 11c0 1oo0 Wo0 1rc0 QM0 1EM0 UM0 DA0 Imo0 rd0 De0 9Xz0 1fb0 1ap0 16K0 2yo0 mEp0 hwL0 jxA0 11A0 dDd0 17b0 11B0 1cN0 2Dy0 1cN0 1fB0 1cL0","Africa/Bangui|LMT WAT|-d.A -10|01|-22y0d.A","Africa/Bissau|LMT WAT GMT|12.k 10 0|012|-2ldWV.E 2xonV.E","Africa/Blantyre|LMT CAT|-2a.k -20|01|-2GJea.k","Africa/Cairo|EET EEST|-20 -30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-1bIO0 vb0 1ip0 11z0 1iN0 1nz0 12p0 1pz0 10N0 1pz0 16p0 1jz0 s3d0 Vz0 1oN0 11b0 1oO0 10N0 1pz0 10N0 1pb0 10N0 1pb0 10N0 1pb0 10N0 1pz0 10N0 1pb0 10N0 1pb0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1WL0 rd0 1Rz0 wp0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1qL0 Xd0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1ny0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 WL0 1qN0 Rb0 1wp0 On0 1zd0 Lz0 1EN0 Fb0 c10 8n0 8Nd0 gL0 e10 mn0","Africa/Casablanca|LMT WET WEST CET|u.k 0 -10 -10|012121212121212121312121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2gMnt.E 130Lt.E rb0 Dd0 dVb0 b6p0 TX0 EoB0 LL0 gnd0 rz0 43d0 AL0 1Nd0 XX0 1Cp0 pz0 dEp0 4mn0 SyN0 AL0 1Nd0 wn0 1FB0 Db0 1zd0 Lz0 1Nf0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uo0 e00 DA0 11A0 rA0 e00 Jc0 WM0 m00 gM0 M00 WM0 jc0 e00 RA0 11A0 dA0 e00 Uo0 11A0 800 gM0 Xc0 11A0 5c0 e00 17A0 WM0 2o0 e00 1ao0 19A0 1g00 16M0 1iM0 1400 1lA0 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qo0 1200 1kM0 14M0 1i00","Africa/Ceuta|WET WEST CET CEST|0 -10 -10 -20|010101010101010101010232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-25KN0 11z0 drd0 18o0 3I00 17c0 1fA0 1a00 1io0 1a00 1y7p0 LL0 gnd0 rz0 43d0 AL0 1Nd0 XX0 1Cp0 pz0 dEp0 4VB0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Africa/El_Aaiun|LMT WAT WET WEST|Q.M 10 0 -10|0123232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-1rDz7.c 1GVA7.c 6L0 AL0 1Nd0 XX0 1Cp0 pz0 1cBB0 AL0 1Nd0 wn0 1FB0 Db0 1zd0 Lz0 1Nf0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uo0 e00 DA0 11A0 rA0 e00 Jc0 WM0 m00 gM0 M00 WM0 jc0 e00 RA0 11A0 dA0 e00 Uo0 11A0 800 gM0 Xc0 11A0 5c0 e00 17A0 WM0 2o0 e00 1ao0 19A0 1g00 16M0 1iM0 1400 1lA0 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qo0 1200 1kM0 14M0 1i00","Africa/Johannesburg|SAST SAST SAST|-1u -20 -30|012121|-2GJdu 1Ajdu 1cL0 1cN0 1cL0","Africa/Juba|LMT CAT CAST EAT|-2a.8 -20 -30 -30|01212121212121212121212121212121213|-1yW2a.8 1zK0a.8 16L0 1iN0 17b0 1jd0 17b0 1ip0 17z0 1i10 17X0 1hB0 18n0 1hd0 19b0 1gp0 19z0 1iN0 17b0 1ip0 17z0 1i10 18n0 1hd0 18L0 1gN0 19b0 1gp0 19z0 1iN0 17z0 1i10 17X0 yGd0","Africa/Monrovia|MMT LRT GMT|H.8 I.u 0|012|-23Lzg.Q 29s01.m","Africa/Ndjamena|LMT WAT WAST|-10.c -10 -20|0121|-2le10.c 2J3c0.c Wn0","Africa/Tripoli|LMT CET CEST EET|-Q.I -10 -20 -20|012121213121212121212121213123123|-21JcQ.I 1hnBQ.I vx0 4iP0 xx0 4eN0 Bb0 7ip0 U0n0 A10 1db0 1cN0 1db0 1dd0 1db0 1eN0 1bb0 1e10 1cL0 1c10 1db0 1dd0 1db0 1cN0 1db0 1q10 fAn0 1ep0 1db0 AKq0 TA0 1o00","Africa/Tunis|PMT CET CEST|-9.l -10 -20|0121212121212121212121212121212121|-2nco9.l 18pa9.l 1qM0 DA0 3Tc0 11B0 1ze0 WM0 7z0 3d0 14L0 1cN0 1f90 1ar0 16J0 1gXB0 WM0 1rA0 11c0 nwo0 Ko0 1cM0 1cM0 1rA0 10M0 zuM0 10N0 1aN0 1qM0 WM0 1qM0 11A0 1o00","Africa/Windhoek|SWAT SAST SAST CAT WAT WAST|-1u -20 -30 -20 -10 -20|012134545454545454545454545454545454545454545454545454545454545454545454545454545454545454545|-2GJdu 1Ajdu 1cL0 1SqL0 9NA0 11D0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 11B0 1nX0 11B0","America/Adak|NST NWT NPT BST BDT AHST HST HDT|b0 a0 a0 b0 a0 a0 a0 90|012034343434343434343434343434343456767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676|-17SX0 8wW0 iB0 Qlb0 52O0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cm0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Anchorage|CAT CAWT CAPT AHST AHDT YST AKST AKDT|a0 90 90 a0 90 90 90 80|012034343434343434343434343434343456767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676|-17T00 8wX0 iA0 Qlb0 52O0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cm0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Anguilla|LMT AST|46.4 40|01|-2kNvR.U","America/Araguaina|LMT BRT BRST|3c.M 30 20|0121212121212121212121212121212121212121212121212121|-2glwL.c HdKL.c 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 dMN0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 ny10 Lz0","America/Argentina/Buenos_Aires|CMT ART ARST ART ARST|4g.M 40 30 30 20|0121212121212121212121212121212121212121213434343434343234343|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wp0 Rb0 1wp0 TX0 g0p0 10M0 j3c0 uL0 1qN0 WL0","America/Argentina/Catamarca|CMT ART ARST ART ARST WART|4g.M 40 30 30 20 40|0121212121212121212121212121212121212121213434343454343235343|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 g0p0 10M0 ako0 7B0 8zb0 uL0","America/Argentina/Cordoba|CMT ART ARST ART ARST WART|4g.M 40 30 30 20 40|0121212121212121212121212121212121212121213434343454343234343|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 g0p0 10M0 j3c0 uL0 1qN0 WL0","America/Argentina/Jujuy|CMT ART ARST ART ARST WART WARST|4g.M 40 30 30 20 40 30|01212121212121212121212121212121212121212134343456543432343|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1ze0 TX0 1ld0 WK0 1wp0 TX0 g0p0 10M0 j3c0 uL0","America/Argentina/La_Rioja|CMT ART ARST ART ARST WART|4g.M 40 30 30 20 40|01212121212121212121212121212121212121212134343434534343235343|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Qn0 qO0 16n0 Rb0 1wp0 TX0 g0p0 10M0 ako0 7B0 8zb0 uL0","America/Argentina/Mendoza|CMT ART ARST ART ARST WART WARST|4g.M 40 30 30 20 40 30|0121212121212121212121212121212121212121213434345656543235343|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1u20 SL0 1vd0 Tb0 1wp0 TW0 g0p0 10M0 agM0 Op0 7TX0 uL0","America/Argentina/Rio_Gallegos|CMT ART ARST ART ARST WART|4g.M 40 30 30 20 40|0121212121212121212121212121212121212121213434343434343235343|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wp0 Rb0 1wp0 TX0 g0p0 10M0 ako0 7B0 8zb0 uL0","America/Argentina/Salta|CMT ART ARST ART ARST WART|4g.M 40 30 30 20 40|01212121212121212121212121212121212121212134343434543432343|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 g0p0 10M0 j3c0 uL0","America/Argentina/San_Juan|CMT ART ARST ART ARST WART|4g.M 40 30 30 20 40|01212121212121212121212121212121212121212134343434534343235343|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Qn0 qO0 16n0 Rb0 1wp0 TX0 g0p0 10M0 ak00 m10 8lb0 uL0","America/Argentina/San_Luis|CMT ART ARST ART ARST WART WARST|4g.M 40 30 30 20 40 30|01212121212121212121212121212121212121212134343456536353465653|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 XX0 1q20 SL0 AN0 kin0 10M0 ak00 m10 8lb0 8L0 jd0 1qN0 WL0 1qN0","America/Argentina/Tucuman|CMT ART ARST ART ARST WART|4g.M 40 30 30 20 40|012121212121212121212121212121212121212121343434345434323534343|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 g0p0 10M0 ako0 4N0 8BX0 uL0 1qN0 WL0","America/Argentina/Ushuaia|CMT ART ARST ART ARST WART|4g.M 40 30 30 20 40|0121212121212121212121212121212121212121213434343434343235343|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wp0 Rb0 1wp0 TX0 g0p0 10M0 ajA0 8p0 8zb0 uL0","America/Aruba|LMT ANT AST|4z.L 4u 40|012|-2kV7o.d 28KLS.d","America/Asuncion|AMT PYT PYT PYST|3O.E 40 30 30|012131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313|-1x589.k 1DKM9.k 3CL0 3Dd0 10L0 1pB0 10n0 1pB0 10n0 1pB0 1cL0 1dd0 1db0 1dd0 1cL0 1dd0 1cL0 1dd0 1cL0 1dd0 1db0 1dd0 1cL0 1dd0 1cL0 1dd0 1cL0 1dd0 1db0 1dd0 1cL0 1lB0 14n0 1dd0 1cL0 1fd0 WL0 1rd0 1aL0 1dB0 Xz0 1qp0 Xb0 1qN0 10L0 1rB0 TX0 1tB0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 1cL0 WN0 1qL0 11B0 1nX0 1ip0 WL0 1qN0 WL0 1qN0 WL0 1tB0 TX0 1tB0 TX0 1tB0 19X0 1a10 1fz0 1a10 1fz0 1cN0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0","America/Atikokan|CST CDT CWT CPT EST|60 50 50 50 50|0101234|-25TQ0 1in0 Rnb0 3je0 8x30 iw0","America/Bahia|LMT BRT BRST|2y.4 30 20|01212121212121212121212121212121212121212121212121212121212121|-2glxp.U HdLp.U 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 l5B0 Rb0","America/Bahia_Banderas|LMT MST CST PST MDT CDT|71 70 60 80 60 50|0121212131414141414141414141414141414152525252525252525252525252525252525252525252525252525252|-1UQF0 deL0 8lc0 17c0 10M0 1dd0 otX0 gmN0 P2N0 13Vd0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nW0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Barbados|LMT BMT AST ADT|3W.t 3W.t 40 30|01232323232|-1Q0I1.v jsM0 1ODC1.v IL0 1ip0 17b0 1ip0 17b0 1ld0 13b0","America/Belem|LMT BRT BRST|3d.U 30 20|012121212121212121212121212121|-2glwK.4 HdKK.4 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0","America/Belize|LMT CST CHDT CDT|5Q.M 60 5u 50|01212121212121212121212121212121212121212121212121213131|-2kBu7.c fPA7.c Onu 1zcu Rbu 1wou Rbu 1wou Rbu 1zcu Onu 1zcu Onu 1zcu Rbu 1wou Rbu 1wou Rbu 1wou Rbu 1zcu Onu 1zcu Onu 1zcu Rbu 1wou Rbu 1wou Rbu 1zcu Onu 1zcu Onu 1zcu Onu 1zcu Rbu 1wou Rbu 1wou Rbu 1zcu Onu 1zcu Onu 1zcu Rbu 1wou Rbu 1f0Mu qn0 lxB0 mn0","America/Blanc-Sablon|AST ADT AWT APT|40 30 30 30|010230|-25TS0 1in0 UGp0 8x50 iu0","America/Boa_Vista|LMT AMT AMST|42.E 40 30|0121212121212121212121212121212121|-2glvV.k HdKV.k 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 smp0 WL0 1tB0 2L0","America/Bogota|BMT COT COST|4U.g 50 40|0121|-2eb73.I 38yo3.I 2en0","America/Boise|PST PDT MST MWT MPT MDT|80 70 70 60 60 60|0101023425252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252|-261q0 1nX0 11B0 1nX0 8C10 JCL0 8x20 ix0 QwN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 Dd0 1Kn0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Cambridge_Bay|zzz MST MWT MPT MDDT MDT CST CDT EST|0 70 60 60 50 60 60 50 50|0123141515151515151515151515151515151515151515678651515151515151515151515151515151515151515151515151515151515151515151515151|-21Jc0 RO90 8x20 ix0 LCL0 1fA0 zgO0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11A0 1nX0 2K0 WQ0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Campo_Grande|LMT AMT AMST|3C.s 40 30|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212|-2glwl.w HdLl.w 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 1C10 Lz0 1Ip0 HX0 1zd0 On0 1HB0 IL0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10 Lz0 1C10 On0 1zd0 Rb0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0","America/Cancun|LMT CST EST EDT CDT|5L.4 60 50 40 50|0123232341414141414141414141414141414141412|-1UQG0 2q2o0 yLB0 1lb0 14p0 1lb0 14p0 Lz0 xB0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 Dd0","America/Caracas|CMT VET VET|4r.E 4u 40|0121|-2kV7w.k 28KM2.k 1IwOu","America/Cayenne|LMT GFT GFT|3t.k 40 30|012|-2mrwu.E 2gWou.E","America/Cayman|CMT EST|5j.A 50|01|-2uduE.o","America/Chicago|CST CDT EST CWT CPT|60 50 50 50 50|01010101010101010101010101010101010102010101010103401010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261s0 1nX0 11B0 1nX0 1wp0 TX0 WN0 1qL0 1cN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 11B0 1Hz0 14p0 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 RB0 8x30 iw0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Chihuahua|LMT MST CST CDT MDT|74.k 70 60 50 60|0121212323241414141414141414141414141414141414141414141414141414141414141414141414141414141|-1UQF0 deL0 8lc0 17c0 10M0 1dd0 2zQN0 1lb0 14p0 1lb0 14q0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Costa_Rica|SJMT CST CDT|5A.d 60 50|0121212121|-1Xd6n.L 2lu0n.L Db0 1Kp0 Db0 pRB0 15b0 1kp0 mL0","America/Creston|MST PST|70 80|010|-29DR0 43B0","America/Cuiaba|LMT AMT AMST|3I.k 40 30|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212|-2glwf.E HdLf.E 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 4a10 HX0 1zd0 On0 1HB0 IL0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10 Lz0 1C10 On0 1zd0 Rb0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0","America/Danmarkshavn|LMT WGT WGST GMT|1e.E 30 20 0|01212121212121212121212121212121213|-2a5WJ.k 2z5fJ.k 19U0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 DC0","America/Dawson|YST YDT YWT YPT YDDT PST PDT|90 80 80 80 70 80 70|0101023040565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565|-25TN0 1in0 1o10 13V0 Ser0 8x00 iz0 LCL0 1fA0 jrA0 fNd0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Dawson_Creek|PST PDT PWT PPT MST|80 70 70 70 70|0102301010101010101010101010101010101010101010101010101014|-25TO0 1in0 UGp0 8x10 iy0 3NB0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 ML0","America/Denver|MST MDT MWT MPT|70 60 60 60|01010101023010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261r0 1nX0 11B0 1nX0 11B0 1qL0 WN0 mn0 Ord0 8x20 ix0 LCN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Detroit|LMT CST EST EWT EPT EDT|5w.b 60 50 40 40 40|01234252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252|-2Cgir.N peqr.N 156L0 8x40 iv0 6fd0 11z0 Jy10 SL0 dnB0 1cL0 s10 1Vz0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Edmonton|LMT MST MDT MWT MPT|7x.Q 70 60 60 60|01212121212121341212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2yd4q.8 shdq.8 1in0 17d0 hz0 2dB0 1fz0 1a10 11z0 1qN0 WL0 1qN0 11z0 IGN0 8x20 ix0 3NB0 11z0 LFB0 1cL0 3Cp0 1cL0 66N0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Eirunepe|LMT ACT ACST AMT|4D.s 50 40 40|0121212121212121212121212121212131|-2glvk.w HdLk.w 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 dPB0 On0 yTd0 d5X0","America/El_Salvador|LMT CST CDT|5U.M 60 50|012121|-1XiG3.c 2Fvc3.c WL0 1qN0 WL0","America/Ensenada|LMT MST PST PDT PWT PPT|7M.4 70 80 70 70 70|012123245232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-1UQE0 4PX0 8mM0 8lc0 SN0 1cL0 pHB0 83r0 zI0 5O10 1Rz0 cOP0 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 BUp0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 U10 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Fort_Wayne|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|010101023010101010101010101040454545454545454545454545454545454545454545454545454545454545454545454|-261s0 1nX0 11B0 1nX0 QI10 Db0 RB0 8x30 iw0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 5Tz0 1o10 qLb0 1cL0 1cN0 1cL0 1qhd0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Fortaleza|LMT BRT BRST|2y 30 20|0121212121212121212121212121212121212121|-2glxq HdLq 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 nsp0 WL0 1tB0 5z0 2mN0 On0","America/Glace_Bay|LMT AST ADT AWT APT|3X.M 40 30 30 30|012134121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2IsI0.c CwO0.c 1in0 UGp0 8x50 iu0 iq10 11z0 Jg10 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Godthab|LMT WGT WGST|3q.U 30 20|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2a5Ux.4 2z5dx.4 19U0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","America/Goose_Bay|NST NDT NST NDT NWT NPT AST ADT ADDT|3u.Q 2u.Q 3u 2u 2u 2u 40 30 20|010232323232323245232323232323232323232323232323232323232326767676767676767676767676767676767676767676768676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676|-25TSt.8 1in0 DXb0 2HbX.8 WL0 1qN0 WL0 1qN0 WL0 1tB0 TX0 1tB0 WL0 1qN0 WL0 1qN0 7UHu itu 1tB0 WL0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1tB0 WL0 1ld0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 S10 g0u 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14n1 1lb0 14p0 1nW0 11C0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Grand_Turk|KMT EST EDT AST|57.b 50 40 40|0121212121212121212121212121212121212121212121212121212121212121212121212123|-2l1uQ.N 2HHBQ.N 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Guatemala|LMT CST CDT|62.4 60 50|0121212121|-24KhV.U 2efXV.U An0 mtd0 Nz0 ifB0 17b0 zDB0 11z0","America/Guayaquil|QMT ECT|5e 50|01|-1yVSK","America/Guyana|LMT GBGT GYT GYT GYT|3Q.E 3J 3J 30 40|01234|-2dvU7.k 24JzQ.k mlc0 Bxbf","America/Halifax|LMT AST ADT AWT APT|4e.o 40 30 30 30|0121212121212121212121212121212121212121212121212134121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2IsHJ.A xzzJ.A 1db0 3I30 1in0 3HX0 IL0 1E10 ML0 1yN0 Pb0 1Bd0 Mn0 1Bd0 Rz0 1w10 Xb0 1w10 LX0 1w10 Xb0 1w10 Lz0 1C10 Jz0 1E10 OL0 1yN0 Un0 1qp0 Xb0 1qp0 11X0 1w10 Lz0 1HB0 LX0 1C10 FX0 1w10 Xb0 1qp0 Xb0 1BB0 LX0 1td0 Xb0 1qp0 Xb0 Rf0 8x50 iu0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 3Qp0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 3Qp0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 6i10 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Havana|HMT CST CDT|5t.A 50 40|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1Meuu.o 72zu.o ML0 sld0 An0 1Nd0 Db0 1Nd0 An0 6Ep0 An0 1Nd0 An0 JDd0 Mn0 1Ap0 On0 1fd0 11X0 1qN0 WL0 1wp0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 14n0 1ld0 14L0 1kN0 15b0 1kp0 1cL0 1cN0 1fz0 1a10 1fz0 1fB0 11z0 14p0 1nX0 11B0 1nX0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 1a10 1in0 1a10 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 17c0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 11A0 6i00 Rc0 1wo0 U00 1tA0 Rc0 1wo0 U00 1wo0 U00 1zc0 U00 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0","America/Hermosillo|LMT MST CST PST MDT|7n.Q 70 60 80 60|0121212131414141|-1UQF0 deL0 8lc0 17c0 10M0 1dd0 otX0 gmN0 P2N0 13Vd0 1lb0 14p0 1lb0 14p0 1lb0","America/Indiana/Knox|CST CDT CWT CPT EST|60 50 50 50 50|0101023010101010101010101010101010101040101010101010101010101010101010101010101010101010141010101010101010101010101010101010101010101010101010101010101010|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 3NB0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 11z0 1o10 11z0 1o10 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 3Cn0 8wp0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 z8o0 1o00 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Indiana/Marengo|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|0101023010101010101010104545454545414545454545454545454545454545454545454545454545454545454545454545454|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 dyN0 11z0 6fd0 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 jrz0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1VA0 LA0 1BX0 1e6p0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Indiana/Petersburg|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|01010230101010101010101010104010101010101010101010141014545454545454545454545454545454545454545454545454545454545454|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 njX0 WN0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 3Fb0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 19co0 1o00 Rd0 1zb0 Oo0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Indiana/Tell_City|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|01010230101010101010101010101010454541010101010101010101010101010101010101010101010101010101010101010|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 1o10 11z0 g0p0 11z0 1o10 11z0 1qL0 WN0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 WL0 1qN0 1cL0 1cN0 1cL0 1cN0 caL0 1cL0 1cN0 1cL0 1qhd0 1o00 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Indiana/Vevay|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|010102304545454545454545454545454545454545454545454545454545454545454545454545454|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 kPB0 Awn0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1lnd0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Indiana/Vincennes|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|01010230101010101010101010101010454541014545454545454545454545454545454545454545454545454545454545454|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 1o10 11z0 g0p0 11z0 1o10 11z0 1qL0 WN0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 WL0 1qN0 1cL0 1cN0 1cL0 1cN0 caL0 1cL0 1cN0 1cL0 1qhd0 1o00 Rd0 1zb0 Oo0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Indiana/Winamac|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|01010230101010101010101010101010101010454541054545454545454545454545454545454545454545454545454545454545454|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 jrz0 1cL0 1cN0 1cL0 1qhd0 1o00 Rd0 1za0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Inuvik|zzz PST PDDT MST MDT|0 80 60 70 60|0121343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|-FnA0 tWU0 1fA0 wPe0 2pz0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Iqaluit|zzz EWT EPT EST EDDT EDT CST CDT|0 40 40 50 30 40 60 50|01234353535353535353535353535353535353535353567353535353535353535353535353535353535353535353535353535353535353535353535353|-16K00 7nX0 iv0 LCL0 1fA0 zgO0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11C0 1nX0 11A0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Jamaica|KMT EST EDT|57.b 50 40|0121212121212121212121|-2l1uQ.N 2uM1Q.N 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0","America/Juneau|PST PWT PPT PDT YDT YST AKST AKDT|80 70 70 70 80 90 90 80|01203030303030303030303030403030356767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676|-17T20 8x10 iy0 Vo10 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cM0 1cM0 1cL0 1cN0 1fz0 1a10 1fz0 co0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Kentucky/Louisville|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|0101010102301010101010101010101010101454545454545414545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454|-261s0 1nX0 11B0 1nX0 3Fd0 Nb0 LPd0 11z0 RB0 8x30 iw0 Bb0 10N0 2bB0 8in0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 xz0 gso0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1VA0 LA0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Kentucky/Monticello|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|0101023010101010101010101010101010101010101010101010101010101010101010101454545454545454545454545454545454545454545454545454545454545454545454545454|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 SWp0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11A0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/La_Paz|CMT BOST BOT|4w.A 3w.A 40|012|-1x37r.o 13b0","America/Lima|LMT PET PEST|58.A 50 40|0121212121212121|-2tyGP.o 1bDzP.o zX0 1aN0 1cL0 1cN0 1cL0 1PrB0 zX0 1O10 zX0 6Gp0 zX0 98p0 zX0","America/Los_Angeles|PST PDT PWT PPT|80 70 70 70|010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261q0 1nX0 11B0 1nX0 SgN0 8x10 iy0 5Wp0 1Vb0 3dB0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Maceio|LMT BRT BRST|2m.Q 30 20|012121212121212121212121212121212121212121|-2glxB.8 HdLB.8 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 dMN0 Lz0 8Q10 WL0 1tB0 5z0 2mN0 On0","America/Managua|MMT CST EST CDT|5J.c 60 50 50|0121313121213131|-1quie.M 1yAMe.M 4mn0 9Up0 Dz0 1K10 Dz0 s3F0 1KH0 DB0 9In0 k8p0 19X0 1o30 11y0","America/Manaus|LMT AMT AMST|40.4 40 30|01212121212121212121212121212121|-2glvX.U HdKX.U 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 dPB0 On0","America/Martinique|FFMT AST ADT|44.k 40 30|0121|-2mPTT.E 2LPbT.E 19X0","America/Matamoros|LMT CST CDT|6E 60 50|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1UQG0 2FjC0 1nX0 i6p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 U10 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Mazatlan|LMT MST CST PST MDT|75.E 70 60 80 60|0121212131414141414141414141414141414141414141414141414141414141414141414141414141414141414141|-1UQF0 deL0 8lc0 17c0 10M0 1dd0 otX0 gmN0 P2N0 13Vd0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Menominee|CST CDT CWT CPT EST|60 50 50 50 50|01010230101041010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 1o10 11z0 LCN0 1fz0 6410 9Jb0 1cM0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Merida|LMT CST EST CDT|5W.s 60 50 50|0121313131313131313131313131313131313131313131313131313131313131313131313131313131313131|-1UQG0 2q2o0 2hz0 wu30 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Metlakatla|PST PWT PPT PDT|80 70 70 70|0120303030303030303030303030303030|-17T20 8x10 iy0 Vo10 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0","America/Mexico_City|LMT MST CST CDT CWT|6A.A 70 60 50 50|012121232324232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-1UQF0 deL0 8lc0 17c0 10M0 1dd0 gEn0 TX0 3xd0 Jb0 6zB0 SL0 e5d0 17b0 1Pff0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Miquelon|LMT AST PMST PMDT|3I.E 40 30 20|012323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-2mKkf.k 2LTAf.k gQ10 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Moncton|EST AST ADT AWT APT|50 40 30 30 30|012121212121212121212134121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2IsH0 CwN0 1in0 zAo0 An0 1Nd0 An0 1Nd0 An0 1Nd0 An0 1Nd0 An0 1Nd0 An0 1K10 Lz0 1zB0 NX0 1u10 Wn0 S20 8x50 iu0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 3Cp0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14n1 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 ReX 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Monterrey|LMT CST CDT|6F.g 60 50|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1UQG0 2FjC0 1nX0 i6p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Montevideo|MMT UYT UYHST UYST UYT UYHST|3I.I 3u 30 20 30 2u|012121212121212121212121213434343434345454543453434343434343434343434343434343434343434343434343434343434343434343434343434343434343|-20UIf.g 8jzJ.g 1cLu 1dcu 1cLu 1dcu 1cLu ircu 11zu 1o0u 11zu 1o0u 11zu 1qMu WLu 1qMu WLu 1qMu WLu 1qMu 11zu 1o0u 11zu NAu 11bu 2iMu zWu Dq10 19X0 pd0 jz0 cm10 19X0 1fB0 1on0 11d0 1oL0 1nB0 1fzu 1aou 1fzu 1aou 1fzu 3nAu Jb0 3MN0 1SLu 4jzu 2PB0 Lb0 3Dd0 1pb0 ixd0 An0 1MN0 An0 1wp0 On0 1wp0 Rb0 1zd0 On0 1wp0 Rb0 s8p0 1fB0 1ip0 11z0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10","America/Montreal|EST EDT EWT EPT|50 40 40 40|01010101010101010101010101010101010101010101012301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-25TR0 1in0 11Wu 1nzu 1fD0 WJ0 1wr0 Nb0 1Ap0 On0 1zd0 On0 1wp0 TX0 1tB0 TX0 1tB0 TX0 1tB0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 4kM0 8x40 iv0 1o10 11z0 1nX0 11z0 1o10 11z0 1o10 1qL0 11D0 1nX0 11B0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Nassau|LMT EST EDT|59.u 50 40|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2kNuO.u 26XdO.u 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/New_York|EST EDT EWT EPT|50 40 40 40|01010101010101010101010101010101010101010101010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261t0 1nX0 11B0 1nX0 11B0 1qL0 1a10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 RB0 8x40 iv0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Nipigon|EST EDT EWT EPT|50 40 40 40|010123010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-25TR0 1in0 Rnb0 3je0 8x40 iv0 19yN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Nome|NST NWT NPT BST BDT YST AKST AKDT|b0 a0 a0 b0 a0 90 90 80|012034343434343434343434343434343456767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676|-17SX0 8wW0 iB0 Qlb0 52O0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cl0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Noronha|LMT FNT FNST|29.E 20 10|0121212121212121212121212121212121212121|-2glxO.k HdKO.k 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 nsp0 WL0 1tB0 2L0 2pB0 On0","America/North_Dakota/Beulah|MST MDT MWT MPT CST CDT|70 60 60 60 60 50|010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101014545454545454545454545454545454545454545454545454545454|-261r0 1nX0 11B0 1nX0 SgN0 8x20 ix0 QwN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Oo0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/North_Dakota/Center|MST MDT MWT MPT CST CDT|70 60 60 60 60 50|010102301010101010101010101010101010101010101010101010101014545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454|-261r0 1nX0 11B0 1nX0 SgN0 8x20 ix0 QwN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14o0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/North_Dakota/New_Salem|MST MDT MWT MPT CST CDT|70 60 60 60 60 50|010102301010101010101010101010101010101010101010101010101010101010101010101010101454545454545454545454545454545454545454545454545454545454545454545454|-261r0 1nX0 11B0 1nX0 SgN0 8x20 ix0 QwN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14o0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Ojinaga|LMT MST CST CDT MDT|6V.E 70 60 50 60|0121212323241414141414141414141414141414141414141414141414141414141414141414141414141414141|-1UQF0 deL0 8lc0 17c0 10M0 1dd0 2zQN0 1lb0 14p0 1lb0 14q0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 U10 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Pangnirtung|zzz AST AWT APT ADDT ADT EDT EST CST CDT|0 40 30 30 20 30 40 50 60 50|012314151515151515151515151515151515167676767689767676767676767676767676767676767676767676767676767676767676767676767676767|-1XiM0 PnG0 8x50 iu0 LCL0 1fA0 zgO0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1o00 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11C0 1nX0 11A0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Paramaribo|LMT PMT PMT NEGT SRT SRT|3E.E 3E.Q 3E.A 3u 3u 30|012345|-2nDUj.k Wqo0.c qanX.I 1dmLN.o lzc0","America/Phoenix|MST MDT MWT|70 60 60|01010202010|-261r0 1nX0 11B0 1nX0 SgN0 4Al1 Ap0 1db0 SWqX 1cL0","America/Port-au-Prince|PPMT EST EDT|4N 50 40|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-28RHb 2FnMb 19X0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14q0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 i6n0 1nX0 11B0 1nX0 d430 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Porto_Acre|LMT ACT ACST AMT|4v.c 50 40 40|01212121212121212121212121212131|-2glvs.M HdLs.M 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 NBd0 d5X0","America/Porto_Velho|LMT AMT AMST|4f.A 40 30|012121212121212121212121212121|-2glvI.o HdKI.o 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0","America/Puerto_Rico|AST AWT APT|40 30 30|0120|-17lU0 7XT0 iu0","America/Rainy_River|CST CDT CWT CPT|60 50 50 50|010123010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-25TQ0 1in0 Rnb0 3je0 8x30 iw0 19yN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Rankin_Inlet|zzz CST CDDT CDT EST|0 60 40 50 50|012131313131313131313131313131313131313131313431313131313131313131313131313131313131313131313131313131313131313131313131|-vDc0 keu0 1fA0 zgO0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Recife|LMT BRT BRST|2j.A 30 20|0121212121212121212121212121212121212121|-2glxE.o HdLE.o 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 nsp0 WL0 1tB0 2L0 2pB0 On0","America/Regina|LMT MST MDT MWT MPT CST|6W.A 70 60 60 60 60|012121212121212121212121341212121212121212121212121215|-2AD51.o uHe1.o 1in0 s2L0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 66N0 1cL0 1cN0 19X0 1fB0 1cL0 1fB0 1cL0 1cN0 1cL0 M30 8x20 ix0 1ip0 1cL0 1ip0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 3NB0 1cL0 1cN0","America/Resolute|zzz CST CDDT CDT EST|0 60 40 50 50|012131313131313131313131313131313131313131313431313131313431313131313131313131313131313131313131313131313131313131313131|-SnA0 GWS0 1fA0 zgO0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Santa_Isabel|LMT MST PST PDT PWT PPT|7D.s 70 80 70 70 70|012123245232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-1UQE0 4PX0 8mM0 8lc0 SN0 1cL0 pHB0 83r0 zI0 5O10 1Rz0 cOP0 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 BUp0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Santarem|LMT AMT AMST BRT|3C.M 40 30 30|0121212121212121212121212121213|-2glwl.c HdLl.c 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 NBd0","America/Santiago|SMT CLT CLT CLST CLST CLT|4G.K 50 40 40 30 30|01020313131313121242124242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424245|-2q2jh.e fJAh.e 5knG.K 1Vzh.e jRAG.K 1pbh.e 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 nHX0 op0 9Bz0 jb0 1oN0 ko0 Qeo0 WL0 1zd0 On0 1ip0 11z0 1o10 11z0 1qN0 WL0 1ld0 14n0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1o10 11z0 1qN0 WL0 1fB0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0","America/Santo_Domingo|SDMT EST EDT EHDT AST|4E 50 40 4u 40|01213131313131414|-1ttjk 1lJMk Mn0 6sp0 Lbu 1Cou yLu 1RAu wLu 1QMu xzu 1Q0u xXu 1PAu 13jB0 e00","America/Sao_Paulo|LMT BRT BRST|36.s 30 20|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212|-2glwR.w HdKR.w 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 pTd0 PX0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 1C10 Lz0 1Ip0 HX0 1zd0 On0 1HB0 IL0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10 Lz0 1C10 On0 1zd0 Rb0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0","America/Scoresbysund|LMT CGT CGST EGST EGT|1r.Q 20 10 0 10|0121343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434|-2a5Ww.8 2z5ew.8 1a00 1cK0 1cL0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","America/Sitka|PST PWT PPT PDT YST AKST AKDT|80 70 70 70 90 90 80|01203030303030303030303030303030345656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565|-17T20 8x10 iy0 Vo10 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 co0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/St_Johns|NST NDT NST NDT NWT NPT NDDT|3u.Q 2u.Q 3u 2u 2u 2u 1u|01010101010101010101010101010101010102323232323232324523232323232323232323232323232323232323232323232323232323232323232323232323232323232326232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-28oit.8 14L0 1nB0 1in0 1gm0 Dz0 1JB0 1cL0 1cN0 1cL0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 1cL0 1fB0 19X0 1fB0 19X0 10O0 eKX.8 19X0 1iq0 WL0 1qN0 WL0 1qN0 WL0 1tB0 TX0 1tB0 WL0 1qN0 WL0 1qN0 7UHu itu 1tB0 WL0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1tB0 WL0 1ld0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14n1 1lb0 14p0 1nW0 11C0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Swift_Current|LMT MST MDT MWT MPT CST|7b.k 70 60 60 60 60|012134121212121212121215|-2AD4M.E uHdM.E 1in0 UGp0 8x20 ix0 1o10 17b0 1ip0 11z0 1o10 11z0 1o10 11z0 isN0 1cL0 3Cp0 1cL0 1cN0 11z0 1qN0 WL0 pMp0","America/Tegucigalpa|LMT CST CDT|5M.Q 60 50|01212121|-1WGGb.8 2ETcb.8 WL0 1qN0 WL0 GRd0 AL0","America/Thule|LMT AST ADT|4z.8 40 30|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2a5To.Q 31NBo.Q 1cL0 1cN0 1cL0 1fB0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Thunder_Bay|CST EST EWT EPT EDT|60 50 40 40 40|0123141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141|-2q5S0 1iaN0 8x40 iv0 XNB0 1cL0 1cN0 1fz0 1cN0 1cL0 3Cp0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Vancouver|PST PDT PWT PPT|80 70 70 70|0102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-25TO0 1in0 UGp0 8x10 iy0 1o10 17b0 1ip0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Whitehorse|YST YDT YWT YPT YDDT PST PDT|90 80 80 80 70 80 70|0101023040565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565|-25TN0 1in0 1o10 13V0 Ser0 8x00 iz0 LCL0 1fA0 3NA0 vrd0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Winnipeg|CST CDT CWT CPT|60 50 50 50|010101023010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2aIi0 WL0 3ND0 1in0 Jap0 Rb0 aCN0 8x30 iw0 1tB0 11z0 1ip0 11z0 1o10 11z0 1o10 11z0 1rd0 10L0 1op0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 1cL0 1cN0 11z0 6i10 WL0 6i10 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1a00 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1a00 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Yakutat|YST YWT YPT YDT AKST AKDT|90 80 80 80 90 80|01203030303030303030303030303030304545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454|-17T10 8x00 iz0 Vo10 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cn0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Yellowknife|zzz MST MWT MPT MDDT MDT|0 70 60 60 50 60|012314151515151515151515151515151515151515151515151515151515151515151515151515151515151515151515151515151515151515151515151|-1pdA0 hix0 8x20 ix0 LCL0 1fA0 zgO0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","Antarctica/Casey|zzz AWST CAST|0 -80 -b0|012121|-2q00 1DjS0 T90 40P0 KL0","Antarctica/Davis|zzz DAVT DAVT|0 -70 -50|01012121|-vyo0 iXt0 alj0 1D7v0 VB0 3Wn0 KN0","Antarctica/DumontDUrville|zzz PMT DDUT|0 -a0 -a0|0102|-U0o0 cfq0 bFm0","Antarctica/Macquarie|AEST AEDT zzz MIST|-a0 -b0 0 -b0|0102010101010101010101010101010101010101010101010101010101010101010101010101010101010101013|-29E80 19X0 4SL0 1ayy0 Lvs0 1cM0 1o00 Rc0 1wo0 Rc0 1wo0 U00 1wo0 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1qM0 WM0 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1wo0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 11A0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 11A0 1o00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1cM0 1cM0 1cM0","Antarctica/Mawson|zzz MAWT MAWT|0 -60 -50|012|-CEo0 2fyk0","Antarctica/McMurdo|NZMT NZST NZST NZDT|-bu -cu -c0 -d0|01020202020202020202020202023232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323|-1GCVu Lz0 1tB0 11zu 1o0u 11zu 1o0u 11zu 1o0u 14nu 1lcu 14nu 1lcu 1lbu 11Au 1nXu 11Au 1nXu 11Au 1nXu 11Au 1nXu 11Au 1qLu WMu 1qLu 11Au 1n1bu IM0 1C00 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1qM0 14o0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1io0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Antarctica/Palmer|zzz ARST ART ART ARST CLT CLST CLT|0 30 40 30 20 40 30 30|012121212123435656565656565656565656565656565656565656565656565656565656565656567|-cao0 nD0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 jsN0 14N0 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1o10 11z0 1qN0 WL0 1fB0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0","Antarctica/Rothera|zzz ROTT|0 30|01|gOo0","Antarctica/Syowa|zzz SYOT|0 -30|01|-vs00","Antarctica/Troll|zzz UTC CEST|0 0 -20|01212121212121212121212121212121212121212121212121212121212121212121|1puo0 hd0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Antarctica/Vostok|zzz VOST|0 -60|01|-tjA0","Arctic/Longyearbyen|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2awM0 Qm0 W6o0 5pf0 WM0 1fA0 1cM0 1cM0 1cM0 1cM0 wJc0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1qM0 WM0 zpc0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Aden|LMT AST|-36.Q -30|01|-TvD6.Q","Asia/Almaty|LMT ALMT ALMT ALMST|-57.M -50 -60 -70|0123232323232323232323232323232323232323232323232|-1Pc57.M eUo7.M 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 3Cl0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0","Asia/Amman|LMT EET EEST|-2n.I -20 -30|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1yW2n.I 1HiMn.I KL0 1oN0 11b0 1oN0 11b0 1pd0 1dz0 1cp0 11b0 1op0 11b0 fO10 1db0 1e10 1cL0 1cN0 1cL0 1cN0 1fz0 1pd0 10n0 1ld0 14n0 1hB0 15b0 1ip0 19X0 1cN0 1cL0 1cN0 17b0 1ld0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1So0 y00 1fc0 1dc0 1co0 1dc0 1cM0 1cM0 1cM0 1o00 11A0 1lc0 17c0 1cM0 1cM0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 4bX0 Dd0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0","Asia/Anadyr|LMT ANAT ANAT ANAST ANAST ANAST ANAT|-bN.U -c0 -d0 -e0 -d0 -c0 -b0|01232414141414141414141561414141414141414141414141414141414141561|-1PcbN.U eUnN.U 23CL0 1db0 1cN0 1dc0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qN0 WM0","Asia/Aqtau|LMT FORT FORT SHET SHET SHEST AQTT AQTST AQTST AQTT|-3l.4 -40 -50 -50 -60 -60 -50 -60 -50 -40|012345353535353535353536767676898989898989898989896|-1Pc3l.4 eUnl.4 1jcL0 JDc0 1cL0 1dc0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2UK0 Fz0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cN0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 RW0","Asia/Aqtobe|LMT AKTT AKTT AKTST AKTT AQTT AQTST|-3M.E -40 -50 -60 -60 -50 -60|01234323232323232323232565656565656565656565656565|-1Pc3M.E eUnM.E 23CL0 1db0 1cM0 1dc0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2UK0 Fz0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0","Asia/Ashgabat|LMT ASHT ASHT ASHST ASHST TMT TMT|-3R.w -40 -50 -60 -50 -40 -50|012323232323232323232324156|-1Pc3R.w eUnR.w 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 ba0 xC0","Asia/Baghdad|BMT AST ADT|-2V.A -30 -40|012121212121212121212121212121212121212121212121212121|-26BeV.A 2ACnV.A 11b0 1cp0 1dz0 1dd0 1db0 1cN0 1cp0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1de0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0","Asia/Bahrain|LMT GST AST|-3q.8 -40 -30|012|-21Jfq.8 27BXq.8","Asia/Baku|LMT BAKT BAKT BAKST BAKST AZST AZT AZT AZST|-3j.o -30 -40 -50 -40 -40 -30 -40 -50|0123232323232323232323245657878787878787878787878787878787878787878787878787878787878787878787878787878787878787|-1Pc3j.o 1jUoj.o WCL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 10K0 c30 1cJ0 1cL0 8wu0 1o00 11z0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Bangkok|BMT ICT|-6G.4 -70|01|-218SG.4","Asia/Beirut|EET EEST|-20 -30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-21aq0 1on0 1410 1db0 19B0 1in0 1ip0 WL0 1lQp0 11b0 1oN0 11b0 1oN0 11b0 1pd0 11b0 1oN0 11b0 q6N0 En0 1oN0 11b0 1oN0 11b0 1oN0 11b0 1pd0 11b0 1oN0 11b0 1op0 11b0 dA10 17b0 1iN0 17b0 1iN0 17b0 1iN0 17b0 1vB0 SL0 1mp0 13z0 1iN0 17b0 1iN0 17b0 1jd0 12n0 1a10 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0","Asia/Bishkek|LMT FRUT FRUT FRUST FRUST KGT KGST KGT|-4W.o -50 -60 -70 -60 -50 -60 -60|01232323232323232323232456565656565656565656565656567|-1Pc4W.o eUnW.o 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 11c0 1tX0 17b0 1ip0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1cPu 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 T8u","Asia/Brunei|LMT BNT BNT|-7D.E -7u -80|012|-1KITD.E gDc9.E","Asia/Calcutta|HMT BURT IST IST|-5R.k -6u -5u -6u|01232|-18LFR.k 1unn.k HB0 7zX0","Asia/Chita|LMT YAKT YAKT YAKST YAKST YAKT IRKT|-7x.Q -80 -90 -a0 -90 -a0 -80|012323232323232323232324123232323232323232323232323232323232323256|-21Q7x.Q pAnx.Q 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0","Asia/Choibalsan|LMT ULAT ULAT CHOST CHOT CHOT CHOST|-7C -70 -80 -a0 -90 -80 -90|0123434343434343434343434343434343434343434343456565656565656565656565656565656565656565656565|-2APHC 2UkoC cKn0 1da0 1dd0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 6hD0 11z0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 3Db0 h1f0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0","Asia/Chongqing|CST CDT|-80 -90|01010101010101010|-1c1I0 LX0 16p0 1jz0 1Myp0 Rb0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0","Asia/Colombo|MMT IST IHST IST LKT LKT|-5j.w -5u -60 -6u -6u -60|01231451|-2zOtj.w 1rFbN.w 1zzu 7Apu 23dz0 11zu n3cu","Asia/Dacca|HMT BURT IST DACT BDT BDST|-5R.k -6u -5u -60 -60 -70|01213454|-18LFR.k 1unn.k HB0 m6n0 LqMu 1x6n0 1i00","Asia/Damascus|LMT EET EEST|-2p.c -20 -30|01212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-21Jep.c Hep.c 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1xRB0 11X0 1oN0 10L0 1pB0 11b0 1oN0 10L0 1mp0 13X0 1oN0 11b0 1pd0 11b0 1oN0 11b0 1oN0 11b0 1oN0 11b0 1pd0 11b0 1oN0 11b0 1oN0 11b0 1oN0 11b0 1pd0 11b0 1oN0 Nb0 1AN0 Nb0 bcp0 19X0 1gp0 19X0 3ld0 1xX0 Vd0 1Bz0 Sp0 1vX0 10p0 1dz0 1cN0 1cL0 1db0 1db0 1g10 1an0 1ap0 1db0 1fd0 1db0 1cN0 1db0 1dd0 1db0 1cp0 1dz0 1c10 1dX0 1cN0 1db0 1dd0 1db0 1cN0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1db0 1cN0 1db0 1cN0 19z0 1fB0 1qL0 11B0 1on0 Wp0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0","Asia/Dili|LMT TLT JST TLT WITA|-8m.k -80 -90 -90 -80|012343|-2le8m.k 1dnXm.k 8HA0 1ew00 Xld0","Asia/Dubai|LMT GST|-3F.c -40|01|-21JfF.c","Asia/Dushanbe|LMT DUST DUST DUSST DUSST TJT|-4z.c -50 -60 -70 -60 -50|0123232323232323232323245|-1Pc4z.c eUnz.c 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 14N0","Asia/Gaza|EET EET EEST IST IDT|-20 -30 -30 -20 -30|010101010102020202020202020202023434343434343434343434343430202020202020202020202020202020202020202020202020202020202020202020202020202020202020|-1c2q0 5Rb0 10r0 1px0 10N0 1pz0 16p0 1jB0 16p0 1jx0 pBd0 Vz0 1oN0 11b0 1oO0 10N0 1pz0 10N0 1pb0 10N0 1pb0 10N0 1pb0 10N0 1pz0 10N0 1pb0 10N0 1pb0 11d0 1oL0 dW0 hfB0 Db0 1fB0 Rb0 npB0 11z0 1C10 IL0 1s10 10n0 1o10 WL0 1zd0 On0 1ld0 11z0 1o10 14n0 1o10 14n0 1nd0 12n0 1nd0 Xz0 1q10 12n0 M10 C00 17c0 1io0 17c0 1io0 17c0 1o00 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 17c0 1io0 18N0 1bz0 19z0 1gp0 1610 1iL0 11z0 1o10 14o0 1lA1 SKX 1xd1 MKX 1AN0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1210 1nz0 14N0 1nz0 1210 1nz0 1210 1nz0 1210 1nz0 1210 1nz0 1210 1nz0 14N0 1nz0 1210 1nz0 1210 1nz0 1210 1nz0 1210 1nz0 14N0 1nz0 1210 1nz0 1210 1nz0 1210 1nz0 1210 1nz0 1210 1nz0 14N0 1nz0 1210 1nz0 1210 1nz0 1210 1nz0","Asia/Hebron|EET EET EEST IST IDT|-20 -30 -30 -20 -30|01010101010202020202020202020202343434343434343434343434343020202020202020202020202020202020202020202020202020202020202020202020202020202020202020|-1c2q0 5Rb0 10r0 1px0 10N0 1pz0 16p0 1jB0 16p0 1jx0 pBd0 Vz0 1oN0 11b0 1oO0 10N0 1pz0 10N0 1pb0 10N0 1pb0 10N0 1pb0 10N0 1pz0 10N0 1pb0 10N0 1pb0 11d0 1oL0 dW0 hfB0 Db0 1fB0 Rb0 npB0 11z0 1C10 IL0 1s10 10n0 1o10 WL0 1zd0 On0 1ld0 11z0 1o10 14n0 1o10 14n0 1nd0 12n0 1nd0 Xz0 1q10 12n0 M10 C00 17c0 1io0 17c0 1io0 17c0 1o00 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 17c0 1io0 18N0 1bz0 19z0 1gp0 1610 1iL0 12L0 1mN0 14o0 1lc0 Tb0 1xd1 MKX bB0 cn0 1cN0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1210 1nz0 14N0 1nz0 1210 1nz0 1210 1nz0 1210 1nz0 1210 1nz0 1210 1nz0 14N0 1nz0 1210 1nz0 1210 1nz0 1210 1nz0 1210 1nz0 14N0 1nz0 1210 1nz0 1210 1nz0 1210 1nz0 1210 1nz0 1210 1nz0 14N0 1nz0 1210 1nz0 1210 1nz0 1210 1nz0","Asia/Ho_Chi_Minh|LMT PLMT ICT IDT JST|-76.E -76.u -70 -80 -90|0123423232|-2yC76.E bK00.a 1h7b6.u 5lz0 18o0 3Oq0 k5b0 aW00 BAM0","Asia/Hong_Kong|LMT HKT HKST JST|-7A.G -80 -90 -90|0121312121212121212121212121212121212121212121212121212121212121212121|-2CFHA.G 1sEP6.G 1cL0 ylu 93X0 1qQu 1tX0 Rd0 1In0 NB0 1cL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1kL0 14N0 1nX0 U10 1tz0 U10 1wn0 Rd0 1wn0 U10 1tz0 U10 1tz0 U10 1tz0 U10 1wn0 Rd0 1wn0 Rd0 1wn0 U10 1tz0 U10 1tz0 17d0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 s10 1Vz0 1cN0 1cL0 1cN0 1cL0 6fd0 14n0","Asia/Hovd|LMT HOVT HOVT HOVST|-66.A -60 -70 -80|012323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-2APG6.A 2Uko6.A cKn0 1db0 1dd0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 6hD0 11z0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 kEp0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0","Asia/Irkutsk|IMT IRKT IRKT IRKST IRKST IRKT|-6V.5 -70 -80 -90 -80 -90|012323232323232323232324123232323232323232323232323232323232323252|-21zGV.5 pjXV.5 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0","Asia/Istanbul|IMT EET EEST TRST TRT|-1U.U -20 -30 -40 -30|012121212121212121212121212121212121212121212121212121234343434342121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2ogNU.U dzzU.U 11b0 8tB0 1on0 1410 1db0 19B0 1in0 3Rd0 Un0 1oN0 11b0 zSp0 CL0 mN0 1Vz0 1gN0 1pz0 5Rd0 1fz0 1yp0 ML0 1kp0 17b0 1ip0 17b0 1fB0 19X0 1jB0 18L0 1ip0 17z0 qdd0 xX0 3S10 Tz0 dA10 11z0 1o10 11z0 1qN0 11z0 1ze0 11B0 WM0 1qO0 WI0 1nX0 1rB0 10L0 11B0 1in0 17d0 1in0 2pX0 19E0 1fU0 16Q0 1iI0 16Q0 1iI0 1Vd0 pb0 3Kp0 14o0 1df0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cL0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WO0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 Xc0 1qo0 WM0 1qM0 11A0 1o00 1200 1nA0 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Jakarta|BMT JAVT WIB JST WIB WIB|-77.c -7k -7u -90 -80 -70|01232425|-1Q0Tk luM0 mPzO 8vWu 6kpu 4PXu xhcu","Asia/Jayapura|LMT WIT ACST|-9m.M -90 -9u|0121|-1uu9m.M sMMm.M L4nu","Asia/Jerusalem|JMT IST IDT IDDT|-2k.E -20 -30 -40|01212121212132121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-26Bek.E SyMk.E 5Rb0 10r0 1px0 10N0 1pz0 16p0 1jB0 16p0 1jx0 3LB0 Em0 or0 1cn0 1dB0 16n0 10O0 1ja0 1tC0 14o0 1cM0 1a00 11A0 1Na0 An0 1MP0 AJ0 1Kp0 LC0 1oo0 Wl0 EQN0 Db0 1fB0 Rb0 npB0 11z0 1C10 IL0 1s10 10n0 1o10 WL0 1zd0 On0 1ld0 11z0 1o10 14n0 1o10 14n0 1nd0 12n0 1nd0 Xz0 1q10 12n0 1hB0 1dX0 1ep0 1aL0 1eN0 17X0 1nf0 11z0 1tB0 19W0 1e10 17b0 1ep0 1gL0 18N0 1fz0 1eN0 17b0 1gq0 1gn0 19d0 1dz0 1c10 17X0 1hB0 1gn0 19d0 1dz0 1c10 17X0 1kp0 1dz0 1c10 1aL0 1eN0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0","Asia/Kabul|AFT AFT|-40 -4u|01|-10Qs0","Asia/Kamchatka|LMT PETT PETT PETST PETST|-ay.A -b0 -c0 -d0 -c0|01232323232323232323232412323232323232323232323232323232323232412|-1SLKy.A ivXy.A 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qN0 WM0","Asia/Karachi|LMT IST IST KART PKT PKST|-4s.c -5u -6u -50 -50 -60|012134545454|-2xoss.c 1qOKW.c 7zX0 eup0 LqMu 1fy01 1cL0 dK0X 11b0 1610 1jX0","Asia/Kashgar|LMT XJT|-5O.k -60|01|-1GgtO.k","Asia/Kathmandu|LMT IST NPT|-5F.g -5u -5J|012|-21JhF.g 2EGMb.g","Asia/Khandyga|LMT YAKT YAKT YAKST YAKST VLAT VLAST VLAT YAKT|-92.d -80 -90 -a0 -90 -a0 -b0 -b0 -a0|01232323232323232323232412323232323232323232323232565656565656565782|-21Q92.d pAp2.d 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 qK0 yN0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 17V0 7zD0","Asia/Krasnoyarsk|LMT KRAT KRAT KRAST KRAST KRAT|-6b.q -60 -70 -80 -70 -80|012323232323232323232324123232323232323232323232323232323232323252|-21Hib.q prAb.q 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0","Asia/Kuala_Lumpur|SMT MALT MALST MALT MALT JST MYT|-6T.p -70 -7k -7k -7u -90 -80|01234546|-2Bg6T.p 17anT.p 7hXE dM00 17bO 8Fyu 1so1u","Asia/Kuching|LMT BORT BORT BORTST JST MYT|-7l.k -7u -80 -8k -90 -80|01232323232323232425|-1KITl.k gDbP.k 6ynu AnE 1O0k AnE 1NAk AnE 1NAk AnE 1NAk AnE 1O0k AnE 1NAk AnE pAk 8Fz0 1so10","Asia/Macao|LMT MOT MOST CST|-7y.k -80 -90 -80|0121212121212121212121212121212121212121213|-2le7y.k 1XO34.k 1wn0 Rd0 1wn0 R9u 1wqu U10 1tz0 TVu 1tz0 17gu 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cJu 1cL0 1cN0 1fz0 1cN0 1cOu 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cJu 1cL0 1cN0 1fz0 1cN0 1cL0 KEp0","Asia/Magadan|LMT MAGT MAGT MAGST MAGST MAGT|-a3.c -a0 -b0 -c0 -b0 -c0|012323232323232323232324123232323232323232323232323232323232323251|-1Pca3.c eUo3.c 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0","Asia/Makassar|LMT MMT WITA JST|-7V.A -7V.A -80 -90|01232|-21JjV.A vfc0 myLV.A 8ML0","Asia/Manila|PHT PHST JST|-80 -90 -90|010201010|-1kJI0 AL0 cK10 65X0 mXB0 vX0 VK10 1db0","Asia/Nicosia|LMT EET EEST|-2d.s -20 -30|01212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1Vc2d.s 2a3cd.s 1cL0 1qp0 Xz0 19B0 19X0 1fB0 1db0 1cp0 1cL0 1fB0 19X0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1o30 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Novokuznetsk|LMT KRAT KRAT KRAST KRAST NOVST NOVT NOVT|-5M.M -60 -70 -80 -70 -70 -60 -70|012323232323232323232324123232323232323232323232323232323232325672|-1PctM.M eULM.M 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qN0 WM0 8Hz0","Asia/Novosibirsk|LMT NOVT NOVT NOVST NOVST|-5v.E -60 -70 -80 -70|0123232323232323232323241232341414141414141414141414141414141414121|-21Qnv.E pAFv.E 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 ml0 Os0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0","Asia/Omsk|LMT OMST OMST OMSST OMSST OMST|-4R.u -50 -60 -70 -60 -70|012323232323232323232324123232323232323232323232323232323232323252|-224sR.u pMLR.u 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0","Asia/Oral|LMT URAT URAT URAST URAT URAST ORAT ORAST ORAT|-3p.o -40 -50 -60 -60 -50 -40 -50 -50|012343232323232323251516767676767676767676767676768|-1Pc3p.o eUnp.o 23CL0 1db0 1cM0 1dc0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 2UK0 Fz0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 RW0","Asia/Pontianak|LMT PMT WIB JST WIB WITA WIB|-7h.k -7h.k -7u -90 -80 -80 -70|012324256|-2ua7h.k XE00 munL.k 8Rau 6kpu 4PXu xhcu Wqnu","Asia/Pyongyang|LMT KST JCST JST KST|-8n -8u -90 -90 -90|01234|-2um8n 97XR 12FXu jdA0","Asia/Qyzylorda|LMT KIZT KIZT KIZST KIZT QYZT QYZT QYZST|-4l.Q -40 -50 -60 -60 -50 -60 -70|012343232323232323232325676767676767676767676767676|-1Pc4l.Q eUol.Q 23CL0 1db0 1cM0 1dc0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2UK0 dC0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0","Asia/Rangoon|RMT BURT JST MMT|-6o.E -6u -90 -6u|0123|-21Jio.E SmnS.E 7j9u","Asia/Sakhalin|LMT JCST JST SAKT SAKST SAKST SAKT|-9u.M -90 -90 -b0 -c0 -b0 -a0|0123434343434343434343435634343434343565656565656565656565656565636|-2AGVu.M 1iaMu.M je00 1qFa0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o10 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0","Asia/Samarkand|LMT SAMT SAMT SAMST TAST UZST UZT|-4r.R -40 -50 -60 -60 -60 -50|01234323232323232323232356|-1Pc4r.R eUor.R 23CL0 1db0 1cM0 1dc0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 11x0 bf0","Asia/Seoul|LMT KST JCST JST KST KDT KDT|-8r.Q -8u -90 -90 -90 -9u -a0|01234151515151515146464|-2um8r.Q 97XV.Q 12FXu jjA0 kKo0 2I0u OL0 1FB0 Rb0 1qN0 TX0 1tB0 TX0 1tB0 TX0 1tB0 TX0 2ap0 12FBu 11A0 1o00 11A0","Asia/Singapore|SMT MALT MALST MALT MALT JST SGT SGT|-6T.p -70 -7k -7k -7u -90 -7u -80|012345467|-2Bg6T.p 17anT.p 7hXE dM00 17bO 8Fyu Mspu DTA0","Asia/Srednekolymsk|LMT MAGT MAGT MAGST MAGST MAGT SRET|-ae.Q -a0 -b0 -c0 -b0 -c0 -b0|012323232323232323232324123232323232323232323232323232323232323256|-1Pcae.Q eUoe.Q 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0","Asia/Taipei|JWST JST CST CDT|-80 -90 -80 -90|01232323232323232323232323232323232323232|-1iw80 joM0 1yo0 Tz0 1ip0 1jX0 1cN0 11b0 1oN0 11b0 1oN0 11b0 1oN0 11b0 10N0 1BX0 10p0 1pz0 10p0 1pz0 10p0 1db0 1dd0 1db0 1cN0 1db0 1cN0 1db0 1cN0 1db0 1BB0 ML0 1Bd0 ML0 uq10 1db0 1cN0 1db0 97B0 AL0","Asia/Tashkent|LMT TAST TAST TASST TASST UZST UZT|-4B.b -50 -60 -70 -60 -60 -50|01232323232323232323232456|-1Pc4B.b eUnB.b 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 11y0 bf0","Asia/Tbilisi|TBMT TBIT TBIT TBIST TBIST GEST GET GET GEST|-2X.b -30 -40 -50 -40 -40 -30 -40 -50|0123232323232323232323245656565787878787878787878567|-1Pc2X.b 1jUnX.b WCL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 3y0 19f0 1cK0 1cL0 1cN0 1cL0 1cN0 1cL0 1cM0 1cL0 1fB0 3Nz0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 An0 Os0 WM0","Asia/Tehran|LMT TMT IRST IRST IRDT IRDT|-3p.I -3p.I -3u -40 -50 -4u|01234325252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252|-2btDp.I 1d3c0 1huLT.I TXu 1pz0 sN0 vAu 1cL0 1dB0 1en0 pNB0 UL0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 64p0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0","Asia/Thimbu|LMT IST BTT|-5W.A -5u -60|012|-Su5W.A 1BGMs.A","Asia/Tokyo|JCST JST JDT|-90 -90 -a0|0121212121|-1iw90 pKq0 QL0 1lB0 13X0 1zB0 NX0 1zB0 NX0","Asia/Ulaanbaatar|LMT ULAT ULAT ULAST|-77.w -70 -80 -90|012323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-2APH7.w 2Uko7.w cKn0 1db0 1dd0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 6hD0 11z0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 kEp0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0","Asia/Ust-Nera|LMT YAKT YAKT MAGST MAGT MAGST MAGT MAGT VLAT VLAT|-9w.S -80 -90 -c0 -b0 -b0 -a0 -c0 -b0 -a0|0123434343434343434343456434343434343434343434343434343434343434789|-21Q9w.S pApw.S 23CL0 1d90 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 17V0 7zD0","Asia/Vladivostok|LMT VLAT VLAT VLAST VLAST VLAT|-8L.v -90 -a0 -b0 -a0 -b0|012323232323232323232324123232323232323232323232323232323232323252|-1SJIL.v itXL.v 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0","Asia/Yakutsk|LMT YAKT YAKT YAKST YAKST YAKT|-8C.W -80 -90 -a0 -90 -a0|012323232323232323232324123232323232323232323232323232323232323252|-21Q8C.W pAoC.W 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0","Asia/Yekaterinburg|LMT PMT SVET SVET SVEST SVEST YEKT YEKST YEKT|-42.x -3J.5 -40 -50 -60 -50 -50 -60 -60|0123434343434343434343435267676767676767676767676767676767676767686|-2ag42.x 7mQh.s qBvJ.5 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0","Asia/Yerevan|LMT YERT YERT YERST YERST AMST AMT AMT AMST|-2W -30 -40 -50 -40 -40 -30 -40 -50|0123232323232323232323245656565657878787878787878787878787878787|-1Pc2W 1jUnW WCL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1am0 2r0 1cJ0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 3Fb0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0","Atlantic/Azores|HMT AZOT AZOST AZOMT AZOT AZOST WET|1S.w 20 10 0 10 0 0|01212121212121212121212121212121212121212121232123212321232121212121212121212121212121212121212121454545454545454545454545454545456545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454|-2ldW5.s aPX5.s Sp0 LX0 1vc0 Tc0 1uM0 SM0 1vc0 Tc0 1vc0 SM0 1vc0 6600 1co0 3E00 17c0 1fA0 1a00 1io0 1a00 1io0 17c0 3I00 17c0 1cM0 1cM0 3Fc0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Dc0 1tA0 1cM0 1dc0 1400 gL0 IM0 s10 U00 dX0 Rc0 pd0 Rc0 gL0 Oo0 pd0 Rc0 gL0 Oo0 pd0 14o0 1cM0 1cP0 1cM0 1cM0 1cM0 1cM0 1cM0 3Co0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 qIl0 1cM0 1fA0 1cM0 1cM0 1cN0 1cL0 1cN0 1cM0 1cM0 1cM0 1cM0 1cN0 1cL0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cL0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Atlantic/Bermuda|LMT AST ADT|4j.i 40 30|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1BnRE.G 1LTbE.G 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","Atlantic/Canary|LMT CANT WET WEST|11.A 10 0 -10|01232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-1UtaW.o XPAW.o 1lAK0 1a10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Atlantic/Cape_Verde|LMT CVT CVST CVT|1y.4 20 10 10|01213|-2xomp.U 1qOMp.U 7zX0 1djf0","Atlantic/Faeroe|LMT WET WEST|r.4 0 -10|01212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2uSnw.U 2Wgow.U 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Atlantic/Madeira|FMT MADT MADST MADMT WET WEST|17.A 10 0 -10 0 -10|01212121212121212121212121212121212121212121232123212321232121212121212121212121212121212121212121454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454|-2ldWQ.o aPWQ.o Sp0 LX0 1vc0 Tc0 1uM0 SM0 1vc0 Tc0 1vc0 SM0 1vc0 6600 1co0 3E00 17c0 1fA0 1a00 1io0 1a00 1io0 17c0 3I00 17c0 1cM0 1cM0 3Fc0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Dc0 1tA0 1cM0 1dc0 1400 gL0 IM0 s10 U00 dX0 Rc0 pd0 Rc0 gL0 Oo0 pd0 Rc0 gL0 Oo0 pd0 14o0 1cM0 1cP0 1cM0 1cM0 1cM0 1cM0 1cM0 3Co0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 qIl0 1cM0 1fA0 1cM0 1cM0 1cN0 1cL0 1cN0 1cM0 1cM0 1cM0 1cM0 1cN0 1cL0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Atlantic/Reykjavik|LMT IST ISST GMT|1s 10 0 0|012121212121212121212121212121212121212121212121212121212121212121213|-2uWmw mfaw 1Bd0 ML0 1LB0 Cn0 1LB0 3fX0 C10 HrX0 1cO0 LB0 1EL0 LA0 1C00 Oo0 1wo0 Rc0 1wo0 Rc0 1wo0 Rc0 1zc0 Oo0 1zc0 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1lc0 14o0 1o00 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1o00 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1o00 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1o00 14o0","Atlantic/South_Georgia|GST|20|0|","Atlantic/Stanley|SMT FKT FKST FKT FKST|3P.o 40 30 30 20|0121212121212134343212121212121212121212121212121212121212121212121212|-2kJw8.A 12bA8.A 19X0 1fB0 19X0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1fB0 Cn0 1Cc10 WL0 1qL0 U10 1tz0 U10 1qM0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1tz0 U10 1tz0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1tz0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qN0 U10 1wn0 Rd0 1wn0 U10 1tz0 U10 1tz0 U10 1tz0 U10 1tz0 U10 1wn0 U10 1tz0 U10 1tz0 U10","Australia/ACT|AEST AEDT|-a0 -b0|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|-293lX xcX 10jd0 yL0 1cN0 1cL0 1fB0 19X0 17c10 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 14o0 1o00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1tA0 WM0 1tA0 U00 1tA0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 11A0 1o00 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/Adelaide|ACST ACDT|-9u -au|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|-293lt xcX 10jd0 yL0 1cN0 1cL0 1fB0 19X0 17c10 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 Oo0 1zc0 WM0 1qM0 Rc0 1zc0 U00 1tA0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/Brisbane|AEST AEDT|-a0 -b0|01010101010101010|-293lX xcX 10jd0 yL0 1cN0 1cL0 1fB0 19X0 17c10 LA0 H1A0 Oo0 1zc0 Oo0 1zc0 Oo0","Australia/Broken_Hill|ACST ACDT|-9u -au|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|-293lt xcX 10jd0 yL0 1cN0 1cL0 1fB0 19X0 17c10 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 14o0 1o00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1tA0 WM0 1tA0 U00 1tA0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/Currie|AEST AEDT|-a0 -b0|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|-29E80 19X0 10jd0 yL0 1cN0 1cL0 1fB0 19X0 17c10 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1qM0 WM0 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1wo0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 11A0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 11A0 1o00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/Darwin|ACST ACDT|-9u -au|010101010|-293lt xcX 10jd0 yL0 1cN0 1cL0 1fB0 19X0","Australia/Eucla|ACWST ACWDT|-8J -9J|0101010101010101010|-293kI xcX 10jd0 yL0 1cN0 1cL0 1gSp0 Oo0 l5A0 Oo0 iJA0 G00 zU00 IM0 1qM0 11A0 1o00 11A0","Australia/Hobart|AEST AEDT|-a0 -b0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|-29E80 19X0 10jd0 yL0 1cN0 1cL0 1fB0 19X0 VfB0 1cM0 1o00 Rc0 1wo0 Rc0 1wo0 U00 1wo0 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1qM0 WM0 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1wo0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 11A0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 11A0 1o00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/LHI|AEST LHST LHDT LHDT|-a0 -au -bu -b0|0121212121313131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313|raC0 1zdu Rb0 1zd0 On0 1zd0 On0 1zd0 On0 1zd0 TXu 1qMu WLu 1tAu WLu 1tAu TXu 1tAu Onu 1zcu Onu 1zcu Onu 1zcu Rbu 1zcu Onu 1zcu Onu 1zcu 11zu 1o0u 11zu 1o0u 11zu 1o0u 11zu 1qMu WLu 11Au 1nXu 1qMu 11zu 1o0u 11zu 1o0u 11zu 1qMu WLu 1qMu 11zu 1o0u WLu 1qMu 14nu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1fzu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu","Australia/Lindeman|AEST AEDT|-a0 -b0|010101010101010101010|-293lX xcX 10jd0 yL0 1cN0 1cL0 1fB0 19X0 17c10 LA0 H1A0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0","Australia/Melbourne|AEST AEDT|-a0 -b0|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|-293lX xcX 10jd0 yL0 1cN0 1cL0 1fB0 19X0 17c10 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1qM0 11A0 1tA0 U00 1tA0 U00 1tA0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 11A0 1o00 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/Perth|AWST AWDT|-80 -90|0101010101010101010|-293jX xcX 10jd0 yL0 1cN0 1cL0 1gSp0 Oo0 l5A0 Oo0 iJA0 G00 zU00 IM0 1qM0 11A0 1o00 11A0","CET|CET CEST|-10 -20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2aFe0 11d0 1iO0 11A0 1o00 11A0 Qrc0 6i00 WM0 1fA0 1cM0 1cM0 1cM0 16M0 1gMM0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","CST6CDT|CST CDT CWT CPT|60 50 50 50|010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 QwN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","Chile/EasterIsland|EMT EAST EASST EAST EASST EAST|7h.s 70 60 60 50 50|012121212121212121212121212123434343434343434343434343434343434343434343434343434343434343434345|-1uSgG.w 1s4IG.w WL0 1zd0 On0 1ip0 11z0 1o10 11z0 1qN0 WL0 1ld0 14n0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1o10 11z0 1qN0 WL0 1fB0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0","EET|EET EEST|-20 -30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDB0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","EST|EST|50|0|","EST5EDT|EST EDT EWT EPT|50 40 40 40|010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261t0 1nX0 11B0 1nX0 SgN0 8x40 iv0 QwN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","Eire|DMT IST GMT BST IST|p.l -y.D 0 -10 -10|01232323232324242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242|-2ax9y.D Rc0 1fzy.D 14M0 1fc0 1g00 1co0 1dc0 1co0 1oo0 1400 1dc0 19A0 1io0 1io0 WM0 1o00 14o0 1o00 17c0 1io0 17c0 1fA0 1a00 1lc0 17c0 1io0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1cM0 1io0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1a00 1io0 1qM0 Dc0 g5X0 14p0 1wn0 17d0 1io0 11A0 1o00 17c0 1fA0 1a00 1fA0 1cM0 1fA0 1a00 17c0 1fA0 1a00 1io0 17c0 1lc0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1a00 1a00 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1tA0 IM0 90o0 U00 1tA0 U00 1tA0 U00 1tA0 U00 1tA0 WM0 1qM0 WM0 1qM0 WM0 1tA0 U00 1tA0 U00 1tA0 11z0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 14o0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Etc/GMT+0|GMT|0|0|","Etc/GMT+1|GMT+1|10|0|","Etc/GMT+10|GMT+10|a0|0|","Etc/GMT+11|GMT+11|b0|0|","Etc/GMT+12|GMT+12|c0|0|","Etc/GMT+2|GMT+2|20|0|","Etc/GMT+3|GMT+3|30|0|","Etc/GMT+4|GMT+4|40|0|","Etc/GMT+5|GMT+5|50|0|","Etc/GMT+6|GMT+6|60|0|","Etc/GMT+7|GMT+7|70|0|","Etc/GMT+8|GMT+8|80|0|","Etc/GMT+9|GMT+9|90|0|","Etc/GMT-1|GMT-1|-10|0|","Etc/GMT-10|GMT-10|-a0|0|","Etc/GMT-11|GMT-11|-b0|0|","Etc/GMT-12|GMT-12|-c0|0|","Etc/GMT-13|GMT-13|-d0|0|","Etc/GMT-14|GMT-14|-e0|0|","Etc/GMT-2|GMT-2|-20|0|","Etc/GMT-3|GMT-3|-30|0|","Etc/GMT-4|GMT-4|-40|0|","Etc/GMT-5|GMT-5|-50|0|","Etc/GMT-6|GMT-6|-60|0|","Etc/GMT-7|GMT-7|-70|0|","Etc/GMT-8|GMT-8|-80|0|","Etc/GMT-9|GMT-9|-90|0|","Etc/UCT|UCT|0|0|","Etc/UTC|UTC|0|0|","Europe/Amsterdam|AMT NST NEST NET CEST CET|-j.w -1j.w -1k -k -20 -10|010101010101010101010101010101010101010101012323234545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545|-2aFcj.w 11b0 1iP0 11A0 1io0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1co0 1io0 1yo0 Pc0 1a00 1fA0 1Bc0 Mo0 1tc0 Uo0 1tA0 U00 1uo0 W00 1s00 VA0 1so0 Vc0 1sM0 UM0 1wo0 Rc0 1u00 Wo0 1rA0 W00 1s00 VA0 1sM0 UM0 1w00 fV0 BCX.w 1tA0 U00 1u00 Wo0 1sm0 601k WM0 1fA0 1cM0 1cM0 1cM0 16M0 1gMM0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Andorra|WET CET CEST|0 -10 -20|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-UBA0 1xIN0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Athens|AMT EET EEST CEST CET|-1y.Q -20 -30 -20 -10|012123434121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2a61x.Q CNbx.Q mn0 kU10 9b0 3Es0 Xa0 1fb0 1dd0 k3X0 Nz0 SCp0 1vc0 SO0 1cM0 1a00 1ao0 1fc0 1a10 1fG0 1cg0 1dX0 1bX0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Belfast|GMT BST BDST|0 -10 -20|0101010101010101010101010101010101010101010101010121212121210101210101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2axa0 Rc0 1fA0 14M0 1fc0 1g00 1co0 1dc0 1co0 1oo0 1400 1dc0 19A0 1io0 1io0 WM0 1o00 14o0 1o00 17c0 1io0 17c0 1fA0 1a00 1lc0 17c0 1io0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1cM0 1io0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1a00 1io0 1qM0 Dc0 2Rz0 Dc0 1zc0 Oo0 1zc0 Rc0 1wo0 17c0 1iM0 FA0 xB0 1fA0 1a00 14o0 bb0 LA0 xB0 Rc0 1wo0 11A0 1o00 17c0 1fA0 1a00 1fA0 1cM0 1fA0 1a00 17c0 1fA0 1a00 1io0 17c0 1lc0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1a00 1a00 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1tA0 IM0 90o0 U00 1tA0 U00 1tA0 U00 1tA0 U00 1tA0 WM0 1qM0 WM0 1qM0 WM0 1tA0 U00 1tA0 U00 1tA0 11z0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 14o0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Belgrade|CET CEST|-10 -20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-19RC0 3IP0 WM0 1fA0 1cM0 1cM0 1rc0 Qo0 1vmo0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Berlin|CET CEST CEMT|-10 -20 -30|01010101010101210101210101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2aFe0 11d0 1iO0 11A0 1o00 11A0 Qrc0 6i00 WM0 1fA0 1cM0 1cM0 1cM0 kL0 Nc0 m10 WM0 1ao0 1cp0 dX0 jz0 Dd0 1io0 17c0 1fA0 1a00 1ehA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Bratislava|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2aFe0 11d0 1iO0 11A0 1o00 11A0 Qrc0 6i00 WM0 1fA0 1cM0 16M0 1lc0 1tA0 17A0 11c0 1io0 17c0 1io0 17c0 1fc0 1ao0 1bNc0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Brussels|WET CET CEST WEST|0 -10 -20 -10|0121212103030303030303030303030303030303030303030303212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2ehc0 3zX0 11c0 1iO0 11A0 1o00 11A0 my0 Ic0 1qM0 Rc0 1EM0 UM0 1u00 10o0 1io0 1io0 17c0 1a00 1fA0 1cM0 1cM0 1io0 17c0 1fA0 1a00 1io0 1a30 1io0 17c0 1fA0 1a00 1io0 17c0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Dc0 y00 5Wn0 WM0 1fA0 1cM0 16M0 1iM0 16M0 1C00 Uo0 1eeo0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Bucharest|BMT EET EEST|-1I.o -20 -30|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1xApI.o 20LI.o RA0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1Axc0 On0 1fA0 1a10 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cK0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cL0 1cN0 1cL0 1fB0 1nX0 11E0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Budapest|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2aFe0 11d0 1iO0 11A0 1ip0 17b0 1op0 1tb0 Q2m0 3Ne0 WM0 1fA0 1cM0 1cM0 1oJ0 1dc0 1030 1fA0 1cM0 1cM0 1cM0 1cM0 1fA0 1a00 1iM0 1fA0 8Ha0 Rb0 1wN0 Rb0 1BB0 Lz0 1C20 LB0 SNX0 1a10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Busingen|CET CEST|-10 -20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-19Lc0 11A0 1o00 11A0 1xG10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Chisinau|CMT BMT EET EEST CEST CET MSK MSD|-1T -1I.o -20 -30 -20 -10 -30 -40|0123232323232323232345454676767676767676767623232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-26jdT wGMa.A 20LI.o RA0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 27A0 2en0 39g0 WM0 1fA0 1cM0 V90 1t7z0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1ty0 2bD0 1cM0 1cK0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1nX0 11E0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Copenhagen|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2azC0 Tz0 VuO0 60q0 WM0 1fA0 1cM0 1cM0 1cM0 S00 1HA0 Nc0 1C00 Dc0 1Nc0 Ao0 1h5A0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Gibraltar|GMT BST BDST CET CEST|0 -10 -20 -10 -20|010101010101010101010101010101010101010101010101012121212121010121010101010101010101034343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|-2axa0 Rc0 1fA0 14M0 1fc0 1g00 1co0 1dc0 1co0 1oo0 1400 1dc0 19A0 1io0 1io0 WM0 1o00 14o0 1o00 17c0 1io0 17c0 1fA0 1a00 1lc0 17c0 1io0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1cM0 1io0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1a00 1io0 1qM0 Dc0 2Rz0 Dc0 1zc0 Oo0 1zc0 Rc0 1wo0 17c0 1iM0 FA0 xB0 1fA0 1a00 14o0 bb0 LA0 xB0 Rc0 1wo0 11A0 1o00 17c0 1fA0 1a00 1fA0 1cM0 1fA0 1a00 17c0 1fA0 1a00 1io0 17c0 1lc0 17c0 1fA0 10Jz0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Helsinki|HMT EET EEST|-1D.N -20 -30|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1WuND.N OULD.N 1dA0 1xGq0 1cM0 1cM0 1cM0 1cN0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Kaliningrad|CET CEST CET CEST MSK MSD EEST EET FET|-10 -20 -20 -30 -30 -40 -30 -20 -30|0101010101010232454545454545454545454676767676767676767676767676767676767676787|-2aFe0 11d0 1iO0 11A0 1o00 11A0 Qrc0 6i00 WM0 1fA0 1cM0 1cM0 Am0 Lb0 1en0 op0 1pNz0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 1cJ0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0","Europe/Kiev|KMT EET MSK CEST CET MSD EEST|-22.4 -20 -30 -20 -10 -40 -30|0123434252525252525252525256161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161|-1Pc22.4 eUo2.4 rnz0 2Hg0 WM0 1fA0 da0 1v4m0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 Db0 3220 1cK0 1cL0 1cN0 1cL0 1cN0 1cL0 1cQ0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Lisbon|LMT WET WEST WEMT CET CEST|A.J 0 -10 -20 -10 -20|012121212121212121212121212121212121212121212321232123212321212121212121212121212121212121212121214121212121212121212121212121212124545454212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2ldXn.f aPWn.f Sp0 LX0 1vc0 Tc0 1uM0 SM0 1vc0 Tc0 1vc0 SM0 1vc0 6600 1co0 3E00 17c0 1fA0 1a00 1io0 1a00 1io0 17c0 3I00 17c0 1cM0 1cM0 3Fc0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Dc0 1tA0 1cM0 1dc0 1400 gL0 IM0 s10 U00 dX0 Rc0 pd0 Rc0 gL0 Oo0 pd0 Rc0 gL0 Oo0 pd0 14o0 1cM0 1cP0 1cM0 1cM0 1cM0 1cM0 1cM0 3Co0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 pvy0 1cM0 1cM0 1fA0 1cM0 1cM0 1cN0 1cL0 1cN0 1cM0 1cM0 1cM0 1cM0 1cN0 1cL0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Luxembourg|LMT CET CEST WET WEST WEST WET|-o.A -10 -20 0 -10 -20 -10|0121212134343434343434343434343434343434343434343434565651212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2DG0o.A t6mo.A TB0 1nX0 Up0 1o20 11A0 rW0 CM0 1qP0 R90 1EO0 UK0 1u20 10m0 1ip0 1in0 17e0 19W0 1fB0 1db0 1cp0 1in0 17d0 1fz0 1a10 1in0 1a10 1in0 17f0 1fA0 1a00 1io0 17c0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Dc0 vA0 60L0 WM0 1fA0 1cM0 17c0 1io0 16M0 1C00 Uo0 1eeo0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Madrid|WET WEST WEMT CET CEST|0 -10 -20 -10 -20|01010101010101010101010121212121234343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|-28dd0 11A0 1go0 19A0 1co0 1dA0 b1A0 18o0 3I00 17c0 1fA0 1a00 1io0 1a00 1io0 17c0 iyo0 Rc0 18o0 1hc0 1io0 1a00 14o0 5aL0 MM0 1vc0 17A0 1i00 1bc0 1eo0 17d0 1in0 17A0 6hA0 10N0 XIL0 1a10 1in0 17d0 19X0 1cN0 1fz0 1a10 1fX0 1cp0 1cO0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Malta|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2as10 M00 1cM0 1cM0 14o0 1o00 WM0 1qM0 17c0 1cM0 M3A0 5M20 WM0 1fA0 1cM0 1cM0 1cM0 16m0 1de0 1lc0 14m0 1lc0 WO0 1qM0 GTW0 On0 1C10 Lz0 1C10 Lz0 1EN0 Lz0 1C10 Lz0 1zd0 Oo0 1C00 On0 1cp0 1cM0 1lA0 Xc0 1qq0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1iN0 19z0 1fB0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Minsk|MMT EET MSK CEST CET MSD EEST FET|-1O -20 -30 -20 -10 -40 -30 -30|012343432525252525252525252616161616161616161616161616161616161616172|-1Pc1O eUnO qNX0 3gQ0 WM0 1fA0 1cM0 Al0 1tsn0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 3Fc0 1cN0 1cK0 1cM0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hy0","Europe/Monaco|PMT WET WEST WEMT CET CEST|-9.l 0 -10 -20 -10 -20|01212121212121212121212121212121212121212121212121232323232345454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454|-2nco9.l cNb9.l HA0 19A0 1iM0 11c0 1oo0 Wo0 1rc0 QM0 1EM0 UM0 1u00 10o0 1io0 1wo0 Rc0 1a00 1fA0 1cM0 1cM0 1io0 17c0 1fA0 1a00 1io0 1a00 1io0 17c0 1fA0 1a00 1io0 17c0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Df0 2RV0 11z0 11B0 1ze0 WM0 1fA0 1cM0 1fa0 1aq0 16M0 1ekn0 1cL0 1fC0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Moscow|MMT MMT MST MDST MSD MSK MSM EET EEST MSK|-2u.h -2v.j -3v.j -4v.j -40 -30 -50 -20 -30 -40|012132345464575454545454545454545458754545454545454545454545454545454545454595|-2ag2u.h 2pyW.W 1bA0 11X0 GN0 1Hb0 c20 imv.j 3DA0 dz0 15A0 c10 2q10 iM10 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0","Europe/Paris|PMT WET WEST CEST CET WEMT|-9.l 0 -10 -20 -10 -20|0121212121212121212121212121212121212121212121212123434352543434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434|-2nco8.l cNb8.l HA0 19A0 1iM0 11c0 1oo0 Wo0 1rc0 QM0 1EM0 UM0 1u00 10o0 1io0 1wo0 Rc0 1a00 1fA0 1cM0 1cM0 1io0 17c0 1fA0 1a00 1io0 1a00 1io0 17c0 1fA0 1a00 1io0 17c0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Df0 Ik0 5M30 WM0 1fA0 1cM0 Vx0 hB0 1aq0 16M0 1ekn0 1cL0 1fC0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Riga|RMT LST EET MSK CEST CET MSD EEST|-1A.y -2A.y -20 -30 -20 -10 -40 -30|010102345454536363636363636363727272727272727272727272727272727272727272727272727272727272727272727272727272727272727272727272|-25TzA.y 11A0 1iM0 ko0 gWm0 yDXA.y 2bX0 3fE0 WM0 1fA0 1cM0 1cM0 4m0 1sLy0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 1o00 11A0 1o00 11A0 1qM0 3oo0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Rome|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2as10 M00 1cM0 1cM0 14o0 1o00 WM0 1qM0 17c0 1cM0 M3A0 5M20 WM0 1fA0 1cM0 16K0 1iO0 16m0 1de0 1lc0 14m0 1lc0 WO0 1qM0 GTW0 On0 1C10 Lz0 1C10 Lz0 1EN0 Lz0 1C10 Lz0 1zd0 Oo0 1C00 On0 1C10 Lz0 1zd0 On0 1C10 LA0 1C00 LA0 1zc0 Oo0 1C00 Oo0 1zc0 Oo0 1fC0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Samara|LMT SAMT SAMT KUYT KUYST MSD MSK EEST KUYT SAMST SAMST|-3k.k -30 -40 -40 -50 -40 -30 -30 -30 -50 -40|012343434343434343435656782929292929292929292929292929292929292a12|-22WNk.k qHak.k bcn0 1Qqo0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cN0 8o0 14j0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qN0 WM0","Europe/Simferopol|SMT EET MSK CEST CET MSD EEST MSK|-2g -20 -30 -20 -10 -40 -30 -40|012343432525252525252525252161616525252616161616161616161616161616161616172|-1Pc2g eUog rEn0 2qs0 WM0 1fA0 1cM0 3V0 1u0L0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1Q00 4eL0 1cL0 1cN0 1cL0 1cN0 dX0 WL0 1cN0 1cL0 1fB0 1o30 11B0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11z0 1nW0","Europe/Sofia|EET CET CEST EEST|-20 -10 -20 -30|01212103030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030|-168L0 WM0 1fA0 1cM0 1cM0 1cN0 1mKH0 1dd0 1fb0 1ap0 1fb0 1a20 1fy0 1a30 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cK0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1nX0 11E0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Stockholm|CET CEST|-10 -20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2azC0 TB0 2yDe0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Tallinn|TMT CET CEST EET MSK MSD EEST|-1D -10 -20 -20 -30 -40 -30|012103421212454545454545454546363636363636363636363636363636363636363636363636363636363636363636363636363636363636363636363|-26oND teD 11A0 1Ta0 4rXl KSLD 2FX0 2Jg0 WM0 1fA0 1cM0 18J0 1sTX0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o10 11A0 1qM0 5QM0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Tirane|LMT CET CEST|-1j.k -10 -20|01212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2glBj.k 14pcj.k 5LC0 WM0 4M0 1fCK0 10n0 1op0 11z0 1pd0 11z0 1qN0 WL0 1qp0 Xb0 1qp0 Xb0 1qp0 11z0 1lB0 11z0 1qN0 11z0 1iN0 16n0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Uzhgorod|CET CEST MSK MSD EET EEST|-10 -20 -30 -40 -20 -30|010101023232323232323232320454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454|-1cqL0 6i00 WM0 1fA0 1cM0 1ml0 1Cp0 1r3W0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1Q00 1Nf0 2pw0 1cL0 1cN0 1cL0 1cN0 1cL0 1cQ0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Vienna|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2aFe0 11d0 1iO0 11A0 1o00 11A0 3KM0 14o0 LA00 6i00 WM0 1fA0 1cM0 1cM0 1cM0 400 2qM0 1a00 1cM0 1cM0 1io0 17c0 1gHa0 19X0 1cP0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Vilnius|WMT KMT CET EET MSK CEST MSD EEST|-1o -1z.A -10 -20 -30 -20 -40 -30|012324525254646464646464646464647373737373737352537373737373737373737373737373737373737373737373737373737373737373737373|-293do 6ILM.o 1Ooz.A zz0 Mfd0 29W0 3is0 WM0 1fA0 1cM0 LV0 1tgL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11B0 1o00 11A0 1qM0 8io0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Volgograd|LMT TSAT STAT STAT VOLT VOLST VOLST VOLT MSD MSK MSK|-2V.E -30 -30 -40 -40 -50 -40 -30 -40 -30 -40|0123454545454545454546767489898989898989898989898989898989898989a9|-21IqV.E cLXV.E cEM0 1gqn0 Lco0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 2pz0 1cJ0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0","Europe/Warsaw|WMT CET CEST EET EEST|-1o -10 -20 -20 -30|012121234312121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2ctdo 1LXo 11d0 1iO0 11A0 1o00 11A0 1on0 11A0 6zy0 HWP0 5IM0 WM0 1fA0 1cM0 1dz0 1mL0 1en0 15B0 1aq0 1nA0 11A0 1io0 17c0 1fA0 1a00 iDX0 LA0 1cM0 1cM0 1C00 Oo0 1cM0 1cM0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1C00 LA0 uso0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Zaporozhye|CUT EET MSK CEST CET MSD EEST|-2k -20 -30 -20 -10 -40 -30|01234342525252525252525252526161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161|-1Pc2k eUok rdb0 2RE0 WM0 1fA0 8m0 1v9a0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cK0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cQ0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","HST|HST|a0|0|","Indian/Chagos|LMT IOT IOT|-4N.E -50 -60|012|-2xosN.E 3AGLN.E","Indian/Christmas|CXT|-70|0|","Indian/Cocos|CCT|-6u|0|","Indian/Kerguelen|zzz TFT|0 -50|01|-MG00","Indian/Mahe|LMT SCT|-3F.M -40|01|-2yO3F.M","Indian/Maldives|MMT MVT|-4S -50|01|-olgS","Indian/Mauritius|LMT MUT MUST|-3O -40 -50|012121|-2xorO 34unO 14L0 12kr0 11z0","Indian/Reunion|LMT RET|-3F.Q -40|01|-2mDDF.Q","Kwajalein|MHT KWAT MHT|-b0 c0 -c0|012|-AX0 W9X0","MET|MET MEST|-10 -20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2aFe0 11d0 1iO0 11A0 1o00 11A0 Qrc0 6i00 WM0 1fA0 1cM0 1cM0 1cM0 16M0 1gMM0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","MST|MST|70|0|","MST7MDT|MST MDT MWT MPT|70 60 60 60|010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261r0 1nX0 11B0 1nX0 SgN0 8x20 ix0 QwN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","NZ-CHAT|CHAST CHAST CHADT|-cf -cJ -dJ|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212|-WqAf 1adef IM0 1C00 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1qM0 14o0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1io0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","PST8PDT|PST PDT PWT PPT|80 70 70 70|010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261q0 1nX0 11B0 1nX0 SgN0 8x10 iy0 QwN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","Pacific/Apia|LMT WSST SST SDT WSDT WSST|bq.U bu b0 a0 -e0 -d0|01232345454545454545454545454545454545454545454545454545454|-2nDMx.4 1yW03.4 2rRbu 1ff0 1a00 CI0 AQ0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Pacific/Bougainville|PGT JST BST|-a0 -90 -b0|0102|-16Wy0 7CN0 2MQp0","Pacific/Chuuk|CHUT|-a0|0|","Pacific/Efate|LMT VUT VUST|-bd.g -b0 -c0|0121212121212121212121|-2l9nd.g 2Szcd.g 1cL0 1oN0 10L0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 Lz0 1Nd0 An0","Pacific/Enderbury|PHOT PHOT PHOT|c0 b0 -d0|012|nIc0 B8n0","Pacific/Fakaofo|TKT TKT|b0 -d0|01|1Gfn0","Pacific/Fiji|LMT FJT FJST|-bT.I -c0 -d0|012121212121212121212121212121212121212121212121212121212121212|-2bUzT.I 3m8NT.I LA0 1EM0 IM0 nJc0 LA0 1o00 Rc0 1wo0 Ao0 1Nc0 Ao0 1Q00 xz0 1SN0 uM0 1SM0 xA0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1SM0 xA0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1SM0 xA0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1VA0 uM0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1SM0","Pacific/Funafuti|TVT|-c0|0|","Pacific/Galapagos|LMT ECT GALT|5W.o 50 60|012|-1yVS1.A 2dTz1.A","Pacific/Gambier|LMT GAMT|8X.M 90|01|-2jof0.c","Pacific/Guadalcanal|LMT SBT|-aD.M -b0|01|-2joyD.M","Pacific/Guam|GST ChST|-a0 -a0|01|1fpq0","Pacific/Honolulu|HST HDT HST|au 9u a0|010102|-1thLu 8x0 lef0 8Pz0 46p0","Pacific/Kiritimati|LINT LINT LINT|aE a0 -e0|012|nIaE B8nk","Pacific/Kosrae|KOST KOST|-b0 -c0|010|-AX0 1bdz0","Pacific/Majuro|MHT MHT|-b0 -c0|01|-AX0","Pacific/Marquesas|LMT MART|9i 9u|01|-2joeG","Pacific/Midway|LMT NST BST SST|bm.M b0 b0 b0|0123|-2nDMB.c 2gVzB.c EyM0","Pacific/Nauru|LMT NRT JST NRT|-b7.E -bu -90 -c0|01213|-1Xdn7.E PvzB.E 5RCu 1ouJu","Pacific/Niue|NUT NUT NUT|bk bu b0|012|-KfME 17y0a","Pacific/Norfolk|NMT NFT|-bc -bu|01|-Kgbc","Pacific/Noumea|LMT NCT NCST|-b5.M -b0 -c0|01212121|-2l9n5.M 2EqM5.M xX0 1PB0 yn0 HeP0 Ao0","Pacific/Palau|PWT|-90|0|","Pacific/Pitcairn|PNT PST|8u 80|01|18Vku","Pacific/Pohnpei|PONT|-b0|0|","Pacific/Port_Moresby|PGT|-a0|0|","Pacific/Rarotonga|CKT CKHST CKT|au 9u a0|012121212121212121212121212|lyWu IL0 1zcu Onu 1zcu Onu 1zcu Rbu 1zcu Onu 1zcu Onu 1zcu Onu 1zcu Onu 1zcu Onu 1zcu Rbu 1zcu Onu 1zcu Onu 1zcu Onu","Pacific/Tahiti|LMT TAHT|9W.g a0|01|-2joe1.I","Pacific/Tarawa|GILT|-c0|0|","Pacific/Tongatapu|TOT TOT TOST|-ck -d0 -e0|01212121|-1aB0k 2n5dk 15A0 1wo0 xz0 1Q10 xz0","Pacific/Wake|WAKT|-c0|0|","Pacific/Wallis|WFT|-c0|0|","WET|WET WEST|0 -10|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDB0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00"],links:["Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Sao_Tome","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|Atlantic/St_Helena","Africa/Addis_Ababa|Africa/Asmara","Africa/Addis_Ababa|Africa/Asmera","Africa/Addis_Ababa|Africa/Dar_es_Salaam","Africa/Addis_Ababa|Africa/Djibouti","Africa/Addis_Ababa|Africa/Kampala","Africa/Addis_Ababa|Africa/Mogadishu","Africa/Addis_Ababa|Africa/Nairobi","Africa/Addis_Ababa|Indian/Antananarivo","Africa/Addis_Ababa|Indian/Comoro","Africa/Addis_Ababa|Indian/Mayotte","Africa/Bangui|Africa/Brazzaville","Africa/Bangui|Africa/Douala","Africa/Bangui|Africa/Kinshasa","Africa/Bangui|Africa/Lagos","Africa/Bangui|Africa/Libreville","Africa/Bangui|Africa/Luanda","Africa/Bangui|Africa/Malabo","Africa/Bangui|Africa/Niamey","Africa/Bangui|Africa/Porto-Novo","Africa/Blantyre|Africa/Bujumbura","Africa/Blantyre|Africa/Gaborone","Africa/Blantyre|Africa/Harare","Africa/Blantyre|Africa/Kigali","Africa/Blantyre|Africa/Lubumbashi","Africa/Blantyre|Africa/Lusaka","Africa/Blantyre|Africa/Maputo","Africa/Cairo|Egypt","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Juba|Africa/Khartoum","Africa/Tripoli|Libya","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|US/Alaska","America/Anguilla|America/Antigua","America/Anguilla|America/Dominica","America/Anguilla|America/Grenada","America/Anguilla|America/Guadeloupe","America/Anguilla|America/Marigot","America/Anguilla|America/Montserrat","America/Anguilla|America/Port_of_Spain","America/Anguilla|America/St_Barthelemy","America/Anguilla|America/St_Kitts","America/Anguilla|America/St_Lucia","America/Anguilla|America/St_Thomas","America/Anguilla|America/St_Vincent","America/Anguilla|America/Tortola","America/Anguilla|America/Virgin","America/Argentina/Buenos_Aires|America/Buenos_Aires","America/Argentina/Catamarca|America/Argentina/ComodRivadavia","America/Argentina/Catamarca|America/Catamarca","America/Argentina/Cordoba|America/Cordoba","America/Argentina/Cordoba|America/Rosario","America/Argentina/Jujuy|America/Jujuy","America/Argentina/Mendoza|America/Mendoza","America/Aruba|America/Curacao","America/Aruba|America/Kralendijk","America/Aruba|America/Lower_Princes","America/Atikokan|America/Coral_Harbour","America/Cayman|America/Panama","America/Chicago|US/Central","America/Denver|America/Shiprock","America/Denver|Navajo","America/Denver|US/Mountain","America/Detroit|US/Michigan","America/Edmonton|Canada/Mountain","America/Ensenada|America/Tijuana","America/Ensenada|Mexico/BajaNorte","America/Fort_Wayne|America/Indiana/Indianapolis","America/Fort_Wayne|America/Indianapolis","America/Fort_Wayne|US/East-Indiana","America/Halifax|Canada/Atlantic","America/Havana|Cuba","America/Indiana/Knox|America/Knox_IN","America/Indiana/Knox|US/Indiana-Starke","America/Jamaica|Jamaica","America/Kentucky/Louisville|America/Louisville","America/Los_Angeles|US/Pacific","America/Los_Angeles|US/Pacific-New","America/Manaus|Brazil/West","America/Mazatlan|Mexico/BajaSur","America/Mexico_City|Mexico/General","America/Montreal|America/Toronto","America/Montreal|Canada/Eastern","America/New_York|US/Eastern","America/Noronha|Brazil/DeNoronha","America/Phoenix|US/Arizona","America/Porto_Acre|America/Rio_Branco","America/Porto_Acre|Brazil/Acre","America/Regina|Canada/East-Saskatchewan","America/Regina|Canada/Saskatchewan","America/Santiago|Chile/Continental","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","America/Vancouver|Canada/Pacific","America/Whitehorse|Canada/Yukon","America/Winnipeg|Canada/Central","Antarctica/McMurdo|Antarctica/South_Pole","Antarctica/McMurdo|NZ","Antarctica/McMurdo|Pacific/Auckland","Arctic/Longyearbyen|Atlantic/Jan_Mayen","Arctic/Longyearbyen|Europe/Oslo","Asia/Aden|Asia/Kuwait","Asia/Aden|Asia/Riyadh","Asia/Ashgabat|Asia/Ashkhabad","Asia/Bahrain|Asia/Qatar","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Vientiane","Asia/Calcutta|Asia/Kolkata","Asia/Chongqing|Asia/Chungking","Asia/Chongqing|Asia/Harbin","Asia/Chongqing|Asia/Shanghai","Asia/Chongqing|PRC","Asia/Dacca|Asia/Dhaka","Asia/Dubai|Asia/Muscat","Asia/Ho_Chi_Minh|Asia/Saigon","Asia/Hong_Kong|Hongkong","Asia/Istanbul|Europe/Istanbul","Asia/Istanbul|Turkey","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kashgar|Asia/Urumqi","Asia/Kathmandu|Asia/Katmandu","Asia/Macao|Asia/Macau","Asia/Makassar|Asia/Ujung_Pandang","Asia/Nicosia|Europe/Nicosia","Asia/Seoul|ROK","Asia/Singapore|Singapore","Asia/Taipei|ROC","Asia/Tehran|Iran","Asia/Thimbu|Asia/Thimphu","Asia/Tokyo|Japan","Asia/Ulaanbaatar|Asia/Ulan_Bator","Atlantic/Faeroe|Atlantic/Faroe","Atlantic/Reykjavik|Iceland","Australia/ACT|Australia/Canberra","Australia/ACT|Australia/NSW","Australia/ACT|Australia/Sydney","Australia/Adelaide|Australia/South","Australia/Brisbane|Australia/Queensland","Australia/Broken_Hill|Australia/Yancowinna","Australia/Darwin|Australia/North","Australia/Hobart|Australia/Tasmania","Australia/LHI|Australia/Lord_Howe","Australia/Melbourne|Australia/Victoria","Australia/Perth|Australia/West","Chile/EasterIsland|Pacific/Easter","Eire|Europe/Dublin","Etc/GMT+0|Etc/GMT","Etc/GMT+0|Etc/GMT-0","Etc/GMT+0|Etc/GMT0","Etc/GMT+0|Etc/Greenwich","Etc/GMT+0|GMT","Etc/GMT+0|GMT+0","Etc/GMT+0|GMT-0","Etc/GMT+0|GMT0","Etc/GMT+0|Greenwich","Etc/UCT|UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Belfast|Europe/Guernsey","Europe/Belfast|Europe/Isle_of_Man","Europe/Belfast|Europe/Jersey","Europe/Belfast|Europe/London","Europe/Belfast|GB","Europe/Belfast|GB-Eire","Europe/Belgrade|Europe/Ljubljana","Europe/Belgrade|Europe/Podgorica","Europe/Belgrade|Europe/Sarajevo","Europe/Belgrade|Europe/Skopje","Europe/Belgrade|Europe/Zagreb","Europe/Bratislava|Europe/Prague","Europe/Busingen|Europe/Vaduz","Europe/Busingen|Europe/Zurich","Europe/Chisinau|Europe/Tiraspol","Europe/Helsinki|Europe/Mariehamn","Europe/Lisbon|Portugal","Europe/Moscow|W-SU","Europe/Rome|Europe/San_Marino","Europe/Rome|Europe/Vatican","Europe/Warsaw|Poland","Kwajalein|Pacific/Kwajalein","NZ-CHAT|Pacific/Chatham","Pacific/Chuuk|Pacific/Truk","Pacific/Chuuk|Pacific/Yap","Pacific/Guam|Pacific/Saipan","Pacific/Honolulu|Pacific/Johnston","Pacific/Honolulu|US/Hawaii","Pacific/Midway|Pacific/Pago_Pago","Pacific/Midway|Pacific/Samoa","Pacific/Midway|US/Samoa","Pacific/Pohnpei|Pacific/Ponape"]});return d}));;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.component.progressbar', location = 'aui.chunk.efea22b1bbd475f9ac62--22c4bd4dd7621926721a.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.component.progressbar"],{JeHW:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressBarEl=void 0;var r=l(a("+x/D")),n=a("QFBp"),i=l(a("4dFR")),u=a("Ioyv"),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a("bPPT")),o=l(a("KloK"));function l(e){return e&&e.__esModule?e:{default:e}}var d="aui-progress-indicator-after-update",c="aui-progress-indicator-before-update",v="transitionend webkitTransitionEnd";function f(e,t,a){var n=a.currentProgress,i=a.value,s=(0,r.default)(e),o=(0,r.default)(t);"number"==typeof i&&i<=1&&i>=0&&(o.trigger(c,[n,i]),s.one(v,function(){o.trigger(d,[n,i])}),function(e,t,a){(0,u.recomputeStyle)(e),e.css("width",100*a+"%"),t.attr("data-value",a)}(s,o,i))}function p(e){var t=(0,r.default)(e).first(),a=t.children(".aui-progress-indicator-value");t.removeAttr("data-value"),(0,u.recomputeStyle)(t),a.css("width","")}var m={indeterminate:!1,max:1,val:0};function g(e){return(0,n.isNumber)(e)&&(0,n.isFinite)(e)&&!(0,n.isNaN)(e)}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=parseFloat(e);return g(a)?a:Number(t)}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Number(parseFloat(e).toFixed(t))}function _(e){var t=e.val,a=function(e){return e>0?e:m.max}(e.max),r=function(e,t){return Math.max(0,Math.min(e,t))}(t,a),n=h(r/a,6);return{max:a,val:r,valAsFraction:n,valAsPercent:h(100*n,2)}}function x(e){var t=_(e._data),a=t.val,r=t.valAsFraction,n=t.max,i=e.querySelector(".aui-progress-indicator"),u=i.getAttribute("data-value");e.indeterminate?(i.removeAttribute("aria-valuenow"),p(i)):(i.setAttribute("aria-valuenow",a),i.setAttribute("aria-valuemax",n),f(i.querySelector(".aui-progress-indicator-value"),i,{currentProgress:u,value:r}))}function w(e,t){e._data.val=b(t.newValue,t.oldValue||m.val),x(e)}function y(e,t){e._data.max=b(t.newValue,t.oldValue||m.max),x(e)}var A=(0,i.default)("aui-progressbar",{template:function(e){e._data.max=b(e.getAttribute("max"),m.max),e._data.val=b(e.getAttribute("value"),m.val),e._data.indeterminate=e.hasAttribute("indeterminate");var t=_(e._data),a=t.val,r=t.max,n=t.valAsFraction,i=t.valAsPercent,u=e._data.indeterminate?"":'data-value="'+n+'"';e.innerHTML='<div class="aui-progress-indicator"\n         '+u+'\n         role="progressbar"\n         aria-valuemin="0"\n         aria-valuenow="'+a+'"\n         aria-valuemax="'+r+'"\n         tabindex="0"\n     >\n        <span class="aui-progress-indicator-value" style="width: '+i+'%"></span>\n    </div>'},attached:function(e){x(e)},attributes:{indeterminate:{created:function(e){e.indeterminate=!0},removed:function(e){e.indeterminate=!1}},value:{value:m.val,fallback:function(e,t){if(e._updating)return!1;w(e,t)}},max:{value:m.max,fallback:function(e,t){if(e._updating)return!1;y(e,t)}}},prototype:{get _data(){return this.__data||(this._data=(0,n.defaults)({},m))},set _data(e){return this.__data=e},get indeterminate(){return this._data.indeterminate},set indeterminate(e){this._data.indeterminate=!!e,x(this)},get value(){return _(this._data).val},set value(e){if(!g(e))return!1;var t={newValue:h(e,6)};this._updating=!0,this.setAttribute("value",t.newValue),this._updating=!1,w(this,t)},get max(){return _(this._data).max},set max(e){if(!g(e))return!1;var t={newValue:h(e,6)};this._updating=!0,this.setAttribute("max",t.newValue),this._updating=!1,y(this,t)}}}),P={update:s.fn(function(e,t){if("string"==typeof e){var a=document.getElementById(e);a&&(e=a)}var n=(0,r.default)(e).first(),i=n.children(".aui-progress-indicator-value"),u=n.attr("data-value"),s=!u,o=parseFloat(u)||0,l=u&&o===t;if(l&&(l=o===100*(parseFloat(i.get(0).style.width)||0)),!l)return s&&i.css("width",0),f(i,n,{currentProgress:o,value:t}),n},"AJS.progressBars.update",{sinceVersion:"7.7.0",removeInVersion:"9.0.0",extraInfo:"Use the <aui-progressbar> web component instead"}),setIndeterminate:s.fn(p,"AJS.progressBars.setIndeterminate",{sinceVersion:"7.7.0",removeInVersion:"9.0.0",extraInfo:"Use the <aui-progressbar> web component instead"})};(0,o.default)("progressBars",P),t.default=P,t.ProgressBarEl=A},NQOw:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressBarEl=t.progressBars=void 0;var r=a("JeHW");Object.defineProperty(t,"progressBars",{enumerable:!0,get:function(){return function(e){return e&&e.__esModule?e:{default:e}}(r).default}}),Object.defineProperty(t,"ProgressBarEl",{enumerable:!0,get:function(){return r.ProgressBarEl}}),a("FStl"),a("Q0fs"),a("Nb/K")},"Nb/K":function(e,t,a){}},[["NQOw","runtime","aui.splitchunk.vendors--52bf8654d5","aui.splitchunk.vendors--b47d4b691d","aui.splitchunk.vendors--9c48cc20a9","aui.splitchunk.172ffb6da7","aui.splitchunk.b0831cc7d0","aui.splitchunk.572a8bf5cd","aui.splitchunk.087aba7911","aui.splitchunk.fbd1a5ab27","aui.splitchunk.54d3f16c20","aui.splitchunk.e54c7c7304","aui.splitchunk.8659b532c1","aui.splitchunk.9c48cc20a9"]]]);
//# sourceMappingURL=aui.chunk.efea22b1bbd475f9ac62--22c4bd4dd7621926721a.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.component.expander', location = 'aui.chunk.8de3505c535ba3bcd956--07d0e4be166aa46a027e.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.component.expander"],{HTrG:function(e,t,r){},iFnW:function(e,t,r){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(r("+x/D"));var n=(0,a.default)(document),i=function(e){var t={};return t.$trigger=(0,a.default)(e.currentTarget),t.$content=n.find("#"+t.$trigger.attr("aria-controls")),t.triggerIsParent=0!==t.$content.parent().filter(t.$trigger).length,t.$shortContent=t.triggerIsParent?t.$trigger.find(".aui-expander-short-content"):null,t.height=t.$content.css("min-height"),t.isCollapsible=!1!==t.$trigger.data("collapsible"),t.replaceText=t.$trigger.attr("data-replace-text"),t.replaceSelector=t.$trigger.data("replace-selector"),t},o=function(e){if(e.replaceText){var t=e.replaceSelector?e.$trigger.find(e.replaceSelector):e.$trigger;e.$trigger.attr("data-replace-text",t.text()),t.text(e.replaceText)}},d={"aui-expander-invoke":function(e){var t=(0,a.default)(e.currentTarget),r=n.find("#"+t.attr("aria-controls")),i=!1!==t.data("collapsible");"true"===r.attr("aria-expanded")&&i?t.trigger("aui-expander-collapse"):t.trigger("aui-expander-expand")},"aui-expander-expand":function(e){var t=i(e);"true"!==t.$content.attr("aria-expanded")&&(t.$content.attr("aria-expanded","true"),t.$trigger.attr("aria-expanded","true"),t.$content.outerHeight()>0&&t.$content.attr("aria-hidden","false"),o(t),t.triggerIsParent&&t.$shortContent.hide(),t.$trigger.trigger("aui-expander-expanded"))},"aui-expander-collapse":function(e){var t=i(e);"true"===t.$content.attr("aria-expanded")&&(o(t),t.$content.attr("aria-expanded","false"),t.$trigger.attr("aria-expanded","false"),t.triggerIsParent&&t.$shortContent.show(),0===t.$content.outerHeight()&&t.$content.attr("aria-hidden","true"),t.$trigger.trigger("aui-expander-collapsed"))},"click.aui-expander":function(e){(0,a.default)(e.currentTarget).trigger("aui-expander-invoke",e.currentTarget)}};n.on(d,".aui-expander-trigger")},ufFX:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r("HTrG"),r("iFnW")}},[["ufFX","runtime","aui.splitchunk.172ffb6da7","aui.splitchunk.fbd1a5ab27"]]]);
//# sourceMappingURL=aui.chunk.8de3505c535ba3bcd956--07d0e4be166aa46a027e.js.map;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/js/util/string-utils.js' */
var StringUtils=(function(){function a(){}a.isEmpty=function(b){return b===null||b.length===0};a.isNotEmpty=function(b){return !a.isEmpty(b)};a.isBlank=function(d){var c;if(d==null||(c=d.length)===0){return true}for(var b=0;b<c;b++){if(d[b]!==""&&d[b]!==" "&&d[b]!=="\n"&&d[b]!=="\t"){return false}}return true};a.isNotBlank=function(b){return !a.isBlank(b)};a.clean=function(b){return b==null?a.EMPTY:b.trim()};a.trim=function(b){return b==null?null:b.trim()};a.trimToNull=function(c){var b=a.trim(c);return a.isEmpty(b)?null:b};a.trimToEmpty=function(b){return b==null?a.EMPTY:b.trim()};a.replace=function(i,j,d,h){if(h==null||typeof h==="undefined"){h=-1}if(a.isEmpty(i)||a.isEmpty(j)||d===null||h===0){return i}var b=0;var e=i.indexOf(j,b);if(e===a.INDEX_NOT_FOUND){return i}var f=j.length;var g=d.length-f;g=(g<0?0:g);g*=(h<0?16:(h>64?64:h));var c=new Array();while(e!==a.INDEX_NOT_FOUND){c.push(i.substring(b,e));c.push(d);b=e+f;if(--h===0){break}e=i.indexOf(j,b)}c.push(i.substring(b));return c.join("")};a.INDEX_NOT_FOUND=-1;a.EMPTY="";a.PAD_LIMIT=8192;return a}());var su=StringUtils;;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/js/report/url/report-url-queryparams.js' */
(function(d){RAVEN.namespace("RAVEN.Report.URLBar");RAVEN.Report.URLBar.Proxy=(function(){var h;function g(){var i=new b();return i}return{get:function(){if(!h){h=g()}return h}}})();var b=function(){this.startNewReport=function(g){a.call(this);this.currentQueryParamObj.selectedReportKey=g;return this};this.pushReportFilterQueryParam=function(h,g){this.currentQueryParamObj.reportFilter[h]=g;return this};this.removeReportFilterQueryParams=function(){this.currentQueryParamObj.reportFilter={};return this};this.getQueryParamValueFromUrlBar=function(g){return this.getQueryParamsFromUrlBar()[g]};this.saveQueryObjIntoUrlBar=function(){var g=d.param(f({selectedReportKey:this.currentQueryParamObj.selectedReportKey},{selectedProjectKey:this.currentQueryParamObj.selectedProjectKey},this.currentQueryParamObj.reportFilter));e(g)};this.getCurrentQueryParamsObject=function(){return this.currentQueryParamObj};this.getQueryParamsFromUrlBar=function(){var g=window.location.search;if(!g){return{}}else{if(g.indexOf("?")===0){g=g.substring(1)}}return d.deparam(g,false)};this.replaceFieldsReportURLBarWithQuery=function(g){var k=window.location.search;if(!k){return{}}else{if(k.indexOf("?")===0){k=k.substring(1)}}const h=d.deparam(k,false);const i=Object.keys(h);i.forEach(function(l){if(l&&l.indexOf(RAVEN.common.components.FiltersPicker.QUERY_PARAM_PREFIX)===0){delete h[l]}});var j=d.param(h);if(g){j+="&"+g}e(j)};this.currentQueryParamObj=c(this.getQueryParamsFromUrlBar())};function c(g){if(g){return{selectedReportKey:g.selectedReportKey,selectedProjectKey:g.selectedProjectKey,reportFilter:_.omit(g,["selectedProjectKey","selectedReportKey"])}}return{}}function a(){var g=this.currentQueryParamObj.selectedProjectKey;this.currentQueryParamObj={selectedReportKey:"",selectedProjectKey:g,reportFilter:{}}}function f(g,i,j){var h={};if(g&&g.selectedReportKey&&!StringUtils.isBlank(g.selectedReportKey+"")){h=_.extend(h,g)}if(i&&i.selectedProjectKey&&!StringUtils.isBlank(i.selectedProjectKey+"")){h=_.extend(h,i)}if(j){h=_.extend(h,j)}return h}function e(g){var h=!StringUtils.isBlank(g)?("?"+g):"";if(history.replaceState){var i=window.location.protocol+"//"+window.location.host+window.location.pathname+h;window.history.replaceState({path:i},"",i)}else{console.error("History Replace State API not available on this browser")}}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/js/report/report-view.js' */
(function(g){var j=null;var d=null;var e=null;var a=RAVEN.Report.URLBar.Proxy.get();function h(s,p,r){if(r==JIRA.CONTENT_ADDED_REASON.pageLoad||r==JIRA.CONTENT_ADDED_REASON.panelRefreshed){var q=g("#report-wrapper");if(q.length>0&&!q.attr("data-initialized")){f()}}}var c="100%";var i=null;function o(){if(g(".header-filter").attr("data-initialized")==="false"){i=g(".header-filter").offset().top;g(".header-filter").attr("data-initialized",true)}else{var s=g(".header-filter");var r=g("#enable-how-to-read-msg");const q=s.outerHeight(true)-s.outerHeight(false);if(g(window).scrollTop()+q>i){if(g("#tmp_filler_div").length===0){const p=s.outerHeight(false);g("<div id='tmp_filler_div'/>").insertBefore(s);g("#tmp_filler_div").css("height",p+"px")}if(c===null){c=s.width()}s.css({position:"fixed",top:"0px","z-index":"99",width:c,"padding-bottom":"12px","background-color":"#FFF",border:"#cccccc 1px solid"});r.hide()}else{g("#tmp_filler_div").remove();s.css({position:"relative",top:"auto",border:"none",width:"auto"});c=s.width();if(g("#raven-notifications-icon").css("display")!=="none"){r.show()}}}}g(window).scroll(o).load(o);function f(){var p=a.getQueryParamValueFromUrlBar("selectedReportKey");d=g("#selected-report-key").val();if(!p||p!==d){m(d)}k(d);l()}function l(){g(".aui-nav-selected").removeClass("aui-nav-selected");g('a[data-link-id="com.xpandit.plugins.xray:raven.sidebar.reports"]').parent().addClass("aui-nav-selected");g("#report-wrapper").attr("data-initialized","true");g("#raven-requirement-coverage-parameters").attr("data-initialized","true");b()}function b(){var q=g("#report-wrapper");q.css("height","auto");q.empty();var p=g("#requiresExperimentalDialog2-val").val()=="true";if(e){e.destroy();e=null;g("#raven-report-common-to-csv-link").off("click.ravenTraceability")}n();if(d&&d=="xray-report-overall-requirement-coverage-chart"){e=new RAVEN.Report.OverallRequirementCoverageChartReportView();e.render(p)}else{if(d&&d=="xray-report-historical-requirement-coverage-chart"){e=new RAVEN.Report.HistoricalRequirementCoverageChartReportView();e.render(p)}else{if(d&&d=="xray-report-traceability-matrix"){e=new RAVEN.Report.TraceabilityReportView();e.render(p);g("#raven-export-report-button-wrapper").show()}else{if(d&&d=="xray-report-testplan"){e=new RAVEN.Report.TestPlanReportView();e.render(p);g("#raven-export-report-button-wrapper").show()}else{if(d&&d=="xray-report-testexecution"){e=new RAVEN.Report.TestExecutionReportView();g("#raven-export-report-button-wrapper").show();e.render(p)}else{if(d&&d=="xray-report-testruns"){e=new RAVEN.Report.TestRunsReportView();g("#raven-export-report-button-wrapper").show();e.render(p)}else{console.error("Chart with key not found: "+d)}}}}}}}function n(){g("#raven-export-report-button-wrapper").hide()}g(document).on("click.nav.overall.raven","#raven-overall-requirement-coverage-report-opt",function(p){g("#raven-overall-requirement-coverage-report-opt").addClass("hidden");g("#raven-overall-requirement-coverage-report-opt a").addClass("disabled").attr("aria-disabled","true");g("#raven-historical-requirement-coverage-report-opt").removeClass("hidden");g("#raven-historical-requirement-coverage-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-traceability-report-opt").removeClass("hidden");g("#raven-traceability-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-report-testplan-opt").removeClass("hidden");g("#raven-report-testplan-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-testexecution-report-opt").removeClass("hidden");g("#raven-testexecution-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-run-report-opt").removeClass("hidden");g("#raven-run-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");d="xray-report-overall-requirement-coverage-chart";k(d);m(d);l();return false});g(document).on("click.nav.overall.raven","#raven-historical-requirement-coverage-report-opt",function(p){g("#raven-overall-requirement-coverage-report-opt").removeClass("hidden");g("#raven-overall-requirement-coverage-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-historical-requirement-coverage-report-opt").addClass("hidden");g("#raven-historical-requirement-coverage-report-opt a").addClass("disabled").attr("aria-disabled","true");g("#raven-traceability-report-opt").removeClass("hidden");g("#raven-traceability-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-report-testplan-opt").removeClass("hidden");g("#raven-report-testplan-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-testexecution-report-opt").removeClass("hidden");g("#raven-testexecution-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-run-report-opt").removeClass("hidden");g("#raven-run-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");d="xray-report-historical-requirement-coverage-chart";k(d);m(d);l();return false});g(document).on("click.nav.overall.raven","#raven-traceability-report-opt",function(p){g("#raven-overall-requirement-coverage-report-opt").removeClass("hidden");g("#raven-overall-requirement-coverage-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-historical-requirement-coverage-report-opt").removeClass("hidden");g("#raven-historical-requirement-coverage-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-traceability-report-opt").addClass("hidden");g("#raven-traceability-report-opt a").addClass("disabled").attr("aria-disabled","true");g("#raven-report-testplan-opt").removeClass("hidden");g("#raven-report-testplan-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-testexecution-report-opt").removeClass("hidden");g("#raven-testexecution-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-run-report-opt").removeClass("hidden");g("#raven-run-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");d="xray-report-traceability-matrix";k(d);m(d);l();return false});g(document).on("click.nav.historic.raven","#raven-report-testplan-opt",function(p){g("#raven-overall-requirement-coverage-report-opt").removeClass("hidden");g("#raven-overall-requirement-coverage-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-historical-requirement-coverage-report-opt").removeClass("hidden");g("#raven-historical-requirement-coverage-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-traceability-report-opt").removeClass("hidden");g("#raven-traceability-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-report-testplan-opt").addClass("hidden");g("#raven-report-testplan-opt a").addClass("disabled").attr("aria-disabled","true");g("#raven-run-report-opt").removeClass("hidden");g("#raven-run-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-testexecution-report-opt").removeClass("hidden");g("#raven-testexecution-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");d="xray-report-testplan";k(d);m(d);l();return false});g(document).on("click.nav.historic.raven","#raven-testexecution-report-opt",function(p){g("#raven-overall-requirement-coverage-report-opt").removeClass("hidden");g("#raven-overall-requirement-coverage-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-historical-requirement-coverage-report-opt").removeClass("hidden");g("#raven-historical-requirement-coverage-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-traceability-report-opt").removeClass("hidden");g("#raven-traceability-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-report-testplan-opt").removeClass("hidden");g("#raven-report-testplan-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-run-report-opt").removeClass("hidden");g("#raven-run-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-testexecution-report-opt").addClass("hidden");g("#raven-testexecution-report-opt a").addClass("disabled").attr("aria-disabled","true");d="xray-report-testexecution";k(d);m(d);l();return false});g(document).on("click.nav.historic.raven","#raven-run-report-opt",function(p){g("#raven-overall-requirement-coverage-report-opt").removeClass("hidden");g("#raven-overall-requirement-coverage-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-historical-requirement-coverage-report-opt").removeClass("hidden");g("#raven-historical-requirement-coverage-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-traceability-report-opt").removeClass("hidden");g("#raven-traceability-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-report-testplan-opt").removeClass("hidden");g("#raven-report-testplan-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-testexecution-report-opt").removeClass("hidden");g("#raven-testexecution-report-opt a").removeClass("disabled aui-dropdown2-disabled").attr("aria-disabled","false");g("#raven-run-report-opt").addClass("hidden");g("#raven-run-report-opt a").addClass("disabled").attr("aria-disabled","true");d="xray-report-testruns";k(d);m(d);l();return false});function m(p){a.startNewReport(p)}function k(q){var p;switch(q){case"xray-report-overall-requirement-coverage-chart":p="Overall Requirement Coverage Report";break;case"xray-report-historical-requirement-coverage-chart":p="Historical Requirement Coverage Report";break;case"xray-report-traceability-matrix":p="Traceability Report";break;case"xray-report-testplan":p="Test Plans Report";break;case"xray-report-testexecution":p="Test Executions Report";break;case"xray-report-testruns":p="Test Runs Report";break;default:}g("#raven-report-type").html(p)}JIRA.unbind(JIRA.Events.NEW_CONTENT_ADDED,h);JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,h)})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/js/report/report-common-helper.js' */
RAVEN.ReportsContants={SCOPE_VERSION_MODE:3,VERSION_NAME:"version",TESTPLAN_NAME:"testPlan",ENVIRONMENT_PICKER_DEFAULT_VALUE:"-1",VERSION_PICKER_DEFAULT_VALUE:"0"};function resetScopeValuesGeneric(a,c,b){if(a){if(isXrayEnterpriseEnabled()){a.setSelection(getVersionLatestExecutionOption())}else{a._setDescriptorWithValue(RAVEN.ReportsContants.VERSION_PICKER_DEFAULT_VALUE)}}if(c){c._setDescriptorWithValue(RAVEN.ReportsContants.ENVIRONMENT_PICKER_DEFAULT_VALUE)}if(b){b.clear()}}function getVersionLatestExecutionOption(){return new AJS.ItemDescriptor({value:"0",label:"None - latest execution",highlighted:true})}function closeDialogGeneric(b){var a=$(b);if(a.attr("open")==="open"){a.removeAttr("open")}else{document.querySelector(b).hide()}}function toggleScope(a){var c=$("#raven-report-scope-version");var b=$("#raven-report-scope-testplan");$(".scope-title.selected").removeClass("selected");$(a).addClass("selected");if($(a).data("mode")===RAVEN.ReportsContants.SCOPE_VERSION_MODE){b.hide();c.show()}else{b.show();c.hide()}}function getExecutionScope(){if($(".scope-title.selected").data("mode")===RAVEN.ReportsContants.SCOPE_VERSION_MODE){return RAVEN.ReportsContants.VERSION_NAME}else{return RAVEN.ReportsContants.TESTPLAN_NAME}}function renderScopeParametersGeneric(f,c,d,b){var e;if(f===RAVEN.ReportsContants.VERSION_NAME){e="Version"}else{if(f===RAVEN.ReportsContants.TESTPLAN_NAME){e="Test Plan"}else{console.error('Unsuported execution scope "'+f+'"');e="Version"}}var a="<b>"+"Scope"+": </b>"+AJS.escapeHTML(e);if(f===RAVEN.ReportsContants.VERSION_NAME){a+="; &nbsp;<b>"+"Version"+": </b>"+AJS.escapeHTML(c)}else{if(d){a+="; &nbsp;<b>"+"Test Plan"+": </b>";if(Array.isArray(d)){a+=AJS.escapeHTML(d.join(", "))}else{a+=AJS.escapeHTML(d)}}}a+="; &nbsp;<b>"+"Environment"+": </b>"+AJS.escapeHTML(b);$("#raven-scope-trigger").html(a)}function getEnvironmentNameGeneric(a,b){if(b&&b.getSelectedDescriptor()){return b.getSelectedDescriptor().properties}else{console.error("Environment Picker doesn't have a valid value");return null}}function getVersionGeneric(a){if(a&&a.getSelectedDescriptor()){return a.getSelectedDescriptor().properties}else{console.error("Version Picker doesn't have a valid value")}}function isXrayEnterpriseEnabled(){return $("#isXrayEnterprise").val()==="true"}function createVersionScopePicker(a){if(isXrayEnterpriseEnabled()){return createVersionScopePickerEnterprise(a)}return createVersionScopePickerNonEnterprise(a)}function createVersionScopePickerNonEnterprise(a){a.on("initialized",function(d,c){var b=$("body").data("version");if(!b||b.toString().charAt(0)==="5"){$("input",a.parent()).height("23px")}});return new AJS.SingleSelect({element:a,showDropdownButton:true,revertOnInvalid:true})}function createVersionScopePickerEnterprise(a){const b=AJS.contextPath()+"/rest/raven/1.0/searchVersion/forReport?limit=15";return new AJS.SingleSelect({element:a,revertOnInvalid:false,removeOnUnSelect:true,submitInputVal:false,noQueryNoRequest:false,itemAttrDisplayed:"label",maxInlineResultsDisplayed:15,ajaxOptions:{query:true,processData:true,data:{project:"project-"+$("#selected-project-id").val(),query:function(){const c=$("#raven-report-analysis-version-select").find(":selected").val();if(c==="0"){return""}const d=$("#raven-report-analysis-version-select-field").val();return d||""}},url:b,suggestionsHandler:null,formatResponse:function(d){const c=new AJS.GroupDescriptor({id:"raven-versions-default-group"});c.addItem(getVersionLatestExecutionOption());if(d&&Array.isArray(d.results)){const e=new AJS.GroupDescriptor({id:"raven-versions-opt-group"});d.results.filter(function(f){return !!f&&!!f.key}).forEach(function(f){var h=f.key.replace(/^(")/,"").replace(/(")$/,"");var g=new AJS.ItemDescriptor({value:f.id,label:h,title:h,highlighted:true});e.addItem(g)});return[c,e]}else{console.error("Error occurred while obtaining field: "+name,d)}return[c]}}})}function checkTestPlanKey(d,b){var c=b.getSelectedDescriptor();var a=d===RAVEN.ReportsContants.TESTPLAN_NAME&&c==null;if(a){$("#raven-testplan-key-required").show()}else{$("#raven-testplan-key-required").hide()}return !a}function disableExportReportButton(){var a=$("#export-report-comon");a.attr("aria-disabled","true");a.attr("title","Generate a report before exporting it.")}function enableExportReportButton(){var a=$("#export-report-comon");a.attr("aria-disabled","false");a.attr("title","Export Report")}function fixReportWrapperHeight(){var a=getElementOuterHeight($(window),true);var c=getElementOuterHeight($(".aui-header"),true);var i=getElementOuterHeight($("#header #websudo-banner"),true);var f=getElementOuterHeight($("#announcement-banner"),true);var b=getElementOuterHeight($("#raven-reports-header"),true);var e=getElementSurroundingHeight($(".header-filter"));var d=$("#report-wrapper");var h=getElementSurroundingHeight(d);var g=getElementOuterHeight($("#footer"),true);if(d.length>0){d.height(a-c-i-f-b-e-h-g)}}function getElementOuterHeight(b,a){if(b.length>0){return b.outerHeight(a)}return 0}function getElementSurroundingHeight(a){if(a.length>0){return a.outerHeight(true)-a.height()}return 0}function calculateValueForProgressBar(b,a){return a===0?0:b/a}function getGenericElementValue(a){return $(a).val()}function getGenericSelectValue(a){return $(a+" option:selected").val()}function getMultiSelectValues(b){const a=b.val();if(a){return a.join(",")}return null}function getWkfStatusValues(d,g){var b=$(d).val();if(b!=null){var e=b;var a=[];for(var c=0;c<e.length;c++){for(var f in g){if(e[c]==g[f]){a.push(f)}}}return a.join(",")}return""}function getCheckBoxValue(a){return $(a).is(":checked")}function parseStatusesToObject(a){var b={};if(a){a.split(",").forEach(function(c){b[c]=true})}return b}function redrawAjsSelect(a){if(a){setTimeout(function(){a.updateItemsIndent()},0)}}function initAssigneeFilterPicker(d){var c=d;if(c.data("aui-ss")){return}var a="/rest/api/1.0/users/picker";var b={showAvatar:true},f=c.data("inputValue");return new AJS.SingleSelect({element:c,submitInputVal:true,revertOnInvalid:true,showDropdownButton:!!c.data("show-dropdown-button"),errorMessage:AJS.format("There is no user \'\'{0}\'\'.","'{0}'"),ajaxOptions:{url:contextPath+a,query:true,data:b,formatResponse:function(h){var g=[];var e=new AJS.GroupDescriptor({weight:0});e.addItem(new AJS.ItemDescriptor({value:"-1",label:"All"}));g.push(e);jQuery(h).each(function(k,j){var l=new AJS.GroupDescriptor({weight:1,label:j.footer});jQuery(j.users).each(function(){l.addItem(new AJS.ItemDescriptor({value:this.name,label:this.displayName,html:this.html,icon:this.avatarUrl,allowDuplicate:false,highlighted:true}))});g.push(l)});return g}},inputText:f})}RAVEN.DEFAULT_ENVIRONMENTS={ALL_ENVIRONMENTS:"-1",EMPTY:"__NULL__",};function createEnvironmentSingleSelectPicker(a,b){return new AJS.SingleSelect({element:a,showDropdownButton:true,submitInputVal:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:contextPath+"/rest/api/1.0/labels/suggest?customFieldId="+getTestEnvironmentCfId(),formatResponse:function(d){var c=[];if(b==null||!b.includes(RAVEN.DEFAULT_ENVIRONMENTS.ALL_ENVIRONMENTS)){c.push(new AJS.ItemDescriptor({value:RAVEN.DEFAULT_ENVIRONMENTS.ALL_ENVIRONMENTS,label:"All Environments",icon:null,allowDuplicate:false,highlighted:true}))}if(b==null||!b.includes(RAVEN.DEFAULT_ENVIRONMENTS.EMPTY)){c.push(new AJS.ItemDescriptor({value:RAVEN.DEFAULT_ENVIRONMENTS.EMPTY,label:"Empty",icon:null,allowDuplicate:false,highlighted:true}))}if(d&&d.suggestions){var e=new AJS.GroupDescriptor({weight:0,label:"Available Environments"});$(d.suggestions).each(function(f,g){var h=new AJS.ItemDescriptor({value:g.label,label:g.label,allowDuplicate:false});e.addItem(h)});c.push(e)}return c}}})}function getTestEnvironmentCfId(){return $("#testEnvironmentCFId").val()};;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/js/report/filters/base/report-filter-component.js' */
require(["underscore"]);(function(d){window.RAVEN=window.RAVEN||{};RAVEN.Component=RAVEN.Component||{};var g=false;var f={};var b=RAVEN.Report.URLBar.Proxy.get();RAVEN.Component.ReportFilterEvents={DYNAMIC_FILTERS_UPDATED:"dynamicFiltersUpdatedEvt"};RAVEN.Component.ReportFilter=Backbone.View.extend({userPrefsBasedFilterValuesResource:function(){alert("User prefs filter values resource hasn't been defined")},queryParamsBasedFilterValuesResource:function(){alert("Query params filter values resource hasn't been defined")},getErrorContainer:null,queryParamsDef:{},projectId:null,userPrefDynamicFilters:null,currentFilterValues:{},getCurrentValues:function(){return this.currentFilterValues},getCurrentDynamicFilterValues:function(){var h=d.Deferred();h.resolve(null);return h.promise()},validateArgs:function(h){d.ajax({type:"GET",url:contextPath+"/rest/raven/1.0/report/url/validate?"+d.param(h),contentType:"application/json",success:function(i){if(i.length>0){var j=i.map(function(k){return"<li>"+k.message+"</li>"}).join("");AJS.messages.warning(d("#arg-validation-messages"),{body:"The following parameters have invalid values and will be ignored:"+"<ul>"+j+"</ul>",closeable:true,insert:true})}},error:function(j,k,i){console.error(j)},async:false})},buildFilterComponent:function(h){},saveCurrentFilterValues:function(){},renderFilterSummary:function(){},closeDialogAndSyncURLQueryParams:function(h){if(h){closeDialogGeneric(h)}this.renderFilterSummary();c.call(this)},render:function(){this.currentFilterValues={};if(Object.keys(this.queryParamsDef).length<=0){console.error("The Query Parameters Definition hasn't been defined")}var h=this;d(document).bind(RAVEN.Component.ReportFilterEvents.DYNAMIC_FILTERS_UPDATED,function(i,j){b.replaceFieldsReportURLBarWithQuery(j)});e.call(this).fetch({async:false,data:d.param(f),success:function(j,k,i){if(j&&j.attributes.dynamicFilters){h.userPrefDynamicFilters=JSON.parse(j.attributes.dynamicFilters)}if(g){h.validateArgs(b.currentQueryParamObj["reportFilter"]);h.buildFilterComponent(j);h.saveCurrentFilterValues();h.renderFilterSummary()}else{h.buildFilterComponent(j);h.saveCurrentFilterValues();h.renderFilterSummary();c.call(h)}},error:function(j,i){AJS.messages.error(d("#message-row-wrapper"),{title:"Error retrieving data from server",body:i.responseText,closeable:false})}})},isSharedUrl:function(){return g},removeFilterValue:function(h){delete this.getCurrentValues()[h]},destroy:function(){this.currentFilterValues={}}});function c(){var h=this;var i=this.getCurrentValues();b.removeReportFilterQueryParams();Object.keys(h.queryParamsDef).map(function(j){return h.queryParamsDef[j]}).forEach(function(k){var j=i[k];if(j!==undefined&&j!==null&&StringUtils.isNotBlank(j+"")){b.pushReportFilterQueryParam(k,j)}});b.saveQueryObjIntoUrlBar()}function e(){var h=a();if(Object.keys(h).length>0){g=true;f=_.extend(h,{projectId:this.projectId});return this.queryParamsBasedFilterValuesResource()}else{g=false;f={projectId:this.projectId};return this.userPrefsBasedFilterValuesResource()}}function a(){var h=b.getCurrentQueryParamsObject();if(!h){return{}}if(!h.reportFilter){return{}}return h.reportFilter}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/templates/reports/how-to-read.soy' */
// This file was automatically generated from how-to-read.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Report.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Report == 'undefined') { RAVEN.Report = {}; }


RAVEN.Report.renderHowToRead = function(opt_data, opt_ignored) {
  return '<div class="raven-how-to-read-chart" style="display:none;">\u2002\u2002\u2002\u2002<div id="attach-tip-msg" style="width:55%;margin-top: -44px;">\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002<h1>' + soy.$$escapeHtml('How to read this chart') + '</h1>\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002<span><p>' + soy.$$filterNoAutoescape(opt_data.howToRead) + '</p></span>' + ((opt_data.requiresExperimentalDialog2 == true) ? '<aui-inline-dialog2 id="show-tooltip" class="aui-layer aui-inline-dialog" data-aui-alignment="bottom left" data-aui-responds-to="toggle" aria-hidden="true" style="max-width:496px"><div class="aui-inline-dialog-contents"><p>' + soy.$$filterNoAutoescape(opt_data.howToRead) + '</p></div></aui-inline-dialog2>' : '<aui-inline-dialog id="show-tooltip" alignment="bottom left" style="max-width:496px"><p>' + soy.$$filterNoAutoescape(opt_data.howToRead) + '</p></aui-inline-dialog>') + '\u2002\u2002\u2002\u2002</div>\u2002\u2002\u2002\u2002<div style="height: 32px; margin-top: -25px;"><a href="' + soy.$$escapeHtml(opt_data.link) + '" target="_blank" class="aui-button submit" style="float:left;margin:8px 8px 8px 0px">' + soy.$$escapeHtml('Learn more') + '</a>\u2002\u2002\u2002\u2002\u2002\u2002\u2002\u2002<p id="dismiss-how-to-read-msg" style="float:left;"><button class="aui-button aui-button-link js-chart-intro-toggle" style="font-size:13px;">' + soy.$$escapeHtml('Hide this information') + '</button></p>\u2002\u2002\u2002\u2002</div></div>';
};
if (goog.DEBUG) {
  RAVEN.Report.renderHowToRead.soyTemplateName = 'RAVEN.Report.renderHowToRead';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/templates/reports/generate-report.soy' */
// This file was automatically generated from generate-report.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Report.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Report == 'undefined') { RAVEN.Report = {}; }


RAVEN.Report.renderGenerateReport = function(opt_data, opt_ignored) {
  return '<div id="raven-first-report"><img class="raven-reports-center-img" src="' + soy.$$escapeHtml(opt_data.contextPath) + '/download/resources/com.xpandit.plugins.xray/images/' + soy.$$escapeHtml(opt_data.imgUrl) + '" /><p class="raven-reports-text-description">' + soy.$$escapeHtml('Please choose the calculation scope and set the filters above in order to generate the report.') + '</p><button id="' + soy.$$escapeHtml(opt_data.buttonID) + '" class="aui-button aui-button-primary raven-reports-center-img">' + soy.$$escapeHtml('Generate Report') + '</button></div>';
};
if (goog.DEBUG) {
  RAVEN.Report.renderGenerateReport.soyTemplateName = 'RAVEN.Report.renderGenerateReport';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/templates/reports/scope-dialog.soy' */
// This file was automatically generated from scope-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Report.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Report == 'undefined') { RAVEN.Report = {}; }


RAVEN.Report.renderScopeDialog = function(opt_data, opt_ignored) {
  var output = ((opt_data.requiresExperimentalDialog2) ? '<aui-inline-dialog2 id="raven-scope-inline-dialog" class="aui-layer aui-inline-dialog" data-aui-alignment="bottom left" data-aui-responds-to="toggle" aria-hidden="true"><div class="aui-inline-dialog-contents">' : '<aui-inline-dialog id="raven-scope-inline-dialog" data-aui-alignment="bottom left" aria-hidden="true">') + '<div id="raven-requirement-scope-dialog"><div id="raven-requirement-coverage-parameters"><div class="raven-report-content-panel"><div class="filter-fieldset"><h4 class="scope-title selected" data-mode="3">' + soy.$$escapeHtml('Version') + '</h4><span class="spliter">|</span><h4 class="scope-title" data-mode="4">' + soy.$$escapeHtml('Test Plan') + '</h4><p>' + soy.$$escapeHtml('Analysis \x26 Scope') + '</p><form action="#" id="raven-' + soy.$$escapeHtml(opt_data.reportType) + '-version-form" method="post" class="aui top-label filter-form"><div class="aui-item" id="raven-report-scope-version"><div class="filter-field top-label filter-select"><label class="aui top-label" for="raven-report-analysis-version-select">' + soy.$$escapeHtml('Fix Version') + '</label><span id="raven-subtle-container"><select class="select" id="raven-report-analysis-version-select" name="version" title="' + soy.$$escapeHtml('Select fix version') + '"><option value="0" ' + ((opt_data.userPreferences.analysisVersionId == 0 || opt_data.userPreferences.analysisVersionId == null) ? ' selected' : '') + '>' + soy.$$escapeHtml('None - latest execution') + '</option>';
  var versionList27 = opt_data.versions;
  var versionListLen27 = versionList27.length;
  for (var versionIndex27 = 0; versionIndex27 < versionListLen27; versionIndex27++) {
    var versionData27 = versionList27[versionIndex27];
    output += '<option value="' + soy.$$escapeHtml(versionData27.id) + '" ' + ((opt_data.userPreferences.execScope == 'version' && versionData27.id == opt_data.userPreferences.analysisVersionId) ? ' selected' : '') + '>' + soy.$$escapeHtml(versionData27.name) + '</option>';
  }
  output += '</select></span></div></div><div class="aui-item" id="raven-report-scope-testplan" style="display:none;"><div class="filter-field top-label filter-select"><label class="aui top-label" for="raven-report-analysis-test-plan-select">' + soy.$$escapeHtml('Test Plan') + '</label><select class="select" id="raven-report-analysis-test-plan-select" name="testPlan">' + ((opt_data.userPreferences.testPlan) ? '<option value="' + soy.$$escapeHtml(opt_data.userPreferences.testPlan.key) + '" style="background-image:url(' + soy.$$escapeHtml(opt_data.contextPath) + soy.$$escapeHtml(opt_data.userPreferences.testPlan.icon) + ');" selected>' + soy.$$escapeHtml(opt_data.userPreferences.testPlan.key) + ' - ' + soy.$$escapeHtml(opt_data.userPreferences.testPlan.summary) + '</option>' : '') + '</select><p id="raven-testplan-key-required" style="color: red; margin: 0; display:none">' + soy.$$escapeHtml('Test Plan key is required.') + '</p></div></div><div class="aui-item"><div class="filter-field top-label filter-select"><label class="aui top-label" for="raven-report-analysis-environment-select">' + soy.$$escapeHtml('Environment') + '</label><span id="raven-subtle-container"><select class="select" id="raven-report-analysis-environment-select" name="environment">' + ((opt_data.userPreferences.environment && opt_data.userPreferences.environment != '-1' && opt_data.userPreferences.environment != '__NULL__') ? '<option value="' + soy.$$escapeHtml(opt_data.userPreferences.environment) + '" selected="selected">' + soy.$$escapeHtml(opt_data.userPreferences.environment) + '</option><option value="-1" title="' + soy.$$escapeHtml('All Environments') + '">' + soy.$$escapeHtml('All Environments') + '</option><option value="__NULL__" title="' + soy.$$escapeHtml('Empty') + '">' + soy.$$escapeHtml('Empty') + '</option>' : '<option value="-1" title="' + soy.$$escapeHtml('All Environments') + '" ' + ((opt_data.userPreferences.environment == null || opt_data.userPreferences.environment == -1) ? 'selected="selected"' : '') + '>' + soy.$$escapeHtml('All Environments') + '</option><option value="__NULL__" title="' + soy.$$escapeHtml('Empty') + '" ' + ((opt_data.userPreferences.environment == '__NULL__') ? 'selected="selected"' : '') + '>' + soy.$$escapeHtml('Empty') + '</option>') + '</select></span></div></div></form><div class="raven-dialog-buttons-container"><div class="raven-dialog-buttons"><button id="raven-' + soy.$$escapeHtml(opt_data.reportType) + '-scope-apply" class="aui-button js-save-button">' + soy.$$escapeHtml('Apply') + '</button><button id="raven-dialog-' + soy.$$escapeHtml(opt_data.reportType) + '-clear" class="aui-button js-save-button">' + soy.$$escapeHtml('Clear') + '</button><a id="raven-' + soy.$$escapeHtml(opt_data.reportType) + '-scope-dialog-cancel" style="float: right; margin-left: 80px;" class="aui-button aui-button-link js-cancel-button">' + soy.$$escapeHtml('Cancel') + '</a></div></div></div></div></div></div>' + ((opt_data.requiresExperimentalDialog2) ? '</div>' : '') + '</aui-inline-dialog>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Report.renderScopeDialog.soyTemplateName = 'RAVEN.Report.renderScopeDialog';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/templates/reports/traceability-report/filter-header.soy' */
// This file was automatically generated from filter-header.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Report.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Report == 'undefined') { RAVEN.Report = {}; }


RAVEN.Report.renderFilterCoverage = function(opt_data, opt_ignored) {
  return '<input class="hidden" id="hideTestRuns" title="hideTestRuns" value="' + soy.$$escapeHtml(opt_data.scope.hideTestRuns) + '"/><div id="raven-report-requirement-coverage-parameters" ><form action="#" id="raven-testplans-coverage-form"><a id="raven-scope-trigger" href="#" aria-controls="raven-scope-inline-dialog" data-aui-trigger class="aui-button aui-style-default raven-dropdown2-arrow aui-button-subtle">' + soy.$$escapeHtml('Filter') + '</a><div id="raven-filter-button-wrapper" class="report-dynamic-filter-button-wrapper"></div><span class="message-toolbox"><a data-aui-trigger aria-controls="show-tooltip" id="raven-notifications-icon" style="display:none;margin-left:4px;margin-right:4px;"></a><a id="enable-how-to-read-msg" style="display:none; font-size:13px;">' + soy.$$escapeHtml('How to read this report') + '</a></span></form></div>' + RAVEN.Report.renderScopeDialog({requiresExperimentalDialog2: opt_data.requiresExperimentalDialog2, versions: opt_data.versions, userPreferences: opt_data.scope, contextPath: opt_data.contextPath, reportType: 'traceability'}) + '<div id="dropdown-chart-options" class="aui-dropdown2 aui-style-default"><div id="requirement-presentation-option" class="aui-dropdown2-section"><div class="aui-dropdown2-heading"><strong>' + soy.$$escapeHtml('Requirement Presentation') + '</strong></div><ul><li><a id="hierarchical-requirements-option" class="aui-dropdown2-radio interactive' + ((opt_data.scope.flattenRequirements != true) ? ' checked' : '') + '">' + soy.$$escapeHtml('Hierarchical') + '</a></li><li><a id="flat-requirements-option" class="aui-dropdown2-radio interactive' + ((opt_data.scope.flattenRequirements == true) ? ' checked' : '') + '">' + soy.$$escapeHtml('Flat') + '</a></li></ul></div><div id="report-presentation-input" class="aui-dropdown2-section"><input type="checkbox" id="hide_testruns" name="hide_testruns" ' + ((opt_data.scope.hideTestRuns) ? ' checked ' : '') + '><label for="hide_testruns" class="aui-theme-default">' + soy.$$escapeHtml('Hide TestRuns') + '</label></div></div>';
};
if (goog.DEBUG) {
  RAVEN.Report.renderFilterCoverage.soyTemplateName = 'RAVEN.Report.renderFilterCoverage';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/templates/reports/traceability-report/render-row.soy' */
// This file was automatically generated from render-row.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Report.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Report == 'undefined') { RAVEN.Report = {}; }


RAVEN.Report.renderTable = function(opt_data, opt_ignored) {
  var output = '<div id="raven-traceability-report-wrapper" style="display: inline-block; flex: 1"><div id="raven-report-title-wrapper"><ul class="report-title" id="traceability-report-title">';
  var columnCount__soy4 = opt_data.hideTestRuns == true ? 'three-columns' : 'four-columns';
  output += '<li class="li-title ' + soy.$$escapeHtml(columnCount__soy4) + '"><h3>' + soy.$$escapeHtml('Requirement') + '</h3></li><li class="li-title ' + soy.$$escapeHtml(columnCount__soy4) + '"><h3>' + soy.$$escapeHtml('Tests') + '</h3></li>' + ((opt_data.hideTestRuns == false) ? '<li class="li-title ' + soy.$$escapeHtml(columnCount__soy4) + '"><h3 class="hideable">' + soy.$$escapeHtml('Test Runs') + '</h3></li>' : '') + '<li class="li-title ' + soy.$$escapeHtml(columnCount__soy4) + '"><h3>' + soy.$$escapeHtml('Defects') + '</h3></li></ul></div>' + RAVEN.Report.renderRow({issues: opt_data.issues, contextPath: opt_data.contextPath, currentUserName: opt_data.currentUserName, hideTestRuns: opt_data.hideTestRuns, requiresExperimentalDialog2: opt_data.requiresExperimentalDialog2, flatten: opt_data.flatten, maxDepth: opt_data.maxDepth, currentDepth: 1}) + '</div>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Report.renderTable.soyTemplateName = 'RAVEN.Report.renderTable';
}


RAVEN.Report.renderRow = function(opt_data, opt_ignored) {
  var output = '';
  var issueList37 = opt_data.issues;
  var issueListLen37 = issueList37.length;
  for (var issueIndex37 = 0; issueIndex37 < issueListLen37; issueIndex37++) {
    var issueData37 = issueList37[issueIndex37];
    output += '<div class="requirement-row automation-req-row ' + ((issueIndex37 % 2 == 0) ? 'even ' : '') + ' ' + ((! opt_data.flatten && issueData37.subRequirementsStatusBean.length > 0) ? 'parent-row' : '') + '"' + ((! opt_data.flatten && issueData37.subRequirementsStatusBean.length > 0) ? ' id="parent-row-' + soy.$$escapeHtml(issueData37.issueKey) + '"' : '') + '><div class="hide-req-img-info-container">&nbsp;' + ((issueData37.subRequirementsStatusBean.length > 0) ? '<span class="subreq-enable-expand hide-subreq"></span><span class="raven-automation-sub-requirement-count">' + soy.$$escapeHtml(issueData37.subRequirementsStatusBean.length) + ' (' + soy.$$escapeHtml(issueData37.totalSubRequirementCount) + ')</span>' : '') + '</div><div class="requirement-issueimage-container"><span><img class="traceability-requirement-issue-icon" src="' + ((opt_data.contextPath) ? soy.$$escapeHtml(opt_data.contextPath) + '/' : '') + soy.$$escapeHtml(issueData37.issueIcon) + '" width="16" height="16" /></span>' + ((issueData37.subRequirementsStatusBean.length > 0) ? '<span class="requirement-issueimage-container-span">&nbsp;</span><div class=\'parent-extension-container\'></div>' : '') + '</div>';
    var columnCount__soy71 = opt_data.hideTestRuns == true ? 'three-columns' : 'four-columns';
    output += '<div class="requirement-column automation-req-column ' + soy.$$escapeHtml(columnCount__soy71) + '" ><span>&nbsp;<a class="raven-automation-req-key" href="' + soy.$$escapeHtml(opt_data.contextPath) + '/browse/' + soy.$$escapeHtml(issueData37.issueKey) + '">' + soy.$$escapeHtml(issueData37.issueKey) + '</a>&nbsp;&nbsp;</span><span class="jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-' + soy.$$escapeHtml(issueData37.wkfStatusColor) + 'jira-issue-status-lozenge-new jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>' + soy.$$escapeHtml(issueData37.wkfStatusName) + '</span><br>" original-title="">' + soy.$$escapeHtml(issueData37.wkfStatusName) + '</span><br><br>' + RAVEN.CustomField.Requirement.renderStatusBar({reqStatus: issueData37, contextPath: opt_data.contextPath}) + '<fieldset><div class="field-group"><label for="issue-version">' + soy.$$escapeHtml('Version') + ': </label><span id="issue-version">';
    if (! issueData37.fixVersions || issueData37.fixVersions.length == 0) {
      output += '-';
    } else {
      var vList97 = issueData37.fixVersions;
      var vListLen97 = vList97.length;
      for (var vIndex97 = 0; vIndex97 < vListLen97; vIndex97++) {
        var vData97 = vList97[vIndex97];
        output += ((! (vIndex97 == 0)) ? '<span>, </span>' : '') + '<strong><span  title="' + soy.$$escapeHtml(vData97.name) + ' ' + soy.$$escapeHtml(vData97.description) + '">' + soy.$$escapeHtml(vData97.name) + '</span></strong>';
      }
    }
    output += '</span></div></fieldset><br><span class="issue-details traceability-issue-summary">' + soy.$$escapeHtml(issueData37.issueSummary) + '</span></div>';
    var testList112 = issueData37.testIssues;
    var testListLen112 = testList112.length;
    for (var testIndex112 = 0; testIndex112 < testListLen112; testIndex112++) {
      var testData112 = testList112[testIndex112];
      output += (testData112.allowed) ? RAVEN.Report.renderTestRow({test: testData112, requirementIssue: issueData37, contextPath: opt_data.contextPath, isFirstTest: testIndex112 == 0, currentUserName: opt_data.currentUserName, hideTestRuns: opt_data.hideTestRuns, requiresExperimentalDialog2: opt_data.requiresExperimentalDialog2}) : '';
    }
    if (! opt_data.flatten && issueData37.subRequirementsStatusBean.length > 0) {
      var subreqList126 = issueData37.subRequirementsStatusBean;
      var subreqListLen126 = subreqList126.length;
      for (var subreqIndex126 = 0; subreqIndex126 < subreqListLen126; subreqIndex126++) {
        var subreqData126 = subreqList126[subreqIndex126];
        output += (subreqData126.allowed) ? RAVEN.Report.renderSubRequirementRow({subRequirement: subreqData126, contextPath: opt_data.contextPath, currentUserName: opt_data.currentUserName, hideTestRuns: opt_data.hideTestRuns, requiresExperimentalDialog2: opt_data.requiresExperimentalDialog2, flatten: opt_data.flatten, maxDepth: opt_data.maxDepth, currentDepth: opt_data.currentDepth + 1}) : '';
      }
    }
    output += '</div>';
  }
  output += '<div class="loading-wheel"></div>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Report.renderRow.soyTemplateName = 'RAVEN.Report.renderRow';
}


RAVEN.Report.renderSubRequirementRow = function(opt_data, opt_ignored) {
  var output = '<div class="subrequirement-row automation-req-row"><hr class="hr-subrequirement"/><div class="horizontal-dots-extensions"></div><div class="requirement-issueimage-container"><span><img class="traceability-requirement-issue-icon" src="' + ((opt_data.contextPath) ? soy.$$escapeHtml(opt_data.contextPath) + '/' : '') + soy.$$escapeHtml(opt_data.subRequirement.issueIcon) + '" width="16" height="16" /> &nbsp;</span>' + ((! opt_data.flatten && opt_data.currentDepth < opt_data.maxDepth && opt_data.subRequirement.subRequirementsStatusBean.length > 0) ? '<div class=\'parent-extension-container\'></div>' : '') + '</div></span><div class="subrequirement-column automation-req-column"><span>&nbsp;<a class="raven-automation-req-key" href="' + soy.$$escapeHtml(opt_data.contextPath) + '/browse/' + soy.$$escapeHtml(opt_data.subRequirement.issueKey) + '">' + soy.$$escapeHtml(opt_data.subRequirement.issueKey) + '</a>&nbsp;&nbsp;</span><span class="jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-' + soy.$$escapeHtml(opt_data.subRequirement.wkfStatusColor) + 'jira-issue-status-lozenge-new jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>' + soy.$$escapeHtml(opt_data.subRequirement.wkfStatusName) + '</span><br>" original-title="">' + soy.$$escapeHtml(opt_data.subRequirement.wkfStatusName) + '</span><br><br>' + RAVEN.CustomField.Requirement.renderStatusBar({reqStatus: opt_data.subRequirement, contextPath: opt_data.contextPath}) + '<fieldset><div class="field-group"><label for="issue-version">' + soy.$$escapeHtml('Version') + ': </label><span id="issue-version">';
  if (! opt_data.subRequirement.fixVersions || opt_data.subRequirement.fixVersions.length == 0) {
    output += '-';
  } else {
    var vList176 = opt_data.subRequirement.fixVersions;
    var vListLen176 = vList176.length;
    for (var vIndex176 = 0; vIndex176 < vListLen176; vIndex176++) {
      var vData176 = vList176[vIndex176];
      output += ((! (vIndex176 == 0)) ? '<span>, </span>' : '') + '<strong><span  title="' + soy.$$escapeHtml(vData176.name) + ' ' + soy.$$escapeHtml(vData176.description) + '">' + soy.$$escapeHtml(vData176.name) + '</span></strong>';
    }
  }
  output += '</span></div></fieldset><br><span class="issue-details traceability-issue-summary">' + soy.$$escapeHtml(opt_data.subRequirement.issueSummary) + '</span></div>';
  var testList191 = opt_data.subRequirement.testIssues;
  var testListLen191 = testList191.length;
  for (var testIndex191 = 0; testIndex191 < testListLen191; testIndex191++) {
    var testData191 = testList191[testIndex191];
    output += (testData191.allowed) ? RAVEN.Report.renderTestRow({test: testData191, requirementIssue: opt_data.subRequirement, contextPath: opt_data.contextPath, isFirstTest: testIndex191 == 0, currentUserName: opt_data.currentUserName, hideTestRuns: opt_data.hideTestRuns, requiresExperimentalDialog2: opt_data.requiresExperimentalDialog2}) : '';
  }
  if (! opt_data.flatten && opt_data.currentDepth < opt_data.maxDepth && opt_data.subRequirement.subRequirementsStatusBean.length > 0) {
    var subreqList205 = opt_data.subRequirement.subRequirementsStatusBean;
    var subreqListLen205 = subreqList205.length;
    for (var subreqIndex205 = 0; subreqIndex205 < subreqListLen205; subreqIndex205++) {
      var subreqData205 = subreqList205[subreqIndex205];
      output += (subreqData205.allowed) ? RAVEN.Report.renderSubRequirementRow({subRequirement: subreqData205, contextPath: opt_data.contextPath, currentUserName: opt_data.currentUserName, hideTestRuns: opt_data.hideTestRuns, requiresExperimentalDialog2: opt_data.requiresExperimentalDialog2, flatten: opt_data.flatten, maxDepth: opt_data.maxDepth, currentDepth: opt_data.currentDepth + 1}) : '';
    }
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Report.renderSubRequirementRow.soyTemplateName = 'RAVEN.Report.renderSubRequirementRow';
}


RAVEN.Report.renderTestRow = function(opt_data, opt_ignored) {
  var output = '';
  var columnCount__soy220 = opt_data.hideTestRuns == true ? 'three-columns' : 'four-columns';
  output += '<div class="test-column ' + soy.$$escapeHtml(columnCount__soy220) + '">' + ((! opt_data.isFirstTest) ? '<hr class="hr-testruns"/>' : '') + '<div class="' + soy.$$escapeHtml(columnCount__soy220) + '"><span><img src="' + soy.$$escapeHtml(opt_data.contextPath) + '/download/resources/com.xpandit.plugins.xray/images/test.svg" width="16" height="16"/>&nbsp;<a class="raven-automation-test-key" href="' + soy.$$escapeHtml(opt_data.contextPath) + '/browse/' + soy.$$escapeHtml(opt_data.test.key) + '">' + soy.$$escapeHtml(opt_data.test.key) + '</a>&nbsp;</span><span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-' + soy.$$escapeHtml(opt_data.test.wkfStatusColor) + 'jira-issue-status-lozenge-new jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>' + soy.$$escapeHtml(opt_data.test.wkfStatusName) + '</span><br>" original-title="">' + soy.$$escapeHtml(opt_data.test.wkfStatusName) + '</span><br><span class="traceability-issue-summary">' + soy.$$escapeHtml(opt_data.test.summary) + '</span><br><br><span class="aui-lozenge" style="background-color: ' + soy.$$escapeHtml(opt_data.test.status.color) + '; color: white; text-transform: none; min-width: 100px; border:' + soy.$$escapeHtml(opt_data.test.status.color) + ' 1px solid;" title="' + soy.$$escapeHtml(opt_data.test.status.description) + '">' + ((opt_data.test.status.versionName) ? soy.$$escapeHtml(opt_data.test.status.versionName) + ' -' : '') + soy.$$escapeHtml(opt_data.test.status.name) + '</span></div><div class="test-run-row ' + soy.$$escapeHtml(columnCount__soy220) + '">';
  if (opt_data.requirementIssue.statusCount.overallGroupedTestRuns != null && opt_data.requirementIssue.statusCount.overallGroupedTestRuns[opt_data.test.key] != null) {
    var trList262 = opt_data.requirementIssue.statusCount.overallGroupedTestRuns[opt_data.test.key];
    var trListLen262 = trList262.length;
    for (var trIndex262 = 0; trIndex262 < trListLen262; trIndex262++) {
      var trData262 = trList262[trIndex262];
      output += '<div class="test-exec-row">';
      if (opt_data.hideTestRuns == false) {
        output += '<div class="test-exec-column hideable"><span style="background-color:' + soy.$$escapeHtml(trData262.color) + '; color:white; border-radius:2px; padding:2px; font-size:12px; margin-bottom:4px; border:' + soy.$$escapeHtml(trData262.color) + ' 1px solid">' + soy.$$escapeHtml(trData262.status) + '</span><br><br><span><img src="' + soy.$$escapeHtml(opt_data.contextPath) + '/download/resources/com.xpandit.plugins.xray/images/test-execution.svg" width="16" height="16"/>&nbsp;<a class="raven-automation-test-exec-key" href="' + soy.$$escapeHtml(opt_data.contextPath) + '/browse/' + soy.$$escapeHtml(trData262.testExecKey) + '">' + soy.$$escapeHtml(trData262.testExecKey) + '</a></span>' + RAVEN.ExecuteTest.renderViewDetailsWithIdentifier({contextPath: opt_data.contextPath, testExec: trData262.testExecKey, test: opt_data.test.key, currentUserName: opt_data.currentUserName, assignee: trData262.assignee, startDate: trData262.startedOn, requiresExperimentalDialog2: opt_data.requiresExperimentalDialog2, identifier: opt_data.requirementIssue.issueKey}) + '<br><fieldset><div class="field-group"><label for="test-exec-version">' + soy.$$escapeHtml('Version') + ': </label><span id="test-exec-version">';
        if (! trData262.fixVersions || trData262.fixVersions.length == 0) {
          output += '-';
        } else {
          var vList297 = trData262.fixVersions;
          var vListLen297 = vList297.length;
          for (var vIndex297 = 0; vIndex297 < vListLen297; vIndex297++) {
            var vData297 = vList297[vIndex297];
            output += ((! (vIndex297 == 0)) ? '<span>, </span>' : '') + '<strong><span title="' + soy.$$escapeHtml(vData297.name) + ' ' + soy.$$escapeHtml(vData297.description) + '">' + soy.$$escapeHtml(vData297.name) + '</span></strong>';
          }
        }
        output += '</span></div></fieldset><fieldset><div class="field-group"><label for="test-exec-finish">' + soy.$$escapeHtml('Finished On:') + '</label><span id="test-exec-finish">' + ((trData262.finishedOn != null) ? '<strong>' + soy.$$escapeHtml(trData262.finishedOn) + '</strong>' : '-') + '</span></div></fieldset><fieldset><div class="field-group"><label for="test-exec-exec-by">' + soy.$$escapeHtml('Executed By:') + '</label><span id="test-exec-exec-by">' + ((trData262.executedBy != null) ? '<strong>' + ((opt_data.requirementIssue.isUserActiveMap[trData262.executedBy] == true || opt_data.requirementIssue.isUserActiveMap[trData262.executedBy] == 'true') ? '<a href="/secure/ViewProfile.jspa?name=' + soy.$$escapeHtml(opt_data.requirementIssue.userKeyToUsernameMap[trData262.executedBy]) + '" rel="' + soy.$$escapeHtml(opt_data.requirementIssue.userKeyToUsernameMap[trData262.executedBy]) + '" class="user-hover">' + soy.$$escapeHtml(opt_data.requirementIssue.userKeyToUsernameMap[trData262.executedBy]) + '</a>' : soy.$$escapeHtml(trData262.executedBy)) + '</strong>' : '-') + '</span></div></fieldset><fieldset><div class="field-group"><label for="test-exec-version">' + soy.$$escapeHtml('Tests environments:') + '</label><span id="test-exec-version">';
        if (trData262.testEnvironments == null || trData262.testEnvironments.length == 0) {
          output += '-';
        } else {
          var testEnvironmentList346 = trData262.testEnvironments;
          var testEnvironmentListLen346 = testEnvironmentList346.length;
          for (var testEnvironmentIndex346 = 0; testEnvironmentIndex346 < testEnvironmentListLen346; testEnvironmentIndex346++) {
            var testEnvironmentData346 = testEnvironmentList346[testEnvironmentIndex346];
            output += '<span class="aui-lozenge aui-lozenge-subtle aui-lozenge-complete xray-test-env-field-report">' + soy.$$escapeHtml(testEnvironmentData346) + '</span>';
          }
        }
        output += '</span></div></fieldset><fieldset><div class="field-group"><label for="test-exec-revision">' + soy.$$escapeHtml('Revision') + ':</label><span id="test-exec-revision">' + ((trData262.revision != null) ? '<strong>' + soy.$$escapeHtml(trData262.revision) + '</strong>' : '-') + '</span></div></fieldset><fieldset><div class="field-group"><label for="test-run-testVersion">' + soy.$$escapeHtml('Test Version') + ':&nbsp;</label><span id="test-run-testVersion">' + ((trData262.testVersion != null) ? '<strong>' + soy.$$escapeHtml(trData262.testVersion) + '</strong>' : '') + '</span></div></fieldset></div>';
      }
      output += '<div class="test-run-defect-column ' + soy.$$escapeHtml(columnCount__soy220) + '">';
      var defectList373 = trData262.defects;
      var defectListLen373 = defectList373.length;
      for (var defectIndex373 = 0; defectIndex373 < defectListLen373; defectIndex373++) {
        var defectData373 = defectList373[defectIndex373];
        var iconSource__soy374 = defectData373.url ? defectData373.iconUrl : opt_data.contextPath + defectData373.iconUrl;
        var defectLink__soy375 = defectData373.url ? defectData373.url : opt_data.contextPath + '/browse/' + defectData373.key;
        output += '<span><img src="' + soy.$$escapeHtml(iconSource__soy374) + '" width="16" height="16"/>&nbsp;<a class="raven-automation-test-run-defect-key" href="' + soy.$$escapeHtml(defectLink__soy375) + '">' + soy.$$escapeHtml(defectData373.key) + '</a>&nbsp; &nbsp;</span><span class="jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-' + soy.$$escapeHtml(defectData373.statusColor) + 'jira-issue-status-lozenge-new jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>' + soy.$$escapeHtml(defectData373.status) + '</span><br>" original-title="">' + soy.$$escapeHtml(defectData373.status) + '</span>&nbsp;<br><span class="traceability-issue-summary">' + soy.$$escapeHtml(defectData373.summary) + '</span><br>';
      }
      output += '</div></div>' + ((opt_data.hideTestRuns == false && (! (trIndex262 == trListLen262 - 1) || opt_data.test.defectsFromTest != null && opt_data.test.defectsFromTest.length > 0)) ? '<hr class="hr-testruns hideable"/>' : '');
    }
    if (opt_data.test.defectsFromTest != null && opt_data.test.defectsFromTest.length > 0) {
      output += '<div class="test-exec-row">' + ((opt_data.hideTestRuns == false) ? '<div class="test-exec-column hideable"><br><span><br><fieldset><div class="field-group"><span id="test-exec-finish"></span></div></fieldset><fieldset><div class="field-group"></div></fieldset><fieldset><div class="field-group"><span id="test-exec-version"></span></div></fieldset></span></div>' : '') + '<div class="test-run-defect-column ' + soy.$$escapeHtml(columnCount__soy220) + '">';
      var defectList406 = opt_data.test.defectsFromTest;
      var defectListLen406 = defectList406.length;
      for (var defectIndex406 = 0; defectIndex406 < defectListLen406; defectIndex406++) {
        var defectData406 = defectList406[defectIndex406];
        var iconSource__soy407 = defectData406.url ? defectData406.iconUrl : opt_data.contextPath + defectData406.iconUrl;
        var defectLink__soy408 = defectData406.url ? defectData406.url : opt_data.contextPath + '/browse/' + defectData406.key;
        output += '<span><img src="' + soy.$$escapeHtml(iconSource__soy407) + '" width="16" height="16"/>&nbsp;<a class="raven-automation-defect-key" href="' + soy.$$escapeHtml(defectLink__soy408) + '">' + soy.$$escapeHtml(defectData406.key) + '</a>&nbsp; &nbsp;</span><span class="jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-' + soy.$$escapeHtml(defectData406.statusColor) + 'jira-issue-status-lozenge-new jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>' + soy.$$escapeHtml(defectData406.status) + '</span><br>" original-title="">' + soy.$$escapeHtml(defectData406.status) + '</span>&nbsp;<br><span class="traceability-issue-summary">' + soy.$$escapeHtml(defectData406.summary) + '</span><br>';
      }
      output += '</div></div>';
    }
  } else if (opt_data.test.defectsFromTest != null && opt_data.test.defectsFromTest.length > 0) {
    output += '<div class="test-exec-row">' + ((opt_data.hideTestRuns == false) ? '<div class="test-exec-column hideable"><br><span><br><fieldset><div class="field-group"><span id="test-exec-finish"></span></div></fieldset><fieldset><div class="field-group"></div></fieldset><fieldset><div class="field-group"><span id="test-exec-version"></span></div></fieldset></span></div>' : '') + '<div class="test-run-defect-column ' + soy.$$escapeHtml(columnCount__soy220) + '">';
    var defectList434 = opt_data.test.defectsFromTest;
    var defectListLen434 = defectList434.length;
    for (var defectIndex434 = 0; defectIndex434 < defectListLen434; defectIndex434++) {
      var defectData434 = defectList434[defectIndex434];
      var iconSource__soy435 = defectData434.url ? defectData434.iconUrl : opt_data.contextPath + defectData434.iconUrl;
      var defectLink__soy436 = defectData434.url ? defectData434.url : opt_data.contextPath + '/browse/' + defectData434.key;
      output += '<span><img src="' + soy.$$escapeHtml(iconSource__soy435) + '" width="16" height="16"/>&nbsp;<a class="raven-automation-defect-key" href="' + soy.$$escapeHtml(defectLink__soy436) + '">' + soy.$$escapeHtml(defectData434.key) + '</a>&nbsp; &nbsp;</span><span class="jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-' + soy.$$escapeHtml(defectData434.statusColor) + 'jira-issue-status-lozenge-new jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>' + soy.$$escapeHtml(defectData434.status) + '</span><br>" original-title="">' + soy.$$escapeHtml(defectData434.status) + '</span>&nbsp;<br><span class="traceability-issue-summary">' + soy.$$escapeHtml(defectData434.summary) + '</span><br>';
    }
    output += '</div></div>';
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Report.renderTestRow.soyTemplateName = 'RAVEN.Report.renderTestRow';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/templates/reports/traceability-report/traceability-report.soy' */
// This file was automatically generated from traceability-report.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Report.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Report == 'undefined') { RAVEN.Report = {}; }


RAVEN.Report.renderTraceability = function(opt_data, opt_ignored) {
  return RAVEN.Report.renderHowToRead({howToRead: 'Shows the requirement traceability, from requirements to defects.\x3c/br\x3e\x3c/br\x3e This helps you analyze the requirements and related Tests, Test Runs and defects, for quickly identifying uncovered or incomplete/faulty requirements.', link: 'https://docs.getxray.app/display/XRAY/Traceability+Report', requiresExperimentalDialog2: opt_data.requiresExperimentalDialog2}) + '<div class="header-filter" data-initialized="false" style="width:100%; margin:8px; padding-bottom:6px;"><div id="arg-validation-messages"></div><div id="filter-content-place-holder" style="float:left; max-width:80%;"></div><div style="float: right; min-width: 20%"><button id="raven-requirement-presentation" aria-owns="dropdown-chart-options" aria-haspopup="true" class="aui-button aui-style-default aui-dropdown2-trigger" style="float:right; margin: 7px 8px 4px 2px;"><span class="aui-icon aui-icon-small aui-iconfont-configure">$i18n.getText(\'projectpanels.requirement-coverage.label.configure\')</span></button><div class="load-all-entries"><a data-aui-trigger aria-controls="load-all-warning" href="#load-all-warning"><span class="aui-icon aui-icon-small aui-iconfont-info load-all-info"></span></a><a id="load-all-bt" style="font-size:13px;">' + soy.$$escapeHtml('Load all') + '</a>' + ((opt_data.requiresExperimentalDialog2) ? '<aui-inline-dialog2 id="load-all-warning" class="aui-layer aui-inline-dialog" data-aui-alignment="bottom right" data-aui-responds-to="toggle" aria-hidden="true" style="max-width:496px"><div class="aui-inline-dialog-contents" ><p>' + soy.$$escapeHtml('Loading all entries may be memory and time consuming if there are many entries') + '</p></div></aui-inline-dialog2>' : '<aui-inline-dialog id="load-all-warning" alignment="bottom right" style="max-width:496px"><p>' + soy.$$escapeHtml('Loading all entries may be memory and time consuming if there are many entries') + '</p></aui-inline-dialog>') + '</div><div class="info-entries"></div></div></div><div style="clear: both"></div><div id="raven-requirement-content-panel">' + RAVEN.Report.renderGenerateReport({imgUrl: 'xray-traceability-report-back.png', buttonID: 'raven-load-traceability-requirement-converage-report', contextPath: opt_data.contextPath}) + '<div id="raven-quick-filters-wrapper" style="display:none"><span id="raven-quick-filters"><span id="raven-quick-filters-caption">' + soy.$$escapeHtml('Quick Filters:') + '</span><span id="raven-requirement-status-container"></span></span></div><div id="message-row-wrapper"></div><div id="tests-row-wrapper"></div></div><div id="raven-traceability-progress" style="display:none"><div id="raven-progress-message"></div><button class="aui-button" id="raven-stop-loading">' + soy.$$escapeHtml('Stop Loading') + '</button></div><div id="load-more">' + soy.$$escapeHtml('More') + '</div>';
};
if (goog.DEBUG) {
  RAVEN.Report.renderTraceability.soyTemplateName = 'RAVEN.Report.renderTraceability';
}


RAVEN.Report.renderPermissionWarning = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml('Some issues are hidden') + '</h3><div>' + soy.$$escapeHtml('You don\x27t have permission to view all the issues in this report.') + '</div>';
};
if (goog.DEBUG) {
  RAVEN.Report.renderPermissionWarning.soyTemplateName = 'RAVEN.Report.renderPermissionWarning';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/templates/dialog/report-export-csv-dialog.soy' */
// This file was automatically generated from report-export-csv-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Dialogs.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Dialogs == 'undefined') { RAVEN.Dialogs = {}; }


RAVEN.Dialogs.exportReportToCSV = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml('Export report to CSV') + '</h2><div id="raven-export-csv-dialog" class="aui"><form class="aui"><div class="field-group"><input id="raven-traceability-report-csv-delimiter" class="text medium-field" type="text" maxlength="1" name="csvDelimiter" value="' + soy.$$escapeHtml(opt_data.defaultDelimiter) + '" required><label for="raven-traceability-report-csv-delimiter">' + soy.$$escapeHtml('CSV Delimiter') + '</label></div><div class="form-footer buttons-container"><div class="buttons"><input class="button" type="submit" value="' + soy.$$escapeHtml('Export') + '"/><a href="#" class="cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form></div>';
};
if (goog.DEBUG) {
  RAVEN.Dialogs.exportReportToCSV.soyTemplateName = 'RAVEN.Dialogs.exportReportToCSV';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/js/report/report-traceability-view.js' */
require(["aui/inline-dialog2"]);(function(b){RAVEN.namespace("RAVEN.Report");var a=Backbone.Model.extend({queryParams:null,setQueryParams:function(c){this.queryParams=c},url:function(){return contextPath+"/rest/raven/1.0/report/traceability/requirements?"+this.queryParams}});RAVEN.Report.TraceabilityReportView=Backbone.View.extend({el:"#report-wrapper",filterView:null,requirementList:null,render:function(d){var e=this;var f=RAVEN.Report.renderTraceability({requiresExperimentalDialog2:d,contextPath:contextPath});this.$el.empty().html(f);e.filterView=new RAVEN.Report.Filters.TraceabilityReportFiltersView();e.requirementList=new RAVEN.Report.RequirementView({requiresExperimentalDialog2:d,filterView:e.filterView});var c=RAVEN.report.analytics.endpoints().TRACEABILITY;RAVEN.report.analytics.reportVisit(c)},destroy:function(){if(this.filterView){this.filterView.destroy();this.filterView=null}if(this.requirementList){this.requirementList.destroy();this.requirementList=null}b("#show-tooltip").remove();b("#load-all-warning").remove()}});RAVEN.Report.RequirementView=Backbone.View.extend({el:"#tests-row-wrapper",filterView:null,quickFilter:"#raven-quick-filters-wrapper",start:0,pageSize:20,prevValues:null,continueLoading:true,isHowToRead:null,requestTimeOut:90000,total:0,totalPartial:0,requiresExperimentalDialog2:null,REASONABLE_TEST_RUNS_NUMBER:15000,totalTestRuns:0,alreadyWarned:false,requirementStatusPicker:null,isFirstReport:true,minHeight:null,events:{},requirementStatusCounts:null,processingQuickFilter:true,permissionWarningFlag:null,maxDepth:5,unscopedEvents:{"change.raven.report.traceability #status-filter":"dialogApply","click.raven.report.traceability #raven-load-traceability-requirement-converage-report":"firstGenerateReport","click.raven.report.traceability #raven-requirement-traceability-filter-assignee-suggestions":"preventDefault","submit.raven.report.traceability #raven-requirement-coverage-form":"preventDefault","click.raven.report.traceability .item-delete":"preventDefault","click.raven.report.traceability #dismiss-how-to-read-msg":"disableHowToRead","click.raven.report.traceability #enable-how-to-read-msg":"enableHowToRead","click.raven.report.traceability #load-more":"loadMoreEvent","click.raven.report.traceability #load-all-bt":"loadAll","submit.raven.report.traceability #raven-testplans-coverage-form":"preventDefault","click.raven.report.traceability #raven-stop-loading":"stopLoadingData","click.raven.report.traceability #raven-report-analysis-version-select-suggestions":"preventDefault","click.raven.report.traceability #raven-report-analysis-test-plan-select-suggestions":"preventDefault","click.raven.report.traceability #raven-report-analysis-environment-select-suggestions":"preventDefault"},render:function(){if(this.isFirstReport){return}b("#report-wrapper").block();b(".raven-requirement-header").block();var g=b(".lastRowSpin");var e=b("#raven-requirement-content-panel");if(g.length){g.spin("medium");b("#load-more").css("color","#eee")}else{e.css("min-height",this.minHeight);e.spin("large")}this.clearMessage();this.checkShowHowToRead();e.css({"border-left":"none","border-right":"none"});var c=this;var f=this._createRequestParams();var d=new a();d.setQueryParams(f);c.filterView.getCurrentDynamicFilterValues().done(function(h){d.fetch({data:h,async:true,type:"POST",timeout:c.requestTimeOut,success:function(j,k,i){c.totalTestRuns+=j.attributes.testRunsCount;if(c.totalTestRuns>c.REASONABLE_TEST_RUNS_NUMBER&&!c.filterView.getHiddenTestRunsValue()&&!c.alreadyWarned){c._confirmationHideTestRuns(c.processTraceabilityData,j.attributes,f)}else{c.processTraceabilityData(j.attributes,f)}if(c._isReportEmpty(j.attributes.requirements)){disableExportReportButton()}else{enableExportReportButton()}JIRA.trigger(JIRA.Events.NEW_CONTENT_ADDED,[b("#report-wrapper"),JIRA.CONTENT_ADDED_REASON.panelRefreshed])},error:function(j,i){disableExportReportButton();c.requestDataError(i)}})})},processTraceabilityData:function(e,g){const c=this;this.processData(e);this.stopLoadingAnimation();this.postLoadOperation();const d=b("#raven-report-common-to-csv-link");const f=this.filterView.filterOptionsPicker.getJql();d.block();f.done(function(h){d.unblock();if(h){g+="&jql="+encodeURIComponent(h)}b("#raven-report-common-to-csv-link").off("click.ravenTraceability").on("click.ravenTraceability",function(i){i.preventDefault();c._onExportToCSV(g)})})},_onExportToCSV:function(e){const c=this;var d;d=new JIRA.FormDialog({id:"raven-traceability-report-export-CSV",width:400,height:250,stacked:true,content:function(f){const h=RAVEN.Dialogs.exportReportToCSV({defaultDelimiter:";"});const g=b(h);f(g)},submitHandler:function(g){const f=c._getUrl(e);d.hide();window.location.href=f;g.preventDefault()},autoClose:true});d.show()},_getUrl:function(d){const c=b("#raven-traceability-report-csv-delimiter").val();if(c){d+="&delimiter="+c}return contextPath+"/plugins/servlet/raven/report/traceability/export?"+d},_confirmationHideTestRuns:function(f,e,g){var c=this;var d=new JIRA.FormDialog({content:function(l){var k=AJS.format("High amount of Test Runs",c.REASONABLE_TEST_RUNS_NUMBER);var j=AJS.format("There are more than {0} Test Runs to be shown. In order to make this page lighter, we suggest hiding them in the report.",c.REASONABLE_TEST_RUNS_NUMBER);var i="warning";var h=RAVEN.Dialog.hideTestRunsDialog({title:k,message:j,severity:i});l(h)},submitHandler:function(j){j.preventDefault();var i=b("#hide_testruns");if(i.length){i.prop("checked",true);c.filterView.applyHideTestRuns()}c.alreadyWarned=true;c.removeExistingTestRuns();var h=b.proxy(f,c);h(e);d.hide()},autoClose:true});d.show();b("#raven-cancel-dialog-form-submit").click(function(i){i.preventDefault();c.alreadyWarned=true;var h=b.proxy(f,c);h(e,g);d.hide()})},loadAll:function(){this.preLoadOperation();this.continueLoading=true;this.displayProgressTracker();window.requestAnimationFrame(b.proxy(this.loadCycle,this,b.proxy(this.loadAllContinueLoading,this)))},loadCycle:function(c){this._updateProgressTracker();this.fetchData(this._createRequestParams(),b.proxy(this.loadCycleCallBack,this,c))},loadCycleCallBack:function(c){if(c.call()){window.requestAnimationFrame(b.proxy(this.loadCycle,this,c))}else{this.stopLoadingAnimation();this.hideProgressTracker();this.postLoadOperation()}},loadAllContinueLoading:function(){return this.total>this.start&&this.continueLoading},reloadContinueLoading:function(){return this.totalPartial>this.start&&this.continueLoading},reloadCurrentRequirements:function(){if(this.isFirstReport){return}this.dataReset();b("#report-wrapper").block();b(".raven-requirement-header").block();var d=b(".lastRowSpin");var c=b("#raven-requirement-content-panel");if(d.length){d.spin("medium");b("#load-more").css("color","#eee")}else{c.spin("large")}this.preLoadOperation();this.totalPartial=this.start;this.continueLoading=true;this.displayProgressTracker();window.requestAnimationFrame(b.proxy(this.loadCycle,this,b.proxy(this.reloadContinueLoading,this)))},dataReset:function(){this.prevValues=null;this.start=0;this.pageSize=20;this._hideLoadMore();this.clearData()},ifPresent:function(d,c){if(d){c.apply();return{orElseCall:function(e){}}}return{orElseCall:function(e){e.call()}}},displayProgressTracker:function(){b("#raven-traceability-progress").show(0)},hideProgressTracker:function(){b("#raven-traceability-progress").hide()},loadMoreEvent:function(){b("#load-more").addClass("lastRowSpin");b(".lastRowSpin").spin("medium");this.preLoadOperation();this.fetchData(this._createRequestParams(),b.proxy(this.loadMoreCallback,this))},loadMoreCallback:function(){this.postLoadOperation();this.stopLoadingAnimation()},_createRequestParams:function(){var c=b.param(this.filterView.getCurrentValues());c=b.param({projectId:this.projectId,pageSize:this.pageSize,start:this.start,requirementStatuses:this._getSelectedRequirementStatuses(),projects:this.filterView.filterOptionsPicker.getProjectsContext(),activeTab:this.filterView.filterOptionsPicker.getActiveTab(),})+"&"+c;return c},_getSelectedRequirementStatuses:function(){if(!this.requirementStatusPicker){return""}var d=this.requirementStatusPicker.getSelectedStatuses();var c=function(e,f){return e+"|"+f};return d.reduce(c,"")},preLoadOperation:function(){this.clearMessage();b(window).off("resize");b("#raven-requirement-content-panel").block({fadeIn:0})},postLoadOperation:function(){this.processQuickFilters();var d=this;b(window).on("resize",function(){d.setParentRequirementExtension()});var c=b("#raven-requirement-content-panel");this.setParentRequirementExtension();c.css("min-height","");c.unblock();JIRA.trigger(JIRA.Events.NEW_CONTENT_ADDED,[b("#report-wrapper"),JIRA.CONTENT_ADDED_REASON.panelRefreshed])},setPaginationInfo:function(c){var e="";if(c===-1){this._hideLoadMore();b(".load-all-entries").css("display","none")}else{var d=this.start+c;if(d>=this.total||this.total===0){this._hideLoadMore()}else{b("#load-more").css("display","block")}if(d>=this.total){d=this.total;b(".load-all-entries").css("display","none")}else{b(".load-all-entries").css("display","block")}e=AJS.format("Showing {0} of {1} entries",d,this.total)}b(".info-entries").empty().append(e)},fetchData:function(e,f){var c=this;var d=new a();d.setQueryParams(e);c.filterView.getCurrentDynamicFilterValues().done(function(g){d.fetch({data:g,async:true,type:"POST",timeout:c.requestTimeOut,success:function(h){c.totalTestRuns+=h.attributes.testRunsCount;if(c.totalTestRuns>c.REASONABLE_TEST_RUNS_NUMBER&&!c.filterView.getHiddenTestRunsValue()&&!c.alreadyWarned){c._confirmationHideTestRuns(c.processData,h.attributes)}else{c.processData(h.attributes)}if(c._isReportEmpty(h.attributes.requirements)){disableExportReportButton()}else{enableExportReportButton()}},error:function(i,h){c.requestDataError(h);disableExportReportButton()},complete:function(){f.apply()}})})},loadStatusPicker:function(c){this.requirementStatusPicker.setStatuses(c);this.requirementStatusPicker.renderStatuses(c)},initStatusPicker:function(d){var c=b.proxy(this.requirementStatusChanged,this);this.requirementStatusPicker=new RAVEN.Pickers.RequirementStatusPicker(b("#raven-requirement-status-container"),d,c);this.requirementStatusPicker.renderStatuses()},processQuickFilters:function(){if(!this.processingQuickFilter){this.processingQuickFilter=true;return}if(!this.requirementStatusCounts){return}this.ifPresent(this.requirementStatusPicker,b.proxy(this.loadStatusPicker,this,this.requirementStatusCounts)).orElseCall(b.proxy(this.initStatusPicker,this,this.requirementStatusCounts))},requirementStatusChanged:function(){this.quickFiltersApply()},processData:function(d){this.requirementStatusCounts=d.requirementStatusCounts;var c=d.requirements;if(this._isReportEmpty(c)){this.$el.hide();this.processEmptyReport()}else{if(this._haveNewReportData(c)){this._showTable();this._addNewReportData(c,d.hasRestrictedIssues)}}},_showTable:function(){this.$el.css({display:"flex","flex-direction":"row"})},_haveNewReportData:function(c){return c.length>0},_addNewReportData:function(d,c){this.total=d[0].total;this.pageSize=d[0].pageSize;if(this.prevValues){this._appendData(d,c)}else{this._createDataTable(d,c)}this.setPaginationInfo(d.length);this.start+=this.pageSize},_appendData:function(f,d){this._checkAppendDataPermission(d);var c=this;f.forEach(function(g){g.totalSubRequirementCount=c._countDescendantsFromRoot(g)});b.merge(this.prevValues,f);var e=RAVEN.Report.renderRow({issues:f,hideTestRuns:c.filterView.getHiddenTestRunsValue(),contextPath:contextPath,flatten:c.filterView.getFlattenPresentationValue()});this.$el.find("#raven-traceability-report-wrapper").append(e)},_countDescendantsFromRoot:function(c){return this._countDescendants(c,1)},_countDescendants:function(c,f){var d=this;c.totalSubRequirementCount=0;if(f>=d.maxDepth){return 0}if(c.subRequirementsStatusBean!=null&&c.subRequirementsStatusBean.length>0){c.totalSubRequirementCount+=c.subRequirementsStatusBean.length;const e=c.subRequirementsStatusBean.map(function(g){return d._countDescendants(g,f+1)}).reduce(function(g,h){return g+h});c.totalSubRequirementCount+=e}return c.totalSubRequirementCount},_createDataTable:function(g,d){this._checkCreateDataPermission(d);var c=this;var f=this.$el;f.empty();this.prevValues=g&&g.filter(function(h){return !!h.allowed});this.prevValues.forEach(function(h){h.totalSubRequirementCount=c._countDescendantsFromRoot(h)});var e=RAVEN.Report.renderTable({issues:this.prevValues,contextPath:contextPath,currentUserName:this.getCurrentUsername(),hideTestRuns:c.filterView.getHiddenTestRunsValue(),flatten:c.filterView.getFlattenPresentationValue(),requiresExperimentalDialog2:this.requiresExperimentalDialog2,maxDepth:this.maxDepth});f.html(e)},_checkCreateDataPermission:function(c){if(c){this.showPermissionWarning()}else{if(!c&&!this._isFlagHidden()){this.permissionWarningFlag.close()}}},_checkAppendDataPermission:function(c){if(c){this.showPermissionWarning()}},_updateProgressTracker:function(){var c=this.start>this.total?this.total:this.start;b("#raven-progress-message").text(AJS.format("Loaded {0} out of {1} Requirements",c,this.total))},_isReportEmpty:function(c){return c.length<=0&&(!this.prevValues||this.prevValues.length===0)},_hideLoadMore:function(){b("#load-more").css("display","none")},processEmptyReport:function(){b("#tests-row-wrapper").hide();this.clearData();this.setPaginationInfo(-1);this.stopLoadingAnimation();AJS.messages.generic(b("#message-row-wrapper"),{body:"No matched requirements found.",closeable:false})},clearData:function(){if(this.$el){this.$el.empty()}},requestDataError:function(d){var c=this;this.$el.css("cssText","border-top-width: 0px !important;");if(this.$el){this.$el.empty();c.setPaginationInfo(-1)}AJS.messages.error(b("#message-row-wrapper"),{title:"An error occurred while fetching Requirements from server",body:d.statusText+": "+d.responseText,closeable:false});c.stopLoadingAnimation();c.stopLoadingData();c.dataReset()},showPermissionWarning:function(){if(!this.permissionWarningFlag){this.permissionWarningFlag=require("aui/flag")({type:"warning",body:RAVEN.Report.renderPermissionWarning(),close:"manual"})}else{if(this._isFlagHidden()){this._showFlag()}}},_isFlagHidden:function(){return !this.permissionWarningFlag||b(this.permissionWarningFlag).attr("aria-hidden")==="true"},_showFlag:function(){b(this.permissionWarningFlag).attr("aria-hidden","false")},stopLoadingData:function(){this.continueLoading=false;this.hideProgressTracker()},stopLoadingAnimation:function(){b("#raven-requirement-content-panel").unblock().spinStop();b("#report-wrapper").unblock();b(".raven-requirement-header").unblock().spinStop();b(".lastRowSpin").unblock().spinStop().removeClass("lastRowSpin");b("#load-more").css("color","#999")},initialize:function(c){if(c){_.extend(this,_.pick(c,"requiresExperimentalDialog2"));_.extend(this,_.pick(c,"filterView"))}this._delegateUnscopedEvents();this.projectId=b("#selected-project-id").val();this.listenTo(this.filterView,"raven.dialog.apply:presentation-filter.flatten-requirements",this.triggerFlattenRequirements);this.listenTo(this.filterView,"raven.dialog.apply:presentation-filter.hide-testruns",this.hideTestRunsEvent);this.listenTo(this.filterView,"raven.dialog.apply:requirements-filter",this.filtersSubmit);this.listenTo(this.filterView,"raven.dialog.apply:scope-filter",this.scopeSubmit);disableExportReportButton()},setParentRequirementExtension:function(){b(".parent-row").each(function(){var f=b("#"+this.id);var c=f.find(".hide-subreq");var e=f.find(".parent-extension-container");c.unbind("click");c.click(function(){f.find(".subrequirement-row").toggle();e.toggle();if(f.find(".hide-subreq").hasClass("subreq-enable-expand")){c.removeClass("subreq-enable-expand");c.addClass("subreq-disable-expand")}else{c.addClass("subreq-enable-expand");c.removeClass("subreq-disable-expand")}});var d=e.css("display");if(d==="none"){f.find(".subrequirement-row").toggle();e.toggle()}f.find(".requirement-issueimage-container").each(function(h,i){const l=b(i).parent();const j=b(i).find("> .parent-extension-container");if(j.length>0){var g=j.offset().top+l.find(".traceability-requirement-issue-icon").first().height();l.find(".requirement-issueimage-container").first().height((l.find(".subrequirement-row").first().offset().top-g));var k=(l.find(" > .subrequirement-row").last().find(".horizontal-dots-extensions").first().offset().top-j.offset().top)+(l.find(" > .subrequirement-row").last().find(".horizontal-dots-extensions").first().height());j.height(k)}});if(d==="none"){f.find(".subrequirement-row").toggle();e.toggle()}})},getCurrentUsername:function(){var c=null;b.ajax({type:"GET",async:false,url:contextPath+"/rest/api/2/myself",success:function(d){c=d.name},error:function(){}});return c},_delegateUnscopedEvents:function(){var c=this;b(document).off(".raven.report.traceability");b.each(this.unscopedEvents,function(f,g){var e=f.substring(0,f.indexOf(" "));var d=f.substring(f.indexOf(" ")+1);b(document).on(e,d,b.proxy(c[g],c))})},_undelegateUnscopedEvents:function(){b(document).off(".raven.report.traceability")},checkShowHowToRead:function(){if(this.isHowToRead===null){this.isHowToRead=this.getIsHowToRead()}var c=b(".raven-how-to-read-chart").is(":visible");if(this.isHowToRead&&!c){this.showHowToRead()}else{if(!c){this.hideHowToRead()}}},getIsHowToRead:function(){var c=false;b.ajax({type:"GET",async:false,url:contextPath+"/rest/raven/1.0/report/traceability/isHowToRead",success:function(e,f,d){c=e},error:function(e,f,d){console.log(e);c=null}});return c},disableHowToRead:function(){b(".header-filter").attr("data-initialized",false);this.hideHowToRead();this.setHowToReadServer("disabled")},enableHowToRead:function(){b(".header-filter").attr("data-initialized",false);this.showHowToRead();this.setHowToReadServer("enabled")},setHowToReadServer:function(c){b.ajax({type:"POST",data:JSON.stringify({howToRead:c}),url:contextPath+"/rest/raven/1.0/report/traceability/setHowToRead",contentType:"application/json",error:function(e,f,d){console.log(e)}})},showHowToRead:function(){b(".raven-how-to-read-chart").show("fast");b("#raven-notifications-icon").hide("fast");b("#enable-how-to-read-msg").hide("fast")},hideHowToRead:function(){b(".raven-how-to-read-chart").hide("fast");b("#raven-notifications-icon").show("fast");b("#enable-how-to-read-msg").show("fast")},destroy:function(){b("#show-tooltip").remove();b("#load-all-warning").remove();if(!this._isFlagHidden()){this.permissionWarningFlag.close()}this.undelegateEvents();this._undelegateUnscopedEvents();b(".raven-jira-inlinedialog").remove();this.remove();this.unbind()},removeAssigneeIcon:function(){this.filterView.removeAssigneeIcon()},filtersSubmit:function(){this.resetStatusPicker();this.dataReset();this.render();return false},resetStatusPicker:function(){this.ifPresent(this.requirementStatusPicker,this.optionalFunc(this.requirementStatusPicker,"reset"))},optionalFunc:function(c,d){if(c){return c[d]}return null},firstGenerateReport:function(){const c=b("#raven-first-report");this.minHeight=c.height();c.hide();this._showTable();b(this.quickFilter).show();b(".load-all-entries").show();this.preLoadOperation();this.isFirstReport=false;this.render()},scopeSubmit:function(){this.resetStatusPicker();this.reloadCurrentRequirements()},quickFiltersApply:function(){this.processingQuickFilter=false;this.reloadCurrentRequirements()},dialogApply:function(){this.saveFilterValues();this.render();this.renderFilterSummary();this.closeDialog()},preventDefault:function(c){c.stopPropagation();c.preventDefault()},removeExistingTestRuns:function(){b(".hideable").remove();b("#hide_testruns").prop("checked",true);b(".four-columns").addClass("three-columns").removeClass("four-columns")},hideTestRunsEvent:function(){this.totalTestRuns=0;this.resetStatusPicker();this.reloadCurrentRequirements();this.setParentRequirementExtension()},clearMessage:function(){b("#message-row-wrapper").empty()},triggerFlattenRequirements:function(){this.resetStatusPicker();this.dataReset();this.render()}})})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/js/report/filters/report-traceability-filter.js' */
(function(h){RAVEN.namespace("RAVEN.Report.Filters");var l=Backbone.Model.extend({urlRoot:function(){return contextPath+"/rest/raven/1.0/report/traceability/filterValues"}});var d=Backbone.Model.extend({urlRoot:function(){return contextPath+"/rest/raven/1.0/report/traceability/filterValues/fromQueryParam"}});var j={EXEC_SCOPE:"execScope",VERSION:"version",TEST_PLAN:"testPlan",ENVIRONMENT:"environment",HIDE_TEST_RUNS:"hideTestRuns",FLATTEN_REQUIREMENTS:"flattenRequirements"};RAVEN.Report.Filters.TraceabilityReportFiltersView=RAVEN.Component.ReportFilter.extend({el:"#filter-content-place-holder",unscopedEvents:{"click.raven.report.traceability-filter #raven-dialog-traceability-clear":"resetScopeAnalysis","click.raven.report.traceability-filter #raven-traceability-scope-apply":"applyScopeAnalysis","click.raven.report.traceability-filter #requirement-presentation-option a":"applyFlattenRequirements","click.raven.report.traceability-filter #hide_testruns":"applyHideTestRuns","click.raven.report.traceability-filter #raven-traceability-scope-dialog-cancel":"closeScopeDialog","click.raven.report.traceability-filter .scope-title":"clickTitleScopeNotSelected"},projectId:null,NO_ANALISYS_VERSION:0,queryParamsDef:j,versionName:null,environmentName:null,testPlan:null,filterButtonId:"raven-traceability-dynamic-filter-button",filterOptionsPicker:null,isEnterprise:false,generateReportId:"#raven-load-traceability-requirement-converage-report",userPrefsBasedFilterValuesResource:function(){return new l()},queryParamsBasedFilterValuesResource:function(){return new d()},initialize:function(){this.projectId=h("#selected-project-id").val();this.isEnterprise=h("#isXrayEnterprise").val()==="true";this.render();f.call(this)},getHiddenTestRunsValue:function(){return this.getCurrentValues()[j.HIDE_TEST_RUNS]},getFlattenPresentationValue:function(){return this.getCurrentValues()[j.FLATTEN_REQUIREMENTS]},buildFilterComponent:function(o){if(!o||!o.attributes){console.error("Couldn't fetch filter values");return}var n=JSON.parse(o.attributes.scope);var m=RAVEN.Report.renderFilterCoverage({versions:o.attributes.versions,requiresExperimentalDialog2:o.attributes.requiresExperimentalDialog2,scope:n,contextPath:contextPath});if(n.execScope!==RAVEN.ReportsContants.TESTPLAN_NAME&&n.execScope!==RAVEN.ReportsContants.VERSION_NAME){this.execScope=RAVEN.ReportsContants.VERSION_NAME}else{this.execScope=n.execScope}this.$el.empty();this.$el.html(m);a.call(this);if(this.execScope===RAVEN.ReportsContants.TESTPLAN_NAME){toggleScope(h(".scope-title[data-mode=4]"))}JIRA.trigger(JIRA.Events.NEW_CONTENT_ADDED,[h("#report-wrapper"),JIRA.CONTENT_ADDED_REASON.panelRefreshed])},renderFilterSummary:function(){const n=this;h(this.generateReportId).attr("disabled",true);const o=new Set();if(!this.isEnterprise){o.add("project")}const m=new RAVEN.common.components.util.JiraFieldsData({issueTypeId:h("#requirement-issue-type-ids").val(),excludeFields:o});n._createFiltersButton(true);m.getPromise().done(function(p){n._renderDynamicFilterButton(p)});renderScopeParametersGeneric(n.execScope,n.versionName,n.testPlan,n.environmentName)},getCurrentDynamicFilterValues:function(){var n=this;var m=h.Deferred();var o={filtersValue:"",basicTabJql:""};if(this.filterOptionsPicker){this.filterOptionsPicker.getBasicTabJql().done(function(p){o.filtersValue=JSON.stringify(n.filterOptionsPicker.getValue(true));o.basicTabJql=p||"";o.projects=n.filterOptionsPicker.getProjectsContext();m.resolve(o)})}else{m.resolve(o)}return m.promise()},saveCurrentFilterValues:function(){k.call(this);b.call(this)},_createFiltersButton:function(m){if(this.filterOptionsPicker){return}const n=h("#raven-filter-button-wrapper");n.empty();new RAVEN.DataTable.DataTableHeaderButtons(n,this.filterButtonId,"aui-button-subtle",true,false);if(m===true){h("#"+this.filterButtonId).block()}},_initFilterDialogFromURLParam:function(n){if(this.isSharedUrl()){this.filterOptionsPicker.addFieldsFromQueryParams()}else{if(this.userPrefDynamicFilters){const m=JSON.parse(this.userPrefDynamicFilters);this.filterOptionsPicker.setBasicTabValues(m);this.filterOptionsPicker.setAdvancedTabValues(m);h(document).trigger(RAVEN.Component.ReportFilterEvents.DYNAMIC_FILTERS_UPDATED,this.filterOptionsPicker.getValueQueryParams())}else{this.filterOptionsPicker.addDefaultProject()}}n.unblock()},_renderDynamicFilterButton:function(r){if(this.filterOptionsPicker){h(document).trigger(RAVEN.Component.ReportFilterEvents.DYNAMIC_FILTERS_UPDATED,this.filterOptionsPicker.getValueQueryParams());h(this.generateReportId).attr("disabled",false);return}this._createFiltersButton();var q=["project","fixfor",h("#sprint-custom-field-id").val(),"component","status","resolution","text"];q=q.filter(function(s){return !!s});const p=h("#"+this.filterButtonId);const o={id:"savedfilter",name:"Saved Filters"};o.renderer=RAVEN.common.components.util.SAVED_FILTER(o.id,o.name,10);const n={};n[o.id]=RAVEN.common.components.util.SAVED_FILTER_TEXT_RENDER;r.push(o);this.filterOptionsPicker=new RAVEN.common.components.FiltersPicker({$buttonElement:p,id:this.filterButtonId+"-modal",availableFields:r||[],defaultFields:q,customRenders:[o],customButtonTextRenderer:n,changeButtonText:true,confirmText:"Apply",projectsContext:[this.projectId],isEnterprise:this.isEnterprise});h(this.generateReportId).attr("disabled",false);const m=this;p.on("initialized",function(){p.on("search-button-click.saving-filters-context",function(){RAVEN.Report.URLBar.Proxy.get().replaceFieldsReportURLBarWithQuery(m.filterOptionsPicker.getValueQueryParams());m.trigger("raven.dialog.apply:requirements-filter")});if(document.readyState==="complete"){m._initFilterDialogFromURLParam(p)}else{h(window).load(function(){m._initFilterDialogFromURLParam(p)})}})},destroy:function(){this.undelegateEvents();if(this.filterOptionsPicker){this.filterOptionsPicker._destroyOldModals()}i.call(this);h("#raven-filter-inline-dialog").remove();h("#raven-scope-inline-dialog").remove();this.remove();RAVEN.Component.ReportFilter.prototype.destroy.call(this)},applyScopeAnalysis:function(){var m=this.execScope;this.execScope=getExecutionScope();if(!checkTestPlanKey(this.execScope,this.testPlanPicker)){this.execScope=m;return false}k.call(this);RAVEN.Component.ReportFilter.prototype.closeDialogAndSyncURLQueryParams.call(this,"#raven-scope-inline-dialog");this.trigger("raven.dialog.apply:scope-filter")},applyFlattenRequirements:function(){this.applyPresentation();this.trigger("raven.dialog.apply:presentation-filter.flatten-requirements")},applyHideTestRuns:function(){this.applyPresentation();this.trigger("raven.dialog.apply:presentation-filter.hide-testruns")},applyPresentation:function(){AJS.$("#raven-requirement-presentation").trigger("aui-button-invoke");if(AJS.$("#raven-requirement-presentation").attr("aria-expanded")==="true"){AJS.$("#raven-requirement-presentation").trigger("aui-button-invoke")}b.call(this);RAVEN.Component.ReportFilter.prototype.closeDialogAndSyncURLQueryParams.call(this)},clickTitleScopeNotSelected:function(m){toggleScope(m.currentTarget);m.stopPropagation()},resetScopeAnalysis:function(){resetScopeValuesGeneric(this.versionPicker,this.environmentPicker,this.testPlanPicker);renderScopeParametersGeneric(this.execScope,this.versionName,this.testPlan,this.environmentName)},closeScopeDialog:function(){closeDialogGeneric("#raven-scope-inline-dialog")}});function a(){h("#raven-requirement-coverage-form").on("submit",function(o){o.preventDefault()});var n=h("#raven-report-analysis-version-select");this.versionPicker=createVersionScopePicker(n);var m=h("#raven-report-analysis-test-plan-select");this.testPlanPicker=g(m);h("#raven-report-analysis-test-plan-select-field").attr("placeholder","Choose Test Plan Key");this.environmentPicker=createEnvironmentSingleSelectPicker(h("#raven-report-analysis-environment-select"));e()}function g(m){return new AJS.SingleSelect({element:m,showDropdownButton:true,submitInputVal:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:contextPath+"/rest/raven/1.0/issue/picker?issueType=TESTPLAN",formatResponse:function(o){var p=o.sections[0];var n=new AJS.GroupDescriptor({weight:0,id:p.id+"-opt-group",replace:true,label:p.label+"("+p.sub+")"});h(p.issues).each(function(r,q){var s=new AJS.ItemDescriptor({value:q.key,label:q.key+" - "+q.summaryText,title:q.summary,icon:contextPath+q.img,allowDuplicate:false,});n.addItem(s)});return[n]}}})}function e(m){var n="/rest/gadget/1.0/pickers/filters";h(".raven-default-filter-picker",m).each(function(){var q=h(this);if(q.data("aui-ss")){return}var o={showAvatar:true},r=q.data("inputValue");var p=new AJS.SingleSelect({element:q,submitInputVal:true,showDropdownButton:!!q.data("show-dropdown-button"),errorMessage:AJS.format("filters.picker.invalid.filter","'{0}'"),ajaxOptions:{url:contextPath+n,query:true,data:o,formatResponse:function(s){var t=[];if(s.filters){h.each(h(s.filters),function(u,v){t[u]=new AJS.ItemDescriptor({value:v.id,label:v.name})})}return t}},inputText:r});q.data("field-support-obj",p);p.setFieldWidth(500)})}function c(){return !h("#hierarchical-requirements-option").hasClass("checked")}function k(){var q=this.getCurrentValues();this.execScope=getExecutionScope();q[j.EXEC_SCOPE]=this.execScope;if(this.execScope===RAVEN.ReportsContants.TESTPLAN_NAME){this.removeFilterValue(j.VERSION);var p=getGenericSelectValue("#raven-report-analysis-test-plan-select");if(p){this.testPlan=p;q[j.TEST_PLAN]=p}else{this.removeFilterValue(j.TEST_PLAN)}}else{this.removeFilterValue(j.TEST_PLAN);var o=getVersionGeneric(this.versionPicker);if(o!=null){var n=o.value;if(n&&n!="0"){q[j.VERSION]=n}else{this.removeFilterValue(j.VERSION)}this.versionName=o.label}}var m=getEnvironmentNameGeneric(this.execScope,this.environmentPicker);if(m!=null){q[j.ENVIRONMENT]=m.value;this.environmentName=m.label}else{this.removeFilterValue(j.ENVIRONMENT)}}function b(){this.getCurrentValues()[j.HIDE_TEST_RUNS]=getCheckBoxValue("#hide_testruns");this.getCurrentValues()[j.FLATTEN_REQUIREMENTS]=c()}function f(){var m=this;i();h.each(this.unscopedEvents,function(p,q){var o=p.substring(0,p.indexOf(" "));var n=p.substring(p.indexOf(" ")+1);h(document).on(o,n,h.proxy(m[q],m))})}function i(){h(document).off(".raven.report.traceability-filter")}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/templates/reports/testplan-report/filter-header.soy' */
// This file was automatically generated from filter-header.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Report.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Report == 'undefined') { RAVEN.Report = {}; }


RAVEN.Report.renderFilterTestPlans = function(opt_data, opt_ignored) {
  var output = '<form action="#" id="raven-requirement-coverage-form" class="aui"><a id="raven-filter-trigger" href="#" aria-controls="raven-testplan-filter-inline-dialog" data-aui-trigger class="aui-button aui-style-default raven-dropdown2-arrow aui-button-subtle">' + soy.$$escapeHtml('Filter(s)') + '</a><a data-aui-trigger aria-controls="show-tooltip" id="raven-notifications-icon" style="display:none;margin-left:4px;margin-right:4px;"></a><a id="enable-how-to-read-msg" style="display:none; font-size:13px;">' + soy.$$escapeHtml('How to read this report') + '</a></form>' + ((opt_data.requiresExperimentalDialog2) ? '<aui-inline-dialog2 id="raven-testplan-filter-inline-dialog" class="aui-layer aui-inline-dialog" data-aui-alignment="bottom left" data-aui-responds-to="toggle" aria-hidden="true"><div class="aui-inline-dialog-contents" >' : '<aui-inline-dialog id="raven-testplan-filter-inline-dialog" class="" data-aui-alignment="bottom left" aria-hidden="true">') + '<div id="raven-testplan-filter-dialog"><div id="raven-testplan-content-panel"><div class="filter-fieldset" id="raven-requirement-filter"><h4 class="filter-title selected" data-mode="1">' + soy.$$escapeHtml('Filters') + '</h4><span class="spliter">|</span><h4 class="filter-title" data-mode="2">' + soy.$$escapeHtml('Saved Filter') + '</h4><form action="#" id="raven-testplans-filters-form" method="post" class="aui top-label filter-form"><div class="aui-item"><div class="filter-field top-label filter-select" style="display: none"><label class="aui top-label" for="raven-testplan-report-filter-project">' + soy.$$escapeHtml('Project') + '</label><select id="raven-testplan-report-filter-project" name="project" title="' + soy.$$escapeHtml('All') + '" class="select raven-multi-select hidden multi-select" multiple="multiple">';
  if (opt_data.projects != null) {
    var projectList24 = opt_data.projects;
    var projectListLen24 = projectList24.length;
    for (var projectIndex24 = 0; projectIndex24 < projectListLen24; projectIndex24++) {
      var projectData24 = projectList24[projectIndex24];
      output += '<option value="' + soy.$$escapeHtml(projectData24) + '" selected title="' + soy.$$escapeHtml(projectData24) + '">' + soy.$$escapeHtml(projectData24) + '</option>';
    }
  }
  output += '</select></div><div class="filter-field top-label filter-select"><label class="aui top-label" for="raven-testplan-filter-fixversion">' + soy.$$escapeHtml('Fix Version') + '</label><select class="select" id="raven-testplan-filter-fixversion" name="fixversion" title="' + soy.$$escapeHtml('All') + '"><option value="-1">' + soy.$$escapeHtml('All') + '</option>' + ((opt_data.version != null) ? '<option value="' + soy.$$escapeHtml(opt_data.version) + '" selected title="' + soy.$$escapeHtml(opt_data.version) + '">' + soy.$$escapeHtml(opt_data.version) + '</option> ' : '');
  var versionList49 = opt_data.versions;
  var versionListLen49 = versionList49.length;
  for (var versionIndex49 = 0; versionIndex49 < versionListLen49; versionIndex49++) {
    var versionData49 = versionList49[versionIndex49];
    output += '<option value="' + soy.$$escapeHtml(versionData49.id) + '" title="' + soy.$$escapeHtml(versionData49.name) + '">' + soy.$$escapeHtml(versionData49.name) + '</option>';
  }
  output += '</select></div><div class="filter-field top-label filter-select"><label class="aui top-label" for="raven-testplan-filter-assignee">' + soy.$$escapeHtml('Assignee') + '</label><select class="select raven-default-user-picker" id="raven-testplan-filter-assignee" name="assignee" title="' + soy.$$escapeHtml('Assignee User') + '" data-show-dropdown-button="true"><option value="-1">' + soy.$$escapeHtml('All') + '</option>' + ((opt_data.assigneeUserPref && opt_data.assigneeUserPref.active == true) ? '<optgroup label="All Users"><option value="' + soy.$$escapeHtml(opt_data.assigneeUserPref.name) + '" selected="selected" style="background-image: url(' + soy.$$escapeHtml(opt_data.assigneeUserPref.avatarUrls['16x16']) + ');">' + soy.$$escapeHtml(opt_data.assigneeUserPref.displayName) + '</option></optgroup>' : '') + '</select></div><div class="filter-field top-label no-label" style="margin-top: 1px;"><input class="text" type="input" id="raven-testplan-filter-contains" value="' + ((opt_data.userPreferences.contains) ? soy.$$escapeHtml(opt_data.userPreferences.contains) : '') + '" placeholder="' + soy.$$escapeHtml('Issue Key or Summary') + '"></div></div><div class="aui-item"><div class="filter-field top-label filter-select"><label class="aui top-label" for="raven-testplan-filter-status">' + soy.$$escapeHtml('Status') + '</label><select class="multi-select raven-multi-select long-field hidden" id="raven-testplan-filter-status" name="status" multiple="multiple" style="display: none;" title="' + soy.$$escapeHtml('Workflow Status') + '">';
  var selectedStatusList86 = soy.$$getMapKeys(opt_data.selectedStatuses);
  var selectedStatusListLen86 = selectedStatusList86.length;
  for (var selectedStatusIndex86 = 0; selectedStatusIndex86 < selectedStatusListLen86; selectedStatusIndex86++) {
    var selectedStatusData86 = selectedStatusList86[selectedStatusIndex86];
    output += '<option value="' + soy.$$escapeHtml(selectedStatusData86) + '" title="' + soy.$$escapeHtml(selectedStatusData86) + '" selected>' + soy.$$escapeHtml(selectedStatusData86) + '</option>';
  }
  output += '</select></div><div class="filter-field top-label filter-select"><label class="aui top-label" for="raven-testplan-filter-resolution">' + soy.$$escapeHtml('Resolution') + '</label><select class="select" id="raven-testplan-filter-resolution" name="resolution" title="' + soy.$$escapeHtml('Resolution') + '"><option value="-1">' + soy.$$escapeHtml('All') + '</option><option value="-2" title="Unresolved" ' + ((opt_data.userPreferences.resolutionId == -2) ? ' selected ' : '') + '>Unresolved</option>';
  var resolutionList106 = opt_data.resolutions;
  var resolutionListLen106 = resolutionList106.length;
  for (var resolutionIndex106 = 0; resolutionIndex106 < resolutionListLen106; resolutionIndex106++) {
    var resolutionData106 = resolutionList106[resolutionIndex106];
    output += '<option value="' + soy.$$escapeHtml(resolutionData106.id) + '" title="' + soy.$$escapeHtml(resolutionData106.description) + '" ' + ((resolutionData106.id == opt_data.userPreferences.resolutionId) ? ' selected ' : '') + '>' + soy.$$escapeHtml(resolutionData106.name) + '</option>';
  }
  output += '</select></div></div><div class="checkbox"><input id="include-previous-versions-option" name="include-previous-versions" class="checkbox" type="checkbox" ' + ((opt_data.userPreferences.includePreviousVersions == true) ? ' checked' : '') + '><label for="include-previous-versions-option">' + soy.$$escapeHtml('Include Previous Versions') + '</label></div></form></div><form action="#" id="raven-requirement-savedfilter-form" method="post" class="aui top-label filter-form" style="display: none;"><div class="filter-field top-label"><label class="aui top-label" for="raven-testplan-filter-saved">' + soy.$$escapeHtml('Saved Filter') + '</label><select class="select raven-default-filter-picker" id="raven-testplan-filter-saved" name="savedFilter" title="' + soy.$$escapeHtml('Pick a Saved Filter') + '" data-show-dropdown-button="true">' + ((opt_data.savedFilter) ? '<option value="' + soy.$$escapeHtml(opt_data.savedFilter.id) + '" selected="selected" title="' + soy.$$escapeHtml(opt_data.savedFilter.description) + '">' + soy.$$escapeHtml(opt_data.savedFilter.name) + '</option>' : '') + '</select></div></form><div class="raven-dialog-buttons-container"><div class="raven-dialog-buttons"><button id="raven-testplan-filters-dialog-apply" class="aui-button js-save-button">' + soy.$$escapeHtml('Apply') + '</button><button id="raven-dialog-clear" class="aui-button js-save-button">' + soy.$$escapeHtml('Clear') + '</button><a id="raven-testplan-dialog-cancel" style="float: right;" class="aui-button aui-button-link js-cancel-button">' + soy.$$escapeHtml('Cancel') + '</a></div></div></div></div></div>' + ((opt_data.requiresExperimentalDialog2) ? '</div>' : '') + '</aui-inline-dialog>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Report.renderFilterTestPlans.soyTemplateName = 'RAVEN.Report.renderFilterTestPlans';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/templates/reports/testplan-report/testplan-report.soy' */
// This file was automatically generated from testplan-report.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Report.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Report == 'undefined') { RAVEN.Report = {}; }


RAVEN.Report.renderTestPlanReport = function(opt_data, opt_ignored) {
  return '<div id ="raven-content-wrapper">' + RAVEN.Report.renderHowToRead({howToRead: 'Shows a list of Test Plans with consolidated information for each one, such as test statuses count, overall progress and Test Environments metrics.\x3c/br\x3e\x3c/br\x3e This helps you analyze the current status, the progress and success rate of the Tests of the Test Plan and see the amount of linked defects and their respective status.', link: 'https://docs.getxray.app/display/XRAY/Test+Plans+Report', requiresExperimentalDialog2: opt_data.requiresExperimentalDialog2}) + '<div class="header-filter" data-initialized="false" style="width:100%; margin:8px; padding-bottom:6px;"><div id="arg-validation-messages"></div><div id="testplan-filter-content-place-holder" style="float:left; max-width:80%;"></div><div style="float: right; min-width: 20%"><div class="load-all-entries"><a data-aui-trigger aria-controls="load-all-warning" href="#load-all-warning"><span class="aui-icon aui-icon-small aui-iconfont-info load-all-info"></span></a><a id="load-all-bt" style="font-size:13px;">' + soy.$$escapeHtml('Load all') + '</a>' + ((opt_data.requiresExperimentalDialog2) ? '<aui-inline-dialog2 id="load-all-warning" class="aui-layer aui-inline-dialog" data-aui-alignment="bottom right" data-aui-responds-to="toggle" aria-hidden="true" style="max-width:496px"><div class="aui-inline-dialog-contents" ><p>' + soy.$$escapeHtml('Loading all entries may be memory and time consuming if there are many entries') + '</p></div></aui-inline-dialog2>' : '<aui-inline-dialog id="load-all-warning" alignment="bottom right" style="max-width:496px"><p>' + soy.$$escapeHtml('Loading all entries may be memory and time consuming if there are many entries') + '</p></aui-inline-dialog>') + '</div><div class="info-entries"></div></div></div><div style="clear: both"></div><div id="raven-testplans-content-panel" style="min-width: 600px;">' + RAVEN.Report.renderGenerateReport({imgUrl: 'xray-test-plans-list-report.png', buttonID: 'raven-load-testplan-requirement-converage-report', contextPath: opt_data.contextPath}) + '<div id="message-row-wrapper" style="height:90%;"></div><div id="testplans-row-wrapper" style="height:100%;"></div><div id="load-more">' + soy.$$escapeHtml('More') + '</div></div></div><div id="raven-testplan-report-progress" style="display:none"><div id="raven-progress-message"/><button class="aui-button" id="raven-stop-loading">' + soy.$$escapeHtml('Stop Loading') + '</button></div>';
};
if (goog.DEBUG) {
  RAVEN.Report.renderTestPlanReport.soyTemplateName = 'RAVEN.Report.renderTestPlanReport';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/templates/reports/testplan-report/testPlanTable.soy' */
// This file was automatically generated from testPlanTable.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Report.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Report == 'undefined') { RAVEN.Report = {}; }


RAVEN.Report.renderTestPlansTable = function(opt_data, opt_ignored) {
  var output = '<div id="table-container"><table id="testplan-report-table" class="aui"><thead class="testplan-report-thead1"><tr><th colspan="9"/><th id="tests-by-status" class="thead-group thead_GL"  colspan="' + soy.$$escapeHtml(opt_data.statuses.length) + '">' + soy.$$escapeHtml('Tests By Status') + '</th><th id="tests-by-type" class="thead-group thead_GL"  colspan="4">' + soy.$$escapeHtml('Tests By Test Type') + '</th><th colspan="2" class="thead-group thead_GL"/>';
  var length__soy10 = (opt_data.testEnvironments != null ? opt_data.testEnvironments : 0).length;
  output += '<th id="linked-defects" class="thead-group thead_GL" colspan="' + soy.$$escapeHtml(length__soy10 + 1) + '">' + soy.$$escapeHtml('Success rate by Test environments') + '</th><th id="linked-defects" class="thead-group thead_GL" colspan="2">' + soy.$$escapeHtml('Linked Defects') + '</th></tr></thead><thead class="testplan-report-thead2"><tr><th id="tb-TE-key" class="thead_medium"><div><span>' + soy.$$escapeHtml('Key') + '</span></div></th><th id="tb-summary" class="thead_large"><div><span>' + soy.$$escapeHtml('Summary') + '</span></div></th><th id="tb-version"><div><span>' + soy.$$escapeHtml('Version') + '</span></div></th><th id="tb-planned-start" class="thead_date"><div><span>' + soy.$$escapeHtml('Planned start date') + '</span></div></th><th id="tb-planned-end" class="thead_date"><div><span>' + soy.$$escapeHtml('Planned end date') + '</span></div></th><th id="tb-testenv"><div><span>' + soy.$$escapeHtml('Test Environments') + '</span></div></th><th id="tb-total-tests" class="thead_V"><div><span>' + soy.$$escapeHtml('#Test Executions') + '</span></div></th><th id="tb-total-tests" class="thead_V"><div><span>' + soy.$$escapeHtml('#Test runs') + '</span></div></th><th id="tb-total-tests" class="thead_V"><div class="thead_LastLabel"><span>' + soy.$$escapeHtml('Total Tests') + '</span></div></th>';
  var statusList36 = opt_data.statuses;
  var statusListLen36 = statusList36.length;
  for (var statusIndex36 = 0; statusIndex36 < statusListLen36; statusIndex36++) {
    var statusData36 = statusList36[statusIndex36];
    output += '<th style="color: ' + soy.$$escapeHtml(statusData36.statusColor) + '" class="thead_V"><div ' + ((statusIndex36 == statusListLen36 - 1) ? ' class="thead_LastLabel" ' : '') + '><span>' + soy.$$escapeHtml(statusData36.status) + '</span></div></th>';
  }
  output += '<th id="tb-manual" class="thead_V"><div><span>' + soy.$$escapeHtml('Manual') + '</span></div></th><th id="tb-cucumber" class="thead_V"><div><span>' + soy.$$escapeHtml('Cucumber') + '</span></div></th><th id="tb-generic" class="thead_V"><div><span>' + soy.$$escapeHtml('Generic') + '</span></div></th><th id="tb-other" class="thead_V"><div class="thead_LastLabel"><span>' + soy.$$escapeHtml('Other') + '</span></div></th><th id="tb-progress" class="thead_V"><div><span>' + soy.$$escapeHtml('Progress') + '</span></div></th><th id="tb-success" class="thead_V"><div class="thead_LastLabel"><span>' + soy.$$escapeHtml('Success rate') + '</span></div></th>';
  var teList60 = opt_data.testEnvironments;
  var teListLen60 = teList60.length;
  for (var teIndex60 = 0; teIndex60 < teListLen60; teIndex60++) {
    var teData60 = teList60[teIndex60];
    output += '<th class="thead_V"><div><span>' + soy.$$escapeHtml(teData60) + '</span></div></th>';
  }
  output += '<th class="thead_GR" style="text-align: right;"><div style="width: 30px; margin: auto;"><span>-&nbsp;&nbsp;&nbsp;&nbsp;</span></div></th><th id="tb-open-defects"><div><span>' + soy.$$escapeHtml('Open') + '</span></div></th><th id="tb-closed-defects"><div><span>' + soy.$$escapeHtml('Closed') + '</span></div></th></tr></thead><tbody>' + RAVEN.Report.renderTestPlanRows(opt_data) + '</tbody></table><div class="loading-wheel"></div></div><div style="clear: both;"></div>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Report.renderTestPlansTable.soyTemplateName = 'RAVEN.Report.renderTestPlansTable';
}


RAVEN.Report.renderTestPlanRows = function(opt_data, opt_ignored) {
  var output = '';
  var issueList77 = opt_data.issues;
  var issueListLen77 = issueList77.length;
  for (var issueIndex77 = 0; issueIndex77 < issueListLen77; issueIndex77++) {
    var issueData77 = issueList77[issueIndex77];
    output += '<tr><td><a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/browse/' + soy.$$escapeHtml(issueData77.issueKey) + '">' + soy.$$escapeHtml(issueData77.issueKey) + '</td><td><a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/browse/' + soy.$$escapeHtml(issueData77.issueKey) + '">' + soy.$$escapeHtml(issueData77.issueSummary) + '</td><td>' + soy.$$escapeHtml(issueData77.version != null ? issueData77.version : '') + '</td><td>' + soy.$$escapeHtml(issueData77.startDate != null ? issueData77.startDate : '') + '</td><td>' + soy.$$escapeHtml(issueData77.endDate != null ? issueData77.endDate : '') + '</td><td>';
    var teList97 = issueData77.testEnvironments;
    var teListLen97 = teList97.length;
    for (var teIndex97 = 0; teIndex97 < teListLen97; teIndex97++) {
      var teData97 = teList97[teIndex97];
      output += '<a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/secure/IssueNavigator.jspa?reset=true&mode=hide&jqlQuery=' + soy.$$escapeHtml(issueData77.testEnvironmentJql) + ' \'' + soy.$$escapeHtml(teData97) + '\'"><span class="aui-lozenge aui-lozenge-subtle aui-lozenge-complete xray-test-env-field-report">' + soy.$$escapeHtml(teData97) + '</span></a>';
    }
    output += '</td><td class="report-count" style="border-left: dotted 1px #c4cad3">' + ((issueData77.testExecutionCount == 0) ? '0' : '<a href=\'' + soy.$$escapeHtml(opt_data.contextPath) + '/issues/?jql=issue in (testPlanTestExecutions("' + soy.$$escapeHtml(issueData77.issueKey) + '"))\'>' + soy.$$escapeHtml(issueData77.testExecutionCount) + '</a>') + '</td><td class="report-count" style="border-left: dotted 1px #c4cad3">' + soy.$$escapeHtml(issueData77.testRunCount) + '</td><td class="report-count thead_GR" style="border-left: dotted 1px #c4cad3">' + ((issueData77.testCount == 0) ? '0' : '<a href=\'' + soy.$$escapeHtml(opt_data.contextPath) + '/issues/?jql=issue in (testPlanTests("' + soy.$$escapeHtml(issueData77.issueKey) + '"))\'>' + soy.$$escapeHtml(issueData77.testCount) + '</a>') + '</td>';
    var statusList135 = opt_data.statuses;
    var statusListLen135 = statusList135.length;
    for (var statusIndex135 = 0; statusIndex135 < statusListLen135; statusIndex135++) {
      var statusData135 = statusList135[statusIndex135];
      output += '<td class="report-count" style="border-left: dotted 1px #c4cad3">' + ((issueData77.testCountByStatus.countByStatus[statusData135.status] == 0) ? '0' : '<a href=\'' + soy.$$escapeHtml(opt_data.contextPath) + '/issues/?jql=issue in (testPlanTests("' + soy.$$escapeHtml(issueData77.issueKey) + '", "' + soy.$$escapeHtml(statusData135.status) + '"))\'>' + soy.$$escapeHtml(issueData77.testCountByStatus.countByStatus[statusData135.status]) + '</a>') + '</td>';
    }
    output += '<td class="report-count thead_GL">' + ((issueData77.testCountByTestType.manualType.count == 0) ? '0' : '<a href=\'' + soy.$$escapeHtml(opt_data.contextPath) + '/issues/?jql=issue in testPlanTests("' + soy.$$escapeHtml(issueData77.issueKey) + '") and "' + soy.$$escapeHtml(issueData77.testCountByTestType.fieldId) + '" = ' + soy.$$escapeHtml(issueData77.testCountByTestType.manualType.typeName) + '\'>' + soy.$$escapeHtml(issueData77.testCountByTestType.manualType.count) + '</a>') + '</td><td class="report-count" style="border-left: dotted 1px #c4cad3; border-right: dotted 1px #c4cad3">' + ((issueData77.testCountByTestType.cucumberType.count == 0) ? '0' : '<a href=\'' + soy.$$escapeHtml(opt_data.contextPath) + '/issues/?jql=issue in testPlanTests("' + soy.$$escapeHtml(issueData77.issueKey) + '") and "' + soy.$$escapeHtml(issueData77.testCountByTestType.fieldId) + '" = ' + soy.$$escapeHtml(issueData77.testCountByTestType.cucumberType.typeName) + '\'>' + soy.$$escapeHtml(issueData77.testCountByTestType.cucumberType.count) + '</a>') + '</td><td class="report-count" style="border-right: solid 1px #c4cad3">' + ((issueData77.testCountByTestType.genericType.count == 0) ? '0' : '<a href=\'' + soy.$$escapeHtml(opt_data.contextPath) + '/issues/?jql=issue in testPlanTests("' + soy.$$escapeHtml(issueData77.issueKey) + '") and "' + soy.$$escapeHtml(issueData77.testCountByTestType.fieldId) + '" = ' + soy.$$escapeHtml(issueData77.testCountByTestType.genericType.typeName) + '\'>' + soy.$$escapeHtml(issueData77.testCountByTestType.genericType.count) + '</a>') + '</td><td class="report-count thead_GR">' + ((issueData77.testCountByTestType.otherType.count == 0) ? '0' : '<a href=\'' + soy.$$escapeHtml(opt_data.contextPath) + '/issues/?jql=issue in testPlanTests("' + soy.$$escapeHtml(issueData77.issueKey) + '") and "' + soy.$$escapeHtml(issueData77.testCountByTestType.fieldId) + '" not in ("' + soy.$$escapeHtml(issueData77.testCountByTestType.genericType.typeName) + '", "' + soy.$$escapeHtml(issueData77.testCountByTestType.cucumberType.typeName) + '", "' + soy.$$escapeHtml(issueData77.testCountByTestType.manualType.typeName) + '")\'>' + soy.$$escapeHtml(issueData77.testCountByTestType.otherType.count) + '</a>') + '</td><td class="report-count" style="border-right: dotted 1px #c4cad3">' + soy.$$escapeHtml(issueData77.progress) + '%</td><td class="report-count thead_GR" >' + soy.$$escapeHtml(issueData77.successRate) + '%</td>';
    var teList225 = opt_data.testEnvironments;
    var teListLen225 = teList225.length;
    for (var teIndex225 = 0; teIndex225 < teListLen225; teIndex225++) {
      var teData225 = teList225[teIndex225];
      output += '<td class="report-count" style="border-left: dotted 1px #c4cad3">' + soy.$$escapeHtml(issueData77.environmentSuccessRate[teData225] ? issueData77.environmentSuccessRate[teData225] + '%' : '') + '</td>';
    }
    output += '<td class="report-count" style="border-left: dotted 1px #c4cad3">' + soy.$$escapeHtml(issueData77.environmentSuccessRate['-'] ? issueData77.environmentSuccessRate['-'] + '%' : '') + '</td><td class="report-count thead_GL">' + ((issueData77.defectOpenCount > 0) ? '<a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/secure/IssueNavigator.jspa?reset=true&mode=hide&jqlQuery=' + soy.$$escapeHtml(issueData77.defectOpenJql) + '">' + soy.$$escapeHtml(issueData77.defectOpenCount) + '</a>' : '0') + '</td><td class="report-count" style="border-left: dotted 1px #c4cad3">' + ((issueData77.defectClosedCount > 0) ? '<a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/secure/IssueNavigator.jspa?reset=true&mode=hide&jqlQuery=' + soy.$$escapeHtml(issueData77.defectClosedJql) + '">' + soy.$$escapeHtml(issueData77.defectClosedCount) + '</a>' : '0') + '</td></tr>';
  }
  return output;
};
if (goog.DEBUG) {
  RAVEN.Report.renderTestPlanRows.soyTemplateName = 'RAVEN.Report.renderTestPlanRows';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/js/report/report-testplan-view.js' */
require(["aui/inline-dialog2"]);(function(b){var c=Backbone.Model.extend({key:null,summary:null,testEnvironements:null,startDate:null,endDate:null,totalTests:null,statuses:null,manual:null,cucumber:null,generic:null,progress:null,elapsedTime:null,openDefects:null,closedDefects:null});var e=Backbone.Collection.extend({model:c,url:function(){return contextPath+"/rest/raven/1.0/report/testplanreport/testPlans"}});var d=Backbone.Model.extend({name:null,color:null});var a=Backbone.Collection.extend({model:d,url:function(){return contextPath+"/rest/raven/1.0/report/testplanreport/getDynamicColumns"}});RAVEN.Report.TestPlanReportView=Backbone.View.extend({el:"#report-wrapper",filterView:null,testPlanView:null,render:function(g){var h=this;var i=RAVEN.Report.renderTestPlanReport({requiresExperimentalDialog2:g,contextPath:contextPath});this.$el.empty();this.$el.html(i);h.filterView=new RAVEN.Report.Filters.TestPlanReportFiltersView();h.testPlanView=new RAVEN.Report.testPlanView({filterView:h.filterView});var f=RAVEN.report.analytics.endpoints().TEST_PLANS;RAVEN.report.analytics.reportVisit(f)},destroy:function(){if(this.filterView){this.filterView.destroy();this.filterView=null}if(this.testPlanView){this.testPlanView.destroy();this.testPlanView=null}this.$el.empty()}});RAVEN.Report.testPlanView=Backbone.View.extend({el:"#testplans-row-wrapper",filterView:null,projectId:null,hideTestRunsValue:null,start:0,total:0,pageSize:20,partitionSize:1,prevValues:null,continueLoading:true,isFirstReport:true,unscopedEvents:{"click.raven.report.testplan #raven-testplan-filter-fixversion-suggestions":"preventDefault","click.raven.report.testplan #raven-testplan-filter-status-suggestions":"preventDefault","click.raven.report.testplan #raven-testplan-filter-resolution-suggestions":"preventDefault","click.raven.report.testplan #raven-testplan-filter-assignee-suggestions":"preventDefault","click.raven.report.testplan #raven-testplan-report-filter-project-suggestions":"preventDefault","click.raven.report.testplan #raven-testplan-filter-saved-suggestions":"preventDefault","click.raven.report.testplan #raven-testplan-filter-component-suggestions":"preventDefault","submit.raven.report.testplan #raven-testplan-form":"preventDefault","click.raven.report.testplan .item-delete":"preventDefault","click.raven.report.testplan #dismiss-how-to-read-msg":"disableHowToRead","click.raven.report.testplan #enable-how-to-read-msg":"enableHowToRead","click.raven.report.testplan #load-more":"loadMoreEvent","click.raven.report.testplan #load-all-bt":"loadAll","click.raven.report.testplan #raven-stop-loading":"stopLoadingData","click.raven.report.testplan #raven-load-testplan-requirement-converage-report":"firstGenerateReport",},_updateProgressTracker:function(){var f=this.start>this.total?this.total:this.start;b("#raven-progress-message").text(AJS.format("Loaded {0} out of {1} Test Plans",f,this.total))},displayProgressTracker:function(){this._updateProgressTracker();b("#raven-testplan-report-progress").show(0)},hideProgressTracker:function(){b("#raven-testplan-report-progress").hide()},stopLoadingData:function(){this.continueLoading=false},loadAll:function(){this.preLoadOperation();this.loadUntil(this.total)},preLoadOperation:function(){b("#raven-content-wrapper").block();b(".raven-requirement-header").block();if(b(".lastRowSpin").length){b(".lastRowSpin").spin("medium");b("#load-more").css("color","#eee")}else{b("#raven-content-wrapper").spin("large")}this.clearMessage();this.displayProgressTracker();this.continueLoading=true},postLoadOperation:function(){this.hideProgressTracker()},loadMoreEvent:function(){b("#load-more").addClass("lastRowSpin");b(".lastRowSpin").spin("medium");this.preLoadOperation();this.loadUntil(this.start+this.pageSize)},render:function(){if(this.isFirstReport){return}this.preLoadOperation();this.loadUntil(this.start+this.pageSize)},loadUntil:function(g){var h=this.fetchLayoutData();var f=this;b.when(h).then(function(i){f.loadTestPlanRows(g,i);f.checkShowHowToRead()}).fail(function(i){f.layoutErrorHandler(i)})},loadTestPlanRows:function(h,i){var j=[];var f=b.Deferred();var g=this;this.loadCycle(f,j,h,i);b.when(f).then(function(k){g.processTestPlans(k,i);g.setExportArguments()}).fail(function(k){disableExportReportButton();g.testPlanDataErrorHandler(k)}).done(function(){g.postLoadOperation()})},loadCycle:function(k,j,g,h){var l=this.getTestPlanParams();var i=this.fetchTestPlans(l);var f=this;b.when(i).then(function(m){j.push(m);f.total=f.getTotalSize(m);f.start=f.minValue(f.start+f.partitionSize,f.total);f._updateProgressTracker();if(f.continueLoading&&f.start<g&&f.start<f.total){f.loadCycle(k,j,g,h)}else{k.resolve(j)}}).fail(function(m){k.reject(m)})},minValue:function(g,f){return g>f?f:g},getTotalSize:function(g){try{return g.models[0].attributes.total}catch(f){return 0}},fetchLayoutData:function(){var f=b.Deferred();var h=new a();var g=this.getLayoutParams();h.fetch({data:g,success:function(i){f.resolve(i)},error:function(j,i){f.reject(i)}});return f},fetchTestPlans:function(g){var f=b.Deferred();var h=new e();h.fetch({data:g,success:function(j,k,i){f.resolve(j)},error:function(j,i){f.reject(i)}});return f},setExportArguments:function(){b("#raven-report-common-to-csv-link").attr("href",contextPath+"/plugins/servlet/raven/report/testplan/export?"+this.getTestPlanParams())},getProject:function(){return b("#selected-project-id").val()},getLayoutParams:function(){var f=this.getProject();return b.param({projectId:f})},processTestPlans:function(g,f){var h=this.extractModels(g);if(h.length>0){this.addTestPlanData(h,f)}else{this.clearTestPlanData()}if(this._isReportEmpty(h)){disableExportReportButton();fixReportWrapperHeight()}else{enableExportReportButton()}this.stopLoading()},extractModels:function(f){if(!f||f.length<=0){return[]}var g=f.filter(function(h){return h.models.length>0}).map(function(h){return h.models[0]});g=g.map(function(h){return h.attributes});return g},clearTestPlanData:function(){if(this.isFirstReport){return}this.prevValues=null;this.start=0;var f=this.$el;if(f){f.empty();this.setPaginationInfo(-1);this.stopLoading()}AJS.messages.generic(b("#message-row-wrapper"),{body:"No records found",closeable:false})},addTestPlanData:function(g,f){if(this.prevValues){this.appendTestPlanData(g,f)}else{this.initializeTestPlanData(g,f)}this.setPaginationInfo(this.start)},appendTestPlanData:function(i,h){b.merge(this.prevValues,i);var g=RAVEN.Report.renderTestPlanRows({issues:i,contextPath:contextPath,statuses:h.models[0].attributes.statuses,testEnvironments:h.models[0].attributes.testEnvironments});var f=b("tr:last").offset().top-80;b("#testplans-row-wrapper tbody").append(g);b("html, body").animate({scrollTop:f},1000);JIRA.trigger(JIRA.Events.NEW_CONTENT_ADDED,[b("#raven-content-wrapper"),JIRA.CONTENT_ADDED_REASON.panelRefreshed])},initializeTestPlanData:function(h,g){var f=RAVEN.Report.renderTestPlansTable({issues:h,contextPath:contextPath,statuses:g.models[0].attributes.statuses,testEnvironments:g.models[0].attributes.testEnvironments});this.prevValues=h;this.$el.html(f);JIRA.trigger(JIRA.Events.NEW_CONTENT_ADDED,[b("#raven-content-wrapper"),JIRA.CONTENT_ADDED_REASON.panelRefreshed])},testPlanDataErrorHandler:function(f){var g=this.$el;if(g){g.empty();this.setPaginationInfo(-1);this.stopLoading()}AJS.messages.error(b("#message-row-wrapper"),{title:"Error retrieving data from server",body:f.statusText,closeable:false});this.stopLoading()},layoutErrorHandler:function(f){this.setPaginationInfo(-1);AJS.messages.error(b("#message-row-wrapper"),{title:"An error occurred while processing test statuses column layout",body:f.statusText,closeable:false});this.stopLoading()},getTestPlanParams:function(){var f=this.getProject();return b.param({projectId:f,projects:this.filterView.getCurrentValues()["projects"],start:this.start,pageSize:this.partitionSize,hideTestRuns:this.hideTestRunsValue})+"&"+b.param(this.filterView.getCurrentValues())},setPaginationInfo:function(f){var h="";if(f===-1){b("#load-more").css("display","none");b(".load-all-entries").css("display","none")}else{var g=f;if(g>=this.total||this.total===0){b("#load-more").css("display","none")}else{b("#load-more").css("display","block")}if(g>=this.total){g=this.total;b(".load-all-entries").css("display","none")}else{b(".load-all-entries").css("display","block")}h=AJS.format("Showing {0} of {1} entries",g,this.total)}b(".info-entries").empty().append(h)},stopLoading:function(){b("#raven-content-wrapper").unblock().spinStop();b(".raven-requirement-header").unblock();b(".lastRowSpin").spinStop().removeClass("lastRowSpin").unblock();b("#load-more").css("color","#999");this.hideProgressTracker()},initialize:function(f){if(f){_.extend(this,_.pick(f,"filterView"))}this.projectId=b("#selected-project-id").val();this._delegateUnscopedEvents();disableExportReportButton();this.listenTo(this.filterView,"raven.dialog.apply:test-plans-filter",this.filtersSubmit)},checkShowHowToRead:function(){var f=this;b.ajax({type:"GET",url:contextPath+"/rest/raven/1.0/report/testplanreport/isHowToRead",success:function(h,i,g){if(h){f.showHowToRead()}else{f.hideHowToRead()}},error:function(h,i,g){console.log(h)}})},setHowToReadServer:function(f){b.ajax({type:"POST",data:JSON.stringify({howToRead:f}),url:contextPath+"/rest/raven/1.0/report/testplanreport/setHowToRead",contentType:"application/json",error:function(h,i,g){console.log(h)}})},showHowToRead:function(){b(".raven-how-to-read-chart").show("fast");b("#raven-notifications-icon").hide("fast");b("#enable-how-to-read-msg").hide("fast")},hideHowToRead:function(){b(".raven-how-to-read-chart").hide("fast");b("#raven-notifications-icon").show("fast");b("#enable-how-to-read-msg").show("fast")},_isReportEmpty:function(f){return f.length<=0&&(!this.prevValues||this.prevValues.length===0)},includePreviousVersions:function(){return b("#include-previous-versions-option").is(":checked")},destroy:function(){b("#show-tooltip").remove();b("#load-all-warning").remove();this.undelegateEvents();this._undelegateUnscopedEvents();this.remove()},_delegateUnscopedEvents:function(){var f=this;b(document).off(".raven.report.testplan");b.each(this.unscopedEvents,function(i,j){var h=i.substring(0,i.indexOf(" "));var g=i.substring(i.indexOf(" ")+1);b(document).on(h,g,b.proxy(f[j],f))})},_undelegateUnscopedEvents:function(){b(document).off(".raven.report.testplan")},filtersSubmit:function(){this.clearTestPlanData();this.render();return false},firstGenerateReport:function(){this.clearTestPlanData();b(".load-all-entries").show();b("#raven-first-report").hide();this.isFirstReport=false;this.render()},dialogApply:function(){this.saveFilterValues();this.render();this.renderFilterSummary();if(b("#raven-testplan-filter-inline-dialog").attr("open")=="open"){b("#raven-testplan-filter-inline-dialog").removeAttr("open")}else{document.querySelector("#raven-testplan-filter-inline-dialog").hide()}},preventDefault:function(f){console.log("preventDefault");f.stopPropagation();f.preventDefault()},disableHowToRead:function(){b(".header-filter").attr("data-initialized",false);this.hideHowToRead();this.setHowToReadServer("disabled")},enableHowToRead:function(){b(".header-filter").attr("data-initialized",false);this.showHowToRead();this.setHowToReadServer("enabled")},clearMessage:function(){b("#message-row-wrapper").empty()}})})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/js/report/filters/report-testplan-filter.js' */
(function(h){RAVEN.namespace("RAVEN.Report.Filters");var l=Backbone.Model.extend({urlRoot:function(){return contextPath+"/rest/raven/1.0/report/testplanreport/filterValues"}});var c=Backbone.Model.extend({urlRoot:function(){return contextPath+"/rest/raven/1.0/report/testplanreport/filterValues/fromQueryParam"}});var j={SAVED_FILTER:"savedFilter",FIX_VERSION:"fixVersion",PREV_VERSIONS:"previousVersions",STATUS_ID:"statusId",RESOLUTION:"resolution",ASSIGNEE:"assignee",CONTAINS:"contains",COMPONENTS:"components",PROJECTS:"projects"};RAVEN.Report.Filters.TestPlanReportFiltersView=RAVEN.Component.ReportFilter.extend({el:"#testplan-filter-content-place-holder",unscopedEvents:{"submit.raven.report.testplan-filter #raven-testplans-filters-form":"resetFilter","click.raven.report.testplan-filter #raven-dialog-clear":"resetFilter","submit.raven.report.testplan-filter #raven-requirement-savedfilter-form":"applyTestPlansFilter","click.raven.report.testplan-filter #raven-testplan-filters-dialog-apply":"applyTestPlansFilter","click.raven.report.testplan-filter .filter-title":"clickTitleNotSelected","click.raven.report.testplan-filter #raven-testplan-dialog-cancel":"closeDialog","change.raven.report.testplan-filter #raven-testplan-filter-assignee":"removeAssigneeIcon","click.raven.report.testplan-filter #raven-filter-trigger":"clickFilterButton"},projectId:null,projectKey:null,htmlFilters:null,FILTERS_MODE:1,SAVED_FILTER_MODE:2,filtersOption:null,queryParamsDef:j,projectPicker:null,isEnterprise:false,userPrefsBasedFilterValuesResource:function(){return new l()},queryParamsBasedFilterValuesResource:function(){return new c()},saveCurrentFilterValues:function(){b.call(this)},buildFilterComponent:function(q){var p=JSON.parse(q.attributes.prefsJson);var o=p.savedFilter;var r=parseStatusesToObject(p.workflowStatusId);this.htmlFilters=RAVEN.Report.renderFilterTestPlans({versions:q.attributes.versions||[],resolutions:q.attributes.resolutions,requiresExperimentalDialog2:q.attributes.requiresExperimentalDialog2,userPreferences:p,assigneeUserPref:p.assignee,selectedStatuses:r,savedFilter:o,version:p.filterVersion,projects:q.attributes.projects});this.$el.empty();this.$el.html(this.htmlFilters);a.call(this);if(o){this.toggleFilters(h(".filter-title[data-mode=2]"));this.filtersOption=this.SAVED_FILTER_MODE}},renderFilterSummary:function(){var p=this.getCurrentValues();var v="";var o=p[j.SAVED_FILTER];if(o&&o!="-1"){v="<b>"+"Saved Filter"+"</b>  "+AJS.escapeHTML(h('#raven-testplan-filter-inline-dialog #raven-testplan-filter-saved option[value="'+p.savedFilter+'"]').text())}else{if(this.isEnterprise){var w=p[j.PROJECTS];if(w){if(v){v+="; "}v+="<b>"+"Project"+"</b>  "+AJS.escapeHTML(w)}}var x=p[j.FIX_VERSION];if(x&&x!="-1"){if(v){v+="; "}var y=p[j.PREV_VERSIONS];v+="<b>"+"Fix Version"+"</b>  ";if(y===true){v+="<= "}v+=AJS.escapeHTML(x)}var u=p[j.STATUS_ID];if(u){if(v){v+="; "}v+="<b>"+"Status"+"</b>  "+AJS.escapeHTML(u)}var r=p[j.RESOLUTION];if(r&&r!="-1"){if(v){v+="; "}v+="<b>"+"Resolution"+"</b>  "+AJS.escapeHTML(h('#raven-testplan-filter-inline-dialog #raven-testplan-filter-resolution option[value="'+r+'"]').text())}var t=p[j.ASSIGNEE];if(t&&t!="-1"){if(v){v+="; "}v+="<b>"+"Assignee"+"</b>  "+AJS.escapeHTML(h('#raven-testplan-filter-inline-dialog #raven-testplan-filter-assignee option[value="'+t+'"]').text())}var q=p[j.CONTAINS];if(q){if(v){v+="; "}v+="<b>"+"Contains"+"</b>  "+AJS.escapeHTML(q)}var s=p[j.COMPONENTS];if(s){if(v){v+="; "}v+="<b>"+"Component"+"</b>  "+AJS.escapeHTML(s)}}if(v){h("#raven-filter-trigger").html(v)}else{h("#raven-filter-trigger").text("Filter(s)")}},initialize:function(){this.projectId=h("#selected-project-id").val();this.projectKey=h("#selected-report-key").val();this.isEnterprise=h("#isXrayEnterprise").val()==="true";this.render();g.call(this)},destroy:function(){this.undelegateEvents();i.call(this);if(this.htmlFilters){h("#raven-testplan-filter-inline-dialog").remove();this.htmlFilters=null}this.$el.empty();this.remove();RAVEN.Component.ReportFilter.prototype.destroy.call(this)},toggleFilters:function(o){h(".filter-title.selected").removeClass("selected");h(o).addClass("selected");if(h(o).data("mode")==this.SAVED_FILTER_MODE){h("#raven-testplans-filters-form").hide();h("#raven-requirement-savedfilter-form").show()}else{h("#raven-testplans-filters-form").show();h("#raven-requirement-savedfilter-form").hide()}},resetFilter:function(){if(this.projectPicker){this.projectPicker.clearLozenges()}if(this.fixVersionFieldPicker){this.fixVersionFieldPicker._setDescriptorWithValue("-1")}if(this.statusFieldPicker){this.statusFieldPicker.clearLozenges()}if(this.resolutionFieldPicker){this.resolutionFieldPicker._setDescriptorWithValue("-1")}if(this.assigneeFieldPicker){this.assigneeFieldPicker.clear();this.assigneeFieldPicker._setDescriptorWithValue("-1")}h("#raven-testplan-filter-inline-dialog #raven-testplan-filter-contains").val("");var o=h("#raven-testplan-filter-saved").data("field-support-obj");if(o){o.clear()}},applyTestPlansFilter:function(){if(h(".filter-title.selected").data("mode")===this.SAVED_FILTER_MODE){this.filtersOption=this.SAVED_FILTER_MODE}else{this.filtersOption=this.FILTERS_MODE}b.call(this);RAVEN.Component.ReportFilter.prototype.closeDialogAndSyncURLQueryParams.call(this,"#raven-testplan-filter-inline-dialog");this.trigger("raven.dialog.apply:test-plans-filter")},clickTitleNotSelected:function(o){this.toggleFilters(o.currentTarget);o.stopPropagation()},clickFilterButton:function(){redrawAjsSelect(this.projectPicker);redrawAjsSelect(this.statusFieldPicker)},closeDialog:function(){closeDialogGeneric("#raven-testplan-filter-inline-dialog")},removeAssigneeIcon:function(){if(!this.assigneeFieldPicker._hasIcon()){if(this.assigneeFieldPicker.$entityIcon!==undefined){this.assigneeFieldPicker.$entityIcon.remove()}this.assigneeFieldPicker.$container.removeClass("aui-ss-has-entity-icon")}}});function a(){if(this.isEnterprise){const o=h("#raven-testplan-report-filter-project");o.parent(".filter-select").show();this.projectPicker=m(o)}this.fixVersionFieldPicker=this.isEnterprise?e(h("#raven-testplan-filter-fixversion")):f(h("#raven-testplan-filter-fixversion"));this.statusFieldPicker=n(h("#raven-testplan-filter-inline-dialog #raven-testplan-filter-status"));this.resolutionFieldPicker=f(h("#raven-testplan-filter-inline-dialog #raven-testplan-filter-resolution"));this.assigneeFieldPicker=initAssigneeFilterPicker(h("#raven-testplan-filter-assignee"));d()}function n(o){const p=AJS.contextPath()+"/rest/api/2/jql/autocompletedata/suggestions";return new AJS.MultiSelect({element:o,showDropdownButton:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:p,processData:true,data:{fieldName:"status",fieldValue:function(){const q=h("#raven-testplan-filter-status-textarea").val();return q||""}},formatResponse:function(q){var r=new AJS.GroupDescriptor({id:"raven-status-opt-group"});q.results.filter(function(s){return !!s&&!!s.value}).forEach(function(s){var u=s.value.replace(/^(")/,"").replace(/(")$/,"");var t=new AJS.ItemDescriptor({value:u,label:u,title:u,highlighted:true});r.addItem(t)});return[r]}}})}function e(o){const p=AJS.contextPath()+"/rest/api/2/jql/autocompletedata/suggestions";return new AJS.SingleSelect({element:o,showDropdownButton:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:p,processData:true,data:{fieldName:"fixVersion",fieldValue:function(){const q=h("#raven-testplan-filter-fixversion-field").val();return q||""}},formatResponse:function(q){var r=new AJS.GroupDescriptor({id:"raven-versions-opt-group"});q.results.filter(function(s){return !!s&&!!s.value}).forEach(function(s){var u=s.value.replace(/^(")/,"").replace(/(")$/,"");var t=new AJS.ItemDescriptor({value:u,label:u,title:u,highlighted:true});r.addItem(t)});return[r]}}})}function m(o){return new AJS.MultiSelect({element:o,showDropdownButton:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:contextPath+"/rest/api/2/project",formatResponse:function(q){var p=new AJS.GroupDescriptor({weight:0,id:"all-projects-opt-group",replace:true,label:"All Projects"});h(q).each(function(r,s){var t=new AJS.ItemDescriptor({value:s.key,label:s.key,icon:s.avatarUrls["16x16"],allowDuplicate:false,});p.addItem(t)});return[p]}}})}function f(o){o.on("initialized",function(r,q){var p=h("body").data("version");if(!p||p.toString().charAt(0)==="5"){h("input",o.parent()).height("23px")}});return new AJS.SingleSelect({element:o,showDropdownButton:true,revertOnInvalid:true,})}function d(o){var p="/rest/gadget/1.0/pickers/filters";h(".raven-default-filter-picker",o).each(function(){var s=h(this);if(s.data("aui-ss")){return}var q={showAvatar:true},t=s.data("inputValue");var r=new AJS.SingleSelect({element:s,submitInputVal:true,showDropdownButton:!!s.data("show-dropdown-button"),errorMessage:AJS.format("filters.picker.invalid.filter","'{0}'"),ajaxOptions:{url:contextPath+p,query:true,data:q,formatResponse:function(u){var v=[];if(u.filters){h.each(h(u.filters),function(w,x){v[w]=new AJS.ItemDescriptor({value:x.id,label:x.name})})}return v}},inputText:t});s.data("field-support-obj",r);r.setFieldWidth(500)})}function b(){var p=this.getCurrentValues();if(this.SAVED_FILTER_MODE===this.filtersOption){k.call(this);var o=getGenericSelectValue("#raven-testplan-filter-inline-dialog #raven-testplan-filter-saved");if(o&&o!="-1"){p[j.SAVED_FILTER]=o}else{this.removeFilterValue(j.SAVED_FILTER)}}else{this.removeFilterValue(j.SAVED_FILTER);if(this.isEnterprise){var v=getMultiSelectValues(h("#raven-testplan-report-filter-project"));if(v){p[j.PROJECTS]=v}else{p[j.PROJECTS]=this.projectKey;this.removeFilterValue(j.PROJECTS)}}var w=h("#raven-testplan-filter-inline-dialog #raven-testplan-filter-fixversion option:selected").text();var s=h("#raven-testplan-filter-inline-dialog #raven-testplan-filter-fixversion option:selected").val();if(s&&s!="-1"){p[j.FIX_VERSION]=w;p[j.PREV_VERSIONS]=getCheckBoxValue("#include-previous-versions-option")}else{this.removeFilterValue(j.FIX_VERSION);this.removeFilterValue(j.PREV_VERSIONS)}var x=getMultiSelectValues(h("#raven-testplan-filter-inline-dialog #raven-testplan-filter-status"));if(!StringUtils.isBlank(x)){p[j.STATUS_ID]=x}else{this.removeFilterValue(j.STATUS_ID)}var r=getGenericSelectValue("#raven-testplan-filter-inline-dialog #raven-testplan-filter-resolution");if(r&&r!=-1){p[j.RESOLUTION]=r}else{this.removeFilterValue(j.RESOLUTION)}var u=getGenericSelectValue("#raven-testplan-filter-inline-dialog #raven-testplan-filter-assignee");if(u&&u!=-1){p[j.ASSIGNEE]=u}else{this.removeFilterValue(j.ASSIGNEE)}var q=getGenericElementValue("#raven-testplan-filter-inline-dialog #raven-testplan-filter-contains");if(q&&q!=""){p[j.CONTAINS]=q}else{this.removeFilterValue(j.CONTAINS)}var t=getGenericElementValue("#raven-testplan-filter-inline-dialog #raven-testplan-filter-component");if(t){p[j.COMPONENTS]=t.join(",")}else{this.removeFilterValue(j.COMPONENTS)}}}function k(){this.removeFilterValue(j.FIX_VERSION);this.removeFilterValue(j.PREV_VERSIONS);this.removeFilterValue(j.STATUS_ID);this.removeFilterValue(j.RESOLUTION);this.removeFilterValue(j.ASSIGNEE);this.removeFilterValue(j.CONTAINS);this.removeFilterValue(j.COMPONENTS)}function i(){h(document).off(".raven.report.testplan-filter")}function g(){var o=this;i();h.each(this.unscopedEvents,function(r,s){var q=r.substring(0,r.indexOf(" "));var p=r.substring(r.indexOf(" ")+1);h(document).on(q,p,h.proxy(o[s],o))})}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/templates/reports/test-execution-report/testexec-report-filter-header.soy' */
// This file was automatically generated from testexec-report-filter-header.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Report.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Report == 'undefined') { RAVEN.Report = {}; }


RAVEN.Report.renderTestExecutionReportFilter = function(opt_data, opt_ignored) {
  var output = '<input type="hidden" value="' + soy.$$escapeHtml(opt_data.filterscopepref) + '"/><input type="hidden" value="' + soy.$$escapeHtml(opt_data.savedFilterpref) + '"/><div><form action="#" id="testexec-report-coverage-form" class="aui"><a id="raven-testexec-report-filter-trigger" href="#" aria-controls="raven-testexec-filter-inline-dialog" data-aui-trigger class="aui-button aui-style-default raven-dropdown2-arrow aui-button-subtle">' + soy.$$escapeHtml('Filter(s)') + '</a><a data-aui-trigger aria-controls="show-tooltip" id="raven-notifications-icon" style="display:none;margin-left:4px;margin-right:4px;"></a><a id="enable-how-to-read-msg" style="display:none; font-size:13px;">' + soy.$$escapeHtml('How to read this report') + '</a></form></div>' + ((opt_data.requiresExperimentalDialog2) ? '<aui-inline-dialog2 id="raven-testexec-filter-inline-dialog" class="aui-layer aui-inline-dialog" data-aui-alignment="bottom left" data-aui-responds-to="toggle" aria-hidden="true"><div class="aui-inline-dialog-contents" >' : '<aui-inline-dialog id="raven-testexec-filter-inline-dialog" class="" data-aui-alignment="bottom left" aria-hidden="true">') + '<div id="raven-testexec-filter-dialog"><div id="raven-testexec-coverage-content-panel"><div class="filter-fieldset" id="raven-testexec-filter"><h4 class="filter-title selected" data-mode="1">' + soy.$$escapeHtml('Filters') + '</h4><span class="spliter">|</span><h4 class="filter-title" data-mode="2">' + soy.$$escapeHtml('Saved Filter') + '</h4><form action="#" id="raven-testexec-report-filters-form" method="post" class="aui top-label filter-form"><div class="aui-item"><div class="filter-field top-label filter-select" style="display: none"><label class="aui top-label" for="raven-testexec-report-filter-project">' + soy.$$escapeHtml('Project') + '</label><select id="raven-testexec-report-filter-project" name="project" title="' + soy.$$escapeHtml('All') + '" class="select raven-multi-select hidden multi-select" multiple="multiple">';
  if (opt_data.projects != null) {
    var projectList28 = opt_data.projects;
    var projectListLen28 = projectList28.length;
    for (var projectIndex28 = 0; projectIndex28 < projectListLen28; projectIndex28++) {
      var projectData28 = projectList28[projectIndex28];
      output += '<option value="' + soy.$$escapeHtml(projectData28) + '" selected title="' + soy.$$escapeHtml(projectData28) + '">' + soy.$$escapeHtml(projectData28) + '</option>';
    }
  }
  output += '</select></div><div class="filter-field top-label filter-select"><label class="aui top-label" for="raven-testexec-report-filter-fixversion">' + soy.$$escapeHtml('Fix Version') + '</label><select class="select" id="raven-testexec-report-filter-fixversion" name="fixversion" title="' + soy.$$escapeHtml('All') + '"><option value="-1">' + soy.$$escapeHtml('All') + '</option>' + ((opt_data.versionpref != null) ? '<option value="' + soy.$$escapeHtml(opt_data.versionpref) + '" selected title="' + soy.$$escapeHtml(opt_data.versionpref) + '">' + soy.$$escapeHtml(opt_data.versionpref) + '</option> ' : '');
  var versionList53 = opt_data.fixversions;
  var versionListLen53 = versionList53.length;
  for (var versionIndex53 = 0; versionIndex53 < versionListLen53; versionIndex53++) {
    var versionData53 = versionList53[versionIndex53];
    output += '<option value="' + soy.$$escapeHtml(versionData53) + '" ' + ((versionData53 == opt_data.versionpref) ? ' selected' : '') + ' title="' + soy.$$escapeHtml(versionData53) + '">' + soy.$$escapeHtml(versionData53) + '</option>';
  }
  output += '</select></div><div class="filter-field top-label filter-select"><label class="aui top-label" for="raven-testexec-report-filter-assignee">' + soy.$$escapeHtml('Assignee') + '</label><select class="select raven-default-user-picker" id="raven-testexec-report-filter-assignee" name="assignee" title="' + soy.$$escapeHtml('Assignee User') + '" data-show-dropdown-button="true"><option value="-1">' + soy.$$escapeHtml('All') + '</option>' + ((opt_data.assigneepref && opt_data.assigneepref.active == true) ? '<optgroup label="All Users"><option value="' + soy.$$escapeHtml(opt_data.assigneepref.name) + '" selected="selected" style="background-image: url(' + soy.$$escapeHtml(opt_data.assigneepref.avatarUrls['16x16']) + ');">' + soy.$$escapeHtml(opt_data.assigneepref.displayName) + '</option></optgroup>' : '') + '</select></div>' + ((opt_data.isEnterprise == false) ? '<div class="filter-field top-label no-label" style="margin-top: 1px;"><input class="text" type="input" id="raven-testexec-report-filter-contains" value="' + ((opt_data.contains) ? soy.$$escapeHtml(opt_data.contains) : '') + '" placeholder="' + soy.$$escapeHtml('Issue Key or Summary') + '"></div>' : '') + '<div class="filter-field top-label filter-select"><label class="aui top-label" for="raven-testexec-report-filter-status">' + soy.$$escapeHtml('Status') + '</label><select class="select" id="raven-testexec-report-filter-status" name="status" multiple="multiple" style="display: none;" title="' + soy.$$escapeHtml('All') + '">';
  var selectedStatusList98 = soy.$$getMapKeys(opt_data.selectedStatuses);
  var selectedStatusListLen98 = selectedStatusList98.length;
  for (var selectedStatusIndex98 = 0; selectedStatusIndex98 < selectedStatusListLen98; selectedStatusIndex98++) {
    var selectedStatusData98 = selectedStatusList98[selectedStatusIndex98];
    output += '<option value="' + soy.$$escapeHtml(selectedStatusData98) + '" title="' + soy.$$escapeHtml(selectedStatusData98) + '" selected>' + soy.$$escapeHtml(selectedStatusData98) + '</option>';
  }
  output += '</select></div><div class="filter-field top-label filter-select"><label class="aui top-label" for="raven-testexec-report-filter-resolution">' + soy.$$escapeHtml('Resolution') + '</label><select class="select" id="raven-testexec-report-filter-resolution" name="status" title="' + soy.$$escapeHtml('All') + '"><option value="-1">' + soy.$$escapeHtml('All') + '</option><option value="-2" title="Unresolved" ' + (('-2' == opt_data.resolutionpref) ? ' selected' : '') + '>Unresolved</option>';
  var resolutionList118 = opt_data.resolutions;
  var resolutionListLen118 = resolutionList118.length;
  for (var resolutionIndex118 = 0; resolutionIndex118 < resolutionListLen118; resolutionIndex118++) {
    var resolutionData118 = resolutionList118[resolutionIndex118];
    output += '<option value="' + soy.$$escapeHtml(resolutionData118) + '" ' + ((resolutionData118 == opt_data.resolutionpref) ? ' selected' : '') + ' title="' + soy.$$escapeHtml(resolutionData118) + '">' + soy.$$escapeHtml(resolutionData118) + '</option>';
  }
  output += '</select></div><div class="filter-field top-label filter-select"><label class="aui top-label" for="raven-testexec-report-filter-testplan">' + soy.$$escapeHtml('Test Plan') + '</label><select class="select" id="raven-testexec-report-filter-testplan" name="fixversion" title="' + soy.$$escapeHtml('All') + '"><option value="-1">' + soy.$$escapeHtml('All') + '</option>' + ((opt_data.testPlanKeypref) ? '<option value="' + soy.$$escapeHtml(opt_data.testPlanKeypref) + '" style="background-image:url(' + soy.$$escapeHtml(opt_data.contextPath) + soy.$$escapeHtml(opt_data.testPlanIssueIcon) + ');" selected title="' + soy.$$escapeHtml(opt_data.testPlanKeypref) + '">' + soy.$$escapeHtml(opt_data.testPlanKeypref) + '</option>' : '') + '</select></div><div class="filter-field top-label filter-select"><label class="aui top-label" for="raven-testexec-report-filter-environment">' + soy.$$escapeHtml('Environment') + '</label><select class="select" id="raven-testexec-report-filter-environment" name="fixversion" title="' + soy.$$escapeHtml('All') + '">' + ((opt_data.environmentpref && opt_data.environmentpref != '-1' && opt_data.environmentpref != '__NULL__') ? '<option value="' + soy.$$escapeHtml(opt_data.environmentpref) + '" selected="selected">' + soy.$$escapeHtml(opt_data.environmentpref) + '</option><option value="-1" title="' + soy.$$escapeHtml('All Environments') + '">' + soy.$$escapeHtml('All Environments') + '</option><option value="__NULL__" title="' + soy.$$escapeHtml('Empty') + '">' + soy.$$escapeHtml('Empty') + '</option>' : '<option value="-1" title="' + soy.$$escapeHtml('All Environments') + '" ' + ((opt_data.environmentpref == null || opt_data.environmentpref == -1) ? 'selected="selected"' : '') + '>' + soy.$$escapeHtml('All Environments') + '</option><option value="__NULL__" title="' + soy.$$escapeHtml('Empty') + '" ' + ((opt_data.environmentpref == '__NULL__') ? 'selected="selected"' : '') + '>' + soy.$$escapeHtml('Empty') + '</option>') + '</select></div>' + ((opt_data.isEnterprise == true) ? '<div class="filter-field top-label no-label" style="margin-top: 1px;"><input class="text" type="input" id="raven-testexec-report-filter-contains" value="' + ((opt_data.contains) ? soy.$$escapeHtml(opt_data.contains) : '') + '" placeholder="' + soy.$$escapeHtml('Issue Key or Summary') + '"></div>' : '') + '</div></form><form action="#" id="raven-testexec-savedfilter-form" method="post" class="aui top-label filter-form" style="display: none;"><div class="filter-field top-label"><label class="aui top-label" for="raven-testexec-filter-saved">' + soy.$$escapeHtml('Saved Filter') + '</label><select class="select raven-default-filter-picker" id="raven-testexec-filter-saved" name="savedFilter" title="' + soy.$$escapeHtml('projectpanels.testexec-coverage.label.pick-filter') + '" data-show-dropdown-button="true">' + ((opt_data.savedFilterpref) ? '<option value="' + soy.$$escapeHtml(opt_data.savedFilterpref.id) + '" selected="selected" title="' + soy.$$escapeHtml(opt_data.savedFilterpref.description) + '">' + soy.$$escapeHtml(opt_data.savedFilterpref.name) + '</option>' : '') + '</select></div></form><div class="raven-dialog-buttons-container"><div class="raven-dialog-buttons"><button id="raven-testexec-dialog-apply" class="aui-button js-save-button">' + soy.$$escapeHtml('Apply') + '</button><button id="raven-testexec-dialog-clear" class="aui-button js-save-button">' + soy.$$escapeHtml('Clear') + '</button><a id="raven-testexec-dialog-cancel" style="float: right;" class="aui-button aui-button-link js-cancel-button">' + soy.$$escapeHtml('Cancel') + '</a></div></div></div></div></div>' + ((opt_data.requiresExperimentalDialog2) ? '</div>' : '') + '</aui-inline-dialog>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Report.renderTestExecutionReportFilter.soyTemplateName = 'RAVEN.Report.renderTestExecutionReportFilter';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/templates/reports/test-execution-report/testexecution-report.soy' */
// This file was automatically generated from testexecution-report.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Report.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Report == 'undefined') { RAVEN.Report = {}; }


RAVEN.Report.renderTestExecutionReport = function(opt_data, opt_ignored) {
  return RAVEN.Report.renderHowToRead({howToRead: 'Shows a list of Test Executions with some metrics related with each execution, such as the tests count per run status, per test type, overall progress and linked defects.\x3c/br\x3e\x3c/br\x3e This helps you analyze and compare different cycles (i.e. Test Executions), in terms of progress, success rate and outcomes.', link: 'https://docs.getxray.app/display/XRAY/Test+Executions+Report', requiresExperimentalDialog2: opt_data.requiresExperimentalDialog2}) + '<div class="header-filter" data-initialized="false" style="width:100%; margin:8px; padding-bottom:6px;"><div id="arg-validation-messages"></div><div id="testexecution-filter-content-place-holder" style="float:left; max-width:80%;"></div><div style="float: right; min-width: 20%"><div class="load-all-entries"><a data-aui-trigger aria-controls="load-all-warning" href="#load-all-warning"><span class="aui-icon aui-icon-small aui-iconfont-info load-all-info"></span></a><a id="load-all-bt" style="font-size:13px;">' + soy.$$escapeHtml('Load all') + '</a>' + ((opt_data.requiresExperimentalDialog2) ? '<aui-inline-dialog2 id="load-all-warning" class="aui-layer aui-inline-dialog" data-aui-alignment="bottom right" data-aui-responds-to="toggle" aria-hidden="true" style="max-width:496px"><div class="aui-inline-dialog-contents" ><p>' + soy.$$escapeHtml('Loading all entries may be memory and time consuming if there are many entries') + '</p></div></aui-inline-dialog2>' : '<aui-inline-dialog id="load-all-warning" alignment="bottom right" style="max-width:496px"><p>' + soy.$$escapeHtml('Loading all entries may be memory and time consuming if there are many entries') + '</p></aui-inline-dialog>') + '</div><div class="info-entries"></div></div></div><div style="clear: both"></div><div id="raven-testexecutions-content-panel" style="min-width:600px;">' + RAVEN.Report.renderGenerateReport({imgUrl: 'xray-test-execs-list-report.png', buttonID: 'raven-load-testexec-requirement-converage-report', contextPath: opt_data.contextPath}) + '<div id="message-row-wrapper" style="height:90%;"></div><div id="testexecs-row-wrapper" style="height:100%;"></div><div id="load-more">' + soy.$$escapeHtml('More') + '</div></div>';
};
if (goog.DEBUG) {
  RAVEN.Report.renderTestExecutionReport.soyTemplateName = 'RAVEN.Report.renderTestExecutionReport';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/templates/reports/test-execution-report/testExecutionTable.soy' */
// This file was automatically generated from testExecutionTable.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Report.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Report == 'undefined') { RAVEN.Report = {}; }


RAVEN.Report.renderTestExecutionsTable = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.issues.length == 0) {
    output += '<div id="testexec-infobar" class="aui-message aui-message-hint"><p class="title"><strong>' + soy.$$escapeHtml('There are no Test Executions within the provided filters.') + '</strong></p></div>';
  } else {
    output += '<div id="table-container"><table id="test-execution-report-table" class="aui"><thead class="test-execution-report-thead1"><tr><th colspan="7"/><th id="tests-by-status" class="thead-group thead_GL" colspan="' + soy.$$escapeHtml(opt_data.statuses.length) + '">' + soy.$$escapeHtml('Tests By Status') + '</th><th id="tests-by-type" class="thead-group thead_GL" colspan="4">' + soy.$$escapeHtml('Tests By Test Type') + '</th><th colspan="3" class="thead-group thead_GL"/><th id="linked-defects" class="thead-group thead_GL" colspan="2">' + soy.$$escapeHtml('Linked Defects') + '</th></tr></thead><thead  class="test-execution-report-thead2"><tr><th id="tb-TE-key" class="thead_medium"><div><span>' + soy.$$escapeHtml('TE Key') + '</span></div></th><th id="tb-summary" class="thead_large"><div><span>' + soy.$$escapeHtml('Summary') + '</span></div></th><th id="tb-version"><div><span>' + soy.$$escapeHtml('Version') + '</span></div></th><th id="tb-planned-start" class="thead_date"><div><span>' + soy.$$escapeHtml('Planned start date') + '</span></div></th><th id="tb-planned-end" class="thead_date"><div><span>' + soy.$$escapeHtml('Planned end date') + '</span></div></th><th id="tb-testenv"><div><span>' + soy.$$escapeHtml('Test Environments') + '</span></div></th><th id="tb-total-tests" class="thead_V"><div class="thead_LastLabel"><span>' + soy.$$escapeHtml('Total Tests') + '</span></div></th>';
    var itemList32 = opt_data.statuses;
    var itemListLen32 = itemList32.length;
    for (var itemIndex32 = 0; itemIndex32 < itemListLen32; itemIndex32++) {
      var itemData32 = itemList32[itemIndex32];
      var status__soy33 = itemData32.attributes;
      output += '<th style="color: ' + soy.$$escapeHtml(status__soy33.statusColor) + '" class="thead_V"><div ' + ((itemIndex32 == itemListLen32 - 1) ? ' class="thead_LastLabel" ' : '') + '><span>' + soy.$$escapeHtml(status__soy33.status) + '</span></div></th>';
    }
    output += '<th id="tb-manual" class="thead_V"><div><span>' + soy.$$escapeHtml('Manual') + '</span></div></th><th id="tb-cucumber" class="thead_V"><div><span>' + soy.$$escapeHtml('Cucumber') + '</span></div></th><th id="tb-generic" class="thead_V"><div><span>' + soy.$$escapeHtml('Generic') + '</span></div></th><th id="tb-other" class="thead_V"><div class="thead_LastLabel"><span>Other</span></div></th><th id="tb-progress" class="thead_V"><div><span>' + soy.$$escapeHtml('Progress') + '</span></div></th><th id="tb-success" class="thead_V"><div><span>' + soy.$$escapeHtml('Success Rate') + '</span></div></th><th id="tb-elapsed-time" class="thead_GR thead_medium" style="padding-left: 25px; text-align: right;"><div><a data-aui-trigger aria-controls="elapsed-time-tip-dialog" href="#elapsed-time-tip-dialog"><span class="aui-icon aui-icon-small aui-iconfont-info"></span></a></div><div><span>' + soy.$$escapeHtml('Elapsed Time') + '</span></div>' + ((opt_data.requiresExperimentalDialog2) ? '<aui-inline-dialog2 id="elapsed-time-tip-dialog" class="aui-layer aui-inline-dialog" data-aui-alignment="bottom right" data-aui-responds-to="toggle" aria-hidden="true" style="max-width:496px"><div class="aui-inline-dialog-contents" ><p>' + soy.$$escapeHtml('This column represent the sum of the elapsed time for all TestRuns of the Test Execution. The base unit is the minute.') + '</p></div></aui-inline-dialog2>' : '<aui-inline-dialog id="elapsed-time-tip-dialog" alignment="bottom right" style="max-width:496px"><p>' + soy.$$escapeHtml('This column represent the sum of the elapsed time for all TestRuns of the Test Execution. The base unit is the minute.') + '</p></aui-inline-dialog>') + '</th><th id="tb-open-defects"><div><span>' + soy.$$escapeHtml('Open') + '</span></div></th><th id="tb-closed-defects"><div><span>' + soy.$$escapeHtml('Closed') + '</span></div></th><tr></thead><tbody>' + RAVEN.Report.renderTestExecutionRows(opt_data) + '</tbody></table><div class="loading-wheel"></div></div>';
  }
  return output;
};
if (goog.DEBUG) {
  RAVEN.Report.renderTestExecutionsTable.soyTemplateName = 'RAVEN.Report.renderTestExecutionsTable';
}


RAVEN.Report.renderTestExecutionRows = function(opt_data, opt_ignored) {
  var output = '';
  var itemList77 = opt_data.issues;
  var itemListLen77 = itemList77.length;
  for (var itemIndex77 = 0; itemIndex77 < itemListLen77; itemIndex77++) {
    var itemData77 = itemList77[itemIndex77];
    var issue__soy78 = itemData77.attributes;
    output += '<tr><td><a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/browse/' + soy.$$escapeHtml(issue__soy78.key) + '">' + soy.$$escapeHtml(issue__soy78.key) + '</td><td><a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/browse/' + soy.$$escapeHtml(issue__soy78.key) + '">' + soy.$$escapeHtml(issue__soy78.summary) + '</td><td>' + soy.$$escapeHtml(issue__soy78.fixVersions != null ? issue__soy78.fixVersions : '') + '</td><td>' + soy.$$escapeHtml(issue__soy78.startDate) + '</td><td>' + soy.$$escapeHtml(issue__soy78.endDate) + '</td><td>';
    var environmentList98 = issue__soy78.testEnvironements;
    var environmentListLen98 = environmentList98.length;
    for (var environmentIndex98 = 0; environmentIndex98 < environmentListLen98; environmentIndex98++) {
      var environmentData98 = environmentList98[environmentIndex98];
      output += '<a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/secure/IssueNavigator.jspa?reset=true&mode=hide&jqlQuery=' + soy.$$escapeHtml(issue__soy78.testEvirnomentJqlModel) + ' \'' + soy.$$escapeHtml(environmentData98) + '\'"><span id="environment-labels" class="aui-lozenge aui-lozenge-subtle aui-lozenge-complete xray-test-env-field-report">' + soy.$$escapeHtml(environmentData98) + '</span></a>';
    }
    output += '</td><td class="report-count thead_GR">' + ((issue__soy78.totalTests == 0) ? '0' : '<a href=\'' + soy.$$escapeHtml(opt_data.contextPath) + '/issues/?jql=issue in testExecutionTests("' + soy.$$escapeHtml(issue__soy78.key) + '")\'>' + soy.$$escapeHtml(issue__soy78.totalTests) + '</a>') + '</td>';
    var itemStatusList122 = opt_data.statuses;
    var itemStatusListLen122 = itemStatusList122.length;
    for (var itemStatusIndex122 = 0; itemStatusIndex122 < itemStatusListLen122; itemStatusIndex122++) {
      var itemStatusData122 = itemStatusList122[itemStatusIndex122];
      var status__soy123 = itemStatusData122.attributes;
      output += '<td class="report-count" style="border-left: dotted 1px #c4cad3">' + ((issue__soy78.testCountByStatus.countByStatus[status__soy123.status] == 0) ? '0' : '<a href=\'' + soy.$$escapeHtml(opt_data.contextPath) + '/issues/?jql=issue in (testExecutionTests("' + soy.$$escapeHtml(issue__soy78.key) + '", "' + soy.$$escapeHtml(status__soy123.status) + '"))\'>' + soy.$$escapeHtml(issue__soy78.testCountByStatus.countByStatus[status__soy123.status]) + '</a>') + '</td>';
    }
    output += '<td class="report-count thead_GL">' + ((issue__soy78.testByTestTypeCount.manualType.count == 0) ? '0' : '<a href=\'' + soy.$$escapeHtml(opt_data.contextPath) + '/issues/?jql=issue in testExecutionTests("' + soy.$$escapeHtml(issue__soy78.key) + '") and "' + soy.$$escapeHtml(issue__soy78.testByTestTypeCount.fieldId) + '" = ' + soy.$$escapeHtml(issue__soy78.testByTestTypeCount.manualType.typeName) + '\'>' + soy.$$escapeHtml(issue__soy78.testByTestTypeCount.manualType.count) + '</a>') + '</td><td class="report-count" style="border: dotted 1px #c4cad3">' + ((issue__soy78.testByTestTypeCount.cucumberType.count == 0) ? '0' : '<a href=\'' + soy.$$escapeHtml(opt_data.contextPath) + '/issues/?jql=issue in testExecutionTests("' + soy.$$escapeHtml(issue__soy78.key) + '") and "' + soy.$$escapeHtml(issue__soy78.testByTestTypeCount.fieldId) + '" = ' + soy.$$escapeHtml(issue__soy78.testByTestTypeCount.cucumberType.typeName) + '\'>' + soy.$$escapeHtml(issue__soy78.testByTestTypeCount.cucumberType.count) + '</a>') + '</td><td class="report-count" style="border-right: solid 1px #c4cad3">' + ((issue__soy78.testByTestTypeCount.genericType.count == 0) ? '0' : '<a href=\'' + soy.$$escapeHtml(opt_data.contextPath) + '/issues/?jql=issue in testExecutionTests("' + soy.$$escapeHtml(issue__soy78.key) + '") and "' + soy.$$escapeHtml(issue__soy78.testByTestTypeCount.fieldId) + '" = ' + soy.$$escapeHtml(issue__soy78.testByTestTypeCount.genericType.typeName) + '\'>' + soy.$$escapeHtml(issue__soy78.testByTestTypeCount.genericType.count) + '</a>') + '</td><td class="report-count thead_GR">' + ((issue__soy78.testByTestTypeCount.otherType.count == 0) ? '0' : '<a href=\'' + soy.$$escapeHtml(opt_data.contextPath) + '/issues/?jql=issue in testExecutionTests("' + soy.$$escapeHtml(issue__soy78.key) + '") and "' + soy.$$escapeHtml(issue__soy78.testByTestTypeCount.fieldId) + '" not in ("' + soy.$$escapeHtml(issue__soy78.testByTestTypeCount.genericType.typeName) + '", "' + soy.$$escapeHtml(issue__soy78.testByTestTypeCount.cucumberType.typeName) + '", "' + soy.$$escapeHtml(issue__soy78.testByTestTypeCount.manualType.typeName) + '")\'>' + soy.$$escapeHtml(issue__soy78.testByTestTypeCount.otherType.count) + '</a>') + '</td>' + ((issue__soy78.testCountByStatus.totalCount == 0) ? '<td class="report-count" style="border-right: dotted 1px #c4cad3">0%</td><td class="report-count" style="border-right: dotted 1px #c4cad3">0%</td>' : '<td class="report-count" style="border-right: dotted 1px #c4cad3">' + soy.$$escapeHtml(Math.round(issue__soy78.testCountByStatus.finalCount * 100 / issue__soy78.testCountByStatus.totalCount * 10) / 10) + '%</td><td class="report-count" style="border-right: dotted 1px #c4cad3">' + soy.$$escapeHtml(Math.round(issue__soy78.testCountByStatus.successCount * 100 / issue__soy78.testCountByStatus.totalCount * 10) / 10) + '%</td>') + '<td class="elapsed-time report-count thead_GR"><p class="time-tracking-running-tooltip" title="' + soy.$$escapeHtml(issue__soy78.timeString) + '">' + soy.$$escapeHtml(issue__soy78.elapsedTime) + '</p>' + ((issue__soy78.isTimeTrackingRunning == true) ? '<p class="time-tracking-running-tooltip" title="' + soy.$$escapeHtml('At least, one Test Run timer is currently running.') + '">' + aui.icons.icon({useIconFont: true, size: 'small', icon: 'recent', accessibilityText: 'recent'}) + '</p>' : '') + '</td><td class="report-count" style="border-left: solid 1px #c4cad3">' + ((issue__soy78.openDefectsLink) ? '<a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/issues/?jql=issue in (' + soy.$$escapeHtml(issue__soy78.openDefectsLink) + ')">' + soy.$$escapeHtml(issue__soy78.openDefects) + '</a>' : '0') + '</td><td class="report-count" style="border-left: dotted 1px #c4cad3">' + ((issue__soy78.closedDefectsLinks) ? '<a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/issues/?jql=issue in (' + soy.$$escapeHtml(issue__soy78.closedDefectsLinks) + ')">' + soy.$$escapeHtml(issue__soy78.closedDefects) + '</a>' : '0') + '</td></tr>';
  }
  return output;
};
if (goog.DEBUG) {
  RAVEN.Report.renderTestExecutionRows.soyTemplateName = 'RAVEN.Report.renderTestExecutionRows';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = 'templates/reports/test-runs-report/testruns-report-filter-header.soy' */
// This file was automatically generated from testruns-report-filter-header.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Report.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Report == 'undefined') { RAVEN.Report = {}; }


RAVEN.Report.renderTestRunReportFilter = function(opt_data, opt_ignored) {
  var output = '<input type="hidden" value="' + soy.$$escapeHtml(opt_data.filterscopepref) + '"/><div><form action="#" id="testruns-report-coverage-form" class="aui"><a id="raven-testruns-report-filter-trigger" href="#" aria-controls="raven-testruns-filter-inline-dialog" data-aui-trigger class="aui-button aui-style-default raven-dropdown2-arrow aui-button-subtle">' + soy.$$escapeHtml('Filter(s)') + '</a><a data-aui-trigger aria-controls="show-tooltip" id="raven-notifications-icon" style="display:none;margin-left:4px;margin-right:4px;"></a><a id="enable-how-to-read-msg" style="display:none; font-size:13px;">' + soy.$$escapeHtml('How to read this report') + '</a></form></div>' + ((opt_data.requiresExperimentalDialog2) ? '<aui-inline-dialog2 id="raven-testruns-filter-inline-dialog" class="aui-layer aui-inline-dialog" data-aui-alignment="bottom left" data-aui-responds-to="toggle" aria-hidden="true"><div class="aui-inline-dialog-contents" >' : '<aui-inline-dialog id="raven-testruns-filter-inline-dialog" class="" data-aui-alignment="bottom left" aria-hidden="true">') + '<div id="raven-testruns-filter-dialog"><div id="raven-testruns-coverage-content-panel"><div class="filter-fieldset" id="raven-testruns-filter"><h4 class="filter-title selected" data-mode="1">' + soy.$$escapeHtml('Filters') + '</h4><span class="spliter">|</span><h4 class="filter-title" data-mode="2">' + soy.$$escapeHtml('Saved Filter') + '</h4><form action="#" id="raven-testruns-report-filters-form" method="post" class="aui top-label filter-form"><div class="aui-item"><div class="filter-field top-label filter-select" style="display: none"><label class="aui top-label" for="raven-testruns-report-filter-project">' + soy.$$escapeHtml('Project') + '</label><select id="raven-testruns-report-filter-project" name="project" title="' + soy.$$escapeHtml('All') + '" class="select raven-multi-select hidden multi-select" multiple="multiple">';
  if (opt_data.projects != null) {
    var projectList26 = opt_data.projects;
    var projectListLen26 = projectList26.length;
    for (var projectIndex26 = 0; projectIndex26 < projectListLen26; projectIndex26++) {
      var projectData26 = projectList26[projectIndex26];
      output += '<option value="' + soy.$$escapeHtml(projectData26) + '" selected title="' + soy.$$escapeHtml(projectData26) + '">' + soy.$$escapeHtml(projectData26) + '</option>';
    }
  }
  output += '</select></div><div class="filter-field top-label filter-select"><label class="aui top-label" for="raven-testruns-report-filter-fixversion">' + soy.$$escapeHtml('Fix Version') + '</label><select class="select" id="raven-testruns-report-filter-fixversion" name="fixversion" title="' + soy.$$escapeHtml('All') + '"><option value="-1">' + soy.$$escapeHtml('All') + '</option>' + ((opt_data.fixversionpref != null) ? '<option value="' + soy.$$escapeHtml(opt_data.fixversionpref) + '" selected title="' + soy.$$escapeHtml(opt_data.fixversionpref) + '">' + soy.$$escapeHtml(opt_data.fixversionpref) + '</option> ' : '');
  var versionList51 = opt_data.fixversions;
  var versionListLen51 = versionList51.length;
  for (var versionIndex51 = 0; versionIndex51 < versionListLen51; versionIndex51++) {
    var versionData51 = versionList51[versionIndex51];
    output += '<option value="' + soy.$$escapeHtml(versionData51) + '" ' + ((versionData51 == opt_data.fixversionpref) ? ' selected' : '') + ' title="' + soy.$$escapeHtml(versionData51) + '">' + soy.$$escapeHtml(versionData51) + '</option>';
  }
  output += '</select></div><div class="filter-field top-label no-label" style="margin-top: 1px;"><label class="aui top-label" for="raven-testruns-report-filter-testenvironments">' + soy.$$escapeHtml('Revision') + '</label><input class="text" type="input" id="raven-testrun-report-filter-revision" value="' + ((opt_data.revisionpref) ? soy.$$escapeHtml(opt_data.revisionpref) : '') + '"></div><div class="filter-field top-label filter-select"><label class="aui top-label" for="raven-testruns-report-filter-testenvironments">' + soy.$$escapeHtml('Test Environments') + '</label><select class="select" id="raven-testruns-report-filter-testenvironments" name="testenvironments" title="' + soy.$$escapeHtml('All') + '">' + ((opt_data.testenvironmentpref && opt_data.testenvironmentpref != '-1' && opt_data.testenvironmentpref != '__NULL__') ? '<option value="' + soy.$$escapeHtml(opt_data.testenvironmentpref) + '" selected="selected">' + soy.$$escapeHtml(opt_data.testenvironmentpref) + '</option><option value="-1" title="' + soy.$$escapeHtml('All Environments') + '">' + soy.$$escapeHtml('All Environments') + '</option><option value="__NULL__" title="' + soy.$$escapeHtml('Empty') + '">' + soy.$$escapeHtml('Empty') + '</option>' : '<option value="-1" title="' + soy.$$escapeHtml('All Environments') + '" ' + ((opt_data.testenvironmentpref == null || opt_data.testenvironmentpref == -1) ? 'selected="selected"' : '') + '>' + soy.$$escapeHtml('All Environments') + '</option><option value="__NULL__" title="' + soy.$$escapeHtml('Empty') + '" ' + ((opt_data.testenvironmentpref == '__NULL__') ? 'selected="selected"' : '') + '>' + soy.$$escapeHtml('Empty') + '</option>') + '</select></div><div class="filter-field top-label filter-select"><label class="aui top-label" for="raven-testrun-report-filter-testplan">' + soy.$$escapeHtml('Test Plan') + '</label><select class="select" id="raven-testrun-report-filter-testplan" name="fixversion" title="' + soy.$$escapeHtml('All') + '"><option value="-1">' + soy.$$escapeHtml('All') + '</option>' + ((opt_data.testplanpref) ? '<option value="' + soy.$$escapeHtml(opt_data.testplanpref) + '" style="background-image:url(' + soy.$$escapeHtml(opt_data.contextPath) + soy.$$escapeHtml(opt_data.testPlanIssueIcon) + ');" selected title="' + soy.$$escapeHtml(opt_data.testplanpref) + '">' + soy.$$escapeHtml(opt_data.testplanpref) + '</option>' : '') + '</select></div><div class="filter-field top-label filter-select"><label class="aui top-label" for="raven-testruns-report-filter-testpriorities">' + soy.$$escapeHtml('Test Priority') + '</label><select class="select" id="raven-testruns-report-filter-testpriorities" name="testrunpriorities" title="' + soy.$$escapeHtml('All') + '"><option value="-1">' + soy.$$escapeHtml('All') + '</option>';
  var priorityList135 = opt_data.testpriorities;
  var priorityListLen135 = priorityList135.length;
  for (var priorityIndex135 = 0; priorityIndex135 < priorityListLen135; priorityIndex135++) {
    var priorityData135 = priorityList135[priorityIndex135];
    output += '<option value="' + soy.$$escapeHtml(priorityData135) + '" ' + ((priorityData135 == opt_data.testprioritypref) ? ' selected' : '') + ' title="' + soy.$$escapeHtml(priorityData135) + '">' + soy.$$escapeHtml(priorityData135) + '</option>';
  }
  output += '</select></div><div class="filter-field top-label filter-select"><label class="aui top-label" for="raven-testruns-report-filter-testcomponents">' + soy.$$escapeHtml('Test Components') + '</label><select class="select" id="raven-testruns-report-filter-testcomponents" name="testcomponents" title="' + soy.$$escapeHtml('All') + '"><option value="-1">' + soy.$$escapeHtml('All') + '</option>';
  var componentList155 = opt_data.testcomponents;
  var componentListLen155 = componentList155.length;
  for (var componentIndex155 = 0; componentIndex155 < componentListLen155; componentIndex155++) {
    var componentData155 = componentList155[componentIndex155];
    output += '<option value="' + soy.$$escapeHtml(componentData155) + '" ' + ((componentData155 == opt_data.testcomponentpref) ? ' selected' : '') + ' title="' + soy.$$escapeHtml(componentData155) + '">' + soy.$$escapeHtml(componentData155) + '</option>';
  }
  output += '</select></div><div class="filter-field top-label filter-select"><label class="aui top-label" for="raven-testrun-report-filter-testrunassignee">' + soy.$$escapeHtml('TestRun Assignee') + '</label><select class="select raven-default-user-picker" id="raven-testrun-report-filter-testrunassignee" name="fixversion" title="' + soy.$$escapeHtml('All') + '" data-show-dropdown-button="true"><option value="-1">' + soy.$$escapeHtml('All') + '</option>' + ((opt_data.testrunassigneepref) ? (opt_data.isTestRunAssigneeCurrentUser) ? '<option value="' + soy.$$escapeHtml(opt_data.currentUserValue) + '" selected title="' + soy.$$escapeHtml('Current User') + '" style="background-image: url(' + soy.$$escapeHtml(opt_data.testrunassigneepref.avatarUrls['16x16']) + ');">' + soy.$$escapeHtml('Current User') + ' (' + soy.$$escapeHtml(opt_data.testrunassigneepref.displayName) + ')</option>' : '<option value="' + soy.$$escapeHtml(opt_data.testrunassigneepref) + '" selected title="' + soy.$$escapeHtml(opt_data.testrunassigneepref) + '">' + soy.$$escapeHtml(opt_data.testrunassigneepref) + '</option>' : '') + ((opt_data.testrunassigneepref && opt_data.testrunassigneepref.active == true) ? '<optgroup label="All Users">' + ((opt_data.isTestRunAssigneeCurrentUser) ? '<option value="' + soy.$$escapeHtml(opt_data.currentUserValue) + '" selected="selected" style="background-image: url(' + soy.$$escapeHtml(opt_data.testrunassigneepref.avatarUrls['16x16']) + ');">' + soy.$$escapeHtml('Current User') + ' (' + soy.$$escapeHtml(opt_data.testrunassigneepref.displayName) + ')</option>' : '<option value="' + soy.$$escapeHtml(opt_data.testrunassigneepref.name) + '" selected="selected" style="background-image: url(' + soy.$$escapeHtml(opt_data.testrunassigneepref.avatarUrls['16x16']) + ');">' + soy.$$escapeHtml(opt_data.testrunassigneepref.displayName) + '</option>') + '</optgroup>' : '') + '</select></div><div class="filter-field top-label filter-select"><label class="aui top-label" for="raven-testrun-report-filter-executedby">' + soy.$$escapeHtml('Executed By') + '</label><select class="select raven-default-user-picker" id="raven-testrun-report-filter-executedby" name="executedby" title="' + soy.$$escapeHtml('All') + '" data-show-dropdown-button="true"><option value="-1">' + soy.$$escapeHtml('All') + '</option>' + ((opt_data.executedbypref) ? (opt_data.isExecutedByCurrentUser) ? '<option value="' + soy.$$escapeHtml(opt_data.currentUserValue) + '" selected title="' + soy.$$escapeHtml('Current User') + '" style="background-image: url(' + soy.$$escapeHtml(opt_data.executedbypref.avatarUrls['16x16']) + ');">' + soy.$$escapeHtml('Current User') + ' (' + soy.$$escapeHtml(opt_data.executedbypref.displayName) + ')</option>' : '<option value="' + soy.$$escapeHtml(opt_data.executedbypref) + '" selected title="' + soy.$$escapeHtml(opt_data.executedbypref) + '">' + soy.$$escapeHtml(opt_data.executedbypref) + '</option>' : '') + ((opt_data.executedbypref && opt_data.executedbypref.active == true) ? '<optgroup label="All Users">' + ((opt_data.isExecutedByCurrentUser) ? '<option value="' + soy.$$escapeHtml(opt_data.currentUserValue) + '" selected="selected" style="background-image: url(' + soy.$$escapeHtml(opt_data.executedbypref.avatarUrls['16x16']) + ');">' + soy.$$escapeHtml('Current User') + ' (' + soy.$$escapeHtml(opt_data.executedbypref.displayName) + ')</option>' : '<option value="' + soy.$$escapeHtml(opt_data.executedbypref.name) + '" selected="selected" style="background-image: url(' + soy.$$escapeHtml(opt_data.executedbypref.avatarUrls['16x16']) + ');">' + soy.$$escapeHtml(opt_data.executedbypref.displayName) + '</option>') + '</optgroup>' : '') + '</select></div><div class="filter-field top-label filter-select"><label class="aui top-label" for="raven-testruns-report-filter-testrunstatuses">' + soy.$$escapeHtml('TestRun Status') + '</label><select class="select" id="raven-testruns-report-filter-testrunstatuses" name="testrunstatuses" multiple="multiple" style="display: none;" title="' + soy.$$escapeHtml('All') + '">';
  var statusList279 = opt_data.testrunstatuses;
  var statusListLen279 = statusList279.length;
  for (var statusIndex279 = 0; statusIndex279 < statusListLen279; statusIndex279++) {
    var statusData279 = statusList279[statusIndex279];
    output += '<option value="' + soy.$$escapeHtml(statusData279) + '" title="' + soy.$$escapeHtml(statusData279) + '" ' + ((opt_data.selectedStatuses[statusData279]) ? ' selected ' : '') + '>' + soy.$$escapeHtml(statusData279) + '</option>';
  }
  output += '</select></div><div id="testruns-filter-test-contains-div" class="filter-field top-label no-label"><input class="text" type="input" id="raven-testrun-report-filter-test-contains" title="' + soy.$$escapeHtml('Test Key or Summary') + '" value="' + ((opt_data.testContainsPref) ? soy.$$escapeHtml(opt_data.testContainsPref) : '') + '" placeholder="' + soy.$$escapeHtml('Test Key or Summary') + '"></div><div id="testruns-filter-testexecution-contains-div" class="filter-field top-label no-label"><input class="text" type="input" id="raven-testrun-report-filter-testexecution-contains" title="' + soy.$$escapeHtml('Test Exec. Key or Summary') + '" value="' + ((opt_data.testExecutionContainsPref) ? soy.$$escapeHtml(opt_data.testExecutionContainsPref) : '') + '" placeholder="' + soy.$$escapeHtml('Test Exec. Key or Summary') + '"></div></div></form><form action="#" id="raven-testruns-savedfilter-form" method="post" class="aui top-label filter-form" style="display: none;"><div class="filter-field top-label"><label class="aui top-label" for="raven-testruns-filter-saved">' + soy.$$escapeHtml('Saved Filter') + '</label><select class="select raven-default-filter-picker" id="raven-testruns-filter-saved" name="savedFilter" title="Saved Filter" data-show-dropdown-button="true">' + ((opt_data.savedfilterpref) ? '<option value="' + soy.$$escapeHtml(opt_data.savedfilterpref.id) + '" selected="selected" title="' + soy.$$escapeHtml(opt_data.savedfilterpref.description) + '">' + soy.$$escapeHtml(opt_data.savedfilterpref.name) + '</option>' : '') + '</select></div></form><div class="raven-dialog-buttons-container"><div class="raven-dialog-buttons"><button id="raven-testruns-dialog-apply" class="aui-button js-save-button">' + soy.$$escapeHtml('Apply') + '</button><button id="raven-testruns-dialog-clear" class="aui-button js-save-button">' + soy.$$escapeHtml('Clear') + '</button><a id="raven-testruns-dialog-cancel" style="float: right;" class="aui-button aui-button-link js-cancel-button">' + soy.$$escapeHtml('Cancel') + '</a></div></div></div></div></div>' + ((opt_data.requiresExperimentalDialog2) ? '</div>' : '') + '</aui-inline-dialog>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Report.renderTestRunReportFilter.soyTemplateName = 'RAVEN.Report.renderTestRunReportFilter';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = 'templates/reports/test-runs-report/testruns-report.soy' */
// This file was automatically generated from testruns-report.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Report.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Report == 'undefined') { RAVEN.Report = {}; }


RAVEN.Report.renderTestRunsReport = function(opt_data, opt_ignored) {
  return RAVEN.Report.renderHowToRead({howToRead: 'Shows a list of Test Runs with detailed info for each one, including related Test, Test Execution and Test Plan entities, execution dates, linked defects among other.', link: 'https://docs.getxray.app/display/XRAY/Test+Runs+Report', requiresExperimentalDialog2: opt_data.requiresExperimentalDialog2}) + '<section role="dialog" id="report-testruns-longreport-warning" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true"><!-- Dialog header --><header class="aui-dialog2-header"><!-- The dialog\'s title --><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Unable to complete action') + '</h2></header><!-- Main dialog content --><div class="aui-dialog2-content"><p>' + soy.$$filterNoAutoescape('The report contains too many Test Runs. \x3cbr\x3ePlease refine your filter criteria in order to reduce the amount of Test Runs to less than 10000.') + '<p></div><footer class="aui-dialog2-footer"><!-- Actions to render on the right of the footer --><div class="aui-dialog2-footer-actions"><button id="report-testruns-longreport-warning-button-ok" class="aui-button">OK</button></div></footer></section><div class="header-filter" data-initialized="false" style="width:100%; margin:8px; height: 40px;"><div id="arg-validation-messages"></div><div id="testruns-filter-content-place-holder"></div><div id="testrunsreport-info-config-place-holder"><div id="testrunsreport-config-wrapper"><div class="raven-tesrunsreport-presentation-button-wrapper"><button id="raven-testruncustomfields-presentation" aria-owns="testrunsreport-dropdown-chart-options" aria-haspopup="true" class="aui-button aui-dropdown2-trigger"><span class="aui-icon aui-icon-small aui-iconfont-configure">' + soy.$$escapeHtml('Configure') + '</span></button></div><div id="testrunsreportCfcontainer"><div id="testrunsreport-dropdown-chart-options" class="aui-dropdown2 aui-style-default"><div id="testruncustomfields-presentation-option" class="raven-test-runs-column-options"><input type="checkbox" id="raven-testrunreport-displaycf" name="display-testrun-cf" value="true" ' + ((opt_data.isShowCustomField == true) ? 'checked' : '') + '><label id="testrunsreport-dropdown-chart-options-label" for="display-testrun-cf">' + soy.$$escapeHtml('Test Runs Custom Fields') + '</label></div><div id="test-run-iterations-status-progress" class="raven-test-runs-column-options"><input type="checkbox" id="raven-test-runs-display-iterations-progress" name="display-iterations-progress" value="true" ' + ((opt_data.showIterationsProgress == true) ? 'checked' : '') + '><label id="testruns-report-iteration-progress-dropdown-option-label" for="raven-test-runs-display-iterations-progress">' + soy.$$escapeHtml('Iterations Progress') + '</label></div></div></div></div><div class="load-all-entries" style="padding-top: 0px; margin-top: 10px; margin-bottom: 10px;"><a data-aui-trigger aria-controls="show-outdated-report-tooltip" id="raven-outdated-report-icon" style="display:none;margin-left:4px;margin-right:4px;"></a>' + ((opt_data.requiresExperimentalDialog2 == true || opt_data.requiresExperimentalDialog2 == 'true') ? '<aui-inline-dialog2 id="show-outdated-report-tooltip" class="aui-layer aui-inline-dialog" data-aui-alignment="bottom right" data-aui-responds-to="toggle" aria-hidden="true" style="max-width:496px"><div class="aui-inline-dialog-contents"><p>' + soy.$$escapeHtml('While you were viewing this report, a new TestRun has been created. Please refresh your report.') + '</p></div></aui-inline-dialog2>' : '<aui-inline-dialog id="show-outdated-report-tooltip" alignment="bottom right" style="max-width:496px"><p>' + soy.$$escapeHtml('While you were viewing this report, a new TestRun has been created. Please refresh your report.') + '</p></aui-inline-dialog>') + '<a data-aui-trigger aria-controls="load-all-warning" href="#load-all-warning"><span class="aui-icon aui-icon-small aui-iconfont-info load-all-info"></span></a><a id="load-all-bt" style="font-size:13px;">' + soy.$$escapeHtml('Load all') + '</a>' + ((opt_data.requiresExperimentalDialog2) ? '<aui-inline-dialog2 id="load-all-warning" class="aui-layer aui-inline-dialog" data-aui-alignment="bottom right" data-aui-responds-to="toggle" aria-hidden="true" style="max-width:496px"><div class="aui-inline-dialog-contents" ><p>' + soy.$$escapeHtml('Loading all entries may be memory and time consuming if there are many entries') + '</p></div></aui-inline-dialog2>' : '<aui-inline-dialog id="load-all-warning" alignment="bottom right" style="max-width:496px"><p>' + soy.$$escapeHtml('Loading all entries may be memory and time consuming if there are many entries') + '</p></aui-inline-dialog>') + '</div><div class="info-entries" style="padding-top: 0px; margin-top: 10px; margin-bottom: 10px;"></div></div></div><div style="clear: both"></div><div id="raven-testruns-content-panel" style="min-width:600px;">' + RAVEN.Report.renderGenerateReport({imgUrl: 'xray-test-runs-list-report.png', buttonID: 'raven-load-testruns-requirement-converage-report', contextPath: opt_data.contextPath}) + '<div id="message-row-wrapper" style="height:90%;"></div><div id="testruns-row-wrapper" style="height:100%;"></div><div id="load-more">' + soy.$$escapeHtml('More') + '</div></div>';
};
if (goog.DEBUG) {
  RAVEN.Report.renderTestRunsReport.soyTemplateName = 'RAVEN.Report.renderTestRunsReport';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = 'templates/reports/test-runs-report/testruns-table.soy' */
// This file was automatically generated from testruns-table.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Report.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Report == 'undefined') { RAVEN.Report = {}; }


RAVEN.Report.renderTestRunsTable = function(opt_data, opt_ignored) {
  return '' + ((opt_data.issues.length == 0) ? '<div id="testrun-infobar" class="aui-message aui-message-hint"><p class="title"><strong>' + soy.$$escapeHtml('There are no TestRuns within the provided filters.') + '</strong></p></div>' : '<div id="testruns-tablecontainer"><table id="test-runs-report-table" class="aui" ' + ((opt_data.showCustomFields == true) ? 'style="width: 115%" ' : '') + '><thead class="test-runs-report-table-thead1"><tr><th colspan="6"/><th colspan="5" style="border-left: solid 1px #c4cad3"/>' + ((opt_data.showCustomFields == true) ? '<th colspan="1"/>' : '') + ((opt_data.showIterationsProgress == true) ? '<th colspan="1"/>' : '') + '<th colspan="1" style="border-left: solid 1px #c4cad3"/><th colspan="4" style="border-left: solid 1px #c4cad3"/><th id="tr-linked-defects" class="thead-group thead_L" colspan="2">' + soy.$$escapeHtml('Linked Defects') + '</th></tr></thead><thead class="test-runs-report-table-thead2"><tr><th id="tr-testkey" class="thead_medium">' + soy.$$escapeHtml('Test') + '</th><th id="tr-testsummary" class="thead_large">' + soy.$$escapeHtml('Test Summary') + '</th><th id="tr-components">' + soy.$$escapeHtml('Components') + '</th><th id="tr-testtype">' + soy.$$escapeHtml('Test Type') + '</th><th id="tr-testpriority">' + soy.$$escapeHtml('Test Priority') + '</th><th id="tr-testversion">' + soy.$$escapeHtml('Test Version') + '</th><th id="tr-executedby" class="thead_date" style="border-left: solid 1px #c4cad3">' + soy.$$escapeHtml('Executed By') + '</th><th id="tr-startedat" class="thead_date">' + soy.$$escapeHtml('Started At') + '</th><th id="tr-finishedat" class="thead_date">' + soy.$$escapeHtml('Finished At') + '</th><th id="tr-elapsedtime" class="thead_medium">' + soy.$$escapeHtml('Elapsed Time') + '</th><th id="tr-testrunstatus">' + soy.$$escapeHtml('Status') + '</th>' + ((opt_data.showCustomFields == true) ? '<th id="tr-customfields" class="thead_medium">' + soy.$$escapeHtml('Custom Fields') + '</th>' : '') + ((opt_data.showIterationsProgress == true) ? '<th id="tr-iterationsprogress" class="thead_medium">' + soy.$$escapeHtml('Iterations Progress') + '</th>' : '') + '<th id="tr-testplankey" class="thead_medium" style="border-left: solid 1px #c4cad3">' + soy.$$escapeHtml('Test Plan') + '</th><th id="tr-testexecutionkey" class="thead_medium" style="border-left: solid 1px #c4cad3">' + soy.$$escapeHtml('Test Execution') + '</th><th id="tr-fixversion">' + soy.$$escapeHtml('Fix Version') + '</th><th id="tr-revision">' + soy.$$escapeHtml('Revision') + '</th><th id="tr-testenvironements">' + soy.$$escapeHtml('Test Environmnents') + '</th><th id="tr-opendefects" style="border-left: solid 1px #c4cad3">' + soy.$$escapeHtml('Open') + '</th><th id="tr-closeddefects">' + soy.$$escapeHtml('Closed') + '</th></tr></thead><tbody>' + RAVEN.Report.renderTestRunsRows(opt_data) + '</tbody></table></div>');
};
if (goog.DEBUG) {
  RAVEN.Report.renderTestRunsTable.soyTemplateName = 'RAVEN.Report.renderTestRunsTable';
}


RAVEN.Report.renderTestRunsRows = function(opt_data, opt_ignored) {
  var output = '';
  var entryList79 = opt_data.issues;
  var entryListLen79 = entryList79.length;
  for (var entryIndex79 = 0; entryIndex79 < entryListLen79; entryIndex79++) {
    var entryData79 = entryList79[entryIndex79];
    var issue__soy80 = entryData79.attributes;
    output += '<tr><td><a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/browse/' + soy.$$escapeHtml(issue__soy80.testKey) + '">' + soy.$$escapeHtml(issue__soy80.testKey) + '</td><td><a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/browse/' + soy.$$escapeHtml(issue__soy80.testKey) + '">' + soy.$$escapeHtml(issue__soy80.testSummary) + '</td>';
    if (issue__soy80.components.length > 0) {
      output += '<td>';
      var componentList97 = issue__soy80.components;
      var componentListLen97 = componentList97.length;
      for (var componentIndex97 = 0; componentIndex97 < componentListLen97; componentIndex97++) {
        var componentData97 = componentList97[componentIndex97];
        output += (componentIndex97 == 0) ? soy.$$escapeHtml(componentData97) : ', ' + soy.$$escapeHtml(componentData97);
      }
      output += '</td>';
    } else {
      output += '<td>-</td>';
    }
    output += '<td>' + soy.$$escapeHtml(issue__soy80.testType) + '</td><td class="testrunreport-testpriority">' + ((issue__soy80.testPriorityIconUrl) ? '<img src="' + soy.$$escapeHtml(opt_data.contextPath) + soy.$$escapeHtml(issue__soy80.testPriorityIconUrl) + '" class="testrun-report-priority-icon">' : '') + ((issue__soy80.testPriority) ? soy.$$escapeHtml(issue__soy80.testPriority) : '-') + '</td><td>' + soy.$$escapeHtml(issue__soy80.testVersion) + '</td><td style="border-left: solid 1px #c4cad3">' + ((issue__soy80.executedBy != '-') ? (issue__soy80.executedByUserExists == true || issue__soy80.executedByUserExists == 'true') ? '<a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/secure/ViewProfile.jspa?name=' + soy.$$escapeHtml(issue__soy80.executedByUsername) + '">' + soy.$$escapeHtml(issue__soy80.executedBy) + '</a>' : soy.$$escapeHtml(issue__soy80.executedBy) : soy.$$escapeHtml(issue__soy80.executedBy)) + '</td><td class="tr-centered tr-date" style="border-left: dotted 1px #c4cad3">' + soy.$$escapeHtml(issue__soy80.startDate) + '</td><td class="tr-centered tr-date" style="border-left: dotted 1px #c4cad3">' + soy.$$escapeHtml(issue__soy80.endDate) + '</td><td class="tr-elapsed-time report-count" style="border-left: dotted 1px #c4cad3"><p class="time-tracking-running-tooltip" title="' + soy.$$escapeHtml(issue__soy80.timeString) + '">' + soy.$$escapeHtml(issue__soy80.elapsedTime) + '</p>' + ((issue__soy80.isTimeTrackingRunning == true) ? '<p class="time-tracking-running-tooltip" title="' + soy.$$escapeHtml('The test run timer is currently running.') + '">' + aui.icons.icon({useIconFont: true, size: 'small', icon: 'recent', accessibilityText: 'recent'}) + '</p>' : '') + '</td><td style="color: ' + soy.$$escapeHtml(issue__soy80.testRunStatusColor) + '; border-left: dotted 1px #c4cad3;"><strong>' + soy.$$escapeHtml(issue__soy80.testRunStatus) + '</strong>' + RAVEN.ExecuteTest.renderViewDetails({contextPath: opt_data.contextPath, testExec: issue__soy80.testExecutionKey, test: issue__soy80.testKey, currentUserName: opt_data.currentUser, assignee: issue__soy80.assignee, startDate: issue__soy80.startDate, requiresExperimentalDialog2: opt_data.requiresExperimentalDialog2}) + '</td>';
    if (opt_data.showCustomFields == true) {
      output += '<td class="testrunsreport-customfields-tablediv">';
      var cfList177 = issue__soy80.reportCfValues;
      var cfListLen177 = cfList177.length;
      for (var cfIndex177 = 0; cfIndex177 < cfListLen177; cfIndex177++) {
        var cfData177 = cfList177[cfIndex177];
        output += '<div class="raven-testruncf-container"><div class="raven-testrunsreport-cf-name">' + soy.$$escapeHtml(cfData177.name) + '</div>' + ((cfData177.type != 'MULTI_LINE_TEXT') ? '<div class="raven-testrunsreport-cf-value">' + soy.$$filterNoAutoescape(cfData177.value) + '</div>' : '<div class="raven-customfieldvalue-container"></div>' + ((cfData177.hideField == true) ? '<div id="' + soy.$$escapeHtml(issue__soy80.testRunID) + '-' + soy.$$escapeHtml(cfData177.rank) + '-cf-value-container"><div id="' + soy.$$escapeHtml(issue__soy80.testRunID) + '-' + soy.$$escapeHtml(cfData177.rank) + '-reveal-text-content" class="aui-expander-content raven-multiline-hidable">' + soy.$$filterNoAutoescape(cfData177.value) + '<a id="' + soy.$$escapeHtml(issue__soy80.testRunID) + '-' + soy.$$escapeHtml(cfData177.rank) + '-reveal-text-trigger" data-replace-text="' + soy.$$escapeHtml('(less)') + '" data-replace-selector=".reveal-text-trigger-text" class="aui-expander-trigger aui-expander-reveal-text raven-multiline-cf-reveal" aria-controls="' + soy.$$escapeHtml(issue__soy80.testRunID) + '-' + soy.$$escapeHtml(cfData177.rank) + '-reveal-text-content"><span class="reveal-text-trigger-text">' + soy.$$escapeHtml('(more)') + '</span></a></div></div>' : '<div id="' + soy.$$escapeHtml(issue__soy80.testRunID) + '-' + soy.$$escapeHtml(cfData177.rank) + '-cf-value-container-noexpander">' + soy.$$filterNoAutoescape(cfData177.value) + '</div>')) + '</div>';
      }
      output += '</td>';
    }
    output += (opt_data.showIterationsProgress == true) ? '<td class="testrunsreport-iterations-progress-tablediv">' + soy.$$filterNoAutoescape(issue__soy80.renderedIterationsProgress) + '</td>' : '';
    if (issue__soy80.testPlanKey.length > 0) {
      output += '<td style="border-left: solid 1px #c4cad3">';
      var tpkeyList236 = issue__soy80.testPlanKey;
      var tpkeyListLen236 = tpkeyList236.length;
      for (var tpkeyIndex236 = 0; tpkeyIndex236 < tpkeyListLen236; tpkeyIndex236++) {
        var tpkeyData236 = tpkeyList236[tpkeyIndex236];
        output += (tpkeyIndex236 == 0) ? '<a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/browse/' + soy.$$escapeHtml(tpkeyData236) + '">' + soy.$$escapeHtml(tpkeyData236) + '</a>' : ', <a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/browse/' + soy.$$escapeHtml(tpkeyData236) + '">' + soy.$$escapeHtml(tpkeyData236) + '</a>';
      }
      output += '</td>';
    } else {
      output += '<td style="border-left: solid 1px #c4cad3">-</td>';
    }
    output += '<td style="border-left: solid 1px #c4cad3"><a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/browse/' + soy.$$escapeHtml(issue__soy80.testExecutionKey) + '">' + soy.$$escapeHtml(issue__soy80.testExecutionKey) + '</a></td>';
    if (issue__soy80.fixVersions.length > 0) {
      output += '<td>';
      var versionList268 = issue__soy80.fixVersions;
      var versionListLen268 = versionList268.length;
      for (var versionIndex268 = 0; versionIndex268 < versionListLen268; versionIndex268++) {
        var versionData268 = versionList268[versionIndex268];
        output += (versionIndex268 == 0) ? soy.$$escapeHtml(versionData268) : ', ' + soy.$$escapeHtml(versionData268);
      }
      output += '</td>';
    } else {
      output += '<td>-</td>';
    }
    output += '<td>' + soy.$$escapeHtml(issue__soy80.testExecutionRevision) + '</td>';
    if (issue__soy80.testEnvironements.length > 0) {
      output += '<td>';
      var environmentList285 = issue__soy80.testEnvironements;
      var environmentListLen285 = environmentList285.length;
      for (var environmentIndex285 = 0; environmentIndex285 < environmentListLen285; environmentIndex285++) {
        var environmentData285 = environmentList285[environmentIndex285];
        output += '<a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/secure/IssueNavigator.jspa?reset=true&mode=hide&jqlQuery=' + soy.$$escapeHtml(issue__soy80.testEnvironmentJqlModel) + ' \'' + soy.$$escapeHtml(environmentData285) + '\'"><span id="environment-labels" class="aui-lozenge aui-lozenge-subtle aui-lozenge-complete xray-test-env-field-report">' + soy.$$escapeHtml(environmentData285) + '</span></a>';
      }
      output += '</td>';
    } else {
      output += '<td>-</td>';
    }
    output += '<td class="tr-report-count" style="border-left: solid 1px #c4cad3">' + ((issue__soy80.openDefects > 0) ? '<a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/issues/?jql=issue in (' + soy.$$escapeHtml(issue__soy80.openDefectsLink) + ')">' + soy.$$escapeHtml(issue__soy80.openDefects) + '</a>' : soy.$$escapeHtml(issue__soy80.openDefects)) + '</td><td class="tr-report-count" style="border-left: dotted 1px #c4cad3">' + ((issue__soy80.closedDefects > 0) ? '<a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/issues/?jql=issue in (' + soy.$$escapeHtml(issue__soy80.closedDefectsLinks) + ')">' + soy.$$escapeHtml(issue__soy80.closedDefects) + '</a>' : soy.$$escapeHtml(issue__soy80.closedDefects)) + '</td></tr>';
  }
  return output;
};
if (goog.DEBUG) {
  RAVEN.Report.renderTestRunsRows.soyTemplateName = 'RAVEN.Report.renderTestRunsRows';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/js/report/report-testexecution-view.js' */
require(["aui/inline-dialog2"]);(function(f){var d=false;var b=Backbone.Model.extend({key:null,summary:null,testEnvironements:null,startDate:null,endDate:null,totalTests:null,statuses:null,manual:null,cucumber:null,generic:null,progress:null,success:null,elapsedTime:null,openDefects:null,closedDefects:null});var e=Backbone.Collection.extend({model:b,url:function(){return contextPath+"/rest/raven/1.0/report/testexecutionreport/testexecutions/"}});var c=Backbone.Model.extend({name:null,color:null});var a=Backbone.Collection.extend({model:c,url:function(){return contextPath+"/rest/raven/1.0/report/testexecutionreport/teststatuses"}});RAVEN.Report.TestExecutionReportView=Backbone.View.extend({el:"#report-wrapper",filterView:null,testExecutionView:null,render:function(h){var i=this;var j=RAVEN.Report.renderTestExecutionReport({requiresExperimentalDialog2:h,contextPath:contextPath});this.$el.empty();this.$el.html(j);i.filterView=new RAVEN.Report.Filters.TestExecutionFilterView();i.testExecutionView=new RAVEN.Report.TestExecutionView({filterView:i.filterView});const g=RAVEN.report.analytics.endpoints().TEST_EXECUTION;RAVEN.report.analytics.reportVisit(g)},destroy:function(){if(this.filterView){this.filterView.destroy();this.filterView=null}if(this.testExecutionView){this.testExecutionView.destroy();this.testExecutionView=null}f("#show-tooltip").remove();f("#load-all-warning").remove();f("#elapsed-time-tip-dialog").remove();this.$el.empty();this.undelegateEvents()}});RAVEN.Report.TestExecutionView=Backbone.View.extend({el:"#testexecs-row-wrapper",filterView:null,version:null,testplan:null,environment:null,assignee:null,status:null,resolution:null,contains:null,filterscope:null,savedfilter:null,projectId:null,start:0,total:0,pageSize:20,prevValues:null,filterMode:true,isFirstReport:true,unscopedEvents:{"submit.raven.report.testexecution #raven-testexec-report-filters-form":"preventDefault","submit.raven.report.testexecution #raven-testexec-savedfilter-form":"preventDefault","click.raven.report.testexecution #raven-testexec-filter-saved-suggestions":"preventDefault","click.raven.report.testexecution #raven-testexec-report-filter-project-suggestions":"preventDefault","click.raven.report.testexecution #raven-testexec-report-filter-environment-suggestions":"preventDefault","click.raven.report.testexecution #raven-testexec-report-filter-testplan-suggestions":"preventDefault","click.raven.report.testexecution #raven-testexec-report-filter-fixversion-suggestions":"preventDefault","click.raven.report.testexecution #raven-testexec-report-filter-status-suggestions":"preventDefault","click.raven.report.testexecution #raven-testexec-report-filter-resolution-suggestions":"preventDefault","click.raven.report.testexecution #raven-testexec-report-filter-assignee-suggestions":"preventDefault","click.raven.report.testexecution #dismiss-how-to-read-msg":"disableHowToRead","click.raven.report.testexecution #enable-how-to-read-msg":"enableHowToRead","click.raven.report.testexecution .item-delete":"preventDefault","click.raven.report.testexecution #load-more":"loadMore","click.raven.report.testexecution #load-all-bt":"loadAll","click.raven.report.testexecution #raven-load-testexec-requirement-converage-report":"firstGenerateReport",},loadAll:function(){this.prevValues=null;this.pageSize=-1;this.render()},loadMore:function(){this.start=this.start+20;if(this.total>this.pageSize){f("#load-more").addClass("lastRowSpin");this.render()}},setPaginationInfo:function(g){var i="";if(g==-1){f("#load-more").css("display","none");f(".load-all-entries").css("display","none")}else{var h=this.start+g;if(h>=this.total||this.total==0){f("#load-more").css("display","none")}else{f("#load-more").css("display","block")}if(h>=this.total){h=this.total;f(".load-all-entries").css("display","none")}else{f(".load-all-entries").css("display","block")}i=AJS.format("Showing {0} of {1} entries",h,this.total)}f(".info-entries").empty();f(".info-entries").append(i)},render:function(){if(this.isFirstReport){return}f("#report-wrapper").block();f(".raven-requirement-header").block();if(f(".lastRowSpin").length){f(".lastRowSpin").spin("medium");f("#load-more").css("color","#eee")}else{f("#report-wrapper").spin("large")}this.clearMessage();var h=this;var i=h.$el;var l=f("#selected-project-id").val();var k=new a();var g=new e();var j=h.filterView.getCurrentValues();k.fetch({success:function(m,o,n){h.checkShowHowToRead();j=f.param({start:h.start,pageSize:h.pageSize,projectId:l})+"&"+f.param(j);g.fetch({data:j,success:function(u,t,s){if(u.models&&u.models.length>0){h.total=u.models[0].attributes.total;h.pageSize=u.models[0].attributes.pageSize;if(h.prevValues){f.merge(h.prevValues,u.models);var r=RAVEN.Report.renderTestExecutionRows({issues:u.models,contextPath:contextPath,statuses:m.models});var p=f("tr:last").offset().top-80;f("#test-execution-report-table tbody").append(r);f("html, body").animate({scrollTop:p},1000)}else{f("#elapsed-time-tip-dialog").remove();h.prevValues=u.models;var r=RAVEN.Report.renderTestExecutionsTable({issues:u.models,contextPath:contextPath,statuses:m.models,requiresExperimentalDialog2:d});i.html(r)}h.setPaginationInfo(u.models.length);h.stopLoading();enableExportReportButton()}else{if(i){i.empty();h.setPaginationInfo(-1);h.stopLoading()}AJS.messages.generic(f("#message-row-wrapper"),{body:"No records found",closeable:false});disableExportReportButton();fixReportWrapperHeight()}var q=j;f("#raven-report-common-to-csv-link").attr("href",contextPath+"/plugins/servlet/raven/report/testexecution/export?"+q);JIRA.trigger(JIRA.Events.NEW_CONTENT_ADDED,[f("#test-execution-report-table"),JIRA.CONTENT_ADDED_REASON.panelRefreshed]);AJS.$(".time-tracking-running-tooltip").tooltip()},error:function(q,p){if(i){i.empty();h.setPaginationInfo(-1);h.stopLoading()}AJS.messages.error(f("#message-row-wrapper"),{title:"Error while retrieving Test Executions",body:p.responseText,closeable:false});h.stopLoading();disableExportReportButton()}})},error:function(n,m){h.setPaginationInfo(-1);AJS.messages.error(f("#message-row-wrapper"),{title:"Error while retrieving test statuses columns",body:m.responseText,closeable:false});h.stopLoading();disableExportReportButton()}})},stopLoading:function(){f("#report-wrapper").unblock();f(".raven-requirement-header").unblock();f("#report-wrapper").spinStop();f(".lastRowSpin").spinStop();f(".lastRowSpin").removeClass("lastRowSpin");f("#load-more").css("color","#999");f(".lastRowSpin").unblock()},initialize:function(g){if(g){_.extend(this,_.pick(g,"filterView"))}this._delegateUnscopedEvents();disableExportReportButton();this.listenTo(this.filterView,"raven.dialog.apply:test-executions-filter",this.filtersSubmit)},checkShowHowToRead:function(){var g=this;f.ajax({type:"GET",url:contextPath+"/rest/raven/1.0/report/testexecutionreport/isHowToRead",success:function(i,j,h){if(i){g.showHowToRead()}else{g.hideHowToRead()}},error:function(i,j,h){console.log(i)}})},setHowToReadServer:function(g){f.ajax({type:"POST",data:g,url:contextPath+"/rest/raven/1.0/report/testexecutionreport/setHowToRead",contentType:"application/json",error:function(i,j,h){console.log(i)}})},destroy:function(){f("#show-tooltip").remove();f("#load-all-warning").remove();this.undelegateEvents();this._undelegateUnscopedEvents()},_delegateUnscopedEvents:function(){var g=this;f(document).off(".raven.report.testexecution");f.each(this.unscopedEvents,function(j,k){var i=j.substring(0,j.indexOf(" "));var h=j.substring(j.indexOf(" ")+1);f(document).on(i,h,f.proxy(g[k],g))})},_undelegateUnscopedEvents:function(){f(document).off(".raven.report.testexecution")},preventDefault:function(g){g.stopPropagation();g.preventDefault()},filtersSubmit:function(){this.prevValues=null;this.start=0;this.pageSize=20;this.render()},firstGenerateReport:function(){f(".load-all-entries").show();f("#raven-first-report").hide();this.isFirstReport=false;this.render()},disableHowToRead:function(){f(".header-filter").attr("data-initialized",false);this.hideHowToRead();this.setHowToReadServer("disabled")},enableHowToRead:function(){f(".header-filter").attr("data-initialized",false);this.showHowToRead();this.setHowToReadServer("enabled")},showHowToRead:function(){f(".raven-how-to-read-chart").show("fast");f("#raven-notifications-icon").hide("fast");f("#enable-how-to-read-msg").hide("fast")},hideHowToRead:function(){f(".raven-how-to-read-chart").hide("fast");f("#raven-notifications-icon").show("fast");f("#enable-how-to-read-msg").show("fast")},clearMessage:function(){f("#message-row-wrapper").empty()}})})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/js/report/filters/report-testexecution-filter.js' */
(function(h){RAVEN.namespace("RAVEN.Report.Filters");var l=Backbone.Model.extend({urlRoot:function(){return contextPath+"/rest/raven/1.0/report/testexecutionreport/filterValues"}});var b=Backbone.Model.extend({urlRoot:function(){return contextPath+"/rest/raven/1.0/report/testexecutionreport/filterValues/fromQueryParam"}});var j={FILTER_SCOPE:"filterscope",PROJECTS:"projects",FIX_VERSION:"version",TEST_PLAN:"testplan",ENVIRONMENT:"environment",SAVED_FILTER:"savedfilter",ASSIGNEE:"assignee",STATUS_ID:"statusId",RESOLUTION:"resolution",CONTAINS:"contains"};RAVEN.Report.Filters.TestExecutionFilterView=RAVEN.Component.ReportFilter.extend({el:"#testexecution-filter-content-place-holder",unscopedEvents:{"click.raven.report.testexecution-filter #raven-testexec-dialog-apply":"applyTestExecutionsFilter","click.raven.report.testexecution-filter #raven-testexec-dialog-clear":"resetFilter","click.raven.report.testexecution-filter #raven-testexec-filter-dialog .filter-title":"clickTitleNotSelected","click.raven.report.testexecution-filter #raven-testexec-dialog-cancel":"closeDialog","change.raven.report.testexecution-filter #raven-testexec-report-filter-assignee":"removeAssigneeIcon","change.raven.report.testexecution-filter #raven-testexec-report-filter-testplan":"clearTestPlanIconOnChange","click.raven.report.testexecution-filter #testexec-report-coverage-form":"clickFilterButton"},projectId:null,projectKey:null,dialog:null,filterMode:false,SAVED_FILTER_MODE:2,isEnterprise:false,queryParamsDef:j,userPrefsBasedFilterValuesResource:function(){return new l()},queryParamsBasedFilterValuesResource:function(){return new b()},initialize:function(){this.projectId=h("#selected-project-id").val();this.projectKey=h("#selected-report-key").val();this.isEnterprise=h("#isXrayEnterprise").val()==="true";this.render();f.call(this)},buildFilterComponent:function(p){if(!p||!p.attributes){console.error("Couldn't fetch filter values");return}var q=parseStatusesToObject(p.attributes.statuspref);this.dialog=RAVEN.Report.renderTestExecutionReportFilter({projects:p.attributes.projects,requiresExperimentalDialog2:p.attributes.requiresExperimentalDialog2,filterscopepref:p.filterscope,testPlanKeypref:p.attributes.testPlanKeypref,environmentpref:p.attributes.environmentpref,versionpref:p.attributes.versionpref,savedFilterpref:p.attributes.savedFilter,assignees:p.attributes.assignees,assigneepref:p.attributes.assigneepref,resolutions:p.attributes.resolutions,resolutionpref:p.attributes.resolutionpref,contains:p.attributes.contains,isEnterprise:this.isEnterprise,testPlanIssueIcon:p.attributes.testPlanIssueIcon,selectedStatuses:q,contextPath:contextPath,fixversions:p.attributes.fixVersions||[],});this.$el.empty();this.$el.html(this.dialog);a.call(this);if(p.attributes.filterscopepref!=="filter"){this.filterMode=false;this.toggleFilters((h(".filter-title[data-mode=2]")))}else{this.filterMode=true}},saveCurrentFilterValues:function(){m.call(this)},renderFilterSummary:function(){var x="";var z=this.getCurrentValues();var p=z[j.SAVED_FILTER];if(p&&p!="-1"){x="<b>"+"Saved Filter"+"</b>  "+AJS.escapeHTML(h('#raven-testexec-filter-inline-dialog #raven-testexec-filter-saved option[value="'+p+'"]').text())}else{if(this.isEnterprise){var y=z[j.PROJECTS];if(y){if(x){x+="; "}x+="<b>"+"Project"+"</b>  "+AJS.escapeHTML(y)}}var v=z[j.FIX_VERSION];if(v&&v!="-1"){if(x){x+="; "}x+="<b>"+"Fix Version"+"</b>  "+AJS.escapeHTML(v)}var u=z[j.ASSIGNEE];if(u&&u!="-1"){if(x){x+="; "}x+="<b>"+"Assignee User"+"</b>  "+AJS.escapeHTML(u)}var s=z[j.CONTAINS];if(s){if(x){x+="; "}x+="<b>"+"Contains"+"</b>  "+AJS.escapeHTML(s)}const w=z[j.STATUS_ID];if(w){if(x){x+="; "}x+="<b>"+"Status"+"</b>  "+AJS.escapeHTML(w)}var r=z[j.RESOLUTION];if(r&&r!=="-1"){if(x){x+="; "}x+="<b>"+"Resolution"+"</b>  "+AJS.escapeHTML(h('#raven-testexec-report-filter-resolution option[value="'+r+'"]').text())}var q=z[j.TEST_PLAN];if(q){if(x){x+="; "}x+="<b>"+"Test Plan"+"</b>  "+AJS.escapeHTML(q)}var t=z[j.ENVIRONMENT];if(t){if(x){x+="; "}x+="<b>"+"Environment"+"</b>  "+AJS.escapeHTML(t)}}if(x){h("#raven-testexec-report-filter-trigger").html(x)}else{h("#raven-testexec-report-filter-trigger").text("Filter(s)")}},toggleFilters:function(p){h(".filter-title.selected").removeClass("selected");h(p).addClass("selected");if(h(p).data("mode")==1){this.filterMode=true;h("#raven-testexec-report-filters-form").show();h("#raven-testexec-savedfilter-form").hide()}else{this.filterMode=false;h("#raven-testexec-report-filters-form").hide();h("#raven-testexec-savedfilter-form").show()}},destroy:function(){this.undelegateEvents();i.call(this);if(this.dialog){h("#raven-testexec-filter-inline-dialog").remove()}this.remove();RAVEN.Component.ReportFilter.prototype.destroy.call(this)},applyTestExecutionsFilter:function(){if(h(".filter-title.selected").data("mode")===this.SAVED_FILTER_MODE){this.filterMode=false}else{this.filterMode=true}m.call(this);RAVEN.Component.ReportFilter.prototype.closeDialogAndSyncURLQueryParams.call(this,"#raven-testexec-filter-inline-dialog");this.trigger("raven.dialog.apply:test-executions-filter")},closeDialog:function(){closeDialogGeneric("#raven-testexec-filter-inline-dialog")},removeAssigneeIcon:function(){if(!this.assigneeFieldPicker._hasIcon()){if(this.assigneeFieldPicker.$entityIcon!==undefined){this.assigneeFieldPicker.$entityIcon.remove()}this.assigneeFieldPicker.$container.removeClass("aui-ss-has-entity-icon")}},resetFilter:function(){if(this.projectPicker){this.projectPicker.clearLozenges()}if(this.fixVersionFieldPicker){this.fixVersionFieldPicker._setDescriptorWithValue("-1")}if(this.testPlanPicker){this.testPlanPicker._setDescriptorWithValue("-1");h("#raven-testexec-report-filter-testplan-single-select").removeClass("aui-ss-has-entity-icon")}if(this.environmentPicker){this.environmentPicker._setDescriptorWithValue("-1")}var p=h("#raven-testexec-filter-saved").data("field-support-obj");if(p){p.clear()}if(this.statusPicker){this.statusPicker.clearLozenges()}if(this.resolutionPicker){this.resolutionPicker._setDescriptorWithValue("-1")}if(this.assigneeFieldPicker){this.assigneeFieldPicker.clear();this.assigneeFieldPicker._setDescriptorWithValue("-1")}h("#raven-testexec-report-filter-contains").val("")},clickTitleNotSelected:function(p){this.toggleFilters(p.currentTarget)},clearTestPlanIconOnChange:function(){if(h("#raven-testexec-report-filter-testplan").val()=="-1"){h("#raven-testexec-report-filter-testplan-single-select").removeClass("aui-ss-has-entity-icon")}},clickFilterButton:function(){redrawAjsSelect(this.projectPicker);redrawAjsSelect(this.statusPicker)}});function a(){if(this.isEnterprise){const p=h("#raven-testexec-report-filter-project");p.parent(".filter-select").show();this.projectPicker=n(p)}this.testPlanPicker=g(h("#raven-testexec-report-filter-testplan"));this.fixVersionFieldPicker=this.isEnterprise?d(h("#raven-testexec-report-filter-fixversion")):e(h("#raven-testexec-report-filter-fixversion"));this.environmentPicker=createEnvironmentSingleSelectPicker(h("#raven-testexec-report-filter-environment"),[RAVEN.DEFAULT_ENVIRONMENTS.EMPTY]);this.statusPicker=o(h("#raven-testexec-report-filter-status"));this.resolutionPicker=e(h("#raven-testexec-report-filter-resolution"));this.assigneeFieldPicker=initAssigneeFilterPicker(h("#raven-testexec-report-filter-assignee"));c()}function c(p){var q="/rest/gadget/1.0/pickers/filters";h(".raven-default-filter-picker",p).each(function(){var t=h(this);if(t.data("aui-ss")){return}var r={showAvatar:true},u=t.data("inputValue");var s=new AJS.SingleSelect({element:t,submitInputVal:true,showDropdownButton:!!t.data("show-dropdown-button"),errorMessage:AJS.format("filters.picker.invalid.filter","'{0}'"),ajaxOptions:{url:contextPath+q,query:true,data:r,formatResponse:function(v){var w=[];if(v.filters){h.each(h(v.filters),function(x,y){w[x]=new AJS.ItemDescriptor({value:y.id,label:y.name})})}return w}},inputText:u});t.data("field-support-obj",s);s.setFieldWidth(500)})}function e(p){p.on("initialized",function(s,r){var q=h("body").data("version");if(!q||q.toString().charAt(0)==="5"){h("input",p.parent()).height("23px")}});return new AJS.SingleSelect({element:p,showDropdownButton:true,revertOnInvalid:true,})}function o(p){const q=AJS.contextPath()+"/rest/api/2/jql/autocompletedata/suggestions";return new AJS.MultiSelect({element:p,showDropdownButton:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:q,processData:true,data:{fieldName:"status",fieldValue:function(){const r=h("#raven-testexec-report-filter-status-textarea").val();return r||""}},formatResponse:function(r){var s=new AJS.GroupDescriptor({id:"raven-status-opt-group"});r.results.filter(function(t){return !!t&&!!t.value}).forEach(function(t){var v=t.value.replace(/^(")/,"").replace(/(")$/,"");var u=new AJS.ItemDescriptor({value:v,label:v,title:v,highlighted:true});s.addItem(u)});return[s]}}})}function d(p){const q=AJS.contextPath()+"/rest/api/2/jql/autocompletedata/suggestions";return new AJS.SingleSelect({element:p,showDropdownButton:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:q,processData:true,data:{fieldName:"fixVersion",fieldValue:function(){const r=h("#raven-testexec-report-filter-fixversion-field").val();return r||""}},formatResponse:function(r){var s=new AJS.GroupDescriptor({id:"raven-versions-opt-group"});r.results.filter(function(t){return !!t&&!!t.value}).forEach(function(t){var v=t.value.replace(/^(")/,"").replace(/(")$/,"");var u=new AJS.ItemDescriptor({value:v,label:v,title:v,highlighted:true});s.addItem(u)});return[s]}}})}function n(p){return new AJS.MultiSelect({element:p,showDropdownButton:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:contextPath+"/rest/api/2/project",formatResponse:function(r){var q=new AJS.GroupDescriptor({weight:0,id:"all-projects-opt-group",replace:true,label:"All Projects"});h(r).each(function(s,t){var u=new AJS.ItemDescriptor({value:t.key,label:t.key,icon:t.avatarUrls["16x16"],allowDuplicate:false,});q.addItem(u)});return[q]}}})}function g(p){return new AJS.SingleSelect({element:p,showDropdownButton:true,submitInputVal:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:contextPath+"/rest/raven/1.0/issue/picker?issueType=TESTPLAN",formatResponse:function(s){var t=s.sections[0];var u=new AJS.GroupDescriptor({weight:0,id:t.id+"-default-opt-group",replace:true});var q=new AJS.ItemDescriptor({value:"-1",label:"All",allowDuplicate:false});u.addItem(q);var r=new AJS.GroupDescriptor({weight:1,id:t.id+"-opt-group",replace:true,label:t.label+"("+t.sub+")"});h(t.issues).each(function(w,v){var x=new AJS.ItemDescriptor({value:v.key,label:v.key+" - "+v.summaryText,title:v.summary,icon:contextPath+v.img,allowDuplicate:false,});r.addItem(x)});return[u,r]}}})}function m(){var x=this.getCurrentValues();if(this.filterMode){this.removeFilterValue(j.SAVED_FILTER);x[j.FILTER_SCOPE]="filter";if(this.isEnterprise){var w=getMultiSelectValues(h("#raven-testexec-report-filter-project"));if(w){x[j.PROJECTS]=w}else{x[j.PROJECTS]=this.projectKey;this.removeFilterValue(j.PROJECTS)}}var q=getGenericSelectValue("#raven-testexec-report-filter-fixversion");if(q&&q!="-1"){x[j.FIX_VERSION]=q}else{this.removeFilterValue(j.FIX_VERSION)}var r=getGenericSelectValue("#raven-testexec-report-filter-testplan");if(r&&r!="-1"){x[j.TEST_PLAN]=r}else{this.removeFilterValue(j.TEST_PLAN)}var u=getGenericSelectValue("#raven-testexec-report-filter-environment");if(u&&u!="-1"){x[j.ENVIRONMENT]=u}else{this.removeFilterValue(j.ENVIRONMENT)}var y=getMultiSelectValues(h("#raven-testexec-report-filter-status"));if(!StringUtils.isBlank(y)){x[j.STATUS_ID]=y}else{this.removeFilterValue(j.STATUS_ID)}var t=getGenericSelectValue("#raven-testexec-report-filter-resolution");if(t&&t!="-1"){x[j.RESOLUTION]=t}else{this.removeFilterValue(j.RESOLUTION)}var v=getGenericSelectValue("#raven-testexec-report-filter-assignee");if(v&&v!="-1"){x[j.ASSIGNEE]=v}else{this.removeFilterValue(j.ASSIGNEE)}var s=getGenericElementValue("#raven-testexec-report-filter-contains");if(s&&s!=""){x[j.CONTAINS]=h("#raven-testexec-report-filter-contains").val()}else{this.removeFilterValue(j.CONTAINS)}}else{k.call(this);x[j.FILTER_SCOPE]="saved_filter";var p=getGenericSelectValue("#raven-testexec-filter-saved");if(p&&p!="-1"){x[j.SAVED_FILTER]=p}else{this.removeFilterValue(j.SAVED_FILTER)}}}function k(){this.removeFilterValue(j.FIX_VERSION);this.removeFilterValue(j.TEST_PLAN);this.removeFilterValue(j.ENVIRONMENT);this.removeFilterValue(j.STATUS_ID);this.removeFilterValue(j.RESOLUTION);this.removeFilterValue(j.ASSIGNEE);this.removeFilterValue(j.CONTAINS)}function i(){h(document).off(".raven.report.testexecution-filter")}function f(){var p=this;i();h.each(this.unscopedEvents,function(s,t){var r=s.substring(0,s.indexOf(" "));var q=s.substring(s.indexOf(" ")+1);h(document).on(r,q,h.proxy(p[t],p))})}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = 'js/report/report-testruns-view.js' */
require(["aui/inline-dialog2"]);(function(f){var b=require("raven-field-types");var e=false;var c=Backbone.Model.extend({testKey:null,testExecutionKey:null,testSummary:null,components:null,testPriority:null,testEnvironements:null,testPlanKey:null,testRunStatus:null,executedBy:null,fixVersions:null,testExecutionRevision:null,startDate:null,endDate:null,elapsedTime:null,openDefects:null,openDefectsLink:null,closedDefects:null,closedDefectsLinks:null,requiresExperimentalDialog2:null,start:null,total:null,pageSize:null});var d=Backbone.Collection.extend({model:c,url:function(){return contextPath+"/rest/raven/1.0/report/testrunsreport/testruns/"}});var a=null;f.ajax({type:"GET",async:false,url:contextPath+"/rest/api/2/myself",success:function(g){if(g&&(g.displayName||g.name)&&g.avatarUrls&&g.avatarUrls["16x16"]){a=g}}});RAVEN.Report.TestRunsReportView=Backbone.View.extend({el:"#report-wrapper",filterView:null,testRunsTableView:null,render:function(h){var j=this;var i=f("#selected-project-id").val();var m=false;var l=false;f.ajax({type:"GET",url:contextPath+"/rest/raven/1.0/report/testrunsreport/isShowTestRunColumns?projectId="+i,contentType:"application/json",success:function(n){m=n.showCustomFields;l=n.showIterationsProgress},error:function(){console.error("error while retrieving custom field checkbox configuration")},async:false});var k=RAVEN.Report.renderTestRunsReport({requiresExperimentalDialog2:h,contextPath:contextPath,isShowCustomField:m,showIterationsProgress:l});this.$el.empty();this.$el.html(k);j.filterView=new RAVEN.Report.Filters.TestRunsFilterView({currentUser:a});j.testRunsTableView=new RAVEN.Report.TestRunsTableView({filterView:j.filterView});var g=RAVEN.report.analytics.endpoints().TEST_RUNS;RAVEN.report.analytics.reportVisit(g)},destroy:function(){if(this.filterView){this.filterView.destroy();this.filterView=null}if(this.testRunsTableView){this.testRunsTableView.destroy();this.testRunsTableView=null}f("#show-tooltip").remove();f("#load-all-warning").remove();f("#show-outdated-report-tooltip").remove();this.$el.empty();this.undelegateEvents();f(".raven-jira-inlinedialog").remove()}});RAVEN.Report.TestRunsTableView=Backbone.View.extend({el:"#testruns-row-wrapper",filterView:null,projectId:null,start:0,total:0,pageSize:20,prevValues:null,filterMode:true,firstID:null,isFirstReport:true,unscopedEvents:{"click.raven.report.testruns #raven-testrun-report-filter-testplan-suggestions":"preventDefault","click.raven.report.testruns #raven-testruns-report-filter-testrunstatuses-suggestions":"preventDefault","click.raven.report.testruns #raven-testruns-report-filter-fixversion-suggestions":"preventDefault","click.raven.report.testruns #raven-testruns-report-filter-testpriorities-suggestions":"preventDefault","click.raven.report.testruns #raven-testruns-report-filter-testcomponents-suggestions":"preventDefault","click.raven.report.testruns #raven-testruns-report-filter-testenvironments-suggestions":"preventDefault","click.raven.report.testruns #raven-testruns-report-filter-project-suggestions":"preventDefault","click.raven.report.testruns #raven-testrun-report-filter-testrunassignee-suggestions":"preventDefault","click.raven.report.testruns #raven-testrun-report-filter-executedby-suggestions":"preventDefault","click.raven.report.testruns #raven-testruns-filter-saved-suggestions":"preventDefault","click.raven.report.testruns .item-delete":"preventDefault","submit.raven.report.testruns #raven-testruns-report-filters-form":"preventDefault","submit.raven.report.testruns #raven-testruns-savedfilter-form":"preventDefault","click.raven.report.testruns #dismiss-how-to-read-msg":"disableHowToRead","click.raven.report.testruns #enable-how-to-read-msg":"enableHowToRead","click.raven.report.testruns #load-more":"loadMore","click.raven.report.testruns #load-all-bt":"loadAll","click.raven.report.testruns #raven-load-testruns-requirement-converage-report":"firstGenerateReport","change.raven.report.testruns #raven-testrunreport-displaycf":"renderOnCheckboxChange","change.raven.report.testruns #raven-test-runs-display-iterations-progress":"renderOnCheckboxChange","click.raven.report.testruns #testrunsreport-dropdown-chart-options-label":"doCheckBoxClick","click.raven.report.testruns #testruns-report-iteration-progress-dropdown-option-label":"doCheckBoxIterationsProcessClick",},render:function(){if(this.isFirstReport){return}f("#report-wrapper").block();f(".raven-requirement-header").block();if(f(".lastRowSpin").length){f(".lastRowSpin").spin("medium");f("#load-more").css("color","#eee")}else{f("#report-wrapper").spin("large")}this.clearMessage();var g=this;var j=g.$el;this.projectId=f("#selected-project-id").val();var l=g.filterView.getCurrentValues();var k=f("#raven-testrunreport-displaycf:checkbox:checked").length>0;var i=f("#raven-test-runs-display-iterations-progress:checkbox:checked").length>0;var h=new d();l=f.param({start:g.start,pageSize:g.pageSize,projectId:g.projectId,showCustomFields:k,showIterationsProgress:i})+"&"+f.param(l);h.fetch({data:l,timeout:300000,success:function(n,m,r){g.checkShowHowToRead();f(".raven-dialog-iterations-status-count").remove();if(n.models&&n.models.length>0){g.total=n.models[0].attributes.total;g.pageSize=n.models[0].attributes.pageSize;if(g.prevValues){if(g.firstID!=n.models[0].attributes.firstID){f("#raven-outdated-report-icon").show("fast")}if(k){g.addRenderedCustomFieldValues(n)}if(i){g.addIterationsProgressInfo(n)}f.merge(g.prevValues,n.models);var s=RAVEN.Report.renderTestRunsRows({issues:n.models,currentUser:a?a.name:null,contextPath:contextPath,showCustomFields:k,showIterationsProgress:i});var o=f("tr:last").offset().top-80;f("#test-runs-report-table tbody").append(s);f("html, body").animate({scrollTop:o},1000)}else{f("#raven-outdated-report-icon").hide("fast");if(n.models[0].attributes.firstID){g.firstID=n.models[0].attributes.firstID}g.prevValues=n.models;if(k===true){g.addRenderedCustomFieldValues(n)}if(i){g.addIterationsProgressInfo(n)}var s=RAVEN.Report.renderTestRunsTable({issues:n.models,contextPath:contextPath,currentUser:a?a.name:null,requiresExperimentalDialog2:e,showCustomFields:k,showIterationsProgress:i});j.html(s)}g.setPaginationInfo(n.models.length);g.stopLoading();enableExportReportButton();const q=".raven-dialog-iterations-status-count";const t=f(q);t.each(function(){RAVEN.Component.InlineDialogCarousel.createInlineDialogCarousel("#"+this.id,"#"+this.id+"-inner-list","iteration-progress")})}else{if(j){j.empty();g.setPaginationInfo(-1);g.stopLoading()}AJS.messages.generic(f("#message-row-wrapper"),{body:"No records found",closeable:false});disableExportReportButton();fixReportWrapperHeight()}var u=l;if(g.total>10000){f("#raven-report-common-to-csv-link").attr("href","#");if(e===true){var p=g.getDeprecatedWarningDialog();document.getElementById("raven-report-common-to-csv-link").onclick=function(){p.show()}}else{document.getElementById("raven-report-common-to-csv-link").onclick=function(){AJS.dialog2("#report-testruns-longreport-warning").show()};AJS.$("#report-testruns-longreport-warning-button-ok").click(function(){AJS.dialog2("#report-testruns-longreport-warning").hide()})}}else{f("#raven-report-common-to-csv-link").attr("href",contextPath+"/plugins/servlet/raven/report/testruns/export?"+u);document.getElementById("raven-report-common-to-csv-link").onclick=null}JIRA.trigger(JIRA.Events.NEW_CONTENT_ADDED,[f("#test-runs-report-table"),JIRA.CONTENT_ADDED_REASON.panelRefreshed]);AJS.$(".time-tracking-running-tooltip").tooltip()},error:function(n,m){if(j){j.empty();g.setPaginationInfo(-1);g.stopLoading()}AJS.messages.error(f("#message-row-wrapper"),{title:"Error while retrieving TestRuns",body:m.responseText,closeable:false});disableExportReportButton()}})},addIterationsProgressInfo:function(g){g.models.forEach(function(i){const h=i.attributes.iterationsProgress;if(!h||h.count<=0){i.attributes.renderedIterationsProgress="-";return}const k=h.statuses.filter(function(m){return m.statusCount>0});const l=k.map(function(m){return m.statusCount}).reduce(function(n,m){return n+m},0);const j=i.attributes.testRunID;i.attributes.renderedIterationsProgress=RAVEN.ParametrizedTests.IterationProgressBar.renderIterationStatusInlineDialog({statuses:k,totalIterationsCount:l,testRunId:j})})},addRenderedCustomFieldValues:function(j){for(var h=0;h<j.models.length;h++){var g=j.models[h].attributes;g.reportCfValues=this.addRenderedCustomFieldValue(g)}},addRenderedCustomFieldValue:function(i){var m=[];for(var k=0;k<i.fieldValuesBean.fields.length;k++){var n=i.fieldValuesBean.fields[k];var l=b.fieldTypes[n.customField.type];var h=l.columnRenderer.call(null,n);if(this.includesText(h,"img")){h=this.convertImageToThumbnailLike(h)}if(!h||h.trim().length===0){h="<i>"+"None"+"</i>"}var g={name:n.customField.name,value:h,type:l.name,rank:n.customField.rank,hideField:false};this.checkForExpandableFields(l,g,h);m.push(g)}return m},convertImageToThumbnailLike:function(m){var j=document.createElement("div");j.innerHTML=m;j.className="raven-temp-div";f(j).find("img").css("max-width","200px");f(j).find("img").css("height","auto");var g=f(j).find(".image-wrap");for(var l=0;l<g.length;l++){if(f(g[l]).find("a").length===0){var k=f(g[l]).find("img");if(k.length>0){var n=f(k).attr("src");f(g[l]).append("<a href='"+n+"'></a>");f(g[l]).find("a").append(k)}}}f(j).find(".image-wrap a").attr("target","_blank");var h=j.innerHTML;f(".raven-temp-div").remove();return h},checkForExpandableFields:function(k,g,h){if(k===b.fieldTypes.MULTI_LINE_TEXT){var i=document.createElement("div");i.className="raven-temp-div";i.innerHTML=h;var j=i.textContent||i.innerText||"";g.hideField=this.includesText(j,"\n")||this.includesText(h,"<br>")||this.includesText(h,"<br/>");f(".raven-temp-div").remove()}},includesText:function(g,h){return g.indexOf(h)>=0},setPaginationInfo:function(g){var i="";if(g==-1){f("#load-more").css("display","none");f(".load-all-entries").css("display","none")}else{var h=this.start+g;if(h>=this.total||this.total==0){f("#load-more").css("display","none")}else{f("#load-more").css("display","block")}if(h>=this.total){h=this.total;f(".load-all-entries").css("display","none")}else{f(".load-all-entries").css("display","block")}i=AJS.format("Showing {0} of {1} entries",h,this.total)}f(".info-entries").empty();f(".info-entries").append(i)},stopLoading:function(){f("#report-wrapper").unblock();f(".raven-requirement-header").unblock();f("#report-wrapper").spinStop();f(".lastRowSpin").spinStop();f(".lastRowSpin").removeClass("lastRowSpin");f("#load-more").css("color","#999");f(".lastRowSpin").unblock()},destroy:function(){f("#show-tooltip").remove();f("#load-all-warning").remove();f("#show-outdated-report-tooltip").remove();document.getElementById("raven-report-common-to-csv-link").onclick=null;this.undelegateEvents();this._undelegateUnscopedEvents()},initialize:function(g){if(g){_.extend(this,_.pick(g,"filterView"))}this.projectId=f("#selected-project-id").val();this._delegateUnscopedEvents();disableExportReportButton();this.listenTo(this.filterView,"raven.dialog.apply:test-runs-filter",this.filtersSubmit)},checkShowHowToRead:function(){var g=this;f.ajax({type:"GET",url:contextPath+"/rest/raven/1.0/report/testrunsreport/isHowToRead",success:function(i,j,h){if(i){g.showHowToRead()}else{g.hideHowToRead()}},error:function(i,j,h){console.log(i)}})},setHowToReadServer:function(g){f.ajax({type:"POST",data:g,url:contextPath+"/rest/raven/1.0/report/testrunsreport/setHowToRead?value="+g,contentType:"application/json",error:function(i,j,h){console.log(i)}})},_delegateUnscopedEvents:function(){var g=this;f(document).off(".raven.report.testruns");f.each(this.unscopedEvents,function(j,k){var i=j.substring(0,j.indexOf(" "));var h=j.substring(j.indexOf(" ")+1);f(document).on(i,h,f.proxy(g[k],g))})},_undelegateUnscopedEvents:function(){f(document).off(".raven.report.testruns")},getDeprecatedWarningDialog:function(){var i="Unable to complete action";var g="<p>"+"The report contains too many Test Runs. \u003cbr\u003ePlease refine your filter criteria in order to reduce the amount of Test Runs to less than 10000."+"<p>";var h=new AJS.Dialog({width:400,height:230,id:"long-report-warning",closeOnOutsideClick:true});h.addHeader(i);h.addPanel("Panel 1",g,"panel-body");h.addButton("OK",function(j){j.hide()});return h},loadAll:function(){if(this.total>10000){if(e===true){var g=this.getDeprecatedWarningDialog();g.show()}else{AJS.dialog2("#report-testruns-longreport-warning").show()}}else{this.prevValues=null;this.pageSize=-1;this.render()}},loadMore:function(){this.start=this.start+20;if(this.total>this.pageSize){f("#load-more").addClass("lastRowSpin");this.render()}},filtersSubmit:function(){this.prevValues=null;this.start=0;this.pageSize=20;this.render()},firstGenerateReport:function(){f(".load-all-entries").show();f("#raven-first-report").hide();this.isFirstReport=false;this.render()},renderOnCheckboxChange:function(){if(!this.isFirstReport){this.filtersSubmit()}AJS.$("#raven-testruncustomfields-presentation").trigger("aui-button-invoke")},doCheckBoxClick:function(){f("#raven-testrunreport-displaycf").click()},doCheckBoxIterationsProcessClick:function(){f("#raven-test-runs-display-iterations-progress").click()},preventDefault:function(g){g.stopPropagation();g.preventDefault()},clearMessage:function(){f("#message-row-wrapper").empty()},disableHowToRead:function(){f(".header-filter").attr("data-initialized",false);this.hideHowToRead();this.setHowToReadServer("disabled")},enableHowToRead:function(){f(".header-filter").attr("data-initialized",false);this.showHowToRead();this.setHowToReadServer("enabled")},showHowToRead:function(){f(".raven-how-to-read-chart").show("fast");f("#raven-notifications-icon").hide("fast");f("#enable-how-to-read-msg").hide("fast")},hideHowToRead:function(){f(".raven-how-to-read-chart").hide("fast");f("#raven-notifications-icon").show("fast");f("#enable-how-to-read-msg").show("fast")},})})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = 'templates/common/parametrizedtests/iteration-progress-bar.soy' */
// This file was automatically generated from iteration-progress-bar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.ParametrizedTests.IterationProgressBar.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.ParametrizedTests == 'undefined') { RAVEN.ParametrizedTests = {}; }
if (typeof RAVEN.ParametrizedTests.IterationProgressBar == 'undefined') { RAVEN.ParametrizedTests.IterationProgressBar = {}; }


RAVEN.ParametrizedTests.IterationProgressBar.renderIterationsStatusBar = function(opt_data, opt_ignored) {
  var output = '<ul class="iterations-progress-bar">';
  var statusList4 = opt_data.statuses;
  var statusListLen4 = statusList4.length;
  for (var statusIndex4 = 0; statusIndex4 < statusListLen4; statusIndex4++) {
    var statusData4 = statusList4[statusIndex4];
    output += (statusData4 && statusData4.statusPercent > 0) ? '<li style="background-color:' + soy.$$escapeHtml(statusData4.color) + ';width:' + soy.$$escapeHtml(statusData4.statusPercent) + '%;" title="' + soy.$$escapeHtml(statusData4.name) + ': ' + soy.$$escapeHtml(statusData4.statusPercent) + '%" data-status-id="' + soy.$$escapeHtml(statusData4.id) + '">' + soy.$$escapeHtml(statusData4.name) + '</li>' : '';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.ParametrizedTests.IterationProgressBar.renderIterationsStatusBar.soyTemplateName = 'RAVEN.ParametrizedTests.IterationProgressBar.renderIterationsStatusBar';
}


RAVEN.ParametrizedTests.IterationProgressBar.renderIterationStatusInlineDialog = function(opt_data, opt_ignored) {
  var output = '<a data-aui-trigger aria-controls="raven-dialog-iterations-status-count-' + soy.$$escapeHtml(opt_data.testRunId) + '" href="#dialog-iterations-status-list-count-' + soy.$$escapeHtml(opt_data.testRunId) + '" class="raven-iterations-progress-bar-wrapper" >' + RAVEN.ParametrizedTests.IterationProgressBar.renderIterationsStatusBar(opt_data) + '</a><aui-inline-dialog id="raven-dialog-iterations-status-count-' + soy.$$escapeHtml(opt_data.testRunId) + '" class="raven-dialog-iterations-status-count" responds-to="hover" alignment="left top" ><ol id="raven-dialog-iterations-status-count-' + soy.$$escapeHtml(opt_data.testRunId) + '-inner-list">';
  var statusList35 = opt_data.statuses;
  var statusListLen35 = statusList35.length;
  for (var statusIndex35 = 0; statusIndex35 < statusListLen35; statusIndex35++) {
    var statusData35 = statusList35[statusIndex35];
    output += '<li class="iteration-status-wrapper" title="' + soy.$$escapeHtml(statusData35.name) + '"><span class="iteration-status-name">' + soy.$$escapeHtml(statusData35.name) + '</span><div class="iteration-status-count" style="background-color: ' + soy.$$escapeHtml(statusData35.color) + ';">' + soy.$$escapeHtml(statusData35.statusCount) + '</div></li>';
  }
  output += '</ol><hr><div class="iterations-total-status-count"><span><b>' + soy.$$escapeHtml('Total') + ':</b></span><span><b>' + soy.$$escapeHtml(opt_data.totalIterationsCount) + '</b></span></div></aui-inline-dialog>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.ParametrizedTests.IterationProgressBar.renderIterationStatusInlineDialog.soyTemplateName = 'RAVEN.ParametrizedTests.IterationProgressBar.renderIterationStatusInlineDialog';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = 'js/action/lcarousel.js' */
var RAVEN=window.RAVEN||{};RAVEN.Component=RAVEN.Component||{};RAVEN.Component.LCarousel=(function(b){var a=[];this.apply=function(d,h,o,m){var k=m!==undefined&&m===false;if(!a){a=[]}LCarouselName=d;LCarouselElement=h;LCarouselSize=o;b(".dots-holder#"+d).remove();var c=h.children();if(c.length>o){b(c).each(function(i,p){var q=Math.floor(i/o);b(p).attr("data-lcarousel",d+"-"+q);b(p).addClass("lcarousel-"+d);b(p).hide()});var f=Math.floor(c.length/o);if(c.length%o>0){f+=1}var e="<div class='dots-holder' id="+d+">";for(var g=0;g<f;g++){e+="<a href='#' class='dot' data-controls='"+d+"-"+g+"'></a>"}e+="</div>";h.append(e);b(".dots-holder#"+d+" .dot").on("click",function(q){q.preventDefault();var p=b(q.target);var i=p.attr("data-controls");b(".dots-holder#"+d+" .dot").removeClass("selected");p.addClass("selected");b(".lcarousel-"+d).hide();b(".lcarousel-"+d+"[data-lcarousel="+i+"]").show();if(!k){a[d]=i}h.trigger("carouselSwipe")});var l=a[d];if(l&&!k){var j=l.split(d+"-")[1];while(j>=0){var n=b(".dots-holder#"+d+" .dot[data-controls='"+d+"-"+j+"']");if(n.length>0){n.click();break}j--}}else{b(".dots-holder#"+d+" .dot[data-controls='"+d+"-0']").click()}}else{b(c).each(function(i,p){b(p).show()})}};this.jumpToLastPage=function(d,f){const e=f.find(".dots-holder");if(e.length<=0){return}const c=e.children().length;if(c>1){b(".dots-holder#"+d+" .dot[data-controls='"+d+"-"+(c-1)+"']").click()}};return this})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = 'js/action/inline-dialog-carousel.js' */
var RAVEN=window.RAVEN||{};RAVEN.Component=RAVEN.Component||{};RAVEN.Component.InlineDialogCarousel=(function(c){this.LCAROUSELSIZE=6;var a={};var b={};function d(i,e,f){var m=this;m.bindLCarousel=function(){var n=g();var o=h();if(n&&o&&o.children("li").length>LCAROUSELSIZE){o.on("carouselSwipe",function(p){l(o,f)});k(o)}};m.unbindLCarousel=function(){var n=g();if(n){m.unbindLCarouselSwipeEvent();n.removeEventListener("aui-layer-show",m.bindLCarousel);n.removeEventListener("aui-layer-hide",m.unbindLCarouselSwipeEvent)}};m.unbindLCarouselSwipeEvent=function(){var n=h();if(n){n.unbind("carouselSwipe")}};var g=function(){return document.querySelector(i)};var h=function(){return c(i).find(e)};var k=function(p){p.find(".inline-dots-holder").remove();RAVEN.Component.LCarousel.apply(f,p,LCAROUSELSIZE,false);var o=p.find(".dots-holder");var n=c("<li class='inline-dots-holder' style='display:inline-block'></li>");n.appendTo(p).append(o);p.css({height:"auto"});p.closest(".aui-inline-dialog-contents").css({position:"relative"});n.css({position:"absolute",bottom:"0px",left:"0px",right:"0px"});o.css({position:"relative","padding-bottom":"0px"})};var l=function(){var q=h();if(!q){return}var n=q.height();var o=q.children("li:visible:not(.inline-dots-holder)").length;var p=q.children("li:visible:not(.inline-dots-holder)").first().outerHeight(true);if(o===0&&!a[f]){return}if(o===0&&a[f]){q.height(a[f]);return}if(b[f]&&n>=b[f]){return}a[f]=(LCAROUSELSIZE*p)+n-(o*p);b[f]=a[f];q.height(a[f])};var j=g();j.addEventListener("aui-layer-show",m.bindLCarousel);j.addEventListener("aui-layer-hide",m.unbindLCarouselSwipeEvent);return m}this.createInlineDialogCarousel=function(e,f,h){var g=document.querySelector(e);if(e){var i=c(g).find(f);if(i&&i.children("li").length>LCAROUSELSIZE){g.RavenLCarousel=new d(e,f,h)}}};this.removeInlineDialogCarousel=function(e){var f=document.querySelector(e);if(f&&f.RavenLCarousel){f.RavenLCarousel.unbindLCarousel();delete f.RavenLCarousel}};return this})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/js/report/filters/report-testrun-filter.js' */
(function(i){RAVEN.namespace("RAVEN.Report.Filters");var n=Backbone.Model.extend({urlRoot:function(){return contextPath+"/rest/raven/1.0/report/testrunsreport/filtervalues"}});var b=Backbone.Model.extend({urlRoot:function(){return contextPath+"/rest/raven/1.0/report/testrunsreport/filtervalues/fromQueryParam"}});var k={FILTER_SCOPE:"filterScope",SAVED_FILTER:"savedFilter",TEST_PLAN:"testPlan",FIX_VERSION:"fixVersion",REVISION:"revision",TEST_CONTAINS:"testContains",TEST_EXEC_CONTAINS:"testExecutionContains",TEST_RUN_ASSIGNEE:"testRunAssignee",EXECUTED_BY:"executedBy",TEST_RUN_STATUS:"testRunStatus",TEST_PRIORITY:"testPriority",TEST_COMPONENT:"testComponent",ENVIRONMENT:"testEnvironment",PROJECTS:"projects",};const o="current_user";RAVEN.Report.Filters.TestRunsFilterView=RAVEN.Component.ReportFilter.extend({el:"#testruns-filter-content-place-holder",currentUser:null,unscopedEvents:{"click.raven.report.testruns-filter #raven-testruns-dialog-apply":"applyTestRunsFilter","click.raven.report.testruns-filter #raven-testruns-filter-dialog .filter-title":"clickTitleNotSelected","click.raven.report.testruns-filter #raven-testruns-dialog-cancel":"closeDialog","click.raven.report.testruns-filter #raven-testruns-dialog-clear":"resetFilter","change.raven.report.testruns-filter #raven-testrun-report-filter-testrunassignee":"removeTestRunAssigneeIcon","change.raven.report.testruns-filter #raven-testrun-report-filter-executedby":"removeExecutedByIcon","change.raven.report.testruns-filter #raven-testrun-report-filter-testplan":"clearTestPlanIconOnChange","click.raven.report.testruns-filter #testruns-report-coverage-form":"clickFilterButton"},SAVED_FILTER_MODE:2,dialog:null,projectKey:null,isEnterprise:false,queryParamsDef:k,filterMode:true,userPrefsBasedFilterValuesResource:function(){return new n()},queryParamsBasedFilterValuesResource:function(){return new b()},applyTestRunsFilter:function(){if(i(".filter-title.selected").data("mode")===this.SAVED_FILTER_MODE){this.filterMode=false}else{this.filterMode=true}f.call(this);RAVEN.Component.ReportFilter.prototype.closeDialogAndSyncURLQueryParams.call(this,"#raven-testruns-filter-inline-dialog");this.trigger("raven.dialog.apply:test-runs-filter")},clickTitleNotSelected:function(r){this.toggleFilters(r.currentTarget)},closeDialog:function(){closeDialogGeneric("#raven-testruns-filter-inline-dialog")},buildFilterComponent:function(s){var u=parseStatusesToObject(s.attributes.testRunStatusPref);var t=(RAVEN.Report.URLBar.Proxy.get()["currentQueryParamObj"]["reportFilter"].executedBy===o)||((s.attributes.executedByPref)?s.attributes.executedByPref.isCurrentUser:false);var r=RAVEN.Report.URLBar.Proxy.get()["currentQueryParamObj"]["reportFilter"].testRunAssignee===o||((s.attributes.testRunAssigneePref)?s.attributes.testRunAssigneePref.isCurrentUser:false);this.dialog=RAVEN.Report.renderTestRunReportFilter({projects:s.attributes.projects,filterscopepref:s.attributes.filterScopePref,savedfilterpref:s.attributes.savedFilter,testplanpref:s.attributes.testPlanPref,fixversionpref:s.attributes.fixVersionPref,revisionpref:s.attributes.revisionPref,testContainsPref:s.attributes.testContainsPref,testExecutionContainsPref:s.attributes.testExecutionContainsPref,selectedStatuses:u,testprioritypref:s.attributes.testPriorityPref,testcomponentpref:s.attributes.testComponentPref,testenvironmentpref:s.attributes.testEnvironmentPref,testrunassigneepref:s.attributes.testRunAssigneePref,testrunstatuses:s.attributes.testRunStatuses,testpriorities:s.attributes.testPriorities,testcomponents:s.attributes.testComponents,requiresExperimentalDialog2:s.attributes.requiresExperimentalDialog2,executedbypref:s.attributes.executedByPref,testPlanIssueIcon:s.attributes.testPlanIssueIcon,fixversions:s.attributes.fixVersions||[],contextPath:contextPath,isTestRunAssigneeCurrentUser:r,isExecutedByCurrentUser:t,currentUserValue:o,});this.$el.empty();this.$el.html(this.dialog);a.call(this);if(s.attributes.filterScopePref!="filter"){this.filterMode=false;this.toggleFilters((i(".filter-title[data-mode=2]")))}else{this.filterMode=true}},initialize:function(r){this.projectId=i("#selected-project-id").val();this.projectKey=i("#selected-report-key").val();this.isEnterprise=i("#isXrayEnterprise").val()==="true";this.currentUser=r.currentUser;this.render();g.call(this)},toggleFilters:function(r){i(".filter-title.selected").removeClass("selected");i(r).addClass("selected");if(i(r).data("mode")==1){this.filterMode=true;i("#raven-testruns-report-filters-form").show();i("#raven-testruns-savedfilter-form").hide()}else{this.filterMode=false;i("#raven-testruns-report-filters-form").hide();i("#raven-testruns-savedfilter-form").show()}},saveCurrentFilterValues:function(){f.call(this)},renderFilterSummary:function(){var F=this.getCurrentValues();var x="";var s=F[k.SAVED_FILTER];if(s&&s!="-1"){x="<b>"+"Saved Filter"+"</b>  "+AJS.escapeHTML(i('#raven-testruns-filter-inline-dialog #raven-testruns-filter-saved option[value="'+s+'"]').text())}else{if(this.isEnterprise){var B=F[k.PROJECTS];if(B){if(x){x+="; "}x+="<b>"+"Project"+"</b>  "+AJS.escapeHTML(B)}}var E=F[k.FIX_VERSION];if(E&&E!="-1"){if(x){x+="; "}x+="<b>"+"Fix Version"+"</b>  "+AJS.escapeHTML(E)}var z=F[k.REVISION];if(z){if(x){x+="; "}x+="<b>"+"Revision"+"</b>  "+AJS.escapeHTML(z)}var y=F[k.ENVIRONMENT];if(y&&y!="-1"){if(x){x+="; "}x+="<b>"+"Test Environments"+"</b>  "+AJS.escapeHTML(y)}var v=F[k.TEST_PLAN];if(v&&v!="-1"){if(x){x+="; "}x+="<b>"+"Test Plan"+"</b>  "+AJS.escapeHTML(v)}var u=F[k.TEST_PRIORITY];if(u&&u!="-1"){if(x){x+="; "}x+="<b>"+"Test Priority"+"</b>  "+AJS.escapeHTML(F.testPriority)}var t=F[k.TEST_COMPONENT];if(t&&t!="-1"){if(x){x+="; "}x+="<b>"+"Test Components"+"</b>  "+AJS.escapeHTML(t)}var w=F[k.TEST_RUN_ASSIGNEE];if(w&&w!="-1"){if(x){x+="; "}if(w.length===1&&w[0]===o){x+="<b>"+"TestRun Assignee"+"</b>  "+"Current User"+" ("+AJS.escapeHTML(this.currentUser.displayName||this.currentUser.name)+")"}else{x+="<b>"+"TestRun Assignee"+"</b>  "+AJS.escapeHTML(F.testRunAssignee.toString())}}var r=F[k.EXECUTED_BY];if(r&&r!="-1"){if(x){x+="; "}if(r===o){x+="<b>"+"Executed By"+"</b>  "+"Current User"+" ("+AJS.escapeHTML(this.currentUser.displayName||this.currentUser.name)+")"}else{x+="<b>"+"Executed By"+"</b>  "+AJS.escapeHTML(F.executedBy)}}var D=F[k.TEST_RUN_STATUS];if(D){if(x){x+="; "}x+="<b>"+"TestRun Status"+"</b>  "+AJS.escapeHTML(F.testRunStatus)}var C=F[k.TEST_CONTAINS];if(C){if(x){x+="; "}x+="<b>"+"Contains"+"</b>  "+AJS.escapeHTML(F.testContains)}var A=F[k.TEST_EXEC_CONTAINS];if(A){if(x){x+="; "}x+="<b>"+"Contains"+"</b>  "+AJS.escapeHTML(F.testExecutionContains)}}if(x){i("#raven-testruns-report-filter-trigger").html(x)}else{i("#raven-testruns-report-filter-trigger").html("Filter(s)")}},resetFilter:function(){if(this.projectPicker){this.projectPicker.clearLozenges()}if(this.testPlanPicker){this.testPlanPicker._setDescriptorWithValue("-1");i("#raven-testrun-report-filter-testplan-single-select").removeClass("aui-ss-has-entity-icon")}if(this.testRunStatusPicker){this.testRunStatusPicker.clearLozenges()}if(this.fixVersionPicker){this.fixVersionPicker._setDescriptorWithValue("-1")}if(this.testPriorityPicker){this.testPriorityPicker._setDescriptorWithValue("-1")}if(this.testComponentsPicker){this.testComponentsPicker._setDescriptorWithValue("-1")}if(this.testEnvironmentsPicker){this.testEnvironmentsPicker._setDescriptorWithValue("-1")}if(this.testRunAssigneeFieldPicker){this.testRunAssigneeFieldPicker.clear();this.testRunAssigneeFieldPicker._setDescriptorWithValue("-1")}if(this.executedByFieldPicker){this.executedByFieldPicker.clear();this.executedByFieldPicker._setDescriptorWithValue("-1")}i("#raven-testrun-report-filter-test-contains").val("");i("#raven-testrun-report-filter-testexecution-contains").val("");i("#raven-testrun-report-filter-revision").val("");var r=i("#raven-testruns-filter-saved").data("field-support-obj");if(r){r.clear()}},removeTestRunAssigneeIcon:function(){if(!this.testRunAssigneeFieldPicker._hasIcon()){if(this.testRunAssigneeFieldPicker.$entityIcon!==undefined){this.testRunAssigneeFieldPicker.$entityIcon.remove()}this.testRunAssigneeFieldPicker.$container.removeClass("aui-ss-has-entity-icon")}},removeExecutedByIcon:function(){if(!this.executedByFieldPicker._hasIcon()){if(this.executedByFieldPicker.$entityIcon!==undefined){this.executedByFieldPicker.$entityIcon.remove()}this.executedByFieldPicker.$container.removeClass("aui-ss-has-entity-icon")}},clearTestPlanIconOnChange:function(){if(i("#raven-testrun-report-filter-testplan").val()=="-1"){i("#raven-testrun-report-filter-testplan-single-select").removeClass("aui-ss-has-entity-icon")}},clickFilterButton:function(){redrawAjsSelect(this.projectPicker);redrawAjsSelect(this.testRunStatusPicker)},destroy:function(){this.undelegateEvents();j.call(this);if(this.dialog){i("#raven-testruns-filter-inline-dialog").remove()}this.remove();RAVEN.Component.ReportFilter.prototype.destroy.call(this)}});function a(){if(this.isEnterprise){const r=i("#raven-testruns-report-filter-project");r.parent(".filter-select").show();this.projectPicker=p(r)}this.testPlanPicker=h(i("#raven-testrun-report-filter-testplan"));this.testRunStatusPicker=q(i("#raven-testruns-report-filter-testrunstatuses"));this.fixVersionPicker=this.isEnterprise?d(i("#raven-testruns-report-filter-fixversion")):e(i("#raven-testruns-report-filter-fixversion"));this.testPriorityPicker=e(i("#raven-testruns-report-filter-testpriorities"));this.testComponentsPicker=e(i("#raven-testruns-report-filter-testcomponents"));this.testEnvironmentsPicker=createEnvironmentSingleSelectPicker(i("#raven-testruns-report-filter-testenvironments"),[RAVEN.DEFAULT_ENVIRONMENTS.EMPTY]);this.testRunAssigneeFieldPicker=m(i("#raven-testrun-report-filter-testrunassignee"),this.currentUser);this.executedByFieldPicker=m(i("#raven-testrun-report-filter-executedby"),this.currentUser);c()}function d(r){const s=AJS.contextPath()+"/rest/api/2/jql/autocompletedata/suggestions";return new AJS.SingleSelect({element:r,showDropdownButton:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:s,processData:true,data:{fieldName:"fixVersion",fieldValue:function(){const t=i("#raven-testruns-report-filter-fixversion-field").val();return t||""}},formatResponse:function(t){var u=new AJS.GroupDescriptor({id:"raven-versions-opt-group"});t.results.filter(function(v){return !!v&&!!v.value}).forEach(function(v){var x=v.value.replace(/^(")/,"").replace(/(")$/,"");var w=new AJS.ItemDescriptor({value:x,label:x,title:x,highlighted:true});u.addItem(w)});return[u]}}})}function p(r){return new AJS.MultiSelect({element:r,showDropdownButton:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:contextPath+"/rest/api/2/project",formatResponse:function(t){var s=new AJS.GroupDescriptor({weight:0,id:"all-projects-opt-group",replace:true,label:"All Projects"});i(t).each(function(u,v){var w=new AJS.ItemDescriptor({value:v.key,label:v.key,icon:v.avatarUrls["16x16"],allowDuplicate:false,});s.addItem(w)});return[s]}}})}function h(r){return new AJS.SingleSelect({element:r,showDropdownButton:true,submitInputVal:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:contextPath+"/rest/raven/1.0/issue/picker?issueType=TESTPLAN",formatResponse:function(u){var v=u.sections[0];var w=new AJS.GroupDescriptor({weight:0,id:v.id+"-default-opt-group",replace:true});var s=new AJS.ItemDescriptor({value:"-1",label:"All",allowDuplicate:false});w.addItem(s);var t=new AJS.GroupDescriptor({weight:1,id:v.id+"-opt-group",replace:true,label:v.label+"("+v.sub+")"});i(v.issues).each(function(y,x){var z=new AJS.ItemDescriptor({value:x.key,label:x.key+" - "+x.summaryText,title:x.summary,fallbackIcon:"none",icon:contextPath+x.img,allowDuplicate:false});t.addItem(z)});return[w,t]}}})}function q(r){return new AJS.MultiSelect({element:r,showDropdownButton:true,revertOnInvalid:true,})}function e(r){r.on("initialized",function(u,t){var s=i("body").data("version");if(!s||s.toString().charAt(0)==="5"){i("input",r.parent()).height("23px")}});return new AJS.SingleSelect({element:r,showDropdownButton:true,revertOnInvalid:true,})}function m(v,r){var s=v;if(s.data("aui-ss")){return}var t="/rest/api/1.0/users/picker";var u={showAvatar:true},w=s.data("inputValue");return new AJS.SingleSelect({element:s,submitInputVal:true,revertOnInvalid:true,showDropdownButton:!!s.data("show-dropdown-button"),errorMessage:AJS.format("There is no user \'\'{0}\'\'.","'{0}'"),ajaxOptions:{url:contextPath+t,query:true,data:u,formatResponse:function(z){var y=[];var x=new AJS.GroupDescriptor({weight:0});x.addItem(new AJS.ItemDescriptor({value:o,icon:r.avatarUrls["16x16"],label:"Current User"+" ("+(r.displayName||r.name)+")"}));x.addItem(new AJS.ItemDescriptor({value:"-1",label:"All"}));y.push(x);jQuery(z).each(function(B,A){var C=new AJS.GroupDescriptor({weight:1,label:A.footer});jQuery(A.users).each(function(){C.addItem(new AJS.ItemDescriptor({value:this.name,label:this.displayName,html:this.html,icon:this.avatarUrl,allowDuplicate:false,highlighted:true}))});y.push(C)});return y}},inputText:w})}function c(r){var s="/rest/gadget/1.0/pickers/filters";i(".raven-default-filter-picker",r).each(function(){var v=i(this);if(v.data("aui-ss")){return}var t={showAvatar:true},w=v.data("inputValue");var u=new AJS.SingleSelect({element:v,submitInputVal:true,showDropdownButton:!!v.data("show-dropdown-button"),errorMessage:AJS.format("filters.picker.invalid.filter","'{0}'"),ajaxOptions:{url:contextPath+s,query:true,data:t,formatResponse:function(x){var y=[];if(x.filters){i.each(i(x.filters),function(z,A){y[z]=new AJS.ItemDescriptor({value:A.id,label:A.name})})}return y}},inputText:w});v.data("field-support-obj",u);u.setFieldWidth(500)})}function l(){this.removeFilterValue(k.FIX_VERSION);this.removeFilterValue(k.TEST_RUN_STATUS);this.removeFilterValue(k.TEST_PRIORITY);this.removeFilterValue(k.TEST_COMPONENT);this.removeFilterValue(k.ENVIRONMENT);this.removeFilterValue(k.TEST_PLAN);this.removeFilterValue(k.TEST_RUN_ASSIGNEE);this.removeFilterValue(k.TEST_CONTAINS);this.removeFilterValue(k.TEST_EXEC_CONTAINS);this.removeFilterValue(k.REVISION);this.removeFilterValue(k.EXECUTED_BY)}function f(){var E=this.getCurrentValues();if(this.filterMode){this.removeFilterValue(k.SAVED_FILTER);E[k.FILTER_SCOPE]="filter";if(this.isEnterprise){var B=getMultiSelectValues(i("#raven-testruns-report-filter-project"));if(B){E[k.PROJECTS]=B}else{E[k.PROJECTS]=this.projectKey;this.removeFilterValue(k.PROJECTS)}}var v=getGenericSelectValue("#raven-testruns-report-filter-fixversion");if(v&&v!="-1"){E[k.FIX_VERSION]=v}else{this.removeFilterValue(k.FIX_VERSION)}var D=getGenericElementValue("#raven-testruns-report-filter-testrunstatuses");if(D!=null){E[k.TEST_RUN_STATUS]=D.toString()}else{this.removeFilterValue(k.TEST_RUN_STATUS)}var t=getGenericSelectValue("#raven-testruns-report-filter-testpriorities");if(t&&t!="-1"){E[k.TEST_PRIORITY]=t}else{this.removeFilterValue(k.TEST_PRIORITY)}var u=getGenericSelectValue("#raven-testruns-report-filter-testcomponents");if(u&&u!="-1"){E[k.TEST_COMPONENT]=u}else{this.removeFilterValue(k.TEST_COMPONENT)}var y=getGenericSelectValue("#raven-testruns-report-filter-testenvironments");if(y&&y!="-1"){E[k.ENVIRONMENT]=y}else{this.removeFilterValue(k.ENVIRONMENT)}var w=getGenericSelectValue("#raven-testrun-report-filter-testplan");if(w&&w!="-1"){E[k.TEST_PLAN]=w}else{this.removeFilterValue(k.TEST_PLAN)}var x=getGenericSelectValue("#raven-testrun-report-filter-testrunassignee");if(x&&x!="-1"){E[k.TEST_RUN_ASSIGNEE]=i("#raven-testrun-report-filter-testrunassignee").val()}else{this.removeFilterValue(k.TEST_RUN_ASSIGNEE)}var C=getGenericElementValue("#raven-testrun-report-filter-test-contains");if(C&&C!=""){E[k.TEST_CONTAINS]=C}else{this.removeFilterValue(k.TEST_CONTAINS)}var z=getGenericElementValue("#raven-testrun-report-filter-testexecution-contains");if(z&&z!=""){E[k.TEST_EXEC_CONTAINS]=z}else{this.removeFilterValue(k.TEST_EXEC_CONTAINS)}var A=getGenericElementValue("#raven-testrun-report-filter-revision");if(A&&A!=""){E[k.REVISION]=A}else{this.removeFilterValue(k.REVISION)}var r=getGenericSelectValue("#raven-testrun-report-filter-executedby");if(r!="-1"){E[k.EXECUTED_BY]=r}else{this.removeFilterValue(k.EXECUTED_BY)}}else{l.call(this);E[k.FILTER_SCOPE]="saved_filter";var s=getGenericSelectValue("#raven-testruns-filter-saved");if(s&&s!="-1"){E[k.SAVED_FILTER]=s}else{this.removeFilterValue(k.SAVED_FILTER)}}}function g(){var r=this;j();i.each(this.unscopedEvents,function(u,v){var t=u.substring(0,u.indexOf(" "));var s=u.substring(u.indexOf(" ")+1);i(document).on(t,s,i.proxy(r[v],r))})}function j(){i(document).off(".raven.report.testruns-filter")}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/templates/reports/overall-requirement-coverage-chart-report/overall-requirement-coverage-chart.soy' */
// This file was automatically generated from overall-requirement-coverage-chart.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Report.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Report == 'undefined') { RAVEN.Report = {}; }


RAVEN.Report.renderOverallRequirementCoverageReport = function(opt_data, opt_ignored) {
  return RAVEN.Report.renderHowToRead({howToRead: 'Shows the calculated requirement coverage status for a list of requirements, in a normalised horizontal stacked bar chart, for the selected version, or Test Plan, and/or Test Environment.\x3c/br\x3e\x3c/br\x3eThis helps you analyze the current status of your release, or even other releases from the past, by taking into account the respective test results of related Test Executions.', link: 'https://docs.getxray.app/display/XRAY/Overall+Requirement+Coverage+Report', requiresExperimentalDialog2: opt_data.requiresExperimentalDialog2}) + '<div class="header-filter" data-initialized="false" style="width:100%; margin-top:20px; padding-bottom:6px;"><div id="arg-validation-messages"></div><div id="overall-requirement-coverage-filter-content-place-holder" style="float:left; max-width:90%;"></div><div class="raven-report-presentation-button-wrapper"><button id="raven-requirement-presentation" aria-owns="dropdown-chart-options" aria-haspopup="true" class="aui-button aui-dropdown2-trigger" style="float:right; margin-right:8px; margin-top:-3px;"><span class="aui-icon aui-icon-small aui-iconfont-configure">' + soy.$$escapeHtml('Configure') + '</span></button></div></div><div style="clear: both"></div><div id="raven-overall-requirement-coverage-content" style="min-width:600px;">' + RAVEN.Report.renderGenerateReport({imgUrl: 'xray-overall-test-coverage-report-back.png', buttonID: 'raven-load-overall-requirement-converage-report', contextPath: opt_data.contextPath}) + '<div id="message-row-wrapper" style="height:90%;"></div><div id="requirement-coverage-wrapper" style="height:100%;"></div></div>';
};
if (goog.DEBUG) {
  RAVEN.Report.renderOverallRequirementCoverageReport.soyTemplateName = 'RAVEN.Report.renderOverallRequirementCoverageReport';
}


RAVEN.Report.renderOverallRequirementCoverageChart = function(opt_data, opt_ignored) {
  return '<div id="requirement-coverage-charts"><div id="overall-coverage-chart-section"><div id="overall-coverage-chart" class="overallCoverageChart"></div><div id="overall-coverage-chart-details" style="display:none;"><div id="overall-coverage-chart-details-title"></div><table id="requirements-datatable" class="aui data-table">' + RAVEN.Report.renderColGroup(null) + '<thead><tr><th id="column-requirement-key">' + soy.$$escapeHtml('Key') + '</th><th id="column-requirement-summary">' + soy.$$escapeHtml('Summary') + '</th><th id="column-requirement-total">' + soy.$$escapeHtml('Total Tests') + '</th><th id="column-requirement-ok">' + soy.$$escapeHtml('Tests Passed') + '</th><th id="column-requirement-nok">' + soy.$$escapeHtml('Tests Failed') + '</th><th id="column-requirement-notrun">' + soy.$$escapeHtml('Tests Unknown') + '</th><th id="column-requirement-completeness">' + soy.$$escapeHtml('Completeness') + '</th></tr></thead><tbody></tbody></table></div></div></div>';
};
if (goog.DEBUG) {
  RAVEN.Report.renderOverallRequirementCoverageChart.soyTemplateName = 'RAVEN.Report.renderOverallRequirementCoverageChart';
}


RAVEN.Report.renderOverallSubRequirementTable = function(opt_data, opt_ignored) {
  return '<tr data-parent-row-id="' + soy.$$escapeHtml(opt_data.rowId) + '"><td colspan="7" style="border-bottom: none; padding: 0"><table class="aui data-table sub-req-table">' + RAVEN.Report.renderColGroup(null) + '<tbody></tbody></table></td></tr>';
};
if (goog.DEBUG) {
  RAVEN.Report.renderOverallSubRequirementTable.soyTemplateName = 'RAVEN.Report.renderOverallSubRequirementTable';
}


RAVEN.Report.renderColGroup = function(opt_data, opt_ignored) {
  return '<colgroup><col span="1" style="width: 160px;"><col span="1"><col span="1" style="width: 80px;"><col span="1" style="width: 80px"><col span="1" style="width: 80px;"><col span="1" style="width: 100px;"><col span="1" style="width: 130px;"></colgroup>';
};
if (goog.DEBUG) {
  RAVEN.Report.renderColGroup.soyTemplateName = 'RAVEN.Report.renderColGroup';
}


RAVEN.Report.renderOverallSubRequirementRow = function(opt_data, opt_ignored) {
  return '<tr data-issue-id="' + soy.$$escapeHtml(opt_data.requirement.issueId) + '" data-level="' + soy.$$escapeHtml(opt_data.level) + '" data-row-id="' + soy.$$escapeHtml(opt_data.rowId) + '"><td style="padding-left:' + soy.$$escapeHtml(opt_data.level) + '0px;" title="' + soy.$$escapeHtml(opt_data.requirement.key) + '">' + RAVEN.Report.renderKeyColumnOverallReport({contextPath: opt_data.contextPath, reqKey: opt_data.requirement.key, hasSubRequirements: opt_data.requirement.subRequirements.length > 0}) + '</td><td><a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/browse/' + soy.$$escapeHtml(opt_data.requirement.key) + '" class="link-title">' + soy.$$escapeHtml(opt_data.requirement.summary) + '</a></td><td>' + RAVEN.Report.renderTestJQLLinkColumnOverallReport({numberOfTests: opt_data.requirement.total, link: opt_data.totalJQLLink}) + '</td><td>' + RAVEN.Report.renderTestJQLLinkColumnOverallReport({numberOfTests: opt_data.requirement.ok, link: opt_data.okJQLLink}) + '</td><td>' + RAVEN.Report.renderTestJQLLinkColumnOverallReport({numberOfTests: opt_data.requirement.nok, link: opt_data.nokJQLLink}) + '</td><td>' + RAVEN.Report.renderTestJQLLinkColumnOverallReport({numberOfTests: opt_data.requirement.notRun, link: opt_data.notRunJQLLink}) + '</td><td>' + RAVEN.Report.renderOverallCompletenessBar({completeness: opt_data.requirement.completeness}) + '</td></tr>';
};
if (goog.DEBUG) {
  RAVEN.Report.renderOverallSubRequirementRow.soyTemplateName = 'RAVEN.Report.renderOverallSubRequirementRow';
}


RAVEN.Report.renderOverallCompletenessBar = function(opt_data, opt_ignored) {
  return '<ul class="completeness-bar" title="' + soy.$$escapeHtml(opt_data.completeness) + '%"><li style="width:' + soy.$$escapeHtml(opt_data.completeness) + '%;"><span>' + soy.$$escapeHtml(opt_data.completeness) + '%</span></li><li></li></ul>';
};
if (goog.DEBUG) {
  RAVEN.Report.renderOverallCompletenessBar.soyTemplateName = 'RAVEN.Report.renderOverallCompletenessBar';
}


RAVEN.Report.renderKeyColumnOverallReport = function(opt_data, opt_ignored) {
  return '' + ((opt_data.hasSubRequirements) ? '<span class="toggle-sub-requirements aui-icon aui-icon-small aui-iconfont-chevron-right disabled"></span><a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/browse/' + soy.$$escapeHtml(opt_data.reqKey) + '" style="padding-left:5px;" class="link-title">' + soy.$$escapeHtml(opt_data.reqKey) + '</a>' : '<a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/browse/' + soy.$$escapeHtml(opt_data.reqKey) + '" style="padding-left:20px;" class="link-title">' + soy.$$escapeHtml(opt_data.reqKey) + '</a>');
};
if (goog.DEBUG) {
  RAVEN.Report.renderKeyColumnOverallReport.soyTemplateName = 'RAVEN.Report.renderKeyColumnOverallReport';
}


RAVEN.Report.renderTestJQLLinkColumnOverallReport = function(opt_data, opt_ignored) {
  return '' + ((opt_data.link) ? '<a class="tests-value-link" href="' + soy.$$escapeHtml(opt_data.link) + '">' + soy.$$escapeHtml(opt_data.numberOfTests) + '</a>' : '<span class="tests-value">' + soy.$$escapeHtml(opt_data.numberOfTests) + '</span>');
};
if (goog.DEBUG) {
  RAVEN.Report.renderTestJQLLinkColumnOverallReport.soyTemplateName = 'RAVEN.Report.renderTestJQLLinkColumnOverallReport';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/templates/reports/overall-requirement-coverage-chart-report/filter-header.soy' */
// This file was automatically generated from filter-header.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Report.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Report == 'undefined') { RAVEN.Report = {}; }


RAVEN.Report.renderOverallRequirementCoverageChartReportFilters = function(opt_data, opt_ignored) {
  var output = '<form action="#" id="raven-requirement-coverage-form" style="margin: 6px;"><a id="raven-scope-trigger" href="#" aria-controls="raven-scope-inline-dialog" data-aui-trigger class="aui-button aui-style-default raven-dropdown2-arrow aui-button-subtle">' + soy.$$escapeHtml('Scope') + '</a><select class="select" id="raven-grouping-field-select" name="grouping" title="' + soy.$$escapeHtml('Group By Requirement Field') + '"><optgroup><option value="none" title="' + soy.$$escapeHtml('None') + '">' + soy.$$escapeHtml('None') + '</option></optgroup><optgroup label="' + soy.$$escapeHtml('Native') + '">';
  var fieldList14 = opt_data.nativeGroupingFields;
  var fieldListLen14 = fieldList14.length;
  for (var fieldIndex14 = 0; fieldIndex14 < fieldListLen14; fieldIndex14++) {
    var fieldData14 = fieldList14[fieldIndex14];
    output += '<option value="' + soy.$$escapeHtml(fieldData14.id) + '" title="' + soy.$$escapeHtml(fieldData14.description) + '" ' + ((fieldData14.id == opt_data.scope.groupingFieldId) ? ' selected' : '') + '>' + soy.$$escapeHtml(fieldData14.name) + '</option>';
  }
  output += '</optgroup><optgroup label="' + soy.$$escapeHtml('Custom Fields') + '">';
  var fieldList30 = opt_data.customGroupingFields;
  var fieldListLen30 = fieldList30.length;
  for (var fieldIndex30 = 0; fieldIndex30 < fieldListLen30; fieldIndex30++) {
    var fieldData30 = fieldList30[fieldIndex30];
    output += '<option value="' + soy.$$escapeHtml(fieldData30.id) + '" title="' + soy.$$escapeHtml(fieldData30.description) + '" ' + ((fieldData30.id == opt_data.scope.groupingFieldId) ? ' selected' : '') + '>' + soy.$$escapeHtml(fieldData30.name) + '</option>';
  }
  output += '</optgroup></select><div id="raven-filter-button-wrapper" class="report-dynamic-filter-button-wrapper"></div><span class="message-toolbox"><a data-aui-trigger aria-controls="show-tooltip" id="raven-notifications-icon" style="display:none;margin-left:4px;margin-right:4px;"></a><a id="enable-how-to-read-msg" style="display:none; font-size:13px;">' + soy.$$escapeHtml('How to read this report') + '</a></span></form>' + RAVEN.Report.renderScopeDialog({requiresExperimentalDialog2: opt_data.requiresExperimentalDialog2, versions: opt_data.versions, userPreferences: opt_data.scope, contextPath: opt_data.contextPath, reportType: 'overall'}) + '<div id="dropdown-chart-options" class="aui-dropdown2 aui-style-default"><div id="requirement-presentation-option" class="aui-dropdown2-section"><div class="aui-dropdown2-heading"><strong>' + soy.$$escapeHtml('Requirement Presentation') + '</strong></div><ul><li><a id="hierarchical-requirements-option" class="aui-dropdown2-radio interactive' + ((opt_data.scope.flattenRequirements != true) ? ' checked' : '') + '">' + soy.$$escapeHtml('Hierarchical') + '</a></li><li><a id="flat-requirements-option" class="aui-dropdown2-radio interactive' + ((opt_data.scope.flattenRequirements == true) ? ' checked' : '') + '">' + soy.$$escapeHtml('Flat') + '</a></li></ul></div></div>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Report.renderOverallRequirementCoverageChartReportFilters.soyTemplateName = 'RAVEN.Report.renderOverallRequirementCoverageChartReportFilters';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/js/report/filters/report-overall-requirement-coverage-filter.js' */
(function(i){RAVEN.namespace("RAVEN.Report.Filters");var n=Backbone.Model.extend({urlRoot:function(){return contextPath+"/rest/raven/1.0/report/requirementCoverage/overall/filters"}});var c=Backbone.Model.extend({urlRoot:function(){return contextPath+"/rest/raven/1.0/report/requirementCoverage/overall/filters/fromQueryParam"}});var k={EXEC_SCOPE:"execScope",VERSION:"version",TEST_PLAN:"testPlan",ENVIRONMENT:"environment",GROUPING_FIELD:"groupingField",FLATTEN_REQUIREMENTS:"flattenRequirements"};RAVEN.Report.Filters.OverallRequirementCoverageReportFiltersView=RAVEN.Component.ReportFilter.extend({unscopedEvents:{"click.raven.report.overallcoverage-filter .scope-title":"clickTitleScopeNotSelected","click.raven.report.overallcoverage-filter #requirement-presentation-option a":"applyPresentation","click.raven.report.overallcoverage-filter #raven-overall-scope-apply":"applyScopeAnalysis","change.raven.report.overallcoverage-filter #raven-grouping-field-select":"applyGrouping","click.raven.report.overallcoverage-filter #raven-dialog-overall-clear":"resetScopeAnalysis","click.raven.report.overallcoverage-filter #raven-overall-scope-dialog-cancel":"closeScopeDialog","change.raven.report.overallcoverage-filter #raven-overall-requirement-coverage-filter-assignee":"removeAssigneeIcon",},el:"#overall-requirement-coverage-filter-content-place-holder",projectId:null,dialog:null,NO_ANALISYS_VERSION:0,FILTERS_MODE:1,SAVED_FILTER_MODE:2,filtersOption:null,filterButtonId:"raven-overall-requirement-dynamic-filter-button",filterOptionsPicker:null,generateReportId:"#raven-load-overall-requirement-converage-report",statusesObject:null,execScope:null,queryParamsDef:k,versionName:null,environmentName:null,testPlan:null,isEnterprise:false,userPrefsBasedFilterValuesResource:function(){return new n()},queryParamsBasedFilterValuesResource:function(){return new c()},saveCurrentFilterValues:function(){m.call(this);l.call(this);b.call(this)},buildFilterComponent:function(q){if(q&&q.attributes){const p=JSON.parse(q.attributes.scope);this.dialog=RAVEN.Report.renderOverallRequirementCoverageChartReportFilters({versions:q.attributes.versions,nativeGroupingFields:q.attributes.nativeGroupingFields,customGroupingFields:q.attributes.customGroupingFields,requiresExperimentalDialog2:q.attributes.requiresExperimentalDialog2,scope:p,contextPath:contextPath});this.statusesObject=q.attributes.statuses.reduce(function(s,r){s[r.id]=r.name;return s},{});if(p.execScope!==RAVEN.ReportsContants.TESTPLAN_NAME&&p.execScope!==RAVEN.ReportsContants.VERSION_NAME){this.execScope=RAVEN.ReportsContants.VERSION_NAME}else{this.execScope=p.execScope}this.$el.empty();this.$el.html(this.dialog);a.call(this);if(this.execScope===RAVEN.ReportsContants.TESTPLAN_NAME){toggleScope(i(".scope-title[data-mode=4]"))}}else{console.error("Couldn't fetch filter values")}},renderFilterSummary:function(){const q=this;i(this.generateReportId).attr("disabled",true);const r=new Set();if(!q.isEnterprise){r.add("project")}const p=new RAVEN.common.components.util.JiraFieldsData({issueTypeId:i("#requirement-issue-type-ids").val(),excludeFields:r});q._createFiltersButton(true);p.getPromise().done(function(s){q._renderDynamicFilterButton(s)});renderScopeParametersGeneric(q.execScope,q.versionName,q.testPlan,q.environmentName)},initialize:function(){this.projectId=i("#selected-project-id").val();this.isEnterprise=i("#isXrayEnterprise").val()==="true";this.render();g.call(this)},destroy:function(){this.undelegateEvents();j.call(this);if(this.filterOptionsPicker){this.filterOptionsPicker._destroyOldModals()}if(this.dialog){i("#raven-scope-inline-dialog").remove()}this.remove();RAVEN.Component.ReportFilter.prototype.destroy.call(this)},getScopeVersion:function(){return this.getCurrentValues()[k.VERSION]},getCurrentDynamicFilterValues:function(){if(this.filterOptionsPicker){return this.filterOptionsPicker.getBasicTabJql()}var p=i.Deferred();p.resolve(null);return p.promise()},applyRequirementsFilter:function(){if(i(".filter-title.selected").data("mode")===this.SAVED_FILTER_MODE){this.filtersOption=this.SAVED_FILTER_MODE}else{this.filtersOption=this.FILTERS_MODE}RAVEN.Component.ReportFilter.prototype.closeDialogAndSyncURLQueryParams.call(this,"#raven-filter-inline-dialog");this.trigger("raven.dialog.apply:requirements-filter")},applyScopeAnalysis:function(){var p=this.execScope;this.execScope=getExecutionScope();if(!checkTestPlanKey(this.execScope,this.testPlanPicker)){this.execScope=p;return false}m.call(this);RAVEN.Component.ReportFilter.prototype.closeDialogAndSyncURLQueryParams.call(this,"#raven-scope-inline-dialog");this.trigger("raven.dialog.apply:scope-filter")},applyPresentation:function(){AJS.$("#raven-requirement-presentation").trigger("aui-button-invoke");b.call(this);RAVEN.Component.ReportFilter.prototype.closeDialogAndSyncURLQueryParams.call(this);this.trigger("raven.dialog.apply:presentation-filter.flatten-requirements")},applyGrouping:function(){l.call(this);RAVEN.Component.ReportFilter.prototype.closeDialogAndSyncURLQueryParams.call(this);this.trigger("raven.dialog.apply:grouping-filter")},resetFilter:function(){},resetScopeAnalysis:function(){resetScopeValuesGeneric(this.versionPicker,this.environmentPicker,this.testPlanPicker);renderScopeParametersGeneric(this.execScope,this.versionName,this.testPlan,this.environmentName)},clickTitleScopeNotSelected:function(p){toggleScope(p.currentTarget);p.stopPropagation()},closeScopeDialog:function(){closeDialogGeneric("#raven-scope-inline-dialog")},removeAssigneeIcon:function(){var p=this;if(!p.assigneeFieldPicker._hasIcon()){if(p.assigneeFieldPicker.$entityIcon!==undefined){p.assigneeFieldPicker.$entityIcon.remove()}p.assigneeFieldPicker.$container.removeClass("aui-ss-has-entity-icon")}},_initFilterDialogFromURLParam:function(q){if(this.isSharedUrl()){this.filterOptionsPicker.addFieldsFromQueryParams()}else{if(this.userPrefDynamicFilters){const p=JSON.parse(this.userPrefDynamicFilters);this.filterOptionsPicker.setBasicTabValues(p);this.filterOptionsPicker.setAdvancedTabValues(p);i(document).trigger(RAVEN.Component.ReportFilterEvents.DYNAMIC_FILTERS_UPDATED,this.filterOptionsPicker.getValueQueryParams())}else{this.filterOptionsPicker.addDefaultProject()}}q.unblock()},_createFiltersButton:function(p){if(this.filterOptionsPicker){return}const q=i("#raven-filter-button-wrapper");q.empty();new RAVEN.DataTable.DataTableHeaderButtons(q,this.filterButtonId,"aui-button-subtle",true,false);if(p===true){i("#"+this.filterButtonId).block()}},_renderDynamicFilterButton:function(u){if(this.filterOptionsPicker){i(document).trigger(RAVEN.Component.ReportFilterEvents.DYNAMIC_FILTERS_UPDATED,this.filterOptionsPicker.getValueQueryParams());i(this.generateReportId).attr("disabled",false);return}this._createFiltersButton();var t=["project","fixfor",i("#sprint-custom-field-id").val(),"component","status","resolution","text"];t=t.filter(function(v){return !!v});const s=i("#"+this.filterButtonId);const r={id:"savedfilter",name:"Saved Filters"};r.renderer=RAVEN.common.components.util.SAVED_FILTER(r.id,r.name,10);const q={};q[r.id]=RAVEN.common.components.util.SAVED_FILTER_TEXT_RENDER;u.push(r);this.filterOptionsPicker=new RAVEN.common.components.FiltersPicker({$buttonElement:s,id:this.filterButtonId+"-modal",availableFields:u||[],defaultFields:t,customRenders:[r],customButtonTextRenderer:q,changeButtonText:true,confirmText:"Apply",projectsContext:[this.projectId],isEnterprise:this.isEnterprise});i(this.generateReportId).attr("disabled",false);const p=this;s.on("initialized",function(){s.on("search-button-click.saving-filters-context",function(){RAVEN.Report.URLBar.Proxy.get().replaceFieldsReportURLBarWithQuery(p.filterOptionsPicker.getValueQueryParams());p.trigger("raven.dialog.apply:requirements-filter")});if(document.readyState==="complete"){p._initFilterDialogFromURLParam(s)}else{i(window).load(function(){p._initFilterDialogFromURLParam(s)})}})}});function a(){var p=this;i("#raven-requirement-coverage-form").on("submit",function(r){r.preventDefault()});var q=i("#raven-report-analysis-version-select");p.versionPicker=createVersionScopePicker(q);p.testPlanPicker=h(i("#raven-report-analysis-test-plan-select"));i("#raven-report-analysis-test-plan-select-field").attr("placeholder","Choose Test Plan Key");p.environmentPicker=createEnvironmentSingleSelectPicker(i("#raven-report-analysis-environment-select"));this.groupingFieldPicker=f(i("#raven-grouping-field-select"));d()}function e(p){p.on("initialized",function(s,r){var q=i("body").data("version");if(!q||q.toString().charAt(0)==="5"){i("input",p.parent()).height("23px")}});return new AJS.SingleSelect({element:p,showDropdownButton:true,revertOnInvalid:true})}function f(p){return new RAVEN.SubtleSelect({element:p,showDropdownButton:false,revertOnInvalid:true})}function h(p){return new AJS.SingleSelect({element:p,showDropdownButton:true,submitInputVal:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:contextPath+"/rest/raven/1.0/issue/picker?issueType=TESTPLAN",formatResponse:function(r){var s=r.sections[0];var q=new AJS.GroupDescriptor({weight:0,id:s.id+"-opt-group",replace:true,label:s.label+"("+s.sub+")"});i(s.issues).each(function(u,t){var v=new AJS.ItemDescriptor({value:t.key,label:t.key+" - "+t.summaryText,title:t.summary,icon:contextPath+t.img,allowDuplicate:false,});q.addItem(v)});return[q]}}})}function d(p){var q="/rest/gadget/1.0/pickers/filters";i(".raven-default-filter-picker",p).each(function(){var t=i(this);if(t.data("aui-ss")){return}var r={showAvatar:true},u=t.data("inputValue");var s=new AJS.SingleSelect({element:t,submitInputVal:true,showDropdownButton:!t.data("show-dropdown-button"),errorMessage:AJS.format("filters.picker.invalid.filter","'{0}'"),ajaxOptions:{url:contextPath+q,query:true,data:r,formatResponse:function(v){var w=[];if(v.filters){i.each(i(v.filters),function(x,y){w[x]=new AJS.ItemDescriptor({value:y.id,label:y.name})})}return w}},inputText:u});t.data("field-support-obj",s);s.setFieldWidth(500)})}function m(){var t=this.getCurrentValues();this.execScope=getExecutionScope();t[k.EXEC_SCOPE]=this.execScope;if(this.execScope===RAVEN.ReportsContants.TESTPLAN_NAME){this.removeFilterValue(k.VERSION);var s=getGenericSelectValue("#raven-report-analysis-test-plan-select");if(s){this.testPlan=s;t[k.TEST_PLAN]=s}else{this.removeFilterValue(k.TEST_PLAN)}}else{this.removeFilterValue(k.TEST_PLAN);var r=getVersionGeneric(this.versionPicker);if(r!=null){var q=r.value;if(q&&q!="0"){t[k.VERSION]=q}else{this.removeFilterValue(k.VERSION)}this.versionName=r.label}}var p=getEnvironmentNameGeneric(this.execScope,this.environmentPicker);if(p!=null){t[k.ENVIRONMENT]=p.value;this.environmentName=p.label}else{this.removeFilterValue(k.ENVIRONMENT)}}function b(){this.getCurrentValues()[k.FLATTEN_REQUIREMENTS]=o()}function l(){if(this.groupingFieldPicker.getSelectedDescriptor()){this.getCurrentValues()[k.GROUPING_FIELD]=this.groupingFieldPicker.getSelectedDescriptor().properties.value}else{this.removeFilterValue(k.GROUPING_FIELD)}}function g(){var p=this;j();i.each(this.unscopedEvents,function(s,t){var r=s.substring(0,s.indexOf(" "));var q=s.substring(s.indexOf(" ")+1);i(document).on(r,q,i.proxy(p[t],p))})}function j(){i(document).off(".raven.report.overallcoverage-filter")}function o(){return !i("#hierarchical-requirements-option").hasClass("checked")}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/js/report/report-overall-requirement-coverage-chart-view.js' */
require(["aui/inline-dialog2"]);(function(a){RAVEN.Report.OverallRequirementCoverageChartReportView=Backbone.View.extend({el:"#report-wrapper",filterView:null,overallRequirementCoverageChartView:null,render:function(c){var d=this;var e=RAVEN.Report.renderOverallRequirementCoverageReport({requiresExperimentalDialog2:c,contextPath:AJS.contextPath()});this.$el.empty();this.$el.html(e);d.filterView=new RAVEN.Report.Filters.OverallRequirementCoverageReportFiltersView();d.overallRequirementCoverageChartView=new RAVEN.Report.OverallRequirementCoverageChartView({filterView:d.filterView});var b=RAVEN.report.analytics.endpoints().OVERALL_REQ;RAVEN.report.analytics.reportVisit(b)},destroy:function(){if(this.filterView){this.filterView.destroy();this.filterView=null}if(this.overallRequirementCoverageChartView){this.overallRequirementCoverageChartView.destroy();this.overallRequirementCoverageChartView=null}a("#show-tooltip").remove()}});RAVEN.Report.OverallRequirementCoverageChartView=Backbone.View.extend({el:"#requirement-coverage-wrapper",filterView:null,version:null,projectId:null,execScope:null,filtersOption:null,testPlan:null,versionName:null,environment:null,environmentName:null,groupingField:null,execScopeFieldPicker:null,versionPicker:null,testPlanPicker:null,environmentPicker:null,groupingFieldPicker:null,chartDetailsData:null,overallChart:null,isFirstReport:true,OK_STATUS:"OK",NOK_STATUS:"NOK",NOTRUN_STATUS:"Not Run",UNKNOWN_STATUS:"Unknown",UNCOVERED_STATUS:"Uncovered",requirementsDataTable:null,subRequirementsMapping:{},openRows:new Set(),FILTERS_MODE:1,SAVED_FILTER_MODE:2,NO_ANALISYS_VERSION:0,unscopedEvents:{"click.raven.report.overallcoverage #raven-load-overall-requirement-converage-report":"firstGenerateReport","click.raven.report.overallcoverage #raven-requirement-filter-fixversion-suggestions":"preventDefault","click.raven.report.overallcoverage #raven-requirement-filter-status-suggestions":"preventDefault","click.raven.report.overallcoverage #raven-requirement-filter-resolution-suggestions":"preventDefault","click.raven.report.overallcoverage #raven-overall-requirement-coverage-filter-assignee-suggestions":"preventDefault","click.raven.report.overallcoverage #raven-requirement-filter-component-suggestions":"preventDefault","click.raven.report.overallcoverage #raven-requirement-filter-saved-suggestions":"preventDefault","submitraven.report.overallcoverage #raven-requirement-coverage-form":"preventDefault","click.raven.report.overallcoverage #raven-report-analysis-version-select-suggestions":"preventDefault","click.raven.report.overallcoverage #raven-report-analysis-test-plan-select-suggestions":"preventDefault","click.raven.report.overallcoverage #raven-report-analysis-environment-select-suggestions":"preventDefault","click.raven.report.overallcoverage .item-delete":"preventDefault","click.raven.report.overallcoverage .toggle-sub-requirements":"toggleSubRequirements","click.raven.report.overallcoverage #dismiss-how-to-read-msg":"disableHowToRead","click.raven.report.overallcoverage #enable-how-to-read-msg":"enableHowToRead"},render:function(){if(this.isFirstReport){return}var c=this;a("#report-wrapper").block();a(".raven-requirement-header").block();c.clearMessage();var e=c.$el;e.empty();a("#raven-overall-requirement-coverage-content").spin("large");var b=a.param(c.filterView.getCurrentValues());b=b?"&"+b:"";b="projectId="+this.projectId+b+"&withDetails=true";const d=AJS.contextPath()+"/rest/raven/1.0/report/requirementCoverage/overall?"+b;c.filterView.getCurrentDynamicFilterValues().done(function(f){var g="";if(c.filterView.filterOptionsPicker){g=JSON.stringify(c.filterView.filterOptionsPicker.getValue(true))}const h={filtersValue:g,basicTabJql:f||"",projects:c.filterView.filterOptionsPicker.getProjectsContext()};a.ajax({dataType:"json",type:"POST",url:d,timeout:120000,data:h,success:function(i){c._checkShowHowToRead();if(i){c._createOverallCoverageChart(i)}else{if(i.errors){AJS.messages.generic(a("#message-row-wrapper"),{body:i.errors[0],closeable:false})}else{AJS.messages.generic(a("#message-row-wrapper"),{body:"No matched requirements found.",closeable:false})}}a("#raven-overall-requirement-coverage-content").spinStop();a("#report-wrapper").unblock();a(".raven-requirement-header").unblock()},error:function(j,i){c.clearMessage();AJS.messages.error(a("#message-row-wrapper"),{title:"An error occurred while fetching Requirements from server",body:i.statusText+": "+i.responseText,closeable:false});a("#raven-overall-requirement-coverage-content").spinStop();a("#report-wrapper").unblock();a(".raven-requirement-header").unblock()}})})},initialize:function(b){if(b){_.extend(this,_.pick(b,"filterView"))}this.projectId=a("#selected-project-id").val();this._delegateUnscopedEvents();this.listenTo(this.filterView,"raven.dialog.apply:requirements-filter",this.render);this.listenTo(this.filterView,"raven.dialog.apply:scope-filter",this.render);this.listenTo(this.filterView,"raven.dialog.apply:presentation-filter.flatten-requirements",this.render);this.listenTo(this.filterView,"raven.dialog.apply:grouping-filter",this.render)},_mapRequirements:function(c){var b=this;b.subRequirementsMapping={};c.forEach(function(d){d.requirements.forEach(function(e){b.subRequirementsMapping[e.issueId]=e.subRequirements;b._mapSubRequirements(e)})})},_mapSubRequirements:function(c){var b=this;c.subRequirements.forEach(function(d){b.subRequirementsMapping[d.issueId]=d.subRequirements;if(d.subRequirements.length){b._mapSubRequirements(d)}})},_toogleExecScopeValuePicker:function(b){switch(this.execScope){case"version":this.versionPicker.$container.show();this.testPlanPicker.$container.hide();break;case"testPlan":this.versionPicker.$container.hide();this.testPlanPicker.$container.show();break}if(b===true&&this.execScope=="version"||(this.execScope=="testPlan"&&this.testPlan!=null&&this.testPlan.length>0)){this.render()}},destroy:function(){a("#show-tooltip").remove();this.undelegateEvents();this._undelegateUnscopedEvents()},_createOverallCoverageChart:function(e){var d=this;if(e&&e.resultset&&e.resultset.length>0){a("#report-wrapper").css("height","auto");var c=RAVEN.Report.renderOverallRequirementCoverageChart();d.$el.html(c);d.chartDetailsData=e.details;d._mapRequirements(e.details);var b=0;if(e.rows&&e.rows>0){b=40*e.rows}if(b<300){b=300}else{if(b>1000){b=1000}}d.clearMessage();d.overallChart=new pvc.NormalizedBarChart({canvas:"overall-coverage-chart",width:d._calculateGraphicWidth(),height:b,orientation:"horizontal",stacked:true,animate:true,legend:true,interactive:true,selectable:false,clickable:true,hoverable:true,legendPosition:"top",legendAlign:"right",legendFont:"12px sans-serif",valuesFont:"bold 12px sans-serif",orthoAxisLabelSpacingMin:6,valuesVisible:true,valuesOptimizeLegibility:true,colors:["#95C160","#D45D52","#F1E069","#9AA1A8","#3671A3"],clickAction:function(f){if(f.datums().first().isSelected){this.chart.data.replaceSelected([])}else{this.chart.data.replaceSelected(f.datums())}this.chart.updateSelections()},selectionChangedAction:function(g,i){if(g&&g.length>0){var h=g[0];var j=h.atoms.category.value;var f=h.atoms.series.value;d._showOverallChartDetailsDataTable(j,f)}else{d._hideOverallChartDetailsDataTable()}a("body").trigger("close-dynamic-filter-dialog")},extensionPoints:{axisLabel_font:"12px sans-serif",barLabel_text:function(){var f=this.scene.vars.value.percent.value;if(f>0.07){return this.scene.vars.value.percent.label+" ("+this.scene.vars.value.value+")"}else{return null}}}});d.overallChart.setData(e,{crosstabMode:false});d.overallChart.render();a(document).ready(function(){a("#overall-coverage-chart").addClass("overallCoverageChart")})}else{fixReportWrapperHeight();if(e.errors){d.message(null,e.errors[0],"info")}else{d.message(null,"No matched requirements found.","info")}}},_calculateGraphicWidth:function(){var c=0.75;var b=a(".aui-page-panel").width();if(b<1200){return b}else{return b*c}},_showOverallChartDetailsDataTable:function(g,c){var d=this;a("#overall-coverage-chart-details").css({"max-width":d._calculateGraphicWidth()});d._disposeOverallCoverageChartDetails();var b=d.filterView.getScopeVersion();if(b==d.filterView.NO_ANALISYS_VERSION){b=null}var h=a("#raven-grouping-field-select").val();if(b!=-1&&h!=-1){a("#overall-coverage-chart-details").show();var f=d._getStatusFromName(c);var e=a("#raven-grouping-field-select").find(":selected").text();var i;if(e!=="None"){i='<h3 class="requirements-title">'+"Requirements with"+" "+AJS.escapeHtml(e)+' "'+AJS.escapeHtml(g)+'" '+"and"+" "+"Status"+' "'+c+'"</h3>'}else{i='<h3 class="requirements-title">'+"Requirements with"+" "+"Status"+' "'+c+'"</h3>'}a("#overall-coverage-chart-details-title").append(i).append('<p><a id="view-issues-link" style="display: none;" href="">'+"View Issues"+"</a></p>");d._createOverallChartDetailsDataTable(d.projectId,b,h,g,f)}},_createOverallChartDetailsDataTable:function(d,c,i,h,b){var e=this;if(!e.chartDetailsData){e.message(null,"Could not load requirements from server","error");return}var g=_.find(e.chartDetailsData,function(j){return j.group.name===h&&j.status.toUpperCase()===b.toUpperCase()});if(!g){e.message(null,"Could not load requirements from server","error");return}if(g.jqlQuery){var f=e._createViewIssuesLink(g.jqlQuery);a("#view-issues-link").attr("href",f).show()}e.requirementsDataTable=a("#requirements-datatable").xrayDataTable({bServerSide:false,bProcessing:false,bAutoWidth:false,iDisplayLength:10,sPaginationType:"full_numbers",bSort:true,oLanguage:{oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sInfoEmpty:"No entries to show",sEmptyTable:"No Requirements found. Either the data changed or a reindex is needed.",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sZeroRecords:"No records found",sInfoFiltered:"(filtered from _MAX_ total entries)",sSearch:"Search",sLengthMenu:"Show _MENU_ entries"},aaSorting:[],aoColumns:[{mData:"key"},{mData:"summary"},{mData:"total"},{mData:"ok"},{mData:"nok"},{mData:"notRun"},{mData:"completeness"}],aoColumnDefs:[{mRender:function(k,j,l){return RAVEN.Report.renderKeyColumnOverallReport({contextPath:AJS.contextPath(),reqKey:l.key,hasSubRequirements:l.subRequirements.length>0})},aTargets:[0]},{mRender:function(k,j,l){return e._createIssueLinkForSummary(l,k)},aTargets:[1]},{bSearchable:false,mRender:function(k,j,l){return e._createRequirementIssueTestsJQLLink(l.total_jqlQuery,k)},aTargets:[2]},{bSearchable:false,mRender:function(k,j,l){return e._createRequirementIssueTestsJQLLink(l.ok_jqlQuery,k)},aTargets:[3]},{bSearchable:false,mRender:function(k,j,l){return e._createRequirementIssueTestsJQLLink(l.nok_jqlQuery,k)},aTargets:[4]},{bSearchable:false,mRender:function(k,j,l){return e._createRequirementIssueTestsJQLLink(l.notRun_jqlQuery,k)},aTargets:[5],},{mRender:function(k,j,l){return e._createCompletenessBar(k)},aTargets:[6]}],fnRowCallback:function(k,j){a(k).data("issue-id",j.issueId);a(k).data("level",1);a(k).data("row-id",j.issueId);return k},fnDrawCallback:function(){a("#requirements-datatable tbody tr").each(function(){const k=a(this).data("issue-id");const j=e._getRowInfo(k);e._reDrawSubRequirements(j,this)})},aaData:g.requirements});e.$el.css("padding-bottom","35px")},_reDrawSubRequirements:function(d,f){var e=a(f).data("row-id");var g=a(f).data("level");if(!this._isRowOpen(e)){return}const b=this;const c=this._getOrCreateSubRequirementTable(f,e);a(f).find(".toggle-sub-requirements").removeClass("aui-iconfont-chevron-right").addClass("aui-iconfont-chevron-down");d.forEach(function(h){b._drawSubRequirement(c,h,g+1,e);const i=b._getChildRowId(e,h.issueId);const j=a("tr[data-row-id="+i+"]");b._reDrawSubRequirements(h.subRequirements,j)})},_createIssueLinkForSummary:function(c,b){return'<a href="'+AJS.contextPath()+"/browse/"+c.key+'" class="link-title">'+a("<span></span>").text(b).html()+"</a>"},_createRequirementIssueTestsJQLLink:function(b,c){return RAVEN.Report.renderTestJQLLinkColumnOverallReport({numberOfTests:c,link:this._createViewIssuesLink(b)})},_createViewIssuesLink:function(b){if(b===""){return b}return AJS.contextPath()+"/secure/IssueNavigator.jspa?reset=true&mode=hide&jqlQuery="+encodeURIComponent(b)},_createCompletenessBar:function(b){return RAVEN.Report.renderOverallCompletenessBar({completeness:b})},_getStatusFromName:function(c){var b=this;if(c){if(c===b.OK_STATUS){return"OK"}else{if(c===b.NOK_STATUS){return"NOK"}else{if(c===b.NOTRUN_STATUS){return"NOTRUN"}else{if(c===b.UNKNOWN_STATUS){return"UNKNOWN"}else{if(c===b.UNCOVERED_STATUS){return"UNCOVERED"}}}}}}return null},_hideOverallChartDetailsDataTable:function(){var b=this;b._disposeOverallCoverageChartDetails();a("#overall-coverage-chart-details").hide()},_disposeOverallCoverageChartDetails:function(){if(this.requirementsDataTable){this.requirementsDataTable.fnClearTable(false);this.requirementsDataTable.fnDestroy();this.requirementsDataTable=null}this.openRows=new Set();a("#overall-coverage-chart-details-title").empty();this.$el.css("padding-bottom","0px")},_checkShowHowToRead:function(){var b=this;a.ajax({type:"GET",url:AJS.contextPath()+"/rest/raven/1.0/report/requirementCoverage/overall/isHowToRead",success:function(d,e,c){if(d){b._showHowToRead()}else{b._hideHowToRead()}},error:function(d,e,c){console.log(d)}})},_setHowToReadServer:function(b){a.ajax({type:"POST",data:b,url:AJS.contextPath()+"/rest/raven/1.0/report/requirementCoverage/overall/setHowToRead",contentType:"application/json",error:function(d,e,c){console.log(d)}})},_showHowToRead:function(){a(".raven-how-to-read-chart").show("fast");a("#raven-notifications-icon").hide("fast");a("#enable-how-to-read-msg").hide("fast")},_hideHowToRead:function(){a(".raven-how-to-read-chart").hide("fast");a("#raven-notifications-icon").show("fast");a("#enable-how-to-read-msg").show("fast")},clearMessage:function(){a("#message-row-wrapper").empty()},message:function(d,c,b){b=(b===undefined)?"error":b;this.clearMessage();if(b==="error"){AJS.messages.error("#message-row-wrapper",{title:d,body:c,closeable:false})}else{if(b==="info"){AJS.messages.info("#message-row-wrapper",{title:d,body:c,closeable:false})}else{if(b==="warning"){AJS.messages.warning("#message-row-wrapper",{title:d,body:c,closeable:false})}else{if(b==="success"){AJS.messages.success("#message-row-wrapper",{title:d,body:c,closeable:false})}}}}},_delegateUnscopedEvents:function(){var b=this;a(document).off(".raven.report.overallcoverage");a.each(this.unscopedEvents,function(e,f){var d=e.substring(0,e.indexOf(" "));var c=e.substring(e.indexOf(" ")+1);a(document).on(d,c,a.proxy(b[f],b))})},_undelegateUnscopedEvents:function(){a(document).off(".raven.report.overallcoverage")},toggleSubRequirements:function(c){var b=this;b._toggleExpandRow(c.target)},_toggleExpandRow:function(c){var b=this;var e=a(c).parents("tr")[0];if(e){var d=a(e).data("row-id");if(b._isRowOpen(d)){b._hideSubRequirementRows(c,e,d)}else{b._showSubRequirementRows(c,e,d)}}},_hideSubRequirementRows:function(c,f){a(c).removeClass("aui-iconfont-chevron-down").addClass("aui-iconfont-chevron-right");const d=a(f).data("issue-id");const e=a(f).data("row-id");a("#requirements-datatable tr[data-parent-row-id="+e+"]").remove();var b=this;this._getAllRowIdsOfSubReqs(d,e).forEach(function(g){b.openRows["delete"](g)})},_getAllRowIdsOfSubReqs:function(c,d){var b=[];this._getAllSubReqsOfReqHelper(c,d,b);return b},_getAllSubReqsOfReqHelper:function(d,e,c){c.push(e);var f=this._getRowInfo(d);var b=this;f.forEach(function(g){const h=b._getChildRowId(e,g.issueId);b._getAllSubReqsOfReqHelper(g.issueId,h,c)})},_showSubRequirementRows:function(c,h,g){var b=this;var f=a(h).data("issue-id");var d=a(h).data("level");a(c).removeClass("aui-iconfont-chevron-right").addClass("aui-iconfont-chevron-down");b.openRows.add(g);var i=this._getRowInfo(f);if(i&&i.length>0){var e=a(RAVEN.Report.renderOverallSubRequirementTable({rowId:g}));a.each(i,function(){b._drawSubRequirement(e,this,d+1,g)});a(h).after(e)}},_getOrCreateSubRequirementTable:function(e,d){var b=a("#requirements-datatable tr[data-parent-row-id="+d+"] table");if(b.length>0){return b}var c=a(RAVEN.Report.renderOverallSubRequirementTable({rowId:d}));a(e).after(c);return c},_drawSubRequirement:function(c,e,b,d){var f=a(c).find("tbody").first();f.append(RAVEN.Report.renderOverallSubRequirementRow({contextPath:AJS.contextPath(),requirement:e,level:b,totalJQLLink:this._createViewIssuesLink(e.total_jqlQuery),okJQLLink:this._createViewIssuesLink(e.ok_jqlQuery),nokJQLLink:this._createViewIssuesLink(e.nok_jqlQuery),notRunJQLLink:this._createViewIssuesLink(e.notRun_jqlQuery),rowId:this._getChildRowId(d,e.issueId)}))},_getChildRowId:function(c,b){return c+"_"+b},_isRowOpen:function(b){return this.openRows.has(b)},_getRowInfo:function(b){return this.subRequirementsMapping[b]},firstGenerateReport:function(){a("#raven-first-report").hide();this.isFirstReport=false;this.render()},preventDefault:function(b){b.stopPropagation();b.preventDefault()},disableHowToRead:function(){a(".header-filter").attr("data-initialized",false);this._hideHowToRead();this._setHowToReadServer("disabled")},enableHowToRead:function(){a(".header-filter").attr("data-initialized",false);this._showHowToRead();this._setHowToReadServer("enabled")}})})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/templates/reports/historical-requirement-coverage-chart-report/historical-requirement-coverage-chart.soy' */
// This file was automatically generated from historical-requirement-coverage-chart.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Report.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Report == 'undefined') { RAVEN.Report = {}; }


RAVEN.Report.renderHistoricalRequirementCoverageReport = function(opt_data, opt_ignored) {
  return RAVEN.Report.renderHowToRead({howToRead: 'Shows the evolution of the calculated requirement coverage status for a list of requirements, over a time range, in stacked bar charts, for the selected version, or Test Plan, and/or Test Environment.\x3c/br\x3e\x3c/br\x3eThis helps you analyze the progress of the requirement coverage status, by taking into account the testing results associated with each requirement until the day being analyzed.', link: 'https://docs.getxray.app/display/XRAY/Historical+Requirement+Coverage+Report', requiresExperimentalDialog2: opt_data.requiresExperimentalDialog2}) + '<div class="header-filter" id="historical-header" data-initialized="false" style="width:100%; margin-top:10px;"><div id="arg-validation-messages"></div><div style="float:left; max-width:95%;"><div id="historical-requirement-coverage-filter-content-place-holder" style="display: inline-block;max-width:100%"></div><div id="historical-coverage-chart-section"></div><span class="message-toolbox"><a data-aui-trigger aria-controls="show-tooltip" id="raven-notifications-icon" style="display:none;margin-left:4px;margin-right:4px;"></a><a id="enable-how-to-read-msg" style="display:none; font-size:13px;">' + soy.$$escapeHtml('How to read this report') + '</a></span></div><div class="raven-report-presentation-button-wrapper"><button id="raven-requirement-presentation" aria-owns="dropdown-chart-options" aria-haspopup="true" class="aui-button aui-dropdown2-trigger" style="float:right; margin-right:8px; margin-top:-3px;"><span class="aui-icon aui-icon-small aui-iconfont-configure">' + soy.$$escapeHtml('Configure') + '</span></button></div></div><div style="clear: both"></div><div id="raven-historical-requirement-coverage-content" style="min-width:600px; clear:both;">' + RAVEN.Report.renderGenerateReport({imgUrl: 'xray-historical-coverage-report-back.png', buttonID: 'raven-load-historical-requirement-converage-report', contextPath: opt_data.contextPath}) + '<div id="message-row-wrapper" class="message-wrapper-margin" style="height:90%;"></div><div id="requirement-coverage-wrapper" style="height:100%;"></div></div>';
};
if (goog.DEBUG) {
  RAVEN.Report.renderHistoricalRequirementCoverageReport.soyTemplateName = 'RAVEN.Report.renderHistoricalRequirementCoverageReport';
}


RAVEN.Report.renderPeriodField = function(opt_data, opt_ignored) {
  return '<form action="#" id="raven-historic-coverage-period-field-group" class="aui"><div class="date-input"><label for="historic-chart-from">' + soy.$$escapeHtml('From') + '</label><input class="text medium-field historic-chart-date-picker" id="historic-chart-from" type="text" max="' + soy.$$escapeHtml(opt_data.dailyReportToday) + '" value="' + soy.$$escapeHtml(opt_data.userPreferences.fromDate) + '" readonly/><span id="historic-chart-from-trigger" class="aui-icon icon-range"></span></div><div class="date-input"><label for="historic-chart-to">' + soy.$$escapeHtml('To') + '</label><input class="text medium-field historic-chart-date-picker" id="historic-chart-to" type="text" max="' + soy.$$escapeHtml(opt_data.dailyReportToday) + '" value="' + soy.$$escapeHtml(opt_data.userPreferences.toDate) + '" readonly/><span id="historic-chart-to-trigger" class="aui-icon icon-range"></span></div></form>';
};
if (goog.DEBUG) {
  RAVEN.Report.renderPeriodField.soyTemplateName = 'RAVEN.Report.renderPeriodField';
}


RAVEN.Report.renderHistoricalRequirementCoverageChart = function(opt_data, opt_ignored) {
  return '<div id="requirement-coverage-charts"><div id="historic-coverage-period"><div id="historic-coverage-chart-absolute" class="historicalCoverageChart"></div><div id="historic-coverage-chart-relative"></div></div></div>';
};
if (goog.DEBUG) {
  RAVEN.Report.renderHistoricalRequirementCoverageChart.soyTemplateName = 'RAVEN.Report.renderHistoricalRequirementCoverageChart';
}


RAVEN.Report.renderProgress = function(opt_data, opt_ignored) {
  return '<div id="raven-historical-calc-info"><h3 id="progress-caption">' + soy.$$escapeHtml('Report Generation') + '</h3><br /><div id="report-progress-id" class="aui-progress-indicator"><span class="aui-progress-indicator-value"></span></div><div class="aui-message aui-message-warning"><p>' + soy.$$escapeHtml('Depending on your query the report generation may take longer than usual, especially if this is the first time.') + '</p></div><div class="aui-message aui-message-info"><p>' + soy.$$escapeHtml('We are generating your report on the background and updating your status bar every 10 seconds.') + '</p></div></div>';
};
if (goog.DEBUG) {
  RAVEN.Report.renderProgress.soyTemplateName = 'RAVEN.Report.renderProgress';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/templates/reports/historical-requirement-coverage-chart-report/filter-header.soy' */
// This file was automatically generated from filter-header.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Report.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Report == 'undefined') { RAVEN.Report = {}; }


RAVEN.Report.renderHistoricalRequirementCoverageChartReportFilters = function(opt_data, opt_ignored) {
  var output = '<form action="#" id="raven-requirement-coverage-form" style="margin: 6px;"><a id="raven-scope-trigger" href="#" aria-controls="raven-scope-inline-dialog" data-aui-trigger class="aui-button aui-style-default raven-dropdown2-arrow aui-button-subtle">' + soy.$$escapeHtml('Filter') + '</a><select class="select" id="raven-grouping-field-select" name="grouping" title="' + soy.$$escapeHtml('Group By Requirement Field') + '"><optgroup><option value="none" title="' + soy.$$escapeHtml('None') + '">' + soy.$$escapeHtml('None') + '</option></optgroup><optgroup label="' + soy.$$escapeHtml('Native') + '">';
  var fieldList14 = opt_data.nativeGroupingFields;
  var fieldListLen14 = fieldList14.length;
  for (var fieldIndex14 = 0; fieldIndex14 < fieldListLen14; fieldIndex14++) {
    var fieldData14 = fieldList14[fieldIndex14];
    output += '<option value="' + soy.$$escapeHtml(fieldData14.id) + '" title="' + soy.$$escapeHtml(fieldData14.description) + '" ' + ((fieldData14.id == opt_data.scope.groupingFieldId) ? ' selected' : '') + '>' + soy.$$escapeHtml(fieldData14.name) + '</option>';
  }
  output += '</optgroup><optgroup label="' + soy.$$escapeHtml('Custom Fields') + '">';
  var fieldList30 = opt_data.customGroupingFields;
  var fieldListLen30 = fieldList30.length;
  for (var fieldIndex30 = 0; fieldIndex30 < fieldListLen30; fieldIndex30++) {
    var fieldData30 = fieldList30[fieldIndex30];
    output += '<option value="' + soy.$$escapeHtml(fieldData30.id) + '" title="' + soy.$$escapeHtml(fieldData30.description) + '" ' + ((fieldData30.id == opt_data.scope.groupingFieldId) ? ' selected' : '') + '>' + soy.$$escapeHtml(fieldData30.name) + '</option>';
  }
  output += '</optgroup></select><div id="raven-filter-button-wrapper" class="report-dynamic-filter-button-wrapper"></div></form>' + RAVEN.Report.renderScopeDialog({requiresExperimentalDialog2: opt_data.requiresExperimentalDialog2, versions: opt_data.versions, userPreferences: opt_data.scope, contextPath: opt_data.contextPath, reportType: 'historical'}) + '<div id="dropdown-chart-options" class="aui-dropdown2 aui-style-default"><div id="requirement-presentation-option" class="aui-dropdown2-section"><div class="aui-dropdown2-heading"><strong>' + soy.$$escapeHtml('Requirement Presentation') + '</strong></div><ul><li><a id="hierarchical-requirements-option" class="aui-dropdown2-radio interactive' + ((opt_data.scope.flattenRequirements != true) ? ' checked' : '') + '">' + soy.$$escapeHtml('Hierarchical') + '</a></li><li><a id="flat-requirements-option" class="aui-dropdown2-radio interactive' + ((opt_data.scope.flattenRequirements == true) ? ' checked' : '') + '">' + soy.$$escapeHtml('Flat') + '</a></li></ul></div></div>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Report.renderHistoricalRequirementCoverageChartReportFilters.soyTemplateName = 'RAVEN.Report.renderHistoricalRequirementCoverageChartReportFilters';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/js/report/report-historical-requirement-coverage-chart-view.js' */
require(["aui/inline-dialog2"]);(function(a){RAVEN.Report.HistoricalRequirementCoverageChartReportView=Backbone.View.extend({el:"#report-wrapper",filterView:null,historicalRequirementCoverageChartView:null,render:function(c){var d=this;var e=RAVEN.Report.renderHistoricalRequirementCoverageReport({requiresExperimentalDialog2:c,contextPath:contextPath});d.$el.empty();d.$el.html(e);d.filterView=new RAVEN.Report.Filters.HistoricalRequirementCoverageReportFiltersView();d.historicalRequirementCoverageChartView=new RAVEN.Report.HistoricalRequirementCoverageChartView({filterView:d.filterView});var b=RAVEN.report.analytics.endpoints().HISTORICAL_REQ;RAVEN.report.analytics.reportVisit(b)},destroy:function(){if(this.filterView){this.filterView.destroy();this.filterView=null}if(this.historicalRequirementCoverageChartView){this.historicalRequirementCoverageChartView.destroy();this.historicalRequirementCoverageChartView=null}a("#show-tooltip").remove()}});RAVEN.Report.HistoricalRequirementCoverageChartView=Backbone.View.extend({el:"#requirement-coverage-wrapper",filterView:null,version:null,projectId:null,chartDetailsData:null,absHistoricChart:null,relHistoricChart:null,requirementsDataTable:null,progress:0,isFirstReport:true,timeToRefreshProgressBar:6000,unscopedEvents:{"click.raven.report.historicalcoverage #raven-load-historical-requirement-converage-report":"firstGenerateReport","click.raven.report.historicalcoverage #raven-requirement-filter-fixversion-suggestions":"preventDefault","click.raven.report.historicalcoverage #raven-requirement-filter-status-suggestions":"preventDefault","click.raven.report.historicalcoverage #raven-requirement-filter-resolution-suggestions":"preventDefault","click.raven.report.historicalcoverage #raven-historical-requirement-coverage-filter-assignee-suggestions":"preventDefault","click.raven.report.historicalcoverage #raven-requirement-filter-component-suggestions":"preventDefault","click.raven.report.historicalcoverage #raven-requirement-filter-saved-suggestions":"preventDefault","submitraven.report.historicalcoverage #raven-requirement-coverage-form":"preventDefault","click.raven.report.historicalcoverage .item-delete":"preventDefault","click.raven.report.historicalcoverage #dismiss-how-to-read-msg":"disableHowToRead","click.raven.report.historicalcoverage #enable-how-to-read-msg":"enableHowToRead","click.raven.report.historicalcoverage #raven-report-analysis-version-select-suggestions":"preventDefault","click.raven.report.historicalcoverage #raven-report-analysis-test-plan-select-suggestions":"preventDefault","click.raven.report.historicalcoverage #raven-report-analysis-environment-select-suggestions":"preventDefault"},render:function(){if(this.isFirstReport){return}var b=this;b.clearMessage();var c=b.$el;c.empty();this.fetchData()},initialize:function(b){if(b){_.extend(this,_.pick(b,"filterView"))}this.projectId=a("#selected-project-id").val();this._delegateUnscopedEvents();this.listenTo(this.filterView,"raven.dialog.apply:requirements-filter",this.render);this.listenTo(this.filterView,"raven.dialog.apply:scope-filter",this.render);this.listenTo(this.filterView,"raven.dialog.apply:presentation-filter.flatten-requirements",this.render);this.listenTo(this.filterView,"raven.dialog.apply:grouping-filter",this.render);this.listenTo(this.filterView,"raven.dialog.apply:chart-period",this.render)},fetchData:function(){var d=this;var c=RAVEN.Report.renderHistoricalRequirementCoverageChart();this.$el.html(c);var e=new Date(a("#historic-chart-from").val());var b=new Date(a("#historic-chart-to").val());this._saveAndValidateUserPreferences().done(function(){var f=d.filterView.getCurrentValues();d._blockPrams();d._needsToCalculate(_.omit(f,["fromDate","toDate"]),{startDate:d._formatDate(e),toDate:d._formatDate(b)});d._checkShowHowToRead()})},_blockPrams:function(){a("#historical-header").block()},_unblockParams:function(){a("#historical-header").unblock()},_needsToCalculate:function(d,b){var c=this;c.filterView.getCurrentDynamicFilterValues().done(function(e){a.ajax({type:"POST",url:contextPath+"/rest/raven/1.0/report/requirementCoverage/historical/numberDays?projectId="+c.projectId+"&"+a.param(d)+"&"+a.param(b),success:function(f){if(f.isGenerating){c._renderProgress();c._refreshLoading();return}if(f.value>=f.max){c._fetchReportData(b.startDate,b.toDate,d,e,[],60000,true)}else{c._fetchReportData(b.startDate,b.toDate,d,e,[],5000,false)}},error:function(g,h,f){c.clearMessage();AJS.messages.error(a("#message-row-wrapper"),{title:"An error occurred while fetching Requirements from server",body:f,closeable:false})}})})},_fetchReportData:function(g,h,d,i,c,e,f){var b="projectId="+this.projectId+"&"+a.param(d)+"&day="+g+"&toDate="+h+"&isCalculated="+f;var k=this;var j=document.createElement("div");j.setAttribute("id","raven-historical-spinner");a("#raven-historical-requirement-coverage-content").append(j);a("#raven-historical-spinner").spin("medium");a.ajax({type:"POST",url:contextPath+"/rest/raven/1.0/report/requirementCoverage/historical/day?"+b,data:i,timeout:e,success:function(l){if(l.options==null||l.metadata==null){console.error("No options or metadata attributes found")}k._unblockParams();k._processData(l);if(e===5000){k._removeProgressEntry()}},error:function(m,n,l){if(l!=="timeout"){k.clearMessage();AJS.messages.error(a("#message-row-wrapper"),{title:"An error occurred while fetching Requirements from server",body:m.responseText,closeable:false});k._unblockParams()}else{k._renderProgress();k._refreshLoading()}},complete:function(){a("#raven-historical-spinner").slideUp(1000,function(){a(this).remove()})}})},_refreshLoading:function(){if(document.getElementById("report-progress-id")==null){return}var c=this;var d=this._formatDate(new Date(a("#historic-chart-from").val()));var e=this._formatDate(new Date(a("#historic-chart-to").val()));var b=_.omit(c.filterView.getCurrentValues(),["fromDate","toDate"]);var f="projectId="+c.projectId+"&"+a.param(b)+"&startDate="+d+"&toDate="+e;c.filterView.getCurrentDynamicFilterValues().done(function(g){a.ajax({type:"POST",url:contextPath+"/rest/raven/1.0/report/requirementCoverage/historical/numberDays?"+f,data:g,success:function(h){if(h.value>=h.max){c._updateProgress(h);c._removeProgress();c._fetchReportData(d,e,b,g,[],60000,true)}else{c._updateProgress(h)}},error:function(i,j,h){if(h==="timeout"){c._refreshLoading()}else{c.clearMessage();console.error("Error getting the calculated days");AJS.messages.error(a("#message-row-wrapper"),{title:"An error occurred while fetching Requirements from server",body:h,closeable:false})}}})})},_removeProgressEntry:function(){var c=this;var d=new Date(a("#historic-chart-from").val());var e=new Date(a("#historic-chart-to").val());var b=_.omit(c.filterView.getCurrentValues(),["fromDate","toDate"]);var f="projectId="+c.projectId+"&"+a.param(b)+"&startDate="+this._formatDate(d)+"&toDate="+this._formatDate(e)+"&isToRemoveEntry=true";c.filterView.getCurrentDynamicFilterValues().done(function(g){a.ajax({type:"POST",url:contextPath+"/rest/raven/1.0/report/requirementCoverage/historical/numberDays?"+f,data:g,success:function(h){},error:function(i,j,h){c.clearMessage();console.error("Error getting the calculated days");AJS.messages.error(a("#message-row-wrapper"),{title:"An error occurred while fetching Requirements from server",body:h,closeable:false})}})})},_renderProgress:function(){var b=RAVEN.Report.renderProgress();this.$el.hide().append(b).delay(900).slideDown(1000)},_updateProgress:function(b){var d=document.getElementById("report-progress-id");if(d===null){return}if(b!=null){var e=calculateValueForProgressBar(b.value,b.max);AJS.progressBars.update("#report-progress-id",e)}var c=this;setTimeout(function(){c._refreshLoading()},c.timeToRefreshProgressBar)},_removeProgress:function(){a("#raven-historical-calc-info").slideUp(1000,function(){a(this).remove()})},_processData:function(b){this._createHistoricalCoverageChart(b)},_formatDate:function(c){var e=""+(c.getMonth()+1),b=""+c.getDate(),d=c.getFullYear();if(e.length<2){e="0"+e}if(b.length<2){b="0"+b}return[d,e,b].join("-")},_saveAndValidateUserPreferences:function(){var d=this;var c=a.Deferred();var b=a.param(this.filterView.getCurrentValues());d.filterView.getCurrentDynamicFilterValues().done(function(e){a.ajax({type:"POST",async:false,url:contextPath+"/rest/raven/1.0/report/requirementCoverage/historical/day/preferences?projectId="+d.projectId+"&"+b,data:e,success:function(){c.resolve()},error:function(g,h,f){console.error("[_saveAndValidateUserPreferences]: Error while saving user preferences");d.clearMessage();AJS.messages.error(a("#message-row-wrapper"),{title:"Error saving preferences",body:g.responseText?g.responseText:f,closeable:false});c.reject()}})});return c.promise()},toogleExecScopeValuePicker:function(b){switch(this.execScope){case"version":this.versionPicker.$container.show();this.testPlanPicker.$container.hide();break;case"testPlan":this.versionPicker.$container.hide();this.testPlanPicker.$container.show();break}if(b===true&&(this.execScope=="version"||(this.execScope=="testPlan"&&this.testPlan!=null&&this.testPlan.length>0))){this.render()}},destroy:function(){a("#show-tooltip").remove();this.undelegateEvents();this._undelegateUnscopedEvents()},_createHistoricalCoverageChart:function(b){this.clearMessage();var c=b;if(!c||c.length<=0||!c.resultset||c.resultset.length===0){fixReportWrapperHeight();if(c.errors){this.message(null,c.errors[0],"info")}else{this.message(null,"No matched requirements found.","info")}return}a("#report-wrapper").css("height","auto");this.absHistoricChart=this._createHistoricCoverageChart(c,"absolute");this.relHistoricChart=this._createHistoricCoverageChart(c,"relative")},_createHistoricCoverageChart:function(e,d){var b=this;var g=d==="absolute"?"Absolute Values":"Normalized Values";var c={canvas:"historic-coverage-chart-"+d,width:b._calculateGraphicWidth(),height:400,title:g,titlePosition:"left",stacked:true,animate:true,legend:true,selectable:false,clickable:true,hoverable:true,legendPosition:"right",legendAlign:"left",legendFont:"12px sans-serif",valuesFont:"bold 12px sans-serif",baseAxisTicks:true,valuesVisible:true,valuesOptimizeLegibility:true,ignoreNulls:false,colors:b._createColors(e.dimensions),extensionPoints:{xAxisLabel_textAngle:-Math.PI/3,xAxisLabel_textAlign:"right",xAxisLabel_textBaseline:"top",barLabel_text:function(){var i=this.chart.data.getVisibleCategories().length;if(i<7){var h=this.scene.vars.value.percent.value;if(h>0.05){if(d==="absolute"){return this.scene.vars.value.value}else{return this.scene.vars.value.percent.label}}}return null}}};var f;if(d==="relative"){f=new pvc.NormalizedBarChart(c)}else{f=new pvc.BarChart(c)}f.setData(e,{crosstabMode:false});f.render();a(document).ready(function(){a("#historic-coverage-chart-absolute").addClass("historicalCoverageChart")});return f},_calculateGraphicWidth:function(){var c=0.75;var b=a(".aui-page-panel").width();if(b<1200){return b}else{return b*c}},_createColors:function(b){if(b===3){return["#A4BFD6","#3671A3","#1F426C","#F9F1BB","#F1E069","#CAB63D","#D1D5D8","#9AA1A8","#616B73","#ECB6B1","#D45D52","#A73730","#CFE3B7","#95C160","#5C9038"]}else{if(b===2){return["#A4BFD6","#3671A3","#F9F1BB","#F1E069","#D1D5D8","#9AA1A8","#ECB6B1","#D45D52","#CFE3B7","#95C160"]}else{if(b===1){return["#A4BFD6","#F9F1BB","#D1D5D8","#ECB6B1","#CFE3B7",]}else{return[]}}}},firstGenerateReport:function(){a("#raven-first-report").slideUp(1000,function(){a(this).hide()});this.isFirstReport=false;this.render()},_checkShowHowToRead:function(){var b=this;a.ajax({type:"GET",url:contextPath+"/rest/raven/1.0/report/requirementCoverage/historical/isHowToRead",success:function(d,e,c){if(d){b._showHowToRead()}else{b._hideHowToRead()}},error:function(d,e,c){console.log(d)}})},_setHowToReadServer:function(b){a.ajax({type:"POST",data:JSON.stringify({howToRead:b}),url:contextPath+"/rest/raven/1.0/report/requirementCoverage/historical/setHowToRead",contentType:"application/json",error:function(d,e,c){console.log(d)}})},_showHowToRead:function(){a(".raven-how-to-read-chart").show("fast");a("#raven-notifications-icon").hide("fast");a("#enable-how-to-read-msg").hide("fast")},_hideHowToRead:function(){a(".raven-how-to-read-chart").hide("fast");a("#raven-notifications-icon").show("fast");a("#enable-how-to-read-msg").show("fast")},clearMessage:function(){a("#message-row-wrapper").empty()},message:function(d,c,b){b=(b===undefined)?"error":b;this.clearMessage();if(b==="error"){AJS.messages.error("#message-row-wrapper",{title:d,body:c,closeable:false})}else{if(b==="info"){AJS.messages.info("#message-row-wrapper",{title:d,body:c,closeable:false})}else{if(b==="warning"){AJS.messages.warning("#message-row-wrapper",{title:d,body:c,closeable:false})}else{if(b==="success"){AJS.messages.success("#message-row-wrapper",{title:d,body:c,closeable:false})}}}}},_delegateUnscopedEvents:function(){var b=this;a(document).off(".raven.report.historicalcoverage");a.each(this.unscopedEvents,function(e,f){var d=e.substring(0,e.indexOf(" "));var c=e.substring(e.indexOf(" ")+1);a(document).on(d,c,a.proxy(b[f],b))})},_undelegateUnscopedEvents:function(){a(document).off(".raven.report.historicalcoverage")},preventDefault:function(b){b.stopPropagation();b.preventDefault()},disableHowToRead:function(){a(".header-filter").attr("data-initialized",false);this._hideHowToRead();this._setHowToReadServer("disabled")},enableHowToRead:function(){a(".header-filter").attr("data-initialized",false);this._showHowToRead();this._setHowToReadServer("enabled")}})})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = '/js/report/filters/report-historical-requirement-coverage-filter.js' */
(function(i){RAVEN.namespace("RAVEN.Report.Filters");var o=Backbone.Model.extend({urlRoot:function(){return contextPath+"/rest/raven/1.0/report/requirementCoverage/historical/filters"}});var c=Backbone.Model.extend({urlRoot:function(){return contextPath+"/rest/raven/1.0/report/requirementCoverage/historical/filters/fromQueryParam"}});var l={EXEC_SCOPE:"execScope",VERSION:"version",TEST_PLAN:"testPlan",ENVIRONMENT:"environment",GROUPING_FIELD:"groupingField",FROM_DATE:"fromDate",TO_DATE:"toDate",FLATTEN_REQUIREMENTS:"flattenRequirements"};RAVEN.Report.Filters.HistoricalRequirementCoverageReportFiltersView=RAVEN.Component.ReportFilter.extend({el:"#historical-requirement-coverage-filter-content-place-holder",unscopedEvents:{"click.raven.report.historicalcoverage-filter #raven-historical-scope-apply":"applyScopeAnalysis","click.raven.report.historicalcoverage-filter #requirement-presentation-option a":"applyPresentation","change.raven.report.historicalcoverage-filter #raven-grouping-field-select":"applyGrouping","click.raven.report.historicalcoverage-filter #raven-dialog-historical-clear":"resetScopeAnalysis","change.raven.report.historicalcoverage-filter #raven-historical-requirement-coverage-filter-assignee":"removeAssigneeIcon","click.raven.report.historicalcoverage-filter #raven-historical-scope-dialog-cancel":"closeScopeDialog","click.raven.report.historicalcoverage-filter .scope-title":"clickTitleScopeNotSelected"},projectId:null,dialog:null,NO_ANALISYS_VERSION:0,FILTERS_MODE:1,SAVED_FILTER_MODE:2,filtersOption:null,statusesObject:null,execScope:null,queryParamsDef:l,versionName:null,environmentName:null,testPlan:null,filterButtonId:"raven-dynamic-historical-requirement-filter-button",generateReportId:"#raven-load-historical-requirement-converage-report",filterOptionsPicker:null,isEnterprise:false,userPrefsBasedFilterValuesResource:function(){return new o()},queryParamsBasedFilterValuesResource:function(){return new c()},initialize:function(){this.projectId=i("#selected-project-id").val();this.isEnterprise=i("#isXrayEnterprise").val()==="true";this.render();g.call(this)},destroy:function(){this.undelegateEvents();if(this.filterOptionsPicker){this.filterOptionsPicker._destroyOldModals()}k.call(this);if(this.dialog){i("#raven-scope-inline-dialog").remove()}this.remove();RAVEN.Component.ReportFilter.prototype.destroy.call(this)},buildFilterComponent:function(s){if(s&&s.attributes){var r=JSON.parse(s.attributes.scope);this.dialog=RAVEN.Report.renderHistoricalRequirementCoverageChartReportFilters({versions:s.attributes.versions,nativeGroupingFields:s.attributes.nativeGroupingFields,customGroupingFields:s.attributes.customGroupingFields,requiresExperimentalDialog2:s.attributes.requiresExperimentalDialog2,scope:r,contextPath:contextPath});this.statusesObject=s.attributes.statuses.reduce(function(u,t){u[t.id]=t.name;return u},{});if(r.execScope!==RAVEN.ReportsContants.TESTPLAN_NAME&&r.execScope!==RAVEN.ReportsContants.VERSION_NAME){this.execScope=RAVEN.ReportsContants.VERSION_NAME}else{this.execScope=r.execScope}this.$el.empty();this.$el.html(this.dialog);f(s.attributes.dailyReportToday,r);a.call(this);if(this.execScope===RAVEN.ReportsContants.TESTPLAN_NAME){toggleScope(i(".scope-title[data-mode=4]"))}}else{console.error("Couldn't fetch filter values")}},renderFilterSummary:function(){const s=this;i(this.generateReportId).attr("disabled",true);const t=new Set();if(!s.isEnterprise){t.add("project")}const r=new RAVEN.common.components.util.JiraFieldsData({issueTypeId:i("#requirement-issue-type-ids").val(),excludeFields:t});s._createFiltersButton(true);r.getPromise().done(function(u){s._renderDynamicFilterButton(u)});renderScopeParametersGeneric(this.execScope,this.versionName,this.testPlan,this.environmentName)},_initFilterDialogFromURLParam:function(s){if(this.isSharedUrl()){this.filterOptionsPicker.addFieldsFromQueryParams()}else{if(this.userPrefDynamicFilters){const r=JSON.parse(this.userPrefDynamicFilters);this.filterOptionsPicker.setBasicTabValues(r);this.filterOptionsPicker.setAdvancedTabValues(r);i(document).trigger(RAVEN.Component.ReportFilterEvents.DYNAMIC_FILTERS_UPDATED,this.filterOptionsPicker.getValueQueryParams())}else{this.filterOptionsPicker.addDefaultProject()}}s.unblock()},_createFiltersButton:function(r){if(this.filterOptionsPicker){return}const s=i("#raven-filter-button-wrapper");s.empty();new RAVEN.DataTable.DataTableHeaderButtons(s,this.filterButtonId,"aui-button-subtle",true,false);if(r===true){i("#"+this.filterButtonId).block()}},getCurrentDynamicFilterValues:function(){var s=this;var r=i.Deferred();var t={filtersValue:"",basicTabJql:""};if(this.filterOptionsPicker){this.filterOptionsPicker.getBasicTabJql().done(function(u){t.filtersValue=JSON.stringify(s.filterOptionsPicker.getValue(true));t.basicTabJql=u||"";t.projects=s.filterOptionsPicker.getProjectsContext();r.resolve(t)})}else{r.resolve(t)}return r.promise()},_renderDynamicFilterButton:function(w){if(this.filterOptionsPicker){i(document).trigger(RAVEN.Component.ReportFilterEvents.DYNAMIC_FILTERS_UPDATED,this.filterOptionsPicker.getValueQueryParams());i(this.generateReportId).attr("disabled",false);return}this._createFiltersButton();var v=["project","fixfor",i("#sprint-custom-field-id").val(),"component","status","resolution","text"];v=v.filter(function(x){return !!x});const u=i("#"+this.filterButtonId);const t={id:"savedfilter",name:"Saved Filters"};t.renderer=RAVEN.common.components.util.SAVED_FILTER(t.id,t.name,10);const s={};s[t.id]=RAVEN.common.components.util.SAVED_FILTER_TEXT_RENDER;w.push(t);this.filterOptionsPicker=new RAVEN.common.components.FiltersPicker({$buttonElement:u,id:this.filterButtonId+"-modal",availableFields:w||[],defaultFields:v,customRenders:[t],customButtonTextRenderer:s,changeButtonText:true,confirmText:"Apply",projectsContext:[this.projectId],isEnterprise:this.isEnterprise});i(this.generateReportId).attr("disabled",false);const r=this;u.on("initialized",function(){u.on("search-button-click.saving-filters-context",function(){RAVEN.Report.URLBar.Proxy.get().replaceFieldsReportURLBarWithQuery(r.filterOptionsPicker.getValueQueryParams());r.trigger("raven.dialog.apply:requirements-filter")});if(document.readyState==="complete"){r._initFilterDialogFromURLParam(u)}else{i(window).load(function(){r._initFilterDialogFromURLParam(u)})}})},saveCurrentFilterValues:function(){var r={};n.call(this);m.call(this);b.call(this);j.call(this);return r},removeAssigneeIcon:function(){var r=this;if(!r.assigneeFieldPicker._hasIcon()){if(r.assigneeFieldPicker.$entityIcon!==undefined){r.assigneeFieldPicker.$entityIcon.remove()}r.assigneeFieldPicker.$container.removeClass("aui-ss-has-entity-icon")}},onHistoricChartPeriodUpdate:function(r){if(i(r.activeDiv).hasClass("day")){j.call(this);RAVEN.Component.ReportFilter.prototype.closeDialogAndSyncURLQueryParams.call(this);this.trigger("raven.dialog.apply:chart-period")}},applyScopeAnalysis:function(){var r=this.execScope;this.execScope=getExecutionScope();if(!checkTestPlanKey(this.execScope,this.testPlanPicker)){this.execScope=r;return false}n.call(this);RAVEN.Component.ReportFilter.prototype.closeDialogAndSyncURLQueryParams.call(this,"#raven-scope-inline-dialog");this.trigger("raven.dialog.apply:scope-filter")},applyPresentation:function(){AJS.$("#raven-requirement-presentation").trigger("aui-button-invoke");b.call(this);RAVEN.Component.ReportFilter.prototype.closeDialogAndSyncURLQueryParams.call(this);this.trigger("raven.dialog.apply:presentation-filter.flatten-requirements")},applyGrouping:function(){m.call(this);RAVEN.Component.ReportFilter.prototype.closeDialogAndSyncURLQueryParams.call(this);this.trigger("raven.dialog.apply:grouping-filter")},closeScopeDialog:function(){closeDialogGeneric("#raven-scope-inline-dialog")},resetScopeAnalysis:function(){resetScopeValuesGeneric(this.versionPicker,this.environmentPicker,this.testPlanPicker);renderScopeParametersGeneric(this.execScope,this.versionName,this.testPlan,this.environmentName)},clickTitleScopeNotSelected:function(r){toggleScope(r.currentTarget);r.stopPropagation()}});function f(t,s){var r=RAVEN.Report.renderPeriodField({dailyReportToday:t,userPreferences:s});i("#historical-coverage-chart-section").empty();i("#historical-coverage-chart-section").html(r)}function a(){var r=this;i("#raven-requirement-coverage-form").on("submit",function(t){t.preventDefault()});var s=i("#raven-report-analysis-version-select");this.versionPicker=createVersionScopePicker(s);this.testPlanPicker=h(i("#raven-report-analysis-test-plan-select"));i("#raven-report-analysis-test-plan-select-field").attr("placeholder","Choose Test Plan Key");this.environmentPicker=createEnvironmentSingleSelectPicker(i("#raven-report-analysis-environment-select"));this.groupingFieldPicker=e(i("#raven-grouping-field-select"));d();Calendar.setup({firstDay:1,inputField:"historic-chart-from",button:"historic-chart-from-trigger",singleClick:true,showsTime:false,useISO8601WeekNumbers:false,ifFormat:"%Y-%m-%d",onUpdate:i.proxy(r.onHistoricChartPeriodUpdate,r)});Calendar.setup({firstDay:1,inputField:"historic-chart-to",button:"historic-chart-to-trigger",singleClick:true,showsTime:false,useISO8601WeekNumbers:false,ifFormat:"%Y-%m-%d",onUpdate:i.proxy(r.onHistoricChartPeriodUpdate,r)})}function e(r){return new RAVEN.SubtleSelect({element:r,showDropdownButton:false,revertOnInvalid:true})}function h(r){return new AJS.SingleSelect({element:r,showDropdownButton:true,submitInputVal:true,noQueryNoRequest:false,revertOnInvalid:true,loadOnInit:true,ajaxOptions:{query:true,url:contextPath+"/rest/raven/1.0/issue/picker?issueType=TESTPLAN",formatResponse:function(t){var u=t.sections[0];var s=new AJS.GroupDescriptor({weight:0,id:u.id+"-opt-group",replace:true,label:u.label+"("+u.sub+")"});i(u.issues).each(function(w,v){var x=new AJS.ItemDescriptor({value:v.key,label:v.key+" - "+v.summaryText,title:v.summary,icon:contextPath+v.img,allowDuplicate:false,});s.addItem(x)});return[s]}}})}function d(r){var s="/rest/gadget/1.0/pickers/filters";i(".raven-default-filter-picker",r).each(function(){var v=i(this);if(v.data("aui-ss")){return}var t={showAvatar:true},w=v.data("inputValue");var u=new AJS.SingleSelect({element:v,submitInputVal:true,showDropdownButton:!v.data("show-dropdown-button"),errorMessage:AJS.format("filters.picker.invalid.filter","'{0}'"),ajaxOptions:{url:contextPath+s,query:true,data:t,formatResponse:function(x){var y=[];if(x.filters){i.each(i(x.filters),function(z,A){y[z]=new AJS.ItemDescriptor({value:A.id,label:A.name})})}return y}},inputText:w});v.data("field-support-obj",u);u.setFieldWidth(500)})}function p(s){var u=""+(s.getMonth()+1),r=""+s.getDate(),t=s.getFullYear();if(u.length<2){u="0"+u}if(r.length<2){r="0"+r}return[t,u,r].join("-")}function q(){return !i("#hierarchical-requirements-option").hasClass("checked")}function n(){var v=this.getCurrentValues();this.execScope=getExecutionScope();v[l.EXEC_SCOPE]=this.execScope;if(this.execScope===RAVEN.ReportsContants.TESTPLAN_NAME){this.removeFilterValue(l.VERSION);var u=getGenericSelectValue("#raven-report-analysis-test-plan-select");if(u){this.testPlan=u;v[l.TEST_PLAN]=u}else{this.removeFilterValue(l.TEST_PLAN)}}else{this.removeFilterValue(l.TEST_PLAN);var t=getVersionGeneric(this.versionPicker);if(t!=null){var s=t.value;if(s&&s!="0"){v[l.VERSION]=s}else{this.removeFilterValue(l.VERSION)}this.versionName=t.label}}var r=getEnvironmentNameGeneric(this.execScope,this.environmentPicker);if(r!=null){v[l.ENVIRONMENT]=r.value;this.environmentName=r.label}else{this.removeFilterValue(l.ENVIRONMENT)}}function b(){this.getCurrentValues()[l.FLATTEN_REQUIREMENTS]=q()}function m(){if(this.groupingFieldPicker.getSelectedDescriptor()){this.getCurrentValues()[l.GROUPING_FIELD]=this.groupingFieldPicker.getSelectedDescriptor().properties.value}else{this.removeFilterValue(l.GROUPING_FIELD)}}function j(){this.getCurrentValues()[l.FROM_DATE]=p(new Date(i("#historic-chart-from").val()));this.getCurrentValues()[l.TO_DATE]=p(new Date(i("#historic-chart-to").val()))}function g(){var r=this;k();i.each(this.unscopedEvents,function(u,v){var t=u.substring(0,u.indexOf(" "));var s=u.substring(u.indexOf(" ")+1);i(document).on(t,s,i.proxy(r[v],r))})}function k(){i(document).off(".raven.report.historicalcoverage-filter")}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-traceability-report-plugin-resources', location = 'js/report/analytics/report-analytics.js' */
RAVEN.namespace("RAVEN.report.analytics");RAVEN.report.analytics.reportVisit=function(b){if($("#analytics-enabled").val()==="true"||$("#analytics-enabled").val()===true){var a=contextPath+"/rest/raven/1.0/xrayanalytics/report"+b;$.ajax({url:a,type:"HEAD",cache:false,success:function(){console.debug("visit reported to Xray analytics")},error:function(){console.debug("Failed to report visit to Xray analytics")}})}};RAVEN.report.analytics.endpoints=function(){const a={TEST_EXECUTION:"/visit/testexecution",TEST_PLANS:"/visit/testplans",TEST_RUNS:"/visit/testruns",TRACEABILITY:"/visit/traceability",HISTORICAL_REQ:"/visit/historicalreq",OVERALL_REQ:"/visit/overallreq"};return a};;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/store-1.3.1.js' */
(function(){var l={},h=window,k=h.document,c="localStorage",n="globalStorage",d="__storejs__",g;l.disabled=false;l.set=function(e,o){};l.get=function(e){};l.remove=function(e){};l.clear=function(){};l.transact=function(e,o){var p=l.get(e);if(typeof p=="undefined"){p={}}o(p);l.set(e,p)};l.serialize=function(e){return JSON.stringify(e)};l.deserialize=function(e){if(typeof e!="string"){return undefined}return JSON.parse(e)};function b(){try{return(c in h&&h[c])}catch(e){return false}}function m(){try{return(n in h&&h[n]&&h[n][h.location.hostname])}catch(e){return false}}if(b()){g=h[c];l.set=function(e,o){if(o===undefined){return l.remove(e)}g.setItem(e,l.serialize(o))};l.get=function(e){return l.deserialize(g.getItem(e))};l.remove=function(e){g.removeItem(e)};l.clear=function(){g.clear()}}else{if(m()){g=h[n][h.location.hostname];l.set=function(e,o){if(o===undefined){return l.remove(e)}g[e]=l.serialize(o)};l.get=function(e){return l.deserialize(g[e]&&g[e].value)};l.remove=function(e){delete g[e]};l.clear=function(){for(var e in g){delete g[e]}}}else{if(k.documentElement.addBehavior){var j,f;try{f=new ActiveXObject("htmlfile");f.open();f.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>');f.close();j=f.w.frames[0].document;g=j.createElement("div")}catch(i){g=k.createElement("div");j=k.body}function a(e){return function(){var p=Array.prototype.slice.call(arguments,0);p.unshift(g);j.appendChild(g);g.addBehavior("#default#userData");g.load(c);var o=e.apply(l,p);j.removeChild(g);return o}}l.set=a(function(p,e,o){if(o===undefined){return l.remove(e)}p.setAttribute(e,l.serialize(o));p.save(c)});l.get=a(function(o,e){return l.deserialize(o.getAttribute(e))});l.remove=a(function(o,e){o.removeAttribute(e);o.save(c)});l.clear=a(function(q){var o=q.XMLDocument.documentElement.attributes;q.load(c);for(var p=0,e;e=o[p];p++){q.removeAttribute(e.name)}q.save(c)})}}}try{l.set(d,d);if(l.get(d)!=d){l.disabled=true}l.remove(d)}catch(i){l.disabled=true}if(typeof module!="undefined"){module.exports=l}else{if(typeof define==="function"&&define.amd){define(l)}else{this.store=l}}})();;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/page-visibility.js' */
define("atlassian/analytics/page-visibility",function(){var a=(document.hidden!==undefined);var b={supported:a,isHidden:function(){return a?document.hidden:false}};return b});;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/user-activity-xhr-header.js' */
define("atlassian/analytics/user-activity-xhr-header",["atlassian/analytics/page-visibility"],function(c){var e="x-atlassian-mau-ignore";var d=XMLHttpRequest.prototype.send;var a=window.fetch;var b=false;return{install:function(){if(!b&&c.supported){XMLHttpRequest.prototype.send=function(){if(c.isHidden()){this.setRequestHeader(e,c.isHidden())}d.apply(this,arguments)};if(a){window.fetch=function(f,i){var g=i||{};var h=g.headers;if(c.isHidden()){g.headers=(h)?new Headers(h):new Headers();g.headers.append(e,c.isHidden())}return a.call(this,f,g)}}b=true}},uninstall:function(){if(b){XMLHttpRequest.prototype.send=d;if(a){window.fetch=a}}b=false}}});require("atlassian/analytics/user-activity-xhr-header").install();;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/atlassian-analytics.js' */
(function(d){var q=AJS.$.ajax;var l="atlassian-analytics";var j=typeof AJS.contextPath==="function"?AJS.contextPath():"";var p=null;var m=null;var g=null;var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(z){var y=Math.random()*16|0,x=z=="x"?y:(y&3|8);return x.toString(16)});var t=function(){var x="unknown";if(document.body.id=="jira"){x="jira"}else{if(document.body.id=="com-atlassian-confluence"){x="confluence"}}m=l+"."+x;g=m+".lock"};var f=function(){if(store.get(g)){return false}store.set(g,r);return(store.get(g)===r)};var u=function(){store.set(g,null)};var i=function(){var y=[],A,B,x,z;if(AJS.EventQueue.length==0){return}y=store.get(m)||y;for(x=0,z=AJS.EventQueue.length;x<z;++x){B=AJS.EventQueue[x];if(B.name){A={name:B.name,properties:B.properties,time:B.time||0};y.push(A)}}AJS.EventQueue.length=0;store.set(m,y)};var v=0;var a=function(x){return Math.min(5000*Math.pow(2,x),5*60*1000)};var e=0;var h=function(){var A;function y(){setTimeout(h,a(v=0))}function x(){setTimeout(h,a(++v))}if(!f()){++e;if(e<20){return y()}}else{e=0}try{i();A=store.get(m);if(!A||!A.length){return y()}store.remove(m);if(!o(A)){return y()}var B=new Date().getTime();for(var z=0;z<A.length;z++){if(A[z].time>0){A[z].timeDelta=A[z].time-B}else{A[z].timeDelta=z-A.length}delete A[z].time}p=q({type:"POST",url:j+"/rest/analytics/1.0/publish/bulk",data:JSON.stringify(A),contentType:"application/json",dataType:"json"});p.fail(function(){AJS.EventQueue.concat(A);i();x()});p.done(function(){y()})}finally{u()}};var o=function(z){for(var y=z.length-1;y>=0;y--){var B="";var A=z[y];var x=A.properties;if(typeof A.name==="undefined"){B="you must provide a name for the event."}else{if(typeof x!=="undefined"&&x!==null){if(x.constructor!==Object){B="properties must be an object with key value pairs."}else{b(x)}}}if(B!==""){AJS.log("WARN: Invalid analytics event detected and ignored, "+B+"\nEvent: "+JSON.stringify(A));z.splice(y,1)}}return z.length};var b=function(z){for(var y in z){if(z.hasOwnProperty(y)){var x=z[y];if(c(x)&&k(x)){}else{if(c(x)&&x.toString){z[y]=x.toString()}else{z[y]=""}}}}};function c(x){return typeof x!=="undefined"&&x!==null}function k(x){return typeof x==="number"||typeof x==="string"||typeof x==="boolean"}var n=function(){if(p&&!(p.state()==="resolved"||p.state()==="rejected")){p.abort()}};AJS.EventQueue=AJS.EventQueue||[];var s=Array.prototype.push;AJS.EventQueue.push=function(x){x.time=new Date().getTime();s.call(AJS.EventQueue,x)};AJS.toInit(function(){t();setTimeout(h,500);w()});d(window).unload(function(){n();i()});AJS.Analytics={triggerPrivacyPolicySafeEvent:function(x,y){AJS.log("WARN: 'triggerPrivacyPolicySafeEvent' has been deprecated");AJS.EventQueue.push({name:x,properties:y})}};AJS.bind("analytics",function(x,y){AJS.EventQueue.push({name:y.name,properties:y.data})});AJS.bind("analyticsEvent",function(x,y){AJS.EventQueue.push({name:y.name,properties:y.data})});var w=function(){if(window.location.pathname.indexOf("/secure/admin/ViewApplicationProperties")>-1){AJS.$("[data-property-id='analytics-enabled']").remove()}else{if(window.location.pathname.indexOf("/secure/admin/EditApplicationProperties")>-1){var y=AJS.$(":contains(Enable Atlassian analytics)");if(y.size()>0){var x=y[y.size()-2];if(x){x.remove()}}}}}}(AJS.$));;
;
/* module-key = 'com.atlassian.analytics.analytics-client:policy-update-init', location = 'js/policy-update-init.js' */
AJS.toInit(function(){var a=WRM.data.claim("com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider");if(a){WRM.require("wrc!com.atlassian.analytics.analytics-client:policy-update")}});;
;
/* module-key = 'com.atlassian.analytics.analytics-client:programmatic-analytics-init', location = 'js/programmatic-analytics-init.js' */
(function(){var a=WRM.data.claim("com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider");if(a){WRM.require("wrc!com.atlassian.analytics.analytics-client:programmatic-analytics")}}());;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:application-header-administration-cog-resource', location = 'header/cog.js' */
var NavLinks=(function(a){a.ApplicationHeader=function(b){b.Cog=(function(){var c=function(){var d=AJS.$("#system-admin-menu-content");if(d.length>0){return d}var e=AJS.$("#admin-menu-link-content");if(e.length>0){return e}return AJS.$("#bamboo\\.global\\.header-admin\\.menu")};return{getDropdown:c}}());return b}(a.ApplicationHeader||{});return a}(NavLinks||{}));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminshortcuts.soy' */
// This file was automatically generated from adminshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.adminshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.adminshortcuts == 'undefined') { navlinks.templates.adminshortcuts = {}; }


navlinks.templates.adminshortcuts.section = function(opt_data, opt_ignored) {
  var param5 = '<ul class="aui-list-truncate">';
  var linkList7 = opt_data.links;
  var linkListLen7 = linkList7.length;
  for (var linkIndex7 = 0; linkIndex7 < linkListLen7; linkIndex7++) {
    var linkData7 = linkList7[linkIndex7];
    param5 += '<li><a href="' + soy.$$escapeHtml(linkData7.link) + '">' + soy.$$escapeHtml(linkData7.label) + '</a></li>';
  }
  param5 += '</ul>';
  var output = '' + aui.dropdown2.section({id: 'nl-remote-admin-section', label: 'Other applications', content: param5});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.adminshortcuts.section.soyTemplateName = 'navlinks.templates.adminshortcuts.section';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminnavlinks.js' */
var NavLinks=(function(a){a.AdminShortcuts=(function(){var c=function(){return AJS.$.ajax({url:AJS.contextPath()+"/rest/menu/latest/admin",cache:false,dataType:"json"})};var b=function(){AJS.$("#nl-remote-admin-section").on("click","a",function(){NL.trackEvent("remoteAdminItemSelected",NL.getCurrentApplication(),$(this).attr("href"))})};return{render:function(){c().done(function(e){e=_.reject(e,function(f){return f.local===true});if(e.length){var d=navlinks.templates.adminshortcuts.section({links:e});a.ApplicationHeader.Cog.getDropdown().append(d);b()}})}}}());return a}(NavLinks||{}));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts', location = 'adminshortcuts/adminshortcuts-cdn.js' */
AJS.toInit(function(){if(AJS.DarkFeatures&&AJS.DarkFeatures.isEnabled("rotp.admin.shortcuts")){NavLinks.AdminShortcuts.render()}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:atlassian-ui-popup-display-controller', location = 'popups/DisplayController.js' */
AJS.Popups=AJS.Popups||{};AJS.Popups.DisplayController=function(){var c=[];var a=false;var b=false;AJS.toInit(function(){setTimeout(function(){AJS.Popups.DisplayController.render()},0)});return{request:function(d){c.push(d);if(a&&b===false){this.render()}},render:function(){c.sort(function(e,d){return e.weight-d.weight});a=true;if(c.length!==0){b=true;c[0].show()}}}}();;
;
/* module-key = 'com.atlassian.plugin.jslibs:moment-2.22.2', location = 'libs/moment/2.22.2/moment-2.22.2.js' */
'use strict';(function(g){define("atlassian/libs/moment-2.22.2",function(){var A={};g.call(A);return A.moment})})(function(){(function(g,A){g.moment=A()})(this,function(){function g(){return dc.apply(null,arguments)}function A(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function ma(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}function B(a){return void 0===a}function fa(a){return"number"===typeof a||"[object Number]"===Object.prototype.toString.call(a)}
function wa(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function mb(a,b){var c=[],d;for(d=0;d<a.length;++d)c.push(b(a[d],d));return c}function v(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function S(a,b){for(var c in b)v(b,c)&&(a[c]=b[c]);v(b,"toString")&&(a.toString=b.toString);v(b,"valueOf")&&(a.valueOf=b.valueOf);return a}function K(a,b,c,d){return nb(a,b,c,d,!0).utc()}function n(a){null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,
charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1});return a._pf}function Oa(a){if(null==a._isValid){var b=n(a),c=ec.call(b.parsedDateParts,function(a){return null!=a});c=!isNaN(a._d.getTime())&&0>b.overflow&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.weekdayMismatch&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);a._strict&&(c=c&&0===b.charsLeftOver&&0===
b.unusedTokens.length&&void 0===b.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(a))return c;a._isValid=c}return a._isValid}function xa(a){var b=K(NaN);null!=a?S(n(b),a):n(b).userInvalidated=!0;return b}function Pa(a,b){var c;B(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject);B(b._i)||(a._i=b._i);B(b._f)||(a._f=b._f);B(b._l)||(a._l=b._l);B(b._strict)||(a._strict=b._strict);B(b._tzm)||(a._tzm=b._tzm);B(b._isUTC)||(a._isUTC=b._isUTC);B(b._offset)||(a._offset=b._offset);B(b._pf)||(a._pf=
n(b));B(b._locale)||(a._locale=b._locale);if(0<Qa.length)for(c=0;c<Qa.length;c++){var d=Qa[c];var f=b[d];B(f)||(a[d]=f)}return a}function na(a){Pa(this,a);this._d=new Date(null!=a._d?a._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===Ra&&(Ra=!0,g.updateOffset(this),Ra=!1)}function T(a){return a instanceof na||null!=a&&null!=a._isAMomentObject}function E(a){return 0>a?Math.ceil(a)||0:Math.floor(a)}function l(a){a=+a;var b=0;0!==a&&isFinite(a)&&(b=E(a));return b}function ob(a,b,c){var d=
Math.min(a.length,b.length),f=Math.abs(a.length-b.length),U=0,h;for(h=0;h<d;h++)(c&&a[h]!==b[h]||!c&&l(a[h])!==l(b[h]))&&U++;return U+f}function pb(a){!1===g.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function F(a,b){var c=!0;return S(function(){null!=g.deprecationHandler&&g.deprecationHandler(null,a);if(c){for(var d=[],f,U=0;U<arguments.length;U++){f="";if("object"===typeof arguments[U]){f+="\n["+U+"] ";for(var h in arguments[0])f+=
h+": "+arguments[0][h]+", ";f=f.slice(0,-2)}else f=arguments[U];d.push(f)}pb(a+"\nArguments: "+Array.prototype.slice.call(d).join("")+"\n"+Error().stack);c=!1}return b.apply(this,arguments)},b)}function qb(a,b){null!=g.deprecationHandler&&g.deprecationHandler(a,b);rb[a]||(pb(b),rb[a]=!0)}function L(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function sb(a,b){var c=S({},a),d;for(d in b)v(b,d)&&(ma(a[d])&&ma(b[d])?(c[d]={},S(c[d],a[d]),S(c[d],b[d])):null!=
b[d]?c[d]=b[d]:delete c[d]);for(d in a)v(a,d)&&!v(b,d)&&ma(a[d])&&(c[d]=S({},c[d]));return c}function Sa(a){null!=a&&this.set(a)}function C(a,b){var c=a.toLowerCase();oa[c]=oa[c+"s"]=oa[b]=a}function G(a){return"string"===typeof a?oa[a]||oa[a.toLowerCase()]:void 0}function Ta(a){var b={},c,d;for(d in a)v(a,d)&&(c=G(d))&&(b[c]=a[d]);return b}function fc(a){var b=[],c;for(c in a)b.push({unit:c,priority:z[c]});b.sort(function(a,b){return a.priority-b.priority});return b}function O(a,b,c){var d=""+Math.abs(a);
return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,b-d.length)).toString().substr(1)+d}function m(a,b,c,d){var f=d;"string"===typeof d&&(f=function(){return this[d]()});a&&(ha[a]=f);b&&(ha[b[0]]=function(){return O(f.apply(this,arguments),b[1],b[2])});c&&(ha[c]=function(){return this.localeData().ordinal(f.apply(this,arguments),a)})}function gc(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function hc(a){var b=a.match(tb),c;var d=0;for(c=b.length;d<c;d++)b[d]=ha[b[d]]?ha[b[d]]:
gc(b[d]);return function(d){var f="",h;for(h=0;h<c;h++)f+=L(b[h])?b[h].call(d,a):b[h];return f}}function ya(a,b){if(!a.isValid())return a.localeData().invalidDate();b=ub(b,a.localeData());Ua[b]=Ua[b]||hc(b);return Ua[b](a)}function ub(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(za.lastIndex=0;0<=d&&za.test(a);)a=a.replace(za,c),za.lastIndex=0,--d;return a}function k(a,b,c){Va[a]=L(b)?b:function(a,f){return a&&c?c:b}}function ic(a,b){return v(Va,a)?Va[a](b._strict,b._locale):new RegExp(jc(a))}
function jc(a){return aa(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,c,d,f,e){return c||d||f||e}))}function aa(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function r(a,b){var c,d=b;"string"===typeof a&&(a=[a]);fa(b)&&(d=function(a,c){c[b]=l(a)});for(c=0;c<a.length;c++)Wa[a[c]]=d}function pa(a,b){r(a,function(a,d,f,e){f._w=f._w||{};b(a,f._w,f,e)})}function V(a){return 0===a%4&&0!==a%100||0===a%400}function ia(a,b){return function(c){return null!=c?(vb(this,
a,c),g.updateOffset(this,b),this):Aa(this,a)}}function Aa(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function vb(a,b,c){if(a.isValid()&&!isNaN(c))if("FullYear"===b&&V(a.year())&&1===a.month()&&29===a.date())a._d["set"+(a._isUTC?"UTC":"")+b](c,a.month(),Ba(c,a.month()));else a._d["set"+(a._isUTC?"UTC":"")+b](c)}function Ba(a,b){if(isNaN(a)||isNaN(b))return NaN;var c=(b%12+12)%12;return 1===c?V(a+(b-c)/12)?29:28:31-c%7%2}function wb(a,b){if(!a.isValid())return a;if("string"===typeof b)if(/^\d+$/.test(b))b=
l(b);else if(b=a.localeData().monthsParse(b),!fa(b))return a;var c=Math.min(a.date(),Ba(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a}function xb(a){return null!=a?(wb(this,a),g.updateOffset(this,!0),this):Aa(this,"Month")}function yb(){function a(a,b){return b.length-a.length}var b=[],c=[],d=[],f;for(f=0;12>f;f++){var e=K([2E3,f]);b.push(this.monthsShort(e,""));c.push(this.months(e,""));d.push(this.months(e,""));d.push(this.monthsShort(e,""))}b.sort(a);c.sort(a);d.sort(a);for(f=
0;12>f;f++)b[f]=aa(b[f]),c[f]=aa(c[f]);for(f=0;24>f;f++)d[f]=aa(d[f]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+d.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+c.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+b.join("|")+")","i")}function kc(a,b,c,d,f,e,h){b=new Date(a,b,c,d,f,e,h);100>a&&0<=a&&isFinite(b.getFullYear())&&b.setFullYear(a);return b}function qa(a){var b=new Date(Date.UTC.apply(null,arguments));100>a&&0<=a&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a);
return b}function Ca(a,b,c){c=7+b-c;return-((7+qa(a,0,c).getUTCDay()-b)%7)+c-1}function zb(a,b,c,d,f){c=(7+c-d)%7;d=Ca(a,d,f);d=1+7*(b-1)+c+d;0>=d?(b=a-1,a=(V(b)?366:365)+d):d>(V(a)?366:365)?(b=a+1,a=d-(V(a)?366:365)):(b=a,a=d);return{year:b,dayOfYear:a}}function ra(a,b,c){var d=Ca(a.year(),b,c);d=Math.floor((a.dayOfYear()-d-1)/7)+1;1>d?(a=a.year()-1,b=d+ba(a,b,c)):d>ba(a.year(),b,c)?(b=d-ba(a.year(),b,c),a=a.year()+1):(a=a.year(),b=d);return{week:b,year:a}}function ba(a,b,c){var d=Ca(a,b,c);b=Ca(a+
1,b,c);return((V(a)?366:365)-d+b)/7}function lc(a,b,c){var d;a=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;7>d;++d){var f=K([2E3,1]).day(d);this._minWeekdaysParse[d]=this.weekdaysMin(f,"").toLocaleLowerCase();this._shortWeekdaysParse[d]=this.weekdaysShort(f,"").toLocaleLowerCase();this._weekdaysParse[d]=this.weekdays(f,"").toLocaleLowerCase()}if(c)b="dddd"===b?w.call(this._weekdaysParse,a):"ddd"===b?w.call(this._shortWeekdaysParse,
a):w.call(this._minWeekdaysParse,a);else if("dddd"===b){b=w.call(this._weekdaysParse,a);if(-1!==b)return b;b=w.call(this._shortWeekdaysParse,a);if(-1!==b)return b;b=w.call(this._minWeekdaysParse,a)}else if("ddd"===b){b=w.call(this._shortWeekdaysParse,a);if(-1!==b)return b;b=w.call(this._weekdaysParse,a);if(-1!==b)return b;b=w.call(this._minWeekdaysParse,a)}else{b=w.call(this._minWeekdaysParse,a);if(-1!==b)return b;b=w.call(this._weekdaysParse,a);if(-1!==b)return b;b=w.call(this._shortWeekdaysParse,
a)}return-1!==b?b:null}function Xa(){function a(a,b){return b.length-a.length}var b=[],c=[],d=[],f=[],e;for(e=0;7>e;e++){var h=K([2E3,1]).day(e);var g=this.weekdaysMin(h,"");var k=this.weekdaysShort(h,"");h=this.weekdays(h,"");b.push(g);c.push(k);d.push(h);f.push(g);f.push(k);f.push(h)}b.sort(a);c.sort(a);d.sort(a);f.sort(a);for(e=0;7>e;e++)c[e]=aa(c[e]),d[e]=aa(d[e]),f[e]=aa(f[e]);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+f.join("|")+")","i");this._weekdaysStrictRegex=
new RegExp("^("+d.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+c.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+b.join("|")+")","i")}function Ya(){return this.hours()%12||12}function Ab(a,b){m(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Bb(a,b){return b._meridiemParse}function Cb(a){return a?a.toLowerCase().replace("_","-"):a}function Da(a){var b=null;if(!x[a]&&"undefined"!==typeof module&&module&&module.exports)try{b=
sa._abbr,require("./locale/"+a),ja(b)}catch(c){}return x[a]}function ja(a,b){a&&((b=B(b)?W(a):Za(a,b))?sa=b:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+a+" not found. Did you forget to load it?"));return sa._abbr}function Za(a,b){if(null!==b){var c=Db;b.abbr=a;if(null!=x[a])qb("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),
c=x[a]._config;else if(null!=b.parentLocale)if(null!=x[b.parentLocale])c=x[b.parentLocale]._config;else if(c=Da(b.parentLocale),null!=c)c=c._config;else return ta[b.parentLocale]||(ta[b.parentLocale]=[]),ta[b.parentLocale].push({name:a,config:b}),null;x[a]=new Sa(sb(c,b));ta[a]&&ta[a].forEach(function(a){Za(a.name,a.config)});ja(a);return x[a]}delete x[a];return null}function W(a){var b;a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr);if(!a)return sa;if(!A(a)){if(b=Da(a))return b;a=[a]}a:{b=0;for(var c,
d,f,e;b<a.length;){e=Cb(a[b]).split("-");c=e.length;for(d=(d=Cb(a[b+1]))?d.split("-"):null;0<c;){if(f=Da(e.slice(0,c).join("-"))){a=f;break a}if(d&&d.length>=c&&ob(e,d,!0)>=c-1)break;c--}b++}a=sa}return a}function $a(a){var b;(b=a._a)&&-2===n(a).overflow&&(b=0>b[P]||11<b[P]?P:1>b[M]||b[M]>Ba(b[H],b[P])?M:0>b[y]||24<b[y]||24===b[y]&&(0!==b[I]||0!==b[Q]||0!==b[ca])?y:0>b[I]||59<b[I]?I:0>b[Q]||59<b[Q]?Q:0>b[ca]||999<b[ca]?ca:-1,n(a)._overflowDayOfYear&&(b<H||b>M)&&(b=M),n(a)._overflowWeeks&&-1===b&&
(b=mc),n(a)._overflowWeekday&&-1===b&&(b=nc),n(a).overflow=b);return a}function ka(a,b,c){return null!=a?a:null!=b?b:c}function ab(a){var b=[];if(!a._d){var c=new Date(g.now());c=a._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()];if(a._w&&null==a._a[M]&&null==a._a[P]){var d=a._w;if(null!=d.GG||null!=d.W||null!=d.E){var f=1;var e=4;var h=ka(d.GG,a._a[H],ra(u(),1,4).year);var k=ka(d.W,1);var m=ka(d.E,1);if(1>m||7<m)var l=!0}else if(f=a._locale._week.dow,
e=a._locale._week.doy,k=ra(u(),f,e),h=ka(d.gg,a._a[H],k.year),k=ka(d.w,k.week),null!=d.d){if(m=d.d,0>m||6<m)l=!0}else if(null!=d.e){if(m=d.e+f,0>d.e||6<d.e)l=!0}else m=f;1>k||k>ba(h,f,e)?n(a)._overflowWeeks=!0:null!=l?n(a)._overflowWeekday=!0:(l=zb(h,k,m,f,e),a._a[H]=l.year,a._dayOfYear=l.dayOfYear)}if(null!=a._dayOfYear){l=ka(a._a[H],c[H]);if(a._dayOfYear>(V(l)?366:365)||0===a._dayOfYear)n(a)._overflowDayOfYear=!0;l=qa(l,0,a._dayOfYear);a._a[P]=l.getUTCMonth();a._a[M]=l.getUTCDate()}for(l=0;3>l&&
null==a._a[l];++l)a._a[l]=b[l]=c[l];for(;7>l;l++)a._a[l]=b[l]=null==a._a[l]?2===l?1:0:a._a[l];24===a._a[y]&&0===a._a[I]&&0===a._a[Q]&&0===a._a[ca]&&(a._nextDay=!0,a._a[y]=0);a._d=(a._useUTC?qa:kc).apply(null,b);b=a._useUTC?a._d.getUTCDay():a._d.getDay();null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm);a._nextDay&&(a._a[y]=24);a._w&&"undefined"!==typeof a._w.d&&a._w.d!==b&&(n(a).weekdayMismatch=!0)}}function Eb(a){var b;var c=a._i;var d=oc.exec(c)||pc.exec(c);if(d){n(a).iso=!0;c=0;for(b=
Ea.length;c<b;c++)if(Ea[c][1].exec(d[1])){var f=Ea[c][0];var e=!1!==Ea[c][2];break}if(null==f)a._isValid=!1;else{if(d[3]){c=0;for(b=bb.length;c<b;c++)if(bb[c][1].exec(d[3])){var h=(d[2]||" ")+bb[c][0];break}if(null==h){a._isValid=!1;return}}if(e||null==h){if(d[4])if(qc.exec(d[4]))var g="Z";else{a._isValid=!1;return}a._f=f+(h||"")+(g||"");cb(a)}else a._isValid=!1}}else a._isValid=!1}function Fb(a){var b=rc.exec(a._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,
""));if(b){var c=b[3],d=b[2],f=b[5],e=b[6],h=b[7],g=parseInt(b[4],10);c=[49>=g?2E3+g:999>=g?1900+g:g,Gb.indexOf(c),parseInt(d,10),parseInt(f,10),parseInt(e,10)];h&&c.push(parseInt(h,10));a:{if(h=b[1])if(h=Hb.indexOf(h),d=(new Date(c[0],c[1],c[2])).getDay(),h!==d){n(a).weekdayMismatch=!0;h=a._isValid=!1;break a}h=!0}h&&(a._a=c,(h=b[8])?b=sc[h]:b[9]?b=0:(b=parseInt(b[10],10),h=b%100,b=(b-h)/100*60+h),a._tzm=b,a._d=qa.apply(null,a._a),a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),n(a).rfc2822=!0)}else a._isValid=
!1}function tc(a){var b=uc.exec(a._i);null!==b?a._d=new Date(+b[1]):(Eb(a),!1===a._isValid&&(delete a._isValid,Fb(a),!1===a._isValid&&(delete a._isValid,g.createFromInputFallback(a))))}function cb(a){if(a._f===g.ISO_8601)Eb(a);else if(a._f===g.RFC_2822)Fb(a);else{a._a=[];n(a).empty=!0;var b=""+a._i,c,d,f=b.length,e=0;var h=ub(a._f,a._locale).match(tb)||[];for(c=0;c<h.length;c++){var k=h[c];if(d=(b.match(ic(k,a))||[])[0]){var l=b.substr(0,b.indexOf(d));0<l.length&&n(a).unusedInput.push(l);b=b.slice(b.indexOf(d)+
d.length);e+=d.length}if(ha[k]){if(d?n(a).empty=!1:n(a).unusedTokens.push(k),l=a,null!=d&&v(Wa,k))Wa[k](d,l._a,l,k)}else a._strict&&!d&&n(a).unusedTokens.push(k)}n(a).charsLeftOver=f-e;0<b.length&&n(a).unusedInput.push(b);12>=a._a[y]&&!0===n(a).bigHour&&0<a._a[y]&&(n(a).bigHour=void 0);n(a).parsedDateParts=a._a.slice(0);n(a).meridiem=a._meridiem;b=a._a;c=y;f=a._locale;h=a._a[y];e=a._meridiem;null!=e&&(null!=f.meridiemHour?h=f.meridiemHour(h,e):null!=f.isPM&&((f=f.isPM(e))&&12>h&&(h+=12),f||12!==h||
(h=0)));b[c]=h;ab(a);$a(a)}}function vc(a){if(!a._d){var b=Ta(a._i);a._a=mb([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)});ab(a)}}function Ib(a){var b=a._i,c=a._f;a._locale=a._locale||W(a._l);if(null===b||void 0===c&&""===b)return xa({nullInput:!0});"string"===typeof b&&(a._i=b=a._locale.preparse(b));if(T(b))return new na($a(b));if(wa(b))a._d=b;else if(A(c))if(0===a._f.length)n(a).invalidFormat=!0,a._d=new Date(NaN);else{for(b=0;b<a._f.length;b++){c=
0;var d=Pa({},a);null!=a._useUTC&&(d._useUTC=a._useUTC);d._f=a._f[b];cb(d);if(Oa(d)&&(c+=n(d).charsLeftOver,c+=10*n(d).unusedTokens.length,n(d).score=c,null==f||c<f)){var f=c;var e=d}}S(a,e||d)}else c?cb(a):wc(a);Oa(a)||(a._d=null);return a}function wc(a){var b=a._i;B(b)?a._d=new Date(g.now()):wa(b)?a._d=new Date(b.valueOf()):"string"===typeof b?tc(a):A(b)?(a._a=mb(b.slice(0),function(a){return parseInt(a,10)}),ab(a)):ma(b)?vc(a):fa(b)?a._d=new Date(b):g.createFromInputFallback(a)}function nb(a,b,
c,d,f){var e={};if(!0===c||!1===c)d=c,c=void 0;var h;if(h=ma(a))a:if(h=a,Object.getOwnPropertyNames)h=0===Object.getOwnPropertyNames(h).length;else{for(var g in h)if(h.hasOwnProperty(g)){h=!1;break a}h=!0}if(h||A(a)&&0===a.length)a=void 0;e._isAMomentObject=!0;e._useUTC=e._isUTC=f;e._l=c;e._i=a;e._f=b;e._strict=d;a=new na($a(Ib(e)));a._nextDay&&(a.add(1,"d"),a._nextDay=void 0);return a}function u(a,b,c,d){return nb(a,b,c,d,!1)}function Jb(a,b){var c;1===b.length&&A(b[0])&&(b=b[0]);if(!b.length)return u();
var d=b[0];for(c=1;c<b.length;++c)if(!b[c].isValid()||b[c][a](d))d=b[c];return d}function Fa(a){var b=Ta(a);a=b.year||0;var c=b.quarter||0,d=b.month||0,f=b.week||0,e=b.day||0,h=b.hour||0,g=b.minute||0,k=b.second||0,m=b.millisecond||0;a:{for(var n in b)if(-1===w.call(ua,n)||null!=b[n]&&isNaN(b[n])){b=!1;break a}n=!1;for(var p=0;p<ua.length;++p)if(b[ua[p]]){if(n){b=!1;break a}parseFloat(b[ua[p]])!==l(b[ua[p]])&&(n=!0)}b=!0}this._isValid=b;this._milliseconds=+m+1E3*k+6E4*g+36E5*h;this._days=+e+7*f;this._months=
+d+3*c+12*a;this._data={};this._locale=W();this._bubble()}function db(a){return a instanceof Fa}function eb(a){return 0>a?-1*Math.round(-1*a):Math.round(a)}function Kb(a,b){m(a,0,0,function(){var a=this.utcOffset(),d="+";0>a&&(a=-a,d="-");return d+O(~~(a/60),2)+b+O(~~a%60,2)})}function fb(a,b){a=(b||"").match(a);if(null===a)return null;a=((a[a.length-1]||[])+"").match(xc)||["-",0,0];b=+(60*a[1])+l(a[2]);return 0===b?0:"+"===a[0]?b:-b}function gb(a,b){return b._isUTC?(b=b.clone(),a=(T(a)||wa(a)?a.valueOf():
u(a).valueOf())-b.valueOf(),b._d.setTime(b._d.valueOf()+a),g.updateOffset(b,!1),b):u(a).local()}function Lb(){return this.isValid()?this._isUTC&&0===this._offset:!1}function J(a,b){var c=a;db(a)?c={ms:a._milliseconds,d:a._days,M:a._months}:fa(a)?(c={},b?c[b]=a:c.milliseconds=a):(b=yc.exec(a))?(c="-"===b[1]?-1:1,c={y:0,d:l(b[M])*c,h:l(b[y])*c,m:l(b[I])*c,s:l(b[Q])*c,ms:l(eb(1E3*b[ca]))*c}):(b=zc.exec(a))?(c="-"===b[1]?-1:1,c={y:da(b[2],c),M:da(b[3],c),w:da(b[4],c),d:da(b[5],c),h:da(b[6],c),m:da(b[7],
c),s:da(b[8],c)}):null==c?c={}:"object"===typeof c&&("from"in c||"to"in c)&&(b=u(c.from),c=u(c.to),b.isValid()&&c.isValid()?(c=gb(c,b),b.isBefore(c)?c=Mb(b,c):(c=Mb(c,b),c.milliseconds=-c.milliseconds,c.months=-c.months),b=c):b={milliseconds:0,months:0},c={},c.ms=b.milliseconds,c.M=b.months);c=new Fa(c);db(a)&&v(a,"_locale")&&(c._locale=a._locale);return c}function da(a,b){a=a&&parseFloat(a.replace(",","."));return(isNaN(a)?0:a)*b}function Mb(a,b){var c={milliseconds:0,months:0};c.months=b.month()-
a.month()+12*(b.year()-a.year());a.clone().add(c.months,"M").isAfter(b)&&--c.months;c.milliseconds=+b-+a.clone().add(c.months,"M");return c}function Nb(a,b){return function(c,d){if(null!==d&&!isNaN(+d)){qb(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");var f=c;c=d;d=f}c=J("string"===typeof c?+c:c,d);Ob(this,c,a);return this}}function Ob(a,b,c,d){var f=b._milliseconds,e=eb(b._days);
b=eb(b._months);a.isValid()&&(d=null==d?!0:d,b&&wb(a,Aa(a,"Month")+b*c),e&&vb(a,"Date",Aa(a,"Date")+e*c),f&&a._d.setTime(a._d.valueOf()+f*c),d&&g.updateOffset(a,e||b))}function hb(a,b){var c=12*(b.year()-a.year())+(b.month()-a.month()),d=a.clone().add(c,"months");0>b-d?(a=a.clone().add(c-1,"months"),b=(b-d)/(d-a)):(a=a.clone().add(c+1,"months"),b=(b-d)/(a-d));return-(c+b)||0}function Pb(a){if(void 0===a)return this._locale._abbr;a=W(a);null!=a&&(this._locale=a);return this}function Qb(){return this._locale}
function Ga(a,b){m(0,[a,a.length],0,b)}function Rb(a,b,c,d,f){if(null==a)return ra(this,d,f).year;var e=ba(a,d,f);b>e&&(b=e);a=zb(a,b,c,d,f);a=qa(a.year,0,a.dayOfYear);this.year(a.getUTCFullYear());this.month(a.getUTCMonth());this.date(a.getUTCDate());return this}function Ac(a,b){b[ca]=l(1E3*("0."+a))}function Sb(a){return a}function Ha(a,b,c,d){var f=W();b=K().set(d,b);return f[c](b,a)}function Tb(a,b,c){fa(a)&&(b=a,a=void 0);a=a||"";if(null!=b)return Ha(a,b,c,"month");var d=[];for(b=0;12>b;b++)d[b]=
Ha(a,b,c,"month");return d}function ib(a,b,c,d){"boolean"!==typeof a&&(c=b=a,a=!1);fa(b)&&(c=b,b=void 0);b=b||"";var f=W();a=a?f._week.dow:0;if(null!=c)return Ha(b,(c+a)%7,d,"day");f=[];for(c=0;7>c;c++)f[c]=Ha(b,(c+a)%7,d,"day");return f}function Ub(a,b,c,d){b=J(b,c);a._milliseconds+=d*b._milliseconds;a._days+=d*b._days;a._months+=d*b._months;return a._bubble()}function Vb(a){return 0>a?Math.floor(a):Math.ceil(a)}function X(a){return function(){return this.as(a)}}function ea(a){return function(){return this.isValid()?
this._data[a]:NaN}}function Bc(a,b,c,d,f){return f.relativeTime(b||1,!!c,a,d)}function la(a){return(0<a)-(0>a)||+a}function Ia(){if(!this.isValid())return this.localeData().invalidDate();var a=jb(this._milliseconds)/1E3,b=jb(this._days),c=jb(this._months);var d=E(a/60);var f=E(d/60);a%=60;d%=60;var e=E(c/12);c%=12;a=a?a.toFixed(3).replace(/\.?0+$/,""):"";var h=this.asSeconds();if(!h)return"P0D";var g=0>h?"-":"",k=la(this._months)!==la(h)?"-":"",l=la(this._days)!==la(h)?"-":"";h=la(this._milliseconds)!==
la(h)?"-":"";return g+"P"+(e?k+e+"Y":"")+(c?k+c+"M":"")+(b?l+b+"D":"")+(f||d||a?"T":"")+(f?h+f+"H":"")+(d?h+d+"M":"")+(a?h+a+"S":"")}var ec=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;d<c;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};var Qa=g.momentProperties=[],Ra=!1,rb={};g.suppressDeprecationWarnings=!1;g.deprecationHandler=null;var Cc=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)v(a,b)&&c.push(b);return c};var oa={},z=
{},tb=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,za=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ua={},ha={},Wb=/\d/,D=/\d\d/,Xb=/\d{3}/,kb=/\d{4}/,Ja=/[+-]?\d{6}/,t=/\d\d?/,Yb=/\d\d\d\d?/,Zb=/\d\d\d\d\d\d?/,Ka=/\d{1,3}/,lb=/\d{1,4}/,La=/[+-]?\d{1,6}/,Dc=/\d+/,Ma=/[+-]?\d+/,Ec=/Z|[+-]\d\d:?\d\d/gi,Na=/Z|[+-]\d\d(?::?\d\d)?/gi,va=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,
Va={},Wa={},H=0,P=1,M=2,y=3,I=4,Q=5,ca=6,mc=7,nc=8;m("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a});m(0,["YY",2],0,function(){return this.year()%100});m(0,["YYYY",4],0,"year");m(0,["YYYYY",5],0,"year");m(0,["YYYYYY",6,!0],0,"year");C("year","y");z.year=1;k("Y",Ma);k("YY",t,D);k("YYYY",lb,kb);k("YYYYY",La,Ja);k("YYYYYY",La,Ja);r(["YYYYY","YYYYYY"],H);r("YYYY",function(a,b){b[H]=2===a.length?g.parseTwoDigitYear(a):l(a)});r("YY",function(a,b){b[H]=g.parseTwoDigitYear(a)});r("Y",function(a,
b){b[H]=parseInt(a,10)});g.parseTwoDigitYear=function(a){return l(a)+(68<l(a)?1900:2E3)};var $b=ia("FullYear",!0);var w=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1};m("M",["MM",2],"Mo",function(){return this.month()+1});m("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)});m("MMMM",0,0,function(a){return this.localeData().months(this,a)});C("month","M");z.month=8;k("M",t);k("MM",t,D);k("MMM",function(a,
b){return b.monthsShortRegex(a)});k("MMMM",function(a,b){return b.monthsRegex(a)});r(["M","MM"],function(a,b){b[P]=l(a)-1});r(["MMM","MMMM"],function(a,b,c,d){d=c._locale.monthsParse(a,d,c._strict);null!=d?b[P]=d:n(c).invalidMonth=a});var ac=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Gb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");m("w",["ww",2],"wo","week");m("W",["WW",2],"Wo","isoWeek");C("week","w");C("isoWeek","W");z.week=5;z.isoWeek=5;k("w",t);k("ww",t,D);k("W",t);k("WW",t,D);pa(["w","ww",
"W","WW"],function(a,b,c,d){b[d.substr(0,1)]=l(a)});m("d",0,"do","day");m("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)});m("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)});m("dddd",0,0,function(a){return this.localeData().weekdays(this,a)});m("e",0,0,"weekday");m("E",0,0,"isoWeekday");C("day","d");C("weekday","e");C("isoWeekday","E");z.day=11;z.weekday=11;z.isoWeekday=11;k("d",t);k("e",t);k("E",t);k("dd",function(a,b){return b.weekdaysMinRegex(a)});k("ddd",
function(a,b){return b.weekdaysShortRegex(a)});k("dddd",function(a,b){return b.weekdaysRegex(a)});pa(["dd","ddd","dddd"],function(a,b,c,d){d=c._locale.weekdaysParse(a,d,c._strict);null!=d?b.d=d:n(c).invalidWeekday=a});pa(["d","e","E"],function(a,b,c,d){b[d]=l(a)});var Hb="Sun Mon Tue Wed Thu Fri Sat".split(" ");m("H",["HH",2],0,"hour");m("h",["hh",2],0,Ya);m("k",["kk",2],0,function(){return this.hours()||24});m("hmm",0,0,function(){return""+Ya.apply(this)+O(this.minutes(),2)});m("hmmss",0,0,function(){return""+
Ya.apply(this)+O(this.minutes(),2)+O(this.seconds(),2)});m("Hmm",0,0,function(){return""+this.hours()+O(this.minutes(),2)});m("Hmmss",0,0,function(){return""+this.hours()+O(this.minutes(),2)+O(this.seconds(),2)});Ab("a",!0);Ab("A",!1);C("hour","h");z.hour=13;k("a",Bb);k("A",Bb);k("H",t);k("h",t);k("k",t);k("HH",t,D);k("hh",t,D);k("kk",t,D);k("hmm",Yb);k("hmmss",Zb);k("Hmm",Yb);k("Hmmss",Zb);r(["H","HH"],y);r(["k","kk"],function(a,b,c){a=l(a);b[y]=24===a?0:a});r(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a);
c._meridiem=a});r(["h","hh"],function(a,b,c){b[y]=l(a);n(c).bigHour=!0});r("hmm",function(a,b,c){var d=a.length-2;b[y]=l(a.substr(0,d));b[I]=l(a.substr(d));n(c).bigHour=!0});r("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[y]=l(a.substr(0,d));b[I]=l(a.substr(d,2));b[Q]=l(a.substr(e));n(c).bigHour=!0});r("Hmm",function(a,b,c){c=a.length-2;b[y]=l(a.substr(0,c));b[I]=l(a.substr(c))});r("Hmmss",function(a,b,c){c=a.length-4;var d=a.length-2;b[y]=l(a.substr(0,c));b[I]=l(a.substr(c,2));b[Q]=l(a.substr(d))});
var Fc=ia("Hours",!0),Db={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",
hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:Gb,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:Hb,meridiemParse:/[ap]\.?m?\.?/i},x={},ta={},sa,oc=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
pc=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,qc=/Z|[+-]\d\d(?::?\d\d)?/,Ea=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],bb=
[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],uc=/^\/?Date\((\-?\d+)/i,rc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,sc={UT:0,GMT:0,EDT:-240,
EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};g.createFromInputFallback=F("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});g.ISO_8601=function(){};
g.RFC_2822=function(){};var Gc=F("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=u.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:xa()}),Hc=F("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=u.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:xa()}),ua="year quarter month week day hour minute second millisecond".split(" ");
Kb("Z",":");Kb("ZZ","");k("Z",Na);k("ZZ",Na);r(["Z","ZZ"],function(a,b,c){c._useUTC=!0;c._tzm=fb(Na,a)});var xc=/([\+\-]|\d\d)/gi;g.updateOffset=function(){};var yc=/^(\-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,zc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;J.fn=Fa.prototype;J.invalid=function(){return J(NaN)};var Ic=Nb(1,"add"),Jc=Nb(-1,"subtract");g.defaultFormat=
"YYYY-MM-DDTHH:mm:ssZ";g.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var bc=F("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});m(0,["gg",2],0,function(){return this.weekYear()%100});m(0,["GG",2],0,function(){return this.isoWeekYear()%100});Ga("gggg","weekYear");Ga("ggggg","weekYear");Ga("GGGG","isoWeekYear");Ga("GGGGG","isoWeekYear");C("weekYear",
"gg");C("isoWeekYear","GG");z.weekYear=1;z.isoWeekYear=1;k("G",Ma);k("g",Ma);k("GG",t,D);k("gg",t,D);k("GGGG",lb,kb);k("gggg",lb,kb);k("GGGGG",La,Ja);k("ggggg",La,Ja);pa(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=l(a)});pa(["gg","GG"],function(a,b,c,d){b[d]=g.parseTwoDigitYear(a)});m("Q",0,"Qo","quarter");C("quarter","Q");z.quarter=7;k("Q",Wb);r("Q",function(a,b){b[P]=3*(l(a)-1)});m("D",["DD",2],"Do","date");C("date","D");z.date=9;k("D",t);k("DD",t,D);k("Do",function(a,b){return a?
b._dayOfMonthOrdinalParse||b._ordinalParse:b._dayOfMonthOrdinalParseLenient});r(["D","DD"],M);r("Do",function(a,b){b[M]=l(a.match(t)[0])});var cc=ia("Date",!0);m("DDD",["DDDD",3],"DDDo","dayOfYear");C("dayOfYear","DDD");z.dayOfYear=4;k("DDD",Ka);k("DDDD",Xb);r(["DDD","DDDD"],function(a,b,c){c._dayOfYear=l(a)});m("m",["mm",2],0,"minute");C("minute","m");z.minute=14;k("m",t);k("mm",t,D);r(["m","mm"],I);var Kc=ia("Minutes",!1);m("s",["ss",2],0,"second");C("second","s");z.second=15;k("s",t);k("ss",t,
D);r(["s","ss"],Q);var Lc=ia("Seconds",!1);m("S",0,0,function(){return~~(this.millisecond()/100)});m(0,["SS",2],0,function(){return~~(this.millisecond()/10)});m(0,["SSS",3],0,"millisecond");m(0,["SSSS",4],0,function(){return 10*this.millisecond()});m(0,["SSSSS",5],0,function(){return 100*this.millisecond()});m(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});m(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});m(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});m(0,
["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});C("millisecond","ms");z.millisecond=16;k("S",Ka,Wb);k("SS",Ka,D);k("SSS",Ka,Xb);var Y;for(Y="SSSS";9>=Y.length;Y+="S")k(Y,Dc);for(Y="S";9>=Y.length;Y+="S")r(Y,Ac);var Mc=ia("Milliseconds",!1);m("z",0,0,"zoneAbbr");m("zz",0,0,"zoneName");var e=na.prototype;e.add=Ic;e.calendar=function(a,b){a=a||u();var c=gb(a,this).startOf("day");c=g.calendarFormat(this,c)||"sameElse";b=b&&(L(b[c])?b[c].call(this,a):b[c]);return this.format(b||this.localeData().calendar(c,
this,u(a)))};e.clone=function(){return new na(this)};e.diff=function(a,b,c){if(!this.isValid())return NaN;a=gb(a,this);if(!a.isValid())return NaN;var d=6E4*(a.utcOffset()-this.utcOffset());b=G(b);switch(b){case "year":b=hb(this,a)/12;break;case "month":b=hb(this,a);break;case "quarter":b=hb(this,a)/3;break;case "second":b=(this-a)/1E3;break;case "minute":b=(this-a)/6E4;break;case "hour":b=(this-a)/36E5;break;case "day":b=(this-a-d)/864E5;break;case "week":b=(this-a-d)/6048E5;break;default:b=this-
a}return c?b:E(b)};e.endOf=function(a){a=G(a);if(void 0===a||"millisecond"===a)return this;"date"===a&&(a="day");return this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")};e.format=function(a){a||(a=this.isUtc()?g.defaultFormatUtc:g.defaultFormat);a=ya(this,a);return this.localeData().postformat(a)};e.from=function(a,b){return this.isValid()&&(T(a)&&a.isValid()||u(a).isValid())?J({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};e.fromNow=function(a){return this.from(u(),
a)};e.to=function(a,b){return this.isValid()&&(T(a)&&a.isValid()||u(a).isValid())?J({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};e.toNow=function(a){return this.to(u(),a)};e.get=function(a){a=G(a);return L(this[a])?this[a]():this};e.invalidAt=function(){return n(this).overflow};e.isAfter=function(a,b){a=T(a)?a:u(a);if(!this.isValid()||!a.isValid())return!1;b=G(B(b)?"millisecond":b);return"millisecond"===b?this.valueOf()>a.valueOf():a.valueOf()<this.clone().startOf(b).valueOf()};
e.isBefore=function(a,b){a=T(a)?a:u(a);if(!this.isValid()||!a.isValid())return!1;b=G(B(b)?"millisecond":b);return"millisecond"===b?this.valueOf()<a.valueOf():this.clone().endOf(b).valueOf()<a.valueOf()};e.isBetween=function(a,b,c,d){d=d||"()";return("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))};e.isSame=function(a,b){a=T(a)?a:u(a);if(!this.isValid()||!a.isValid())return!1;b=G(b||"millisecond");if("millisecond"===b)return this.valueOf()===a.valueOf();
a=a.valueOf();return this.clone().startOf(b).valueOf()<=a&&a<=this.clone().endOf(b).valueOf()};e.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)};e.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)};e.isValid=function(){return Oa(this)};e.lang=bc;e.locale=Pb;e.localeData=Qb;e.max=Hc;e.min=Gc;e.parsingFlags=function(){return S({},n(this))};e.set=function(a,b){if("object"===typeof a){a=Ta(a);b=fc(a);for(var c=0;c<b.length;c++)this[b[c].unit](a[b[c].unit])}else if(a=
G(a),L(this[a]))return this[a](b);return this};e.startOf=function(a){a=G(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":case "date":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===a&&this.weekday(0);"isoWeek"===a&&this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this};e.subtract=Jc;e.toArray=function(){return[this.year(),this.month(),
this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};e.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};e.toDate=function(){return new Date(this.valueOf())};e.toISOString=function(a){if(!this.isValid())return null;var b=(a=!0!==a)?this.clone().utc():this;return 0>b.year()||9999<b.year()?ya(b,a?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):
L(Date.prototype.toISOString)?a?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",ya(b,"Z")):ya(b,a?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};e.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b="";this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",b="Z");a="["+a+'("]';var c=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY";return this.format(a+c+"-MM-DD[T]HH:mm:ss.SSS"+
(b+'[")]'))};e.toJSON=function(){return this.isValid()?this.toISOString():null};e.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};e.unix=function(){return Math.floor(this.valueOf()/1E3)};e.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};e.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};e.year=$b;e.isLeapYear=function(){return V(this.year())};e.weekYear=function(a){return Rb.call(this,
a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};e.isoWeekYear=function(a){return Rb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)};e.quarter=e.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)};e.month=xb;e.daysInMonth=function(){return Ba(this.year(),this.month())};e.week=e.weeks=function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")};e.isoWeek=e.isoWeeks=function(a){var b=
ra(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")};e.weeksInYear=function(){var a=this.localeData()._week;return ba(this.year(),a.dow,a.doy)};e.isoWeeksInYear=function(){return ba(this.year(),1,4)};e.date=cc;e.day=e.days=function(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=a){var c=this.localeData();"string"===typeof a&&(isNaN(a)?(a=c.weekdaysParse(a),a="number"===typeof a?a:null):a=parseInt(a,10));return this.add(a-b,"d")}return b};
e.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")};e.isoWeekday=function(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=this.localeData();a="string"===typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a;return this.day(this.day()%7?a:a-7)}return this.day()||7};e.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==a?b:
this.add(a-b,"d")};e.hour=e.hours=Fc;e.minute=e.minutes=Kc;e.second=e.seconds=Lc;e.millisecond=e.milliseconds=Mc;e.utcOffset=function(a,b,c){var d=this._offset||0,e;if(!this.isValid())return null!=a?this:NaN;if(null!=a){if("string"===typeof a){if(a=fb(Na,a),null===a)return this}else 16>Math.abs(a)&&!c&&(a*=60);!this._isUTC&&b&&(e=15*-Math.round(this._d.getTimezoneOffset()/15));this._offset=a;this._isUTC=!0;null!=e&&this.add(e,"m");d!==a&&(!b||this._changeInProgress?Ob(this,J(a-d,"m"),1,!1):this._changeInProgress||
(this._changeInProgress=!0,g.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?d:15*-Math.round(this._d.getTimezoneOffset()/15)};e.utc=function(a){return this.utcOffset(0,a)};e.local=function(a){this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};e.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var a=fb(Ec,this._i);null!=a?this.utcOffset(a):
this.utcOffset(0,!0)}return this};e.hasAlignedHourOffset=function(a){if(!this.isValid())return!1;a=a?u(a).utcOffset():0;return 0===(this.utcOffset()-a)%60};e.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};e.isLocal=function(){return this.isValid()?!this._isUTC:!1};e.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};e.isUtc=Lb;e.isUTC=Lb;e.zoneAbbr=function(){return this._isUTC?"UTC":""};e.zoneName=function(){return this._isUTC?
"Coordinated Universal Time":""};e.dates=F("dates accessor is deprecated. Use date instead.",cc);e.months=F("months accessor is deprecated. Use month instead",xb);e.years=F("years accessor is deprecated. Use year instead",$b);e.zone=F("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(a,b){return null!=a?("string"!==typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()});e.isDSTShifted=F("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",
function(){if(!B(this._isDSTShifted))return this._isDSTShifted;var a={};Pa(a,this);a=Ib(a);if(a._a){var b=a._isUTC?K(a._a):u(a._a);this._isDSTShifted=this.isValid()&&0<ob(a._a,b.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var q=Sa.prototype;q.calendar=function(a,b,c){a=this._calendar[a]||this._calendar.sameElse;return L(a)?a.call(b,c):a};q.longDateFormat=function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];if(b||!c)return b;this._longDateFormat[a]=
c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)});return this._longDateFormat[a]};q.invalidDate=function(){return this._invalidDate};q.ordinal=function(a){return this._ordinal.replace("%d",a)};q.preparse=Sb;q.postformat=Sb;q.relativeTime=function(a,b,c,d){var e=this._relativeTime[c];return L(e)?e(a,b,c,d):e.replace(/%d/i,a)};q.pastFuture=function(a,b){a=this._relativeTime[0<a?"future":"past"];return L(a)?a(b):a.replace(/%s/i,b)};q.set=function(a){var b;for(b in a){var c=a[b];L(c)?this[b]=
c:this["_"+b]=c}this._config=a;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};q.months=function(a,b){return a?A(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||ac).test(b)?"format":"standalone"][a.month()]:A(this._months)?this._months:this._months.standalone};q.monthsShort=function(a,b){return a?A(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[ac.test(b)?"format":"standalone"][a.month()]:
A(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};q.monthsParse=function(a,b,c){var d;if(this._monthsParseExact){a:{a=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;12>d;++d){var e=K([2E3,d]);this._shortMonthsParse[d]=this.monthsShort(e,"").toLocaleLowerCase();this._longMonthsParse[d]=this.months(e,"").toLocaleLowerCase()}if(c)b="MMM"===b?w.call(this._shortMonthsParse,a):w.call(this._longMonthsParse,a);
else if("MMM"===b){b=w.call(this._shortMonthsParse,a);if(-1!==b)break a;b=w.call(this._longMonthsParse,a)}else{b=w.call(this._longMonthsParse,a);if(-1!==b)break a;b=w.call(this._shortMonthsParse,a)}b=-1!==b?b:null}return b}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(d=0;12>d;d++)if(e=K([2E3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+
this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(e="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(e.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a)||c&&"MMM"===b&&this._shortMonthsParse[d].test(a)||!c&&this._monthsParse[d].test(a))return d};q.monthsRegex=function(a){if(this._monthsParseExact)return v(this,"_monthsRegex")||yb.call(this),a?this._monthsStrictRegex:this._monthsRegex;v(this,"_monthsRegex")||(this._monthsRegex=
va);return this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex};q.monthsShortRegex=function(a){if(this._monthsParseExact)return v(this,"_monthsRegex")||yb.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex;v(this,"_monthsShortRegex")||(this._monthsShortRegex=va);return this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex};q.week=function(a){return ra(a,this._week.dow,this._week.doy).week};q.firstDayOfYear=function(){return this._week.doy};
q.firstDayOfWeek=function(){return this._week.dow};q.weekdays=function(a,b){return a?A(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]:A(this._weekdays)?this._weekdays:this._weekdays.standalone};q.weekdaysMin=function(a){return a?this._weekdaysMin[a.day()]:this._weekdaysMin};q.weekdaysShort=function(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort};q.weekdaysParse=function(a,b,c){var d;if(this._weekdaysParseExact)return lc.call(this,
a,b,c);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(d=0;7>d;d++){var e=K([2E3,1]).day(d);c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".","\\.?")+"$","i"));this._weekdaysParse[d]||
(e="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(e.replace(".",""),"i"));if(c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a)||c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a)||c&&"dd"===b&&this._minWeekdaysParse[d].test(a)||!c&&this._weekdaysParse[d].test(a))return d}};q.weekdaysRegex=function(a){if(this._weekdaysParseExact)return v(this,"_weekdaysRegex")||Xa.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex;v(this,"_weekdaysRegex")||
(this._weekdaysRegex=va);return this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex};q.weekdaysShortRegex=function(a){if(this._weekdaysParseExact)return v(this,"_weekdaysRegex")||Xa.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;v(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=va);return this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};q.weekdaysMinRegex=function(a){if(this._weekdaysParseExact)return v(this,
"_weekdaysRegex")||Xa.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;v(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=va);return this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};q.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)};q.meridiem=function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"};ja("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10;b=1===l(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":
"th";return a+b}});g.lang=F("moment.lang is deprecated. Use moment.locale instead.",ja);g.langData=F("moment.langData is deprecated. Use moment.localeData instead.",W);var R=Math.abs,Nc=X("ms"),Oc=X("s"),Pc=X("m"),Qc=X("h"),Rc=X("d"),Sc=X("w"),Tc=X("M"),Uc=X("y"),Vc=ea("milliseconds"),Wc=ea("seconds"),Xc=ea("minutes"),Yc=ea("hours"),Zc=ea("days"),$c=ea("months"),ad=ea("years"),Z=Math.round,N={ss:44,s:45,m:45,h:22,d:26,M:11},jb=Math.abs,p=Fa.prototype;p.isValid=function(){return this._isValid};p.abs=
function(){var a=this._data;this._milliseconds=R(this._milliseconds);this._days=R(this._days);this._months=R(this._months);a.milliseconds=R(a.milliseconds);a.seconds=R(a.seconds);a.minutes=R(a.minutes);a.hours=R(a.hours);a.months=R(a.months);a.years=R(a.years);return this};p.add=function(a,b){return Ub(this,a,b,1)};p.subtract=function(a,b){return Ub(this,a,b,-1)};p.as=function(a){if(!this.isValid())return NaN;var b=this._milliseconds;a=G(a);if("month"===a||"year"===a){var c=this._days+b/864E5;c=this._months+
4800*c/146097;return"month"===a?c:c/12}c=this._days+Math.round(146097*this._months/4800);switch(a){case "week":return c/7+b/6048E5;case "day":return c+b/864E5;case "hour":return 24*c+b/36E5;case "minute":return 1440*c+b/6E4;case "second":return 86400*c+b/1E3;case "millisecond":return Math.floor(864E5*c)+b;default:throw Error("Unknown unit "+a);}};p.asMilliseconds=Nc;p.asSeconds=Oc;p.asMinutes=Pc;p.asHours=Qc;p.asDays=Rc;p.asWeeks=Sc;p.asMonths=Tc;p.asYears=Uc;p.valueOf=function(){return this.isValid()?
this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*l(this._months/12):NaN};p._bubble=function(){var a=this._milliseconds,b=this._days,c=this._months,d=this._data;0<=a&&0<=b&&0<=c||0>=a&&0>=b&&0>=c||(a+=864E5*Vb(146097*c/4800+b),c=b=0);d.milliseconds=a%1E3;a=E(a/1E3);d.seconds=a%60;a=E(a/60);d.minutes=a%60;a=E(a/60);d.hours=a%24;b+=E(a/24);a=E(4800*b/146097);c+=a;b-=Vb(146097*a/4800);a=E(c/12);d.days=b;d.months=c%12;d.years=a;return this};p.clone=function(){return J(this)};p.get=function(a){a=
G(a);return this.isValid()?this[a+"s"]():NaN};p.milliseconds=Vc;p.seconds=Wc;p.minutes=Xc;p.hours=Yc;p.days=Zc;p.weeks=function(){return E(this.days()/7)};p.months=$c;p.years=ad;p.humanize=function(a){if(!this.isValid())return this.localeData().invalidDate();var b=this.localeData();var c=!a;var d=J(this).abs(),e=Z(d.as("s")),g=Z(d.as("m")),h=Z(d.as("h")),k=Z(d.as("d")),l=Z(d.as("M"));d=Z(d.as("y"));e=e<=N.ss&&["s",e]||e<N.s&&["ss",e]||1>=g&&["m"]||g<N.m&&["mm",g]||1>=h&&["h"]||h<N.h&&["hh",h]||1>=
k&&["d"]||k<N.d&&["dd",k]||1>=l&&["M"]||l<N.M&&["MM",l]||1>=d&&["y"]||["yy",d];e[2]=c;e[3]=0<+this;e[4]=b;c=Bc.apply(null,e);a&&(c=b.pastFuture(+this,c));return b.postformat(c)};p.toISOString=Ia;p.toString=Ia;p.toJSON=Ia;p.locale=Pb;p.localeData=Qb;p.toIsoString=F("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ia);p.lang=bc;m("X",0,0,"unix");m("x",0,0,"valueOf");k("x",Ma);k("X",/[+-]?\d+(\.\d{1,3})?/);r("X",function(a,b,c){c._d=new Date(1E3*parseFloat(a,10))});
r("x",function(a,b,c){c._d=new Date(l(a))});g.version="2.22.2";var dc=u;g.fn=e;g.min=function(){var a=[].slice.call(arguments,0);return Jb("isBefore",a)};g.max=function(){var a=[].slice.call(arguments,0);return Jb("isAfter",a)};g.now=function(){return Date.now?Date.now():+new Date};g.utc=K;g.unix=function(a){return u(1E3*a)};g.months=function(a,b){return Tb(a,b,"months")};g.isDate=wa;g.locale=ja;g.invalid=xa;g.duration=J;g.isMoment=T;g.weekdays=function(a,b,c){return ib(a,b,c,"weekdays")};g.parseZone=
function(){return u.apply(null,arguments).parseZone()};g.localeData=W;g.isDuration=db;g.monthsShort=function(a,b){return Tb(a,b,"monthsShort")};g.weekdaysMin=function(a,b,c){return ib(a,b,c,"weekdaysMin")};g.defineLocale=Za;g.updateLocale=function(a,b){if(null!=b){var c=Db;var d=Da(a);null!=d&&(c=d._config);b=sb(c,b);b=new Sa(b);b.parentLocale=x[a];x[a]=b;ja(a)}else null!=x[a]&&(null!=x[a].parentLocale?x[a]=x[a].parentLocale:null!=x[a]&&delete x[a]);return x[a]};g.locales=function(){return Cc(x)};
g.weekdaysShort=function(a,b,c){return ib(a,b,c,"weekdaysShort")};g.normalizeUnits=G;g.relativeTimeRounding=function(a){return void 0===a?Z:"function"===typeof a?(Z=a,!0):!1};g.relativeTimeThreshold=function(a,b){if(void 0===N[a])return!1;if(void 0===b)return N[a];N[a]=b;"s"===a&&(N.ss=b-1);return!0};g.calendarFormat=function(a,b){a=a.diff(b,"days",!0);return-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse"};g.prototype=e;g.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",
DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"};return g})});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.lib.js' */
define("jira/moment/moment.lib",["atlassian/libs/moment-2.22.2"],function(n){return n});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.jira.formatter.js' */
define("jira/moment/moment.jira.formatter",["underscore","exports"],function(t,e){"use strict";function r(e){return u[e]||t.reduce(e,function(t,e){return t+(u[e]||e)},"")}function n(e){var n=!1,u=!1,a="",o=t.reduce(e,function(t,e,o,i){return u?u=!1:"'"===e?(a&&(t+=r(a),a=""),"'"===i[o+1]?(t+=e,u=!0):(t+=n?"]":"[",n=!n)):n?t+=e:/[a-zA-Z]/.test(e)?a&&a[a.length-1]!==e?(t+=r(a),a=e):a+=e:(a&&(t+=r(a),a=""),t+=e),t},"");return a&&(o+=r(a)),o}var u={d:"D",y:"Y",a:"A",E:"d",u:"d",Z:"ZZ",z:"[GMT]ZZ",XX:"ZZ",XXX:"Z"};e.translateSimpleDateFormat=n});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.jira.i18n.js' */
!function(){"use strict";var e;define("jira/moment/moment.jira.datetime-formats",["wrm/data"],function(t){return e||(e=t.claim("jira.core:dateFormatProvider.allFormats")),e})}(),define("jira/moment/moment.jira.i18n",["jira/moment/moment.lib","jira/moment/moment.jira.datetime-formats","jira/moment/moment.jira.formatter","jira/util/formatter"],function(e,t,m,a){"use strict";var o=t.dateFormats,r=t.lookAndFeelFormats;return e.locale("jira",{months:o.months,monthsShort:o.monthsShort,weekdays:o.weekdays,weekdaysShort:o.weekdaysShort,weekdaysMin:o.weekdaysShort,longDateFormat:{LT:m.translateSimpleDateFormat(r.time),L:m.translateSimpleDateFormat(r.day),LL:m.translateSimpleDateFormat(r.dmy),LLL:m.translateSimpleDateFormat(r.complete)},meridiem:function(e){return o.meridiem[+(e>11)]},calendar:{sameDay:"LLL",nextDay:"LLL",nextWeek:"LLL",lastDay:"LLL",lastWeek:"LLL",sameElse:"LLL"},relativeTime:{future:a.format("in {0}","%s"),past:a.format("{0} ago","%s"),s:"a few seconds",m:"a minute",mm:a.format("{0} minutes","%d"),h:"an hour",hh:a.format("{0} hours","%d"),d:"a day",dd:a.format("{0} days","%d"),M:"a month",MM:a.format("{0} months","%d"),y:"a year",yy:a.format("{0} years","%d")}}),e});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.js' */
define("jira/moment",["jira/moment/moment.jira.i18n"],function(t){return t.splitDate=function(t,n){return Date.splitDate(t,n)},t});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.legacy.js' */
!function(){AJS.namespace("JIRA.translateSimpleDateFormat",null,require("jira/moment/moment.jira.formatter").translateSimpleDateFormat),AJS.namespace("window.moment",null,require("jira/moment"))}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'js/ctrlv/time.js' */
define("dndattachment/ctrlv/time",["require"],function(a){var b=a("jira/moment");return b});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'js/ctrlv/base64decode.js' */
define("dndattachment/ctrlv/base64decode",["exports"],function(a){function c(d){return d>64&&d<91?d-65:d>96&&d<123?d-71:d>47&&d<58?d+4:d===43?62:d===47?63:0}var b=function(f){var m=f.replace(/[^A-Za-z0-9\+\/]/g,""),g=m.length,d=g*3+1>>2,k=new Uint8Array(d);for(var j,h,i=0,e=0,l=0;l<g;l++){h=l&3;i|=c(m.charCodeAt(l))<<18-6*h;if(h===3||g-l===1){for(j=0;j<3&&e<d;j++,e++){k[e]=i>>>(16>>>j&24)&255}i=0}}return k};a.base64decode=b;a.decodeBase64DataUri=function(e){var g=";base64,",f=e.slice(0,e.indexOf(g))+g,d=e.substring(f.length);return b(d)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'js/ctrlv/utility.js' */
define("dndattachment/ctrlv/utility",["require","exports"],function(b,c){var g=b("jira/jquery/deferred");var d=b("jquery");var k=b("underscore");var i=b("dndattachment/ctrlv/base64decode");var a=b("dndattachment/ctrlv/time");var f=b("dndattachment/ctrlv/version");var j=b("jira/flag");var m=b("jira/util/navigator");c.isKeyPasteEvent=function(q,n){var o=86;var p=((n||"").indexOf("Mac")!==-1)||m.isMac();return q.which===o&&(p?q.metaKey:q.ctrlKey)};c.isImagePasteEvent=function(q){if(q&&q.clipboardData){var o=k.union(k.toArray(q.clipboardData.items),k.toArray(q.clipboardData.files));var p=o.some(function(r){return r.type.indexOf("image")!==-1});var n=o.some(function(r){return r.type.indexOf("rtf")!==-1});return p&&!n}};var h=function(o){if(!o.clipboardData||!o.clipboardData.types||!k.contains(o.clipboardData.types,"text/html")){return}var n=d(o.clipboardData.getData("text/html"));if(n.length===1&&n.children().length===0&&n[0].nodeName.toLowerCase()==="img"){return n[0].src}return null};c.getHtmlImagePaste=h;c.isHtmlImagePasteEvent=function(n){return h(n)!=null};c.isTextPasteEvent=function(n){return n.clipboardData.types&&(k.contains(n.clipboardData.types,"text/plain")||k.contains(n.clipboardData.types,"text/html"))};c.isContentEditable=function(n){return n.contentEditable=="true"||n.contentEditable==""||(n.contentEditable=="inherit"&&d(n).parents().is("[contenteditable=true]"))};c.isValidFileName=function(n){return !k(["\\","/",'"',":","?","*","<","|",">","!"]).any(function(o){return n.indexOf(o)>-1})};c.getTextPasteContent=function(n){return n.clipboardData.types&&k.contains(n.clipboardData.types,"text/plain")&&n.clipboardData.getData("text/plain")||""};c.getTextContent=function(n){if(!n){return""}else{if(m.isIE()&&typeof n.innerText!=="undefined"){return n.innerText}else{return d(n).text()}}};c.normalizePasteEvent=function(n){if(n&&n.originalEvent&&n.originalEvent.clipboardData){n.clipboardData=n.originalEvent.clipboardData}if(n&&!n.clipboardData&&window.clipboardData){n.clipboardData={files:window.clipboardData.files,types:{contains:function(o){if(o=="text/plain"){return !!window.clipboardData.getData("Text")}}},getData:function(o){if(o=="text/plain"){return window.clipboardData.getData("Text")}}}}return n};c.browserIsSupported=function(n){var p=((n||"").indexOf("Mac")!==-1)||m.isMac();var o=m.isSafari();return !(p&&o)&&!(f.isIE8()||f.isIE9()||f.isIE10())};c.browserIsNativePaste=function(){return m.isChrome()||m.isSafari()};c.isWikiTextfield=function(n){return n.is(":input")&&n.hasClass("wiki-textfield")};var e=function(n){return n.is("input#summary")};var l=function(o,v,r,t){var q=d(v);if(!(c.isWikiTextfield(q)||e(q))||!o){return}if(!q.is(":focus")){q.one("focus",function(){var w=q[0];w.selectionStart=w.selectionEnd=r+o.length})}var s=q.val();var n=s.substring(0,r);var u=s.substring(t,s.length);var p=q.data("wikiEditor");if(p&&p.undoRedoEl&&k.isFunction(p.undoRedoEl.recordHistoryItem)){p.undoRedoEl.recordHistoryItem()}q.val(n+o+u);q.trigger("input");v.selectionStart=v.selectionEnd=r+o.length;if(p&&p.undoRedoEl&&k.isFunction(p.undoRedoEl.updateCurrent)){p.undoRedoEl.updateCurrent()}};c.insertToInput=l;c.isThumbnailsAllowed=function(){var n=d("#dnd-metadata-webpanel").data("thumbnails-allowed");var o=true;if(n!=null){o=!!n}return o};c.getMarkup=function(s){var q=["bmp","gif"];var r=["pjpeg","jpeg","jpg","png"];var p=s.split(".");var o=c.isThumbnailsAllowed();var n=p[p.length-1].toLowerCase();if(o&&k.contains(r,n)){return"!"+s+"|thumbnail!"}else{if(k.contains(r,n)||k.contains(q,n)){return"!"+s+"!"}else{return"[^"+s+"]"}}};c.insertWikiMarkup=function(s,p,q,r,n){var o=c.getMarkup(s,n);if(o){o=" "+o+" ";l(o,p,q,r)}};c.loadImage=function(p){var n=new g();var o=new Image();o.setAttribute("crossOrigin","anonymous");o.onload=function(){n.resolve(o)};o.onerror=n.reject.bind(n);o.src=p;if(o.width>0&&o.height>0){n.resolve(o)}return n};c.convertImageToBlob=function(p){var n=d("<canvas>").attr("width",p.width).attr("height",p.height)[0];n.getContext("2d").drawImage(p,0,0);try{if(n.mozGetAsFile){return n.mozGetAsFile("image/png")}if(n.toDataURL){return new Blob([i.decodeBase64DataUri(n.toDataURL("image/png"))],{type:"image/png"})}}catch(o){return null}};c.convertBlobToImage=function(n,p){var o=new Blob([n.slice()],{type:n.type});o.lastModifiedDate=new Date();o.name=p;return o};c.dropFileToElement=function(p,o){var r=p.name;if(!r){r=this.generateFileName();p.name=r+".png"}var q=d.Event("drop",{dataTransfer:{files:[p]}});var n=false;d(document).on("dropHandled.dropFileToElement",function(){n=true});o.trigger(q);d(document).off(".dropFileToElement");return n};c.generateFileName=function(){return"image-"+a().format("YYYY-MM-DD-HH-mm-ss-SSS")};c.getCurrentIssueId=function(){return JIRA.Issues.Api.getSelectedIssueId()};c.showErrorMsg=function(o,n){j.showErrorMsg(o,n)};c.createBlobFromFile=function(n){var o=new Blob([n.slice()],{type:n.type});o.name=n.name;return o};c.dragEventContainsFiles=function(o){if(!o.dataTransfer||!o.dataTransfer.types){return true}var n=o.dataTransfer.types;if(m.isMozilla()){return k.contains(n,"application/x-moz-file")}else{return k.contains(n,"Files")}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'js/ctrlv/ie_version.js' */
define("dndattachment/ctrlv/version",["require","exports"],function(e,h){var i=e("jquery");var m=e("underscore");var n=e("jira/util/navigator");var g=document.documentElement.className.split(/\s+/);var c=n.isIE();var l=i.inArray("msie-gt-7",g)>-1;var k=i.inArray("msie-gt-8",g)>-1;var j=i.inArray("msie-gt-9",g)>-1;var b=i.inArray("msie-gt-10",g)>-1;var f=c&&l&&!k;var d=c&&k&&!j;var a=c&&j&&!b;h.isIE8=m.once(function(){return f});h.isIE9=m.once(function(){return d});h.isIE10=m.once(function(){return a})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'js/util/Configuration.js' */
define("dndattachment/util/Configuration",["require"],function(b){var a=b("wrm/data");var d="com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.";function c(e){return a.claim(e)}return{getWRM:function(e){return c(d+e)}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'js/util/DataTransfer.js' */
define("dndattachment/util/DataTransfer",["require"],function(d){var a=d("jira/lib/class");var c=d("underscore");var b=d("jira/jquery/deferred");var e=d("jquery");return a.extend({init:function(f){this._dataTransfer=f},getFiles:function(){var g=this._dataTransfer.files;var f=this._dataTransfer.items;if(f&&f.length>0){if(c.any(f,function(h){return !!h.webkitGetAsEntry})){return this.readEntries(f)}}if(g&&g.length>0){return this.readFiles(this._dataTransfer.files)}else{return new b().reject()}},readFiles:function(g){var f=new b();e.when.apply(window,c.map(g,function(i){var h=new b();var j=!i.name.match(/\.([a-z0-9]+)$/i);if(j&&(i.size<=8192)||i.size==8192||i.size==4096||i.size<=1024){this.readFileAsText(i).fail(function(){g=c(g).without(i)}).always(h.resolve.bind(h))}else{h.resolve()}return h}.bind(this))).always(function(){f.resolve(g)});return f},readFileAsText:function(h){var g=new b();var f=new FileReader();f.onload=function(){g.resolve(this.result)};f.onerror=function(){g.reject(this.error)};f.readAsText(h);return g},readEntries:function(g){var f=new b();g=c.filter(g,function(h){return h.kind==="file"});e.when.apply(window,c.map(g,function(h){return this.readEntry(h.webkitGetAsEntry(),h)}.bind(this))).then(function(){f.resolve(c.union.apply(c,arguments))},f.reject.bind(f));return f},readEntry:function(h,g){var f=new b();if(h.isFile){if(g&&g.getAsFile){f.resolve([g.getAsFile()])}else{h.file(function(i){f.resolve([i])})}}else{if(h.isDirectory){h.createReader().readEntries(function(i){var j=[];e.when.apply(window,c.map(i,function(k){return this.readEntry(k).then(function(l){return j.push.apply(j,l)})}.bind(this))).always(function(){f.resolve(j)})}.bind(this))}}return f}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'js/util/FileSizeUtil.js' */
define("dndattachment/util/FileSizeUtil",function(){var h=1024;var c=h*h;var d=" kB";var g=" MB";function f(i){if(i>c){return e(i)}else{if(i>h){return a(i)}else{return b(i)}}}function e(j){var i=j/c;return i.toFixed(2)+g}function a(j){var i=Math.round(j/h);return i+d}function b(j){var i=j/h;return i.toFixed(1)+d}return{format:f}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'js/util/AttachmentEvents.js' */
define("dndattachment/util/events/types",{ATTACHMENT_FOR_PAGE_RECEIVED:"attachmentForPageReceived"});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-upload', location = 'js/upload/UploadHandler.js' */
define("dndattachment/upload/handler",["require","exports"],function(c,e){var i=c("jira/analytics");var j=c("jira/dialog/dialog");var k=c("jira/jquery/deferred");var n=c("jira/util/events");var m=c("dndattachment/util/events/types");var l=c("underscore");var f=c("jquery");var h=c("dndattachment/ctrlv/utility");var d=[];var a;var g=function(r,q){var p=k();var o=j.current;if(o&&o.$form){i.send({name:"attach.screenshot.html5.dialogPaste",data:{}});var t=h.createBlobFromFile(q.files[0]);if(h.dropFileToElement(t,o.$form)){p.resolve([q.files[0].name])}}else{var s=l.find(d,function(u){return u.isValid(r,q)});if(s){p=s.processFiles(q.files,a);if(q.successCallback){p.done(q.successCallback)}if(q.failureCallback){p.fail(q.failureCallback)}if(q.alwaysCallback){p.always(q.alwaysCallback)}}}p.done(function(v,u){if(!u&&q.isWikiTextfieldFocused){var w=q.wikiTextfield;l.each(v,function(x){h.insertWikiMarkup(x,w,w.selectionStart,w.selectionStart)});if(o&&q.isPaste){i.send({name:"attach.screenshot.html5.dialogPaste.insertWikiMarkup",data:{}})}if(!f(q.wikiTextfield).is(":focus")){setTimeout(function(){q.wikiTextfield.focus()},0)}}})};var b=function(s){if(s){var p=typeof s.isValid!=="undefined";var q=typeof s.processFiles!=="undefined";var o=typeof s.weight!=="undefined";var r=typeof s.name!=="undefined";return p&&q&&o&&r}return false};e.registerExecutor=function(q){var p=b(q);if(p){var o=l.reject(d,function(r){return r.name===q.name});o.push(q);d=l.sortBy(o,function(r){return -r.weight})}return p};e.unregisterExecutor=function(o){d=l.reject(d,function(p){return p.name===o.name})};e.initialize=function(){n.bind(m.ATTACHMENT_FOR_PAGE_RECEIVED,g)};e.disable=function(){n.unbind(m.ATTACHMENT_FOR_PAGE_RECEIVED,g)};e.setAttachmentDropZone=function(o){a=o}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-upload', location = 'js/upload/DefaultUploadExecutor.js' */
define("dndattachment/upload/default/executor",["require","exports"],function(b,a){a.name="Default attachment executor";a.weight=0;a.isValid=function(d,c){return true};a.processFiles=function(d,c){return c.uploadFiles(d)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/path.js' */
define("dndattachment/ctrlv/path",["exports"],function(a){var b=function b(c){return c.split(/\//).pop()};a.basename=b;a.dirname=function(c){var d=b(c);return c.substring(0,c.length-d.length)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'templates/soy/attach-screenshot-form.soy' */
// This file was automatically generated from attach-screenshot-form.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Html5Screenshot.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Html5Screenshot == 'undefined') { JIRA.Templates.Html5Screenshot = {}; }


JIRA.Templates.Html5Screenshot.attachScreenshotForm = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + soy.$$escapeHtml('Attach Screenshot') + '</h2><form action="ShowAttachScreenshotFormAction.jspa" class="aui" method="post" id="attach-screenshot-form" data-attach-secure-token="' + soy.$$escapeHtml(opt_data.attachUserToken) + '" data-submit-secure-token="' + soy.$$escapeHtml(opt_data.submitUserToken) + '"><input type="hidden" name="id" value="' + soy.$$escapeHtml(opt_data.id) + '"/><input type="hidden" name="atl_token" value="' + soy.$$escapeHtml(opt_data.atlToken) + '"><input type="hidden" name="formToken" value="' + soy.$$escapeHtml(opt_data.formToken) + '"><input type="hidden" name="filetoconvert" value=""><div class="attach-screenshot-padding"><div class="attach-screenshot-container"><div id="attach-screenshot-inner-container"><div class="mod-content"><ul class="item-details"><li><dl><dt>' + soy.$$escapeHtml('Take a screenshot:') + '</dt>' + ((opt_data.userPlatform == 'pc') ? '<dd>' + soy.$$filterNoAutoescape('\x3ckbd\x3ePrtScn\x3c/kbd\x3e') + '</dd>' : '<dd>' + soy.$$filterNoAutoescape('\x3ckbd\x3e\x26#8963; Ctrl\x3c/kbd\x3e + \x3ckbd\x3e\x26#8984; Cmd\x3c/kbd\x3e + \x3ckbd\x3e\x26#8679; Shift\x3c/kbd\x3e + \x3ckbd\x3e3\x3c/kbd\x3e') + '</dd>') + '</dl></li><li><dl><dt>' + soy.$$escapeHtml('Paste the image:') + '</dt>' + ((opt_data.userPlatform == 'pc') ? '<dd>' + soy.$$filterNoAutoescape('\x3ckbd\x3eCtrl\x3c/kbd\x3e + \x3ckbd\x3ev\x3c/kbd\x3e') + '</dd>' : '<dd>' + soy.$$filterNoAutoescape('\x3ckbd\x3e\x26#8984; Cmd\x3c/kbd\x3e + \x3ckbd\x3ev\x3c/kbd\x3e') + '</dd>') + '</dl></li></ul></div><input type="text" id="attach-screenshot-fake-input"><div class="attach-screenshot-padding attach-screenshot-padding-inner"><div id="attach-screenshot-image-container" class="attach-screenshot-image-container"><div class="attach-screenshot-placeholder"><div class="mod-content"><ul class="item-details"><li><dl><dt id="attach-screenshot-placeholder-message">' + soy.$$escapeHtml('Your image will be pasted here') + '</dt></dl></li></ul></div></div></div></div><div id=\'attach-max-size\' class="hidden">' + soy.$$escapeHtml(opt_data.maxSize) + '</div></div></div></div><fieldset><div><legend><span>' + soy.$$escapeHtml('Attach Screenshot') + '</span></legend><div id="attach-screenshot-filename-group" class="field-group"><div id="attach-screenshot-progress-container"></div><label for="attachscreenshotname">' + soy.$$escapeHtml('File name') + ' <span class="aui-icon icon-required">' + soy.$$escapeHtml('Required') + '</span></label><input class="text" type="text" id="attachscreenshotname" name="attachscreenshotname" title="File Name" value="' + soy.$$escapeHtml(opt_data.nextScreenshotName) + '"><div class="description">' + soy.$$escapeHtml('A file name to be used as attached image name') + '</div></div></div></fieldset><div class="buttons-container form-footer"><div class="buttons"><button class="aui-button aui-button-primary" id="attach-screenshot-html5-upload">' + soy.$$escapeHtml('Upload') + '</button><a href="#" class="cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
};
if (goog.DEBUG) {
  JIRA.Templates.Html5Screenshot.attachScreenshotForm.soyTemplateName = 'JIRA.Templates.Html5Screenshot.attachScreenshotForm';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/html5.js' */
define("dndattachment/ctrlv/html5",["require","exports"],function(b,c){var k=b("jira/util/formatter");var e=b("wrm/context-path");var h=b("jira/jquery/deferred");var d=b("jquery");var m=b("underscore");var i=b("dndattachment/ctrlv/base64decode");var l=b("dndattachment/ctrlv/utility");var g=b("jira/dialog/dialog");var j=b("jira/dialog/dialog-register");var a=b("jira/ajs/ajax/smart-ajax");var f=b("jira/attachment/inline-attach");c.getFileFromEvent=function(o){var n=new h();if(l.isImagePasteEvent(o)){n.resolve(m(o.clipboardData.items).filter(function(p){return p.type.indexOf("image")!==-1}).map(function(p){return p.getAsFile()})[0]||m(o.clipboardData.files).filter(function(p){return p.type.indexOf("image")!==-1})[0])}else{n.reject()}return n.promise()};c.REQUEST_TIMEOUT_MILLIS=5*60*1000;c.screenshotFileUpload={};c.screenshotFileUploadUri=null;c.$document=undefined;c.$window=undefined;c.$container=undefined;c.$fakeInput=undefined;c.uploadError=false;c.uploadErrorMsg="";c.progressView={hidden:false,progress:0,old:0,progressBarContainer:undefined,progressEl:undefined,container:undefined,options:undefined,staticProgress:undefined,initProgress:function(){this.container=this.buildContainer();this.progressEl=this.buildProgress();this.container.append(this.progressEl);this.options={showPercentage:false,height:"5px"};this.progressBarContainer=d("#attach-screenshot-progress-container");this.progressBarContainer.empty();this.progressBarContainer.append(this.container);this.staticProgress=this.container;this.hidden=true},finish:function(){this.value(100)},progressHandler:function(o){var n=Math.round(o.loaded*100/o.total);this.value(n)},value:function(n){if(n>100){n=100}else{if(n<0){n=0}}if(this.hidden){this.progressEl.show();this.hidden=false}if(this.old!==n){this.progressEl.progressBar(n,this.options);if(n>=100){this.progressEl.fadeOut()}this.old=n}},buildContainer:function(){return d("<div>").addClass("file-progress")},buildProgress:function(){return d("<div>").attr("id","attach-screenshot-upload-progress")}};c.dialogView={pasteCatcher:{},presenter:undefined,getMaxSize:function(){return d("#attach-max-size").text()},getFileSize:function(){if(d.isPlainObject(this.presenter.screenshotFileUpload)&&m.isEmpty(this.presenter.screenshotFileUpload)){return 0}return this.presenter.screenshotFileUpload.size||this.presenter.screenshotFileUpload.byteLength||this.presenter.screenshotFileUpload.length},cleanGeneralErrors:function(){d("#error-attach-screenshot-image").closest(".field-group").remove()},cleanFileErrors:function(){d("#error-attach-screenshot-filename").remove()},displayErrors:function(n){if("compatibility" in n){l.showErrorMsg("",n.compatibility)}if("fileName" in n){l.showErrorMsg("",n.fileName)}if("fileUpload" in n){l.showErrorMsg("",n.fileUpload)}},appendBlobImage:function(n){var p=window.URL||window.webkitURL;var o=p.createObjectURL(n);this.presenter.screenshotFileUpload=n;this.createImage(o)},createImage:function(q){var o=new Image();o.onload=function(){};o.src=q;this.presenter.screenshotToUpload=o;var p=d(o);p.addClass("attach-screenshot-pasted-image");var n=d("#attach-screenshot-image-container");n.empty();n.append(p);this.presenter.$fakeInput.focus();m.defer(function(){c.imageCreatedHandler()})},checkInput:function(){var o,n=c.dialogView.pasteCatcher.childNodes[0];if(n){if("IMG"===n.tagName){if(n.src.indexOf("data:")===0){o=n.src}else{}}c.dialogView.pasteCatcher.innerHTML=""}if(!o){c.$fakeInput.focus()}return o},onPaste:function(n){c.dialogView.cleanFileErrors();c.dialogView.cleanGeneralErrors();if(l.isImagePasteEvent(n)){c.getFileFromEvent(n).then(function(o){this.appendBlobImage(o)}.bind(this))}else{setTimeout(function(){var o=this.checkInput();if(o){c.screenshotFileUpload=i.decodeBase64DataUri(o);c.dialogView.createImage(o)}}.bind(this),0)}},getFakeInput:function(){return d("#attach-screenshot-fake-input")},getContainer:function(){return d("#attach-screenshot-image-container")},getIssueKey:function(){return d("input[name='id']").val()},getDocument:function(){return d(document)},getWindow:function(){return d(window)},getFileNameInput:function(){return d("#attachscreenshotname")},hasPngExtension:function(o){var n=/\.png$/i;return n.test(o)},setFileToConvert:function(n){d("input[name='filetoconvert']").val(n)},buildPasteCatcher:function(){if(!document.getElementById("attach-screenshot-form")){return}var n=document.createElement("div");n.setAttribute("contenteditable","true");n.style.width=0;n.style.height=0;n.style.position="absolute";n.style.top="-5000px";document.getElementById("attach-screenshot-form").appendChild(n);return n},_getFormSubmits:function(){return d("#attach-screenshot-form").find("button.aui-button")},disable:function(){this._getFormSubmits().attr("disabled","disabled");return this},enable:function(){this._getFormSubmits().removeAttr("disabled");return this},isEnabled:function(){return this.isVisible()&&!this._getFormSubmits().attr("disabled")},isVisible:function(){return d("#attach-screenshot-form").length>0},initDialog:function(n){this.pasteCatcher={};this.presenter=n;this.pasteCatcher=this.buildPasteCatcher()}};c.initScreenshotPasteHandler=function(){var n=c.dialogView;c.screenshotFileUpload={};c.resetUploadErrors();c.dialogView.initDialog(c);c.$document=n.getDocument();c.$window=n.getWindow();c.$container=n.getContainer();c.$fakeInput=n.getFakeInput();c.bindOnce(c.$container,"click",c.setFocusOnClickHandler);c.bindOnce(c.$fakeInput,"focus",c.showFocusOnFieldHandler);c.bindOnce(c.$fakeInput,"blur",c.hideFocusOnFieldHandler);c.bindOnce(c.$fakeInput,"keydown",c.keyDownHandler);if(!l.browserIsSupported()){n.displayErrors({compatibility:k.format("Your browser is not supported. Consider using an alternative supported browser such as {0}Google Chrome{1} or {2}Firefox{3}.",'<a href="//www.google.com/chrome/browser/">',"</a>",'<a href="//www.mozilla.org/firefox/">',"</a>")})}else{c.bindOnce(c.$window,"paste",c.pasteHandler)}};c.resetUploadErrors=function(){c.uploadError=false;c.uploadErrorMsg=undefined};c.setUploadError=function(n){c.uploadError=true;c.uploadErrorMsg=n};c.bindOnce=function(p,n,o){p.unbind(n,o);p.bind(n,o)};c.showFocusOnFieldHandler=function(){c.$container.addClass("focus")};c.hideFocusOnFieldHandler=function(){c.$container.addClass("focus")};c.setFocusOnClickHandler=function(){c.$fakeInput.focus()};c.pasteHandler=function(n){if(!c.dialogView.isEnabled()){return}n=l.normalizePasteEvent(n);c.dialogView.onPaste(n)};c.polyPasteHandler=function(o,n,p){if(!c.dialogView.isEnabled()){return}c.screenshotFileUpload={length:-1};c.screenshotFileUploadUri=n;c.dialogView.createImage(p)};c.keyDownHandler=function(n){if(l.isKeyPasteEvent(n)){if(c.dialogView.pasteCatcher.focus){c.dialogView.pasteCatcher.focus()}}};c.imageCreatedHandler=function(){c.doAjaxUpload(this.dialogView.getIssueKey(),this.dialogView.getFileNameInput().val())};c.getMimeType=function(){return"image/png"};c.createData=function(){return c.screenshotFileUpload};c.clipboardDataIsEmpty=function(n){if(window.clipboardData!=null){return false}return !(n&&n.clipboardData&&n.clipboardData.types&&n.clipboardData.types.length>0)};c.validateFileSize=function(q,n,p){var n=n||c.dialogView.getFileSize();var p=p||c.dialogView.getMaxSize();if(n>p){var o=f.Text.fileSize(p,n);q.fileUpload=k.format("Screenshot is too large to attach. Attachment is {0} but the largest allowed attachment is {1}.",o[1],o[0])}};c.validateFormData=function(n,p){var o={};if(d.isPlainObject(n)&&m.isEmpty(n)){o.fileUpload="Please paste the image you wish to upload"}c.validateFileSize(o);if(c.uploadError){o.fileUpload="The error occurred during image upload - you will need to try the pasting image again. Sorry for the inconvenience."}if(""==p){o.fileName="You must specify a filename of the image."}if(!l.isValidFileName(p)){o.fileName="Filename must not contain the characters \'\\\', \'/\', \'\"\', \':\', \'?\', \'*\', \'\u003c\', \'|\', \'\u003e\', \'!\'"}return o};c.doAjaxUpload=function(n,u){c.dialogView.disable();var t={};c.validateFileSize(t);if(!m.isEmpty(t)){c.dialogView.displayErrors(t);c.dialogView.enable();return}var r=c.createData(),s=c.getMimeType(),p=d("#attach-screenshot-form").data("attach-secure-token"),o=d("#attach-screenshot-form").find("input[name='formToken']").attr("value");var q=e()+"/rest/internal/1.0/AttachTemporaryFile?size="+c.dialogView.getFileSize()+"&filename="+encodeURIComponent(u)+"&atl_token="+encodeURIComponent(atl_token())+"&issueId="+encodeURIComponent(this.dialogView.getIssueKey())+(p?("&secureToken="+encodeURIComponent(p)):"")+(o?("&formToken="+encodeURIComponent(o)):"");c.resetUploadErrors();c.executeAjaxUpload(r,q,s).progress(function(v){if(v=="init"){c.progressView.initProgress()}}).done(function(v){if(typeof v=="string"){v=JSON.parse(v)}c.dialogView.setFileToConvert(v.id)}).fail(function(x,A,z,v){var w;if(v.statusText=="abort"){w="The call to the Jira server did not complete within the timeout period.  We are unsure of the result of this operation."}else{if(v.hasData){var y=JSON.parse(v.data);if(y.errorMessage){w=y.errorMessage}else{w=a.buildSimpleErrorContent(v,{alert:false})}}}c.setUploadError(w);c.dialogView.displayErrors({fileUpload:w})}).always(function(){c.dialogView.enable();c.progressView.finish()}).progress(function(v){if(v!="init"){c.progressView.progressHandler(v)}})};c.executeAjaxUpload=function(p,o,r){var n=h();var q=a.makeRequest({type:"POST",url:o,contentType:r,processData:false,data:p,timeout:c.REQUEST_TIMEOUT_MILLIS,success:n.resolve.bind(n),error:n.reject.bind(n),xhr:function(){var s=d.ajaxSettings.xhr();n.notify("init");s.upload.addEventListener("progress",n.notify.bind(n));return s}});n.always(function(){d.ajaxSettings.xhr().removeEventListener("progress",c.progressView.progressHandler);d(j.attachScreenshotDialog).off("Dialog.hide",q.abort)});d(j.attachScreenshotDialog).one("Dialog.hide",q.abort);return n.promise()};c.show=function(){var n=new h();var o=d(".issueaction-attach-screenshot-html5");if(g.current!=null){return n.reject().promise()}if(o.length==0){return n.reject().promise()}m.defer(function(){o.trigger("click")});d(document).on("dialogContentReady",function(q,p){if(p===j.attachScreenshotDialog&&c.dialogView.isEnabled()){n.resolve(p)}else{n.reject()}});d(document).on("ajaxComplete.jira.screenshot.dialog",function(r,q,p){if(p.url.indexOf(o.attr("href"))>-1){setTimeout(function(){if(!n.state()==="resolved"){n.reject()}},1000)}});n.always(function(){d(document).off("ajaxComplete.jira.screenshot.dialog")});return n.promise()}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/issue-paste.js' */
define("dndattachment/ctrlv/issue-paste",["require","exports"],function(h,D){var d=h("jquery");var v=h("dndattachment/ctrlv/trace");var e=h("dndattachment/ctrlv/tracking");var r=h("dndattachment/ctrlv/utility");var g=h("dndattachment/ctrlv/html5");var B=h("dndattachment/ctrlv/base64decode");var f=h("jira/dialog/dialog");var o=h("jira/util/events");var x=h("dndattachment/util/events/types");var A=0;var m=1;var c=2;var y=3;var p=4;var t=5;var i=6;var w=7;var q=8;var n=9;function l(G,F){F.stateName=G;var E=function(){var H=F.apply(null,arguments);H.stateName=G;return H};E.stateName=G;return E}function b(F,E,G){return l(F,function(){var J=setTimeout(function(){a(n)},G);var I=E.apply(null,arguments);var H=function(M,L){var K=I(M,L);if(K){clearTimeout(J);return K}};H.stateName=F;return H})}var k=l("idle",function(){function E(F){if(d(F.target).is(":input:not(.wiki-textfield, #summary)")||r.isContentEditable(F.target)){return}return true}return function(G,F){if(G==A&&r.isKeyPasteEvent(F)){if(r.browserIsNativePaste()||!E(F)||!r.browserIsSupported()){return}e.trigger("attach.screenshot.html5.catchClipboard");return new u(F)}if(G==m){if(r.isImagePasteEvent(F)){e.trigger("attach.screenshot.html5.handlePaste");if(!E(F)){v("jira/attach-images-plugin/pasteIgnored");return}if(d(F.target).is(":input.wiki-textfield")){F.preventDefault()}return new s(F)}else{v("jira/attach-images-plugin/pasteIgnoredNotImage")}}}});var u=b("catchClipboard",function(G){var E=document.activeElement;G.selectionStart=G.target.selectionStart;G.selectionEnd=G.target.selectionEnd;var H=d('<div contenteditable="true" class="attach-screenshot-paste-catcher"></div>').appendTo("body");H.focus();if(d(E).is(":focusable:input,:aui-focusable:input")){setTimeout(function(){E.focus()})}function F(){H.remove()}return function(L,I){if(L==m){if(r.isImagePasteEvent(I)){F();I.target=E;return new s(I)}if(r.isHtmlImagePasteEvent(I)){F();I.target=E;return new z(I)}if(r.isTextPasteEvent(I)){F();var O=r.getTextPasteContent(I);r.insertToInput(O,G.target,G.selectionStart,G.selectionEnd);I.preventDefault();return new k()}}if(L==n){F();var K=H.find(">img");if(K.is(":only-child")){var M=K.attr("src");if(M.toLowerCase().indexOf("http")===0){return k()}else{var P=B.decodeBase64DataUri(M);var J=new Blob([P],{type:"image/png"});return new j(J,G)}}else{var N=r.getTextContent(H[0]);r.insertToInput(N,G.target,G.selectionStart,G.selectionEnd);return k()}}}});var z=l("imageLoading",function(E){var F=r.getHtmlImagePaste(E);if(!F){a(t)}else{r.loadImage(F).then(function(G){a(p,G)},a.bind(null,t))}return function(I,G){if(I==p){var H=r.convertImageToBlob(G);if(H){return new j(H,E)}else{return new k()}}if(I==n||I==t){return new k()}}});var s=b("fileLoading",function(E){g.getFileFromEvent(E).done(function(F){a(c,F)}).fail(function(){a(y)});return function(G,F){if(G==c){return new j(F,E)}else{if(G==y||G==n){return new k()}}}},1000);var j=l("attachImage",function(G,F){var H=F.target;var I=r.generateFileName()+".png";var E=r.convertBlobToImage(G,I);o.trigger(x.ATTACHMENT_FOR_PAGE_RECEIVED,{files:[E],isWikiTextfieldFocused:r.isWikiTextfield(d(H)),wikiTextfield:H,isPaste:true,successCallback:function(){a(i)}});return function(K,J){return new k()}});var C=new k();function a(F,E){if(a.eventQueue){a.eventQueue.push({type:F,object:E});return}a.eventQueue=[{type:F,object:E}];while(a.eventQueue.length>0){var G=a.eventQueue.splice(0,1)[0];var H=C(G.type,G.object);if(H){C=H}}delete a.eventQueue}D._getStateMap=function(){return{events:{EVENT_WINDOW_KEYDOWN:A,EVENT_WINDOW_PASTE:m,EVENT_FILE_LOADED:c,EVENT_FILE_LOAD_ERROR:y,EVENT_IMAGE_LOADED:p,EVENT_IMAGE_LOAD_ERROR:t,EVENT_DIALOG_LOADED:i,EVENT_DIALOG_CLOSED:w,EVENT_DIALOG_CANCELED:q,EVENT_TIMEOUT:n},states:{StateIdle:k,StateCatchClipboard:u,StateImageLoading:z,StateFileLoading:s,StateAttachImage:j}}};D.initIssuePaste=function(){d(window).on("keydown",function(E){a(A,E)});d(window).on("paste",function(E){a(m,r.normalizePasteEvent(E))});o.bind("Dialog.hide",function(E,G,F){if(F){a(q,G)}else{a(w,G)}})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/trace.js' */
define("dndattachment/ctrlv/trace",["require"],function(b){var a=b("jira/util/logger");return a.trace});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/tracking.js' */
define("dndattachment/ctrlv/tracking",["require","exports"],function(c,b){var a=c("jira/analytics");b.trigger=function(e,d){a.send({name:e,data:d||{}})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/executor.js' */
define("dndattachment/ctrlv/executor",["require","exports"],function(e,c){var d=e("jira/jquery/deferred");var g=e("jquery");var a=e("jira/util/events");var b=e("dndattachment/ctrlv/html5");var f=e("dndattachment/upload/handler");c.register=function(){var h={name:"JIRA Ctrl+V attachment executor",weight:5,isValid:function(j,i){return !!i.isPaste},processFiles:function(k,j){var i=d();b.show().done(function(n){var m=g("#attach-screenshot-placeholder-message");var l=g.Event("paste");l.clipboardData={files:k};m.focus();setTimeout(function(){m.trigger(l)});a.bind("Dialog.hide",function(o,q,p){if(p){i.reject()}else{i.resolve([q.find("#attachscreenshotname").val()+".png"])}})});return i}};f.registerExecutor(h)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/initialize.js' */
define("dndattachment/ctrlv/initialize",["require","exports"],function(b,d){var h=b("jira/jquery/deferred");var e=b("jquery");var k=b("underscore");var l=b("dndattachment/ctrlv/utility");var f=b("dndattachment/ctrlv/html5");var g=b("dndattachment/ctrlv/issue-paste");var j=b("dndattachment/ctrlv/tracking");var c=b("dndattachment/ctrlv/executor");var i=b("jira/dialog/dialog-register");var a=b("jira/dialog/form-dialog");d.init=function(){var m=a.extend({options:{}});window.JIRA.ScreenshotDialog=m;g.initIssuePaste();e(document).ready(function(){var o=h();o.resolve();i.attachScreenshotDialog=new m({id:"attach-screenshot-dialog",trigger:".issueaction-attach-screenshot-html5",isIssueDialog:true,onContentRefresh:function n(){this.$form.bind("before-submit",function p(q){var r=f.validateFormData(f.screenshotFileUpload,e.trim(f.dialogView.getFileNameInput().val()));if(f.dialogView.getFileSize()==0){q.preventDefault();return false}else{if(!k.isEmpty(r)){f.dialogView.displayErrors(r);q.preventDefault();return false}}return true})},delayShowUntil:function(){return o}});e(document).bind("dialogContentReady",function(q,p){if(p===i.attachScreenshotDialog&&document.getElementById("attach-screenshot-form")!==null){j.trigger("attach.screenshot.html5.contentReady");f.initScreenshotPasteHandler()}});e(document).ready(function(){e(document).on("click","#attach-screenshot-html5",function(){j.trigger("attach.screenshot.html5.display")})})});c.register()}});require(["dndattachment/ctrlv/initialize","jquery"],function(b,a){a(function(){b.init()})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-amd', location = 'js/aui-amd.js' */
define("dndattachment/aui/dialog2",function(){return AJS.dialog2});define("dndattachment/aui/escape-html",function(){return AJS.escapeHtml});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-amd', location = 'js/dnd-template-wrapper.js' */
define("dndattachment/templates",function(){return window.JIRA.Templates.DnDAttachmentPlugin});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:attachment-menu-link-init', location = 'js/menu/initAttachmentMenuLink.js' */
require(["jquery","jira/analytics","jira/util/events","dndattachment/util/events/types"],function(c,f,j,i){var e="issueaction-attach-file";var a=function(k){k.addClass(e);k.click()};var b=function(){var k=c('<input type="file" multiple />');k.change(function(l){j.trigger(i.ATTACHMENT_FOR_PAGE_RECEIVED,{files:k[0].files})});k.click()};var h=function(k){return !!k.data("issuekey")};var g=function(){c(document).on("click",".unified-attach-file",function(m){f.send({name:"issue.dnd.attachment.opsbar.attachFiles.linkClick",data:{}});var k=c(m.target);if(k.hasClass(e)){return}m.preventDefault();var l=c(".issue-drop-zone").length;if(l&&!h(k)){b()}else{a(k)}})};var d=function(){g()};if(c.isReady){d()}else{c(d)}});;
;
/* module-key = 'jira.webresources:jira-analytics', location = '/includes/jira/analytics/analytics-init.js' */
require(["jquery","jira/analytics","jira/util/data/meta"],function(a,t,c){"use strict";function n(a){var t=c.get("analytics-prefix");return t&&(a=t+a),a}function i(){a("[data-track-pageview]").each(function(c,i){t.send({name:n(a(i).data("track-pageview"))})})}a(document).on("click","[data-track-click]",function(){t.send({name:n(a(this).data("track-click"))})}),a(document).on("auxclick","[data-track-auxclick]",function(){t.send({name:n(a(this).data("track-auxclick"))})}),a(i)});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/jquery/plugins/avataror/avataror.js' */
jQuery.fn.avataror=function(i){var e=jQuery,t=e(document);this.each(function(){var r=e(this),a=r.find("img").attr("src");r.css({"-moz-border-radius":"10px","-webkit-border-radius":"10px"}),r.html("<p>Loading?</p>");var g={previewSize:48};g.preview=e("<div/>").addClass("avataror-preview").css({border:"solid 1px #000",float:"left",height:g.previewSize+"px",overflow:"hidden",width:g.previewSize+"px",position:"relative",top:"-9999em",left:"-9999em"}),g.preview.prependTo(i.previewElement),g.img=e('<img alt="Avatar Source"/>'),g.img.load(function(){g.image=e("<div/>").css({background:"url('"+a+"') no-repeat",clear:"left",position:"relative"}),g.marker=e("<div/>").css({cursor:"move",position:"relative"}),g.dash=e("<div/>"),g.shadow=e("<div/>"),g.dash.add(g.shadow).css({cursor:"move",opacity:.5,left:0,top:0,position:"absolute"}),g.image.append(g.shadow).append(g.dash).append(g.marker),r.append(g.image),g.marker.html("<div></div><div></div><div></div><div></div>"),e("div",g.marker).each(function(i){var t=e(this);t.css({background:"#000",border:"solid 1px #fff",width:"10px",height:"10px",position:"absolute","font-size":"1px"}),t.css(["left","right","right","left"][i],"-6px"),t.css(["top","top","bottom","bottom"][i],"-6px"),t.css("cursor",["nw-resize","ne-resize","se-resize","sw-resize"][i]),t.mousedown(function(e){e.preventDefault(),e.stopPropagation(),g.dragging={x:e.pageX,y:e.pageY,ax:g.x,ay:g.y,w:g.width,h:g.height,i:i+1},g.shadow.hide()})}),g.marker.add(g.image).mousedown(function(i){i.preventDefault(),g.dragging={x:i.pageX,y:i.pageY,ax:g.x,ay:g.y,w:g.width,h:g.height},g.shadow.hide()}),t.mouseup(function(i){g.handleMouseUp(i)}),t.mousemove(function(i){g.dragging&&(g.handleMouseMove(i.pageX,i.pageY),i.preventDefault())}),g.imgwidth=g.img[0].naturalWidth,g.imgheight=g.img[0].naturalHeight,g.x=parseInt(e("#avatar-offsetX").val()),g.y=parseInt(e("#avatar-offsetY").val()),g.width=parseInt(e("#avatar-width").val()),g.height=g.width,g.image.css({width:g.imgwidth+"px",height:g.imgheight+"px"}),g.setMarker(),r.css({width:g.imgwidth+"px"}),g.preview.css({position:"static"}),e("p",r).remove(),r.trigger("AvatarImageLoaded"),g.adjustPreview()}),g.img.attr("src",a),g.preview.append(g.img),g.setMarker=function(){g.marker.css("border","dashed 1px #fff"),g.dash.css("border","solid 1px #000"),g.shadow.css("border","solid 1px #000"),g.marker.add(this.dash).css("left",this.x-1+"px"),g.marker.add(g.dash).css("top",g.y-1+"px"),g.shadow.css("border-left-width",g.x+"px"),g.shadow.css("border-right-width",g.imgwidth-g.x-g.width+"px"),g.shadow.css("border-top-width",g.y+"px"),g.shadow.css("border-bottom-width",g.imgheight-g.y-g.height+"px"),g.shadow.css("width",g.width+"px"),g.shadow.css("height",g.height+"px"),g.marker.add(g.dash).css("width",g.width+"px"),g.marker.add(g.dash).css("height",g.height+"px")},g.adjustPreview=function(){g.img.attr("width",g.imgwidth*g.previewSize/g.width),g.img.attr("height",g.imgheight*g.previewSize/g.height),g.img.css("margin-left","-"+g.x*g.previewSize/g.width+"px"),g.img.css("margin-top","-"+g.y*g.previewSize/g.height+"px"),g.preview.select()},g.handleMouseMove=function(i,e){if(g.dragging.nextExec=g.dragging.nextExec||0,0!=g.dragging.nextExec)return void g.dragging.nextExec--;g.dragging.nextExec=3;var t=i-g.dragging.x,r=e-g.dragging.y;if(this.dragging.i){(0,g.resizeHandlers[this.dragging.i-1])(t,r)}else g.x=g.dragging.ax+t,g.y=g.dragging.ay+r,g.x+g.width>g.imgwidth&&(g.x=g.imgwidth-g.width),g.y+g.height>g.imgheight&&(g.y=g.imgheight-g.height),g.x<0&&(g.x=0),g.y<0&&(g.y=0);g.setMarker(),g.adjustPreview()},g.handleMouseUp=function(i){e("#avatar-offsetX").val(g.x),e("#avatar-offsetY").val(g.y),e("#avatar-width").val(g.width),g.dragging=null,g.shadow.show()},g.originX=function(){return g.dragging.ax},g.originY=function(){return g.dragging.ay},g.originBottomX=function(){return g.dragging.ax+g.dragging.w},g.originBottomY=function(){return g.dragging.ay+g.dragging.h},g.originNw=function(){return{x:g.originX(),y:g.originY()}},g.originNe=function(){return{x:g.originBottomX(),y:g.originY()}},g.originSe=function(){return{x:g.originBottomX(),y:g.originBottomY()}},g.originSw=function(){return{x:g.originX(),y:g.originBottomY()}},g.nwHandler=function(i,e){var t=g.originSe(),r={x:g.originX()+i,y:g.originY()+e},a=Math.abs(r.x-t.x),o=Math.abs(r.y-t.y),n=Math.min(a,o);n<20&&(n=20),t.x-n<0&&(n=t.x),t.y-n<0&&(n=t.y),g.x=t.x-n,g.y=t.y-n,g.width=g.height=n},g.neHandler=function(i,e){var t=g.originSw(),r={x:g.originBottomX()+i,y:g.originY()+e},a=Math.abs(r.x-t.x),o=Math.abs(r.y-t.y),n=Math.min(a,o);n<20&&(n=20),t.x+n>g.imgwidth&&(n=g.imgwidth-t.x),t.y-n<0&&(n=t.y),g.y=t.y-n,g.width=g.height=n},g.seHandler=function(i,e){var t=g.originNw(),r={x:g.originBottomX()+i,y:g.originBottomY()+e},a=Math.abs(r.x-t.x),o=Math.abs(r.y-t.y),n=Math.min(a,o);n<20&&(n=20),t.x+n>g.imgwidth&&(n=g.imgwidth-t.x),t.y+n>g.imgheight&&(n=g.imgheight-t.y),g.width=g.height=n},g.swHandler=function(i,e){var t=g.originNe(),r={x:g.originX()+i,y:g.originBottomY()+e},a=Math.abs(r.x-t.x),o=Math.abs(r.y-t.y),n=Math.min(a,o);n<20&&(n=20),t.x-n<0&&(n=t.x),t.y+n>g.imgheight&&(n=g.imgheight-t.y),g.x=t.x-n,g.width=g.height=n},g.resizeHandlers=[g.nwHandler,g.neHandler,g.seHandler,g.swHandler]})};;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/Avatar.js' */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("jira/ajs/avatarpicker/avatar",["jira/lib/class"],function(t){return t.extend({init:function(t){this._id=t.id,this._isSystemAvatar=t.isSystemAvatar,this._isSelected=t.isSelected,this._urls=t.urls},setUnSelected:function(){this._isSelected=!1},setSelected:function(){this._isSelected=!0},isSelected:function(){return!!this._isSelected},isSystemAvatar:function(){return this._isSystemAvatar},getId:function(){return this._id},getUrl:function(t){return this._urls[t]},toJSON:function(){return{id:this._id,isSystemAvatar:this._isSystemAvatar,isSelected:this._isSelected,urls:this._urls}}})}),define("jira/ajs/avatarpicker/avatar-factory",["jira/ajs/avatarpicker/avatar","exports"],function(t,e){e.createCustomAvatar=function(e){return e.isSystemAvatar=!1,new t(e)},e.createSystemAvatar=function(e){return e.isSystemAvatar=!0,new t(e)}}),define("jira/ajs/avatarpicker/avatar/sizes",["exports","jquery"],function(t,e){t.getSizeObjectFromName=function(i){if("object"===(void 0===i?"undefined":_typeof(i)))return i;"string"==typeof i&&e.trim(i);return t.LARGE.param===i?t.LARGE:t.MEDIUM.param===i?t.MEDIUM:t.SMALL.param===i?t.SMALL:"xsmall"===i?t.SMALL:t.LARGE},t.LARGE={param:"large",height:48,width:48},t.MEDIUM={param:"medium",width:32,height:32},t.SMALL={param:"small",width:16,height:16}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarManager.js' */
define("jira/ajs/avatarpicker/avatar-manager",["jira/util/formatter","jira/lib/class","wrm/context-path","jquery"],function(t,a,r,e){"use strict";var s=r();return a.extend({init:function(t){this.store=t.store,this.ownerId=t.ownerId,this.username=t.username,this.anonymousAvatarId=t.anonymousAvatarId,this.avatarSrcBaseUrl=t.avatarSrcBaseUrl},selectAvatar:function(t,a){return this.store.selectAvatar(t,a)},getById:function(t){return this.store.getById(t)},destroy:function(t,a){this.store.destroy(t,a)},update:function(t,a){this.store.update(t,a)},add:function(t,a){this.store._add(t,a)},getAllSystemAvatars:function(){return this.store.getAllSystemAvatars()},getAllCustomAvatars:function(){return this.store.getAllCustomAvatars()},getSelectedAvatar:function(){return this.store.getSelectedAvatar()},getAllAvatars:function(){return this.store.getAllAvatars()},getAllAvatarsRenderData:function(t){var a,r=this,e=this.getAllAvatars(),s={system:[],custom:[]};for(a=0;a<e.system.length;a++)s.system.push(r.getAvatarRenderData(e.system[a],t));for(a=0;a<e.custom.length;a++)s.custom.push(r.getAvatarRenderData(e.custom[a],t));return s},getAvatarRenderData:function(t,a){var r=t.toJSON();return r.src=this.getAvatarSrc(t,a),r.width=a.width,r.height=a.height,r},refreshStore:function(t){this.store.refresh(t)},getAvatarSrc:function(a,r){return this.store.isTempAvatar(a)?s+"/secure/temporaryavatar?"+e.param({cropped:!0,magic:(new Date).getTime(),size:r.param}):a.getUrl(t.format("{0}x{1}",r.height,r.width))},createTemporaryAvatar:function(t,a){this.store.createTemporaryAvatar(t,a)},createAvatarFromTemporary:function(t,a){this.store.createAvatarFromTemporary(t,a)},getAnonymousAvatarId:function(){return this.anonymousAvatarId}})}),define("jira/ajs/avatarpicker/avatar-manager-factory",["jira/ajs/avatarpicker/avatar-store","jira/ajs/avatarpicker/avatar-manager","wrm/context-path","exports"],function(t,a,r,e){"use strict";var s=r();e.createUniversalAvatarManager=function(r){var e,n="",o="",i="",v="";if(r.projectId){var u=s+"/rest/api/latest/universal_avatar/type/"+r.avatarType+"/owner/"+r.projectId;e=u;var c=u+"/avatar";n=null,o=u+"/temp",i=c,v=c}else e=s+"/rest/api/latest/avatar/project/system",o=s+"/rest/api/latest/avatar/project/temporary",i=s+"/rest/api/latest/avatar/project/temporaryCrop";var l=new t({restQueryUrl:e,restUpdateUrl:n,restCreateTempUrl:o,restUpdateTempUrl:i,restSingleAvatarUrl:v,defaultAvatarId:r.defaultAvatarId});return new a({store:l,ownerId:r.projectId,avatarSrcBaseUrl:s+"/secure/projectavatar"})},e.createProjectAvatarManager=function(t){return t.avatarType="project",e.createUniversalAvatarManager(t)},e.createUserAvatarManager=function(r){var e=s+"/rest/api/latest/user",n=new t({restQueryUrl:e+"/avatars",restUpdateUrl:e+"/avatar",restCreateTempUrl:e+"/avatar/temporary",restUpdateTempUrl:e+"/avatar",restSingleAvatarUrl:e+"/avatar",restParams:{username:r.username},defaultAvatarId:r.defaultAvatarId});return new a({store:n,username:r.username,avatarSrcBaseUrl:s+"/secure/useravatar"})}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarStore.js' */
define("jira/ajs/avatarpicker/avatar-store",["jira/util/urls","jira/util/formatter","jira/ajs/avatarpicker/avatar-util","jira/ajs/avatarpicker/avatar-factory","jira/ajs/ajax/smart-ajax","jira/lib/class","jquery"],function(t,e,r,a,s,i,o){return i.extend({TEMP_ID:"TEMP",init:function(e){if(!e.restQueryUrl)throw new Error("JIRA.AvatarStore.init: You must specify [restQueryUrl], The rest url for querying avatars (see class description)");if(!e.restCreateTempUrl)throw new Error("JIRA.AvatarStore.init: You must specify [restCreateTempUrl], The rest url for creating a temporary avatar (see class description)");if(!e.restUpdateTempUrl)throw new Error("JIRA.AvatarStore.init: You must specify [restUpdateTempUrl], The rest url for updating a temporary avatar (see class description)");if(!e.defaultAvatarId)throw new Error("JIRA.AvatarStore.init: You must specify [defaultAvatarId] to the contructor so the store knows what to select if you delete the selected one");this.restQueryUrl=e.restQueryUrl,this.restUpdateUrl=e.restUpdateUrl,this.restCreateTempUrl=e.restCreateTempUrl,this.restUpdateTempUrl=e.restUpdateTempUrl,this.restSingleAvatarUrl=e.restSingleAvatarUrl,this.restParams=e.restParams||{},this.restParams.atl_token=t.atl_token(),this.defaultAvatarId=e.defaultAvatarId,this.avatars={system:[],custom:[]}},_buildCompleteUrl:function(t){var r=t;if(this.restParams){var a="";for(var s in this.restParams)a+=e.format("&{0}={1}",encodeURIComponent(s),encodeURIComponent(this.restParams[s]));r+="?"+a.substr(1)}return r},getById:function(t){var e;return o.each(this.avatars.system,function(r,a){if(this.getId()===t)return e=a,!1}),e||o.each(this.avatars.custom,function(r,a){if(this.getId()===t)return e=a,!1}),e},isTempAvatar:function(t){return t.getId()===this.TEMP_ID},_selectAvatar:function(t){var e=this.getSelectedAvatar();e&&e.setUnSelected(),t.setSelected()},selectAvatar:function(t,e){var r=this;if(!t)throw new Error("JIRA.AvatarStore.selectAvatar: Cannot select Avatar that does not exist");this.restUpdateUrl?s.makeRequest({type:"PUT",contentType:"application/json",dataType:"json",url:this._buildCompleteUrl(this.restUpdateUrl),data:JSON.stringify(t.toJSON()),success:function(){r._selectAvatar(t),e.success&&e.success.call(this,t)},error:e.error}):(r._selectAvatar(t),e.success&&e.success.call(this,t))},_destory:function(t){var e=o.inArray(t,this.avatars.custom);if(-1===e)throw new Error("JIRA.AvatarStore._destroy: Cannot remove avatar ["+t.getId()+"], it might be a system avatar (readonly) or does not exist.");this.avatars.custom.splice(e,1)},destroy:function(t,e){var r=this;if(e=e||{},!t)throw new Error("JIRA.AvatarStore.destroy: Cannot delete Avatar that does not exist");s.makeRequest({type:"DELETE",url:this.getRestUrlForAvatar(t),success:function(){r._destory(t),t.isSelected()?r.selectAvatar(r.getById(r.defaultAvatarId),e):e.success&&e.success.apply(this,arguments)},error:e.error})},getSelectedAvatar:function(){for(var t=0;t<this.avatars.custom.length;t++)if(this.avatars.custom[t].isSelected())return this.avatars.custom[t];for(t=0;t<this.avatars.system.length;t++)if(this.avatars.system[t].isSelected())return this.avatars.system[t]},_update:function(t){var e=this;if(!this.getById(t.getId()))throw new Error("JIRA.AvatarStore._update: Cannot update avatar ["+t.getId()+"], it might be a system avatar (readonly) or does not exist.");o.each(this.avatars.custom,function(r){this.getId()===t.getId()&&(e.avatars.custom[r]=t)})},update:function(t,e){var r=this;e=e||{},s.makeRequest({type:"PUT",url:this.getRestUrlForAvatar(t),error:e.error,success:function(){r._update(t),e.success&&e.success.apply(this,arguments)}})},_add:function(t){t.isSystemAvatar()?this.avatars.system.push(t):this.avatars.custom.push(t)},createAvatarFromTemporary:function(t,e){var r=this;e=e||{},this.restUpdateTempUrl&&s.makeRequest({type:"POST",url:this._buildCompleteUrl(this.restUpdateTempUrl),data:JSON.stringify(t),contentType:"application/json",dataType:"json",success:function(t){t||(t={id:r.TEMP_ID,isSelected:!0});var s=a.createCustomAvatar(t);r._add(s),e.success&&e.success.call(this,t)},error:e.error})},createTemporaryAvatar:function(t,e){e=o.extend(!0,{},e,{params:this.restParams}),r.uploadTemporaryAvatar(this.restCreateTempUrl,t,e)},_refresh:function(t){var e=this;e.avatars.system=[],e.avatars.custom=[],t.system&&o.each(t.system,function(t,r){e.avatars.system.push(a.createSystemAvatar(r))}),t.custom&&o.each(t.custom,function(t,r){e.avatars.custom.push(a.createCustomAvatar(r))})},refresh:function(t){var e=this,r=this.getById(e.TEMP_ID);t=t||{},s.makeRequest({url:this._buildCompleteUrl(this.restQueryUrl),error:t.error,success:function(a){e._refresh(a),r&&e._add(r),t.success&&t.success.apply(this,arguments)}})},getAllAvatars:function(){return this.avatars},getAllSystemAvatars:function(){return this.avatars.system},getAllCustomAvatars:function(){return this.avatars.custom},getRestUrlForAvatar:function(t){return this._buildCompleteUrl(this.restSingleAvatarUrl+"/"+t.getId())}})});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarUtil.js' */
define("jira/ajs/avatarpicker/avatar-util",["jira/util/urls","jira/util/logger","jira/attachment/inline-attach","jquery"],function(e,r,a,n){var t={uploadUsingIframeRemoting:function(o,s,i){i=i||{};var l=s.val(),c=new a.Form(new a.FileInput(s,!1)),u=c.addStaticProgress(l),d=c.cloneFileInput();c.fileSelector.clear();var g=new a.Timer(function(){!this.cancelled&&u.show()},this),f=new a.FormUpload({$input:d,url:o,params:n.extend({},i.params,{filename:l,atl_token:e.atl_token()}),scope:this,before:function(){!this.cancelled&&u.start()},success:function(e,r){e.errorMessages&&e.errorMessages.length?c.addErrorWithFileName(e.errorMessages[0],l,t.getErrorTarget(c)):i.success&&i.success(e,r)},error:function(e){r.log(e),this.cancelled||(e.indexOf("SecurityTokenMissing")>=0?c.addError(a.Text.tr("upload.xsrf.timeout",l),t.getErrorTarget(c)):c.addError(a.Text.tr("upload.error.unknown",l),t.getErrorTarget(c)))},after:function(){g.cancel(),u.remove(),this.cancelled||c.enable()}});u.onCancel(function(){f.abort()}),f.upload()},uploadUsingFileApi:function(r,o,s){var i,l,c=o[0].files[0],u=new a.Form(new a.FileInput(o,!1)),d=u.addProgress(c);s=s||{},i=new a.Timer(function(){d.show()}),l=new a.AjaxUpload({file:c,params:n.extend({},s.params,{filename:c.name,size:c.size,atl_token:e.atl_token()}),scope:this,url:r,before:function(){o.hide(),d.start()},progress:function(e){d.progress.$progress.parent().parent().show(),d.update(e)},success:function(e,r){e.errorMessages&&e.errorMessages.length?u.addErrorWithFileName(e.errorMessages[0],c.name,t.getErrorTarget(u)):201===r&&s.success(e,r)},error:function(e,r){r<0?u.addError(e,t.getErrorTarget(u)):u.addError(a.Text.tr("upload.error.unknown",c.name),t.getErrorTarget(u)),s.error&&s.error(e,r)},after:function(){i.cancel(),d.finish().remove(),o.val("").show()}}),l.upload(),d.onCancel(function(){l.abort()})},getErrorTarget:function(e){return{$element:e.$form.find(".error")}},uploadTemporaryAvatar:function(e,r,n){a.AjaxPresenter.isSupported(r)?this.uploadUsingFileApi(e,r,n):this.uploadUsingIframeRemoting(e,r,n)}};return t});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarPicker.js' */
define("jira/ajs/avatarpicker/avatar-picker",["jira/util/logger","jira/util/formatter","jira/util/strings","jira/ajs/avatarpicker/avatar-picker/image-editor","jira/ajs/ajax/smart-ajax","jira/dialog/dialog","jira/ajs/control","aui/message","jquery"],function(a,e,t,r,i,n,c,o,d){"use strict";return c.extend({init:function(a){this.avatarManager=a.avatarManager,this.avatarRenderer=a.avatarRenderer,this.imageEditor=a.imageEditor,this.size=a.size,this.selectCallback=a.select,this.cropperDialog=null,this.initialSelection=a.initialSelection},render:function(a){var e=this;this.avatarManager.refreshStore({success:function(){e.cropperDialog instanceof n&&(e.cropperDialog.hide(),delete e.cropperDialog),e.element=d('<div id="jira-avatar-picker" />'),e.element.html(JIRA.Templates.AvatarPicker.picker({avatars:e.avatarManager.getAllAvatarsRenderData(e.size)})),e._assignEvents("selectAvatar",e.element.find(".jira-avatar button")),e._assignEvents("deleteAvatar",e.element.find(".jira-delete-avatar")),e._assignEvents("uploader",e.element.find("#jira-avatar-uploader")),void 0!==e.initialSelection&&e.getAvatarElById(e.initialSelection).addClass("jira-selected-avatar"),a(e.element)},error:function(t,r,i,n){e.appendErrorContent(e.element,n),a(e.element)}})},appendErrorContent:function(a,e){try{var r=JSON.parse(e.data);r&&r.errorMessages?d.each(r.errorMessages,function(e,r){o.error(a,{body:t.escapeHtml(r),closeable:!1,shadowed:!1})}):a.append(i.buildDialogErrorContent(e,!0))}catch(t){a.append(i.buildDialogErrorContent(e,!0))}},uploadTempAvatar:function(e){var t=this;this.avatarManager.createTemporaryAvatar(e,{success:function(a){a.id?t.render(function(){t.selectAvatar(a.id)}):(e.val(""),t.cropperDialog=new n({id:"project-avatar-cropper",width:560,content:function(e){function r(){var a=i.find("input[type=submit]"),e=d("<span class='icon throbber loading'></span>");return a.attr("aria-disabled","true").attr("disabled",""),a.before(e),function(){e.remove(),a.removeAttr("aria-disabled").removeAttr("disabled")}}var i=t.imageEditor.render(a);t.imageEditor.edit({confirm:function(a){var e=r();t.avatarManager.createAvatarFromTemporary(a,{success:function(a){t.render(function(){t.selectAvatar(a.id)})},error:e})}}),i.find(".cancel").click(function(){t.cropperDialog.hide()}),e(i)}}),t.cropperDialog.bind("dialogContentReady",function(){d(t).trigger(r.LOADED)}),t.cropperDialog.bind("Dialog.hide",function(){d(t).trigger(r.DISMISSED)}),t.cropperDialog.show())},error:function(){a.log(arguments)}})},getAvatarElById:function(a){return this.element.find(".jira-avatar[data-id='"+a+"']")},selectAvatar:function(a){var e=this.avatarManager.getById(a),t=this;this.avatarManager.selectAvatar(this.avatarManager.getById(a),{error:function(){},success:function(){t.getAvatarElById(a).remove(),t.selectCallback&&t.selectCallback.call(t,e,t.avatarManager.getAvatarSrc(e,t.size))}})},deleteAvatar:function(a){var t=this;confirm("Are you sure you want to delete avatar?")&&this.avatarManager.destroy(this.avatarManager.getById(a),{error:function(){},success:function(){var e=t.avatarManager.getSelectedAvatar(),r=t.getAvatarElById(a);r.fadeOut(function(){r.remove()}),e.getId()!==a&&(t.getAvatarElById(e.getId()).addClass("jira-selected-avatar"),t.selectCallback.call(t,e,t.avatarManager.getAvatarSrc(e,t.size),!0))}})},_events:{uploader:{change:function(a,e){this.uploadTempAvatar(e)}},deleteAvatar:{click:function(a,e){this.deleteAvatar(e.attr("data-id"))}},selectAvatar:{click:function(a,e){"select-avatar-button"===e[0].id&&this.selectAvatar(e.attr("data-id"))}}}})}),define("jira/ajs/avatarpicker/avatar-picker/image-editor",["jira/ajs/control","jquery"],function(a,e){"use strict";var t=a.extend({render:function(a){return this.element=e('<div id="avatar-picker-image-editor"/>').html(JIRA.Templates.AvatarPicker.imageEditor(a)),this.element},edit:function(a){var t=this,r=this.element.find(".avataror");a=a||{},r.unbind(),r.bind("AvatarImageLoaded",function(){a.ready&&a.ready()}),r.find("img").load(function(){r.avataror({previewElement:t.element.find(".jira-avatar-cropper-header"),parent:t.element})}),this.element.find("#avataror").submit(function(t){t.preventDefault(),a.confirm&&a.confirm({cropperOffsetX:e("#avatar-offsetX").val(),cropperOffsetY:e("#avatar-offsetY").val(),cropperWidth:e("#avatar-width").val()})}).find(".cancel").click(function(e){e.preventDefault(),a.cancel&&a.cancel()})}});return t.LOADED="imageEditorLoaded",t.DISMISSED="imageEditorDismissed",t}),define("jira/ajs/avatarpicker/avatar-picker-factory",["jira/util/browser","jira/util/formatter","jira/ajs/avatarpicker/avatar-picker","jira/ajs/avatarpicker/avatar-picker/image-editor","jira/ajs/avatarpicker/avatar-manager-factory","jira/ajs/avatarpicker/avatar/sizes","jira/dialog/form-dialog","wrm/context-path","wrm/data","jquery","exports"],function(a,e,t,r,i,n,c,o,d,l,s){"use strict";s.createUniversalAvatarPicker=function(a){return new t({avatarManager:i.createUniversalAvatarManager({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId,avatarType:a.avatarType}),initialSelection:a.initialSelection,imageEditor:new r,size:a.hasOwnProperty("avatarSize")?a.avatarSize:n.LARGE,select:a.select})},s.createProjectAvatarPicker=function(a){return new t({avatarManager:i.createProjectAvatarManager({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId}),imageEditor:new r,size:n.LARGE,select:a.select})},s.createUserAvatarPicker=function(a){return new t({avatarManager:i.createUserAvatarManager({username:a.username,defaultAvatarId:a.defaultAvatarId}),imageEditor:new r,size:n.LARGE,select:a.select})},s.createUniversalAvatarPickerDialog=function(a){var t=a.initialSelection||a.defaultAvatarId,r=new c({trigger:a.trigger,id:"project-avatar-picker",width:600,stacked:!0,content:function(i){var n,c;c=l('<div id="projectavatar-content-wrapper"/>'),l("<h2 />").text(a.title||"Select a Project Avatar").appendTo(c),n=s.createUniversalAvatarPicker({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId,initialSelection:t,avatarType:a.avatarType,avatarSize:a.avatarSize,select:function(e,i,n){t=String(e.getId()),a.select&&a.select.apply(this,arguments),n||r.hide()}}),n.render(function(a){c.append(a),i(c)})}});r._focusFirstField=function(){}},s.createProjectAvatarPickerDialog=function(a){var t=new c({trigger:a.trigger,id:"project-avatar-picker",width:600,stacked:!0,content:function(r){var i,n;n=l('<div id="projectavatar-content-wrapper"/>'),l("<h2 />").text("Select a Project Avatar").appendTo(n),i=s.createProjectAvatarPicker({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId,select:function(e,r,i){a.select&&a.select.apply(this,arguments),i||t.hide()}}),i.render(function(a){n.append(a),r(n)})}});t._focusFirstField=function(){}};var v=d.claim("jira.core:avatar-picker-data.data");s.createUserAvatarPickerDialog=function(t){if(v&&v.isEnabled)return void l(t.trigger).click(function(e){var t=o()+v.url;t+=(t.indexOf("?")>-1?"&":"?")+"continue="+encodeURIComponent(window.location.href),e.preventDefault(),e.stopPropagation(),a.reloadViaWindowLocation(t)});var r=new c({trigger:t.trigger,id:"user-avatar-picker",width:600,stacked:!0,content:function(a){var i,n;n=l('<div id="useravatar-content-wrapper"/>'),l("<h2 />").text("Select a User Avatar").appendTo(n),i=s.createUserAvatarPicker({username:t.username,defaultAvatarId:t.defaultAvatarId,select:function(a,e,i){t.select&&t.select.apply(this,arguments),l(".avatar-image").attr("src",e),i||r.hide()}}),i.render(function(e){n.append(e),a(n)})}})}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/GravatarUtil.js' */
define("jira/ajs/avatarpicker/gravatar-util",["jquery","exports"],function(a,r){r.showGravatarHelp=function(r){void 0!==r&&void 0!==r.entry&&(a(".gravatar-signup-text").addClass("hidden"),a(".gravatar-login-text").removeClass("hidden"))},r.displayGravatarHelp=function(){var t=a("#gravatar_json_url");t.length&&a.ajax(t.val(),{dataType:"jsonp",success:r.showGravatarHelp})}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/initAvatarPicker.js' */
!function(){var a=require("jquery"),r=require("jira/ajs/avatarpicker/avatar/sizes"),e=require("jira/ajs/avatarpicker/avatar-factory"),t=require("jira/ajs/avatarpicker/avatar-manager-factory"),c=require("jira/ajs/avatarpicker/avatar-picker-factory"),A=require("jira/ajs/avatarpicker/gravatar-util");AJS.namespace("JIRA.Avatar",null,require("jira/ajs/avatarpicker/avatar")),AJS.namespace("JIRA.Avatar.createCustomAvatar",null,e.createCustomAvatar),AJS.namespace("JIRA.Avatar.createSystemAvatar",null,e.createSystemAvatar),AJS.namespace("JIRA.Avatar.getSizeObjectFromName",null,r.getSizeObjectFromName),AJS.namespace("JIRA.Avatar.LARGE",null,r.LARGE),AJS.namespace("JIRA.Avatar.MEDIUM",null,r.MEDIUM),AJS.namespace("JIRA.Avatar.SMALL",null,r.SMALL),AJS.namespace("JIRA.AvatarManager",null,require("jira/ajs/avatarpicker/avatar-manager")),AJS.namespace("JIRA.AvatarManager.createUniversalAvatarManager",null,t.createUniversalAvatarManager),AJS.namespace("JIRA.AvatarManager.createProjectAvatarManager",null,t.createProjectAvatarManager),AJS.namespace("JIRA.AvatarManager.createUserAvatarManager",null,t.createUserAvatarManager),AJS.namespace("JIRA.AvatarPicker",null,require("jira/ajs/avatarpicker/avatar-picker")),AJS.namespace("JIRA.AvatarPicker.ImageEditor",null,require("jira/ajs/avatarpicker/avatar-picker/image-editor")),AJS.namespace("JIRA.AvatarPicker.createUniversalAvatarPicker",null,c.createUniversalAvatarPicker),AJS.namespace("JIRA.AvatarPicker.createProjectAvatarPicker",null,c.createProjectAvatarPicker),AJS.namespace("JIRA.AvatarPicker.createUserAvatarPicker",null,c.createUserAvatarPicker),AJS.namespace("JIRA.createUniversalAvatarPickerDialog",null,c.createUniversalAvatarPickerDialog),AJS.namespace("JIRA.createProjectAvatarPickerDialog",null,c.createProjectAvatarPickerDialog),AJS.namespace("JIRA.createUserAvatarPickerDialog",null,c.createUserAvatarPickerDialog),AJS.namespace("JIRA.AvatarStore",null,require("jira/ajs/avatarpicker/avatar-store")),AJS.namespace("JIRA.AvatarUtil",null,require("jira/ajs/avatarpicker/avatar-util")),AJS.namespace("JIRA.GravatarUtil.showGravatarHelp",null,A.showGravatarHelp),a(function(){c.createUserAvatarPickerDialog({trigger:"#user_avatar_image",username:a("#avatar-owner-id").text(),defaultAvatarId:a("#default-avatar-id").text()}),a("#gravatar_help_params")&&A.displayGravatarHelp()})}();;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarPicker.soy' */
// This file was automatically generated from AvatarPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.AvatarPicker.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.AvatarPicker == 'undefined') { JIRA.Templates.AvatarPicker = {}; }


JIRA.Templates.AvatarPicker.picker = function(opt_data, opt_ignored) {
  var output = '<form class="jira-avatar-upload-form aui top-label" action="#"><input name="id" value="10000" type="hidden" ><input name="pid" value="10000" type="hidden" ><div class="field-group"><label for="jira-avatar-uploader">' + soy.$$escapeHtml('Upload a new avatar') + '</label><input type="file" class="ignore-inline-attach" name="avatar" id="jira-avatar-uploader"/><div class="error"></div></div></form><div class="form-body"><ul class="jira-avatars">';
  var avatarList6 = opt_data.avatars.system;
  var avatarListLen6 = avatarList6.length;
  for (var avatarIndex6 = 0; avatarIndex6 < avatarListLen6; avatarIndex6++) {
    var avatarData6 = avatarList6[avatarIndex6];
    output += '<li class="jira-avatar jira-system-avatar ' + ((avatarData6.isSelected) ? 'jira-selected-avatar' : '') + '" title="Select this Avatar" data-id="' + soy.$$escapeHtml(avatarData6.id) + '"><button id="select-avatar-button" data-id="' + soy.$$escapeHtml(avatarData6.id) + '" class="jira-icon-button" title="' + soy.$$escapeHtml('Select this Avatar') + '"><img id="avatar-' + soy.$$escapeHtml(avatarData6.id) + '" src="' + soy.$$escapeHtml(avatarData6.src) + '" width="' + soy.$$escapeHtml(avatarData6.width) + '" height="' + soy.$$escapeHtml(avatarData6.height) + '" alt="' + soy.$$escapeHtml('Select this Avatar') + '"/></button></li>';
  }
  var avatarList29 = opt_data.avatars.custom;
  var avatarListLen29 = avatarList29.length;
  for (var avatarIndex29 = 0; avatarIndex29 < avatarListLen29; avatarIndex29++) {
    var avatarData29 = avatarList29[avatarIndex29];
    output += '<li class="jira-avatar jira-custom-avatar ' + ((avatarData29.isSelected) ? 'jira-selected-avatar' : '') + '" title="Select this avatar" data-id="' + soy.$$escapeHtml(avatarData29.id) + '"><button id="select-avatar-button" data-id="' + soy.$$escapeHtml(avatarData29.id) + '" class="jira-icon-button" title="' + soy.$$escapeHtml('Select this Avatar') + '"><img id="avatar-' + soy.$$escapeHtml(avatarData29.id) + '" src="' + soy.$$escapeHtml(avatarData29.src) + '" width="' + soy.$$escapeHtml(avatarData29.width) + '" height="' + soy.$$escapeHtml(avatarData29.height) + '" alt="' + soy.$$escapeHtml('Select this Avatar') + '" /></span><button class="jira-delete-avatar jira-icon-button" data-id="' + soy.$$escapeHtml(avatarData29.id) + '" title="' + soy.$$escapeHtml('Delete this Avatar') + '">' + soy.$$escapeHtml('Delete this Avatar') + '</button></li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.AvatarPicker.picker.soyTemplateName = 'JIRA.Templates.AvatarPicker.picker';
}


JIRA.Templates.AvatarPicker.imageEditor = function(opt_data, opt_ignored) {
  return '<form id="avataror" class="jira-avatar-cropper-form aui" action="/jira/secure/project/AvatarPicker.jspa"><input type="hidden" name="cropperOffsetX" id="avatar-offsetX" value="' + soy.$$escapeHtml(opt_data.cropperOffsetX) + '"><input type="hidden" name="cropperOffsetY" id="avatar-offsetY" value="' + soy.$$escapeHtml(opt_data.cropperOffsetY) + '"><input type="hidden" name="cropperWidth" id="avatar-width"  value="' + soy.$$escapeHtml(opt_data.cropperWidth) + '"><div class="jira-avatar-cropper-header"><p>' + soy.$$escapeHtml('Please select which part of the uploaded image you wish to use as the avatar.') + '</p></div><div class="form-body"><div class="avataror"><img src="' + soy.$$escapeHtml(opt_data.url) + '" height="300" /></div></div><div class="form-footer buttons-container"><div class="buttons"><input type="submit" class="aui-button aui-button-primary" value="' + soy.$$escapeHtml('Confirm') + '"><a class="aui-button aui-button-link cancel" href="#">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
};
if (goog.DEBUG) {
  JIRA.Templates.AvatarPicker.imageEditor.soyTemplateName = 'JIRA.Templates.AvatarPicker.imageEditor';
}
;
;
/* module-key = 'jira.webresources:avatar-picker-trigger', location = '/includes/jira/admin/initAvatarPickerTrigger.js' */
define("jira/admin/init/avatar-picker-trigger",["jira/ajs/layer/layer-constants","jira/util/events","jira/util/events/types","jira/util/events/reasons","jira/ajs/layer/inline-layer","jira/ajs/contentretriever/content-retriever","jira/ajs/avatarpicker/avatar","jira/ajs/avatarpicker/avatar-picker-factory","jira/ajs/avatarpicker/avatar-picker","jira/ajs/avatarpicker/avatar-picker/image-editor","jquery"],function(t,a,e,r,i,n,c,s,v,o,d){"use strict";function f(t){var a=d(".jira-avatar-picker-trigger"),e=d(".jira-avatar-picker-trigger img, img.jira-avatar-picker-trigger",t),r=d(t).find("#avatar-picker-avatar-id"),i=d(t).find("#avatar-picker-iconurl"),n=d(t).find("#avatar-type");""!==n.text()&&s.createUniversalAvatarPickerDialog({trigger:a,title:d(t).find("#avatar-dialog-title").text(),projectId:d(t).find("#avatar-owner-id").text(),projectKey:d(t).find("#avatar-owner-key").text(),defaultAvatarId:d(t).find("#default-avatar-id").text(),initialSelection:r.val(),avatarSize:c.getSizeObjectFromName(d(t).find("#avatar-size").text()),avatarType:n.text(),select:function(t,a){e.attr("src",a),i.val(a),r.val(t.getId())}})}function l(a){var e=d(".jira-inline-avatar-picker-trigger",a);e.length&&new j({offsetTarget:e,projectId:d(a).find("#avatar-owner-id").text(),projectKey:d(a).find("#avatar-owner-key").text(),defaultAvatarId:d(a).find("#default-avatar-id").text(),alignment:t.LEFT,width:420,allowDownsize:!0})}var g=n.extend({init:function(t){this.avatarPicker=t},content:function(t){this.avatarPicker.render(function(a){t(d("<div />").html(a))})},cache:function(){return!1},isLocked:function(){},startingRequest:function(){},finishedRequest:function(){}}),j=i.extend({init:function(t){var a=this;this.avatarPicker=v.createProjectAvatarPicker({projectId:t.projectId,projectKey:t.projectKey,defaultAvatarId:t.defaultAvatarId,select:function(e,r,i){t.select&&t.select.apply(this,arguments),i||a.hide(),a.offsetTarget().attr("src",r),a.offsetTarget().trigger("AvatarSelected")}}),t.contentRetriever=new g(this.avatarPicker),d(this.avatarPicker.imageEditor).bind(o.LOADED,function(){a.setWidth(a.layer().attr("scrollWidth"))}),this._super(t);var e=this.offsetTarget(),r=d("<span class='jira-avatar-picker-trigger'></span>");r.insertBefore(e).append(e),this._assignEvents("offsetTarget",r)},_events:{offsetTarget:{click:function(t){this.show()}}}});a.bind(e.NEW_CONTENT_ADDED,function(t,a,e){e!==r.panelRefreshed&&(f(a),l(a))})});;
;
/* module-key = 'jira.webresources:avatar-picker-trigger', location = '/includes/jira/admin/init/init-avatar-picker.js' */
require("jira/admin/init/avatar-picker-trigger");;
;
/* module-key = 'jira.webresources:croneditor', location = '/includes/js/cron/croneditor.js' */
define("jira/util/cron",["exports"],function(n){"use strict";var i=window.timesOnce=window.timesOnce||{};n.hideCronEdit=function(n){document.getElementById(n).style.display="none"},n.showCronEdit=function(n){document.getElementById(n).style.display=""},n.toggleFrequencyControl=function(i,e){0==document.getElementById(i+"interval").value?n.switchToOnce(i,e):n.switchToMany(i,e)},n.switchToOnce=function(e,o){n.hideCronEdit(e+"runMany"),n.showCronEdit(e+"runOnce"),o&&(i[e]=!0)},n.switchToMany=function(e,o){n.hideCronEdit(e+"runOnce"),n.showCronEdit(e+"runMany"),o&&(i[e]=!1)},n.switchToDaysOfMonth=function(i){n.hideCronEdit(i+"daysOfWeek"),n.showCronEdit(i+"daysOfMonth"),n.showCronEdit(i+"freqDiv"),n.hideCronEdit(i+"innerFreqDiv"),n.hideCronEdit(i+"advanced"),n.switchToOnce(i,!1)},n.switchToDaysOfWeek=function(i){n.showCronEdit(i+"daysOfWeek"),n.hideCronEdit(i+"daysOfMonth"),n.showCronEdit(i+"freqDiv"),n.showCronEdit(i+"innerFreqDiv"),n.hideCronEdit(i+"advanced"),n.switchToOriginal(i)},n.switchToDaily=function(i){n.hideCronEdit(i+"daysOfWeek"),n.hideCronEdit(i+"daysOfMonth"),n.showCronEdit(i+"freqDiv"),n.showCronEdit(i+"innerFreqDiv"),n.hideCronEdit(i+"advanced"),n.switchToOriginal(i)},n.switchToAdvanced=function(i){n.hideCronEdit(i+"daysOfWeek"),n.hideCronEdit(i+"daysOfMonth"),n.hideCronEdit(i+"runOnce"),n.hideCronEdit(i+"runMany"),n.hideCronEdit(i+"freqDiv"),n.showCronEdit(i+"advanced")},n.switchToOriginal=function(e){i[e]?n.switchToOnce(e,!1):n.switchToMany(e,!1)}}),function(){"use strict";var n=require("jira/util/cron");AJS.namespace("hideCronEdit",null,n.hideCronEdit),AJS.namespace("showCronEdit",null,n.showCronEdit),AJS.namespace("switchToOnce",null,n.switchToOnce),AJS.namespace("switchToMany",null,n.switchToMany),AJS.namespace("switchToDaysOfMonth",null,n.switchToDaysOfMonth),AJS.namespace("switchToDaysOfWeek",null,n.switchToDaysOfWeek),AJS.namespace("switchToDaily",null,n.switchToDaily),AJS.namespace("switchToAdvanced",null,n.switchToAdvanced),AJS.namespace("switchToOriginal",null,n.switchToOriginal),AJS.namespace("toggleFrequencyControl",null,n.toggleFrequencyControl)}();;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:loading-indicator', location = 'js/util/loading-indicator.js' */
define("quick-edit/util/loading-indicator",["jira/loading/loading","jira/flag"],function(b,d){var c=AJS.dim;var a=AJS.undim;return{showLoadingIndicator:function(){c();b.showLoadingIndicator()},hideLoadingIndicator:function(e){a();b.hideLoadingIndicator();if(e){d.showErrorMsg(null,"The Jira server could not be contacted. This may be a temporary glitch or the server may be down.")}}}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue-bootstrap', location = 'js/init/create-bootstrap-wrm.js' */
require(["jquery","underscore","wrm/require","quick-edit/util/loading-indicator","jira/ajs/keyboardshortcut/keyboard-shortcut-toggle"],function(l,k,h,i,b){var f=function(){b.disable();i.showLoadingIndicator()};var c=function(){i.hideLoadingIndicator(true);b.enable()};var g;var a=false;l(document).on("simpleClick",".create-issue, .create-issue-type",function(o){o.preventDefault();if(!a){a=true;f();var n="wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue";var m=h([n]);m.done(d.bind(undefined,o)).fail(function p(){c();a=false})}});var d=function(n){var m=require("quick-edit/init/create");m.initIssueDialog(n);b.enable();a=false};l(function(){g=document.getElementById("stqc_show");if(g){g.onclick=null}});var j=false;l(document).on("simpleClick",".issueaction-create-subtask",function(o){o.preventDefault();if(!j){j=true;f();var n="wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue";var m=h([n]);m.done(e).fail(function p(){c();j=false})}});var e=function(n){var m=require("quick-edit/init/create");m.initSubtaskDialog(n);b.enable();j=false}});;
;
/* module-key = 'jira.webresources:jira-page-atl-prefetch', location = '/includes/jira/page/prefetch.js' */
define("jira/page/atl/prefetch",["jira/util/data/meta","jira/data/local-storage","jira/ajs/dark-features","jquery","wrm/context-path"],function(e,t,r,n,i){"use strict";function a(e){n("<link />",{rel:"prefetch",href:e}).appendTo("head")}function s(e){var t=e.sections;if(t){var r=t.filter(function(e){return"issues_history_main"===e.id});if(r.length&&0!==r[0].items.length){return r[0].items[0].url}}}function c(e,t){for(var r;r=t.exec(e);){a(r[1].replace(/&amp;/g,"&"))}}function u(){try{t.setItem(g,d)}catch(e){}}function f(e){c(e,/<script.+?src="(.+?)".+?<\/script>/g),c(e,/<link.+?rel="stylesheet".+?href="(.+?)".+?>/g),u()}function o(){return!!r.isEnabled("jira.issue.prefetch")&&(1===n("#isNavigator").length?(u(),!1):e.get("issue-key")?(u(),!1):d!==t.getItem(g))}function l(e){var t=s(e);t&&h(t)}function h(e){n.get(e,f)}function p(){o()&&n.ajax({url:i()+"/rest/api/1.0/menus/find_link?inAdminMode=false",dataType:"json"}).done(l)}var g="jira.issue.prefetch.last.superbatch",d=function(){var e=new Date,t=e.getFullYear().toString()+e.getMonth().toString()+e.getDate().toString(),r=n("head > script").filter(function(e,t){return t.src.indexOf("/_super")>0});return(r.length>0?r[0].src:"empty")+t}();return{prefetchResourcesForUrl:h,prefetchViewIssueResources:p}});;
;
/* module-key = 'jira.webresources:init-jira-page-atl-prefetch', location = '/includes/jira/page/initPrefetch.js' */
require(["jira/page/atl/prefetch","jquery"],function(e,r){r(window).on("load",e.prefetchViewIssueResources.bind(e))});;
;
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin-api:wrm-amd', location = 'lib/amd/wrm-amd.js' */
define("wrm/context-path",function(){return AJS.contextPath});define("wrm/data",function(){var a=function(){};if(WRM){if(typeof WRM.data==="function"){a=WRM.data}else{if(WRM.data&&typeof WRM.data.claim==="function"){a=WRM.data.claim}}}return{claim:a}});define("wrm",function(){if(WRM.data instanceof Function){WRM.data.claim=WRM.data}return WRM});;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:amd', location = 'js/lib/amd/jira/jira-components-query-amd.js' */
define("hipchat/jira/query-component",function(){return JIRA.Components.Query});;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:amd', location = 'js/lib/amd/jira/jira-issues-amd.js' */
define("hipchat/jira/issues/searcher-collection",function(){return JIRA.Issues.SearcherCollection});define("hipchat/jira/issues/query-state-model",function(){return JIRA.Issues.QueryStateModel});define("hipchat/jira/issues/criteria-model",function(){return JIRA.Issues.CriteriaModel});define("hipchat/jira/issues/criteria-view",function(){return JIRA.Issues.CriteriaView});;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:amd', location = 'js/lib/amd/hipchat-scopes-provider-amd.js' */
define("hipchat/scopes-provider",function(){return HipChat.ScopesProvider});;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.deprecated.behaviour.cookie', location = 'aui.chunk.ec929b657a8e24a5a777--1a348e884d4b485cada8.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.deprecated.behaviour.cookie"],{"N/qQ":function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}(n("qHho"));r.default=t,e.exports=r.default},qHho:function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.save=r.read=r.erase=void 0;var t=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}(n("bPPT")),a=function(e){return e&&e.__esModule?e:{default:e}}(n("KloK"));var o="AJS.conglomerate.cookie",u=/(\\|^"|"$)/g,i=/\|\|+/g,c=/"/g,l=/[.*+?|^$()[\]{\\]/g;function f(e){return e.replace(l,"\\$&")}function s(e){var r=new RegExp("\\b"+f(e)+"=((?:[^\\\\;]+|\\\\.)*)(?:;|$)"),n=document.cookie.match(r);return n&&function(e){return e.replace(u,"")}(n[1])}function p(e,r,n){var t=s(o);t=function(e,r,n){var t=new RegExp("(\\s|\\|)*\\b"+f(e)+"=[^|]*[|]*");if(n=(n=n||"").replace(t,"|"),""!==r){var a=e+"="+r;n.length+a.length<4020&&(n+="|"+a)}return n.replace(i,"|")}(e,r,t),function(e,r,n){var t,a="",o='"'+r.replace(c,'\\"')+'"';n&&((t=new Date).setTime(+t+24*n*60*60*1e3),a="; expires="+t.toGMTString()),document.cookie=e+"="+o+a+";path=/"}(o,t,n||365)}function d(e,r){var n=function(e,r){r=r||"";var n=new RegExp(f(e)+"=([^|]+)"),t=r.match(n);return t&&t[1]}(e,s(o));return null!=n?n:r}function v(e){p(e,"")}var h={erase:v,read:d,save:p};(0,a.default)("cookie",h),(0,a.default)("Cookie",h),t.prop(AJS,"Cookie",{alternativeName:"cookie",sinceVersion:"5.8.0"}),r.erase=v,r.read=d,r.save=p}},[["N/qQ","runtime","aui.splitchunk.172ffb6da7","aui.splitchunk.087aba7911","aui.splitchunk.fbd1a5ab27","aui.splitchunk.54d3f16c20"]]]);
//# sourceMappingURL=aui.chunk.ec929b657a8e24a5a777--1a348e884d4b485cada8.js.map;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:update-plugin-banner-resources', location = 'js/banner/update-hipchat-link-banner.js' */
require(["jquery","jira/flag","jira/util/users/logged-in-user","wrm/context-path"],function(d,b,e,a){var c=AJS.Cookie;AJS.toInit(function(){var i="HIPCHAT_ADMIN_BANNER_DISMISS_2";var g;if(!h()&&e.isAdmin()&&!k()){d.ajax({url:a()+"/rest/hipchat/integrations/1.0/configuration/status",dataType:"json",cache:false}).done(function(m){if(m.installationCheckResult.required||m.v1){g=f(m)}})}function f(o){var n=JIRA.Templates.HipChat.Banner.updateHipChatLink({removeV1link:!o.v2&&o.v1,reinstallationDiscoveryTitle:o.installationCheckResult.discoveryTitle,reinstallationDiscoveryText:o.installationCheckResult.discoveryText});var m=b.showWarningMsg(null,n);d(document).on("click","#remove-hipchat-v1-link",l);d(document).on("aui-flag-close",".aui-flag",j);return m}function h(){return window.location.toString().indexOf("/plugins/servlet/hipchat/configure")>0}function j(m){if(d(m.target).find(".hipchat-update-banner").length>0){c.save(i,true)}}function k(){return c.read(i)=="true"}function l(m){m.preventDefault();d.ajax({url:a()+"/rest/hipchat/integrations/1.0/configuration/v1",cache:false,type:"DELETE"}).error(function(n){if(g){g.hide()}b.showErrorMsg(null,AJS.format("We couldn\'\'t find your integration. If the problem persists, contact Atlassian Support.\u003cbr/\u003e Error Status [{0}]",n.status))}).done(function(n){if(g){g.hide()}b.showSuccessMsg(null,"Integration has been removed successfully")})}})});;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:update-plugin-banner-resources', location = 'soy/banner/update-hipchat-link-banner.soy' */
// This file was automatically generated from update-hipchat-link-banner.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.HipChat.Banner.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.HipChat == 'undefined') { JIRA.Templates.HipChat = {}; }
if (typeof JIRA.Templates.HipChat.Banner == 'undefined') { JIRA.Templates.HipChat.Banner = {}; }


JIRA.Templates.HipChat.Banner.updateHipChatLink = function(opt_data, opt_ignored) {
  return '<div class="hipchat-update-banner"><b>' + soy.$$escapeHtml(opt_data.reinstallationDiscoveryTitle) + '</b><p>' + soy.$$escapeHtml(opt_data.reinstallationDiscoveryText) + '</p><p/><a href="' + soy.$$escapeHtml("" + '/plugins/servlet/hipchat/configure') + '">' + soy.$$escapeHtml('Update Now!') + '</a>' + ((opt_data.removeV1link) ? '<a id="remove-hipchat-v1-link">' + soy.$$escapeHtml('Remove Integration') + '</a>' : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.HipChat.Banner.updateHipChatLink.soyTemplateName = 'JIRA.Templates.HipChat.Banner.updateHipChatLink';
}
;
;
/* module-key = 'com.atlassian.feedback.jira-feedback-plugin:button-resources-init', location = '/js/feedback-dialog-init.js' */
require(["jquery","jira/loading/loading","wrm/require"],function(n,i,e){"use strict";function o(){t=!0,AJS.dim(),i.showLoadingIndicator()}function r(n){t=!1,n&&AJS.dim.$dim.css("transition","none"),AJS.undim(),n&&AJS.dim.$dim&&AJS.dim.$dim.css("transition",""),i.hideLoadingIndicator()}var t=!1;n(document).on("click",".jira-feedback-plugin",function(n){n.preventDefault(),t||(o(),e(["wr!com.atlassian.feedback.jira-feedback-plugin:button-resources"]).done(function(){require("jira/feedback/feedback-dialog").show().then(function(){return r(!0)},function(n){console.error("Something went wrong in an attempt to show the issue collector dialog",n),r(!1)})}).fail(function(n){console.error("Something went wrong when loading feedback plugin resources",n),r(!1)}))})});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init', location = 'static/components/newsletter/initNewsletterSignup.js' */
define("jira/newsletter/init-signup",["wrm/data","wrm/require","require"],function(e,i,n){return function(){var r=e.claim("com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup");r&&r.showNewsletterTip&&i("wr!com.atlassian.jira.jira-header-plugin:newsletter-signup-tip").then(function(){n("jira/newsletter/signuptip").render(r)})}});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init-init', location = 'static/components/newsletter/initInitNewsletterSignup.js' */
require(["jquery","jira/newsletter/init-signup"],function(i,n){i(function(){n()})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/dialog.js' */
define("jira/admin-helper/dialog",["jquery","jira/dialog/dialog","jira/focus/set-focus"],function(c,a,b){return a.extend({_getDefaultOptions:function(){return c.extend(this._super(),{cached:false,widthClass:"large",stacked:true})},defineResources:function(){this._super();this.requireResource("com.atlassian.jira.plugins.jira-admin-helper-plugin:whereismycf-resources")},decorateContent:function(){var d=this;this.get$popupContent().find(".cancel").click(function(f){d.hide();f.preventDefault()})},_onShowContent:function(){this._super();if(a.current===this){var d=new b.FocusConfiguration();d.context=this.get$popup()[0];d.parentElementSelectors=[".form-body"];b.pushConfiguration(d);b.triggerFocus()}},hide:function(d){if(this._super(d)===false){return false}b.popConfiguration()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/notification-helper-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta"],function(c,a,b){if(b.get("is-admin")){c(document).delegate(".notificationhelper-trigger","click",function(e){e.preventDefault();new a({id:"notification-helper-dialog",content:function d(g){var f=this;require(["jira/admin-helper/notification-helper/content-loader"],function(h){h.loadContent(f,g)})}}).show()})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/permission-helper-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta"],function(c,a,b){if(b.get("is-admin")){c(document).delegate(".permissionhelper-trigger","click",function(e){e.preventDefault();new a({id:"permission-helper-dialog",content:function d(g){var f=this;require(["jira/admin-helper/permission-helper/content-loader"],function(h){h.loadContent(f,g)})}}).show()})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/whereismycf-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta","jira/dialog/dialog"],function(e,a,d,b){if(d.get("is-admin")){var c="Where is my field?";e(document).delegate(".whereismycf-trigger","click",function(g){g.preventDefault();new a({id:"whereismycf-dialog",content:function f(i){var h=this;require(["jira/admin-helper/whereismycf/content-loader"],function(j){j.loadContentForView(h,i)})}}).show()});e(document).bind("showLayer",function(g,i,h){if(i=="inlineDialog"&&h.popup.attr("id")=="inline-dialog-field_picker_popup"){if(h.popup.find(".whereismycf-qfpicker-link").length==0){var f=e("<a href='#' class='whereismycf-qfpicker-link'>"+c+"</a>").appendTo(h.popup.find(".qf-picker-header dl"));f.click(function(l){l.preventDefault();h.hide();var j=b.current;new a({id:"whereismycf-dialog",content:function k(n){var m=this;require(["jira/admin-helper/whereismycf/content-loader"],function(o){o.loadContentForEditAndCreate(m,j,n)})}}).show()})}}})}});;
;
/* module-key = 'com.atlassian.troubleshooting.plugin-jira:atst-healthchecks-notification', location = 'js/ajs-amd.js' */
define('troubleshooting/ajs', [], function () {
    'use strict';

    return AJS;
});;
;
/* module-key = 'com.atlassian.troubleshooting.plugin-jira:atst-healthchecks-notification', location = 'js/notification.js' */
/* global AJS */
require([
    "jquery",
    "aui/flag",
    "troubleshooting/ajs",
    "troubleshooting/location"
], function ($, flag, AJS, location) {
    'use strict';

    if (location.isOnSupportToolsPage()) {
        // Exit if we are on the ATST screen, we don't want to display healthcheck notification if user browsing on ATST
        return;
    }
    
    var pluginPageUrl =  AJS.contextPath() + '/plugins/servlet/troubleshooting/view';

    AJS.toInit(function () {
        var restBase = AJS.contextPath() + '/rest/troubleshooting/1.0';
        var user = $('meta[name=ajs-remote-user]').attr('content');

        // Initialise the healthcheck notification. Make a GET call to /check/{username} endpoint to get the list of failed check by user
        var initHealthcheckNotification = function () {
            $.getJSON(restBase + '/check/' + user).done(function (statusReport) {
                statusReport.statuses.forEach(function (status) {
                    showNotification(status);
                });

                // Listen to click event to dismiss or snooze notification
                $(document).find('.dismiss-notification').on('click', function () {
                    var $notification = $(this).parents().eq(3);
                    dismissNotification($notification);
                });

                $(document).find('.healthcheck-detail').on('click', function () {
                    var $notification = $(this).parents().eq(3);
                    var application = $notification.attr('application');
                    var severity = $notification.attr('severity');
                    var completeKey = $notification.attr('completeKey');

                    analyticsModule.run("Viewed", completeKey, application, severity);
                    snoozeNotification($notification);
                });
            });
        };

        // Renders the flat notification here, and set the necessary attribute to the flag
        var showNotification = function (status) {

            var healthCheckName = status.name;
            var severity = status.severity;
            var notificationId = status.id;
            var application = status.application;
            var completeKey = status.completeKey;
            var key = completeKey.split(':').pop();

            var flagType = severity === 'warning' ? 'warning' : 'error';
            var healthCheckUrl = pluginPageUrl + '?source=notification&healthCheck=' + key;

            var healthcheckNotification = flag({
                type: flagType,
                body: '<p>' + AJS.format("The {0} health check has failed in your system.", '<strong>' + healthCheckName + '</strong>') + '</p>' +
                    '<ul class="aui-nav-actions-list">' +
                        '<li><a href="' + healthCheckUrl + '" class="healthcheck-detail" target="_self">' + "Find out more" + '</a></li>' +
                        '<li><a href="#" class="dismiss-notification">' + "Don\'t remind me again" + '</a></li>' +
                    '</ul>',
                close: 'manual'
            });

            healthcheckNotification.setAttribute('id', 'healthcheck-notification');
            healthcheckNotification.setAttribute('healthcheck-name', healthCheckName);
            healthcheckNotification.setAttribute('notification-id', notificationId);
            healthcheckNotification.setAttribute('application', application);
            healthcheckNotification.setAttribute('severity', severity);
            healthcheckNotification.setAttribute('completeKey', completeKey);

            healthcheckNotification.addEventListener('aui-flag-close', function () {
                var $notification = $(this);
                snoozeNotification($notification);
            });


            analyticsModule.run('Display', completeKey, application, severity);
        };

        // Called when the "Don’t remind me again" link is clicked. Notifications that are dismissed / marked as read won't reappear to the user anymore
        var dismissNotification = function ($notification) {
            $notification.attr("aria-hidden", "true");

            var id = $notification.attr('notification-id');
            var name = $notification.attr('healthcheck-name');
            var application = $notification.attr('application');
            var severity = $notification.attr('severity');
            var completeKey = $notification.attr('completeKey');

            var data = {};
            data["username"] = user;
            data["notificationId"] = id;
            data["snooze"] = false;

            var jsonData = JSON.stringify(data);

            AJS.$.ajax({
                async: false,
                type: 'POST',
                url: restBase + '/dismissNotification',
                data: jsonData,
                contentType: "application/json",
                dataType: "json",
                success: function () {

                    analyticsModule.run("Dismissed", completeKey, application, severity);
                }
            })
        };

        // Called when the notification is closed via the cross button or if user open the link to the healthcheck
        // A notification is dismissed / marked as read automatically if it snoozes 3 times
        var snoozeNotification = function ($notification) {
            var id = $notification.attr('notification-id');
            var name = $notification.attr('healthcheck-name');
            var application = $notification.attr('application');
            var severity = $notification.attr('severity');
            var completeKey = $notification.attr('completeKey');

            var data = {};
            data["username"] = user;
            data["notificationId"] = id;
            data["snooze"] = true;

            var jsonData = JSON.stringify(data);

            AJS.$.ajax({
                async: false,
                type: 'POST',
                url: restBase + '/dismissNotification',
                data: jsonData,
                contentType: "application/json",
                dataType: "json",
                success: function (data, textStatus, jqXHR) {

                    isAutoDismissed(id, completeKey, name, application, severity);
                    analyticsModule.run("Snoozed", completeKey, application, severity);

                }
            })
        };

        var isAutoDismissed = function (notificationId, completeKey, name, application, severity) {
            var url = restBase + '/dismissNotification/' + user + '/' + notificationId;

            AJS.$.ajax({
                async: false,
                type: 'GET',
                url: url,
                contentType: "text/xml",
                success: function (data, textStatus, jqXHR) {
                    if (jqXHR.status == 200) {
                        notificationAutoDismissed(name);
                        analyticsModule.run("Autodismissed", completeKey, application, severity);
                    }


                }
            });
        };

        // This module allows for us to capture the correct Analytics events per display as per SHC-344.
        var analyticsModule = (function () {
            var lastEvent;
            var event = {};

            event.run = function (action, completeKey, application, severity) {
                if (lastEvent == "Viewed") {
                    // when user views info, we snooze the notification. We only want to record the Viewed AA event.
                    lastEvent = action;
                } else {
                    lastEvent = action;
                    if (action == "Display") {
                        AJS.trigger('analyticsEvent', {
                            name: "healthcheck.notification.display",
                            data: {action: action, name: completeKey, application: application, severity: severity}
                        });
                    } else {
                        AJS.trigger('analyticsEvent', {
                            name: "healthcheck.notification.action",
                            data: {action: action, name: completeKey, application: application, severity: severity}
                        });
                    }
                }
            };
            return event;
        }());

        // This function is called when a notification is automatically marked as read (normally is called when a notification is snoozed 3 times)
        var notificationAutoDismissed = function (healthCheckName) {
            // We set a quick timeout here so the animation will be displayed properly
            setTimeout(function () {
                flag({
                    type: "info",
                    body: "<p>The <strong>" + healthCheckName + "</strong> notification is now dismissed. </p>" +
                    "<p>Please visit <a href='" + AJS.contextPath() + "/plugins/servlet/troubleshooting/view/?source=notification' class='healthcheck-detail' target='_self'>this link</a> for more on the check.</p>",
                    close: "auto"
                });
            }, 1500);
        };

        initHealthcheckNotification();
    });
});;
;
/* module-key = 'com.atlassian.troubleshooting.plugin-jira:atst-healthchecks-notification', location = 'js/shc-location.js' */
define('troubleshooting/location', [], function () {
    return {
        // Get the path name of the current page URL, and returns true if user is on ATST page or false if user is on other admin screens
        isOnSupportToolsPage: function () {
            return window.location.pathname.toLowerCase().indexOf("/troubleshooting/view") >= 0;
        }
    }
});;
;
/* module-key = 'jira.webresources:field-templates', location = '/includes/jira/field/templates/singleUserPicker.soy' */
// This file was automatically generated from singleUserPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Fields.Pickers.User.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Fields == 'undefined') { JIRA.Templates.Fields = {}; }
if (typeof JIRA.Templates.Fields.Pickers == 'undefined') { JIRA.Templates.Fields.Pickers = {}; }
if (typeof JIRA.Templates.Fields.Pickers.User == 'undefined') { JIRA.Templates.Fields.Pickers.User = {}; }


JIRA.Templates.Fields.Pickers.User.single = function(opt_data, opt_ignored) {
  var output = '<select id="' + soy.$$escapeHtml(opt_data.field.id) + '" name="' + soy.$$escapeHtml(opt_data.field.name) + '" class="single-user-picker js-' + ((opt_data.type) ? soy.$$escapeHtml(opt_data.type) : 'default-user-picker') + '"' + ((opt_data.inputText) ? ' data-input-text="' + soy.$$escapeHtml(opt_data.inputText) + '"' : '') + ((opt_data.editValue) ? ' data-edit-value="' + soy.$$escapeHtml(opt_data.editValue) + '"' : '') + ((opt_data.showDropdownButton) ? ' data-show-dropdown-button="true"' : '') + ((opt_data.userType) ? ' data-user-type="' + soy.$$escapeHtml(opt_data.userType) + '"' : '') + ((opt_data.containerClass) ? ' data-container-class="' + soy.$$escapeHtml(opt_data.containerClass) + '"' : '') + '>';
  var optionList38 = opt_data.options;
  var optionListLen38 = optionList38.length;
  for (var optionIndex38 = 0; optionIndex38 < optionListLen38; optionIndex38++) {
    var optionData38 = optionList38[optionIndex38];
    if (optionData38.optionGroup) {
      output += '<optgroup id="' + soy.$$escapeHtml(opt_data.field.id) + '-group-' + soy.$$escapeHtml(optionData38.id) + '" label="' + soy.$$escapeHtml(optionData38.display) + '"' + ((optionData38.footer) ? ' data-footer-text="' + soy.$$escapeHtml(optionData38.footer) + '"' : '') + ((optionData38.weight != -1) ? ' data-weight="' + soy.$$escapeHtml(optionData38.weight) + '"' : '') + '>';
      var groupOptionList59 = optionData38.groupOptions;
      var groupOptionListLen59 = groupOptionList59.length;
      for (var groupOptionIndex59 = 0; groupOptionIndex59 < groupOptionListLen59; groupOptionIndex59++) {
        var groupOptionData59 = groupOptionList59[groupOptionIndex59];
        output += JIRA.Templates.Fields.Pickers.User.option(groupOptionData59);
      }
      output += '</optgroup>';
    } else {
      output += JIRA.Templates.Fields.Pickers.User.option(optionData38);
    }
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.Pickers.User.single.soyTemplateName = 'JIRA.Templates.Fields.Pickers.User.single';
}


JIRA.Templates.Fields.Pickers.User.option = function(opt_data, opt_ignored) {
  return '<option ' + ((opt_data.loggedInUser) ? 'class="current-user" ' : '') + ((opt_data.selected) ? 'selected="selected" ' : '') + 'value="' + soy.$$escapeHtml(opt_data.optionName) + '" data-field-text="' + soy.$$escapeHtml(opt_data.displayName) + '" data-field-label="' + soy.$$escapeHtml(opt_data.displayName) + ((opt_data.emailAddress) ? ' - ' + soy.$$escapeHtml(opt_data.emailAddress) : '') + ((opt_data.optionName && opt_data.optionName != '-1') ? ' (' + soy.$$escapeHtml(opt_data.optionName) + ')' : '') + '" data-icon="' + soy.$$escapeHtml(opt_data.avatarURL) + '" >' + soy.$$escapeHtml(opt_data.displayName) + '</option>';
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.Pickers.User.option.soyTemplateName = 'JIRA.Templates.Fields.Pickers.User.option';
}
;
;
/* module-key = 'jira.webresources:field-templates', location = '/includes/jira/field/templates/assigneeField.soy' */
// This file was automatically generated from assigneeField.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Fields.Pickers.User.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Fields == 'undefined') { JIRA.Templates.Fields = {}; }
if (typeof JIRA.Templates.Fields.Pickers == 'undefined') { JIRA.Templates.Fields.Pickers = {}; }
if (typeof JIRA.Templates.Fields.Pickers.User == 'undefined') { JIRA.Templates.Fields.Pickers.User = {}; }


JIRA.Templates.Fields.Pickers.User.assignee = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.Fields.Pickers.User.single(soy.$$augmentMap(opt_data, {options: opt_data.assigneeOptions.options, showDropdownButton: true, userType: 'assignee', type: 'assignee-picker', containerClass: 'long-field'})) + ((opt_data.isLoggedInUserAssignable) ? '<a href="#' + soy.$$escapeHtml(opt_data.field.id) + '" id="assign-to-me-trigger">' + soy.$$escapeHtml('Assign to me') + '</a>' : '') + '<fieldset class="hidden parameters"><input type="hidden" title="projectKeys" value="' + soy.$$escapeHtml(opt_data.projectKeys) + '"/>' + ((opt_data.issueKey) ? '<input type="hidden" title="assigneeEditIssueKey" value="' + soy.$$escapeHtml(opt_data.issueKey) + '"/>' : '') + ((opt_data.actionDescriptorId) ? '<input type="hidden" title="actionDescriptorId" value="' + soy.$$escapeHtml(opt_data.actionDescriptorId) + '"/>' : '') + '</fieldset>';
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.Pickers.User.assignee.soyTemplateName = 'JIRA.Templates.Fields.Pickers.User.assignee';
}
;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/userPickerUtil.js' */
define("jira/field/user-picker-util",["jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jquery"],function(e,i,r){return{formatResponse:function(t){var a=[];return r(t).each(function(t,l){var s=new i({weight:t,label:l.footer});r(l.users).each(function(){s.addItem(new e({value:this.name,label:this.displayName,html:this.html,icon:this.avatarUrl,allowDuplicate:!1,highlighted:!0,userKey:this.key}))}),a.push(s)}),a}}}),AJS.namespace("JIRA.UserPickerUtil",null,require("jira/field/user-picker-util"));;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initSingleUserPickers.js' */
define("jira/field/init-single-user-pickers",["jquery","wrm/context-path","jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/user-picker-util","jira/util/formatter"],function(e,t,i,r,a,s,n,u){"use strict";function o(t){e(".js-default-user-picker",t).each(function(){var t=e(this);if(!t.data("aui-ss")){var r={showAvatar:!0},a=t.data("inputValue");new i({element:t,submitInputVal:!0,showDropdownButton:!!t.data("show-dropdown-button"),errorMessage:u.format("There is no user \'\'{0}\'\'.","'{0}'"),ajaxOptions:{url:l+"/rest/api/2/user/picker",query:!0,data:r,formatResponse:n.formatResponse},inputText:a})}})}var l=t();s.bind(a.NEW_CONTENT_ADDED,function(e,t,i){i!==r.panelRefreshed&&o(t)})});;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/NoBrowseUserNamePicker.js' */
define("jira/field/no-browser-user-name-picker",["require"],function(e){"use strict";var t=e("jquery"),r=e("jira/ajs/list/item-descriptor"),i=e("jira/ajs/select/multi-select"),a=e("jira/util/formatter"),n=e("wrm/context-path"),s=n();return i.extend({_getDefaultOptions:function(){return t.extend(!0,this._super(),{errorMessage:"The requested user does not exist.",showDropdownButton:!1,removeOnUnSelect:!0,itemAttrDisplayed:"label"})},_handleCharacterInput:function(){},_setSuggestions:function(){},_handleServerError:function(e){404===e.status?this.showErrorMessage():this._super()},_deactivate:function(){this.validateAndAdd()},validateAndAdd:function(){var e=this;""===t.trim(this.$field.val())?this.hideErrorMessage():t.ajax({url:s+"/rest/api/2/user",data:{username:t.trim(e.getQueryVal())},success:function(t){e.hideErrorMessage(),e.$field.val(""),e.addItem(new r({label:t.displayName,value:t.name}))},error:function(){e.showErrorMessage()}})},_handleSpace:function(){this.validate()},_handleServerSuggestions:function(){this.hideErrorMessage(),this.handleFreeInput()},handleFreeInput:function(){var e=t.trim(this.$field.val());""!==e&&(this.addItem({value:e,label:e}),this.model.$element.trigger("change")),this.$field.val("")},keys:{Return:function(e){e.preventDefault(),this.validateAndAdd()},Spacebar:function(e){e.preventDefault(),this.validateAndAdd()}}})}),AJS.namespace("AJS.NoBrowseUserNamePicker",null,require("jira/field/no-browser-user-name-picker"));;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initMultiUserPickers.js' */
define("jira/field/init-multi-user-pickers",["jquery","wrm/context-path","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/no-browser-user-name-picker","jira/field/user-picker-util"],function(e,t,r,i,n,s,a,u){function l(t){t.find(".js-default-multi-user-picker").each(function(){var t=e(this);AJS.params.currentUserCanBrowseUsers?new r({element:this,itemAttrDisplayed:"label",showDropdownButton:!1,removeOnUnSelect:!0,submitInputVal:!0,ajaxOptions:{url:o+"/rest/api/1.0/users/picker",query:!0,data:function(e){return{showAvatar:!0,query:e,exclude:t.val()}},formatResponse:u.formatResponse}}):new a({element:this})})}var o=t();s.bind(n.NEW_CONTENT_ADDED,function(e,t,r){r!==i.panelRefreshed&&l(t)})});;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/init/init-user-pickers-webresource.js' */
require("jira/field/init-multi-user-pickers"),require("jira/field/init-single-user-pickers");;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/lib/jquery.dotdotdot-1.5.7.js' */
(function(i){if(i.fn.dotdotdot){return}i.fn.dotdotdot=function(v){if(this.length==0){if(!v||v.debug!==false){b(true,'No element found for "'+this.selector+'".')}return this}if(this.length>1){return this.each(function(){i(this).dotdotdot(v)})}var r=this;if(r.data("dotdotdot")){r.trigger("destroy.dot")}r.bind_events=function(){r.bind("update.dot",function(y,A){y.preventDefault();y.stopPropagation();t.maxHeight=(typeof t.height=="number")?t.height:o(r);t.maxHeight+=t.tolerance;if(typeof A!="undefined"){if(typeof A=="string"||A instanceof HTMLElement){A=i("<div />").append(A).contents()}if(A instanceof i){w=A}}s=r.wrapInner('<div class="dotdotdot" />').children();s.empty().append(w.clone(true)).css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var z=false,x=false;if(q.afterElement){z=q.afterElement.clone(true);q.afterElement.remove()}if(k(s,t)){if(t.wrap=="children"){x=d(s,t,z)}else{x=m(s,r,s,t,z)}}s.replaceWith(s.contents());s=null;if(i.isFunction(t.callback)){t.callback.call(r[0],x,w)}q.isTruncated=x;return x}).bind("isTruncated.dot",function(y,x){y.preventDefault();y.stopPropagation();if(typeof x=="function"){x.call(r[0],q.isTruncated)}return q.isTruncated}).bind("originalContent.dot",function(y,x){y.preventDefault();y.stopPropagation();if(typeof x=="function"){x.call(r[0],w)}return w}).bind("destroy.dot",function(x){x.preventDefault();x.stopPropagation();r.unwatch().unbind_events().empty().append(w).data("dotdotdot",false)});return r};r.unbind_events=function(){r.unbind(".dot");return r};r.watch=function(){r.unwatch();if(t.watch=="window"){var z=i(window),y=z.width(),x=z.height();z.bind("resize.dot"+q.dotId,function(){if(y!=z.width()||x!=z.height()||!t.windowResizeFix){y=z.width();x=z.height();if(p){clearInterval(p)}p=setTimeout(function(){r.trigger("update.dot")},10)}})}else{u=j(r);p=setInterval(function(){var A=j(r);if(u.width!=A.width||u.height!=A.height){r.trigger("update.dot");u=j(r)}},100)}return r};r.unwatch=function(){i(window).unbind("resize.dot"+q.dotId);if(p){clearInterval(p)}return r};var w=r.contents(),t=i.extend(true,{},i.fn.dotdotdot.defaults,v),q={},u={},p=null,s=null;q.afterElement=c(t.after,r);q.isTruncated=false;q.dotId=l++;r.data("dotdotdot",true).bind_events().trigger("update.dot");if(t.watch){r.watch()}return r};i.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",lastCharacter:{remove:[" ",",",";",".","!","?"],noEllipsis:[]},tolerance:0,callback:null,after:null,height:null,watch:false,windowResizeFix:true,debug:false};var l=1;function d(s,w,v){var u=s.children(),p=false;s.empty();for(var r=0,q=u.length;r<q;r++){var t=u.eq(r);s.append(t);if(v){s.append(v)}if(k(s,w)){t.remove();p=true;break}else{if(v){v.remove()}}}return p}function m(s,r,A,t,q){var w=s.contents(),x=false;s.empty();var z="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, select, optgroup, option, textarea, script, style";for(var y=0,u=w.length;y<u;y++){if(x){break}var v=w[y],p=i(v);if(typeof v=="undefined"){continue}s.append(p);if(q){s[(s.is(z))?"after":"append"](q)}if(v.nodeType==3){if(k(A,t)){x=e(p,r,A,t,q)}}else{x=m(p,r,A,t,q)}if(!x){if(q){q.remove()}}}return x}function e(q,r,p,w,s){var D=false,A=q[0];if(typeof A=="undefined"){return false}var E=(w.wrap=="letter")?"":" ",t=h(A).split(E),F=-1,v=-1,G=0,y=t.length-1;while(G<=y){var x=Math.floor((G+y)/2);if(x==v){break}v=x;a(A,t.slice(0,v+1).join(E)+w.ellipsis);if(!k(p,w)){F=v;G=v}else{y=v}}if(F!=-1&&!(t.length==1&&t[0].length==0)){var u=f(t.slice(0,F+1).join(E),w);D=true;a(A,u)}else{var z=q.parent();q.remove();var C=(s)?s.length:0;if(z.contents().size()>C){var B=z.contents().eq(-1-C);D=e(B,r,p,w,s)}else{var A=z.prev().contents().eq(-1)[0];if(typeof A!="undefined"){var u=f(h(A),w);a(A,u);z.remove();D=true}}}return D}function k(q,p){return q.innerHeight()>p.maxHeight}function f(p,q){while(i.inArray(p.slice(-1),q.lastCharacter.remove)>-1){p=p.slice(0,-1)}if(i.inArray(p.slice(-1),q.lastCharacter.noEllipsis)<0){p+=q.ellipsis}return p}function j(p){return{width:p.innerWidth(),height:p.innerHeight()}}function a(q,p){if(q.innerText){q.innerText=p}else{if(q.nodeValue){q.nodeValue=p}else{if(q.textContent){q.textContent=p}}}}function h(p){if(p.innerText){return p.innerText}else{if(p.nodeValue){return p.nodeValue}else{if(p.textContent){return p.textContent}else{return""}}}}function c(p,q){if(typeof p=="undefined"){return false}if(!p){return false}if(typeof p=="string"){p=i(p,q);return(p.length)?p:false}if(typeof p=="object"){return(typeof p.jquery=="undefined")?false:p}return false}function o(s){var t=s.innerHeight(),r=["paddingTop","paddingBottom"];for(var u=0,q=r.length;u<q;u++){var p=parseInt(s.css(r[u]),10);if(isNaN(p)){p=0}t-=p}return t}function b(q,p){if(!q){return false}if(typeof p=="string"){p="dotdotdot: "+p}else{p=["dotdotdot:",p]}if(typeof window.console!="undefined"){if(typeof window.console.log!="undefined"){window.console.log(p)}}return false}var n=i.fn.html;i.fn.html=function(p){if(typeof p!="undefined"){if(this.data("dotdotdot")){if(typeof p!="function"){return this.trigger("update",[p])}}return n.call(this,p)}return n.call(this)};var g=i.fn.text;i.fn.text=function(q){if(typeof q!="undefined"){if(this.data("dotdotdot")){var p=i("<div />");p.text(q);q=p.html();p.remove();return this.trigger("update",[q])}return g.call(this,q)}return g.call(this)}})(require("jquery"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/soy/ProjectTemplatesList.soy' */
// This file was automatically generated from ProjectTemplatesList.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }


JIRA.Templates.ProjectTemplates.renderProjectTemplates = function(opt_data, opt_ignored) {
  return '' + ((soy.$$getMapKeys(opt_data.projectTemplates).length == 0) ? JIRA.Templates.errorMsg({closeable: false, msg: 'No project templates could be found.'}) : JIRA.Templates.ProjectTemplates.renderTemplates(opt_data));
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderProjectTemplates.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderProjectTemplates';
}


JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.projectTemplatesByType.length == 0) {
    output += JIRA.Templates.errorMsg({closeable: false, msg: 'No project templates could be found.'});
  } else {
    var projectTypeTemplatesGroupList18 = opt_data.projectTemplatesByType;
    var projectTypeTemplatesGroupListLen18 = projectTypeTemplatesGroupList18.length;
    for (var projectTypeTemplatesGroupIndex18 = 0; projectTypeTemplatesGroupIndex18 < projectTypeTemplatesGroupListLen18; projectTypeTemplatesGroupIndex18++) {
      var projectTypeTemplatesGroupData18 = projectTypeTemplatesGroupList18[projectTypeTemplatesGroupIndex18];
      output += '<div class="template-group" id="project-template-group-' + soy.$$escapeHtml(projectTypeTemplatesGroupData18.projectTypeBean.projectTypeKey) + '"><div class="template-group-header"><h6><img class="project-type-icon" src="data:image/svg+xml;base64, ' + soy.$$escapeHtml(projectTypeTemplatesGroupData18.projectTypeBean.icon) + ' "/><span>' + soy.$$escapeHtml(projectTypeTemplatesGroupData18.projectTypeBean.projectTypeDisplayKey) + '</span></h6></div>' + JIRA.Templates.ProjectTemplates.renderTemplates({projectTemplates: projectTypeTemplatesGroupData18.projectTemplates}) + '</div>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType';
}


JIRA.Templates.ProjectTemplates.renderTemplates = function(opt_data, opt_ignored) {
  return '<div class="pt-templates-list">' + JIRA.Templates.ProjectTemplates.renderItems(opt_data) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderTemplates.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderTemplates';
}


JIRA.Templates.ProjectTemplates.renderItems = function(opt_data, opt_ignored) {
  var output = '<ol class="templates" tabindex="100">';
  var templateList37 = opt_data.projectTemplates;
  var templateListLen37 = templateList37.length;
  for (var templateIndex37 = 0; templateIndex37 < templateListLen37; templateIndex37++) {
    var templateData37 = templateList37[templateIndex37];
    output += '<li class="template"' + ((templateData37.itemModuleCompleteKey) ? 'data-item-module-complete-key="' + soy.$$escapeHtml(templateData37.itemModuleCompleteKey) + '"' : '') + ((templateData37.projectTemplateModuleCompleteKey) ? 'data-project-template-module-complete-key="' + soy.$$escapeHtml(templateData37.projectTemplateModuleCompleteKey) + '"' : '') + ((templateData37.createProject) ? 'data-create-project="' + soy.$$escapeHtml(templateData37.createProject) + '"' : '') + ((templateData37.demoProject) ? 'data-demo-project="' + soy.$$escapeHtml(templateData37.demoProject) + '"' : '') + ((templateData37.backgroundIconUrl) ? 'data-background-icon-url="' + soy.$$escapeHtml(templateData37.backgroundIconUrl) + '"' : '') + ((templateData37.name) ? 'data-name="' + soy.$$escapeHtml(templateData37.name) + '"' : '') + ((templateData37.description) ? 'data-description="' + soy.$$escapeHtml(templateData37.description) + '"' : '') + ((templateData37.longDescriptionContent) ? 'data-long-description-content="' + soy.$$escapeHtml(templateData37.longDescriptionContent) + '"' : '') + ((templateData37.infoSoyPath) ? 'data-info-soy-path="' + soy.$$escapeHtml(templateData37.infoSoyPath) + '"' : '') + '><img class="template-preview" src="' + soy.$$escapeHtml(templateData37.iconUrl) + '" /><div class="template-meta"><div class="template-name" title="' + soy.$$escapeHtml(templateData37.name) + '">' + soy.$$escapeHtml(templateData37.name) + '</div><div class="template-description" title="' + soy.$$escapeHtml(templateData37.description) + '">' + soy.$$escapeHtml(templateData37.description) + '</div></div></li>';
  }
  output += '</ol>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderItems.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderItems';
}


JIRA.Templates.ProjectTemplates.loadingTemplatesList = function(opt_data, opt_ignored) {
  return '<div class="wait-container"><img class="wait-icon" src="' + soy.$$escapeHtml("") + '/images/icons/wait.gif"><span class="wait-text">' + soy.$$escapeHtml('Loading project templates') + '&hellip;</span></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.loadingTemplatesList.soyTemplateName = 'JIRA.Templates.ProjectTemplates.loadingTemplatesList';
}


JIRA.Templates.ProjectTemplates.footerLinks = function(opt_data, opt_ignored) {
  return '<div class="footer-links"><a class="import-project-trigger button-panel-link" href="' + soy.$$escapeHtml("") + '/secure/admin/views/ExternalImport1.jspa">' + soy.$$escapeHtml('Import a project') + '</a>|<a class="create-with-shared-config button-panel-link" href="#"><span class="aui-icon aui-icon-create-shared">' + soy.$$escapeHtml('Create with shared configuration') + '</span> ' + soy.$$escapeHtml('Create with shared configuration') + '</a>' + ((opt_data.showDemoLink) ? '| <a class="add-demo-project-trigger button-panel-link" href="#">' + soy.$$escapeHtml('Create sample data') + '</a>' : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.footerLinks.soyTemplateName = 'JIRA.Templates.ProjectTemplates.footerLinks';
}


JIRA.Templates.ProjectTemplates.addWorkflowsLink = function(opt_data, opt_ignored) {
  return '<a class="add-workflow-link" href="' + soy.$$escapeHtml(opt_data.baseUrl) + '/plugins/servlet/wfshare-import?src=projecttemplates" tabindex="-1">' + soy.$$escapeHtml('View Marketplace Workflows') + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.addWorkflowsLink.soyTemplateName = 'JIRA.Templates.ProjectTemplates.addWorkflowsLink';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/soy/AddProject.soy' */
// This file was automatically generated from AddProject.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }


JIRA.Templates.ProjectTemplates.addProjectForm = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.errors.errorMessages) {
    var errorList5 = opt_data.errors.errorMessages;
    var errorListLen5 = errorList5.length;
    for (var errorIndex5 = 0; errorIndex5 < errorListLen5; errorIndex5++) {
      var errorData5 = errorList5[errorIndex5];
      output += JIRA.Templates.errorMsg({closeable: false, msg: errorData5});
    }
  }
  output += '<div class="add-project-wrapper"><div class="add-project-form-wrapper">' + aui.form.form({content: '' + aui.form.fieldset({legendContent: '', content: '' + JIRA.Templates.ProjectTemplates.longTextField({id: 'name', name: 'name', isRequired: false, maxLength: opt_data.maxNameLength, labelContent: 'Name', descriptionText: AJS.format('Max. {0} characters.',opt_data.maxNameLength), value: opt_data.currentName ? opt_data.currentName : '', errorTexts: opt_data.errors.errors.projectName ? [opt_data.errors.errors.projectName] : []}) + JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon({id: 'key', name: 'key', isRequired: false, maxLength: opt_data.maxKeyLength, labelContent: 'Key', descriptionText: AJS.format('Max. {0} characters.',opt_data.maxKeyLength), helpTitle: 'What\x27s a project key?', value: opt_data.currentKey ? opt_data.currentKey : '', errorTexts: opt_data.errors.errors.projectKey ? [opt_data.errors.errors.projectKey] : []}) + ((opt_data.shouldShowLead) ? JIRA.Templates.ProjectTemplates.projectLeadField({field: opt_data.projectLeadPickerField, isRequired: false, errorTexts: opt_data.errors.errors.projectLead ? [opt_data.errors.errors.projectLead] : [], options: opt_data.leadOptions}) : '') + ((opt_data.addUserToLicense.displayCheckbox) ? JIRA.Templates.ProjectTemplates.addUserToLicense({fieldId: opt_data.addUserToLicense.fieldId, fieldName: opt_data.addUserToLicense.fieldName, applicationName: opt_data.addUserToLicense.applicationName, usedSeats: opt_data.addUserToLicense.usedSeats, totalSeats: opt_data.addUserToLicense.totalSeats, disableCheckbox: opt_data.addUserToLicense.disableCheckbox, licensingUrl: opt_data.addUserToLicense.licensingUrl}) : '') + '<input type="hidden" name="keyEdited" id="keyEdited" value="false"><input type="hidden" name="projectTemplateWebItemKey" value="' + soy.$$escapeHtml(opt_data.projectTemplateWebItemKey) + '"><input type="hidden" name="projectTemplateModuleKey" value="' + soy.$$escapeHtml(opt_data.projectTemplateModuleKey) + '"><input type="submit" class="pt-hidden-submit offscreen-left">'}), id: 'add-project-form'}) + '</div>' + ((opt_data.projectTemplateDescriptionContent) ? '<div class="add-project-description-wrapper"><div class="project-template-title"><h3>' + soy.$$escapeHtml(opt_data.projectTemplateTitle) + '</h3></div><div class="project-template-description">' + soy.$$filterNoAutoescape(opt_data.projectTemplateDescriptionContent) + '</div></div>' : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.addProjectForm.soyTemplateName = 'JIRA.Templates.ProjectTemplates.addProjectForm';
}


JIRA.Templates.ProjectTemplates.keyHelp = function(opt_data, opt_ignored) {
  return '<div class="project-key-help"><p><b>' + soy.$$escapeHtml('What\x27s a project key?') + '</b></p><ul><li>' + soy.$$escapeHtml('It prefixes each issue in the project') + '</li><li>' + soy.$$escapeHtml('It can be changed, but this is not a trivial task') + '</li></ul></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.keyHelp.soyTemplateName = 'JIRA.Templates.ProjectTemplates.keyHelp';
}


JIRA.Templates.ProjectTemplates.projectLeadField = function(opt_data, opt_ignored) {
  var param77 = '' + aui.form.label({forField: opt_data.field.name + '-field', isRequired: opt_data.isRequired, content: 'Project Lead'}) + JIRA.Templates.Fields.Pickers.User.single({field: opt_data.field, options: opt_data.options, editValue: opt_data.value}) + aui.form.fieldDescription({message: 'Enter the username of the Project Lead.'});
  if (opt_data.errorTexts) {
    var errorList90 = opt_data.errorTexts;
    var errorListLen90 = errorList90.length;
    for (var errorIndex90 = 0; errorIndex90 < errorListLen90; errorIndex90++) {
      var errorData90 = errorList90[errorIndex90];
      param77 += aui.form.fieldError({message: errorData90});
    }
  }
  var output = '' + aui.form.fieldGroup({content: param77});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.projectLeadField.soyTemplateName = 'JIRA.Templates.ProjectTemplates.projectLeadField';
}


JIRA.Templates.ProjectTemplates.addUserToLicense = function(opt_data, opt_ignored) {
  var output = '';
  var labelMessage__soy96 = '' + soy.$$escapeHtml(AJS.format('Give me a {0} license so I can access this project.',opt_data.applicationName)) + ((opt_data.totalSeats > 0) ? '<br/>' + soy.$$escapeHtml(AJS.format('({0} of {1} licenses now used)',opt_data.usedSeats,opt_data.totalSeats)) : '');
  output += aui.form.fieldGroup({content: '' + aui.form.label({forField: opt_data.fieldName, content: 'License'}) + ((opt_data.disableCheckbox) ? aui.form.field({id: opt_data.fieldId, name: opt_data.fieldName, value: 'true', type: 'checkbox', isChecked: false, labelContent: labelMessage__soy96, isDisabled: true, descriptionContent: AJS.format('We can\x27\x27t give you access to {0} automatically. You can {1}manage application access{2} to work on {0} projects.',opt_data.applicationName,'<a href="' + "" + opt_data.licensingUrl + '">','</a>')}) : aui.form.field({id: opt_data.fieldId, name: opt_data.fieldName, value: 'true', type: 'checkbox', isChecked: false, labelContent: labelMessage__soy96, isDisabled: false}))});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.addUserToLicense.soyTemplateName = 'JIRA.Templates.ProjectTemplates.addUserToLicense';
}


JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon = function(opt_data, opt_ignored) {
  var param128 = '' + aui.form.label({forField: opt_data.name, isRequired: opt_data.isRequired, content: opt_data.labelContent}) + aui.form.input({id: opt_data.id, name: opt_data.name, type: 'text', maxLength: opt_data.maxLength, value: opt_data.value}) + '<a class="help-lnk" title="' + soy.$$escapeHtml(opt_data.helpTitle) + '" id="' + soy.$$escapeHtml(opt_data.id) + '-help-icon"><span class="aui-icon aui-icon-help">' + soy.$$escapeHtml(opt_data.helpTitle) + '</span></a>' + ((opt_data.descriptionText) ? aui.form.fieldDescription({message: opt_data.descriptionText}) : '');
  if (opt_data.errorTexts) {
    var errorList152 = opt_data.errorTexts;
    var errorListLen152 = errorList152.length;
    for (var errorIndex152 = 0; errorIndex152 < errorListLen152; errorIndex152++) {
      var errorData152 = errorList152[errorIndex152];
      param128 += aui.form.fieldError({message: errorData152});
    }
  }
  var output = '' + aui.form.fieldGroup({content: param128});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon.soyTemplateName = 'JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon';
}


JIRA.Templates.ProjectTemplates.longTextField = function(opt_data, opt_ignored) {
  var param158 = '' + aui.form.label({forField: opt_data.name, isRequired: opt_data.isRequired, content: opt_data.labelContent}) + aui.form.input({id: opt_data.id, name: opt_data.name, type: 'text', maxLength: opt_data.maxLength, value: opt_data.value, extraClasses: 'long-field'}) + ((opt_data.descriptionText) ? aui.form.fieldDescription({message: opt_data.descriptionText}) : '');
  if (opt_data.errorTexts) {
    var errorList176 = opt_data.errorTexts;
    var errorListLen176 = errorList176.length;
    for (var errorIndex176 = 0; errorIndex176 < errorListLen176; errorIndex176++) {
      var errorData176 = errorList176[errorIndex176];
      param158 += aui.form.fieldError({message: errorData176});
    }
  }
  var output = '' + aui.form.fieldGroup({content: param158});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.longTextField.soyTemplateName = 'JIRA.Templates.ProjectTemplates.longTextField';
}


JIRA.Templates.ProjectTemplates.spinner = function(opt_data, opt_ignored) {
  return '<span id=\'' + soy.$$escapeHtml(opt_data.id) + '\' class=\'icon throbber loading\'/>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.spinner.soyTemplateName = 'JIRA.Templates.ProjectTemplates.spinner';
}


JIRA.Templates.ProjectTemplates.formatAnchor = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.href) + '"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.body) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.formatAnchor.soyTemplateName = 'JIRA.Templates.ProjectTemplates.formatAnchor';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/soy/CreateSharedProject.soy' */
// This file was automatically generated from CreateSharedProject.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }


JIRA.Templates.ProjectTemplates.createSharedProjectForm = function(opt_data, opt_ignored) {
  return '<div class="create-shared-project-wrapper"><div class="create-shared-project-form-wrapper">' + aui.form.form({content: '' + aui.form.fieldset({content: '<p>' + soy.$$escapeHtml('Select the existing project that you\x27d like to share configurations with.') + '<a class="help-lnk" title="' + soy.$$escapeHtml('What will be shared?') + '" id="shared-help-icon"><span class="aui-icon aui-icon-help">' + soy.$$escapeHtml('What will be shared?') + '</span></a></p>' + aui.form.fieldGroup({extraClasses: 'project-picker-group', content: '' + aui.form.label({forField: 'project-picker', isRequired: false, content: 'Choose a project'}) + aui.form.input({id: 'project-picker', name: 'project', type: 'text'}) + '<div id="project-picker-options" data-suggestions="' + soy.$$escapeHtml(opt_data.projectSuggestions) + '"></div>'}) + '<p class="create-shared-info">' + soy.$$escapeHtml('When a configuration is shared with several projects, it means that any changes made to the configuration will affect all the projects.') + '</p>'}), id: 'create-shared-project-form'}) + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.createSharedProjectForm.soyTemplateName = 'JIRA.Templates.ProjectTemplates.createSharedProjectForm';
}


JIRA.Templates.ProjectTemplates.loading = function(opt_data, opt_ignored) {
  return '<div><div class="dialog-spinner"></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.loading.soyTemplateName = 'JIRA.Templates.ProjectTemplates.loading';
}


JIRA.Templates.ProjectTemplates.noProjects = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml('Looks like no other projects exist yet. Please create a brand new project first before trying to share an existing project\x27s configuration.') + '</p>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.noProjects.soyTemplateName = 'JIRA.Templates.ProjectTemplates.noProjects';
}


JIRA.Templates.ProjectTemplates.sharedHelp = function(opt_data, opt_ignored) {
  return '<div class="shared-help"><p><strong>' + soy.$$escapeHtml('What will be shared?') + '</strong></p><p>' + soy.$$escapeHtml('Configuration refers to the set of schemes used by a project') + '</p><ul><li>' + soy.$$escapeHtml('Permission Scheme') + '</li><li>' + soy.$$escapeHtml('Notification Scheme') + '</li><li>' + soy.$$escapeHtml('Issue Security Scheme') + '</li><li>' + soy.$$escapeHtml('Workflow Scheme') + '</li><li>' + soy.$$escapeHtml('Issue Type Scheme') + '</li><li>' + soy.$$escapeHtml('Issue Type Screen Scheme') + '</li><li>' + soy.$$escapeHtml('Field Configuration Scheme') + '</li></ul></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.sharedHelp.soyTemplateName = 'JIRA.Templates.ProjectTemplates.sharedHelp';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/Config.js' */
define("jira/project-templates/config",{model:{}});AJS.namespace("JPT.ConfigModel",null,require("jira/project-templates/config"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/ProjectKeyGenerator.js' */
define("jira/project-templates/project-key-generator",["jquery","underscore"],function(d,h){var c={};c.IGNORED_WORDS=["THE","A","AN","AS","AND","OF","OR"];c.CHARACTER_MAP={};c.CHARACTER_MAP[199]="C";c.CHARACTER_MAP[231]="c";c.CHARACTER_MAP[252]="u";c.CHARACTER_MAP[251]="u";c.CHARACTER_MAP[250]="u";c.CHARACTER_MAP[249]="u";c.CHARACTER_MAP[233]="e";c.CHARACTER_MAP[234]="e";c.CHARACTER_MAP[235]="e";c.CHARACTER_MAP[232]="e";c.CHARACTER_MAP[226]="a";c.CHARACTER_MAP[228]="a";c.CHARACTER_MAP[224]="a";c.CHARACTER_MAP[229]="a";c.CHARACTER_MAP[225]="a";c.CHARACTER_MAP[239]="i";c.CHARACTER_MAP[238]="i";c.CHARACTER_MAP[236]="i";c.CHARACTER_MAP[237]="i";c.CHARACTER_MAP[196]="A";c.CHARACTER_MAP[197]="A";c.CHARACTER_MAP[201]="E";c.CHARACTER_MAP[230]="ae";c.CHARACTER_MAP[198]="Ae";c.CHARACTER_MAP[244]="o";c.CHARACTER_MAP[246]="o";c.CHARACTER_MAP[242]="o";c.CHARACTER_MAP[243]="o";c.CHARACTER_MAP[220]="U";c.CHARACTER_MAP[255]="Y";c.CHARACTER_MAP[214]="O";c.CHARACTER_MAP[241]="n";c.CHARACTER_MAP[209]="N";c.desiredKeyLength=4;c.maxKeyLength=10;c.getTotalLength=function a(k){return k.join("").length};c.removeIgnoredWords=function f(k){return h.reject(k,function(l){return d.inArray(l,c.IGNORED_WORDS)!==-1})};c.createAcronym=function b(l){var k="";d.each(l,function(m,n){k+=n.charAt(0)});return k};c.getFirstSyllable=function i(m){var l=false;var k;for(k=0;k<m.length;k++){if(c.isVowelOrY(m[k])){l=true}else{if(l){return m.substring(0,k+1)}}}return m};c.isVowelOrY=function g(k){return k&&k.length===1&&k.search("[AEIOUY]")!==-1};c.init=function j(l,k){c.desiredKeyLength=l;c.maxKeyLength=k};c.generate=function e(l){l=d.trim(l);if(!l){return""}var k=[];for(var n=0,p=l.length;n<p;n++){var o=c.CHARACTER_MAP[l.charCodeAt(n)];k.push(o?o:l[n])}l=k.join("");var r=[];d.each(l.split(/\s+/),function(s,t){if(t){t=t.replace(/[^a-zA-Z]/g,"");t=t.toUpperCase();t.length&&r.push(t)}});if(c.desiredKeyLength&&c.getTotalLength(r)>c.desiredKeyLength){r=c.removeIgnoredWords(r)}var m;if(r.length==0){m=""}else{if(r.length==1){var q=r[0];if(c.desiredKeyLength&&q.length>c.desiredKeyLength){m=c.getFirstSyllable(q)}else{m=q}}else{m=c.createAcronym(r)}}if(c.maxKeyLength&&m.length>c.maxKeyLength){m=m.substr(0,c.maxKeyLength)}return m};return c});AJS.namespace("JPT.ProjectKeyGenerator",null,require("jira/project-templates/project-key-generator"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/DialogView.js' */
define("jira/project-templates/dialog-view-impl",["require","backbone","underscore"],function(e,f,d){var b=AJS.Dialog;var a=AJS.trigger;return f.View.extend({events:{"click   .add-project-trigger":"_onClickAddProject","click   .add-demo-project-trigger":"_onClickAddDemoProject","click   .add-workflow-link":"_onClickViewMarketplaceWorkflows","click   #add-project-dialog .add-demo-project-trigger":"_onCreateProjectAddDemoProjectClick","click   #add-project-dialog .import-project-trigger":"_onClickImportProject","click   #add-project-dialog .create-with-shared-config":"_onClickCreateShared","keydown #add-project-dialog .pt-templates-list":"_onKeydownInTemplatesList"},draw:function(){var g=new b({width:840,height:400,id:"add-project-dialog",closeOnOutsideClick:false,keypressListener:d.bind(this._onKeyPressed,this)});var h=g.popup.element;g.addPage("project-templates-page");g.addHeader("Create project","add-project-dialog-header");g.addPanel("ProjectTemplatesListPanel",JIRA.Templates.ProjectTemplates.loadingTemplatesList(),"pt-content");this._dialog=g;this._$dialogElement=h;g.show();return g},remove:function(){this._dialog&&this._dialog.remove()},showErrorMessage:function(g){this._dialog.getPanel(1,0).html(JIRA.Templates.errorMsg({closable:false,msg:g}))},get$PTContent:function c(){return this.getDialogController().$dialogElement.find(".pt-content")},_onKeyPressed:function(h){var g=27;if(this._dialog){if(h.keyCode===g){this.getDialogController().hideDialogFromNewUser("dismissed");this._dialog.remove();return false}}return true},_onKeydownInTemplatesList:function(h){var g=13;if(this._dialog){if(h.keyCode===g){this._$dialogElement.find(".pt-submit-button:visible").click();return false}}return true},_onClickAddProject:function(g){g.preventDefault();this.getDialogController().handleProjectTemplateTriggered()},_onCreateProjectAddDemoProjectClick:function(){a("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.create.project.clicked"})},_onClickViewMarketplaceWorkflows:function(){a("analyticsEvent",{name:"jira.project.templates.dialog.create.viewmarketplaceworkflows.clicked"})},_onClickAddDemoProject:function(h){h.preventDefault();var g=this.getDialogController().dialog;if(g&&g.popup&&g.popup.element){g.remove()}this.getDialogController().handleDemoProjectTemplateTriggered()},_onClickImportProject:function(g){this.getDialogController().hideDialogFromNewUser("importproject")},_onClickCreateShared:function(g){this.getDialogController().handleCreateShared()},getDialogController:function(){return e("jira/project-templates/dialog-controller")}})});define("jira/project-templates/dialog-view",["jira/project-templates/dialog-view-impl","jquery"],function(b,a){return new b({el:a(document)})});AJS.namespace("JPT.DialogView",null,require("jira/project-templates/dialog-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/DialogController.js' */
define("jira/project-templates/dialog-controller",["jira/project-templates/dialog-view","jira/project-templates/config","jira/ajs/ajax/smart-ajax","jira/util/data/meta","jira/lib/class","jquery","underscore","wrm/data"],function(n,e,a,g,b,k,o,m){var d=AJS.contextPath();var f=AJS.isDevMode;var i=AJS.log;function h(p,q){AJS.trigger("analyticsEvent",{name:p,data:q})}var l;var c=function(){if(!l){l=m.claim("com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData")||{}}return l};var j=b.extend({WELCOME_REST_URL:d+"/rest/welcome/1.0/show/welcome",initialize:function(){o.bindAll(this,"handleProjectTemplateTriggered","hideDialogFromNewUser");if(g.getBoolean("show-welcome-screen")){this.handleProjectTemplateTriggered()}},handleProjectTemplateTriggered:function(){this.demoProject=false;h("jira.project.templates.dialog.create.show");this.openWithFirstProjectTemplateOfTypePreSelected()},handleDemoProjectTemplateTriggered:function(){this.demoProject=true;var p=this.getTemplateController().loadDemoProjectTemplatesData();this.openWithFirstProjectTemplateOfTypePreSelected(null,p);this._addAnalyticsToCreateDemoShow(p)},_addAnalyticsToCreateDemoShow:function(p){p.done(function(r){var s={};var q=function(t){return t.projectTemplatesGroupedByType.map(function(u){return u.projectTemplates.map(function(v){return v.itemModuleCompleteKey}).join()}).join()};s.demoSets=q(r);s.instanceCreatedDate=c().instanceCreatedDate;h("jira.project.templates.dialog.create.demo.show",s)}.bind(this))},openWithFirstProjectTemplateOfTypePreSelected:function(p,q){q=q||this.getTemplateController().loadProjectTemplatesData();this.dialog=n.draw();q.fail(o.bind(function(r){this._handleUnknownErrorOfPTRetrieval()},this));q.done(o.bind(function(r){this.$dialogElement=this.dialog.popup.element;var s;if(!o.isUndefined(e.model.selectedTemplate)){s=e.model.selectedTemplate}e.model=r;e.model.selectedTemplate=s;this.getTemplateController().init(r,p)},this))},handleCreateShared:function(){h("jira.project.templates.dialog.create.shared.clicked");this.demoProject=false;this.openWithCreateShared()},openWithCreateShared:function(){var p=require("jira/project-templates/create-shared-controller");p.initCreateShared()},callbackWithResize:function(p){return o.bind(o.wrap(p,function(q){q.call(this);this.dialog.updateHeight()}),this)},addPage:function(r){var q=this.dialog.addPage(r.name).page[this.dialog.curpage];this.dialog.addHeader(r.title,"add-project-dialog-header");this.dialog.addPanel(r.panelName,"","pt-content");if(r.backButton){this._addBackButton(q)}this.dialog.addButton(r.submitButtonText,this.callbackWithResize(r.submitButtonCallback),r.submitButtonClass+" pt-submit-button");var p=this.$dialogElement.find("."+r.submitButtonClass);p.removeClass("button-panel-button").addClass("aui-button aui-button-primary");p.focus();this.dialog.addCancel("Cancel",o.bind(function(s){this.hideDialogFromNewUser("dismissed");this.dialog.remove()},this));return q},_backButtonOnClickCallback:function(p){return o.bind(function(){if(this.demoProject){h("jira.project.templates.dialog.demo.back")}else{h("jira.project.templates.dialog.create.back")}var q=n.get$PTContent();q.css("background-image","none");this.dialog.prevPage();p.remove();this.dialog.page.pop()},this)},_addBackButton:function(q){this.dialog.addButton("Back",this.callbackWithResize(this._backButtonOnClickCallback(q)),"add-project-back-button");var p=this.$dialogElement.find(".add-project-back-button");p.removeClass("button-panel-button").addClass("aui-button")},_handleUnknownErrorOfPTRetrieval:function(){n.showErrorMessage("An error occurred while trying to contact Jira")},hideDialogFromNewUser:function(p){if(p==="dismissed"){if(this.demoProject){h("jira.project.templates.dialog.demo.dismissed")}else{h("jira.project.templates.dialog.create.dismissed")}}else{if(p==="importproject"){h("jira.project.templates.dialog.import.clicked")}else{if(p==="templateselected"){if(this.demoProject){h("jira.project.templates.dialog.demo.templateselected")}else{h("jira.project.templates.dialog.create.templateselected")}}}}if(g.getBoolean("show-welcome-screen")){k.ajax({url:this.WELCOME_REST_URL+"/"+p,type:"DELETE",success:function(){if(f&&f()){i("don't show project template dialog anymore")}}})}},getTemplateController:function(){return require("jira/project-templates/select-project-template-controller")}});return new j()});AJS.namespace("JPT.DialogController",null,require("jira/project-templates/dialog-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/AddProjectView.js' */
define("jira/project-templates/add-project-view-impl",["jira/project-templates/dialog-controller","jira/project-templates/config","jira/util/events","jira/util/events/types","require","backbone","jquery","underscore"],function(q,n,t,y,m,e,g,D){var f=AJS.InlineDialog;return e.View.extend({TIMEOUT_MS:100,postDrawCallbacks:[],events:{"submit #add-project-form":"onSubmitForm"},page:undefined,isSubmitting:false,initialize:function(F){D.bindAll(this,"bindHook")},addPostDrawCallback:function(F){this.postDrawCallbacks.push(F)},prepareDialog:function(F){this.page=q.addPage({name:"add-project",title:F,panelName:"add-project",backButton:true,submitButtonText:"Submit",submitButtonCallback:this.onSubmitForm.bind(this),submitButtonClass:"add-project-dialog-create-button"})},draw:function(U){function V(X){if(!X.errors){X.errors={}}return X}this.isSubmitting=false;q.dialog.gotoPage(this.page.id);var G=U.webItemData.projectTemplateModuleCompleteKey;var F=D.find(n.model.projectTemplatesGroupedByType,function(X){return D.any(X.projectTemplates,function(Y){return Y.itemModuleCompleteKey==G})});var L=(F&&F.applicationInfo&&F.applicationInfo.applicationName)||"";var K=(F&&F.applicationInfo&&F.applicationInfo.licenseUsedSeats)||0;var H=(F&&F.applicationInfo&&F.applicationInfo.licenseTotalSeats)||0;var T=(F&&F.applicationInfo&&F.applicationInfo.canUserBeAddedToApplication)||false;var J=(F&&F.applicationInfo&&F.applicationInfo.canUserUseApplication)||false;var P=(F&&F.applicationInfo&&F.applicationInfo.ondemand)||false;var I;if(!F||!F.applicationInfo){I=false}else{I=!J}var R={maxNameLength:n.model.maxNameLength,maxKeyLength:n.model.maxKeyLength,shouldShowLead:n.model.shouldShowProjectLead,projectTemplateWebItemKey:n.model.selectedTemplate||U.webItemData.itemModuleCompleteKey,projectTemplateModuleKey:G,projectTemplateTitle:U.webItemData.name,projectTemplateDescriptionContent:U.webItemData.longDescriptionContent,currentKey:U.currentKey||"",currentName:U.currentName||"",errors:V(U.errors),projectLeadPickerField:{id:"lead",name:"lead"},addUserToLicense:{displayCheckbox:I,disableCheckbox:!T,applicationName:L,usedSeats:K,totalSeats:H,fieldId:"licenseUser",fieldName:"licenseUser",licensingUrl:P?"/admin/accessconfig":"/plugins/servlet/applications/versions-licenses"},leadOptions:[{selected:true,displayName:U.currentUserDisplayName,optionName:U.currentUserName,avatarURL:U.currentUserAvatarUrl}]};var N=JIRA.Templates.ProjectTemplates.addProjectForm(R);q.dialog.getPanel(this.page.id,0).html(N);if(U.webItemData&&U.webItemData.backgroundIconUrl){var Q=q.$dialogElement.find(".pt-content");Q.css("background-image",'url("'+U.webItemData.backgroundIconUrl+'")')}var O=g("#add-project-form");t.trigger(y.NEW_CONTENT_ADDED,[O]);this.nameElement=q.$dialogElement.find("#name");this.keyElement=q.$dialogElement.find("#key");this.keyEditedElement=q.$dialogElement.find("#keyEdited");this.leadDisplayElement=q.$dialogElement.find("#lead-field");this.leadValueElement=q.$dialogElement.find("#lead");var W=this.keyElement.parent().find(".aui-icon-help");if(W.length){new f(W,"project-key-help-popup",function(Z,Y,X){Z.html(JIRA.Templates.ProjectTemplates.keyHelp());X()},{width:330,offsetX:-30})}this.keyElement.attr("style","text-transform: uppercase");var S=m("jira/project-templates/add-project-controller");this.nameElement.focus(D.bind(function(X){this.bindHook(X,S.nameTimeout)},this));var M=this;this.nameElement.change(function(X){S.validateName();M.unbindHook(X)});this.nameElement.focus();this.keyElement.focus(D.bind(function(Y){var X=g(Y.target);X.data("lastValue",X.val());this.bindHook(Y,S.keyTimeout)},this));this.keyElement.blur(D.bind(function(X){this.unbindHook(X)},this));this.keyElement.change(function(){S.validateKey();S.autofillKeyIfNeeded()});if(!D.isEmpty(this.postDrawCallbacks)){D.each(this.postDrawCallbacks,function(X){X()})}q.dialog.updateHeight()},onSubmitForm:function(G){var F=m("jira/project-templates/add-project-controller");F.submit();return false},get$SubmitButton:function(){return q.$dialogElement.find(".add-project-dialog-create-button")},get$BackButton:function(){return q.$dialogElement.find(".add-project-back-button")},bindHook:function p(I,G){var F=g(I.target),H;H=D.bind(function(){this.unbindHook(I);G.apply();if(F.is(":visible")){F.data("checkHook",setTimeout(H,this.TIMEOUT_MS))}},this);if(!F.data("checkHook")){F.data("checkHook",setTimeout(H,0))}},unbindHook:function(G){var F=g(G.target);clearTimeout(F.data("checkHook"));F.removeData("checkHook")},showInlineError:function(G,H){if(this.isSubmitting){return}var F=G.parent().find(".error");if(!F.length){F=g("<div class='error'></div>");G.parent().append(F)}F.text(H);F.show()},showInlineErrorForName:function E(F){this.showInlineError(this.nameElement,F)},showInlineErrorForKey:function A(F){this.showInlineError(this.keyElement,F)},hideInlineError:function z(F){F.parent().find(".error").hide()},hideInlineErrorForName:function c(){this.hideInlineError(this.nameElement)},hideInlineErrorForKey:function u(){this.hideInlineError(this.keyElement)},setName:function i(F){this.nameElement.val(F)},getName:function s(){return this.nameElement.val()},setKey:function b(F){this.keyElement.val(F)},getKey:function o(){return this.keyElement.val().toUpperCase()},getLeadDisplayName:function v(){return this.leadDisplayElement.val()},getLeadUserName:function w(){return this.leadValueElement.val()},getAvatarUrlOfSelectedLead:function r(){var F=q.$dialogElement.find("#lead-single-select .aui-ss-entity-icon").css("background-image");if(!D.isUndefined(F)){var G=F.match(/^url\((.+)\)$/);return(G&&G[1])?G[1]:""}else{return""}},setKeyEdited:function l(F){this.keyEditedElement.val(F)},getKeyEdited:function B(){return this.keyEditedElement.val()},setKeyEdited:function l(){var F=this.getKey();if(this.keyElement.data("lastValue")!==F){this.keyEditedElement.val((F)?"true":"false")}this.keyElement.data("lastValue",F)},hasNameErrors:function d(){return this.nameElement.parent().find(".error").size()>0},getAddProjectForm:function h(){return g("#add-project-form")},get$FormFields:function k(){return q.$dialogElement.find(":input")},enterLoadingState:function j(){$submitButton=this.get$SubmitButton();if(!$submitButton.attr("disabled")){$backButton=this.get$BackButton();$submitButton.attr("disabled","disabled");$backButton.attr("disabled","disabled");$backButton.before(JIRA.Templates.ProjectTemplates.spinner({id:"addproject-loading"}));this.get$FormFields().attr("disabled","disabled");this.isSubmitting=true;return true}else{return false}},hideLoadingState:function x(){q.$dialogElement.find("#addproject-loading").remove();this.get$SubmitButton().removeAttr("disabled");this.get$BackButton().removeAttr("disabled");this.get$FormFields().removeAttr("disabled")},avoidDirtyFormWarning:function a(){if(g.fn.removeDirtyWarning){this.getAddProjectForm().removeDirtyWarning()}},hasInlineErrors:function C(){return q.$dialogElement.find(".field-group .error:visible").length!=0}})});define("jira/project-templates/add-project-view",["jira/project-templates/add-project-view-impl","jira/project-templates/dialog-view","jquery"],function(b,a,c){return new b({el:c(document),dialogView:a})});AJS.namespace("JPT.AddProjectView",null,require("jira/project-templates/add-project-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/AddProjectController.js' */
define("jira/project-templates/add-project-controller-impl",["jira/project-templates/add-project-view","jira/project-templates/project-key-generator","jira/project-templates/dialog-controller","jira/project-templates/config","jira/lib/class","jquery","underscore"],function(m,i,k,e,b,l,o){var d=AJS.contextPath();var c=AJS.trigger;return b.extend({postProjectCreationCallbacks:[],projectKeyValidationCallbacks:[],projectNamesUpperCased:[],init:function(p){this._window=p.window||window;o.bindAll(this,"projectCreatedHandler","projectValidationFailedHandler","nameTimeout","keyTimeout","submit")},initCreateShared:function(p){this.existingProjectData=p;this._initAddProject("Create with shared configuration")},initProjectTemplate:function(p){this.existingProjectData=undefined;this.webItemData=p;this._initAddProject(p.name)},_initAddProject:function(p){this.desiredKeyLength=4;this.lastKeyValidated="";this._getExistingProjects();i.init(this.desiredKeyLength,e.model.maxKeyLength);m.prepareDialog(p);m.draw({webItemData:this.webItemData||{},maxKeyLength:e.model.maxKeyLength,maxNameLength:e.model.maxNameLength,currentUserName:e.model.currentUserName,currentUserDisplayName:e.model.currentUserDisplayName,currentUserAvatarUrl:e.model.currentUserAvatarUrl,errors:{}})},_resetProjectLeadValues:function(){e.model.currentUserDisplayName="";e.model.currentUserName="";e.model.currentUserAvatarUrl=""},_hasFullyConfiguredProjectLead:function(){return m.getLeadDisplayName()&&m.getAvatarUrlOfSelectedLead()!=""},submit:function(p){var q;if(this.existingProjectData){q={key:m.getKey(),name:m.getName(),lead:m.getLeadUserName()&&m.getLeadUserName()[0]}}else{q=jQuery.param(m.getAddProjectForm().serializeArray().map(function(r){if(r.name==="key"){r.value=r.value.toUpperCase()}return r}))}if(m.hasInlineErrors()){return}if(m.enterLoadingState()){if(this._hasFullyConfiguredProjectLead()){e.model.currentUserDisplayName=m.getLeadDisplayName();e.model.currentUserName=e.model.currentUserDisplayName?m.getLeadUserName():"";e.model.currentUserAvatarUrl=m.getAvatarUrlOfSelectedLead()}else{this._resetProjectLeadValues()}if(this.existingProjectData){l.ajax({url:d+"/rest/project-templates/1.0/createshared/"+this.existingProjectData.existingProjectId,type:"POST",contentType:"application/json",data:JSON.stringify(q)}).done(this.projectCreatedHandler).fail(this.projectValidationFailedHandler)}else{l.ajax({url:d+(this.webItemData.demoProject?"/rest/jira-importers-plugin/1.0/demo/create":"/rest/project-templates/1.0/templates"),type:"POST",data:q,headers:{"X-Atlassian-Token":"no-check"}}).done(this.projectCreatedHandler).fail(this.projectValidationFailedHandler)}}},registerPostProjectCreationCallback:function(p){this.postProjectCreationCallbacks.push(p)},registerProjectKeyValidationCallback:function(p){this.projectKeyValidationCallbacks.push(p)},localStoragePrefix:"jira.projecttemplates.",projectCreatedHandler:function(q){if(this.existingProjectData){c("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.create.success"})}else{if(this.webItemData.demoProject){c("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.success"})}else{c("analyticsEvent",{name:"jira.project.templates.dialog.create.project.success"})}}m.avoidDirtyFormWarning();var p=this.localStoragePrefix;var r=["confluenceProject","fisheyeProject","crucibleProject","bambooProject"];o.map(r,function(s){if(q.remoteProjectLinks&&q.remoteProjectLinks[s]){localStorage.setItem(p+s,q.remoteProjectLinks[s])}});if(!o.isEmpty(this.postProjectCreationCallbacks)){k.dialog.addPage("post-project-created-page");o.each(this.postProjectCreationCallbacks,function(s){s(k.dialog,q.returnUrl,q.projectId,q.projectKey,q.projectName)})}else{this._window.location=d+q.returnUrl}},projectValidationFailedHandler:function(q,s){if(this.existingProjectData){c("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.create.failure"})}else{if(this.webItemData.demoProject){c("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.failure"})}else{c("analyticsEvent",{name:"jira.project.templates.dialog.create.project.failure"})}}var r={};if(this.isBadRequest(q)){r=JSON.parse(q.responseText)}else{if(this.isUnDefinedServerSideError(q)){r={errorMessages:["Hmm... we couldn\'t create your project due to an unknown error. Try refreshing the page to start again."]}}else{if(this.isDefinedServerSideError(q)){var p=JSON.parse(q.responseText);JIRA.Messages.showReloadErrorMsg(p.message);m.avoidDirtyFormWarning();this._window.location=d+p.returnUrl;return}else{if(this.isTimeoutError(s)){r={errorMessages:["Request timeout when creating project"]}}else{r={errorMessages:[AJS.format("Error creating project, {0}",q.responseText)]}}}}}m.draw({webItemData:this.webItemData||{},errors:r,currentName:m.getName(),currentKey:m.getKey(),currentUserDisplayName:e.model.currentUserDisplayName,currentUserName:e.model.currentUserName,currentUserAvatarUrl:e.model.currentUserAvatarUrl});m.hideLoadingState()},isBadRequest:function(p){return(p.status===400)},isUnDefinedServerSideError:function(p){if(p.status===500){try{JSON.parse(p.responseText)}catch(q){return true}}return false},isDefinedServerSideError:function(p){return p.status===500&&!o.isUndefined(JSON.parse(p.responseText).message)},isTimeoutError:function(p){return p==="timeout"},_updateAndValidateKey:function a(p){m.setKey(p);this.validateKey()},_shouldUpdateKey:function h(){return(m.getKeyEdited()!="true")},autofillKeyIfNeeded:function n(){if(this._shouldUpdateKey()){var p=i.generate(m.getName());if(p.length>1){this._updateAndValidateKey(p)}else{m.setKey("")}}},_doesProjectNameExists:function(q){var p;for(p in this.projectNamesUpperCased){if(q.toUpperCase()==this.projectNamesUpperCased[p]){return true}}return false},validateName:function(){var p=l.trim(m.getName());if(!p){return}if(p.length<e.model.minNameLength){m.showInlineErrorForName(AJS.format("The project name should be at least {0} characters in length.",e.model.minNameLength));return}if(p.length>e.model.maxNameLength){m.showInlineErrorForName(AJS.format("The project name must not exceed {0} characters in length.",e.model.maxNameLength));return}if(this._doesProjectNameExists(p)){m.showInlineErrorForName("A project with that name already exists.");return}m.hideInlineErrorForName()},_performKeyValidationChecks:function(p){var q=l.ajax({url:d+"/rest/api/latest/projectvalidate/key?key="+p.toUpperCase()});q.done(o.bind(function(s){if(s.errors&&s.errors.projectKey){m.showInlineErrorForKey(s.errors.projectKey)}else{var r=false;o.each(this.projectKeyValidationCallbacks,function(u){var t=u(p.toUpperCase());if(t.errors&&t.errors.projectKey){r=true;m.showInlineErrorForKey(t.errors.projectKey)}});if(!r){m.hideInlineErrorForKey()}}},this))},validateKey:function g(){var p=m.getKey();if(this.lastKeyValidated===p){return}if(p){this.lastKeyValidated=p;this._performKeyValidationChecks(p)}else{m.hideInlineErrorForKey()}},nameTimeout:function j(){this.autofillKeyIfNeeded()},keyTimeout:function f(){m.setKeyEdited()},_getExistingProjects:function(){if(this.projectNamesUpperCased.length>0){return this.projectNamesUpperCased}var p=l.ajax({url:d+"/rest/api/latest/project"});p.done(o.bind(function(q){this.projectNamesUpperCased=o.map(q,function(r){return r.name.toUpperCase()})},this))}})});define("jira/project-templates/add-project-controller",["jira/project-templates/add-project-controller-impl","jquery"],function(a,b){return new a({el:b(document)})});AJS.namespace("JPT.AddProjectController",null,require("jira/project-templates/add-project-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/TemplateInfoView.js' */
define("jira/project-templates/template-info-view",["jira/project-templates/dialog-controller","require","backbone","jquery","underscore"],function(e,c,f,d,b){var a=AJS.trigger;return f.View.extend({initialize:function(g){b.bindAll(this,"draw","onNext")},draw:function(j,h){var k=e.addPage({name:"template-info",title:h,panelName:"template-info",backButton:true,submitButtonText:"Select",submitButtonCallback:this.onNext,submitButtonClass:"template-info-dialog-create-button"});var g=this._nameToObj(j)();e.dialog.getPanel(k.id,0).html(g);e.dialog.gotoPage(k.id);var i=b.find(k.button,function(l){return l.item&&l.item.hasClass("pt-submit-button")});if(i){setTimeout(function(){i.item.focus()},0)}},_nameToObj:function(g){return b.reduce(g.split("."),function(i,h){if(i){return i[h]}},window)},onNext:function(h){a("analyticsEvent",{name:"jira.project.templates.dialog.create.templateinfo.next"});var g=c("jira/project-templates/template-info-controller");g.next();return false}})});AJS.namespace("JPT.TemplateInfoView",null,require("jira/project-templates/template-info-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/TemplateInfoController.js' */
define("jira/project-templates/template-info-controller",["jira/project-templates/template-info-view","jira/lib/class","require","underscore"],function(e,a,c,b){var d=a.extend({init:function(f){b.bindAll(this,"initTemplateInfo","next")},initTemplateInfo:function(g){this.projectTemplateData=g;var f=new e();f.draw(g.infoSoyPath,g.name)},next:function(){var f=c("jira/project-templates/select-project-template-controller");f.openAddProjectPage(this.projectTemplateData)}});return new d()});AJS.namespace("JPT.TemplateInfoControllerImpl",null,require("jira/project-templates/template-info-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/SelectProjectTemplateView.js' */
define("jira/project-templates/select-project-template-view",["jira/project-templates/dialog-controller","jira/project-templates/config","jira/featureflags/feature-manager","require","backbone","jquery","underscore"],function(d,b,i,c,g,e,h){var a=AJS.contextPath();var f=AJS.preventDefault;return{ROW_LENGTH:2,DIALOG_BODY_CLASS:"select-project-templates-page",DIALOG_WIDTH:800,draw:function(n,m){var j=c("jira/project-templates/select-project-template-controller");this.page=d.addPage({name:this.DIALOG_BODY_CLASS,title:n.demoProjects?"Create project with sample data":"Create project",panelName:"ProjectTemplatesListPanel",backButton:false,submitButtonText:"Next",submitButtonCallback:j.dialogSubmitted,submitButtonClass:"create-project-dialog-create-button"});function p(){if(j.isProjectTypesEnabled(n)){return JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType({projectTemplatesByType:n.projectTemplatesGroupedByType})}return JIRA.Templates.ProjectTemplates.renderProjectTemplates({projectTemplates:n.projectTemplates})}d.dialog.getPanel(this.page.id,0).html(p());if(b.model.projectCount>=2&&!n.demoProjects){e(JIRA.Templates.ProjectTemplates.addWorkflowsLink({baseUrl:a})).appendTo(d.$dialogElement.find(".dialog-title"))}var o=d.$dialogElement.find(".create-project-dialog-create-button");var l=this;this.getTemplateItems().click(function(){var q=e(this);q.addClass("selected");l.getTemplateItems().not(this).removeClass("selected")}).dblclick(function(){o.click()}).focus(function(){e(this).click()});var k=this.get$TemplatesContainer();if(!n.demoProjects){e(JIRA.Templates.ProjectTemplates.footerLinks({showDemoLink:i.isFeatureEnabled("jira.onboarding.cyoa")})).prependTo(d.$dialogElement.find(".dialog-button-panel"))}this.bindKeyboardEvents(k);if(j.isProjectTypesEnabled(n)){if((n.projectTemplatesGroupedByType).length==0){o.attr("disabled","disabled")}}else{if((n.projectTemplates).length==0){o.attr("disabled","disabled")}}this.focusOnFirstTemplate(k,m);d.dialog.updateHeight();this.truncateTemplateDescriptions()},get$TemplatesContainer:function(){return d.$dialogElement.find(".templates")},focusOnFirstTemplate:function(j,k){if(k){this.getFirstTemplateItemOfProjectType(k).click()}else{this.getFirstTemplateItem().click()}setTimeout(function(){j.focus()},0)},getSelectedTemplateData:function(){var j=d.$dialogElement.find(".template.selected");return j.data()},getMoveDeltaForKey:function(j){switch(j){case 37:return -1;case 39:return +1;case 38:return -this.ROW_LENGTH;case 40:return +this.ROW_LENGTH}return 0},bindKeyboardEvents:function(j){j.bind("keydown",h.bind(function(k){var l=this.getMoveDeltaForKey(k.which);if(l){this.moveSelection(j,l);return f(k)}},this))},moveSelection:function(l,o){var k=l.find(".template");var n=k.filter(".selected");var m=k.index(n)+o;if(m<k.length&&m>=0){var j=k.eq(m);j.click().focus();this.scrollToSelectedElement(j)}},scrollToSelectedElement:function(l){var o=e(".dialog-panel-body.pt-content");var j=o.offset().top;var k=l.offset().top;var n=k+l.height();var m=j+o.height();if(k<j){o.scrollTop(o.scrollTop()-(j-k))}else{if(n>(j+o.height())){o.scrollTop(o.scrollTop()+n-m)}}},get$NextButton:function(){return d.$dialogElement.find(".create-project-dialog-create-button")},disableNextButton:function(){this.get$NextButton().attr("disabled","disabled")},truncateTemplateDescriptions:function(){var j=AJS.Meta.get("user-locale");var k="word";if(j==="ja_JP"){k="letter"}d.$dialogElement.find(".template-description").each(function(){e(this).dotdotdot({wrap:k,lastCharacter:{remove:[" ",",",";",".","!","?","。"],noEllipsis:[]}})})},getFirstTemplateItem:function(){return this.getTemplateItems().first()},getFirstTemplateItemOfProjectType:function(j){return this.getTemplateItems().filter("#project-template-group-"+j+" *").first()},getTemplateItems:function(){return d.$dialogElement.find(".template")}}});AJS.namespace("JPT.SelectProjectTemplateView",null,require("jira/project-templates/select-project-template-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/SelectProjectTemplateController.js' */
define("jira/project-templates/select-project-template-controller",["jira/project-templates/select-project-template-view","jira/project-templates/template-info-controller","jira/project-templates/add-project-controller","jira/project-templates/dialog-controller","jira/project-templates/dialog-view","jira/project-templates/config","wrm/context-path","jquery","underscore"],function(f,h,k,l,o,g,n,m,p){var e=n();var d={init:function q(s,r){f.draw(s,r)},isProjectTypesEnabled:function c(r){return r.projectTemplatesGroupedByType!=null},loadProjectTemplatesData:function j(){return m.ajax({url:e+"/rest/project-templates/1.0/templates",type:"GET"})},loadDemoProjectTemplatesData:function j(){return m.ajax({url:e+"/rest/project-templates/1.0/templates/demo-projects",type:"GET"}).done(function(r){r.demoProjects=true;return r})},dialogSubmitted:function b(){var r=f.getSelectedTemplateData();l.hideDialogFromNewUser("templateselected");d.raiseAtlassianEvent(r.itemModuleCompleteKey);if(!p.isUndefined(r.infoSoyPath)){h.initTemplateInfo(r)}else{d.openAddProjectPage(r)}},openAddProjectPage:function i(r){if(!r){o.showErrorMessage("An error occurred while trying to contact Jira");return}if(r.createProject){k.initProjectTemplate(r)}else{l.dialog.addPage("blank-template-page");m("body").trigger(r.itemModuleCompleteKey,l.dialog)}},raiseAtlassianEvent:function a(r){g.model.selectedTemplate=r;if(AJS.EventQueue){AJS.EventQueue.push({name:"projecttemplates.templateselected",properties:{selectedTemplate:r}})}}};return d});AJS.namespace("JPT.SelectProjectTemplateController",null,require("jira/project-templates/select-project-template-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/CreateSharedView.js' */
define("jira/project-templates/create-shared-view",["jira/project-templates/dialog-controller","jira/project-templates/dialog-view","jira/ajs/select/scrollable-single-select","jira/ajs/select/suggestion-collection-model","require","backbone","jquery"],function(d,h,g,i,c,j,e){var f=AJS.InlineDialog;var b=AJS.trigger;var a=j.View.extend({events:{"submit #create-shared-project-form":"onSubmitForm"},page:undefined,prepareDialog:function(l){var k=c("jira/project-templates/create-shared-controller");this.page=d.addPage({name:"create-shared-project",title:l,panelName:"create-shared-project",backButton:true,submitButtonText:"Next",submitButtonCallback:k.dialogSubmitted,submitButtonClass:"create-shared-dialog-button"})},draw:function(l){d.dialog.gotoPage(this.page.id);var k=JIRA.Templates.ProjectTemplates.createSharedProjectForm({projectSuggestions:JSON.stringify(l.projectSuggestions)});d.dialog.getPanel(this.page.id,0).html(k);this._createProjectPicker();var m=d.$dialogElement.find("#shared-help-icon");if(m.length){new f(m,"shared-project-help-popup",function(p,o,n){p.html(JIRA.Templates.ProjectTemplates.sharedHelp());n()},{width:330,offsetX:-30})}d.$dialogElement.find(".dialog-button-panel button").removeAttr("disabled")},showProjectMissingError:function(){this._clearFormErrors();this._getProjectPickerInput().after(aui.form.fieldError({extraClasses:"project-picker-missing-error",message:"Please select an existing project first."}))},drawEmptyInfo:function(){var k=JIRA.Templates.ProjectTemplates.noProjects();d.dialog.getPanel(this.page.id,0).html(k);d.$dialogElement.find(".dialog-button-panel button").hide()},drawError:function(k){d.dialog.getPanel(this.page.id,0).html(JIRA.Templates.errorMsg({closable:false,msg:k}))},drawLoading:function(){d.dialog.gotoPage(this.page.id);var k=JIRA.Templates.ProjectTemplates.loading();d.dialog.getPanel(this.page.id,0).html(k);d.$dialogElement.find(".dialog-spinner").spin();d.$dialogElement.find(".dialog-button-panel button").attr("disabled","disabled")},_clearFormErrors:function(){d.$dialogElement.find(".project-picker-missing-error").remove()},_getProjectPickerInput:function(){return d.$dialogElement.find("#project-picker")},onSubmitForm:function(l){this._clearFormErrors();var k=c("jira/project-templates/create-shared-controller");k.dialogSubmitted();return false},_getExtraInfoMessage:function(){return d.$dialogElement.find(".create-shared-info")},_createProjectPicker:function(){this._getExtraInfoMessage().hide();this.projectSelect=new g({element:this._getProjectPickerInput(),revertOnInvalid:true,pageSize:50,pagingThreshold:100,model:i});this.projectSelect.$field.focus();var k=this;this._getProjectPickerInput().on("selected",function(m,l){if(l.value()){b("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.selected"});k._getExtraInfoMessage().show()}})},getSelectedProject:function(){return this.projectSelect.getSelectedDescriptor()&&this.projectSelect.getSelectedDescriptor().value()}});return new a({el:e(document),dialogView:h})});AJS.namespace("JPT.CreateSharedView",null,require("jira/project-templates/create-shared-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/CreateSharedController.js' */
define("jira/project-templates/create-shared-controller-impl",["jira/project-templates/add-project-controller","jira/project-templates/create-shared-view","jira/lib/class","jquery","underscore"],function(e,f,a,d,c){var b=AJS.contextPath();return a.extend({init:function(g){this._window=g.window||window;c.bindAll(this,"dialogSubmitted")},initCreateShared:function(){f.prepareDialog("Create with shared configuration");var g=this;this._getProjectSuggestions().done(function(h){if(g._hasSuggestions(h)){f.draw({projectSuggestions:h})}else{f.drawEmptyInfo()}}).fail(function(){f.drawError("An error occurred while trying to contact Jira")});f.drawLoading()},_hasSuggestions:function(h){var g=false;d.each(h,function(j,k){if(k&&k.items&&k.items.length>0){g=true}});return g},_getProjectSuggestions:function(){return d.ajax({url:b+"/rest/project-templates/1.0/createshared"})},dialogSubmitted:function(){var g=f.getSelectedProject();if(g){e.initCreateShared({existingProjectId:g})}else{f.showProjectMissingError()}}})});define("jira/project-templates/create-shared-controller",["jira/project-templates/create-shared-controller-impl","jquery"],function(a,b){return new a({el:b(document)})});AJS.namespace("JPT.CreateSharedController",null,require("jira/project-templates/create-shared-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/RemoteProjectsCreatedMessage.js' */
var $=require("jquery");$(function(){var i=AJS.format;var e=require("jira/project-templates/add-project-controller");var b=localStorage.getItem(e.localStoragePrefix+"confluenceProject");var j=localStorage.getItem(e.localStoragePrefix+"fisheyeProject");var g=localStorage.getItem(e.localStoragePrefix+"crucibleProject");var d=localStorage.getItem(e.localStoragePrefix+"bambooProject");localStorage.removeItem(e.localStoragePrefix+"confluenceProject");localStorage.removeItem(e.localStoragePrefix+"fisheyeProject");localStorage.removeItem(e.localStoragePrefix+"crucibleProject");localStorage.removeItem(e.localStoragePrefix+"bambooProject");var k;function c(m,l){return JIRA.Templates.ProjectTemplates.formatAnchor({href:m,body:l,title:l})}function a(n,o,m,p){var l=[];l.push("a Jira project");if(n){l.push(c(n,"a Confluence space"))}if(o){l.push(c(o,"a FishEye repository"))}if(m){l.push(c(m,"a Crucible project"))}if(p){l.push(c(p,"a Bamboo project"))}return l}function h(m,o,l,r){var q="The following entities were created: {0} and {1}.";var n=a(m,o,l,r);var p=n.pop();return(n.length>0)?i(q,n.join(", "),p):null}function f(l){var m=$(l).offset();if(m){window.scrollTo(m.left,m.top)}}if(b||j||g||d){k=h(b,j,g,d);if(k){JIRA.Messages.showSuccessMsg(k,{closeable:true})}f("#project-config-webpanel-summary-settings")}});;
;
/* module-key = 'com.atlassian.jira-core-project-templates:jira-core-project-templates-resources', location = '/soy/CoreProjectTemplates.soy' */
// This file was automatically generated from CoreProjectTemplates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.CoreTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }
if (typeof JIRA.Templates.ProjectTemplates.CoreTemplates == 'undefined') { JIRA.Templates.ProjectTemplates.CoreTemplates = {}; }


JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: 'Create simple tasks, organize them and get them done. You can use this project to manage your tasks or assign them to someone else.', projectTemplate: 'taskManagement'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: 'Create your tasks, organize and track their progress, and deliver your work on time. Estimations and time tracking allow you to report on where your project is at any stage.', projectTemplate: 'projectManagement'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: 'Create your tasks and track them at every step, from start to finish. You can use this project to review documentation, approve expenses, or other processes.', projectTemplate: 'processManagement'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.boardBetaInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: 'Visualize work across your team with a board.', projectTemplate: 'projectManagement', issueTypesHtml: '' + JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType(null)});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.boardBetaInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.boardBetaInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog = function(opt_data, opt_ignored) {
  return '<div><div class="top-panel"><p>' + soy.$$escapeHtml(opt_data.description) + '</p></div><div class="left-panel"><h6>' + soy.$$escapeHtml('Issue Types') + '</h6><ul class="project-template-issuetype-list">' + ((opt_data.issueTypesHtml != null) ? soy.$$filterNoAutoescape(opt_data.issueTypesHtml) : JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType(null) + JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType(null)) + '</ul></div><div class="right-panel"><h6>' + soy.$$escapeHtml('Workflow') + '</h6><div class="workflow ' + soy.$$escapeHtml(opt_data.projectTemplate) + '"></div></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.issueType = function(opt_data, opt_ignored) {
  return '<li><span class="issuetype-list-label"><span class="issuetype-icon ' + soy.$$escapeHtml(opt_data.iconKey) + '"></span><span class="issuetype-name">' + soy.$$escapeHtml(opt_data.label) + '</span></span></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.issueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.issueType';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey: 'task', label: 'Task'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey: 'subtask', label: 'Sub-task'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-table-resource', location = 'js/common/raven-table-overlap-util.js' */
(function(a){RAVEN.namespace("RAVEN.Tables");RAVEN.Tables.TableFix={OVERFLOW_WITH_WRAPPER:{fix:function(b,c){a(b).wrap('<div id="'+c+'"></div>');const d=a("#"+c);d.css("overflow","auto");d.css("min-width","100%")}},OVERFLOW_PARENT:{fix:function(b){const c=a(b);c.parent().css("overflow","auto");c.parent().css("min-width","100%")}},OVERFLOW_ELEMENT:{fix:function(b){const c=a(b);c.css("overflow","auto");c.css("min-width","100%")}},ADD_INLINE_BLOCK:{fix:function(b){a(b).css("display","inline-block")}}}})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:list-expander-custom-field-resources', location = '/js/customfield/list-expander/list-expander-custom-field.js' */
(function(b){function a(){b(document).off(".tooltip.raven");b(".tipsy:has(.list-expander-custom-field-tooltip-close)").remove();b(document).on("click.tooltip.raven",".list-expander-custom-field-column-value a.content-expand",function(d){d.preventDefault();var c=b(d.target).tooltip({trigger:"manual",html:true,title:function(){var e=b(d.target).closest(".list-expander-custom-field-column-value").find(".list-expander-custom-field-more");if(e.length>0){return e.clone().css("display","block")[0].innerHTML}else{return null}}});if(!c.hasClass("expanded")){var f=b(".list-expander-custom-field-column-value .content-expand.expanded");f.removeClass("expanded");f.text("("+"show more"+"...)");f.tooltip("hide");c.tooltip("show");c.addClass("expanded");c.text("("+"show less"+"...)")}else{c.removeClass("expanded");c.tooltip("hide");c.text("("+"show more"+"...)")}});b(document).on("click.tooltip.raven","a.list-expander-custom-field-tooltip-close",function(c){var d=b(".list-expander-custom-field-column-value .content-expand.expanded");d.removeClass("expanded");d.text("("+"show more"+"...)");d.tooltip("hide");b(".tipsy:has(.list-expander-custom-field-tooltip-close)").remove();return false})}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(f,c,d){if(d==JIRA.CONTENT_ADDED_REASON.pageLoad||d==JIRA.CONTENT_ADDED_REASON.panelRefreshed){a()}})})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-attachment-resources', location = '/templates/attachment/attachments.soy' */
// This file was automatically generated from attachments.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Attachments.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Attachments == 'undefined') { RAVEN.Attachments = {}; }


RAVEN.Attachments.createStepAttachments = function(opt_data, opt_ignored) {
  var output = '<div class="attachment-tablecell">' + (((! opt_data.readOnly || opt_data.readOnly == false) && ! (opt_data.hideAdd == true || opt_data.hideAdd == 'true')) ? '<a data-id="' + soy.$$escapeHtml(opt_data.stepId) + '" title="' + soy.$$escapeHtml('Add Attachments') + '" class="icon icon-add16 add-step-attachments" style="display:block;float:right" href="' + soy.$$escapeHtml(opt_data.contextPath) + '/secure/XrayAttachFileAction!default.jspa?key=' + soy.$$escapeHtml(opt_data.issueKey) + '&entityId=' + soy.$$escapeHtml(opt_data.stepId) + '&entityType=' + soy.$$escapeHtml(opt_data.entityType) + '" id="add-step-attachments-link-' + soy.$$escapeHtml(opt_data.stepId) + '"></a>' : '') + '<div style="clear:both"></div>';
  if (opt_data.attachments.length > 0) {
    output += '<ol class="item-attachments step-attachments" id="step-attachments-' + soy.$$escapeHtml(opt_data.stepId) + '">';
    var attachmentList27 = opt_data.attachments;
    var attachmentListLen27 = attachmentList27.length;
    for (var attachmentIndex27 = 0; attachmentIndex27 < attachmentListLen27; attachmentIndex27++) {
      var attachmentData27 = attachmentList27[attachmentIndex27];
      output += '<li class="attachment-content" id="attachment-content-' + soy.$$escapeHtml(attachmentData27.id) + '" value="' + soy.$$escapeHtml(attachmentData27.id) + '" data-name="' + soy.$$escapeHtml(attachmentData27.fileName) + '"><div class="attachment-thumb"><a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/plugins/servlet/raven/attachment/' + soy.$$escapeHtml(attachmentData27.id) + '/' + soy.$$escapeUri(attachmentData27.fileName) + '" target="_blank"><img width="16" height="16" border="0" alt="' + soy.$$escapeHtml(attachmentData27.fileIconAlt) + '" src="' + soy.$$escapeHtml(opt_data.contextPath) + '/images/icons/attach/' + soy.$$escapeHtml(attachmentData27.fileIcon) + '"></a></div><a class="attachment-name" title="' + soy.$$escapeHtml(attachmentData27.fileName) + ' - ' + soy.$$escapeHtml(attachmentData27.fileSize) + ' - ' + soy.$$escapeHtml(attachmentData27.created) + ' - ' + soy.$$escapeHtml(attachmentData27.author) + '" href="' + soy.$$escapeHtml(opt_data.contextPath) + '/plugins/servlet/raven/attachment/' + soy.$$escapeHtml(attachmentData27.id) + '/' + soy.$$escapeUri(attachmentData27.fileName) + '" target="_blank">' + soy.$$escapeHtml(attachmentData27.fileName) + '</a>' + ((! opt_data.readOnly || opt_data.readOnly == false) ? '<div class="icon icon-delete attachment-remove-command" title="' + soy.$$escapeHtml('Delete this attachment') + '"></div>' : '') + '</li>';
    }
    output += '</ol>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Attachments.createStepAttachments.soyTemplateName = 'RAVEN.Attachments.createStepAttachments';
}


RAVEN.Attachments.createStepAttachmentsForWikiToolBarAttach = function(opt_data, opt_ignored) {
  var output = '<div class="attachment-tablecell hidden"><div style="clear:both"></div>';
  if (opt_data.attachments.length > 0) {
    output += '<ol id="attachment_thumbnails" class="attachment_thumbnails item-attachments">';
    var attachmentList79 = opt_data.attachments;
    var attachmentListLen79 = attachmentList79.length;
    for (var attachmentIndex79 = 0; attachmentIndex79 < attachmentListLen79; attachmentIndex79++) {
      var attachmentData79 = attachmentList79[attachmentIndex79];
      output += '<li class="attachment-content js-file-attachment" id="attachment-content-' + soy.$$escapeHtml(attachmentData79.id) + '" value="' + soy.$$escapeHtml(attachmentData79.id) + '" data-name="' + soy.$$escapeHtml(attachmentData79.fileName) + '"><div class="attachment-thumb"><a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/plugins/servlet/raven/attachment/' + soy.$$escapeHtml(attachmentData79.id) + '/' + soy.$$escapeUri(attachmentData79.fileName) + '" target="_blank"><img width="16" height="16" border="0" alt="' + soy.$$escapeHtml(attachmentData79.fileIconAlt) + '" src="' + soy.$$escapeHtml(opt_data.contextPath) + '/images/icons/attach/' + soy.$$escapeHtml(attachmentData79.fileIcon) + '"></a></div><a class="attachment-name attachment-title" title="' + soy.$$escapeHtml(attachmentData79.fileName) + ' - ' + soy.$$escapeHtml(attachmentData79.fileSize) + ' - ' + soy.$$escapeHtml(attachmentData79.created) + ' - ' + soy.$$escapeHtml(attachmentData79.author) + '" href="' + soy.$$escapeHtml(opt_data.contextPath) + '/plugins/servlet/raven/attachment/' + soy.$$escapeHtml(attachmentData79.id) + '/' + soy.$$escapeUri(attachmentData79.fileName) + '" target="_blank">' + soy.$$escapeHtml(attachmentData79.fileName) + '</a></li>';
    }
    output += '</ol>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Attachments.createStepAttachmentsForWikiToolBarAttach.soyTemplateName = 'RAVEN.Attachments.createStepAttachmentsForWikiToolBarAttach';
}


RAVEN.Attachments.createTestStepResultsAttachmentsForWikiToolBarAttach = function(opt_data, opt_ignored) {
  var output = '<div class="attachment-tablecell hidden"><div style="clear:both"></div>';
  if (opt_data.attachments.length > 0) {
    output += '<ol class="attachment_thumbnails item-attachments teststepresult-attachement-list-' + soy.$$escapeHtml(opt_data.stepResultId) + '">';
    var attachmentList127 = opt_data.attachments;
    var attachmentListLen127 = attachmentList127.length;
    for (var attachmentIndex127 = 0; attachmentIndex127 < attachmentListLen127; attachmentIndex127++) {
      var attachmentData127 = attachmentList127[attachmentIndex127];
      output += '<li class="attachment-content js-file-attachment" id="attachment-content-' + soy.$$escapeHtml(attachmentData127.id) + '" value="' + soy.$$escapeHtml(attachmentData127.id) + '" data-name="' + soy.$$escapeHtml(attachmentData127.fileName) + '"><div class="attachment-thumb"><a href="' + soy.$$escapeHtml(opt_data.contextPath) + '/plugins/servlet/raven/attachment/' + soy.$$escapeHtml(attachmentData127.id) + '/' + soy.$$escapeUri(attachmentData127.fileName) + '" rel="noopener noreferrer" target="_blank"><img width="16" height="16" border="0" alt="' + soy.$$escapeHtml(attachmentData127.fileIconAlt) + '" src="' + soy.$$escapeHtml(opt_data.contextPath) + '/images/icons/attach/' + soy.$$escapeHtml(attachmentData127.fileIcon) + '"></a></div><a class="attachment-name attachment-title" title="' + soy.$$escapeHtml(attachmentData127.fileName) + ' - ' + soy.$$escapeHtml(attachmentData127.fileSize) + ' - ' + soy.$$escapeHtml(attachmentData127.created) + ' - ' + soy.$$escapeHtml(attachmentData127.author) + '" href="' + soy.$$escapeHtml(opt_data.contextPath) + '/plugins/servlet/raven/attachment/' + soy.$$escapeHtml(attachmentData127.id) + '/' + soy.$$escapeUri(attachmentData127.fileName) + '" target="_blank">' + soy.$$escapeHtml(attachmentData127.fileName) + '</a></li>';
    }
    output += '</ol>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  RAVEN.Attachments.createTestStepResultsAttachmentsForWikiToolBarAttach.soyTemplateName = 'RAVEN.Attachments.createTestStepResultsAttachmentsForWikiToolBarAttach';
}


RAVEN.Attachments.deleteAttachmentConfirmationDialog = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + soy.$$escapeHtml('Delete Attachment') + ': ' + soy.$$escapeHtml(opt_data.attachmentName) + '</h2><form class="aui" action="#" method="post"><div class="form-body"><div class="aui-message info"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml('Are you sure you want to remove this attachment?') + '</div></div><div class="form-footer buttons-container"><div class="buttons"><input class="button" type="submit" id="attachment-delete-form-submit" value="' + soy.$$escapeHtml('Delete') + '" /><a href="#" class="cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
};
if (goog.DEBUG) {
  RAVEN.Attachments.deleteAttachmentConfirmationDialog.soyTemplateName = 'RAVEN.Attachments.deleteAttachmentConfirmationDialog';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:test-edit-resources', location = '/js/customfield/test/test-custom-fields.js' */
(function(g){var f="create-issue-dialog";var a="edit-issue-dialog";const z="#raven-manual-test-steps";var j=null;var c=function(I){return l().find(I)};function w(){return g("#create-issue-dialog.jira-dialog-open, #create-issue-dialog.aui-dialog-open, #edit-issue-dialog.jira-dialog-open, #edit-issue-dialog.aui-dialog-open, #create-test-issue-dialog.jira-dialog-open, #create-test-issue-dialog.aui-dialog-open, #prefillable-create-issue-dialog.jira-dialog-open, #prefillable-create-issue-dialog.aui-dialog-open, .raven-issue-test-steps-form.jira-dialog-open, .raven-issue-test-steps-form.aui-dialog-open")}function l(){if(j){return g(j)}else{var I=w();if(I.length>0){return g(I)}else{return g("#page")}}}String.prototype.bool=function(){return(/^true$/i).test(this)};function B(){return c("#raven-test-field-type-issue-key").val()}function F(){return c("#raven-has-precondition").val()==="true"}function o(){return c("#raven-test-field-type-value").val()}function t(K){var I=c("#manual-options").val();if(I){var J=JSON.parse(I);return _.contains(J,parseInt(K,10))}return false}function b(K){var I=c("#cucumber-options").val();if(I){var J=JSON.parse(I);return _.contains(J,parseInt(K,10))}return false}function x(I){return b(I)==false&&t(I)==false}function y(){return g("#delete-test-definition").val()==="true"}function s(J,I){return(t(J)===true&&t(I)===true)||(b(J)===true&&b(I)===true)||(x(J)===true&&x(I)===true)}function G(J,I){return(t(J)===true&&t(I)===true)||(b(J)===true&&b(I)===true)||(J==I)}function m(){const I=g("#raven-manual-test-steps-value").val();if(!I||I===""){return false}const J=JSON.parse(I);return J.fieldValuesBeans&&J.fieldValuesBeans.length>0}function e(){var P=c("#raven-test-field-type").val();var Q=c("#"+P);var T=Q.val();var K=Q[0].previousValue;var M=g.trim(Q.children("option[value="+T+"]").text());var R=K;var L=true;if(t(R)===true){if(m()){L=false}}else{if(b(R)===true){var N=E();if(N&&N.getSession().getValue()!=""){L=false}}else{if(c("#test-path-create-field").val()!=""){L=false}}}var J=!L&&!s(K,T)&&y();if(J){var S=function(){Q.val(K)};var O=AJS.format("Change test type to {0}",M);var I="The current type info details will be deleted. Do you want to continue?";k(O,I,S)}else{d()}}function k(L,K,J){var I=new JIRA.FormDialog({id:"raven-change-test-type",content:function(N){var M=RAVEN.Dialog.confirmationDialog({title:L,message:K});N(M)},submitHandler:function(M){c("#raven-test-field-type").attr("changedTestType",false);I.hide();M.preventDefault();d()},autoClose:true});I.bind("Dialog.hide",function(O,M,N){if(N===JIRA.Dialog.HIDE_REASON.cancel||N===JIRA.Dialog.HIDE_REASON.escape){c("#raven-test-field-type").attr("changedTestType",false);J()}});I.show()}function H(I){var K={};g.each(I,function(N,O){var M=g(O).data("field-id");K[M]=null});var L={fields:K};var J=JSON.stringify(L);g.ajax({type:"PUT",url:contextPath+"/rest/api/2/issue/"+B(),processData:false,async:true,contentType:"application/json",data:J,error:function(N,O,M){c("#raven-error-message").remove();if(M&&M.trim()!=""){M=M+": "+N.responseText}else{M=N.responseText}AJS.messages.error({title:"Error delete test properties.",body:M,id:"raven-error-message"})}})}function p(){var I=c("#raven-manual-test-steps-value");if(I.length){I.val('{"testId":-1,"fieldValuesBeans":[]}');document.dispatchEvent(new CustomEvent("raven-manual-test-steps-cf-unmount"))}}function h(){if(j&&!g(j).hasClass("raven-issue-test-steps-form")){g(j).addClass("raven-issue-test-steps-form")}}function u(){document.dispatchEvent(new CustomEvent("raven-manual-test-steps-cf"))}function n(L){const I=g(L).find(z);var J=c("#raven-test-field-type").val();var K=c("#"+J);if(I.length>0&&t(K.val())){document.dispatchEvent(new CustomEvent("raven-manual-test-steps-cf-force-render"))}}function A(){if(c(".tabs-menu > li")==null){return}c(".tabs-menu > li").on("click",function(){const I=g(this).find("a");if(I.length>0){n(I[0].getAttribute("href"))}})}function i(){var I=E();if(I){I.getSession().setValue("");I.setValue("");c("#test-steps-hidden-value").val("");c("#test-steps-hidden-new-value").val("");c("#test-steps-ace-editor").css("display","none");c("#test-steps-empty").removeAttr("style")}}function v(){c("#test-path-create-field").val("")}function q(){var L=c("#raven-test-field-type").val();var O=c("#"+L);var N=c("#test-steps-create-ace-editor");var K=c("#test-path-create-field");var P=c("#automated-test-type");O.off("change.raven-edit-test");O.on("change.raven-edit-test",function(){c("#raven-test-field-type").attr("changedTestType",true);e()});var M=O.val();var J=g.trim(O.children("option[value="+M+"]").text());WRM.require("com.xpandit.plugins.xray:entrypoint-testSteps");WRM.require("com.xpandit.plugins.xray:entrypoint-parameterizedTestDataset");h();if(t(M)===true){N.parent().hide();K.parent().hide();P.parent().hide();c(z).parent().show();u();var I=c(".raven-editable-field");c(".ace_cursor").css("left","4px")}else{if(b(M)===true){N.parent().show();N.parent().show();K.parent().hide();c(z).parent().hide();P.parent().show()}else{N.parent().hide();P.parent().hide();c(z).parent().hide();K.parent().show()}}c("#test-precondition-match-type").val(J);O[0].previousValue=O.val()}function d(){var O=c("#raven-test-field-type").val();var P=c("#"+O);var R=c("#test-steps-create-ace-editor");var I=c("#test-path-create-field");var M=c("#automated-test-type");var Q=P.val();var K=g.trim(P.children("option[value="+Q+"]").text());if(t(Q)===true){R.parent().hide();c(z).parent().show();u();I.parent().hide();M.parent().hide();var J=c(".raven-editable-field");c(".ace_cursor").css("left","4px");if(y()){i();v()}}else{if(b(Q)===true){R.parent().show();if(y()){v()}R.parent().show();var L=E();L.getSession().setValue(c("#test-steps-create-ace-editor-hidden").val());I.parent().hide();M.parent().show();c(z).parent().hide();if(y()){p()}}else{I.parent().show();R.parent().hide();if(y()){i()}M.parent().hide();c(z).parent().hide();if(y()){p()}}}c("#test-precondition-match-type").val(K);P[0].previousValue=P.val();var N=G(o(),P.val());if(F()&&N===true){c("#raven-edit-test-type-precondition-mismatch-message").hide()}else{c("#raven-edit-test-type-precondition-mismatch-message").show()}}function E(){return c("#test-steps-create-ace-editor").data("ace-editor")}function C(){c("#raven-edit-test-type-message").empty();var M=c("#raven-test-field-type").val();if(M){var I=c("#"+M)[0];if(I==undefined){return}I.previousValue=I.value;q();A()}if(window.createTestForTestSet){var L=c("select#"+createTestForTestSet.testSetsCustomFieldId);L.trigger("selectOption",{value:createTestForTestSet.testSetKey})}var K=c("#test-steps-create-ace-editor");if(K.length>0){const O=c("#test-steps-create-ace-editor-hidden");const J=O.data("project-key");this.editor=new RAVEN.Gherkin.EditorView({el:K[0],autoCompleteType:RAVEN.Gherkin.AutoCompleteType.SENTENCE,autoCompleteUrl:D(contextPath,J),autoCompleteResponse:function(P,Q){return P.map(function(W){const U=W.step.indexOf(Q);const T=W.step.split("").splice(0,U,"").join("");const V=W.step.replace(T,"");var S=V.replace(Q,"");var R=W.step.match(S.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"));if(R){return{name:W.step,value:W.step,score:R.index}}})},stepsLibraryEnabled:true});this.editor.editor.getSession().on("change",function(){var P=E();if(P){c("#test-steps-create-ace-editor-hidden").val(P.getSession().getValue())}});K.data("ace-editor",this.editor.editor);const N=O.val();if(N!=null){this.editor.editor.getSession().setValue(N)}}}function D(K,I){const J=this;return function(L){return I?K+"/rest/raven/1.0/steplibrary/"+I+"/autocomplete?query="+L:""}}function r(){var I=c("#raven-test-field-type").val();c("#"+I).attr("disabled","disabled");c("#manual-test-steps-table .edit-command").css("display","none");c("#manual-test-steps-table .remove-command").css("display","none");c('input[id="add-step"]').css("display","none");c('textarea[id="step-textarea"]').css("display","none");c('textarea[id="data-textarea"]').css("display","none");c('textarea[id="result-textarea"]').css("display","none")}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(K,I,J){if(I){j=I.parent();C();j=null}else{C()}});g(document).ready(function(){C()});(function(){if(typeof window.CustomEvent==="function"){return false}function I(K,L){L=L||{bubbles:false,cancelable:false,detail:null};var J=document.createEvent("CustomEvent");J.initCustomEvent(K,L.bubbles,L.cancelable,L.detail);return J}window.CustomEvent=I})()})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:precondition-edit-resources', location = '/js/customfield/precondition/precondition-custom-fields.js' */
(function(e){var g=null;var b=function(t){return h().find(t)};function h(){if(g){return e(g)}else{var t=e("#create-issue-dialog:visible, #edit-issue-dialog:visible, #create-test-issue-dialog:visible,                               #create-issue-dialog.jira-dialog-open, #create-issue-dialog.aui-dialog-open");if(t.length>0){return e(t)}else{return e("#page")}}}String.prototype.bool=function(){return(/^true$/i).test(this)};function i(){return b("#raven-precondition-field-type-issue-key").val()}function p(){return b("#raven-has-tests").val()==="true"}function n(){return b("#raven-precondition-field-type-value").val()}function l(v){var t=b("#manual-options").val();if(t){var u=JSON.parse(t);return _.contains(u,parseInt(v,10))}return false}function a(v){var t=b("#cucumber-options").val();if(t){var u=JSON.parse(t);return _.contains(u,parseInt(v,10))}return false}function o(t){return a(t)==false&&l(t)==false}function s(u,t){return(l(u)===true&&l(t)===true)||(a(u)===true&&a(t)===true)||(u==t)}function m(t){if(t==="Cucumber"){r().setValue("")}else{e("#precondition-manual-id").attr("value","")}b(".error").html("")}function c(){var B=b("#raven-precondition-field-type").val();var D=b("#"+B);var z=b("#precondition-condition-create-ace-editor-hidden");var u=b("#precondition-manual-id");var w=D[0].previousValue;var x=d(D[0].value);b("#precondition-type-create-ace-editor-hidden").val(x);b("#precondition-type-manual-editor-hidden").val(x);var t=b("#precondition-manual-id").val();if(t!=null&&(l(w)===true||o(w))){k(t)}else{var E=r();if(E){k(E.getSession().getValue())}}var C=D.val();var y=e.trim(D.children("option[value="+C+"]").text());if(l(C)===true||o(C)){z.parent().hide();u.parent().show();var v=b("#precondition-condition-create-ace-editor-hidden").attr("name");b("#precondition-condition-create-ace-editor-hidden").attr("name",v+"_zombie");b("#precondition-condition-create-ace-editor-hidden").val("");b(".ace_cursor").css("left","4px");setTimeout(function(){u.focus()},0);b("#precondition-manual-wiki-edit").next().text("Enter the Pre-Conditions to be executed before the Test.")}else{u.parent().hide();z.attr("name",u.attr("name"));b("#precondition-manual-wiki-edit").next().text("Enter the Cucumber Background Gherkin clauses to be executed before the associated Scenarios.");z.parent().show()}b("#precondition-test-match-type").val(y);D[0].previousValue=D.val();var A=s(n(),D.val());if(p()&&A===true){b("#raven-edit-precondition-type-test-mismatch-message").hide()}else{b("#raven-edit-precondition-type-test-mismatch-message").show()}}function k(t){b("#precondition-condition-hidden-value").val(t);b("#precondition-condition-hidden-new-value").val(t);b("#precondition-manual-id").val(t);var u=r();if(u){u.getSession().setValue(t)}}function r(){return b("#precondition-condition-create-ace-editor").data("ace-editor")}function d(t){if(l(t)){return"Manual"}else{if(a(t)){return"Cucumber"}}return"Other"}function f(w,v,u,x){var t=new JIRA.FormDialog({id:"raven-change-pre-condition-type",content:function(z){var y=RAVEN.Dialog.confirmationDialog({title:w,message:v});z(y)},submitHandler:function(y){t.hide();y.preventDefault();m(x);c()},autoClose:true});t.bind("Dialog.hide",function(A,y,z){if(z===JIRA.Dialog.HIDE_REASON.cancel||z===JIRA.Dialog.HIDE_REASON.escape){u()}});t.show()}function j(u){if(u==="Cucumber"){var t=r();if(t){return r().getValue()===""||r().getValue()==null}return true}else{return e("#precondition-manual-id").attr("value")===""||e("#precondition-manual-id").attr("value")==null}}function q(){var w=b("#raven-precondition-field-type").val();var t;if(w){t=b("#"+w)[0];if(!t){return}t.previousValue=t.value;c();var v=b("#"+b("#raven-precondition-field-type").val());v.off("change.raven-edit-precondition");v.on("change.raven-edit-precondition",function(){var B=b("#"+w);var x=B[0].previousValue;var E=d(x);var z=B[0].value;var y=d(z);if(j(E)){c()}else{var D=AJS.format("The current type info details will be deleted. Do you want to continue?",y);var C="The current type info details will be deleted. Do you want to continue?";var A=function(){B.val(x)};f(D,C,A,E)}})}var u=b("#precondition-condition-create-ace-editor");if(u.length>0){require(["ace/ace"],function(y){var x=y.edit(u[0]);var z=require("ace/theme/textmate");x.setTheme(z);x.setFontSize(14);x.getSession().setMode("ace/mode/gherkin");x.getSession().setUseWrapMode(false);x.renderer.setShowGutter(true);x.renderer.setShowPrintMargin(false);x.setOptions({highlightActiveLine:false});x.getSession().setValue(b("#precondition-condition-create-ace-editor-hidden").val());x.getSession().on("change",function(){b("#precondition-condition-create-ace-editor-hidden").val(x.getSession().getValue())});u.data("ace-editor",x)})}}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(v,t,u){if(t){g=t.parent();q();g=null}else{q()}});e(document).ready(function(){q()})})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:dataset-parameters-resources', location = 'js/util/dataset/dataset-parameter-initialize.js' */
define("raven-dataset-parameter",(function(g){RAVEN.namespace("RAVEN.dataset.parameter");RAVEN.dataset.parameter.entityTypes={TEST:"TEST",TEST_TP:"TEST_TP",TEST_RUN:"TEST_RUN",CALLED_STEP:"CALLED_STEP",isSingleScope:function(i){return i===this.TEST_TP||i===this.TEST_RUN||i===this.CALLED_STEP},};const f={TEST_TP:{entityType:"TEST_TP",getSubEntityId:function(){return null}},TEST:{projectId:"#raven-test-project-id",buttonId:"#raven-test-configuration",entityType:"TEST",canEditTestId:"#can-edit-test",dialogTitleKey:function(){return AJS.format("Dataset for Test {0}",JIRA.Issue.getIssueKey())},hasDatasetId:"#raven-dataset-parameter-has-dataset",entityId:h,getSubEntityId:b,},TEST_RUN:{projectId:"#project-id",buttonId:"#raven-test-run-configuration",entityType:"TEST_RUN",canEditTestId:"#can-edit-test-run",dialogTitleKey:e,hasDatasetId:"#raven-dataset-parameter-has-dataset",entityId:a,refreshPageOnSave:true,getSubEntityId:function(){return null}}};function h(){return JIRA.Issue.getIssueId()}function b(){return RAVEN.Test.currentVersionId}function a(){return g("#test-run-id").val()}function e(){const i=g("#test-exec-key").val();const j=g("#test-key").val();return AJS.format("Dataset for Test \"{0}\" in Test Exec \"{1}\"",j,i)}RAVEN.dataset.parameter.initTestConfigurationDialog=function(k,l,j,n,p,i,o){const m=new CustomEvent("init-raven-test-dataset-dialog",{detail:{entityId:k,subEntityId:o,editable:l,projectId:j,entityType:n,title:p,refreshPageOnSave:i,isTestCallStep:RAVEN.dataset.parameter.entityTypes.CALLED_STEP===n,isTempDataset:false,},});document.dispatchEvent(m)};RAVEN.dataset.parameter.initStepCallToTestConfigurationDialog=function(l,m,k,o,j,i){const n=new CustomEvent("init-raven-test-dataset-dialog",{detail:{entityId:l,editable:m,projectId:k,entityType:RAVEN.dataset.parameter.entityTypes.CALLED_STEP,title:o,isTestCallStep:true,testCallBean:j?JSON.parse(JSON.stringify(j)):null,isTempDataset:i,},});document.dispatchEvent(n)};RAVEN.dataset.parameter.validateIfDatasetExists=function(n,l){const m=f[n];const i=l?l:m.entityId();const o=m.getSubEntityId();var k=contextPath+"/rest/raven/1.0/dataset/hasDataset?entityId="+i+"&type="+n;if(o!=null){k+="&subEntityId="+o}const j=g.Deferred();g.ajax({type:"GET",url:k,contentType:"application/json",success:function(p){j.resolve(p)},error:function(){j.reject()},});return j};function c(j,i,k){RAVEN.dataset.parameter.validateIfDatasetExists(k,i).then(function(l){l.hasDataset===true?g(j).addClass("aui-button-primary"):g(j).removeClass("aui-button-primary")}).fail(function(){console.error("Error checking if entity has dataset.")})}function d(k,j,l){const i="raven-dataset-updated-event-"+l+"-"+j;g(document).off(i).on(i,function(){c(k,j,l)})}RAVEN.dataset.parameter.customInitDataset=function(l,j,m,i,k,n){c(l,j,m);g(l).off("click.raven-open-dataset");g(l).on("click.raven-open-dataset",function(){RAVEN.dataset.parameter.initTestConfigurationDialog(j,k,i,m,n)});d(l,j,m)};RAVEN.dataset.parameter.initializeDataset=function(k){const j=f[k];const i=g(j.hasDatasetId).val()==="true";const l=g(j.buttonId);if(i){l.addClass("aui-button-primary")}l.show();l.prop("disabled",false);l.off("click.raven-test-dataset");l.on("click.raven-test-dataset",function(){RAVEN.dataset.parameter.initTestConfigurationDialog(j.entityId(),g(j.canEditTestId).val()==="true",g(j.projectId).val(),j.entityType,j.dialogTitleKey(),j.refreshPageOnSave,j.getSubEntityId())});d(l,j.entityId(),j.entityType)};RAVEN.dataset.parameter.initializeTestDataset=function(j){const i=f[j];const k=g(i.buttonId);RAVEN.dataset.parameter.validateIfDatasetExists(j).then(function(l){if(l.hasDataset===true){k.addClass("aui-button-primary")}k.show()});k.prop("disabled",false);k.off("click.raven-test-dataset");k.on("click.raven-test-dataset",function(){RAVEN.dataset.parameter.initTestConfigurationDialog(i.entityId(),g(i.canEditTestId).val()==="true"&&!RAVEN.Test.isCurrentVersionArchived(),g(i.projectId).val(),i.entityType,i.dialogTitleKey(),i.refreshPageOnSave,i.getSubEntityId())});d(k,i.entityId(),i.entityType)};return{entityTypes:RAVEN.dataset.parameter.entityTypes,}})(AJS.$));;
;
/* module-key = 'com.xpandit.plugins.xray:requirement-status-customfield-resources', location = 'templates/customfield/requirementstatus/requirement-status.soy' */
// This file was automatically generated from requirement-status.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.CustomField.Requirement.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.CustomField == 'undefined') { RAVEN.CustomField = {}; }
if (typeof RAVEN.CustomField.Requirement == 'undefined') { RAVEN.CustomField.Requirement = {}; }


RAVEN.CustomField.Requirement.renderStatusBar = function(opt_data, opt_ignored) {
  return '<div class="requirement-status-value detail"><div class="requirement-status-bar status-' + soy.$$escapeHtml(opt_data.reqStatus.statusStyle) + '" title="' + soy.$$escapeHtml(opt_data.reqStatus.status) + '"><p class="raven-truncate">' + ((opt_data.reqStatus.version) ? soy.$$escapeHtml(opt_data.reqStatus.version) + ' - ' : '') + soy.$$escapeHtml(opt_data.reqStatus.status) + '</p></div>' + ((opt_data.reqStatus.status != 'UNCOVERED') ? '<ul class="requirement-status-bar-detail">' + ((opt_data.reqStatus.okPercent > 0) ? '<li class="status-ok" title="' + soy.$$escapeHtml(opt_data.reqStatus.ok) + ' ' + soy.$$escapeHtml('Test(s) passed') + ' - ' + ((opt_data.reqStatus.version) ? soy.$$escapeHtml(opt_data.reqStatus.version) + ' - ' : '') + soy.$$escapeHtml(opt_data.reqStatus.status) + '" style="width: ' + soy.$$escapeHtml(opt_data.reqStatus.okPercent) + '%"><a id="view-issues-link" href="' + soy.$$escapeHtml(opt_data.contextPath) + '/secure/IssueNavigator.jspa?reset=true&mode=hide&jqlQuery=' + soy.$$escapeHtml(opt_data.reqStatus.okJql) + '">' + soy.$$escapeHtml(opt_data.reqStatus.ok) + '</a></li>' : '') + ((opt_data.reqStatus.nokPercent > 0) ? '<li class="status-nok" title="' + soy.$$escapeHtml(opt_data.reqStatus.nok) + ' ' + soy.$$escapeHtml('Test(s) failed') + ' - ' + ((opt_data.reqStatus.version) ? soy.$$escapeHtml(opt_data.reqStatus.version) + ' - ' : '') + soy.$$escapeHtml(opt_data.reqStatus.status) + '" style="width: ' + soy.$$escapeHtml(opt_data.reqStatus.nokPercent) + '%"><a id="view-issues-link" href="' + soy.$$escapeHtml(opt_data.contextPath) + '/secure/IssueNavigator.jspa?reset=true&mode=hide&jqlQuery=' + soy.$$escapeHtml(opt_data.reqStatus.nokJql) + '">' + soy.$$escapeHtml(opt_data.reqStatus.nok) + '</a></li>' : '') + ((opt_data.reqStatus.notrunPercent > 0) ? '<li class="status-notrun" title="' + soy.$$escapeHtml(opt_data.reqStatus.notrun) + ' ' + soy.$$escapeHtml('Test(s) not run') + ' - ' + ((opt_data.reqStatus.version) ? soy.$$escapeHtml(opt_data.reqStatus.version) + ' - ' : '') + soy.$$escapeHtml(opt_data.reqStatus.status) + '" style="width: ' + soy.$$escapeHtml(opt_data.reqStatus.notrunPercent) + '%"><a id="view-issues-link" href="' + soy.$$escapeHtml(opt_data.contextPath) + '/secure/IssueNavigator.jspa?reset=true&mode=hide&jqlQuery=' + soy.$$escapeHtml(opt_data.reqStatus.notRunJql) + '">' + soy.$$escapeHtml(opt_data.reqStatus.notrun) + '</a></li>' : '') + ((opt_data.reqStatus.unknownPercent > 0) ? '<li class="status-unknown" title="' + soy.$$escapeHtml(opt_data.reqStatus.unknown) + ' ' + soy.$$escapeHtml('Test(s) with other statuses') + ' - ' + ((opt_data.reqStatus.version) ? soy.$$escapeHtml(opt_data.reqStatus.version) + ' - ' : '') + soy.$$escapeHtml(opt_data.reqStatus.status) + '" style="width: ' + soy.$$escapeHtml(opt_data.reqStatus.unknownPercent) + '%"><a id="view-issues-link" href="' + soy.$$escapeHtml(opt_data.contextPath) + '/secure/IssueNavigator.jspa?reset=true&mode=hide&jqlQuery=' + soy.$$escapeHtml(opt_data.reqStatus.unknownJql) + '">' + soy.$$escapeHtml(opt_data.reqStatus.unknown) + '</a></li>' : '') + '</ul>' : '') + '</div>';
};
if (goog.DEBUG) {
  RAVEN.CustomField.Requirement.renderStatusBar.soyTemplateName = 'RAVEN.CustomField.Requirement.renderStatusBar';
}


RAVEN.CustomField.Requirement.renderColumnViewStatusBar = function(opt_data, opt_ignored) {
  return '<div class="requirement-status-value"><div class="requirement-status-bar status-' + soy.$$escapeHtml(opt_data.reqStatus.statusStyle) + '" title="' + ((opt_data.reqStatus.version) ? soy.$$escapeHtml(opt_data.reqStatus.version) + ' - ' : '') + soy.$$escapeHtml(opt_data.reqStatus.status) + '">' + ((opt_data.reqStatus.version) ? soy.$$escapeHtml(opt_data.reqStatus.version) + ' - ' : '') + soy.$$escapeHtml(opt_data.reqStatus.status) + '</div></div>';
};
if (goog.DEBUG) {
  RAVEN.CustomField.Requirement.renderColumnViewStatusBar.soyTemplateName = 'RAVEN.CustomField.Requirement.renderColumnViewStatusBar';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:requirement-status-customfield-resources', location = '/js/customfield/requirementstatus/requirement-status.js' */
(function(a){a(document).ready(function(){AJS.$(".requirement-status-bar-detail li").tooltip({gravity:"s"})})})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:xray-project-template-resources', location = 'templates/project/XrayProjectTemplate.soy' */
// This file was automatically generated from XrayProjectTemplate.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RAVEN.Templates.ProjectTemplates.
 */

if (typeof RAVEN == 'undefined') { var RAVEN = {}; }
if (typeof RAVEN.Templates == 'undefined') { RAVEN.Templates = {}; }
if (typeof RAVEN.Templates.ProjectTemplates == 'undefined') { RAVEN.Templates.ProjectTemplates = {}; }


RAVEN.Templates.ProjectTemplates.renderXrayTemplateExplanation = function(opt_data, opt_ignored) {
  return '<div class="dialog-panel-body pt-content" style="height: 361px;"><div class="software-development-info"><div><p>' + soy.$$escapeHtml('Select this template to create an Xray Test project. This template will provide you with specific screens to create, edit and view Xray issues types. Xray works with any workflow you configure.') + '</p><div class="panel-issue-type"><h3>' + soy.$$escapeHtml('Issue Types') + '</h3><ul class="project-template-issuetype-list"><li><span class="issuetype-list-label"><b>' + soy.$$escapeHtml('All Issue Types from default Scheme') + '</b></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon test-icon-png" style="background-repeat: no-repeat;"></span><span class="issuetype-name">Test</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon testset-icon-png" style="background-repeat: no-repeat;"></span><span class="issuetype-name">Test Set</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon test-execution-icon-png" style="background-repeat: no-repeat;"></span><span class="issuetype-name">Test Execution</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon sub-task-test-execution-icon-png" style="background-repeat: no-repeat;"></span><span class="issuetype-name">Sub Test Execution</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon precondition-icon-png" style="background-repeat: no-repeat;"></span><span class="issuetype-name">Pre-Condition</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon test-plan-icon-png" style="background-repeat: no-repeat;"></span><span class="issuetype-name">Test Plan</span></span></li></ul></div></div></div></div>';
};
if (goog.DEBUG) {
  RAVEN.Templates.ProjectTemplates.renderXrayTemplateExplanation.soyTemplateName = 'RAVEN.Templates.ProjectTemplates.renderXrayTemplateExplanation';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:raven-docgen-export-agile-web-resource', location = 'js/docgen/export/issue-navigator-export-dialog.js' */
(function(a){AJS.$(document).ready(function(){if(!window.raven){window.raven={}}window.raven.issuenavigator={};if(AJS.$(document).find(".saved-search-operations").length>0){WRM.require("com.xpandit.plugins.xray:entrypoint-docgenIssueNavExportDialog");AJS.$(document).on("click",'a[href*="/sr/com.xpandit.plugins.xray:documentgenerator-top-menu-export-filter-results-test"]',function(b){b.preventDefault();document.dispatchEvent(new CustomEvent("issue-navigator-export-event"))})}if(AJS.$(document).find(".repository-docgen-title").length>0){WRM.require("com.xpandit.plugins.xray:entrypoint-docgenTestPlanExportDialog");WRM.require("com.xpandit.plugins.xray:entrypoint-docgenTestRepositoryExportDialog")}window.raven.agilecontext={};AJS.$("body").on("click",".xray-docgen-agile-export",function(b){b.preventDefault();WRM.require("com.xpandit.plugins.xray:raven-docgen-export-agile-web-resource",function(){getDocGenSubContexts(function(c){window.raven.agilecontext=c;window.raven.agileScope=9;document.dispatchEvent(new CustomEvent("agile-board-export-event"))})})});AJS.$("body").on("click","#release-page",function(){WRM.require("com.xpandit.plugins.xray:raven-docgen-export-agile-web-resource",function(){addAgileReleasesDocGenButton();AJS.$(".docgen-agile-action").unbind("click");AJS.$(".docgen-agile-action").on("click",function(b){b.preventDefault();fireDocGenAgileReleases(this,function(c){if(c){window.raven.agilecontext=c;window.raven.agileScope=10;document.dispatchEvent(new CustomEvent("agile-board-export-event"))}})})})});if(AJS.$("#release-report").length>0){WRM.require("com.xpandit.plugins.xray:raven-docgen-export-agile-web-resource",function(){addAgileReleasesDetailsButton();AJS.$("#docgen-release-detail-action").on("click",function(b){b.preventDefault();fireDocGenAgileReleaseDetail(function(c){window.raven.agilecontext=c;window.raven.agileScope=10;document.dispatchEvent(new CustomEvent("agile-board-export-event"))})})})}})})(AJS.$);;
;
/* module-key = 'com.xpandit.plugins.xray:raven-docgen-export-agile-web-resource', location = 'js/document.generator/agile-integrations.js' */
WRM.require("com.xpandit.plugins.xray:entrypoint-docgenAgileBoardExportDialog");var releasesPage="com.atlassian.jira.jira-projects-plugin:release-page";var projectBacklogPage="com.pyxis.greenhopper.jira:project-sidebar-plan-scrum";var globalBacklogPage="com.pyxis.greenhopper.jira:global-sidebar-plan-scrum";var projectActiveSprintPage="com.pyxis.greenhopper.jira:project-sidebar-work-scrum";var globalActiveSprintPage="com.pyxis.greenhopper.jira:global-sidebar-work-scrum";var projectKanbanPage="com.pyxis.greenhopper.jira:project-sidebar-work-kanban";var globalKanbanPage="com.pyxis.greenhopper.jira:global-sidebar-work-kanban";var globalKanbanBacklogPage="com.pyxis.greenhopper.jira:global-sidebar-plan-kanban";var projectKanbanBacklogPage="com.pyxis.greenhopper.jira:project-sidebar-plan-kanban";var JQL_SORT=" order by rank asc";var RELEASES_JQL_SORT=" order by priority desc, key asc";var EMPTY_JQL="created = currentLogin()  AND created != currentLogin()";var ALL_ISSUES="raven.docgen.export.all.issues";function loadDocGenBasedOnSelectedPage(b,a){if(b===releasesPage){if(AJS.$("#release-report").length>0){fireDocGenAgileReleaseDetail(function(c){a(c)})}AJS.$("#release-page").on("click","a[href^='#version-actions-']",function(){fireDocGenAgileReleases(function(c){a(c)})})}else{fireDocGenAgileBoard(function(c){a(c)})}}function fireDocGenAgileBoard(a){var b=AJS.$(".aui-nav-selected > a").attr("data-link-id");switch(b){case projectBacklogPage:case globalBacklogPage:AJS.$.ajax({url:window.location.origin+AJS.contextPath()+"/rest/greenhopper/1.0/xboard/plan/backlog/data.json",type:"GET",data:{rapidViewId:getURLParameter("rapidView")[0],activeQuickFilters:getURLParameter("quickFilter")},}).done(function(d){var c=[];var f=[];var h=[];var g=[];d.sprints.forEach(function(j){var i=[];d.issues.forEach(function(k){if(j.issuesIds.includes(k.id)&&!k.hidden){i.push(k)}});c.push(buildDocGenSprintObject(i,j.id,j.name))});d.sprints.forEach(function(i){i.issuesIds.forEach(function(j){f.push(j)})});d.issues.forEach(function(i){if(!f.includes(i.id)&&!i.hidden){h.push(i)}});c.push(buildDocGenSprintObject(h,"Backlog","Backlog"));c.forEach(function(j){for(var k=0;k<j.issuesSelected.length;k++){g.push(j.issuesSelected[k])}});c.unshift(buildDocGenSprintObject(g,"AllIssues",AJS.I18n.getText(ALL_ISSUES)));var e=c.map(function(i){var j=i.clause.length===0?EMPTY_JQL:i.clause+JQL_SORT;return{id:i.id,filterName:i.filterName,clause:j}});a(e)});break;case projectActiveSprintPage:case globalActiveSprintPage:AJS.$.ajax({url:window.location.origin+AJS.contextPath()+"/rest/greenhopper/1.0/xboard/work/allData.json",type:"GET",data:{rapidViewId:getURLParameter("rapidView")[0],activeQuickFilters:getURLParameter("quickFilter"),activeSprints:getURLParameter("sprint")},}).done(function(c){var e=[];var d=c.issuesData.issues.filter(function(f){return !f.hidden}).map(function(f){return f.key});e.push({id:"AllIssues",filterName:AJS.I18n.getText(ALL_ISSUES),clause:d.length>0?"key in ("+d.join(",")+")"+JQL_SORT:EMPTY_JQL});AJS.$.each(c.columnsData.columns,function(){var g={id:this.id,filterName:this.name,clause:EMPTY_JQL};if(d.length>0){var f="key in ("+d.join(",")+")";f+=" and status in ("+this.statusIds.join(",")+")";f+=JQL_SORT;g.clause=f}e.push(g)});a(e)});break;case projectKanbanPage:case globalKanbanPage:AJS.$.ajax({url:window.location.origin+AJS.contextPath()+"/rest/greenhopper/1.0/xboard/work/allData.json",type:"GET",data:{rapidViewId:getURLParameter("rapidView")[0],activeQuickFilters:getURLParameter("quickFilter"),activeSprints:getURLParameter("sprint")},dataFilter:function(d){var g=[];var c=docGenLoadKanbanJQL(getURLParameter("rapidView")[0]);var e=JSON.parse(d);var f=e.issuesData.issues.filter(function(h){return !h.hidden}).map(function(h){return h.key});c=c!==""?" and ("+c+")":"";g.push({id:0,filterName:AJS.I18n.getText(ALL_ISSUES),clause:f.length===0?EMPTY_JQL:"key in ("+f.join(",")+")"+c+JQL_SORT,});AJS.$.each(e.columnsData.columns,function(){var j=this;var i=e.issuesData.issues.filter(function(l){return !l.hidden&&j.statusIds.includes(l.statusId)}).map(function(l){return l.key});var k={id:this.id,filterName:this.name,clause:EMPTY_JQL};if(i.length>0){var h="key in ("+i.join(",")+")";h+=c;h+=JQL_SORT;k.clause=h}g.push(k)});a(g)}});break;case globalKanbanBacklogPage:case projectKanbanBacklogPage:AJS.$.ajax({url:window.location.origin+AJS.contextPath()+"/rest/greenhopper/1.0/xboard/plan/backlog/data.json",type:"GET",data:{rapidViewId:getURLParameter("rapidView")[0],activeQuickFilters:getURLParameter("quickFilter"),activeSprints:getURLParameter("sprint")},dataFilter:function(f){const c=JSON.parse(f);const i=[c.backlogColumn,c.selectedForDevelopmentColumn];var e;var d;var g;e=c.issues.filter(function(j){return !j.hidden});d=e.filter(function(j){return i[0].statusIds.includes(j.statusId)});g=e.filter(function(j){return i[1].statusIds.includes(j.statusId)});const h=[buildDocGenKanbanBacklogObject(e,"AllIssues",AJS.I18n.getText(ALL_ISSUES)),buildDocGenKanbanBacklogObject(g,i[1].name,i[1].name),buildDocGenKanbanBacklogObject(d,i[0].name,i[0].name)];a(h)}})}}function buildDocGenSprintObject(a,f,e){var c=backlogSelectedIssues(a);var d=[];var b=EMPTY_JQL;c.forEach(function(g){d.push(g.id)});if(d.join()!==""){b="key in ("+d.join()+")"}return{issuesSelected:c,id:f,filterName:e,clause:b,}}function buildDocGenKanbanBacklogObject(c,e,d){var b=EMPTY_JQL;const a=c.map(function(f){return f.id});if(c.join()!==""){b="key in ("+a.join()+")"+JQL_SORT}return{id:e,filterName:d,clause:b,}}function backlogSelectedIssues(a){var f=a;var d=getURLParameter("selectedVersion")[0];if(d!=null){for(var c=f.length-1;c>=0;c--){if(d==="none"){if(f[c].fixVersions.length!==0){f.splice(c,1)}}else{if(!f[c].fixVersions.includes(parseInt(d))){f.splice(c,1)}}}}var e=getURLParameter("selectedEpic")[0];if(e!=null){for(var b=f.length-1;b>=0;b--){if(e==="none"){if(f[b].epic!=null){f.splice(b,1)}}else{if(f[b].epic!==e){f.splice(b,1)}}}}return f}function getURLParameter(b){var e=decodeURIComponent(window.location.search.substring(1));var a=[];var d=e.split("&");for(var c=0;c<d.length;c++){var f=d[c].split("=");if(f[0]===b){a.push(f[1])}}return a}function fireDocGenAgileReleases(b,a){var c={fixVersionId:AJS.$(b).attr("data-version-id"),projectId:JIRA.API.Projects.getCurrentProjectId()};a([{id:"AgileReleases",filterName:"Agile Releases",clause:"project = "+c.projectId+" AND fixVersion = "+c.fixVersionId+JQL_SORT}])}function addAgileReleasesDocGenButton(){if(AJS.$(".versions-table").length>0){AJS.$(".versions-table > tbody  > tr").each(function(){var a=AJS.$(this);if(AJS.$("#version-actions-"+a.attr("data-version-id")+" ul > li > #docgen-release-"+a.attr("data-version-id")).length===0){AJS.$("#version-actions-"+a.attr("data-version-id")+" ul").append("<li><a id='docgen-release-"+a.attr("data-version-id")+"' class='item-link docgen-agile-action' data-version-id='"+a.attr("data-version-id")+"' tabindex='-1'>Xray - Document Generator</a></li>")}})}}function addAgileReleasesDetailsButton(){if(AJS.$(".aui-page-header-actions").length>0&&AJS.$("#xporter-release-detail-action").length==0){AJS.$(".aui-page-header-actions").append('<button id="docgen-release-detail-action"aria-haspopup="true" class="aui-button aui-style-default"style="float: right;margin-right: 10px;margin-left: 10px;"><span class="aui-icon aui-icon-small docgen-single-issue-export-icon"></span>Doc. Generator</button>')}}function fireDocGenAgileReleaseDetail(a){var b=validateURL();return AJS.$.ajax({url:window.location.origin+AJS.contextPath()+"/rest/release-report/1.0/tab/content/"+b[1]+"/"+b[2],type:"GET",data:{selectedTab:"com.atlassian.jira.plugins.jira-development-integration-plugin",},}).done(function(c){var d=[];c.releaseTabs.forEach(function(f){switch(f.id){case"com.atlassian.jira.plugins.jira-development-integration-plugin:release-report-all-issues":var g={id:f.id,label:f.label.replace(/ [\n\r]+/g,""),count:f.count,projectKey:b[1],versionId:b[2],};d.push(g);break;default:c.statusCategoryCounts.forEach(function(h){if(h.tabId===f.id){var i={id:f.id,label:f.label.replace(/ [\n\r]+/g,""),colour:f.colour,count:f.count,statuses:h.statuses,projectKey:b[1],versionId:b[2]};d.push(i)}});break}});var e=[];d.forEach(function(h){var g={id:h.id,filterName:h.label,clause:"",};var f=[];if(h.statuses!==undefined){h.statuses.forEach(function(i){f.push(i.id)})}switch(h.id){case"com.atlassian.jira.plugins.jira-development-integration-plugin:release-report-all-issues":g.clause="project = "+h.projectKey+" and fixVersion = "+h.versionId+RELEASES_JQL_SORT;break;default:g.clause="project = "+h.projectKey+" and fixVersion = "+h.versionId+" and status in ("+f.join()+")"+RELEASES_JQL_SORT;break}e.push(g)});a(e)}).fail(function(c){if(c.status===401){window.location.replace(getRedirectURL())}})}jQuery.fn.observeData=function(b,a,d){var c=AJS.$(this[0]);c.data(b,a);d();return this};function validateURL(){return location.href.match(/.+\/projects\/(.+?)(?:\/|\/.+\/)versions\/(.+?)(?:\/|$)/)}function docGenLoadKanbanJQL(b){var a;AJS.$.ajax({url:window.location.origin+AJS.contextPath()+"/rest/agile/1.0/board/"+b+"/configuration",type:"GET",async:false,}).done(function(c){a=c.subQuery.query});return a}function getDocGenSubContexts(a){var b=AJS.$(".aui-nav-selected > a").attr("data-link-id");loadDocGenBasedOnSelectedPage(b,function(c){a(c)})};;
;
/* module-key = 'com.xpandit.plugins.xray:react-i18n', location = '/js/client/i18n.js' */
define("raven-i18n-react",[],function(){return{testSteps:{test:"Project cannot be null",list:"List",grid:"Grid",importString:"Import",exportString:"Export",deleteString:"Delete",noStepsDefined:"There are no steps defined.",noStepsDescription:"A test is a sequence of steps coupled with conditions, test inputs and expected results. Create or import test steps to define the test.",noStepsDialogDescription:"A test is a sequence of steps coupled with conditions, test inputs and expected results. Create steps to define the test.",openStepsDialog:"Open steps dialog",openStepsDialogButton:"Steps dialog",addStep:"Add Step",create:"Create",save:"Save",moveHere:"Move here",collapsed:"Collapsed",collapse:"Collapse",expand:"Expand",collapseAllSteps:"Collapse all steps",expandAllSteps:"Expand all steps",stepsViewMode:"Step details view mode",dataset:"Dataset",callTest:"Call Test",clone:"Clone",move:"Move",moveTo:"Move to...",none:"None",done:"Done",invalidPosition:"Invalid position",copyFieldToClipboard:function(a){return AJS.format("Field {0} copied to clipboard successfully",a)},cloneConfirmation:function(a){return AJS.format("Are you sure you want to clone this Step from Test {0}?",a)},cloneTestStep:"Clone Test Step",cancel:"Cancel",newRankValue:"New rank value",ok:"OK",deleteTestStepTitle:"Delete Test Step",deleteConfirmation:function(a){return AJS.format("Are you sure you want to delete this Step from Test {0}?",a)},testStepsDialog:"Test Steps dialog",attachments:"Attachments",stepClonedSuccessfully:"Step cloned successfully",stepDeletedSuccessfully:"Step deleted successfully",stepMovedSuccessfully:"Step moved successfully",attachmentDeletedSuccessfully:"Attachment deleted successfully",errorGettingStep:"Error getting step",errorCreatingStep:"Error creating step",errorSavingStep:"Error saving step",errorMovingStep:"Error moving step",errorDeletingStep:"Error deleting step",errorCloneStep:"Error clone step",errorDeletingAttachment:"Error deleting attachment",errorUpdateCreateIssue:{action:"You are currently editing/creating a step",details:"Closing the dialog will result in the lost of unsaved data.\n Save or discard the changes made to close the dialog.",},deleteAttachment:"Delete Attachment",attachFiles:"Attach Files",maxUploadSize:function(a){return AJS.format("The maximum file upload size is {0}.",a)},browse:"Browse",deleteAttachmentDialogMessage:"Are you sure you want to remove this attachment?",moveUp:"Move up",moveDown:"Move down",loadAll:"Load all",importTestStepFromTest:"From test",importTestStepFromCSV:"From csv",importTestStepFromClipboard:"From clipboard...",importTestStepFromJSON:"From json",exportTestStepsToCSV:"To csv",clickToExpand:"Click to expand",more:"More",closeDialogWhenEditingStep:"You are currently editing/creating a step. Closing  the dialog will result in losing the unsaved data. Are you sure you want to close the dialog?",closeDialogMessage:"Closing  the dialog will result in losing the unsaved data. Are you sure you want to close the dialog?",closeDialog:"Close dialog",close:"Close",uploadToBig:function(c,a,b){return AJS.format("{0} is too large to attach. Attachment is {1} but the largest allowed attachment is {2}.",c,a,b)},invalidAttachmentName:function(b,a){return AJS.format("{0} contains the invalid character \"{1}\". Please rename the file and try again.",b,a)},errorUploadingAttachment:"Error uploading attachment",invalidStep:{edit:{title:function(a){return AJS.format("Please finish editing previous step #{0}",a)},titleSave:function(a){return AJS.format("Please finish editing the step #{0}",a)},message:"Cannot start editing a step because the step currently being edited is invalid.",messageSave:"Cannot save the step because the step is invalid.",},create:{title:function(a){return AJS.format("Please finish creating the step #{0}",a)},messageSave:"Cannot create the step because it is invalid.",message:"Cannot start editing a step because the step currently being created is invalid.",}},warningOnPageReload:"If you proceed with this operation, you can lose unsaved data.",onBoarding:{tooltip:"Whats new on manual steps edition",spotlights:{testSteps:{heading:"Welcome to the new Test Steps UI",content:"Click \'Next\' to get to know how they work",},manualTestStep:{heading:"Manual Step",content:"This is a manual step. By default, there are 3 native fields: \u003cb\u003eAction\u003c/b\u003e, \u003cb\u003eData\u003c/b\u003e and \u003cb\u003eExpected Result\u003c/b\u003e. Project admins can configure up to 3 additional custom fields for test steps.\u003cbr\u003e\u003cbr\u003eThe steps can also be viewed in 2 modes: \u003cb\u003eList\u003c/b\u003e and \u003cb\u003eGrid\u003c/b\u003e. Here we have an example of a step in using the \u003cb\u003eGrid\u003c/b\u003e view.",},columnConfig:{heading:"Step View Modes",content:"Here you can configure which view you want for the test step fields: \u003cb\u003eList\u003c/b\u003e or \u003cb\u003eGrid\u003c/b\u003e.\u003cbr\u003e\u003cbr\u003eLet\'s change to \u003cb\u003eList\u003c/b\u003e view and see how the steps look like.",},listView:{heading:"Step in List View",content:"This view is more appropriate when there is a lot of content or text in the step fields. Readability can be improved because there is more horizontal space for each field.",},collapsedConfig:{heading:"Collapse All Steps",content:"Here you can collapse all the Test Steps in case you need to have a quick overview of all of them.",},collapsedTest:{heading:"Collapsed Step",content:"This is a collapsed step. This view only shows you the first line of the \u003cb\u003eAction\u003c/b\u003e field.\u003cbr\u003e\u003cbr\u003eIn order to expand a collapsed step just click on it.",},expandConfig:{heading:"Expand All Steps",content:"Here you can expand all your steps to see them in detail.\u003cbr\u003e\u003cbr\u003eBoth Expanded and Collapsed states are saved as preferences on your user profile so that the next time you visit a Test, it remembers the same collapsed/expanded state.",},stepActions:{heading:"Step Actions",content:"There are multiple actions you can do on a step:\u003cul\u003e\u003cli\u003eCollapse\u003c/li\u003e\u003cli\u003eClone\u003c/li\u003e\u003cli\u003eMove\u003c/li\u003e\u003cli\u003eDelete\u003c/li\u003e\u003c/ul\u003e",},reRankActions:{heading:"Move to",content:"You can also move the step by clicking on the arrow icons or by dragging the step using the drag handler.",},editArea:{heading:"Editing a Step",content:"To start editing a step just click on any of the step\'s fields, like, for example, the \u003cb\u003eAction\u003c/b\u003e field you see highlighted here.",},editStep:{heading:"Edit View",content:"This is a step in edit view. Here you can change the value of any field of the step.\u003cbr\u003e\u003cbr\u003eIn this step we have a custom field named \"Execution Domain\".\u003cbr\u003e\u003cbr\u003eYou can configure Test Step fields including the order by which they are displayed in the \u003cb\u003eXray Project Settings\u003c/b\u003e.\u003cbr\u003e\u003cbr\u003eLet\'s take a look at the custom test step field we have on this step.",},extraFields:{heading:"Extra Fields",content:"Here we have a Test Step Custom Field of the type \u003cb\u003eSelect List\u003c/b\u003e. You can configure your steps to have up to 3 extra fields that can have any of the following types:\u003cul\u003e\u003cli\u003eToggle Switch\u003c/li\u003e\u003cli\u003eDate Picker\u003c/li\u003e\u003cli\u003eDate Time Picker\u003c/li\u003e\u003cli\u003eNumber\u003c/li\u003e\u003cli\u003eRadio Buttons\u003c/li\u003e\u003cli\u003eSelect List\u003c/li\u003e\u003cli\u003eSelect List (Multiple)\u003c/li\u003e\u003cli\u003eText (Single Line)\u003c/li\u003e\u003cli\u003eText (Multiple Line)\u003c/li\u003e\u003cli\u003eUser Picker\u003c/li\u003e\u003c/ul\u003e",},addStep:{heading:"Confirm Changes",content:"Once you have finished editing the step, press the \u003cb\u003eDone\u003c/b\u003e button to confirm and save the changes. \u003cbr\u003e\u003cbr\u003eStep changes will also be automatically saved when you start editing another step.",},importSteps:{heading:"Import Steps",content:"If you already have your steps defined elsewhere you can import them from: \u003cul\u003e\u003cli\u003e\u003cb\u003eJSON\u003c/b\u003e\u003c/li\u003e\u003cli\u003e\u003cb\u003eCSV\u003c/b\u003e\u003c/li\u003e\u003cli\u003e\u003cb\u003eClipboard\u003c/b\u003e\u003c/li\u003e\u003cli\u003e\u003cb\u003eAnother Test\u003c/b\u003e\u003c/li\u003e\u003c/ul\u003e",},exportSteps:{heading:"Export Steps",content:"You can also export the steps into a \u003cb\u003eCSV\u003c/b\u003e file.",},dialog:{heading:"Test Steps Dialog",content:"If you wish to maximize the screen real estate for viewing and editing Test Steps, then use the \u003cb\u003eTest Steps Dialog\u003c/b\u003e.\u003cbr\u003e\u003cbr\u003eWhen editing steps using the dialog, you can modify everything you need in any step, and save all changes only when you press the \u003cb\u003eSave\u003c/b\u003e button.",},refreshOnBoarding:{heading:"Need a refresh?",content:"Click here at any time to revisit the test step tutorial.",},},demoSteps:{multiSelectCF:{name:"Execution Domain",},stepOne:{step:"Fill the tank with fuel and start the car engine.",data:"Fuel Type: Premium petrol, Liters: 68.",expectedResult:"Fuel sensor reaches the maximum. Engines starts and Anti-stall mechanism kicks up.",},stepTwo:{step:"Accelerate the car up to 300km/h.",data:"Only upshift to next gear when engine is close to the red line (maximum rotations that the car supports).",expectedResult:"Car reaches the 300 km/h without overheating.",},stepThree:{step:"At the 50 meter mark, full press on the brake and downshift to second gear.",expectedResult:"Car slows down to 50km/h at the 20 meter mark.\n Brakes temperature are lower than 1000u00BAC",},},},searchSteps:{emptySearchTitle:"No Steps Found",emptySearchDescription:"No steps were found for your search.",searchResults:function(a,b){return AJS.format("Showing {0} of {1} steps",a,b)},},refreshPage:"Please refresh the page.",modularTests:{callTestTag:"CALL TEST",calledIssueDelete:"Test issue not found",calledIssueTypeInvalid:"Called Test Issue is Invalid",getStepsNumberTitle:function(a){return AJS.format("{0} steps",a)},getDatasetDialogTitle:function(b,a){if(a==="null"){return AJS.format("Dataset for Called Test {0}",b)}return AJS.format("Dataset for Called Test {0} in Test {1}",b,a)},callingTestsInfo:function(a){return AJS.format("Called from \u003cb\u003e{0}\u003c/b\u003e test(s)",a)},errorCreatingCall:"Error creating call test.",addTestStepCall:"Add Step - Call Test"},},timer:{resetTimerDialog:"Are you sure you want to reset the timer?",resetTimerDialogTitle:"Reset timer",noTimeLogged:"No time logged",logged:function(a){return AJS.format("{0} logged",a)},remaining:function(a){return AJS.format("{0} remaining",a)},testKey:"Test Key",testSummary:"Test Summary",timer:"Timer:",},testRuns:{noFieldsDefined:"There are no Test Run Custom Fields defined.",fetchingError:"Error getting Test Run Custom Fields for this test run",},fields:{fieldUpdatedSuccessfully:function(a){return AJS.format("Field {0} was updated successfully.",a)},errorUpdatingField:function(a){return AJS.format("Error updating field {0}.",a)},fieldDeleted:"This Custom Field was deleted from the project configuration.",deleteField:"Delete Custom Field value",fieldDeletedSuccessfully:function(a){return AJS.format("Field {0} was deleted successfully.",a)},errorDeletingField:function(a){return AJS.format("Error deleting field {0}.",a)},confirmDelete:function(a){return AJS.format("Are you sure you want to delete the Test Run Field {0}?",a)},required:"Field is required.",userPicker:{placeholder:"Enter username, name or email address...",noUserFound:"No User Found",},editableItemList:{maxItems:function(a){return AJS.format("The list is limited to {0} values.",a)},}},common:{addLabel:"Add",copyLabel:"Copy",create:"Create",removeLabel:"Remove",deleteAction:"Delete",editAction:"Edit",cancelAction:"Cancel",confirmAction:"Confirm",closeAction:"Close",saveAction:"Save",textEditPlaceholder:"Enter value...",selectEditPlaceholder:"Select value...",action:"Action",step:"Step",data:"Data",expectedResult:"Expected Result",none:"None",name:"Name",scope:"Scope",update:"Update",values:"Values",add:"Add",more:"More",importAction:"Import",invalidValue:"Invalid value",copyAction:"Copy",clone:"Clone",newLabel:"New",entityTypes:{testPlan:"Test Plan",testExecution:"Test Execution",},options:"Options",exportToCSV:"Export to CSV",defaultLabel:"Default",version:"Version",testType:"Test Type",setDefault:"Set Default",archive:"Archive",archived:"Archived",unarchive:"Unarchive",created:"Created",updated:"Updated",creator:"Creator",reset:"Reset"},templates:{pageNext:"Next",search:"Search",title:"Document Generator Templates",page:{description:"In this page you can manage global templates of the Xray Document Generator. All the templates listed here are available  for all the Jira projects.",previous:"Previous",next:"Next",},add:"Add",store:"Store",name:"Name",description:"Description",scopes:"Active Scopes",last:{modified:"Last Modified"},actions:"Operations",details:"Details",installation:{type:{store:"Store",preInstall:"Pre-Installed",upload:"Uploaded"}},include:{attachments:"INCLUDE ATTACHMENTS"},empty:{table:{main:"Looks like your search did not return results",text:"Try to refine your search in order to bring some templates to this area"},main:"There are no templates available.",text:"You can install Xray Templates from the Template Store."},scope:{nowhere:"Nowhere",everywhere:"Everywhere",},modal:{deleteModal:{title:"Delete Template",description:function(a){return AJS.format("Are you sure you want to delete permanently the template \u003cstrong\u003e{0}\u003c/strong\u003e?",a)}}},error:{project:{not:{found:"Project not found!"}},template:{not:{found:"Template not found!"}},invalid:{issues:{single:{one:"There is",two:"issue that doesn\'t belong to Xray and will not be exported.",},plural:{one:"There are",two:"issues that don\'t belong to Xray and won\'t be exported.",},all:"There are no issues allowed to be exported. Only Xray issues and issues defined as Requirements/Defects (from Requirement Projects) are possible to be exported."}},intern:"An internal error was found. Please refer to the logs for more information.",},success:{body:"You have successfully deleted your template."},project:{page:{description:"In this page you can manage templates of the Xray Document Generator for the current project. These templates and the global templates will be available to create new documents."},settings:{message:{title:"Project Settings Update",success:{enable:"Document Generator is enabled",disable:"Document Generator is disabled",},disabled:"Document Generator can not be used because this feature was disabled by a Jira administrator.",},toggle:{enable:"Enable Document Generator",disable:"Disable Document Generator",}}},form:{title:{create:"Create Template",edit:"Edit Template",},field:{label:{name:"Name",description:"Description",scopes:"Scopes",file:"File",advanced:"Advanced",output:{formats:"Output Formats"},defaulting:{output:{formats:"Default Output Formats"},breaking:{types:"Default Page Break Types"}},attach:{files:"Attach Files"},upload:{file:"Upload File"},entities:"Entities"},description:{name:"Template identification when creating a report",description:"Brief description of the template",scopes:"This template will be available on these scopes",file:"Choose the template file",advanced:"Advanced settings are available when the template file is uploaded",output:{formats:"This template will have the following output formats available"},defaulting:{output:{formats:"Choose the default output format"},breaking:{types:"Choose the default page break type"},attach:{files:"Include the issues attachment to the exported document"}},entities:"This template will be available at the following entities"}},characters:{remaining:function(a){return AJS.format("{0} characters remaining",a)}},error:{invalid:{name:"Invalid template name",file:{name:"Invalid character(s) in filename"},},empty:{name:"Template name is empty",file:"You must upload a template file"},incompatible:{file:"The uploaded file is not compatible"},large:{file:{size:"The file size is too large to upload",name:"The file name is too large to upload"}},output:{formats:"Please choose at least one output format, including the default output format"},message:{title:"Error!"},entities:"Please select at least one entity"},success:{flag:{created:{title:"Template Created",body:function(a){return AJS.format("The template {0} was successfully created!",a)}},updated:{title:"Template Updated",body:function(a){return AJS.format("The template {0} was successfully updated!",a)}}}},button:{confirm:"Create",update:"Update",cancel:"Cancel"},toggle:{on:"ON",off:"OFF"},input:{file:{placeholder:"Choose a file..."}},breaking:{type:{never:"Never",}},},warning:{disabled:"Doc. Generator is currently disabled on Miscellaneous settings page. Template management is enabled but be aware that the main feature wont be available for users."},exports:{modal:{title:"Xray - Document Generator",label:{template:"Template",output:"Output Format",breaktype:"Break Type",preview:"Preview",context:"Context",toggle:"Include tests from sub-folders",},button:{close:"Close",download:"Download",exports:"Export",back:"Back",cancel:"Cancel",},messages:{processing:"Xray is generating your document.",success:{title:"Export completed successfully.",body:"Click on Download button to get your document.",},exportSubFolders:"The selected folder does not have tests, but its sub-folders do. As a result, all the tests of its sub-folders will be exported.",},progress:{current:"%s% complete. Last updated at %t.",startedAt:"Started at",},description:{breaktype:"This option controls if and when page breaks are made while exporting multiple issues.",},toggle:{helper:"With this option enabled, both tests of this folder and of its sub-folders will be exported.",}},limit:{exceeded:"The maximum number of simultaneous export processes was exceeded. Please try again later.",}},common:{deleteString:"Delete",download:"Download",edit:"Edit",learn:{more:"Learn more"},close:"Close",confirm:"Confirm",error:"Error",success:"Success!",failed:"Failed!",show:{more:"Show more",less:"Show less",},install:"Install",reinstall:"Re-Install",selectPlaceholder:"Select",},tempStore:{sorted:{by:{rating:"Sort By Rating",download:"Sort By Download",publish:{date:"Sort By Published Date"}}},success:{flag:{installed:{title:"Template Installed",body:function(a){return AJS.format("The template {0} was successfully installed!",a)}},reinstalled:{title:"Template Reinstalled",body:function(a){return AJS.format("The template {0} was successfully reinstalled!",a)}}}},}},parameterizedTests:{dataset:{resolvedDatasetMessage:{title:"No dataset is defined in this context",overrideInfo:"In order to change the dataset, click on override.",invalidTitle:"No dataset is defined in this context and the resolved dataset is invalid",override:"Override",},emptyState:{title:"There is no default dataset defined",suggestion:{title:"A dataset is a collection of data represented with a tabular view where every column of the table defines a parameter, and each row corresponds to a given iteration of the dataset.",create:"Creating parameters",importFile:"Importing from an external source - CSV file",},},initializeError:{title:"Error getting dataset",details:"Couldn\'t fetch dataset data from server.",},save:{error:"There was an error saving the dataset.",success:"Dataset successfully saved.",tooltip:{noChanges:"There are no changes to be saved.",aboveMaxAllowed:function(a){return AJS.format("The number of iterations is above the maximum allowed of {0}.",a)},maxParamsAllowed:function(a){return AJS.format("You have exceeded the the maximum number of parameters ({0}). Please delete the excess parameters in order to save.",a)},invalidDuplicatedIteraions:"Dataset is invalid because there are duplicate iterations.",}},confirmationDialog:{title:"Close the dialog",message:"This dataset has unsaved changes, closing the dialog will result in losing the unsaved data. Are you sure you want to close the dialog?",},importDataset:{csvDialog:{dialogTitle:"Import from CSV",error:{details:"An error occurred while parsing the CSV file. For more details please check JIRA logs.",title:"Error importing CSV file",delimiterRequired:"CSV Delimiter is required.",encodingRequired:"File encoding is required.",},labels:{delimiter:"CSV delimiter",encoding:"File Encoding",overwrite:"Delete dataset rows and overwrite the existing values of matching parameters",createParameters:"Create new parameters",},},csv:"CSV file",fromCsv:"Import from CSV",successMessage:{title:"Dataset imported successfully.",details:"The CSV data was imported successfully.",},errorMessage:{title:"An error occurred while importing dataset. For more details please check JIRA logs."},},exportDataset:{csv:{errorMessage:"Error exporting dataset to CSV file.",successMessage:"Dataset exported to CSV with success."}},deleteDialog:{header:"Delete dataset",body:"This will clear the dataset being edited. Do you want to continue?",},copyDataset:{messages:{sourceEntityHasNoDataset:"Could not copy dataset. Source dataset is empty.",parameterFromAnotherProject:"Parameter was associated to a list from another project, this parameter will be created with an ad hoc list that contains the same options of the original list.",},confirmation:{title:"Copy dataset",description:function(a){return AJS.format("This will replace the dataset being edited with the dataset from {0}. Do you want to continue?",a)},},},parameter:{actions:{setAsCombinatorial:{label:"Convert to combinatorial parameter",errorTitle:"Error converting to combinatorial parameter",errorDescription:function(a){return AJS.format("Can not add more than {0} rows.",a)},},convertToNonCombinatorialParameter:"Convert to non-combinatorial parameter",generateCombinations:"Generate all combinations",generateCombinationsConfirmDetails:function(a){return AJS.format("This will generate a total of {0} iteration(s) on table for further editing. You don\'\'t need to manually generate the combinations here to see them on the final Test Run.",a)},moveLeft:"Move left",moveRight:"Move right",},errors:{tooManyRowsGenerated:function(b,a){return AJS.format("Cannot generate combinations, this would create {0} combinations (max. {1}).",b,a)}}},iterations:{number:function(a){return AJS.format("There are a total of {0} iteration(s) to execute.",a)},exceedsLimit:function(a){return AJS.format("The maximum number of iterations is {0}.",a)},duplicated:"There are duplicated iterations.",deleteAll:"Delete all duplicates",},combinatorialParameters:"Combinatorial Parameters",maxRowsReached:"Maximum rows reached",},createParameters:{limitReached:function(a){return AJS.format("You\'\'ve reached the max number of parameters you can create ({0}).",a)},title:"Create parameter",},addParameters:{title:"Add parameter",addForeignList:{title:"Add parameter",message:function(a){return AJS.format("The list parameters {0} belong to a different project. Do you want to duplicate them into new ad-hoc list parameters?",a)},},newParameter:"New parameter...",addAll:"All",label:function(b,c,a,d){if(a.length>1){if(d){return AJS.format("{0} [{1}] ({2} Tests)",b,c,a.length)}return AJS.format("{0} [{1}] ({2} Tests) {3}...",b,c,a.length,a[0])}else{if(d){return AJS.format("{0} [{1}] (1 Test)",b,c)}return AJS.format("{0} [{1}] (1 Test) {2}",b,c,a[0])}},tooltip:function(b,c,a){return AJS.format("{0} [{1}] ({2} Tests) {3}",b,c,a.length,a)}},editParameters:{title:"Edit Parameter",},parameterDialog:{combinatorial:"Combinatorial",type:"Type",error:{paramNameExists:"The chosen Parameter name already exists.",},adhocList:{title:"Ad hoc list",options:"Options",},projectList:"Project list",paramType:{text:"Text",list:"List",placeHolder:"Choose Type",}},common:{createList:"Create list",parameterList:"Create parameter list",editParameterList:"Edit Parameter List",optionRepeated:"Option already exists.",fillRequiredFields:"Please fill all required fields",invalidParameterName:"Field name is required. It must start with a letter and can only contain letters, blank space between words, numbers, \"_\", \"-\" and a max of 64 characters.",deleteListTitle:function(a){return AJS.format("Delete \"{0}\"",a)},deleteListDescription:function(a){return AJS.format("There are {0} issues(s) using this parameter values list as a parameter.\n Dataset parameters using this List will be converted to Text parameters and their values will remain unchanged.",a)},deleteListDescriptionGlobalCount:"There are #0##1# project(s)#0# using this global parameter values list.",deleteListDescriptionGlobalMessage:"Deleting a global list will also remove it from all the projects where it has been added.",deleteListConfirmationCount:"There are #0##1# issues(s)#0# using this parameter values list as a parameter.",deleteListOptionConfirmationCount:"There are #0##1# issues(s)#0# using these parameter values list option(s).",deleteListOptionTitle:"Delete Parameter values list option",deleteListConfirmationMessage:"Dataset parameters using this List will maintain their values.",deleteListOptionConfirmationMessage:function(a){return AJS.format("Are you sure you want to delete the option(s): \u003cb\u003e{0}\u003c/b\u003e?",a)},deleteListConfirmationConvertTextMessage:"Dataset parameters using this list will be converted to text parameters and their values will remain unchanged.",deleteListConfirmation:function(a){return AJS.format("Are you sure you want to delete parameter values list \u003cb\u003e{0}\u003c/b\u003e?",a)},successfulCreateList:function(a){return AJS.format("List \"{0}\" created.",a)},successfulGlobalListAdded:function(a){return AJS.format("List \"{0}\" added.",a)},successfulUpdateList:function(a){return AJS.format("List \"{0}\" updated.",a)},successfulDeleteList:function(a){return AJS.format("List \"{0}\" deleted.",a)},learnMore:"Learn more",},global:{title:"Parameter values lists",description:"In this page you can define global lists that can be referenced in datasets\' parameters. These lists can be added per project and used to select the available values of a list parameter in a dataset.",},project:{description:{one:"In this page you can define project lists that can be referenced in datasets\' parameters. These lists can be used to select the available values of a list parameter in a dataset.",two:"If the same list is shared by multiple projects, a global list can be created instead (by Jira administrators) and added to the current project.",},addGlobalListTitle:"Add global list",addGlobalListButton:"Add global list",}},cloudMigration:{entity:{testRun:{name:"Test Runs",incoming:function(b,a){return AJS.format("{0} Test(s) - e.g. {1} - have Test Runs that are present in Test Executions that belong to not migrated project(s):",b,a)},outgoing:function(b,a){return AJS.format("{0} Test Execution(s) - e.g. {1} - have Tests that belong to not migrated project(s):",b,a)},},testPlanTest:{name:"Test Plan Tests",incoming:function(b,a){return AJS.format("{0} Test Plan(s) - e.g. {1} - have Tests that belong to not migrated project(s):",b,a)},outgoing:function(b,a){return AJS.format("{0} Test(s) - e.g. {1} - in Test Plans that belong to not migrated project(s):",b,a)},},testPrecondition:{name:"Test Preconditions",incoming:function(b,a){return AJS.format("{0} Test(s) - e.g. {1} - have Pre-Conditions that belong to not migrated project(s):",b,a)},outgoing:function(b,a){return AJS.format("{0} Pre-Condition(s) - e.g. {1} - are in Tests that belong to not migrated project(s):",b,a)},},testExecTestPlan:{name:"Test Execution Test Plans",incoming:function(b,a){return AJS.format("{0} Test Execution(s) - e.g. {1} - have Test Plans that belong to not migrated project(s):",b,a)},outgoing:function(b,a){return AJS.format("{0} Test Plan(s) - e.g. {1} - are in Tests Executions that belong to not migrated project(s):",b,a)},},testSetTest:{name:"Test Set Tests",incoming:function(b,a){return AJS.format("{0} Test Set(s) - e.g. {1} - have Tests that belong to not migrated project(s):",b,a)},outgoing:function(b,a){return AJS.format("{0} Test(s) - e.g. {1} - are in Test Sets that belong to not migrated project(s):",b,a)},},testRunDefect:{name:"Test Runs Defects",incoming:function(b,a){return AJS.format("{0} Test Run(s) - e.g. {1} - have Defects that belong to not migrated project(s):",b,a)},outgoing:function(b,a){return AJS.format("{0} Defect(s) - e.g. {1} - are in Test Runs that belong to not migrated project(s):",b,a)},},},issueCount:function(a){return AJS.format("raven.migration.preflight.issue.count.label",a)},test:{label:"Test",},testExecution:{label:"Test Execution"},noErrors:"No errors.",warningMessage:{titleMessage:"Errors found for the specified projects",descriptionLine:{one:"We recommend that you add the missing projects to the migration.",two:"Please review the details below.",three:"We recommend that you add the missing permissions to the migration."}},successMessage:{titleMessage:"No errors found",descriptionMessage:"You may proceed with the migration."},titleMessage:"Cloud Migration Pre Flight Checker",descriptionMessage:{one:"Validate if projects with Xray data may be safely migrated.",two:"You must select all the projects that will be migrated within the same migration.",three:"All cross project links must be contained within the selected projects. Xray will check for linked cross project data and project permissions.",},learnMore:"Learn more.",validateLabel:"Validate",clearLabel:"Clear",selectProjects:"Select the projects",permissions:{title:"Project Permissions",failed:"There are some projects which do not have the proper permissions (\"Browse Projects\" and \"Edit Issues\" must be granted to any logged in user):",success:"All projects have the right permissions."},projectsNotFound:{title:"No projects found",description:"No projects match your search criteria",},searchPlaceHolder:"Search for name, key or lead",key:"Key",name:"Name",lead:"Lead",issues:"Issues",attachments:"Attch",lastUpdated:"Last Updated",estimatedTime:"Est time",allCategories:"All Categories",rowsPerPage:"Rows per page",projectType:{allTypes:"All Types",jira:"Jira",inactive30days:"Inactive projects (last 30 days)",inactive90days:"Inactive projects (last 90 days)",},selectedOf:function(a,b){return AJS.format("Selected {0} of {1} projects",a,b)}},dynamicTestPlan:{configureDialog:{title:function(a){return AJS.format("Configure Test Plan {0}",a)},description:"The following option determines which issues will appear on the Test Plan. With a \u003cb\u003e\u003ci\u003estatic\u003c/i\u003e\u003c/b\u003e Test Plan, you can add tests explicitly to the Test Plan. When using a \u003cb\u003e\u003ci\u003efilter\u003c/i\u003e\u003c/b\u003e, you can define a custom JQL depending on your needs so that tests will appear automatically on the Test Plan.",radio:{staticOption:{label:"Static",},dynamicOption:{label:"Saved Filter",}},filterSelect:{placeholder:"Choose a saved filter",newFilter:"New Filter",viewFilterQuery:"View Filter Query",filterQuery:"Filter Query",},saveSuccessful:"Test Plan Configuration Saved Successfully",confirmDialog:{title:"All current Tests will be removed from the Test Plan",testsWillBeReplaced:"All Tests currently associated with this Test Plan will be replaced by the new Saved Filter. Do you want to continue?",},privateFilter:{title:"The selected filter is private",description:"The selected filter is not being shared with anyone. Other users will not be able to see the Test issues in this filter if it is not shared with them.",name:"\u003cPrivate Filter\u003e",},invalidFilter:{name:"\u003cInvalid Filter\u003e",}}},testVersion:{dialog:{createDialog:{title:"Create Test Version",copyVersion:{description:"Copy from"},},updateDialog:{title:"Rename Test Version"},name:"Name",defaultAction:"Set default",saveSuccessful:"Test Version Saved Successfully",errorMaxNumberCharacters:"Version name must not exceed 64 characters",testVersionNameReplicated:"Version name already exists",testVersionCannotBeEmpty:"Test Version name cannot be empty.",},deleteConfirmationDialog:{title:"Delete Test Version",successMessage:"Test Version was deleted with success",message:"Are you sure you want to delete this Test Version?",hasTestRunsMessage:function(a){return AJS.format("This Test Version was executed in \u003cb\u003e{0} Test Run(s) \u003c/b\u003e. If you delete the Test Version these Test Runs will also be deleted. Do you want to continue?",a)}}},manageTestVersions:{dialog:{title:"Test Versions",toggleArchivedVersions:"Show archived versions"}},}});;
;
/* module-key = 'com.atlassian.jira.jira-baseurl-plugin:baseurl-lib', location = 'js/window.js' */
define('baseurl-checker/window', [], function() {
    return window;
});;
;
/* module-key = 'com.atlassian.jira.jira-baseurl-plugin:baseurl-lib', location = 'js/baseurl-checker.js' */
define('baseurl-checker', [
    'jira/flag',
    'jira/util/formatter',
    'jira/util/data/meta',
    'jira/ajs/ajax/smart-ajax',
    'jira/analytics',
    'jira/libs/parse-uri',
    'wrm/context-path',
    'jquery',
    'baseurl-checker/window'
], function (flag, formatter, Meta, SmartAjax, analytics, parseUri, contextPathFunc, $, window) {
    'use strict';
    var $flagElement;
    var contextPath = contextPathFunc();

    var BaseUrl = {
        jiraRestPath: contextPath + "/rest/api/2/settings/baseUrl",

        isDisplayed: function () {
            return !!$('#base-url-banner').length;
        },

        performCheck: function () {
            if (this.isDisplayed()) {
                return;
            }
            var requestUrl = this.constructRequestUrl();
            var serverUrl = this.constructServerUrl();
            var baseUrl = parseUri(Meta.get('base-url'));

            var baseUrlErrorDisplayed = baseUrl.source !== requestUrl.source && this.showWrongBaseUrlFlag(baseUrl, requestUrl);
            if (!baseUrlErrorDisplayed && (serverUrl && serverUrl.source !== requestUrl.source)) {
                this.showWrongConfigFlag(requestUrl);
            }
        },

        showWrongBaseUrlFlag: function (baseUrl, requestUrl) {
            var title = "wrong.baseurl.title";
            var requestUrlLink = this.linkFor(requestUrl);
            var baseUrlLink = this.linkFor(baseUrl);
            var body = formatter.format("Jira\'\'s base URL is set to {0} but you are accessing Jira from {1}.",
                baseUrlLink,
                requestUrlLink
            ) + '<p>' + this.constructFlagLink('#', "Update Jira\'s base URL") + '</p>';
            var clickEvent = 'jira.base.url.plugin.banner.update';
            var closeEvent = 'no-match';
            var dismissalKey = 'com.atlassian.jira.baseurl';

            return this.showWarningFlag(title, body, clickEvent, closeEvent, dismissalKey, function (e) {
                e.preventDefault();
                BaseUrl.updateBaseUrl(requestUrl);
            });
        },

        showWrongConfigFlag: function (requestUrl) {
            var title = "Tomcat config is incorrect";
            var link = this.constructFlagLink('https://confluence.atlassian.com/x/LFsGO', "Troubleshoot");
            var body = "The Tomcat server.xml has an incorrect configuration:" + this.constructConfigProblems(requestUrl) + '<p>' + link + '</p>';
            var clickEvent = 'jira.base.url.plugin.banner.troubleshoot';
            var closeEvent = 'cant-check-proxy';
            var dismissalKey = 'com.atlassian.jira.proxyconfig';

            return this.showWarningFlag(title, body, clickEvent, closeEvent, dismissalKey);
        },

        showWarningFlag: function (title, body, clickEvent, closeEvent, dismissalKey, clickCallback) {
            if (this.isDisplayed()) {
                return false;
            }
            var flagElement = flag.showWarningMsg('', body, {dismissalKey: dismissalKey});
            if (!flagElement) {
                return false;
            }

            $flagElement = $(flagElement);

            $flagElement.find('#base-url-proxy-config-fix').click(function (e) {
                analytics.send({name: clickEvent});
                if (clickCallback) {
                    clickCallback(e);
                }
            });

            $flagElement.data('type', closeEvent);
            $flagElement.data('base-url-flag', true);
            $flagElement.data('openTime', Date.now());

            flagElement.addEventListener('aui-flag-close', BaseUrl.sendAnalyticsOnClose);

            analytics.send({
                name: 'jira.base.url.plugin.banner.open',
                data: {
                    type: $flagElement.data('type'),
                    openTime: $flagElement.data('openTime')
                }
            });
            return true;
        },

        sendAnalyticsOnClose: function (event) {
            var flagElement = event.target;
            var $flagElement = $(flagElement);

            if ($flagElement.data('base-url-flag') === false) {
                return;
            }

            analytics.send({
                name: 'jira.base.url.plugin.banner.close',
                data: {
                    type: $flagElement.data('type'),
                    flagOpenFor: Date.now() - $flagElement.data('openTime')
                }
            });

            flagElement.removeEventListener('aui-flag-close', BaseUrl.sendAnalyticsOnClose)
        },


        destroyBanner: function () {
            $flagElement.find('.aui-icon.icon-close').click();
        },

        updateBaseUrl: function (baseUrl) {
            SmartAjax.makeRequest({
                url: BaseUrl.jiraRestPath,
                type: "PUT",
                data: baseUrl.source,
                contentType: "application/json"
            }).done(function () {
                flag.showSuccessMsg('', formatter.format("Jira\'\'s base URL has been set to {0}.", BaseUrl.linkFor(baseUrl)));
                BaseUrl.destroyBanner();
            });
        },

        constructConfigProblems: function (requestUrl) {
            return '<p>' +
                this.constructConfigProblemItem('scheme', requestUrl.protocol) + '<br/>' +
                this.constructConfigProblemItem('proxyName', requestUrl.host) + '<br/>' +
                this.constructConfigProblemItem('proxyPort', BaseUrl.getPort(requestUrl)) +
                '</p>';
        },

        constructConfigProblemItem: function (subject, value) {
            return formatter.format("{0} should be {1}", '<strong>' + subject + '</strong>', '\'' + value + '\'');
        },

        constructFlagLink: function (href, linkText) {
            return '<a target="_blank" href="' + href + '"' + ' class="aui-button aui-button-link" id="base-url-proxy-config-fix">' + linkText + '</a>';
        },

        constructRequestUrl: function () {
            return parseUri(window.location.protocol + '//' + window.location.host + contextPath);
        },

        constructServerUrl: function () {
            var scheme = Meta.get('server-scheme');
            var serverPort = Meta.get('server-port');
            var port = ((scheme === 'https' && serverPort === '443') ||
                (scheme === 'http' && serverPort === '80')) ? '' : serverPort;
            return parseUri(scheme + '://' + Meta.get('server-name') +
                (port ? ':' + port : '') + contextPath);
        },

        linkFor: function (url) {
            return formatter.format('<a href="{0}">{0}</a>', url.source);
        },

        getPort: function(url){
            return url.port || (url.protocol === 'https' ? '443' : '80');
        }
    };


    return BaseUrl;
});
;
;
/* module-key = 'com.atlassian.jira.jira-baseurl-plugin:baseurl-lib', location = 'js/init-base-url-checker.js' */
require(['baseurl-checker', 'jquery'], function(BaseUrlProxyConfigCheck, $) {
    $(function () {
        BaseUrlProxyConfigCheck.performCheck();
    });
});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-analytics-tracker', location = 'includes/js/rapid/AnalyticsTracker.js' */
define("jira-agile/rapid/analytics-tracker",["jira/util/logger","underscore","jquery"],function(e,a,i){function t(e,i,t){if(a.isUndefined(e))throw new Error("You must specify a category");this.params={},this.params.category=e;var r=0;a.isUndefined(i)||(this.params.action=i,r++,a.isUndefined(t)||(this.params.label=t,r++)),this.requiredArgumentNames=["action","label","value"].slice(r),this.useAsync=!0}return t.prototype.setAsync=function(e){return this.useAsync=e,this},t.prototype.trigger=function(){this.requiredArgumentNames.length<arguments.length&&e.log("Warning: too many arguments passed in. Needed at most "+this.requiredArgumentNames.length+" but got "+arguments.length);for(var t=a.clone(this.params),r=0;r<arguments.length&&!a.isUndefined(this.requiredArgumentNames[r]);r++)t[this.requiredArgumentNames[r]]=arguments[r];this._validateParams(t);var n="gh.analytics.async";i(document).trigger(n,t)},t.prototype._validateParams=function(e){var i=["category","action","label"];a.each(i,function(i){a.isUndefined(e[i])||a.isString(e[i])?a.isUndefined(e[i])&&(e[i]=""):e[i]=e[i].toString()}),a.each(["category","action"],function(a){e[a]=e[a].replace(/\s+/g,"")}),a.isUndefined(e.value)||(e.value=parseInt(e.value,10),isNaN(e.value)&&(e.value=void 0))},t}),AJS.namespace("GH.AnalyticsTracker",null,require("jira-agile/rapid/analytics-tracker"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-help-analytics', location = 'includes/js/rapid/ui/help/HelpAnalytics.js' */
AJS.$(function(){var e=require("jira-agile/rapid/analytics-tracker"),r=function(r){return new e(r).setAsync(!1)};AJS.$("#gh_view_help").click(function(e){return r("gh.gethelp").trigger("usermenu","docs"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-enablement").click(function(e){return r("gh.myjirahome").trigger("usermenu","enabled"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-enablement-ondemand").click(function(e){return r("gh.myjirahome").trigger("usermenu","set"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-disablement-ondemand").click(function(e){return r("gh.myjirahome").trigger("usermenu","disable"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-set").click(function(e){return r("gh.myjirahome").trigger("usermenu","set"),n(AJS.$(this))}),AJS.$("#beta_gh\\.configuration\\.rapid\\.removal").click(function(e){var n=AJS.$(this),t=n.attr("checked")?"on":"off";return r("gh.labs.feature").trigger("rapid_removal",t),!0}),AJS.$(document).delegate("#js-classic-link_lnk","click",function(e){return r("gh.agile.menu").trigger("classic"),!0});var n=function(e){return"_blank"==e.attr("target")||(setTimeout('document.location = "'+e.attr("href")+'"',100),!1)}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-help-analytics', location = 'includes/js/rapid/Analytics.js' */
define("jira-agile/rapid/analytics",["jquery","underscore"],function(n,a){"use strict";function e(){n(document).on(l,function(n,a){i(a)})}function i(n){var e={},i=n.category;a.isUndefined(n.action)||(i=i+"."+n.action),a.isUndefined(n.label)||(e.label=n.label),a.isUndefined(n.value)||(e.value=n.value),AJS.trigger("analytics",{name:i,data:e})}GH.AnalyticsEnabled=!0;var l="gh.analytics.async";e();var t={};return t.isEnabled=function(){return GH.AnalyticsEnabled},t.setEnabled=function(n){return GH.AnalyticsEnabled=n},t}),AJS.namespace("GH.Analytics",null,require("jira-agile/rapid/analytics"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-globalissueoperations', location = 'includes/js/gh-globalissueoperations.js' */
define("jira-agile/gh-globalissueoperations",["jira/dialog/form-dialog","jira/dialog/dialog-register","jquery"],function(r,i,e){var a=require("jira-agile/rapid/analytics-tracker"),o=new a("gh.issueaction.gotorapidboard").setAsync(!1),n=r.extend({_performRedirect:function(r){o.trigger("direct"),window.location.href=r}}),t=new n({id:"gh-rapidboard-dialog",trigger:".issueaction-greenhopper-rapidboard-operation",ajaxOptions:function(){return i.getDefaultAjaxOptions.apply(this,arguments)}}),s=function(r,i){var a="",o=e(r);return o.hasClass("js-rapidboard-operation-sprint")?a="sprint.":o.hasClass("js-rapidboard-operation-issue")&&(a="issue."),a+=i};return{init:function(){e(document).on("simpleClick",".issueaction-greenhopper-rapidboard-operation",function(r){r.preventDefault();var i=s(r.currentTarget,"open");o.trigger(i),t.show()}),e(document).on("simpleClick",".js-select-rapidboard",function(r){var i=s(r.currentTarget,"chosen");o.trigger(i)})}}}),require("jira-agile/gh-globalissueoperations").init();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-notification', location = 'includes/js/rapid/ui/notification/Notification.soy' */
// This file was automatically generated from Notification.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.notification.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.notification == 'undefined') { GH.tpl.rapid.notification = {}; }


GH.tpl.rapid.notification.renderErrorMessages = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.errors.length > 1) {
    output += '<ul>';
    var errorList6 = opt_data.errors;
    var errorListLen6 = errorList6.length;
    for (var errorIndex6 = 0; errorIndex6 < errorListLen6; errorIndex6++) {
      var errorData6 = errorList6[errorIndex6];
      output += '<li>' + ((errorData6.noAutoescape) ? soy.$$filterNoAutoescape(errorData6.message) : soy.$$escapeHtml(errorData6.message)) + '</li>';
    }
    output += '</ul>';
  } else {
    var errorList18 = opt_data.errors;
    var errorListLen18 = errorList18.length;
    for (var errorIndex18 = 0; errorIndex18 < errorListLen18; errorIndex18++) {
      var errorData18 = errorList18[errorIndex18];
      output += '<p>' + ((errorData18.noAutoescape) ? soy.$$filterNoAutoescape(errorData18.message) : soy.$$escapeHtml(errorData18.message)) + '</p>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderErrorMessages.soyTemplateName = 'GH.tpl.rapid.notification.renderErrorMessages';
}


GH.tpl.rapid.notification.renderContextualErrors = function(opt_data, opt_ignored) {
  var output = '';
  var errorList29 = opt_data.errors;
  var errorListLen29 = errorList29.length;
  for (var errorIndex29 = 0; errorIndex29 < errorListLen29; errorIndex29++) {
    var errorData29 = errorList29[errorIndex29];
    output += '<div class="ghx-error">' + soy.$$escapeHtml(errorData29.message) + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderContextualErrors.soyTemplateName = 'GH.tpl.rapid.notification.renderContextualErrors';
}


GH.tpl.rapid.notification.renderMessageHolder = function(opt_data, opt_ignored) {
  return '<div class="ghx-body-warning">' + soy.$$escapeHtml(AJS.format('This version of {0} is not a supported browser.',opt_data.browser)) + ' <a href="' + soy.$$escapeHtml(opt_data.docsUrl) + '">' + soy.$$escapeHtml('See our documentation for the list of supported browsers.') + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderMessageHolder.soyTemplateName = 'GH.tpl.rapid.notification.renderMessageHolder';
}


GH.tpl.rapid.notification.renderAuiMessage = function(opt_data, opt_ignored) {
  return '<div class="aui-message ' + soy.$$escapeHtml(opt_data.type) + ((opt_data.className) ? ' aui-message-' + soy.$$escapeHtml(opt_data.className) : '') + '">' + ((opt_data.title) ? '<p class="title">' + ((opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + '<strong>' + soy.$$escapeHtml(opt_data.title) + '</strong></p>' : '') + ((opt_data.message) ? '<p>' + ((! opt_data.title && opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + ((opt_data.messageHtml) ? soy.$$filterNoAutoescape(opt_data.message) : soy.$$escapeHtml(opt_data.message)) + '</p>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderAuiMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderAuiMessage';
}


GH.tpl.rapid.notification.renderGHtvMessage = function(opt_data, opt_ignored) {
  return '<div id="ghx-update-message" class="ghx-tv-message"><p>' + soy.$$escapeHtml('This board has been updated') + ': <a href="" class="js-refresh-now" data-track-click="gh.rapidboard.updated.message.refresh.click">' + soy.$$escapeHtml('Refresh') + '</a><span class="ghx-divider">&bull;</span><a href="" class="js-ignore-refresh" data-track-click="gh.rapidboard.updated.message.cancel.click">' + soy.$$escapeHtml('Ignore') + '</a></p></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderGHtvMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderGHtvMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-notification', location = 'includes/js/rapid/ui/notification/Notification.js' */
define("jira-agile/rapid/ui/notification",["require"],function(e){"use strict";function a(e,a,r){return s(i({body:e,title:r.showTitle?a:void 0,close:r.autoHide?"auto":r.closeable?"manual":"never",type:r.type}))}function s(e){var a=r(e).find(".title");return""===r.trim(a.text())&&a.remove(),e}var r=e("jquery"),t=e("underscore"),i=e("aui/flag"),n=e("jira/util/logger"),o=e("jira/analytics"),d={showErrors:function(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=arguments[2],r="Error",t=GH.tpl.rapid.notification.renderErrorMessages(e);d.showError(r,t,a,s)},showError:function(e,s){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments[3],n={autoHide:!1,closeable:r,showTitle:!0,type:"error"};i=t.extend({},n,i),a(s,e,i)},showWarnings:function(e,s){var r={preRendered:!1,autoHide:!0,closeable:!0,showTitle:!1,type:"warning"};s=t.extend({},r,s);var i=void 0;i=s.preRendered?e:GH.tpl.rapid.notification.renderErrorMessages({errors:e}),a(i,"Warning",s)},showWarning:function(e){d.showWarnings(e,{preRendered:!0})},showSuccess:function(e,s){var r={closeable:!0,autoHide:!0,showTitle:!1,type:"success"};s=t.extend({},r,s),a(e,null,s)},clear:function(){r("#aui-flag-container").empty()},handleDateFormatMismatchError:function(e){var a='<a href="'+GH.Ajax.CONTEXT_PATH+'/secure/admin/AdvancedApplicationProperties.jspa">';a+="Advanced Settings",a+="</a>";var s=AJS.format("It appears your Jira date format settings are misconfigured. Please check the {0} and ensure that \'\'jira.date.time.picker.java.format\'\' and \'\'jira.date.time.picker.javascript.format\'\' have matching output.",a);d.showWarnings(s,{autoHide:!1,preRendered:!0})},auiMessage:function(){n.warn("[deprecated] GH.Notification.auiMessage has no effect")},showIssueMessage:function(e){var a=JIRA.SessionStorage,s=null,r=null;e||(e=a.getItem("selectedIssueId")),e&&(r=a.getItem("selectedIssueKey"),s=a.getItem("selectedIssueMsg"),d.showIssueMessageImpl(e,s,r)),a.removeItem("selectedIssueId"),a.removeItem("selectedIssueKey"),a.removeItem("selectedIssueMsg")},showIssueMessageImpl:function(e,a,s){a||(a="thanks_issue_updated");var r=AJS.params[a];r&&s&&(r=AJS.format(r,s),d.showSuccess(r))},addPageLoadMessage:function(e,a){var s=GH.storage.get("gh.pageloadmessages",!0)||[];s.push({message:e,type:a||"success"}),GH.storage.put("gh.pageloadmessages",s,!0)},_displayPageLoadMessages:function(){var e=GH.storage.get("gh.pageloadmessages",!0);if(e){var a=e[0].type,s="";switch(t.each(e,function(e){s.length>0&&(s+="<br>"),s+=e.message}),a){case"warning":d.showWarning(s);break;case"success":default:d.showSuccess(s)}GH.storage.put("gh.pageloadmessages",null,!0)}},showBoardUpdatedMessage:function(){d.triggerShowMessageAnalytics(),d.clearBoardUpdatedMessage();var e=r.Deferred(),a=r(GH.tpl.rapid.notification.renderGHtvMessage()).appendTo("#gh");return a.data("deferred",e),a.find(".js-refresh-now").click(function(s){s.preventDefault(),a.removeData("deferred"),d.clearBoardUpdatedMessage(),e.resolve()}),a.find(".js-ignore-refresh").click(function(e){e.preventDefault(),d.clearBoardUpdatedMessage()}),e.promise()},clearBoardUpdatedMessage:function(){var e=r("#ghx-update-message");if(e.length){var a=e.data("deferred");a&&a.reject&&a.reject(),e.remove()}},isBoardUpdatedMessageVisible:function(){var e=r("#ghx-update-message");return e.length>0},triggerShowMessageAnalytics:function(){o.send({name:"gh.rapidboard.updated.message.show",properties:{initial:!d.isBoardUpdatedMessageVisible()}})}};return d}),AJS.namespace("GH.Notification",null,require("jira-agile/rapid/ui/notification")),AJS.$(document).ready(function(){GH.Notification.showIssueMessage(),GH.storage&&GH.Notification._displayPageLoadMessages()});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/gh-namespace.js' */
AJS.namespace("GH.namespace",null,AJS.namespace);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/initFieldPickers.js' */
!function(e){function n(n){e(".js-epic-picker",n).each(function(){var n=e(this),i=new JIRA.EpicPicker({element:n});e(document).trigger(JIRA.EpicPicker.READY_EVENT,i)})}function i(n){e(".js-sprint-picker",n).each(function(){var n=e(this),i=new JIRA.SprintPicker({element:n});e(document).trigger(JIRA.SprintPicker.READY_EVENT,i)})}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,c,t){t!==JIRA.CONTENT_ADDED_REASON.panelRefreshed&&(n(c),i(c))})}(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/EpicPicker.js' */
JIRA.EpicPicker=AJS.SingleSelect.extend({init:function(e){function r(e){var r=!p();return{searchQuery:e,projectKey:AJS.$(g).attr("data-project-key"),maxResults:100,hideDone:r}}function t(e,r,t,i){e=AJS.escapeHTML(String(e)),r=AJS.escapeHTML(String(r)),i=AJS.escapeHTML(String(i));var n=i.toUpperCase(),o=e.toUpperCase(),a=r.toUpperCase();n=(n+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1");var c,s=new RegExp("("+n+")","gi"),l=o.search(s);l>-1&&(c=e.slice(l,l+i.length),e=e.replace(c,"<em>"+c+"</em>")),l=a.search(s),l>-1&&(c=r.slice(l,l+i.length),r=r.replace(c,"<em>"+c+"</em>"));var p=t?" &#8226; "+"Done":"";return e+" - <span class='epic-menu-metadata'>("+r+p+")</span>"}function i(e){if(!e||!e.epicLists||0===e.total)return[];for(var r=[],t=d.getQueryVal(),i=0,a=0;a<e.epicLists.length;a++){var c=e.epicLists[a],s=c.epicNames,l=o(a+1,c.listDescriptor);s.length>0&&(_.each(s,function(e){l.addItem(n(e,t))}),r.push(l)),i+=s.length}if(i>0){var h=new AJS.GroupDescriptor({weight:0,showLabel:!1,items:[new AJS.ItemDescriptor({label:t,highlighted:!0,styleClass:"ghx-epic-menu-header",customItem:!0,html:"<li><h5>"+AJS.format("Showing {0} of {1} matching epics",i,e.total)+"</h5><label for='chkShowDoneEpic'><input type='checkbox' id='chkShowDoneEpic'"+(p()?" checked":"")+">"+"Show done epics"+"</label></li>"})]});r.unshift(h)}return r}function n(e,r){var i=e.key,n=e.name,o=e.isDone,a=t(n,i,o,r);return new AJS.ItemDescriptor({value:"key:"+i,fieldText:n,label:a,html:a,allowDuplicate:!1,highlighted:!0})}function o(e,r){return new AJS.GroupDescriptor({weight:e,label:r,replace:!0})}function a(e,r,t){var i=AJS.$(g);i.siblings(".ghx-error").remove(),i.before(GH.tpl.rapid.notification.renderAuiMessage({message:"Error"+": "+t,type:"error",className:"ghx-error aui-ss"}))}function c(e){var r="",t=!1;return e&&e.length>0&&(r=AJS.format("Epic with key \'\'{0}\'\' does not exist.",e),t=!0),{isError:t,message:r}}function s(e){var r,t;u.apply(d,[e]),e=e||AJS.$.trim(d.$field.val()),t=d.model.getDescriptor(e),!t&&d.$container.hasClass("aui-ss-editing")&&(r=c(e),r.isError?(d.options.errorMessage=r.message,d.showErrorMessage(e)):d.hideErrorMessage())}function l(){d._super(e),u=d.handleFreeInput,d.handleFreeInput=s;var r=require("jira/ajs/layer/inline-layer");d.dropdownController.bind(r.EVENTS.show,function(e,r){r.off("click",'.ghx-epic-menu-header label[for="chkShowDoneEpic"]',h),r.on("click",'.ghx-epic-menu-header label[for="chkShowDoneEpic"]',h)})}function p(){return"true"===localStorage.getItem("gh.epicpicker.showdone")}function h(e){e.preventDefault();var r=!p();try{localStorage.setItem("gh.epicpicker.showdone",r)}catch(e){}return d.$field.click(),!1}var u,g=e.element,d=this,m=require("wrm/context-path");AJS.$.extend(e,{submitInputVal:!0,showDropdownButton:!0,removeDuplicates:!0,ajaxOptions:{url:m()+"/rest/greenhopper/1.0/epics",query:!0,data:r,formatResponse:i,error:a}});var f=this.setSelection;this.setSelection=function(e,r){e.properties.customItem||f.apply(this,arguments)},l()}}),JIRA.EpicPicker.READY_EVENT="gh.epic-picker.ready";;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintPicker.js' */
JIRA.SprintPicker=AJS.SingleSelect.extend({init:function(e){function n(e){var n=f.apply(this,arguments);return n.find("a").append(GH.tpl.customfields.sprintpicker.renderSuggestionMeta(e.properties)),n}function t(e){var n,t=this.getSelectedDescriptor();e||t||p(null),o(),this.hideErrorMessage(),n=t?i(t):r(e),n.message&&(this.options.errorMessage=n.message,h.apply(this,arguments),this.$errorMessage.addClass("inline-edit-error")),n.needsScopeChangeWarning&&s()}function r(e){var n=null,t=!1;return e&&e.length>0?v?(n=AJS.format("{0} is not a valid sprint name. This issue will be returned to the backlog.",e),v===m.ACTIVE&&(t=!0)):n=AJS.format("{0} is not a valid sprint name.",e):v===m.ACTIVE&&(t=!0),{message:n,needsScopeChangeWarning:t}}function i(e){var n=!1;return v===m.ACTIVE?n=!!u()||I!=e.properties.value:v===m.FUTURE?e.properties.stateKey===m.ACTIVE&&(n=!0):v||e.properties.stateKey===m.ACTIVE&&(n=!0),{message:null,needsScopeChangeWarning:n}}function s(){if(!S){u()||(S=AJS.$(GH.tpl.rapid.notification.renderAuiMessage({type:"warning",className:"ghx-sprint-picker-scope-warning",icon:!0,title:"Sprint scope will be affected by this action."})));var e=J.$container.closest(".inline-edit-fields");e.size()>0?u()?(S=AJS.$('<div class="ghx-estimate-scope-warning"></div>'),S.text("Sprint scope will be affected by this action."),e.find(".field-group").append(S)):e.closest(".editable-field").append(S):(u()&&(S=AJS.$(GH.tpl.rapid.notification.renderAuiMessage({type:"warning",className:"ghx-sprint-picker-scope-warning",icon:!0,title:"Sprint scope will be affected by this action."}))),J.$container.closest(".field-group").append(S))}S.show()}function o(){S&&(S.remove(),S=null)}function a(e){if(!e.suggestions&&!e.allMatches)return[];var n=new AJS.GroupDescriptor({weight:0,label:"Suggestions"}),t=new AJS.GroupDescriptor({weight:1,label:"All sprints"});return _.each(l(e.suggestions),function(e){n.addItem(g(e,!0))}),_.each(l(e.allMatches),function(e){t.addItem(g(e,!1))}),[n,t]}function g(e,n){var t=AJS.escapeHTML(String(e.name));return new AJS.ItemDescriptor({value:e.id.toString(),label:e.name,html:t,stateKey:e.stateKey,boardName:e.boardName,allowDuplicate:!1,isSuggestion:n})}function l(e){return _.sortBy(e,function(e){return e.name.toLowerCase()})}function p(e){GH.SprintConfig&&AJS.$(GH).trigger("QuickEdit.fieldChange",{fieldId:GH.SprintConfig.getSprintFieldId(),fieldChangeData:{original:I,updated:e?e.properties.value:null}})}function d(){if(J._super(e),f=J.listController._renders.suggestion,h=J.showErrorMessage,J.listController._renders.suggestion=n,J.showErrorMessage=t,u()){var r=J.$container.closest(".inline-edit-fields"),i=r.size()>0;if(i){var s=w.parent().find("input");s.on("focus",function(){J.showErrorMessage()})}}w.bind("selected",function(e,n,t){u()&&i||t.showErrorMessage(t.getQueryVal()),p(n),J.showErrorMessage()}),J.suggestionsHandler=new x(J.options,J.model)}function c(e,n,t){var r=AJS.$(w);r.siblings(".ghx-error").remove(),r.before(GH.tpl.rapid.notification.renderAuiMessage({message:"Error"+": "+t,type:"error",className:"ghx-error aui-ss"}))}function u(){return!(!GH||!GH.DetailsObjectFactory)}var f,h,S,m={ACTIVE:"ACTIVE",FUTURE:"FUTURE",CLOSED:"CLOSED"},A=10,w=e.element,v=w.data("saved-state"),I=w.data("saved-id"),J=this,x=AJS.SelectSuggestHandler.extend({formatSuggestions:function(e,n){return e=this._super(e,n),0===n.length&&e[e.length-1].footerText("Start typing for sprints."),e}}),E=require("wrm/context-path");AJS.$.extend(e,{submitInputVal:!1,showDropdownButton:!0,removeOnUnSelect:!1,maxInlineResultsDisplayed:A,ajaxOptions:{url:E()+"/rest/greenhopper/1.0/sprint/picker",query:!0,formatResponse:a,error:c}}),d()}}),JIRA.SprintPicker.READY_EVENT="gh.sprint-picker.ready";;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintPicker.soy' */
// This file was automatically generated from SprintPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.customfields.sprintpicker.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.customfields == 'undefined') { GH.tpl.customfields = {}; }
if (typeof GH.tpl.customfields.sprintpicker == 'undefined') { GH.tpl.customfields.sprintpicker = {}; }


GH.tpl.customfields.sprintpicker.renderSuggestionMeta = function(opt_data, opt_ignored) {
  return '' + ((opt_data.boardName && ! opt_data.isSuggestion) ? '<span class=\'ghx-sprint-picker-meta\'> (' + GH.tpl.customfields.sprintpicker.renderMetaWithBoardName(opt_data) + ')</span>' : '<span class=\'ghx-sprint-picker-meta\'> (' + GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName(opt_data) + ')</span>');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintpicker.renderSuggestionMeta.soyTemplateName = 'GH.tpl.customfields.sprintpicker.renderSuggestionMeta';
}


GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml('Active sprint') : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml('Future sprint') : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName.soyTemplateName = 'GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName';
}


GH.tpl.customfields.sprintpicker.renderMetaWithBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml(AJS.format('Active sprint in {0}',opt_data.boardName)) : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml(AJS.format('Future sprint in {0}',opt_data.boardName)) : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintpicker.renderMetaWithBoardName.soyTemplateName = 'GH.tpl.customfields.sprintpicker.renderMetaWithBoardName';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintMultiselect.js' */
JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,t){function n(e){var t=new AJS.GroupDescriptor({weight:0,label:"Suggestions",items:_.map(e.suggestions,s)}),n=new AJS.GroupDescriptor({weight:1,label:"All sprints",items:_.map(e.allMatches,s)});return[t,n]}function s(e){e.date=moment(e.date,"YYYY-MM-DDTHH:mm:ssZ").format("LL");var t=GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta(e);return new AJS.ItemDescriptor({value:e.id,label:e.name,html:t,title:GH.tpl.customfields.sprintmultiselect.renderTooltip(e),date:e.date,boardName:e.boardName,stateKey:e.stateKey,highlighted:!0,allowDuplicate:!1})}AJS.$(".js-sprint-checkboxmultiselect",t).each(function(){var e=new AJS.CheckboxMultiSelect({element:this,maxInlineResultsDisplayed:5,content:"ajax",removeOnUnSelect:!0,ajaxOptions:{url:AJS.contextPath()+"/rest/greenhopper/1.0/sprint/picker",error:function(){e._setSuggestions([])},data:{excludeCompleted:!1},query:!0,formatResponse:n},suggestionsHandler:GH.SprintSuggestHandler})})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintMultiselect.soy' */
// This file was automatically generated from SprintMultiselect.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.customfields.sprintmultiselect.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.customfields == 'undefined') { GH.tpl.customfields = {}; }
if (typeof GH.tpl.customfields.sprintmultiselect == 'undefined') { GH.tpl.customfields.sprintmultiselect = {}; }


GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta = function(opt_data, opt_ignored) {
  return '<div>' + soy.$$escapeHtml(opt_data.name) + '</div><div><span class=\'ghx-sprint-multiselect-meta\'> ' + ((opt_data.boardName) ? GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName(opt_data) : GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName(opt_data)) + '</span></div>';
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta';
}


GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml('Active') : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml('Future') : (opt_data.stateKey == 'CLOSED') ? soy.$$escapeHtml('Closed') : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName';
}


GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml(AJS.format('Active \xb7 {0}',opt_data.boardName)) : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml(AJS.format('Future \xb7 {0}',opt_data.boardName)) : (opt_data.stateKey == 'CLOSED') ? soy.$$escapeHtml(AJS.format('Closed \xb7 {0}',opt_data.boardName)) : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName';
}


GH.tpl.customfields.sprintmultiselect.renderTooltip = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml(AJS.format('Started on {0}',opt_data.date)) : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml('Future') : (opt_data.stateKey == 'CLOSED') ? soy.$$escapeHtml(AJS.format('Closed on {0}',opt_data.date)) : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderTooltip.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderTooltip';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintSuggestHandler.js' */
define("includes/js/field/sprint-suggest-handler",["jira/ajs/select/suggestions/checkbox-multi-select-suggest-handler"],function(e){var t=function(e){_.each(e,function(e){var t=JSON.parse(e.properties.meta);t.date=moment(t.date).format("LL"),e.properties.title=GH.tpl.customfields.sprintmultiselect.renderTooltip(t),e.properties.html=GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta(t)})};return e.extend({formatSuggestions:function(e,r){var s=this.model.getDisplayableSelectedDescriptors();t(s);var i=function(e){var t;for(t in s)if(s[t].properties.value===e.properties.value.toString())return!1;return!0};return e=_.map(e,function(e){var t=_.filter(e.properties.items,i);return e.properties.items=t,e}),this._super(e,r)}})}),AJS.namespace("GH.SprintSuggestHandler",null,require("includes/js/field/sprint-suggest-handler"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/EpicLinkMultiselect.js' */
require(["require"],function(e){function t(e){return 0!==e.indexOf("project")?"":n(e).trim()}function n(e){function t(e){var t=e.match(/\bproject\s*=\s*(\S+)/i);return t?t[1]:null}function n(e){var t=e.match(/\bproject\s+in\s+\((.*?)\)/i);return t?t[1]:null}return t(e)||n(e)}var i=e("jquery"),r=e("underscore");JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,n){var s=i("#jql",this).val();n.find(".js-epiclink-checkboxmultiselect").each(function(){var e=new AJS.CheckboxMultiSelect({element:this,matchingStrategy:"(^|.*?(.*))({0})(.*)",maxInlineResultsDisplayed:5,content:"ajax",removeOnUnSelect:!0,ajaxOptions:{url:AJS.contextPath()+"/rest/greenhopper/1.0/epics",error:function(){e._setSuggestions([])},data:{searchQuery:"",projectKey:t(s),filterEpicsByGivenProjects:!0,maxResults:100},query:!0,minQueryLength:0,formatResponse:function(e){var t=[];if(t.push(new AJS.GroupDescriptor({weight:1,items:[new AJS.ItemDescriptor({highlighted:!0,label:"No Epic Link",value:"EMPTY",title:"EMPTY"})]})),!e||!e.epicLists||0===e.total)return t;for(var n=0;n<e.epicLists.length;n++){var i=e.epicLists[n],s=i.epicNames,c=new AJS.GroupDescriptor({label:i.listDescriptor,weight:n});s.length>0&&(r.each(s,function(e){c.addItem(new AJS.ItemDescriptor({highlighted:!0,label:e.name+" - ("+e.key+")",value:e.key,title:e.key}))}),t.push(c))}return t}},suggestionsHandler:GH.EpicLinkSuggestHandler})})})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/EpicLinkSuggestHandler.js' */
define("includes/js/field/epic-link-suggest-handler",["jira/ajs/select/suggestions/checkbox-multi-select-suggest-handler"],function(e){return e.extend({formatSuggestions:function(e,r){var i=this.model.getDisplayableSelectedDescriptors(),t=function(e){var r;for(r in i)if(i[r].properties.value===e.properties.value.toString())return!1;return!0};return e=_.map(e,function(e){var r=_.filter(e.properties.items,t);return e.properties.items=r,e}),this._super(e,r)}})}),AJS.namespace("GH.EpicLinkSuggestHandler",null,require("includes/js/field/epic-link-suggest-handler"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:project-template-resources', location = '/projecttemplates/soy/ProjectTemplates.soy' */
// This file was automatically generated from ProjectTemplates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.projecttemplates.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.projecttemplates == 'undefined') { GH.tpl.projecttemplates = {}; }


GH.tpl.projecttemplates.kanbanInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: 'Use this project to optimise the flow of work in your development project. Add constraints to work-in-progress, analyze how long it takes to complete issues, find bottlenecks in your process, and more. This project includes a Kanban board, a basic Agile workflow and issue type configuration, which you can change later on.', extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon story"></span><span class="issuetype-name">' + soy.$$escapeHtml('Story') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml('Epic') + '</span></span></li>', workflowScreenshotClass: 'kanban-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.kanbanInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.kanbanInfoPageJira7';
}


GH.tpl.projecttemplates.scrumInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: 'Use this project to manage your Agile development work. Create a backlog, organise work into sprints, check progress using reports, and more. This project includes a Scrum board, a basic Agile workflow and issue type configuration, which you can change later on.', extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon story"></span><span class="issuetype-name">' + soy.$$escapeHtml('Story') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml('Epic') + '</span></span></li>', workflowScreenshotClass: 'scrum-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.scrumInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.scrumInfoPageJira7';
}


GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: 'Use this project to work on new features for your product and also track any bugs. This project provides you with a basic workflow and issue type configuration, which you can change later on.', extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon improvement"></span><span class="issuetype-name">' + soy.$$escapeHtml('Improvement') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon newfeature"></span><span class="issuetype-name">' + soy.$$escapeHtml('New Feature') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml('Epic') + '</span></span></li>', workflowScreenshotClass: 'basic-development-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7';
}


GH.tpl.projecttemplates.templateInfoDialog = function(opt_data, opt_ignored) {
  return '<div><div class="top-panel"><p>' + soy.$$escapeHtml(opt_data.description) + '</p></div><div class="left-panel"><h6>' + soy.$$escapeHtml('Issue Types') + '</h6><ul class="project-template-issuetype-list" ><li><span class="issuetype-list-label"><span class="issuetype-icon bug"></span><span class="issuetype-name">' + soy.$$escapeHtml('Bug') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon task"></span><span class="issuetype-name">' + soy.$$escapeHtml('Task') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon subtask"></span><span class="issuetype-name">' + soy.$$escapeHtml('Sub-task') + '</span></span></li>' + soy.$$filterNoAutoescape(opt_data.extraIssueTypes) + '</ul></div><div class="right-panel"><h6>' + soy.$$escapeHtml('Workflow') + '</h6><div class="workflow ' + soy.$$escapeHtml(opt_data.workflowScreenshotClass) + '"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.templateInfoDialog.soyTemplateName = 'GH.tpl.projecttemplates.templateInfoDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-globalkeyboardshortcuts', location = 'includes/js/gh-globalkeyboardshortcuts.js' */
define("jira-agile/gh-globalkeyboardshortcuts",["jira-agile/rapid/ui/notification","jira/ajs/ajax/smart-ajax","jira/data/session-storage","jira/issuenavigator/issue-navigator/shortcuts","jira/issue","jira/issuenavigator/issue-navigator","jira/dialog/dialog","jquery","jira/util/browser"],function(e,s,o,t,a,i,n,r,u){var c={},d=require("wrm/context-path");return c.findSelectedIssueId=function(){var e;return i&&i.getSelectedIssueId&&(e=i.getSelectedIssueId()),!e&&a&&a.getIssueId&&(e=a.getIssueId()),e},c.goToAgile=function(){var e="/secure/RapidBoard.jspa",s=d();s&&(e=s+e),window.location.href=e},c.followLink=function(e){var s=r(e);s.length>0&&("a"===s[0].nodeName.toLowerCase()||"link"===s[0].nodeName.toLowerCase())&&(s.click(),window.location.href=s.attr("href"))},c.sendToTop=function(e,o){if(window.GH&&GH.RapidBoard&&GH.Shortcut&&GH.Shortcut.sendToTop)return GH.Shortcut.sendToTop(e),void c.closeDialogAndPopMessage();if("Action"==e){var t=o||c.findSelectedIssueId(),a=d()||"";s.makeRequest({type:"post",contentType:"application/json",url:a+"/rest/greenhopper/1.0/rank/global/first",data:JSON.stringify({issueId:t}),success:c.handleRankSuccess}),r(document).trigger("gh.global.rankissues",{action:"rankToTop"+(e?e:""),count:1})}},c.sendToBottom=function(e,o){if(window.GH&&GH.RapidBoard&&GH.Shortcut&&GH.Shortcut.sendToBottom)return GH.Shortcut.sendToBottom(e),void c.closeDialogAndPopMessage();if("Action"==e){var t=o||c.findSelectedIssueId(),a=d()||"";s.makeRequest({type:"post",contentType:"application/json",url:a+"/rest/greenhopper/1.0/rank/global/last",data:JSON.stringify({issueId:t}),success:c.handleRankSuccess}),r(document).trigger("gh.global.rankissues",{action:"rankToBottom"+(e?e:""),count:1})}},c.closeDialogAndPopMessage=function(){i.isNavigator()?u.reloadViaWindowLocation():(n&&n.current&&n.current.hide(),window.GH?(GH.RapidBoard&&e&&e.showIssueMessage&&e.showIssueMessage(),window.Boards&&window.Boards.refreshAll()):i&&t&&t.flashIssueRow&&t.flashIssueRow())},c.handleRankSuccess=function(e,s,o){c.storeSuccessMessage(e.issueId,e.issueKey,"thanks_issue_updated"),c.closeDialogAndPopMessage()},c.storeSuccessMessage=function(e,s,t){var a=o;try{a.setItem("selectedIssueId",e),a.setItem("selectedIssueKey",s),a.setItem("selectedIssueMsg",t)}catch(e){}},c}),require(["jquery","jira-agile/gh-globalkeyboardshortcuts"],function(e,s){e(document).delegate(".issueaction-greenhopper-rank-top-operation","click",function(o){o.preventDefault();var t=e(this).attr("data-issueid");s.sendToTop("Action",t)}),e(document).delegate(".issueaction-greenhopper-rank-bottom-operation","click",function(o){o.preventDefault();var t=e(this).attr("data-issueid");s.sendToBottom("Action",t)})}),AJS.namespace("gh.app.globalkeyboardshortcuts",null,require("jira-agile/gh-globalkeyboardshortcuts"));;
;
/* module-key = 'com.atlassian.jira.plugin.ext.bamboo:bamboo-soy-resources', location = 'templates/plugins/bamboo/components.soy' */
// This file was automatically generated from components.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.components.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.components == 'undefined') { bamboo.components = {}; }


bamboo.components.pageHeader = function(opt_data, opt_ignored) {
  return '' + aui.page.pageHeader({content: '' + ((opt_data.headerImageContent) ? aui.page.pageHeaderImage({content: opt_data.headerImageContent}) : '') + aui.page.pageHeaderMain({content: opt_data.headerMainContent}) + ((opt_data.headerActionsContent) ? aui.page.pageHeaderActions({content: opt_data.headerActionsContent}) : '')});
};
if (goog.DEBUG) {
  bamboo.components.pageHeader.soyTemplateName = 'bamboo.components.pageHeader';
}


bamboo.components.icon = function(opt_data, opt_ignored) {
  return '<span class="bamboo-icon bamboo-icon-' + soy.$$escapeHtml(opt_data.type) + '"' + ((opt_data.text && opt_data.showTitle) ? ' title="' + soy.$$escapeHtml(opt_data.text) + '"' : '') + '>' + ((opt_data.text) ? '<span>' + soy.$$escapeHtml(opt_data.text) + '</span>' : '') + '</span>';
};
if (goog.DEBUG) {
  bamboo.components.icon.soyTemplateName = 'bamboo.components.icon';
}


bamboo.components.buildDetail = function(opt_data, opt_ignored) {
  return '<dl><dt class="' + soy.$$escapeHtml(opt_data.keyClass) + '">' + soy.$$escapeHtml(opt_data.key) + '</dt><dd>' + soy.$$filterNoAutoescape(opt_data.value) + '</dd></dl>';
};
if (goog.DEBUG) {
  bamboo.components.buildDetail.soyTemplateName = 'bamboo.components.buildDetail';
}


bamboo.components.artifacts = function(opt_data, opt_ignored) {
  var output = '<ul id="shared-artifacts">';
  var artifactList42 = opt_data.artifacts;
  var artifactListLen42 = artifactList42.length;
  for (var artifactIndex42 = 0; artifactIndex42 < artifactListLen42; artifactIndex42++) {
    var artifactData42 = artifactList42[artifactIndex42];
    output += bamboo.components.artifactItem(soy.$$augmentMap(artifactData42, {id: artifactData42.name, url: artifactData42.link.href}));
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bamboo.components.artifacts.soyTemplateName = 'bamboo.components.artifacts';
}


bamboo.components.artifactItem = function(opt_data, opt_ignored) {
  return '<li>' + bamboo.components.icon({type: 'artifact-shared'}) + ' <a class="artifact-link" id="artifact-' + soy.$$escapeHtml(opt_data.id) + '" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.name) + '</a><span class="filesize">(' + soy.$$escapeHtml(opt_data.prettySizeDescription) + ')</span></li>';
};
if (goog.DEBUG) {
  bamboo.components.artifactItem.soyTemplateName = 'bamboo.components.artifactItem';
}


bamboo.components.labels = function(opt_data, opt_ignored) {
  var output = '<ul class="labels">';
  var labelList65 = opt_data.labels;
  var labelListLen65 = labelList65.length;
  for (var labelIndex65 = 0; labelIndex65 < labelListLen65; labelIndex65++) {
    var labelData65 = labelList65[labelIndex65];
    output += bamboo.components.labelItem(soy.$$augmentMap(labelData65, {url: opt_data.baseBambooUrl + '/browse/label/' + labelData65.name}));
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bamboo.components.labels.soyTemplateName = 'bamboo.components.labels';
}


bamboo.components.labelItem = function(opt_data, opt_ignored) {
  return '<li><a class="lozenge" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '"><span>' + soy.$$escapeHtml(opt_data.name) + '</span></a></li>';
};
if (goog.DEBUG) {
  bamboo.components.labelItem.soyTemplateName = 'bamboo.components.labelItem';
}


bamboo.components.errorResponseMessage = function(opt_data, opt_ignored) {
  return '' + bamboo.components.auiWarning({body: '' + ((opt_data.errorMessage.messageBody) ? '<p>' + soy.$$escapeHtml(opt_data.errorMessage.messageBody) + '</p>' : (opt_data.errorMessage.oauthCallback) ? '<p><a href="' + soy.$$filterNoAutoescape(opt_data.errorMessage.oauthCallback) + '&amp;redirectUrl=' + soy.$$filterNoAutoescape(opt_data.oAuthDanceReturnUrl) + '">' + soy.$$escapeHtml('Log in \x26 approve') + '</a></p>' : '<p>' + soy.$$escapeHtml(opt_data.errorMessage.message) + '</p>')});
};
if (goog.DEBUG) {
  bamboo.components.errorResponseMessage.soyTemplateName = 'bamboo.components.errorResponseMessage';
}


bamboo.components.auiWarning = function(opt_data, opt_ignored) {
  return '<div class="aui-message aui-message-warning warning">' + soy.$$filterNoAutoescape(opt_data.body) + '</div>';
};
if (goog.DEBUG) {
  bamboo.components.auiWarning.soyTemplateName = 'bamboo.components.auiWarning';
}
;
;
/* module-key = 'com.atlassian.whisper.atlassian-whisper-plugin:atlassian-whisper-bootstrap', location = '/js/bootstrap-init.js' */
require(["atlassian-whisper/bootstrap"],function(a){a()});;
;
/* module-key = 'com.atlassian.whisper.atlassian-whisper-plugin:atlassian-whisper-bootstrap', location = '/js/bootstrap.js' */
define("atlassian-whisper/bootstrap",["wrm/require"],function(a){return function(){var c=require("wrm/data").claim("com.atlassian.whisper.atlassian-whisper-plugin:atlassian-whisper-bootstrap.WhisperData");if(!c||c.hasMessages!==true){return}var b=function(){try{localStorage.setItem("hermes.config.delivery-url",AJS.contextPath()+"/rest/whisper/1/messages");localStorage.setItem("hermes.config.store-url",AJS.contextPath()+"/rest/whisper/1/properties")}catch(d){return}require(["atlassian-whisper/hermes-init"],function(e){e(c)},undefined,c.syncInit)};if(c.syncInit){b()}else{AJS.$(function(){a("wr!com.atlassian.whisper.atlassian-whisper-plugin:atlassian-whisper-hermes",b)})}}});;
;
/* module-key = 'com.atlassian.administration.atlassian-admin-quicksearch-jira:admin-quicksearch-webresources', location = 'com/atlassian/administration/quicksearch/jira/js/adminQuickNav.js' */
/**
 * Shifter group for admin search
 */
require([
    'jquery',
    'underscore',
    'jira/ajs/ajax/smart-ajax',
    'jira/shifter',
    'wrm/context-path'
], function (jQuery,
             _,
             SmartAjax,
             Shifter,
             contextPath) {
    Shifter.register(function () {
        var suggestionsDeferred = jQuery.Deferred();

        function formatItem(item) {
            return {
                label: item.label,
                value: item.linkUrl,
                keywords: item.aliases
            };
        }

        function getItemsInSection(section) {
            return _.map(section.items, formatItem).concat(_.map(section.sections, getItemsInSection));
        }

        function formatResponse(data) {
            return _.flatten(getItemsInSection(data));
        }

        SmartAjax.makeRequest({
            dataType: 'json',
            url: contextPath() + '/rest/adminquicksearch/latest/links/default'
        })
            .pipe(formatResponse)
            .done(function (suggestions) {
                suggestionsDeferred.resolve(suggestions);
            })
            .fail(function () {
                suggestionsDeferred.reject();
            });

        return {
            id: 'admin',
            name: "Administration",
            weight: 500,
            getSuggestions: function () {
                return suggestionsDeferred;
            },
            onSelection: function (value) {
                window.location = value;
                return jQuery.Deferred();
            }
        };
    });
});
;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'probe.js' */
!function(){var n,t,e,r,i,o,u,a,c,s,f,l,h,d,y,p,v,m,w;n=function(){return window}(),t=function(n){return!(!n.performance||!n.performance.now)}(n),e=[],r=function(n){return function(t){n.unshift({addReporter:t})}}(e),i=function(n){return function(t){for(;n.length;)t(n.splice(0,1)[0]);n.unshift=t,n.push=t}}(e),o=function(n,t){return function(e){n.push({end:{key:e.key,timestamp:t.performance.now()}})}}(e,n),u=function(n){return n.document}(n),a=function(n){return n.Promise}(n),c=function(){function n(){this._={}}var t=function(e){var r=e[0],i=e[1];i instanceof n?e.length>=3?Object.keys(i._).forEach(function(n){t([r,i._[n],n].concat(e.slice(2)))}):Object.keys(i._).forEach(function(n){t([r,i._[n],n])}):Array.isArray(i)&&r.apply(null,[i].concat(e.slice(2)))};n.prototype.forEach=function(n){t([n,this])},n.prototype.add=function(){for(var t=this,e=null,r=null,i=0;i<arguments.length;i++){if(r=arguments[i],i===arguments.length-1&&Array.isArray(t)){t.push(r);break}i<arguments.length-2&&!t._.hasOwnProperty(r)?t._[r]=new n:i!==arguments.length-2||t._.hasOwnProperty(r)||(t._[r]=[]),t=t._[r],e=r}};var e=function(n,t){if(0!==n.length){var r=n.pop(),i=r[0],o=r[1];i===t?e(n,i):o._.hasOwnProperty(t)&&delete o._[t],0===Object.keys(o).length&&e(n,i)}};return n.prototype.remove=function(){for(var n,t=!1,r=null,i=this,o=[[r,i]],u=null,a=0;a<arguments.length;a++)if(u=arguments[a],Array.isArray(i))n=i.indexOf(u),n>-1&&(i.splice(n,1),0===i.length&&o.length>1&&e(o,r),t=!0);else{if(!i._.hasOwnProperty(u))break;a===arguments.length-1&&(delete i._[u],0===Object.keys(i).length&&o.length>1&&e(o,r),t=!0),r=u,i=i._[u],o.push([r,i])}return t},n.prototype.get=function(n){return this._.hasOwnProperty(n)?this._[n]:[]},n}(),s=function(n,t,e,r){function i(n){return!n||null==n||"null"===n||"undefined"===n}function o(t,e,r){l||(c.observe(n,{attributes:!0,childList:!0,subtree:!0}),l=!0),s.add(t,e,r)}function u(t,e){var r=n.querySelectorAll(t);return r.length&&(i(e)||Array.prototype.every.call(r,function(n){return!n.querySelector(e)}))}function a(n,e){var r;n.forEach||(n=[n]),!i(e)&&Array.isArray(e)&&(e=e.join(", "));var a=new t(function(i,a){var c=[],f=[];n.forEach(function(n){var r,i;u(n,e)||(r=new t(function(t){o(n,e,t),i=function(){s.remove(n,e,t)},f.push(i)}),c.push(r))});var l=function(){f.forEach(function(n){n()})};t.all(c).then(l).then(i,a),r=function(){l(),a()}});return a.dismiss=r,a}var c,s,f=r.MutationObserver,l=!1;return f&&t?(s=new e,c=new f(function(){s.forEach(function(n,t,e){u(e,t)&&(n.forEach(function(n){n()}),s.remove(e,t))})}),a):void 0}(u,a,c,n),f=function(n){return!!n}(s),l=function(n){function t(){c(),n.body.classList.add(u)}function e(){function e(){n.body.classList.remove(u),n.removeEventListener(i,s),n.removeEventListener(o,c),r=null}if(r)return r;var c,s,f=!1;return r=new Promise(function(e,r){"visible"!==n.visibilityState?r():(s=function(){f=!0},c=function(n){n.animationName===a&&(f?r():e())},n.addEventListener(i,s),n.addEventListener(o,c),t())}),r.then(e,e),r}var r,i="visibilitychange",o="animationend",u="browser-metrics-visibility-test",a="browser-metrics-visibility-animation",c=function(){var t=n.createElement("style"),e=["."+u+" {","-webkit-animation-duration: 0.001s;","animation-duration: 0.001s;","-webkit-animation-name: "+a+";","animation-name: "+a+";","-webkit-animation-iteration-count: 1;","animation-iteration-count: 1;","}","@keyframes "+a+" {}","@-webkit-keyframes "+a+" {","from {}","to {}","}"].join("\n");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(n.createTextNode(e)),n.head.appendChild(t),c=function(){}};return e}(u),h=function(n,t,e,r,i){function o(n){return Array.isArray(n)||(n=[n]),n.map(function(n){return"string"==typeof n?{selector:n,hasNone:null}:n})}function u(n){return Array.isArray(n)||"string"==typeof n}function a(n){return u(n)&&(n={rules:n}),n.rules=o(n.rules),n.requirePaint="undefined"==typeof n.requirePaint?!1:n.requirePaint,n}return function(i,o){if(n){i=a(i);var u=function(){},c=new e(function(n,r){var o=[],a=i.rules.map(function(n){var e=new t(n.selector,n.hasNone);return o.push(function(){e.dismiss()}),e});u=function(){o.forEach(function(n){n()}),r()},e.all(a).then(function(n){}).then(n,r)});return c.cancel=u,i.requirePaint&&(c=c.then(r)),"function"==typeof o&&c.then(o),c}}}(f,s,a,l,n),d=function(n,t){function e(){return r}var r=!1;return n.addEventListener("DOMContentLoaded",function(){t.setTimeout(function(){r=!0})}),e}(u,n),y=function(n,t,e,r,i,o,u){function a(){c=null}var c;return function(o){var s="isInitial"in o?o.isInitial:i()===!1,f="threshold"in o?o.threshold:1e3,l="reporters"in o?o.reporters:[];r.push({start:{key:o.key,isInitial:s,threshold:f,timestamp:s?0:u.performance.now(),reporters:Array.isArray(l)?l:[l]}}),c&&(c.cancel(),a()),o.ready&&e&&(c=n(o.ready),c.then(function(){t({key:o.key})}).then(a,a))}}(h,o,f,e,d,a,n),p=function(n){return function(t){n.push({subscribe:t})}}(e),v=function(){return window}(),m=function(n){return n.performance}(v),w=function(n,t,e,r,i,o,u){var a=function(){};return u?{start:n?i:a,end:n?r:a,addReporter:n?t:a,delegateTo:n?e:a,subscribe:n?o:a}:void 0}(t,r,i,o,y,p,m),window["browser-metrics"]=w,window.define&&window.define("internal/browser-metrics",function(){return w})}();;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'internal/browser-metrics-aa-beacon.js' */
!function(){var e={};e=function(e){function n(e,n){Object.keys(n).forEach(function(r){e[r]=n[r]})}Object.defineProperty(e,"__esModule",{value:!0});var r,t=[],o=[];return e.addUrlCleaner=function(e){o.push(e)},e.cleanUrl=function(e){return o.reduce(function(n,r){var t=r(e);return t.length>n.length?t:n},"")},e.addReportMarshaller=function(e){t.push(e)},e.setEventQueue=function(e){r=e},e.beacon=function(e){var o={};t.forEach(function(r){var t=r(e);"object"==typeof t&&n(o,t)});var a={name:"browser.metrics.navigation",properties:o};(r||AJS.EventQueue).push(a)},e}(e),window["browser-metrics-aa-beacon"]=e,window.define&&window.define("internal/browser-metrics-aa-beacon",function(){return e})}();;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'loader.js' */
!function(){var n={},r={};r=function(n,r,i){function e(){t===u&&o&&(o(),o=null)}Object.defineProperty(n,"__esModule",{value:!0});var t=0,u=0,o=null,c={install:function(n){t+=1,n(function(){u+=1,e()})}};return r["browser-metrics-plugin"]=c,i.require(["wrc!browser-metrics-plugin.contrib"],function(){r.require(["internal/browser-metrics-plugin/collector"],function(n){o=function(){n.install()},e()})}),n}(r,n=window,n.WRM)}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-browser-metrics:sensors', location = 'sensors.js' */
require(["internal/browser-metrics","jira/util/events"],function(e,i){var a,o={},d={},t={};o=function(e,i,a){function o(){function e(e){return o.hasOwnProperty(e)?o[e]:null}var o={"bonfire_top_menu_dropdown-content":"jira.header.menu.capture","browse_link-content":"jira.header.menu.projects","find_link-content":"jira.header.menu.issues","greenhopper_menu-content":"jira.header.menu.agile","home_link-content":"jira.header.menu.dashboards","plugins-jira-webitem-main-content":"jira.header.menu.portfolio","servicedesk-section-content":"jira.header.menu.service-desk","system-admin-menu-content":"jira.header.menu.admin","system-help-menu-content":"jira.header.menu.help","user-options-content":"jira.header.menu.profile"};i.bind("aui-dropdown2-show-before",function(i){var o=i.target,d=e(o&&o.id);d&&a.start({key:d,isInitial:!1,threshold:250})}),i.bind("aui-dropdown2-show-after",function(i){var o=i.target,d=e(o&&o.id);d&&a.end({key:d})})}return e.applicationMenusSensorInit=o,e}(o,i,e),d=function(e){function i(e){var i;if(a.hasOwnProperty(e))return e;for(i=0;i<o.length;i++)if(e.match(o[i].pattern))return o[i].dialogId;return null}e.safeDialogId=i;var a=["about-dialog","add-basicuser-dialog","add-developer-dialog","add-field-configuration-dialog","add-field-configuration-scheme-dialog","add-field-dialog","add-field-screen-dialog","add-field-screen-scheme-dialog","add-incoming-mail-handler-dialog","add-issue-type-dialog","add-issue-type-field-configuration-association-dialog","add-issue-type-screen-scheme-configuration-association-dialog","add-issue-type-screen-scheme-dialog","add-new-issue-type-to-scheme-dialog","add-screen-scheme-item-dialog","add-subtask-type-dialog","add-workflow-dialog","add_workflowscheme-dialog","assign-dialog","assign-issue-types-dialog","assign-to-me-link-handler","attach-file-dialog","attach-screenshot-dialog","auditing-settings-dialog","clone-issue-dialog","comment-add-dialog","configure_wallboard_dialog","confluence-page-search-dialog","copy_classic default workflow-dialog","copy-filter-dialog","copy_jira-dialog","create-issue-dialog","create-issue-dialog.issueType","create-issue-dialog.projectId","create-request-dialog","create-service-desk-dialog","create-status-dialog","create-story-dialog","create-story-dialog.issueType","create-story-dialog.projectId","create-subtask-dialog","create-subtask-dialog.issueType","create-team-dialog","create_user-dialog","credits-dialog","delete-attachment-dialog","delete-comment-dialog","delete-dshboard","delete-filter-dialog","delete-issue-dialog","delete-issue-link-dialog","delete-log-work-dialog","delete-metric","delete-queue","delete-status-dialog","deleteuser_link-dialog","devstatus-branch-detail-dialog","devstatus-build-detail-dialog","devstatus-commit-detail-dialog","devstatus-cta-dialog","devstatus-deployment-detail-dialog","devstatus-pullrequest-detail-dialog","devstatus-review-detail-dialog","discard-draft-dialog","discard_draft_workflow-dialog","edit-attachments-dialog","edit-comment","editgroups_admin-dialog","editgroups_link-dialog","editgroups_sysadmin-dialog","edit-issue-dialog","edit-labels-dialog","edit-log-work-dialog","edit-status-dialog","edituser_link_admin-dialog","edit-workflow-dialog","gh-rapidboard-dialog","inline-issue-create-dialog","invite_user-dialog","issue-actions-dialog","issue-tab-error-dialog","jim-create-project-dialog","keyboard-shortcuts-dialog","link-issue-dialog","log-work-dialog","manage-attachment-dialog","metric-pre-save-dialog","modal-field-view","permission-helper-dialog","project-avatar-cropper","project-avatar-picker","project-config-details-project-category-dialog","project-config-project-edit-dialog","project-config-project-edit-lead-and-default-assignee-dialog","project-email-dialog","publish_draft_workflow-dialog","queue-dirty-edits","QuickCreateIssue.error","QuickCreateIssue.success","QuickCreateSubtask.error","QuickCreateSubtask.success","QuickEdit.error","QuickEdit.success","remote-jira-search-dialog","rename-filter-dialog","report-dirty-edits","save-filter-dialog","sd-add-default-value","sd-add-remove-agent-dialog","sd-remove-field-dialog","server-error-dialog","report-delete-confirm","tempo-add-hours-issue-dialog","tempo-add-internal-activity-form","tempo-core-medium-form","tempo-delete-form-dialog","tempo-grace-form","tempo-large-form","tempo-medium-form","tempo-move-form-dialog","tempo-pdf-form","tempo-small-form","tempo-split-form-dialog","tempo-user-settings-dialog","user-avatar-picker","user-defaults-edit-dialog","versionsMergeDialog","view-workflow-dialog","view-workflow-dialog-project-admin","view-workflow-dialog-workflow-schemes","wait-migrate-dialog","whereismycf-dialog","workflow-text-view"].reduce(function(e,i){return e[i]=!0,e},{}),o=[{dialogId:"component-delete-dialog",pattern:/^component-\d+-delete-dialog$/i},{dialogId:"version-delete-dialog",pattern:/^version-\d+-delete-dialog$/i},{dialogId:"workflow-transition-dialog",pattern:/^workflow-transition-\d+-dialog$/i}];return e}(d),t=function(e,i,a,o){function d(){i.bind("beforeShow",function(e,i){if("string"==typeof i){var d=(0,o.safeDialogId)(i);d&&a.start({key:"jira.dialog.open."+d,isInitial:!1,threshold:1e3})}}),i.bind("dialogContentReady",function(e,i){if("string"==typeof i.options.id){var d=(0,o.safeDialogId)(i.options.id);d&&a.end({key:"jira.dialog.open."+d})}})}return e.dialogsSensorInit=d,e}(t,i,e,d),a=function(e,i){(0,e.applicationMenusSensorInit)(),(0,i.dialogsSensorInit)()}(o,t)});;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.pattern.help', location = 'aui.chunk.97b0b8778b1dab612048--f0ebc3ce920a8bb3519d.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.pattern.help"],{EoRc:function(i,u,n){},H4sa:function(i,u,n){"use strict";n("FStl"),n("Q0fs"),n("nqD9"),n("0FWE"),n("VtiI"),n("EoRc")}},[["H4sa","runtime","aui.splitchunk.vendors--7da3927366","aui.splitchunk.b0831cc7d0","aui.splitchunk.572a8bf5cd","aui.splitchunk.d49cf794d2","aui.splitchunk.d925afe2c0","aui.splitchunk.d727dd207f","aui.splitchunk.7da3927366"]]]);
//# sourceMappingURL=aui.chunk.97b0b8778b1dab612048--f0ebc3ce920a8bb3519d.js.map;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:analytics', location = 'util/analytics.js' */
define("jira-help-tips/util/analytics",["jira/analytics"],function(t){"use strict";function e(t){return t=""+(t||""),t.replace(/\./g,"-")}function i(i,n){if(n&&n.attributes.id){var r={},a=e(n.attributes.id),s="";n.attributes.eventPrefix&&(s=n.attributes.eventPrefix,"."!==s.charAt(s.length-1)&&(s+=".")),r.name=s+"helptips."+a+"."+i,r.properties={},t.send(r)}}return{clean:e,send:i}});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager', location = 'js/HelpTipManager.js' */
define("jira-help-tips/feature/help-tip-manager",["require"],function(s){"use strict";var e=s("underscore"),i=s("jquery"),t=s("jira/jquery/deferred"),n=s("wrm/context-path"),r=s("wrm/data"),d=n()+"/rest/helptips/1.0/tips",u=r.claim("com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData");return{dismissedTipIds:[],sequences:[],loaded:new t,url:function(){return d},sync:function(s,e){var n=new t;return s||(s="get"),e||(e=null),"get"===s&&u&&u.dismissed?n.resolve(u.dismissed):i.ajax(this.url(),{type:s,dataType:"json",contentType:"application/json",data:e&&JSON.stringify(e),processData:!1}).done(function(s){n.resolve(s)}).fail(function(){n.reject()}),n.promise()},fetch:function(){var s=this.sync();return s.done(i.proxy(function(s){i.merge(this.dismissedTipIds,s),this.loaded.resolve()},this)),s.promise()},show:function(s){this.loaded.done(s)},dismiss:function(s){var e=s.attributes.id;e?(this.dismissedTipIds.push(e),this.sync("post",{id:e})):s._dismissed=!0},undismiss:function(s){var e=s.attributes.id;e?(this.dismissedTipIds.splice(i.inArray(e,this.dismissedTipIds),1),this.sync("delete",{id:e})):s._dismissed=!1},isDismissed:function(s){var e=s.attributes.id;return e?i.inArray(e,this.dismissedTipIds)>=0:s._dismissed},clearSequences:function(){this.sequences=[]},hideSequences:function(){e.each(this.sequences,function(s){s.view.dismiss()})},showSequences:function(){if(!this._showStarted){var s=this,t=0;this._showStarted=!0,i.when(this.loaded).done(function(){s.sequences.sort(function(s,e){return s.attributes.weight-e.attributes.weight}),s.sequences=e.filter(s.sequences,function(i){var n=-1===e.indexOf(s.dismissedTipIds,i.attributes.id);return n&&(i.attributes.position=t++),n}),s.sequences.length>0&&(e.last(s.sequences).attributes.showCloseButton=!0,s.sequences[0].show({force:!0})),s._showStarted=!1})}}}});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip', location = 'templates/HelpTip.soy' */
// This file was automatically generated from HelpTip.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace AJS.Templates.HelpTip.
 */

if (typeof AJS == 'undefined') { var AJS = {}; }
if (typeof AJS.Templates == 'undefined') { AJS.Templates = {}; }
if (typeof AJS.Templates.HelpTip == 'undefined') { AJS.Templates.HelpTip = {}; }


AJS.Templates.HelpTip.tipContent = function(opt_data, opt_ignored) {
  return ((opt_data.title) ? '<h2 class="helptip-title">' + soy.$$escapeHtml(opt_data.title) + '</h2>' : '') + '<p class="helptip-body">' + soy.$$filterNoAutoescape(opt_data.bodyHtml) + '</p>' + ((opt_data.url) ? '<p><a class="helptip-link" href="' + soy.$$escapeHtml(opt_data.url) + '" target="_blank">' + ((opt_data.linkText) ? soy.$$escapeHtml(opt_data.linkText) : soy.$$escapeHtml('Learn more')) + '</a></p>' : '') + AJS.Templates.HelpTip.tipFooter(opt_data);
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.tipContent.soyTemplateName = 'AJS.Templates.HelpTip.tipContent';
}


AJS.Templates.HelpTip.tipFooter = function(opt_data, opt_ignored) {
  return '<form class="tip-footer">' + AJS.Templates.HelpTip.nextButton(opt_data) + AJS.Templates.HelpTip.closeButton(opt_data) + AJS.Templates.HelpTip.sequencePaging(opt_data) + '</form>';
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.tipFooter.soyTemplateName = 'AJS.Templates.HelpTip.tipFooter';
}


AJS.Templates.HelpTip.nextButton = function(opt_data, opt_ignored) {
  return '' + ((opt_data.showNextButton) ? '<button class="aui-button helptip-next" type="button">' + ((opt_data.nextButtonText) ? soy.$$escapeHtml(opt_data.nextButtonText) : soy.$$escapeHtml('Next')) + '</button>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.nextButton.soyTemplateName = 'AJS.Templates.HelpTip.nextButton';
}


AJS.Templates.HelpTip.closeButton = function(opt_data, opt_ignored) {
  return '' + ((opt_data.showCloseButton) ? '<button class="aui-button ' + ((opt_data.showNextButton) ? ' aui-button-link ' : '') + ' helptip-close" type="button">' + ((opt_data.closeButtonText) ? soy.$$escapeHtml(opt_data.closeButtonText) : soy.$$escapeHtml('Close')) + '</button>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.closeButton.soyTemplateName = 'AJS.Templates.HelpTip.closeButton';
}


AJS.Templates.HelpTip.sequencePaging = function(opt_data, opt_ignored) {
  return '' + ((opt_data.isSequence && opt_data.length > 1) ? '<span class="helptip-sequence-paging">' + soy.$$escapeHtml(opt_data.position + 1) + '/' + soy.$$escapeHtml(opt_data.length) + '</span>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.sequencePaging.soyTemplateName = 'AJS.Templates.HelpTip.sequencePaging';
}
;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip', location = 'js/HelpTip.js' */
define("jira-help-tips/feature/help-tip",["require"],function(i){"use strict";function t(){return!1}function e(){return!0}function s(){return"jira-help-tip-"+p+d++}var n=i("jquery"),o=i("underscore"),h=i("jira-help-tips/feature/help-tip-manager"),l=i("jira-help-tips/util/analytics"),r=i("aui/inline-dialog"),a=i("jira/jquery/deferred"),u=AJS.Popups,c=AJS.Templates.HelpTip,d=0,p=(new Date).getTime(),f=function(i,t){this.initialize(i,t)},b=function(i){this.initialize(i)},m=function(i){var t;this.attributes=n.extend({},i),this.attributes.id||(this.attributes.id=!1),this.attributes.callbacks||(this.attributes.callbacks={}),this.attributes.isSequence&&(this.attributes.weight||(this.attributes.weight=Number.MAX_VALUE),h.sequences.push(this)),this.attributes.body&&(this.attributes.bodyHtml=this.attributes.body,delete this.attributes.body),this.cid=s(),t=this.attributes.anchor,delete this.attributes.anchor,this.view=t?new f(this,t):new b(this)};return n.extend(m.prototype,{show:function(i){i=i||{};var t=this,e=new a;if(this.attributes.callbacks.beforeShow){var s=this.attributes.callbacks.beforeShow();s&&o.isFunction(s.done)?s.done(e.resolve):e.resolve()}else e.resolve();e.done(function(){h.show(function(){t.isDismissed()||(!i.force&&u&&u.DisplayController?u.DisplayController.request({name:t.id,weight:1e3,show:function(){t.view.show()}}):t.view.show(),l.send("shown",t))})})},dismiss:function(){var i=l.clean(arguments[0]||"programmatically");this.view.dismiss(),"close-button"===i&&this.attributes.isSequence&&h.clearSequences(),this.isDismissed()||(h.dismiss(this),l.send("dismissed."+i,this))},isVisible:function(){return this.view.$el.is(":visible")},isDismissed:function(){return h.isDismissed(this)},refresh:function(){this.isDismissed()||this.view.refresh()},hide:function(){this.isDismissed()||this.view.dismiss()},showNextHelpTipInSequence:function(){this.view.clickNext()}}),n.extend(f.prototype,{initialize:function(i,e){this.model=i,this.anchorSelector=e,this.anchor=n(e),this._initDialog(e),n(document).bind("showLayer",function(e,s,o){"inlineDialog"===s&&o.id===i.cid&&(r.current=null,n(document.body).unbind("click."+i.cid+".inline-dialog-check"),o._validateClickToClose=t,o.hide=t)})},show:function(){this.beforeHide=t,this.popup.show()},refresh:function(){var i=n(this.anchorSelector);i.is(":visible")?i.get(0)!==this.anchor.get(0)?this.changeAnchor(i):this.isVisible()?this.popup.refresh():this.show():this.dismiss()},changeAnchor:function(i){var t=this.isVisible();this.dismiss(),this.$el.remove(),this.anchor=i,this._initDialog(i),t&&this.show()},dismiss:function(){this.beforeHide=e,this._popupHide()},clickNext:function(){var i=n(this.$el).find(".helptip-next");i.length>0&&i.click()},isVisible:function(){return this.$el.is(":visible")},_initDialog:function(i){var e=this,s=this.model;this.popup=new r(n(i),s.cid,o.bind(this._createDialog,this),o.extend({container:"#content",noBind:!0,preHideCallback:function(){return e.beforeHide()},calculatePositions:function(i,t,e,s){var o=r.opts.calculatePositions(i,t,e,s),h=n(this.container),l=h.offset();return"auto"!==o.popupCss.left&&(o.popupCss.left-=l.left,o.popupCss.right="auto"),o.popupCss.top-=l.top,o},addActiveClass:!1,initCallback:s.attributes.callbacks.init,hideCallback:s.attributes.callbacks.hide,persistent:!0},s.attributes.inlineDialogOpts)),this._popupHide=this.popup.hide,this.popup.hide=t,this.$el=n(this.popup[0]),this.$el.addClass("jira-help-tip aui-help")},_createDialog:function(i,t,e){var s=this,r=h.sequences,a=this.model.attributes.position,u=this.model.attributes.isSequence;i.removeClass("contents"),i.html(n(c.tipContent(o.extend({showNextButton:u&&r.length>1&&a+1<r.length,length:r.length,position:a,showCloseButton:!0},this.model.attributes)))),i.unbind("mouseover mouseout"),i.find(".helptip-link").click(function(){l.send("learn-more.clicked",s.model)}),i.find(".helptip-close").click(function(i){i.preventDefault(),s.model.dismiss("close-button")}),i.find(".helptip-next").click(function(i){i.preventDefault(),s.model.dismiss("next-button");var t=a+1;r[t]&&r[t].show({force:!0})}),e()}}),n.extend(b.prototype,{initialize:function(){this.$el=n("<div></div>"),this.$el.addClass("jira-help-tip aui-help")},show:function(){},dismiss:function(){}}),m});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:initialiser', location = 'js/initialiser.js' */
define("jira-help-tips/page/initialiser",["jira-help-tips/feature/help-tip-manager","jira/util/users/logged-in-user","underscore"],function(e,i,n){"use strict";function r(){i.isAnonymous()||e.fetch()}return{init:n.once(r)}});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:common', location = 'js/legacy.js' */
!function(){"use strict";AJS.namespace("AJS.HelpTip",null,require("jira-help-tips/feature/help-tip")),AJS.namespace("AJS.HelpTip.Manager",null,require("jira-help-tips/feature/help-tip-manager")),require("jira-help-tips/page/initialiser").init()}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-quicksearch-plugin:commons_common', location = 'frontend/common.js' */
!function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var r=window.atlassianWebpackJsonpe5ed4b01bb42b7893d8aef5bda9bf664;window.atlassianWebpackJsonpe5ed4b01bb42b7893d8aef5bda9bf664=function(t,a,i){for(var c,u,s,f=0,l=[];f<t.length;f++)u=t[f],o[u]&&l.push(o[u][0]),o[u]=0;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c]);for(r&&r(t,a,i);l.length;)l.shift()();if(i)for(f=0;f<i.length;f++)s=n(n.s=i[f]);return s};var t={},o={2:0};n.e=function(e){function r(){c.onerror=c.onload=null,clearTimeout(u);var n=o[e];0!==n&&(n&&n[1](new Error("Loading chunk "+e+" failed.")),o[e]=void 0)}var t=o[e];if(0===t)return new Promise(function(e){e()});if(t)return t[2];var a=new Promise(function(n,r){t=o[e]=[n,r]});t[2]=a;var i=document.getElementsByTagName("head")[0];if({0:!0}[e])return WRM.require("wrc!com.atlassian.jira.plugins.jira-quicksearch-plugin:"+e),a;var c=document.createElement("script");c.type="text/javascript",c.charset="utf-8",c.async=!0,c.timeout=12e4,n.nc&&c.setAttribute("nonce",n.nc),c.src=n.p+"bundle."+e+".js";var u=setTimeout(r,12e4);return c.onerror=c.onload=r,i.appendChild(c),a},n.m=e,n.c=t,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:t})},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n.oe=function(e){throw console.error(e),e},"undefined"!=typeof AJS&&(n.p=AJS.contextPath()+"/download/resources/com.atlassian.jira.plugins.jira-quicksearch-plugin:assets-662220e9-3a3c-4bb7-b276-52e66db71f4c/")}([]);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-quicksearch-plugin:entrypoint-jira-quicksearch-plugin', location = 'frontend/bundle.jira-quicksearch-plugin.js' */
atlassianWebpackJsonpe5ed4b01bb42b7893d8aef5bda9bf664([1],[function(e,t){e.exports=require("jquery")},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.QUICK_SEARCH_RESULTS_EMPTY_STATE=t.QUICK_SEARCH_PARENT_LOADING_CLASS=t.QUICK_SEARCH_SPINNER_LOCATOR_CLASS=t.QUICK_SEARCH_SPINNER_CLASS=t.QUICK_SEARCH_INPUT_LOCATOR=t.QUICK_SEARCH_INPUT_ID=t.QUICK_SEARCH_FEATURE_FLAG=void 0;var r=n(5),u=i(r),a=n(2),o=i(a),s=o.default,c=(t.QUICK_SEARCH_FEATURE_FLAG="jira.quick.search",t.QUICK_SEARCH_INPUT_ID="quickSearchInput"),l=t.QUICK_SEARCH_INPUT_LOCATOR="#"+c,_=t.QUICK_SEARCH_SPINNER_CLASS="quick-search-spinner";t.QUICK_SEARCH_SPINNER_LOCATOR_CLASS=l+" ~ ."+_,t.QUICK_SEARCH_PARENT_LOADING_CLASS="quicksearch-loading",t.QUICK_SEARCH_RESULTS_EMPTY_STATE=Object.freeze([{id:"quick-search-issues",items:[],name:"Issues",url:(0,u.default)()+"/issues/?jql=order+by+lastViewed+DESC",viewAllTitle:"View all issues"},{id:"quick-search-projects",items:[],name:"ultimate.search.group.projects.name",url:(0,u.default)()+"/projects?selectedCategory=all&selectedProjectType=all&contains=",viewAllTitle:"View all projects"}])},function(e,t){e.exports=require("jira/util/formatter")},function(e,t){e.exports=require("jira/analytics")},function(e,t){e.exports=require("underscore")},function(e,t){e.exports=require("wrm/context-path")},function(e,t,n){"use strict";function i(){return(0,c.default)(_.QUICK_SEARCH_SPINNER_LOCATOR_CLASS)}function r(){return(0,c.default)(_.QUICK_SEARCH_INPUT_LOCATOR)}function u(){return r().parent()}function a(){u().addClass(_.QUICK_SEARCH_PARENT_LOADING_CLASS),i().spin()}function o(){u().removeClass(_.QUICK_SEARCH_PARENT_LOADING_CLASS),i().spinStop()}Object.defineProperty(t,"__esModule",{value:!0}),t.spinStart=a,t.spinStop=o;var s=n(0),c=function(e){return e&&e.__esModule?e:{default:e}}(s),l=n(1),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l);n(9)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(0),u=i(r),a=n(4),o=i(a),s=n(3),c=i(s);n(8);var l=n(6),_=n(1),d=n(10),f=i(d),C=n(11),S=o.default.once(function(){(0,l.spinStart)(),n.e(0).then(n.bind(null,13))});(0,u.default)(function(){if(f.default.isFeatureEnabled(_.QUICK_SEARCH_FEATURE_FLAG)){c.default.send({name:"quicksearch.enabled"});var e=(0,u.default)(_.QUICK_SEARCH_INPUT_LOCATOR);e.after('<div class="'+_.QUICK_SEARCH_SPINNER_CLASS+'"></div>'),e.on("beforeBlurInput",function(e){e.preventDefault()}),e.focus(S),e.is(":focus")&&S()}}),(0,u.default)(window).load(function(){f.default.isFeatureEnabled(_.QUICK_SEARCH_FEATURE_FLAG)&&(0,C.showOnboardingTip)()})},function(e,t){},function(e,t){e.exports=void 0},function(e,t){e.exports=require("jira/featureflags/feature-manager")},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return"<div><p>"+e+"</p></div>"}function u(){if(0!==(0,f.default)(S).length){var e={anchor:S,id:"qs-onboarding-tip",isSequence:!1,showCloseButton:!0,closeButtonText:"OK, got it",callbacks:{hide:function(){return c.default.send({name:"quicksearch.onboarding.tip.dissmised"})}},title:"Find your work faster",bodyHtml:r("Search through all your issues and projects, and have the most important work always at your fingertips. Start typing to search...")},t=new o.default(e);if(!t.isDismissed()){if(t.show(),!t.isVisible())return void c.default.send({name:"quicksearch.onboarding.tip.notshown"});c.default.send({name:"quicksearch.onboarding.tip.shown"})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.showOnboardingTip=u;var a=n(12),o=i(a),s=n(3),c=i(s),l=n(2),_=i(l),d=n(0),f=i(d),C=_.default,S="#quicksearch-menu:visible"},function(e,t){e.exports=require("jira-help-tips/feature/help-tip")}],[7]);;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.soy' */
// This file was automatically generated from appswitcher.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher == 'undefined') { navlinks.templates.appswitcher = {}; }


navlinks.templates.appswitcher.linkSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    output += '<div class="aui-nav-heading sidebar-section-header">' + soy.$$escapeHtml(opt_data.title) + '</div><ul class="aui-nav nav-links">';
    var linkList8 = opt_data.list;
    var linkListLen8 = linkList8.length;
    for (var linkIndex8 = 0; linkIndex8 < linkListLen8; linkIndex8++) {
      var linkData8 = linkList8[linkIndex8];
      output += navlinks.templates.appswitcher.applicationsItem(linkData8);
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.linkSection.soyTemplateName = 'navlinks.templates.appswitcher.linkSection';
}


navlinks.templates.appswitcher.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span></a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher.applicationsItem';
}


navlinks.templates.appswitcher.shortcutsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.shortcutsItem.soyTemplateName = 'navlinks.templates.appswitcher.shortcutsItem';
}


navlinks.templates.appswitcher.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape('Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.error.soyTemplateName = 'navlinks.templates.appswitcher.error';
}


navlinks.templates.appswitcher.sidebarContents = function(opt_data, opt_ignored) {
  return '<div class="aui-page-panel-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="app-switcher-section app-switcher-applications"><div class="aui-nav-heading">' + soy.$$escapeHtml('Application Links') + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div></div><div class="app-switcher-section app-switcher-shortcuts"><div class="aui-nav-heading">' + soy.$$escapeHtml('Shortcuts') + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div></div></nav></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebarContents.soyTemplateName = 'navlinks.templates.appswitcher.sidebarContents';
}


navlinks.templates.appswitcher.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml('Linked Applications') + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.trigger.soyTemplateName = 'navlinks.templates.appswitcher.trigger';
}


navlinks.templates.appswitcher.projectHeaderSection = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-title">' + aui.avatar.avatar({size: 'large', avatarImageUrl: opt_data.avatarUrl, isProject: true, title: opt_data.name}) + '<div class="sidebar-project-name">' + soy.$$escapeHtml(opt_data.name) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.projectHeaderSection.soyTemplateName = 'navlinks.templates.appswitcher.projectHeaderSection';
}


navlinks.templates.appswitcher.cogDropdown = function(opt_data, opt_ignored) {
  var output = '';
  var dropdownList__soy74 = '' + navlinks.templates.appswitcher.dropdownList({list: opt_data.links});
  output += aui.dropdown2.dropdown2({menu: {id: opt_data.id, content: dropdownList__soy74, extraClasses: 'aui-style-default sidebar-customize-section'}, trigger: {showIcon: false, content: '<span class="aui-icon aui-icon-small aui-iconfont-configure"></span>', container: '#app-switcher'}});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.cogDropdown.soyTemplateName = 'navlinks.templates.appswitcher.cogDropdown';
}


navlinks.templates.appswitcher.dropdownList = function(opt_data, opt_ignored) {
  var output = '<ul class="sidebar-admin-links">';
  var linkList82 = opt_data.list;
  var linkListLen82 = linkList82.length;
  for (var linkIndex82 = 0; linkIndex82 < linkListLen82; linkIndex82++) {
    var linkData82 = linkList82[linkIndex82];
    output += '<li class="nav-link"><a href="' + soy.$$escapeHtml(linkData82.href) + '" title="' + soy.$$escapeHtml(linkData82.title) + '"><span class="nav-link-label">' + soy.$$escapeHtml(linkData82.label) + '</span></a></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.dropdownList.soyTemplateName = 'navlinks.templates.appswitcher.dropdownList';
}


navlinks.templates.appswitcher.switcher = function(opt_data, opt_ignored) {
  var output = '';
  if (true) {
    if (AJS.DarkFeatures.isEnabled('rotp.sidebar')) {
      var sidebarContents__soy97 = '' + navlinks.templates.appswitcher.sidebarContents(null);
      var triggerContent__soy99 = '' + navlinks.templates.appswitcher.trigger(null);
      output += navlinks.templates.appswitcher.sidebar({sidebar: {id: 'app-switcher', content: sidebarContents__soy97}, trigger: {showIcon: false, content: triggerContent__soy99}});
    } else {
      output += navlinks.templates.appswitcher_old.switcher(null);
    }
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.switcher.soyTemplateName = 'navlinks.templates.appswitcher.switcher';
}


navlinks.templates.appswitcher.sidebar = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.sidebar.id) + '" class="sidebar-trigger app-switcher-trigger" aria-owns="' + soy.$$escapeHtml(opt_data.sidebar.id) + '" aria-haspopup="true" data-is-user-admin="' + soy.$$escapeHtml(false) + '" data-is-sidebar="true" >' + soy.$$filterNoAutoescape(opt_data.trigger.content) + '</a><div id=' + soy.$$escapeHtml(opt_data.sidebar.id) + ' class="app-switcher-sidebar aui-style-default sidebar-offscreen">' + soy.$$filterNoAutoescape(opt_data.sidebar.content) + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebar.soyTemplateName = 'navlinks.templates.appswitcher.sidebar';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.js' */
(function(e,a){var d="is-user-admin";var c="#app-switcher";a.SideBar=function(f){var g=this;this.$sidebar=null;f=e.extend({sidebarContents:null},f);this.getLinks=function(){return e.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateAppLinks).fail(this.showAppSwitcherError)};this.populateProjectHeader=function(i,h){g.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").after(navlinks.templates.appswitcher.projectHeaderSection({avatarUrl:h,name:i}))};this.getProjectData=function(){var h=e(".project-shortcut-dialog-trigger"),i=h.data("key"),j=h.data("entity-type");if(h.size()==0||!i||!j){e(".app-switcher-shortcuts").remove();return}var l,k;k=e.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+i,cache:false,data:{entityType:j},dataType:"json"});l=e.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+i,cache:false,data:{entityType:j},dataType:"json"});e.when(k,l).then(function(n,m){g.updateProjectShortcuts(n,m,{key:i,entityType:j,name:h.data("name"),avatarUrl:h.find("img").prop("src")})},g.showProjectShortcutsError)};this.getSidebar=function(){if(!this.$sidebar){this.$sidebar=e(f.sidebarContents)}return this.$sidebar};this.addApplicationsCog=function(){e(".app-switcher-applications .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-applications-admin-dropdown",links:[{href:AJS.contextPath()+"/plugins/servlet/customize-application-navigator",label:"Customize navigator",title:"Add new entries, hide existing or restrict who sees what"},{href:AJS.contextPath()+"/plugins/servlet/applinks/listApplicationLinks",label:"Manage application links",title:"Link to more Atlassian applications"}]}))};this.addProjectShortcutsCog=function(h,j){var i=[{href:AJS.contextPath()+"/plugins/servlet/custom-content-links-admin?entityKey="+h,label:"Customize shortcuts",title:""}];if(g.entityMappings[j]){i.push({href:g.generateEntityLinksUrl(h,g.entityMappings[j]),label:"Manage product links",title:""})}g.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-project-shortcuts-admin-dropdown",links:i}))};this.updateAppLinks=function(h){e(function(){g.getSidebar().find(".app-switcher-applications").html(navlinks.templates.appswitcher.linkSection({title:"Application Links",list:h}));if(g.getSidebar().data(d)){g.addApplicationsCog()}g.bindAnalyticsHandlers(g.getSidebar(),h)})};this.updateProjectShortcuts=function(k,i,j){var l=k[0].shortcuts,h=i[0].shortcuts;g.getSidebar().find(".app-switcher-shortcuts").html(navlinks.templates.appswitcher.linkSection({title:"Shortcuts",list:l.concat(h)}));if(g.getSidebar().data(d)){g.addProjectShortcutsCog(j.key,j.entityType)}g.populateProjectHeader(j.name,j.avatarUrl);g.bindAnalyticsHandlers(g.getSidebar(),data)};this.entityMappings={"confluence.space":"com.atlassian.applinks.api.application.confluence.ConfluenceSpaceEntityType","jira.project":"com.atlassian.applinks.api.application.jira.JiraProjectEntityType","bamboo.project":"com.atlassian.applinks.api.application.bamboo.BambooProjectEntityType","stash.project":"com.atlassian.applinks.api.application.stash.StashProjectEntityType"};this.generateEntityLinksUrl=function(h,i){if(i===g.entityMappings["confluence.space"]){return AJS.contextPath()+"/spaces/listentitylinks.action?typeId="+i+"&key="+h}else{return AJS.contextPath()+"/plugins/servlet/applinks/listEntityLinks/"+i+"/"+h}};this.showAppSwitcherError=function(){e(function(){var h=g.getSidebar();h.find(".app-switcher-applications .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());h.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",e.proxy(g.retryLoading,g))})};this.showProjectShortcutsError=function(){e(function(){var h=g.getSidebar();h.find(".app-switcher-shortcuts .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());h.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",e.proxy(g.retryLoading,g))})};this.retryLoading=function(h){this.getSidebar().html(navlinks.templates.appswitcher.sidebarContents());this.getLinks();this.getProjectData();h&&h.stopPropagation()};this.bindAnalyticsHandlers=function(h,i){};this.getLinks();e(this.getProjectData);this.toggleSidebar=function(j){var k=g.getSidebar(),i=e("body"),h=e(window.document);if(!i.hasClass("app-switcher-open")){var m=e("#header");k.css("left",-k.width());k.parent("body").length||k.appendTo("body");b({data:k});k.animate({left:0},300);function l(n){var p=n.target&&e(n.target),o=n.keyCode;if(n.originalEvent===j.originalEvent){return}if(p&&!o&&!(p.closest(k).length||p.closest(m).length)&&j.which==1&&!(n.shiftKey||n.ctrlKey||n.metaKey)){g.toggleSidebar()}else{if(o===27){g.toggleSidebar()}}}h.on("click.appSwitcher",l);h.on("keydown.appSwitcher",l);h.on("scroll.appSwitcher",k,b)}else{h.off(".appSwitcher")}i.toggleClass("app-switcher-open")};e("#header").on("click",".app-switcher-trigger",this.toggleSidebar)};function b(h){var f=e(document).scrollTop(),i=e("#header"),g=(i.height()+i.offset().top)-f;if(g>=0){h.data.css({top:g,position:"fixed"})}else{h.data.css({top:0,left:0,position:"fixed"})}}e(function(){if(e(c).data("is-sidebar")===true){new a.SideBar({sidebarContents:c})}})}(jQuery,window.NL=(window.NL||{})));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.js' */
var APPSWITCHER_TRIGGER_CLICK="appswitcher.trigger.click";var APPSWITCHER_DROPDOWN_SHOW="appswitcher.dropdown.show";var APPSWITCHER_DROPDOWN_DISPLAY_ERROR="appswitcher.dropdown.display.error";var APPSWITCHER_APP_LINK_CLICK="appswitcher.app.link.click";var APPSWITCHER_CONFIGURE_LINK_CLICK="appswitcher.configure.link.click";(function(c,f){var b="isAppSuggestionAvailable";var d="isSiteAdminUser";var e="isUserAdmin";var a="#app-switcher";f.AppSwitcher=function(j){var l=AJS.contextPath()+"/plugins/servlet/customize-application-navigator";var k="unified.usermanagement";var m=this;this.$dropdown=null;j=c.extend({dropdownContents:null},j);this.getLinks=function(){return c.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateDropdown).fail(this.showError)};this.getDropdown=function(){if(!this.$dropdown){this.$dropdown=c(j.dropdownContents);this.envData=this.$dropdown.data("environment")}return this.$dropdown};this.updateDropdown=function(n){c(function(){m.getDropdown().html(navlinks.templates.appswitcher_old.applications({apps:n,showAdminLink:m.envData[e],adminLink:l}));m.bindAnalyticsHandlers();if(m.envData[b]===true){m.handleSuggestionApps(n)}})};this.bindAnalyticsHandlers=function(){c(".app-switcher-trigger").on("click",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_TRIGGER_CLICK})});c("#app-switcher").on("aui-dropdown2-show",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_DROPDOWN_SHOW})});c("#app-switcher .nav-link").on("click",function(){var p="custom";var q=c(this).find("a");var o=q.attr("href");var n=window.location.hostname;if(o&&o.indexOf("bitbucket.org")>-1){p="bitbucket-cloud"}else{if(o.indexOf(n+"/wiki")>-1){p="confluence"}else{if(o.indexOf(n+"/build")>-1){p="bamboo"}else{if(o.indexOf(n)>-1){p="jira"}}}}AJS.trigger("analyticsEvent",{name:APPSWITCHER_APP_LINK_CLICK,data:{product:p}})});c(".nav-link-edit-wrapper").on("click",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_CONFIGURE_LINK_CLICK})})};this.isBillingSystemEnabled=function(){return(this.envData[d]===true)&&AJS.DarkFeatures.isEnabled(k)};this.handleSuggestionApps=function(q){var r=_.map(q,function(s){return s.applicationType.toLowerCase()});var o=c("<div id='app-switcher-suggestion-apps' class='aui-dropdown2-section'/>");o.html(navlinks.templates.appswitcher_old.suggestionApps);var p=o.find(".suggestion-apps");var n=false;_.each(g,function(s){if(!_.contains(r,s.appName)){n=true;p.append(navlinks.templates.appswitcher_old.suggestionApp({suggestionApp:s,isBillingSystemEnabled:m.isBillingSystemEnabled()}))}});if(!n){return}c("#app-switcher").append(o);c(".app-discovery-suggestion-app").click(function(){var t=c(this).find("a");var s;if(m.envData[d]===true){s="appswitcher.discovery.siteadmin.select.inproduct."}else{s="appswitcher.discovery.user.select."}s=s+t.attr("id").toLowerCase();AJS.trigger("analytics",{name:s})});c(".app-discovery-suggestion-app").hover(function(){c(this).find("a").removeClass("active").removeClass("aui-dropdown2-active")});c(".app-discovery-cancel-button").click(function(){AJS.trigger("analytics",{name:"appswitcher.discovery.nothanks.button.click"});i(h,"true");o.remove()})};this.showError=function(){c(function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_DROPDOWN_DISPLAY_ERROR});m.getDropdown().html(navlinks.templates.appswitcher_old.error()).off(".appswitcher").on("click.appswitcher",".app-switcher-retry",c.proxy(m.retryLoading,m))})};this.retryLoading=function(n){this.getDropdown().html(navlinks.templates.appswitcher_old.loading());this.getLinks();n&&n.stopPropagation()};this.getLinks()};var h="key-no-thanks";var g=[{appName:"jira",appDesc:"Issue & Project Tracking Software",discoveryUrl:"https://www.atlassian.com/software/jira",billingSystemDiscoveryUrl:"/admin/billing/addapplication"},{appName:"confluence",appDesc:"Collaboration and content sharing",discoveryUrl:"https://www.atlassian.com/software/confluence",billingSystemDiscoveryUrl:"/admin/billing/addapplication?product=confluence.ondemand"},{appName:"bamboo",appDesc:"Continuous integration",discoveryUrl:"https://www.atlassian.com/software/bamboo",billingSystemDiscoveryUrl:"/admin/billing/addapplication?product=bamboo.ondemand"}];var i=function(j,k){c.ajax({url:AJS.contextPath()+"/rest/menu/latest/userdata/",type:"PUT",contentType:"application/json",data:JSON.stringify({key:j,value:k})})};c(function(){if(c(a).data("is-switcher")===true){new f.AppSwitcher({dropdownContents:a})}})}(jQuery,window.NL=(window.NL||{})));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.soy' */
// This file was automatically generated from appswitcher_old.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher_old.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher_old == 'undefined') { navlinks.templates.appswitcher_old = {}; }


navlinks.templates.appswitcher_old.applications = function(opt_data, opt_ignored) {
  return '' + navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.apps, listClass: 'nav-links', showDescription: opt_data.showDescription}) + ((opt_data.custom) ? navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.custom, showDescription: opt_data.showDescription}) : '') + ((opt_data.showAdminLink) ? navlinks.templates.appswitcher_old.adminSection(opt_data) : '');
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applications.soyTemplateName = 'navlinks.templates.appswitcher_old.applications';
}


navlinks.templates.appswitcher_old.applicationsSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    var param19 = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
    var linkList27 = opt_data.list;
    var linkListLen27 = linkList27.length;
    for (var linkIndex27 = 0; linkIndex27 < linkListLen27; linkIndex27++) {
      var linkData27 = linkList27[linkIndex27];
      param19 += navlinks.templates.appswitcher_old.applicationsItem(soy.$$augmentMap(linkData27, {showDescription: opt_data.showDescription}));
    }
    param19 += '</ul>';
    output += aui.dropdown2.section({content: param19});
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsSection.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsSection';
}


navlinks.templates.appswitcher_old.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link' + ((opt_data.self) ? ' nav-link-local' : '') + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '" class="aui-dropdown2-radio ' + ((opt_data.self) ? 'aui-dropdown2-checked' : '') + '" title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsItem';
}


navlinks.templates.appswitcher_old.adminSection = function(opt_data, opt_ignored) {
  return '' + aui.dropdown2.section({content: '<ul class="nav-links"><li><a class="nav-link-edit-wrapper" href="' + soy.$$escapeHtml(opt_data.adminLink) + '"><span class="nav-link-edit">' + soy.$$filterNoAutoescape('Configure\x26hellip;') + '</span></a></li></ul>'});
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.adminSection.soyTemplateName = 'navlinks.templates.appswitcher_old.adminSection';
}


navlinks.templates.appswitcher_old.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape('Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.error.soyTemplateName = 'navlinks.templates.appswitcher_old.error';
}


navlinks.templates.appswitcher_old.loading = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.loading.soyTemplateName = 'navlinks.templates.appswitcher_old.loading';
}


navlinks.templates.appswitcher_old.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml('Linked Applications') + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.trigger.soyTemplateName = 'navlinks.templates.appswitcher_old.trigger';
}


navlinks.templates.appswitcher_old.switcher = function(opt_data, opt_ignored) {
  var output = '';
  if (true) {
    var loadingContent__soy81 = '' + navlinks.templates.appswitcher_old.loading(null);
    var triggerContent__soy83 = '' + navlinks.templates.appswitcher_old.trigger(null);
    output += aui.dropdown2.dropdown2({menu: {id: 'app-switcher', content: loadingContent__soy81, extraClasses: 'aui-style-default', extraAttributes: {'data-environment': {}, 'data-is-switcher': 'true'}}, trigger: {showIcon: false, content: triggerContent__soy83, extraClasses: 'app-switcher-trigger', extraAttributes: {href: '#app-switcher'}}});
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.switcher.soyTemplateName = 'navlinks.templates.appswitcher_old.switcher';
}


navlinks.templates.appswitcher_old.suggestionApp = function(opt_data, opt_ignored) {
  var output = '';
  var href__soy89 = opt_data.isBillingSystemEnabled == true ? opt_data.suggestionApp.billingSystemDiscoveryUrl : opt_data.suggestionApp.discoveryUrl;
  output += '<li class="app-discovery-suggestion-app"><a id="' + soy.$$escapeHtml(opt_data.suggestionApp.appName) + '" href="' + soy.$$escapeHtml(href__soy89) + '" class="app-discovery-link aui-icon-container app-discovery-' + soy.$$escapeHtml(opt_data.suggestionApp.appName) + '-product-icon" title="' + soy.$$escapeHtml(href__soy89) + '" target="_blank"/><div class="app-discovery-small">' + soy.$$escapeHtml(opt_data.suggestionApp.appDesc) + '</div></li>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.suggestionApp.soyTemplateName = 'navlinks.templates.appswitcher_old.suggestionApp';
}


navlinks.templates.appswitcher_old.suggestionApps = function(opt_data, opt_ignored) {
  return '<ul class=\'nav-links suggestion-apps\'><li><span class=\'app-discovery-suggest-title nav-link-label\'><h6>' + soy.$$escapeHtml('Try other Atlassian apps') + '</h6></span></li></ul><div class=\'buttons-container app-discovery-suggest-apps-buttons\'><div class=\'buttons\'><button class=\'aui-button aui-button-link app-discovery-cancel-button\' name=\'cancel\' accesskey=\'c\' href=\'#\'>' + soy.$$escapeHtml('Don\x27t show this again') + '</button></div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.suggestionApps.soyTemplateName = 'navlinks.templates.appswitcher_old.suggestionApps';
}
;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:header-templates', location = 'soy/headerDropdown.soy' */
// This file was automatically generated from headerDropdown.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Menu.Dropdowns.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Menu == 'undefined') { JIRA.Templates.Menu = {}; }
if (typeof JIRA.Templates.Menu.Dropdowns == 'undefined') { JIRA.Templates.Menu.Dropdowns = {}; }


JIRA.Templates.Menu.Dropdowns.dropdown2Fragment = function(opt_data, opt_ignored) {
  var output = '';
  var sectionList3 = opt_data.sections;
  var sectionListLen3 = sectionList3.length;
  for (var sectionIndex3 = 0; sectionIndex3 < sectionListLen3; sectionIndex3++) {
    var sectionData3 = sectionList3[sectionIndex3];
    output += JIRA.Templates.Menu.Dropdowns.dropdown2Section(sectionData3);
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Menu.Dropdowns.dropdown2Fragment.soyTemplateName = 'JIRA.Templates.Menu.Dropdowns.dropdown2Fragment';
}


JIRA.Templates.Menu.Dropdowns.dropdown2Section = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  var hasItems__soy7 = opt_data.items && opt_data.items.length > 0;
  if (hasItems__soy7) {
    output += '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dropdown2-section' + ((opt_data.style) ? soy.$$escapeHtml(opt_data.style) : '') + '" >' + ((opt_data.label) ? '<strong>' + soy.$$escapeHtml(opt_data.label) + '</strong>' : '') + '<ul class="aui-list-truncate">';
    var itemList27 = opt_data.items;
    var itemListLen27 = itemList27.length;
    for (var itemIndex27 = 0; itemIndex27 < itemListLen27; itemIndex27++) {
      var itemData27 = itemList27[itemIndex27];
      output += '<li' + ((itemData27.id) ? ' id="' + soy.$$escapeHtml(itemData27.id) + '"' : '') + ((itemData27.style) ? ' class="' + soy.$$escapeHtml(itemData27.style) + '"' : '') + '>' + JIRA.Templates.Menu.Dropdowns.dropdown2Item(itemData27) + '</li>';
    }
    output += '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Menu.Dropdowns.dropdown2Section.soyTemplateName = 'JIRA.Templates.Menu.Dropdowns.dropdown2Section';
}


JIRA.Templates.Menu.Dropdowns.dropdown2Item = function(opt_data, opt_ignored) {
  var output = '<a href="' + soy.$$escapeHtml(opt_data.url) + '"' + ((opt_data.parameters && opt_data.parameters.trackClick) ? ' data-track-click="' + soy.$$escapeHtml(opt_data.parameters.trackClick) + '"' : '') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '_lnk"' : '') + ' class="' + ((opt_data.iconUrl) ? 'aui-icon-container' : '') + ((opt_data.parameters && opt_data.parameters['class']) ? ' ' + soy.$$escapeHtml(opt_data.parameters['class']) : '') + '"';
  if (opt_data.parameters) {
    var keyList69 = soy.$$getMapKeys(opt_data.parameters);
    var keyListLen69 = keyList69.length;
    for (var keyIndex69 = 0; keyIndex69 < keyListLen69; keyIndex69++) {
      var keyData69 = keyList69[keyIndex69];
      output += (keyData69 != 'class' && keyData69 != 'iconurl') ? ' ' + soy.$$escapeHtml(keyData69) + '="' + soy.$$escapeHtml(opt_data.parameters[keyData69]) + '"' : '';
    }
  }
  output += '>' + ((opt_data.iconUrl) ? '<img class="icon" src="' + soy.$$escapeHtml(opt_data.iconUrl) + '" alt="" />' : '') + soy.$$escapeHtml(opt_data.label) + '</a>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Menu.Dropdowns.dropdown2Item.soyTemplateName = 'JIRA.Templates.Menu.Dropdowns.dropdown2Item';
}
;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:analytics-header', location = 'js/header-analytics.js' */
define("jira/header/init-header-analytics",["jira/analytics","jira/util/logger","jquery"],function(n,t,e){"use strict";function i(n,t){var e=void 0;return n.forEach(function(n){n.id===t&&(e=n.analyticEventKey)}),e}function o(o){var m=e(o);m.on("click","#logo",function(){n.send({name:a+"home"}),t.trace(r)}),m.on("aui-dropdown2-show",l,function(){var n=e(this).attr("id");c(u,n)&&d(n,u,".open")}),m.on("aui-dropdown2-hide",l,function(){var n=e(this).attr("id");c(u,n)&&d(n,u,".close")}),m.on("aui-dropdown2-show",s,function(){var n=e(this);n.trigger("aui-dropdown2-show-before"),n.trigger("aui-dropdown2-show-after")}),m.on("click",y,function(){var n=this.getAttribute("aria-controls");c(u,n)&&d(n,u,".click")}),m.on("click",".aui-dropdown2 .aui-dropdown2-section a",function(o){var c=e(o.target).closest(l).first();if(null!==c){var d=c.find("a").index(o.target),s=c.attr("id"),y=i(u,s);n.send({name:a+y+".item.click",itemIndex:d}),t.trace(r)}})}var a="jira.navigation.header.",r="jira.header.analytics.event",c=function(n,t){return n.some(function(n){return n.id===t})},d=function(e,o,c){var d=i(o,e),u=a+d+c;n.send({name:u}),t.trace(r)},u=[{id:"home_link-content",analyticEventKey:"dashboards"},{id:"browse_link-content",analyticEventKey:"projects"},{id:"find_link-content",analyticEventKey:"issues"},{id:"tempo_menu-content",analyticEventKey:"tempo"},{id:"bonfire_top_menu_dropdown-content",analyticEventKey:"capture"},{id:"greenhopper_menu-content",analyticEventKey:"boards"},{id:"plugins-jira-webitem-main-content",analyticEventKey:"portfolio"},{id:"system-help-menu-content",analyticEventKey:"help"},{id:"system-admin-menu-content",analyticEventKey:"admin"}],s="#system-help-menu-content, #user-options-content, #system-admin-menu-content",l=u.map(function(n){return"#"+n.id}).join(", "),y=u.reduce(function(n,t){return n+"a.aui-dropdown2-trigger[aria-owns="+t.id+"]"},"");return{init:o}});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header-assets', location = 'js/init-dropdown2.js' */
define("jira/header/dropdown/element",["jira/ajs/ajax/smart-ajax","jira/jquery/deferred","jira/skate","jira/util/data/meta","wrm/context-path","jquery"],function(e,a,t,o,n,r){"use strict";return t("aui-dropdown2-ajax",{type:t.type.CLASSNAME,attached:function(t){function d(){document.activeElement===s.get(0)&&u.get(0).focusItem(0)}function i(){s.data("kbd-interacted",!1)}var u=r(document.getElementById(t.getAttribute("aria-controls"))),s=r(t),c=u.data("aui-dropdown2-ajax-key");s.on("keydown.aui-dropdown2-ajax",function(){s.data("kbd-interacted",!0),setTimeout(i,4)}),u.on("aui-dropdown2-show-after.aui-dropdown2-ajax",i),i(),u.on("aui-dropdown2-show.aui-dropdown2-ajax",function(){if(u.trigger("aui-dropdown2-show-before"),c){var t=new a,i=new a;setTimeout(function(){t.resolve(s.data("kbd-interacted"))},0),u.empty(),u.addClass("aui-dropdown2-loading"),s.attr("aria-busy","true"),e.makeRequest({url:n()+"/rest/api/1.0/menus/"+c,data:{inAdminMode:o.getBoolean("in-admin-mode")},dataType:"json",cache:!1,success:function(e){i.resolve(e)},error:i.reject}),r.when(t,i).done(function(e,a){u.html(JIRA.Templates.Menu.Dropdowns.dropdown2Fragment(a)),e&&setTimeout(d,0)}).always(function(){s.attr("aria-busy","false"),u.removeClass("aui-dropdown2-loading"),u.trigger("aui-dropdown2-show-after")})}else u.trigger("aui-dropdown2-show-after")})},detached:function(e){var a=r(document.getElementById(e.getAttribute("aria-controls"))),t=r(e);a.off(".aui-dropdown2-ajax"),t.off(".aui-dropdown2-ajax")}})}),function(e){"use strict";e(document).on("aui-responsive-menu-item-created",".aui-header.aui-dropdown2-trigger-group",function(a){var t=a.originalEvent.detail;e(t.originalItem).find("> .aui-dropdown2-ajax").length>0&&e(t.newItem).find("> .aui-dropdown2-trigger").addClass("aui-dropdown2-ajax")})}(require("jquery"));;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header-assets', location = 'js/app-switcher-analytics.js' */
define("jira/header/init-app-switcher-analytics",["jira/analytics","jquery"],function(i,n){"use strict";function a(a){var e=n(a);e.on("aui-dropdown2-show-before","#app-switcher",function(){i.send({name:"navigation.header.appswitcher.open"})}),e.on("click","#app-switcher a, #app-switcher button",function(a){var e,t=n(a.target),o=t.closest("li").index();t.is(".nav-link-edit")?e="configure":t.is(".app-discovery-link")?e=this.id?this.id:"unknown.app.discovery":t.is(".app-discovery-cancel-button")?(e="dont.show",o=0):e="application",i.send({name:"navigation.header.appswitcher.click",data:{position:o,linkType:e}})}),e.on("aui-dropdown2-hide","#app-switcher",function(){i.send({name:"navigation.header.appswitcher.close"})})}return{init:a}});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header', location = 'js/init-header.js' */
require(["jira/header/dropdown/element","jira/header/init-header-analytics","jira/header/init-app-switcher-analytics"],function(e,i,t){"use strict";i.init(document),t.init(document)});;
;
/* module-key = 'jira.webresources:user-message-flags', location = '/includes/jira/admin/admin-flags.js' */
require(["jira/util/logger","wrm/data","jquery","jira/flag"],function(a,s,e,i){"use strict";e(function(){var c=s.claim("jira.core:user-message-flags-data.adminLockout")||{};if(c.noprojects){var n=JIRA.Templates.Flags.Admin,r=n.adminIssueAccessFlagTitle({}),l=n.adminIssueAccessFlagBody({manageAccessUrl:c.manageAccessUrl}),g=i.showWarningMsg(r,l,{dismissalKey:c.flagId});e(g).find("a").on("click",function(){g.dismiss()})}a.trace("admin.flags.done")})});;
;
/* module-key = 'jira.webresources:user-message-flags', location = '/includes/jira/admin/admin-flags.soy' */
// This file was automatically generated from admin-flags.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Flags.Admin.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Flags == 'undefined') { JIRA.Templates.Flags = {}; }
if (typeof JIRA.Templates.Flags.Admin == 'undefined') { JIRA.Templates.Flags.Admin = {}; }


JIRA.Templates.Flags.Admin.adminIssueAccessFlagTitle = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml('Your current restrictions');
};
if (goog.DEBUG) {
  JIRA.Templates.Flags.Admin.adminIssueAccessFlagTitle.soyTemplateName = 'JIRA.Templates.Flags.Admin.adminIssueAccessFlagTitle';
}


JIRA.Templates.Flags.Admin.adminIssueAccessFlagBody = function(opt_data, opt_ignored) {
  var output = '';
  var start__soy5 = '<a href="' + soy.$$escapeHtml("") + '/' + soy.$$escapeHtml(opt_data.manageAccessUrl) + '">';
  var end__soy11 = '</a>';
  output += '<p id="admin-noprojects">' + soy.$$escapeHtml('You\x27ve logged in as an administrator, but you don\x27t have access to any Jira applications. You can perform administration tasks, but you won\x27t be able to view or edit issues.') + '</p><p><a href="' + soy.$$escapeHtml("") + '/' + soy.$$escapeHtml(opt_data.manageAccessUrl) + '">' + soy.$$escapeHtml('Manage your application access.') + '</a></p>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Flags.Admin.adminIssueAccessFlagBody.soyTemplateName = 'JIRA.Templates.Flags.Admin.adminIssueAccessFlagBody';
}
;
;
/* module-key = 'com.xpandit.plugins.xray:xray-importer-resources', location = '/js/csvimport/field-mapping-select.js' */
(function(f){function r(){f(".raven-select-import").each(function(){var u=this.id;a(u)});g()}function g(){var u=document.querySelectorAll(".raven-select-import");if(u.length>0){h(u);l()}}function a(u){f("#"+u).change(function(){var w=u.replace("_select","");var v=document.querySelectorAll(".raven-select-import");h(v);c(w)});f("#"+u).each(function(){var v=u.replace("_select","");c(v)});new AJS.SingleSelect({element:f("#"+u),revertOnInvalid:true})}f(function(){if(f("#field-mapping-table")[0]!=null){f("#nextButton").attr("disabled",true)}});var o=new Array();var s=new Array();var m=[];var q=[];function h(w){m=[];for(var v=0;v<w.length;v++){var u=w[v].value;b(u)}}function e(v){for(var u=0;u<o.length;u++){if(o[u]==v){o.splice(u,1)}}for(var u=0;u<s.length;u++){if(s[u]==v){s.splice(u,1)}}for(var u=0;u<q.length;u++){if(q[u]===v){q.splice(u,1)}}}function t(v,y){var u=document.getElementById(y+"_select");var x=document.getElementById(y);var w=document.getElementById(y+"_checkbox");x.style.display="none";x.value=u.value;w.disabled=true;AJS.$(w).parent().tooltip("destroy");switch(v){case"summary":o.push(y);w.disabled=false;break;case"Test Case Identifier":s.push(y);break;case"Action":case"Data":case"Expected Result":break;case"DONT_MAP_IT":break;case"issuekey":d(w);q.push(y);break;case"Step Attachments":d(w);break;default:x.style.display="none";x.value=u.value;w.disabled=false;break}}function d(u){u.checked=false;AJS.$(u).parent().tooltip({title:function(){return "The Value Mapping is unavailable for this field."}})}function l(){if(n()){f("#nextButton").prop("disabled",false);f("#summary_warning").hide()}else{f("#nextButton").prop("disabled",true);f("#summary_warning").show()}}function c(v){var u=document.getElementById(v+"_select");e(v);t(u.value,v);l();p()}function p(){if(q.length===0){AJS.$("#test-case-parameters-info").empty()}else{if(AJS.$("#test-case-parameters-info .aui-message").length===0){AJS.messages.info("#test-case-parameters-info",{body:"You have selected \u003cstrong\u003eIssue Key\u003c/strong\u003e mapping. Please note that importer will update existing issues matching the Issue Key from the CSV file.",closeable:false})}}}function b(u){m.push(u)}function j(){var u=f("#requiredFields").val();if(u){var w=k(u);for(var v=0;v<w.length;v++){var x=m.indexOf(w[v].trim());if(x<0){return false}}}return true}function i(){return o.length>0&&s.length>0}function n(){return j()&&i()}function k(v){var u=v.replace(/[[\]]/g,"");return u.split(",")}f(document).ready(function(){r()})})(AJS.$);;